var A3=(_e,_)=>()=>(_||_e((_={exports:{}}).exports,_),_.exports);var v3=A3((exports,module)=>{function _mergeNamespaces(_e,_){for(var tt=0;tt<_.length;tt++){const nt=_[tt];if(typeof nt!="string"&&!Array.isArray(nt)){for(const rt in nt)if(rt!=="default"&&!(rt in _e)){const it=Object.getOwnPropertyDescriptor(nt,rt);it&&Object.defineProperty(_e,rt,it.get?it:{enumerable:!0,get:()=>nt[rt]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const rt of document.querySelectorAll('link[rel="modulepreload"]'))nt(rt);new MutationObserver(rt=>{for(const it of rt)if(it.type==="childList")for(const at of it.addedNodes)at.tagName==="LINK"&&at.rel==="modulepreload"&&nt(at)}).observe(document,{childList:!0,subtree:!0});function tt(rt){const it={};return rt.integrity&&(it.integrity=rt.integrity),rt.referrerPolicy&&(it.referrerPolicy=rt.referrerPolicy),rt.crossOrigin==="use-credentials"?it.credentials="include":rt.crossOrigin==="anonymous"?it.credentials="omit":it.credentials="same-origin",it}function nt(rt){if(rt.ep)return;rt.ep=!0;const it=tt(rt);fetch(rt.href,it)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$4=Symbol.for("react.portal"),p$7=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$3=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$4=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$3(_e){return _e===null||typeof _e!="object"?null:(_e=z$2&&_e[z$2]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$2={};function E$2(_e,_,tt){this.props=_e,this.context=_,this.refs=D$2,this.updater=tt||B$3}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_e,_){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,_,"setState")};E$2.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F$2(){}F$2.prototype=E$2.prototype;function G$2(_e,_,tt){this.props=_e,this.context=_,this.refs=D$2,this.updater=tt||B$3}var H$3=G$2.prototype=new F$2;H$3.constructor=G$2;C$3(H$3,E$2.prototype);H$3.isPureReactComponent=!0;var I$5=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$1={current:null},L$3={key:!0,ref:!0,__self:!0,__source:!0};function M$3(_e,_,tt){var nt,rt={},it=null,at=null;if(_!=null)for(nt in _.ref!==void 0&&(at=_.ref),_.key!==void 0&&(it=""+_.key),_)J$2.call(_,nt)&&!L$3.hasOwnProperty(nt)&&(rt[nt]=_[nt]);var ot=arguments.length-2;if(ot===1)rt.children=tt;else if(1<ot){for(var st=Array(ot),lt=0;lt<ot;lt++)st[lt]=arguments[lt+2];rt.children=st}if(_e&&_e.defaultProps)for(nt in ot=_e.defaultProps,ot)rt[nt]===void 0&&(rt[nt]=ot[nt]);return{$$typeof:l$4,type:_e,key:it,ref:at,props:rt,_owner:K$1.current}}function N$3(_e,_){return{$$typeof:l$4,type:_e.type,key:_,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$2(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$4}function escape$1(_e){var _={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(tt){return _[tt]})}var P$2=/\/+/g;function Q$3(_e,_){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):_.toString(36)}function R$2(_e,_,tt,nt,rt){var it=typeof _e;(it==="undefined"||it==="boolean")&&(_e=null);var at=!1;if(_e===null)at=!0;else switch(it){case"string":case"number":at=!0;break;case"object":switch(_e.$$typeof){case l$4:case n$4:at=!0}}if(at)return at=_e,rt=rt(at),_e=nt===""?"."+Q$3(at,0):nt,I$5(rt)?(tt="",_e!=null&&(tt=_e.replace(P$2,"$&/")+"/"),R$2(rt,_,tt,"",function(lt){return lt})):rt!=null&&(O$2(rt)&&(rt=N$3(rt,tt+(!rt.key||at&&at.key===rt.key?"":(""+rt.key).replace(P$2,"$&/")+"/")+_e)),_.push(rt)),1;if(at=0,nt=nt===""?".":nt+":",I$5(_e))for(var ot=0;ot<_e.length;ot++){it=_e[ot];var st=nt+Q$3(it,ot);at+=R$2(it,_,tt,st,rt)}else if(st=A$3(_e),typeof st=="function")for(_e=st.call(_e),ot=0;!(it=_e.next()).done;)it=it.value,st=nt+Q$3(it,ot++),at+=R$2(it,_,tt,st,rt);else if(it==="object")throw _=String(_e),Error("Objects are not valid as a React child (found: "+(_==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":_)+"). If you meant to render a collection of children, use an array instead.");return at}function S$4(_e,_,tt){if(_e==null)return _e;var nt=[],rt=0;return R$2(_e,nt,"","",function(it){return _.call(tt,it,rt++)}),nt}function T$3(_e){if(_e._status===-1){var _=_e._result;_=_(),_.then(function(tt){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=tt)},function(tt){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=tt)}),_e._status===-1&&(_e._status=0,_e._result=_)}if(_e._status===1)return _e._result.default;throw _e._result}var U$3={current:null},V$4={transition:null},W$2={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$1};react_production_min.Children={map:S$4,forEach:function(_e,_,tt){S$4(_e,function(){_.apply(this,arguments)},tt)},count:function(_e){var _=0;return S$4(_e,function(){_++}),_},toArray:function(_e){return S$4(_e,function(_){return _})||[]},only:function(_e){if(!O$2(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$2;react_production_min.Fragment=p$7;react_production_min.Profiler=r$3;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(_e,_,tt){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var nt=C$3({},_e.props),rt=_e.key,it=_e.ref,at=_e._owner;if(_!=null){if(_.ref!==void 0&&(it=_.ref,at=K$1.current),_.key!==void 0&&(rt=""+_.key),_e.type&&_e.type.defaultProps)var ot=_e.type.defaultProps;for(st in _)J$2.call(_,st)&&!L$3.hasOwnProperty(st)&&(nt[st]=_[st]===void 0&&ot!==void 0?ot[st]:_[st])}var st=arguments.length-2;if(st===1)nt.children=tt;else if(1<st){ot=Array(st);for(var lt=0;lt<st;lt++)ot[lt]=arguments[lt+2];nt.children=ot}return{$$typeof:l$4,type:_e.type,key:rt,ref:it,props:nt,_owner:at}};react_production_min.createContext=function(_e){return _e={$$typeof:u$4,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$3,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$3;react_production_min.createFactory=function(_e){var _=M$3.bind(null,_e);return _.type=_e,_};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$4,render:_e}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(_e){return{$$typeof:y$3,_payload:{_status:-1,_result:_e},_init:T$3}};react_production_min.memo=function(_e,_){return{$$typeof:x$3,type:_e,compare:_===void 0?null:_}};react_production_min.startTransition=function(_e){var _=V$4.transition;V$4.transition={};try{_e()}finally{V$4.transition=_}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(_e,_){return U$3.current.useCallback(_e,_)};react_production_min.useContext=function(_e){return U$3.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$3.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,_){return U$3.current.useEffect(_e,_)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(_e,_,tt){return U$3.current.useImperativeHandle(_e,_,tt)};react_production_min.useInsertionEffect=function(_e,_){return U$3.current.useInsertionEffect(_e,_)};react_production_min.useLayoutEffect=function(_e,_){return U$3.current.useLayoutEffect(_e,_)};react_production_min.useMemo=function(_e,_){return U$3.current.useMemo(_e,_)};react_production_min.useReducer=function(_e,_,tt){return U$3.current.useReducer(_e,_,tt)};react_production_min.useRef=function(_e){return U$3.current.useRef(_e)};react_production_min.useState=function(_e){return U$3.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,_,tt){return U$3.current.useSyncExternalStore(_e,_,tt)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),$2AODx$react=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$4=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$5=Object.prototype.hasOwnProperty,n$3=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$6={key:!0,ref:!0,__self:!0,__source:!0};function q$3(_e,_,tt){var nt,rt={},it=null,at=null;tt!==void 0&&(it=""+tt),_.key!==void 0&&(it=""+_.key),_.ref!==void 0&&(at=_.ref);for(nt in _)m$5.call(_,nt)&&!p$6.hasOwnProperty(nt)&&(rt[nt]=_[nt]);if(_e&&_e.defaultProps)for(nt in _=_e.defaultProps,_)rt[nt]===void 0&&(rt[nt]=_[nt]);return{$$typeof:k$4,type:_e,key:it,ref:at,props:rt,_owner:n$3.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler$2={exports:{}},scheduler_production_min$2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function _(Dt,zt){var $t=Dt.length;Dt.push(zt);e:for(;0<$t;){var Lt=$t-1>>>1,Vt=Dt[Lt];if(0<rt(Vt,zt))Dt[Lt]=zt,Dt[$t]=Vt,$t=Lt;else break e}}function tt(Dt){return Dt.length===0?null:Dt[0]}function nt(Dt){if(Dt.length===0)return null;var zt=Dt[0],$t=Dt.pop();if($t!==zt){Dt[0]=$t;e:for(var Lt=0,Vt=Dt.length,tn=Vt>>>1;Lt<tn;){var an=2*(Lt+1)-1,on=Dt[an],sn=an+1,ln=Dt[sn];if(0>rt(on,$t))sn<Vt&&0>rt(ln,on)?(Dt[Lt]=ln,Dt[sn]=$t,Lt=sn):(Dt[Lt]=on,Dt[an]=$t,Lt=an);else if(sn<Vt&&0>rt(ln,$t))Dt[Lt]=ln,Dt[sn]=$t,Lt=sn;else break e}}return zt}function rt(Dt,zt){var $t=Dt.sortIndex-zt.sortIndex;return $t!==0?$t:Dt.id-zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var at=Date,ot=at.now();_e.unstable_now=function(){return at.now()-ot}}var st=[],lt=[],ct=1,ut=null,ft=3,pt=!1,gt=!1,xt=!1,yt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,At=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function vt(Dt){for(var zt=tt(lt);zt!==null;){if(zt.callback===null)nt(lt);else if(zt.startTime<=Dt)nt(lt),zt.sortIndex=zt.expirationTime,_(st,zt);else break;zt=tt(lt)}}function Et(Dt){if(xt=!1,vt(Dt),!gt)if(tt(st)!==null)gt=!0,Xt(Ct);else{var zt=tt(lt);zt!==null&&Jt(Et,zt.startTime-Dt)}}function Ct(Dt,zt){gt=!1,xt&&(xt=!1,mt(It),It=-1),pt=!0;var $t=ft;try{for(vt(zt),ut=tt(st);ut!==null&&(!(ut.expirationTime>zt)||Dt&&!Ft());){var Lt=ut.callback;if(typeof Lt=="function"){ut.callback=null,ft=ut.priorityLevel;var Vt=Lt(ut.expirationTime<=zt);zt=_e.unstable_now(),typeof Vt=="function"?ut.callback=Vt:ut===tt(st)&&nt(st),vt(zt)}else nt(st);ut=tt(st)}if(ut!==null)var tn=!0;else{var an=tt(lt);an!==null&&Jt(Et,an.startTime-zt),tn=!1}return tn}finally{ut=null,ft=$t,pt=!1}}var Tt=!1,bt=null,It=-1,wt=5,Rt=-1;function Ft(){return!(_e.unstable_now()-Rt<wt)}function Ut(){if(bt!==null){var Dt=_e.unstable_now();Rt=Dt;var zt=!0;try{zt=bt(!0,Dt)}finally{zt?Gt():(Tt=!1,bt=null)}}else Tt=!1}var Gt;if(typeof At=="function")Gt=function(){At(Ut)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,jt=Ht.port2;Ht.port1.onmessage=Ut,Gt=function(){jt.postMessage(null)}}else Gt=function(){yt(Ut,0)};function Xt(Dt){bt=Dt,Tt||(Tt=!0,Gt())}function Jt(Dt,zt){It=yt(function(){Dt(_e.unstable_now())},zt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Dt){Dt.callback=null},_e.unstable_continueExecution=function(){gt||pt||(gt=!0,Xt(Ct))},_e.unstable_forceFrameRate=function(Dt){0>Dt||125<Dt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<Dt?Math.floor(1e3/Dt):5},_e.unstable_getCurrentPriorityLevel=function(){return ft},_e.unstable_getFirstCallbackNode=function(){return tt(st)},_e.unstable_next=function(Dt){switch(ft){case 1:case 2:case 3:var zt=3;break;default:zt=ft}var $t=ft;ft=zt;try{return Dt()}finally{ft=$t}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Dt,zt){switch(Dt){case 1:case 2:case 3:case 4:case 5:break;default:Dt=3}var $t=ft;ft=Dt;try{return zt()}finally{ft=$t}},_e.unstable_scheduleCallback=function(Dt,zt,$t){var Lt=_e.unstable_now();switch(typeof $t=="object"&&$t!==null?($t=$t.delay,$t=typeof $t=="number"&&0<$t?Lt+$t:Lt):$t=Lt,Dt){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=$t+Vt,Dt={id:ct++,callback:zt,priorityLevel:Dt,startTime:$t,expirationTime:Vt,sortIndex:-1},$t>Lt?(Dt.sortIndex=$t,_(lt,Dt),tt(st)===null&&Dt===tt(lt)&&(xt?(mt(It),It=-1):xt=!0,Jt(Et,$t-Lt))):(Dt.sortIndex=Vt,_(st,Dt),gt||pt||(gt=!0,Xt(Ct))),Dt},_e.unstable_shouldYield=Ft,_e.unstable_wrapCallback=function(Dt){var zt=ft;return function(){var $t=ft;ft=zt;try{return Dt.apply(this,arguments)}finally{ft=$t}}}})(scheduler_production_min$2);scheduler$2.exports=scheduler_production_min$2;var schedulerExports$1=scheduler$2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports$1;function p$5(_e){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+_e,tt=1;tt<arguments.length;tt++)_+="&args[]="+encodeURIComponent(arguments[tt]);return"Minified React error #"+_e+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,_){ha(_e,_),ha(_e+"Capture",_)}function ha(_e,_){for(ea[_e]=_,_e=0;_e<_.length;_e++)da.add(_[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,_,tt,nt){if(tt!==null&&tt.type===0)return!1;switch(typeof _){case"function":case"symbol":return!0;case"boolean":return nt?!1:tt!==null?!tt.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,_,tt,nt){if(_===null||typeof _>"u"||pa(_e,_,tt,nt))return!0;if(nt)return!1;if(tt!==null)switch(tt.type){case 3:return!_;case 4:return _===!1;case 5:return isNaN(_);case 6:return isNaN(_)||1>_}return!1}function v$3(_e,_,tt,nt,rt,it,at){this.acceptsBooleans=_===2||_===3||_===4,this.attributeName=nt,this.attributeNamespace=rt,this.mustUseProperty=tt,this.propertyName=_e,this.type=_,this.sanitizeURL=it,this.removeEmptyString=at}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$1[_e]=new v$3(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var _=_e[0];z$1[_]=new v$3(_,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$1[_e]=new v$3(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$1[_e]=new v$3(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$1[_e]=new v$3(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$1[_e]=new v$3(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$1[_e]=new v$3(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$1[_e]=new v$3(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$1[_e]=new v$3(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$3(_,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$3(_,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var _=_e.replace(ra,sa);z$1[_]=new v$3(_,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$1[_e]=new v$3(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$1[_e]=new v$3(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,_,tt,nt){var rt=z$1.hasOwnProperty(_)?z$1[_]:null;(rt!==null?rt.type!==0:nt||!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(qa(_,tt,rt,nt)&&(tt=null),nt||rt===null?oa(_)&&(tt===null?_e.removeAttribute(_):_e.setAttribute(_,""+tt)):rt.mustUseProperty?_e[rt.propertyName]=tt===null?rt.type===3?!1:"":tt:(_=rt.attributeName,nt=rt.attributeNamespace,tt===null?_e.removeAttribute(_):(rt=rt.type,tt=rt===3||rt===4&&tt===!0?"":""+tt,nt?_e.setAttributeNS(nt,_,tt):_e.setAttribute(_,tt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$2=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(tt){var _=tt.stack.trim().match(/\n( *(at )?)/);La=_&&_[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,_){if(!_e||Na)return"";Na=!0;var tt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(lt){var nt=lt}Reflect.construct(_e,[],_)}else{try{_.call()}catch(lt){nt=lt}_e.call(_.prototype)}else{try{throw Error()}catch(lt){nt=lt}_e()}}catch(lt){if(lt&&nt&&typeof lt.stack=="string"){for(var rt=lt.stack.split(`
`),it=nt.stack.split(`
`),at=rt.length-1,ot=it.length-1;1<=at&&0<=ot&&rt[at]!==it[ot];)ot--;for(;1<=at&&0<=ot;at--,ot--)if(rt[at]!==it[ot]){if(at!==1||ot!==1)do if(at--,ot--,0>ot||rt[at]!==it[ot]){var st=`
`+rt[at].replace(" at new "," at ");return _e.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",_e.displayName)),st}while(1<=at&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=tt}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var _=_e.render;return _e=_e.displayName,_e||(_e=_.displayName||_.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return _=_e.displayName||null,_!==null?_:Qa(_e.type)||"Memo";case Ha:_=_e._payload,_e=_e._init;try{return Qa(_e(_))}catch{}}return null}function Ra(_e){var _=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=_.render,_e=_e.displayName||_e.name||"",_.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(_);case 8:return _===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var _=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(_==="checkbox"||_==="radio")}function Ua(_e){var _=Ta(_e)?"checked":"value",tt=Object.getOwnPropertyDescriptor(_e.constructor.prototype,_),nt=""+_e[_];if(!_e.hasOwnProperty(_)&&typeof tt<"u"&&typeof tt.get=="function"&&typeof tt.set=="function"){var rt=tt.get,it=tt.set;return Object.defineProperty(_e,_,{configurable:!0,get:function(){return rt.call(this)},set:function(at){nt=""+at,it.call(this,at)}}),Object.defineProperty(_e,_,{enumerable:tt.enumerable}),{getValue:function(){return nt},setValue:function(at){nt=""+at},stopTracking:function(){_e._valueTracker=null,delete _e[_]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var _=_e._valueTracker;if(!_)return!0;var tt=_.getValue(),nt="";return _e&&(nt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=nt,_e!==tt?(_.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,_){var tt=_.checked;return A$2({},_,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:tt??_e._wrapperState.initialChecked})}function Za(_e,_){var tt=_.defaultValue==null?"":_.defaultValue,nt=_.checked!=null?_.checked:_.defaultChecked;tt=Sa(_.value!=null?_.value:tt),_e._wrapperState={initialChecked:nt,initialValue:tt,controlled:_.type==="checkbox"||_.type==="radio"?_.checked!=null:_.value!=null}}function ab(_e,_){_=_.checked,_!=null&&ta(_e,"checked",_,!1)}function bb(_e,_){ab(_e,_);var tt=Sa(_.value),nt=_.type;if(tt!=null)nt==="number"?(tt===0&&_e.value===""||_e.value!=tt)&&(_e.value=""+tt):_e.value!==""+tt&&(_e.value=""+tt);else if(nt==="submit"||nt==="reset"){_e.removeAttribute("value");return}_.hasOwnProperty("value")?cb(_e,_.type,tt):_.hasOwnProperty("defaultValue")&&cb(_e,_.type,Sa(_.defaultValue)),_.checked==null&&_.defaultChecked!=null&&(_e.defaultChecked=!!_.defaultChecked)}function db(_e,_,tt){if(_.hasOwnProperty("value")||_.hasOwnProperty("defaultValue")){var nt=_.type;if(!(nt!=="submit"&&nt!=="reset"||_.value!==void 0&&_.value!==null))return;_=""+_e._wrapperState.initialValue,tt||_===_e.value||(_e.value=_),_e.defaultValue=_}tt=_e.name,tt!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,tt!==""&&(_e.name=tt)}function cb(_e,_,tt){(_!=="number"||Xa(_e.ownerDocument)!==_e)&&(tt==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+tt&&(_e.defaultValue=""+tt))}var eb=Array.isArray;function fb(_e,_,tt,nt){if(_e=_e.options,_){_={};for(var rt=0;rt<tt.length;rt++)_["$"+tt[rt]]=!0;for(tt=0;tt<_e.length;tt++)rt=_.hasOwnProperty("$"+_e[tt].value),_e[tt].selected!==rt&&(_e[tt].selected=rt),rt&&nt&&(_e[tt].defaultSelected=!0)}else{for(tt=""+Sa(tt),_=null,rt=0;rt<_e.length;rt++){if(_e[rt].value===tt){_e[rt].selected=!0,nt&&(_e[rt].defaultSelected=!0);return}_!==null||_e[rt].disabled||(_=_e[rt])}_!==null&&(_.selected=!0)}}function gb(_e,_){if(_.dangerouslySetInnerHTML!=null)throw Error(p$5(91));return A$2({},_,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,_){var tt=_.value;if(tt==null){if(tt=_.children,_=_.defaultValue,tt!=null){if(_!=null)throw Error(p$5(92));if(eb(tt)){if(1<tt.length)throw Error(p$5(93));tt=tt[0]}_=tt}_==null&&(_=""),tt=_}_e._wrapperState={initialValue:Sa(tt)}}function ib(_e,_){var tt=Sa(_.value),nt=Sa(_.defaultValue);tt!=null&&(tt=""+tt,tt!==_e.value&&(_e.value=tt),_.defaultValue==null&&_e.defaultValue!==tt&&(_e.defaultValue=tt)),nt!=null&&(_e.defaultValue=""+nt)}function jb(_e){var _=_e.textContent;_===_e._wrapperState.initialValue&&_!==""&&_!==null&&(_e.value=_)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,_){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(_):_e==="http://www.w3.org/2000/svg"&&_==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(_,tt,nt,rt){MSApp.execUnsafeLocalFunction(function(){return _e(_,tt,nt,rt)})}:_e}(function(_e,_){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=_;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+_.valueOf().toString()+"</svg>",_=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;_.firstChild;)_e.appendChild(_.firstChild)}});function ob(_e,_){if(_){var tt=_e.firstChild;if(tt&&tt===_e.lastChild&&tt.nodeType===3){tt.nodeValue=_;return}}_e.textContent=_}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(_){_=_+_e.charAt(0).toUpperCase()+_e.substring(1),pb[_]=pb[_e]})});function rb(_e,_,tt){return _==null||typeof _=="boolean"||_===""?"":tt||typeof _!="number"||_===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+_).trim():_+"px"}function sb(_e,_){_e=_e.style;for(var tt in _)if(_.hasOwnProperty(tt)){var nt=tt.indexOf("--")===0,rt=rb(tt,_[tt],nt);tt==="float"&&(tt="cssFloat"),nt?_e.setProperty(tt,rt):_e[tt]=rt}}var tb=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,_){if(_){if(tb[_e]&&(_.children!=null||_.dangerouslySetInnerHTML!=null))throw Error(p$5(137,_e));if(_.dangerouslySetInnerHTML!=null){if(_.children!=null)throw Error(p$5(60));if(typeof _.dangerouslySetInnerHTML!="object"||!("__html"in _.dangerouslySetInnerHTML))throw Error(p$5(61))}if(_.style!=null&&typeof _.style!="object")throw Error(p$5(62))}}function vb(_e,_){if(_e.indexOf("-")===-1)return typeof _.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$5(280));var _=_e.stateNode;_&&(_=Db(_),yb(_e.stateNode,_e.type,_))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,_=Ab;if(Ab=zb=null,Bb(_e),_)for(_e=0;_e<_.length;_e++)Bb(_[_e])}}function Gb(_e,_){return _e(_)}function Hb(){}var Ib=!1;function Jb(_e,_,tt){if(Ib)return _e(_,tt);Ib=!0;try{return Gb(_e,_,tt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,_){var tt=_e.stateNode;if(tt===null)return null;var nt=Db(tt);if(nt===null)return null;tt=nt[_];e:switch(_){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nt=!nt.disabled)||(_e=_e.type,nt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!nt;break e;default:_e=!1}if(_e)return null;if(tt&&typeof tt!="function")throw Error(p$5(231,_,typeof tt));return tt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,_,tt,nt,rt,it,at,ot,st){var lt=Array.prototype.slice.call(arguments,3);try{_.apply(tt,lt)}catch(ct){this.onError(ct)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,_,tt,nt,rt,it,at,ot,st){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,_,tt,nt,rt,it,at,ot,st){if(Tb.apply(this,arguments),Ob){if(Ob){var lt=Pb;Ob=!1,Pb=null}else throw Error(p$5(198));Qb||(Qb=!0,Rb=lt)}}function Vb(_e){var _=_e,tt=_e;if(_e.alternate)for(;_.return;)_=_.return;else{_e=_;do _=_e,_.flags&4098&&(tt=_.return),_e=_.return;while(_e)}return _.tag===3?tt:null}function Wb(_e){if(_e.tag===13){var _=_e.memoizedState;if(_===null&&(_e=_e.alternate,_e!==null&&(_=_e.memoizedState)),_!==null)return _.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$5(188))}function Yb(_e){var _=_e.alternate;if(!_){if(_=Vb(_e),_===null)throw Error(p$5(188));return _!==_e?null:_e}for(var tt=_e,nt=_;;){var rt=tt.return;if(rt===null)break;var it=rt.alternate;if(it===null){if(nt=rt.return,nt!==null){tt=nt;continue}break}if(rt.child===it.child){for(it=rt.child;it;){if(it===tt)return Xb(rt),_e;if(it===nt)return Xb(rt),_;it=it.sibling}throw Error(p$5(188))}if(tt.return!==nt.return)tt=rt,nt=it;else{for(var at=!1,ot=rt.child;ot;){if(ot===tt){at=!0,tt=rt,nt=it;break}if(ot===nt){at=!0,nt=rt,tt=it;break}ot=ot.sibling}if(!at){for(ot=it.child;ot;){if(ot===tt){at=!0,tt=it,nt=rt;break}if(ot===nt){at=!0,nt=it,tt=rt;break}ot=ot.sibling}if(!at)throw Error(p$5(189))}}if(tt.alternate!==nt)throw Error(p$5(190))}if(tt.tag!==3)throw Error(p$5(188));return tt.stateNode.current===tt?_e:_}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var _=$b(_e);if(_!==null)return _;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc$1=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$2=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,_){var tt=_e.pendingLanes;if(tt===0)return 0;var nt=0,rt=_e.suspendedLanes,it=_e.pingedLanes,at=tt&268435455;if(at!==0){var ot=at&~rt;ot!==0?nt=tc(ot):(it&=at,it!==0&&(nt=tc(it)))}else at=tt&~rt,at!==0?nt=tc(at):it!==0&&(nt=tc(it));if(nt===0)return 0;if(_!==0&&_!==nt&&!(_&rt)&&(rt=nt&-nt,it=_&-_,rt>=it||rt===16&&(it&4194240)!==0))return _;if(nt&4&&(nt|=tt&16),_=_e.entangledLanes,_!==0)for(_e=_e.entanglements,_&=nt;0<_;)tt=31-oc(_),rt=1<<tt,nt|=_e[tt],_&=~rt;return nt}function vc(_e,_){switch(_e){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,_){for(var tt=_e.suspendedLanes,nt=_e.pingedLanes,rt=_e.expirationTimes,it=_e.pendingLanes;0<it;){var at=31-oc(it),ot=1<<at,st=rt[at];st===-1?(!(ot&tt)||ot&nt)&&(rt[at]=vc(ot,_)):st<=_&&(_e.expiredLanes|=ot),it&=~ot}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var _=[],tt=0;31>tt;tt++)_.push(_e);return _}function Ac(_e,_,tt){_e.pendingLanes|=_,_!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,_=31-oc(_),_e[_]=tt}function Bc(_e,_){var tt=_e.pendingLanes&~_;_e.pendingLanes=_,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=_,_e.mutableReadLanes&=_,_e.entangledLanes&=_,_=_e.entanglements;var nt=_e.eventTimes;for(_e=_e.expirationTimes;0<tt;){var rt=31-oc(tt),it=1<<rt;_[rt]=0,nt[rt]=-1,_e[rt]=-1,tt&=~it}}function Cc(_e,_){var tt=_e.entangledLanes|=_;for(_e=_e.entanglements;tt;){var nt=31-oc(tt),rt=1<<nt;rt&_|_e[nt]&_&&(_e[nt]|=_),tt&=~rt}}var C$2=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,_){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(_.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(_.pointerId)}}function Tc(_e,_,tt,nt,rt,it){return _e===null||_e.nativeEvent!==it?(_e={blockedOn:_,domEventName:tt,eventSystemFlags:nt,nativeEvent:it,targetContainers:[rt]},_!==null&&(_=Cb(_),_!==null&&Fc(_)),_e):(_e.eventSystemFlags|=nt,_=_e.targetContainers,rt!==null&&_.indexOf(rt)===-1&&_.push(rt),_e)}function Uc(_e,_,tt,nt,rt){switch(_){case"focusin":return Lc=Tc(Lc,_e,_,tt,nt,rt),!0;case"dragenter":return Mc=Tc(Mc,_e,_,tt,nt,rt),!0;case"mouseover":return Nc=Tc(Nc,_e,_,tt,nt,rt),!0;case"pointerover":var it=rt.pointerId;return Oc.set(it,Tc(Oc.get(it)||null,_e,_,tt,nt,rt)),!0;case"gotpointercapture":return it=rt.pointerId,Pc.set(it,Tc(Pc.get(it)||null,_e,_,tt,nt,rt)),!0}return!1}function Vc(_e){var _=Wc(_e.target);if(_!==null){var tt=Vb(_);if(tt!==null){if(_=tt.tag,_===13){if(_=Wb(tt),_!==null){_e.blockedOn=_,Ic(_e.priority,function(){Gc(tt)});return}}else if(_===3&&tt.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=tt.tag===3?tt.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var _=_e.targetContainers;0<_.length;){var tt=Yc(_e.domEventName,_e.eventSystemFlags,_[0],_e.nativeEvent);if(tt===null){tt=_e.nativeEvent;var nt=new tt.constructor(tt.type,tt);wb=nt,tt.target.dispatchEvent(nt),wb=null}else return _=Cb(tt),_!==null&&Fc(_),_e.blockedOn=tt,!1;_.shift()}return!0}function Zc(_e,_,tt){Xc(_e)&&tt.delete(_)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,_){_e.blockedOn===_&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function _(rt){return ad(rt,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var tt=1;tt<Kc.length;tt++){var nt=Kc[tt];nt.blockedOn===_e&&(nt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(_),Pc.forEach(_),tt=0;tt<Qc.length;tt++)nt=Qc[tt],nt.blockedOn===_e&&(nt.blockedOn=null);for(;0<Qc.length&&(tt=Qc[0],tt.blockedOn===null);)Vc(tt),tt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_e,_,tt,nt){var rt=C$2,it=cd.transition;cd.transition=null;try{C$2=1,fd$1(_e,_,tt,nt)}finally{C$2=rt,cd.transition=it}}function gd(_e,_,tt,nt){var rt=C$2,it=cd.transition;cd.transition=null;try{C$2=4,fd$1(_e,_,tt,nt)}finally{C$2=rt,cd.transition=it}}function fd$1(_e,_,tt,nt){if(dd){var rt=Yc(_e,_,tt,nt);if(rt===null)hd(_e,_,nt,id,tt),Sc(_e,nt);else if(Uc(rt,_e,_,tt,nt))nt.stopPropagation();else if(Sc(_e,nt),_&4&&-1<Rc.indexOf(_e)){for(;rt!==null;){var it=Cb(rt);if(it!==null&&Ec(it),it=Yc(_e,_,tt,nt),it===null&&hd(_e,_,nt,id,tt),it===rt)break;rt=it}rt!==null&&nt.stopPropagation()}else hd(_e,_,nt,null,tt)}}var id=null;function Yc(_e,_,tt,nt){if(id=null,_e=xb(nt),_e=Wc(_e),_e!==null)if(_=Vb(_e),_===null)_e=null;else if(tt=_.tag,tt===13){if(_e=Wb(_),_e!==null)return _e;_e=null}else if(tt===3){if(_.stateNode.current.memoizedState.isDehydrated)return _.tag===3?_.stateNode.containerInfo:null;_e=null}else _!==_e&&(_e=null);return id=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,_=ld,tt=_.length,nt,rt="value"in kd?kd.value:kd.textContent,it=rt.length;for(_e=0;_e<tt&&_[_e]===rt[_e];_e++);var at=tt-_e;for(nt=1;nt<=at&&_[tt-nt]===rt[it-nt];nt++);return md=rt.slice(_e,1<nt?1-nt:void 0)}function od(_e){var _=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&_===13&&(_e=13)):_e=_,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function _(tt,nt,rt,it,at){this._reactName=tt,this._targetInst=rt,this.type=nt,this.nativeEvent=it,this.target=at,this.currentTarget=null;for(var ot in _e)_e.hasOwnProperty(ot)&&(tt=_e[ot],this[ot]=tt?tt(it):it[ot]);return this.isDefaultPrevented=(it.defaultPrevented!=null?it.defaultPrevented:it.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$2(_.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tt=this.nativeEvent;tt&&(tt.preventDefault?tt.preventDefault():typeof tt.returnValue!="unknown"&&(tt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var tt=this.nativeEvent;tt&&(tt.stopPropagation?tt.stopPropagation():typeof tt.cancelBubble!="unknown"&&(tt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),_}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd),ud=A$2({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$2({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$2({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$2({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$2({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$2({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$2({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var _=this.nativeEvent;return _.getModifierState?_.getModifierState(_e):(_e=Od[_e])?!!_[_e]:!1}function zd(){return Pd}var Qd=A$2({},ud,{key:function(_e){if(_e.key){var _=Md[_e.key]||_e.key;if(_!=="Unidentified")return _}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$2({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$2({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$2({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$2({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee$1=String.fromCharCode(32),fe=!1;function ge(_e,_){switch(_e){case"keyup":return $d.indexOf(_.keyCode)!==-1;case"keydown":return _.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,_){switch(_e){case"compositionend":return he(_);case"keypress":return _.which!==32?null:(fe=!0,ee$1);case"textInput":return _e=_.data,_e===ee$1&&fe?null:_e;default:return null}}function ke(_e,_){if(ie)return _e==="compositionend"||!ae&&ge(_e,_)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(_.ctrlKey||_.altKey||_.metaKey)||_.ctrlKey&&_.altKey){if(_.char&&1<_.char.length)return _.char;if(_.which)return String.fromCharCode(_.which)}return null;case"compositionend":return de&&_.locale!=="ko"?null:_.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _==="input"?!!le[_e.type]:_==="textarea"}function ne(_e,_,tt,nt){Eb(nt),_=oe(_,"onChange"),0<_.length&&(tt=new td$1("onChange","change",null,tt,nt),_e.push({event:tt,listeners:_}))}var pe=null,qe=null;function re$1(_e){se(_e,0)}function te(_e){var _=ue(_e);if(Wa(_))return _e}function ve(_e,_){if(_e==="change")return _}var we=!1;if(ia){var xe$1;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe$1=ye}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_e){if(_e.propertyName==="value"&&te(qe)){var _=[];ne(_,qe,_e,xb(_e)),Jb(re$1,_)}}function Ce$1(_e,_,tt){_e==="focusin"?(Ae(),pe=_,qe=tt,pe.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te(qe)}function Ee(_e,_){if(_e==="click")return te(_)}function Fe(_e,_){if(_e==="input"||_e==="change")return te(_)}function Ge(_e,_){return _e===_&&(_e!==0||1/_e===1/_)||_e!==_e&&_!==_}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,_){if(He(_e,_))return!0;if(typeof _e!="object"||_e===null||typeof _!="object"||_===null)return!1;var tt=Object.keys(_e),nt=Object.keys(_);if(tt.length!==nt.length)return!1;for(nt=0;nt<tt.length;nt++){var rt=tt[nt];if(!ja.call(_,rt)||!He(_e[rt],_[rt]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,_){var tt=Je(_e);_e=0;for(var nt;tt;){if(tt.nodeType===3){if(nt=_e+tt.textContent.length,_e<=_&&nt>=_)return{node:tt,offset:_-_e};_e=nt}e:{for(;tt;){if(tt.nextSibling){tt=tt.nextSibling;break e}tt=tt.parentNode}tt=void 0}tt=Je(tt)}}function Le(_e,_){return _e&&_?_e===_?!0:_e&&_e.nodeType===3?!1:_&&_.nodeType===3?Le(_e,_.parentNode):"contains"in _e?_e.contains(_):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(_)&16):!1:!1}function Me$1(){for(var _e=window,_=Xa();_ instanceof _e.HTMLIFrameElement;){try{var tt=typeof _.contentWindow.location.href=="string"}catch{tt=!1}if(tt)_e=_.contentWindow;else break;_=Xa(_e.document)}return _}function Ne$1(_e){var _=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return _&&(_==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||_==="textarea"||_e.contentEditable==="true")}function Oe(_e){var _=Me$1(),tt=_e.focusedElem,nt=_e.selectionRange;if(_!==tt&&tt&&tt.ownerDocument&&Le(tt.ownerDocument.documentElement,tt)){if(nt!==null&&Ne$1(tt)){if(_=nt.start,_e=nt.end,_e===void 0&&(_e=_),"selectionStart"in tt)tt.selectionStart=_,tt.selectionEnd=Math.min(_e,tt.value.length);else if(_e=(_=tt.ownerDocument||document)&&_.defaultView||window,_e.getSelection){_e=_e.getSelection();var rt=tt.textContent.length,it=Math.min(nt.start,rt);nt=nt.end===void 0?it:Math.min(nt.end,rt),!_e.extend&&it>nt&&(rt=nt,nt=it,it=rt),rt=Ke(tt,it);var at=Ke(tt,nt);rt&&at&&(_e.rangeCount!==1||_e.anchorNode!==rt.node||_e.anchorOffset!==rt.offset||_e.focusNode!==at.node||_e.focusOffset!==at.offset)&&(_=_.createRange(),_.setStart(rt.node,rt.offset),_e.removeAllRanges(),it>nt?(_e.addRange(_),_e.extend(at.node,at.offset)):(_.setEnd(at.node,at.offset),_e.addRange(_)))}}for(_=[],_e=tt;_e=_e.parentNode;)_e.nodeType===1&&_.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<_.length;tt++)_e=_[tt],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_e,_,tt){var nt=tt.window===tt?tt.document:tt.nodeType===9?tt:tt.ownerDocument;Te||Qe==null||Qe!==Xa(nt)||(nt=Qe,"selectionStart"in nt&&Ne$1(nt)?nt={start:nt.selectionStart,end:nt.selectionEnd}:(nt=(nt.ownerDocument&&nt.ownerDocument.defaultView||window).getSelection(),nt={anchorNode:nt.anchorNode,anchorOffset:nt.anchorOffset,focusNode:nt.focusNode,focusOffset:nt.focusOffset}),Se&&Ie(Se,nt)||(Se=nt,nt=oe(Re,"onSelect"),0<nt.length&&(_=new td$1("onSelect","select",null,_,tt),_e.push({event:_,listeners:nt}),_.target=Qe)))}function Ve(_e,_){var tt={};return tt[_e.toLowerCase()]=_.toLowerCase(),tt["Webkit"+_e]="webkit"+_,tt["Moz"+_e]="moz"+_,tt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var _=We[_e],tt;for(tt in _)if(_.hasOwnProperty(tt)&&tt in Ye)return Xe[_e]=_[tt];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,_){df.set(_e,_),fa(_,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,_,tt){var nt=_e.type||"unknown-event";_e.currentTarget=tt,Ub(nt,_,void 0,_e),_e.currentTarget=null}function se(_e,_){_=(_&4)!==0;for(var tt=0;tt<_e.length;tt++){var nt=_e[tt],rt=nt.event;nt=nt.listeners;e:{var it=void 0;if(_)for(var at=nt.length-1;0<=at;at--){var ot=nt[at],st=ot.instance,lt=ot.currentTarget;if(ot=ot.listener,st!==it&&rt.isPropagationStopped())break e;nf(rt,ot,lt),it=st}else for(at=0;at<nt.length;at++){if(ot=nt[at],st=ot.instance,lt=ot.currentTarget,ot=ot.listener,st!==it&&rt.isPropagationStopped())break e;nf(rt,ot,lt),it=st}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D$1(_e,_){var tt=_[of];tt===void 0&&(tt=_[of]=new Set);var nt=_e+"__bubble";tt.has(nt)||(pf(_,_e,2,!1),tt.add(nt))}function qf(_e,_,tt){var nt=0;_&&(nt|=4),pf(tt,_e,nt,_)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(tt){tt!=="selectionchange"&&(mf.has(tt)||qf(tt,!1,_e),qf(tt,!0,_e))});var _=_e.nodeType===9?_e:_e.ownerDocument;_===null||_[rf]||(_[rf]=!0,qf("selectionchange",!1,_))}}function pf(_e,_,tt,nt){switch(jd(_)){case 1:var rt=ed;break;case 4:rt=gd;break;default:rt=fd$1}tt=rt.bind(null,_,tt,_e),rt=void 0,!Lb||_!=="touchstart"&&_!=="touchmove"&&_!=="wheel"||(rt=!0),nt?rt!==void 0?_e.addEventListener(_,tt,{capture:!0,passive:rt}):_e.addEventListener(_,tt,!0):rt!==void 0?_e.addEventListener(_,tt,{passive:rt}):_e.addEventListener(_,tt,!1)}function hd(_e,_,tt,nt,rt){var it=nt;if(!(_&1)&&!(_&2)&&nt!==null)e:for(;;){if(nt===null)return;var at=nt.tag;if(at===3||at===4){var ot=nt.stateNode.containerInfo;if(ot===rt||ot.nodeType===8&&ot.parentNode===rt)break;if(at===4)for(at=nt.return;at!==null;){var st=at.tag;if((st===3||st===4)&&(st=at.stateNode.containerInfo,st===rt||st.nodeType===8&&st.parentNode===rt))return;at=at.return}for(;ot!==null;){if(at=Wc(ot),at===null)return;if(st=at.tag,st===5||st===6){nt=it=at;continue e}ot=ot.parentNode}}nt=nt.return}Jb(function(){var lt=it,ct=xb(tt),ut=[];e:{var ft=df.get(_e);if(ft!==void 0){var pt=td$1,gt=_e;switch(_e){case"keypress":if(od(tt)===0)break e;case"keydown":case"keyup":pt=Rd;break;case"focusin":gt="focus",pt=Fd;break;case"focusout":gt="blur",pt=Fd;break;case"beforeblur":case"afterblur":pt=Fd;break;case"click":if(tt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Vd;break;case $e:case af:case bf:pt=Hd;break;case cf:pt=Xd;break;case"scroll":pt=vd;break;case"wheel":pt=Zd;break;case"copy":case"cut":case"paste":pt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Td}var xt=(_&4)!==0,yt=!xt&&_e==="scroll",mt=xt?ft!==null?ft+"Capture":null:ft;xt=[];for(var At=lt,vt;At!==null;){vt=At;var Et=vt.stateNode;if(vt.tag===5&&Et!==null&&(vt=Et,mt!==null&&(Et=Kb(At,mt),Et!=null&&xt.push(tf(At,Et,vt)))),yt)break;At=At.return}0<xt.length&&(ft=new pt(ft,gt,null,tt,ct),ut.push({event:ft,listeners:xt}))}}if(!(_&7)){e:{if(ft=_e==="mouseover"||_e==="pointerover",pt=_e==="mouseout"||_e==="pointerout",ft&&tt!==wb&&(gt=tt.relatedTarget||tt.fromElement)&&(Wc(gt)||gt[uf]))break e;if((pt||ft)&&(ft=ct.window===ct?ct:(ft=ct.ownerDocument)?ft.defaultView||ft.parentWindow:window,pt?(gt=tt.relatedTarget||tt.toElement,pt=lt,gt=gt?Wc(gt):null,gt!==null&&(yt=Vb(gt),gt!==yt||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(pt=null,gt=lt),pt!==gt)){if(xt=Bd,Et="onMouseLeave",mt="onMouseEnter",At="mouse",(_e==="pointerout"||_e==="pointerover")&&(xt=Td,Et="onPointerLeave",mt="onPointerEnter",At="pointer"),yt=pt==null?ft:ue(pt),vt=gt==null?ft:ue(gt),ft=new xt(Et,At+"leave",pt,tt,ct),ft.target=yt,ft.relatedTarget=vt,Et=null,Wc(ct)===lt&&(xt=new xt(mt,At+"enter",gt,tt,ct),xt.target=vt,xt.relatedTarget=yt,Et=xt),yt=Et,pt&&gt)t:{for(xt=pt,mt=gt,At=0,vt=xt;vt;vt=vf(vt))At++;for(vt=0,Et=mt;Et;Et=vf(Et))vt++;for(;0<At-vt;)xt=vf(xt),At--;for(;0<vt-At;)mt=vf(mt),vt--;for(;At--;){if(xt===mt||mt!==null&&xt===mt.alternate)break t;xt=vf(xt),mt=vf(mt)}xt=null}else xt=null;pt!==null&&wf(ut,ft,pt,xt,!1),gt!==null&&yt!==null&&wf(ut,yt,gt,xt,!0)}}e:{if(ft=lt?ue(lt):window,pt=ft.nodeName&&ft.nodeName.toLowerCase(),pt==="select"||pt==="input"&&ft.type==="file")var Ct=ve;else if(me(ft))if(we)Ct=Fe;else{Ct=De;var Tt=Ce$1}else(pt=ft.nodeName)&&pt.toLowerCase()==="input"&&(ft.type==="checkbox"||ft.type==="radio")&&(Ct=Ee);if(Ct&&(Ct=Ct(_e,lt))){ne(ut,Ct,tt,ct);break e}Tt&&Tt(_e,ft,lt),_e==="focusout"&&(Tt=ft._wrapperState)&&Tt.controlled&&ft.type==="number"&&cb(ft,"number",ft.value)}switch(Tt=lt?ue(lt):window,_e){case"focusin":(me(Tt)||Tt.contentEditable==="true")&&(Qe=Tt,Re=lt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ut,tt,ct);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ut,tt,ct)}var bt;if(ae)e:{switch(_e){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else ie?ge(_e,tt)&&(It="onCompositionEnd"):_e==="keydown"&&tt.keyCode===229&&(It="onCompositionStart");It&&(de&&tt.locale!=="ko"&&(ie||It!=="onCompositionStart"?It==="onCompositionEnd"&&ie&&(bt=nd()):(kd=ct,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Tt=oe(lt,It),0<Tt.length&&(It=new Ld(It,_e,null,tt,ct),ut.push({event:It,listeners:Tt}),bt?It.data=bt:(bt=he(tt),bt!==null&&(It.data=bt)))),(bt=ce?je(_e,tt):ke(_e,tt))&&(lt=oe(lt,"onBeforeInput"),0<lt.length&&(ct=new Ld("onBeforeInput","beforeinput",null,tt,ct),ut.push({event:ct,listeners:lt}),ct.data=bt))}se(ut,_)})}function tf(_e,_,tt){return{instance:_e,listener:_,currentTarget:tt}}function oe(_e,_){for(var tt=_+"Capture",nt=[];_e!==null;){var rt=_e,it=rt.stateNode;rt.tag===5&&it!==null&&(rt=it,it=Kb(_e,tt),it!=null&&nt.unshift(tf(_e,it,rt)),it=Kb(_e,_),it!=null&&nt.push(tf(_e,it,rt))),_e=_e.return}return nt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,_,tt,nt,rt){for(var it=_._reactName,at=[];tt!==null&&tt!==nt;){var ot=tt,st=ot.alternate,lt=ot.stateNode;if(st!==null&&st===nt)break;ot.tag===5&&lt!==null&&(ot=lt,rt?(st=Kb(tt,it),st!=null&&at.unshift(tf(tt,st,ot))):rt||(st=Kb(tt,it),st!=null&&at.push(tf(tt,st,ot)))),tt=tt.return}at.length!==0&&_e.push({event:_,listeners:at})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,_,tt){if(_=zf(_),zf(_e)!==_&&tt)throw Error(p$5(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,_){return _e==="textarea"||_e==="noscript"||typeof _.children=="string"||typeof _.children=="number"||typeof _.dangerouslySetInnerHTML=="object"&&_.dangerouslySetInnerHTML!==null&&_.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,_){var tt=_,nt=0;do{var rt=tt.nextSibling;if(_e.removeChild(tt),rt&&rt.nodeType===8)if(tt=rt.data,tt==="/$"){if(nt===0){_e.removeChild(rt),bd(_);return}nt--}else tt!=="$"&&tt!=="$?"&&tt!=="$!"||nt++;tt=rt}while(tt);bd(_)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var _=_e.nodeType;if(_===1||_===3)break;if(_===8){if(_=_e.data,_==="$"||_==="$!"||_==="$?")break;if(_==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var _=0;_e;){if(_e.nodeType===8){var tt=_e.data;if(tt==="$"||tt==="$!"||tt==="$?"){if(_===0)return _e;_--}else tt==="/$"&&_++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var _=_e[Of];if(_)return _;for(var tt=_e.parentNode;tt;){if(_=tt[uf]||tt[Of]){if(tt=_.alternate,_.child!==null||tt!==null&&tt.child!==null)for(_e=Mf(_e);_e!==null;){if(tt=_e[Of])return tt;_e=Mf(_e)}return _}_e=tt,tt=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$5(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$1(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(_e,_){Tf++,Sf[Tf]=_e.current,_e.current=_}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,_){var tt=_e.type.contextTypes;if(!tt)return Vf;var nt=_e.stateNode;if(nt&&nt.__reactInternalMemoizedUnmaskedChildContext===_)return nt.__reactInternalMemoizedMaskedChildContext;var rt={},it;for(it in tt)rt[it]=_[it];return nt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=_,_e.__reactInternalMemoizedMaskedChildContext=rt),rt}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$1(Wf),E$1(H$2)}function ag(_e,_,tt){if(H$2.current!==Vf)throw Error(p$5(168));G$1(H$2,_),G$1(Wf,tt)}function bg(_e,_,tt){var nt=_e.stateNode;if(_=_.childContextTypes,typeof nt.getChildContext!="function")return tt;nt=nt.getChildContext();for(var rt in nt)if(!(rt in _))throw Error(p$5(108,Ra(_e)||"Unknown",rt));return A$2({},tt,nt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$1(H$2,_e),G$1(Wf,Wf.current),!0}function dg(_e,_,tt){var nt=_e.stateNode;if(!nt)throw Error(p$5(169));tt?(_e=bg(_e,_,Xf),nt.__reactInternalMemoizedMergedChildContext=_e,E$1(Wf),E$1(H$2),G$1(H$2,_e)):E$1(Wf),G$1(Wf,tt)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,_=C$2;try{var tt=eg;for(C$2=1;_e<tt.length;_e++){var nt=tt[_e];do nt=nt(!0);while(nt!==null)}eg=null,fg=!1}catch(rt){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),rt}finally{C$2=_,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,_){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=_}function ug(_e,_,tt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var nt=rg;_e=sg;var rt=32-oc(nt)-1;nt&=~(1<<rt),tt+=1;var it=32-oc(_)+rt;if(30<it){var at=rt-rt%5;it=(nt&(1<<at)-1).toString(32),nt>>=at,rt-=at,rg=1<<32-oc(_)+rt|tt<<rt|nt,sg=it+_e}else rg=1<<it|tt<<rt|nt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$4=!1,zg=null;function Ag(_e,_){var tt=Bg(5,null,null,0);tt.elementType="DELETED",tt.stateNode=_,tt.return=_e,_=_e.deletions,_===null?(_e.deletions=[tt],_e.flags|=16):_.push(tt)}function Cg(_e,_){switch(_e.tag){case 5:var tt=_e.type;return _=_.nodeType!==1||tt.toLowerCase()!==_.nodeName.toLowerCase()?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=Lf(_.firstChild),!0):!1;case 6:return _=_e.pendingProps===""||_.nodeType!==3?null:_,_!==null?(_e.stateNode=_,xg=_e,yg=null,!0):!1;case 13:return _=_.nodeType!==8?null:_,_!==null?(tt=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:_,treeContext:tt,retryLane:1073741824},tt=Bg(18,null,null,0),tt.stateNode=_,tt.return=_e,_e.child=tt,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$4){var _=yg;if(_){var tt=_;if(!Cg(_e,_)){if(Dg(_e))throw Error(p$5(418));_=Lf(tt.nextSibling);var nt=xg;_&&Cg(_e,_)?Ag(nt,tt):(_e.flags=_e.flags&-4097|2,I$4=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$5(418));_e.flags=_e.flags&-4097|2,I$4=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$4)return Fg(_e),I$4=!0,!1;var _;if((_=_e.tag!==3)&&!(_=_e.tag!==5)&&(_=_e.type,_=_!=="head"&&_!=="body"&&!Ef(_e.type,_e.memoizedProps)),_&&(_=yg)){if(Dg(_e))throw Hg(),Error(p$5(418));for(;_;)Ag(_e,_),_=Lf(_.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$5(317));e:{for(_e=_e.nextSibling,_=0;_e;){if(_e.nodeType===8){var tt=_e.data;if(tt==="/$"){if(_===0){yg=Lf(_e.nextSibling);break e}_--}else tt!=="$"&&tt!=="$!"&&tt!=="$?"||_++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$4=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_e,_){if(_e&&_e.defaultProps){_=A$2({},_),_e=_e.defaultProps;for(var tt in _e)_[tt]===void 0&&(_[tt]=_e[tt]);return _}return _}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(_e){var _=Mg.current;E$1(Mg),_e._currentValue=_}function Sg(_e,_,tt){for(;_e!==null;){var nt=_e.alternate;if((_e.childLanes&_)!==_?(_e.childLanes|=_,nt!==null&&(nt.childLanes|=_)):nt!==null&&(nt.childLanes&_)!==_&&(nt.childLanes|=_),_e===tt)break;_e=_e.return}}function Tg(_e,_){Ng=_e,Pg=Og=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&_&&(Ug=!0),_e.firstContext=null)}function Vg(_e){var _=_e._currentValue;if(Pg!==_e)if(_e={context:_e,memoizedValue:_,next:null},Og===null){if(Ng===null)throw Error(p$5(308));Og=_e,Ng.dependencies={lanes:0,firstContext:_e}}else Og=Og.next=_e;return _}var Wg=null;function Xg(_e){Wg===null?Wg=[_e]:Wg.push(_e)}function Yg(_e,_,tt,nt){var rt=_.interleaved;return rt===null?(tt.next=tt,Xg(_)):(tt.next=rt.next,rt.next=tt),_.interleaved=tt,Zg(_e,nt)}function Zg(_e,_){_e.lanes|=_;var tt=_e.alternate;for(tt!==null&&(tt.lanes|=_),tt=_e,_e=_e.return;_e!==null;)_e.childLanes|=_,tt=_e.alternate,tt!==null&&(tt.childLanes|=_),tt=_e,_e=_e.return;return tt.tag===3?tt.stateNode:null}var $g=!1;function ah(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(_e,_){_e=_e.updateQueue,_.updateQueue===_e&&(_.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function ch(_e,_){return{eventTime:_e,lane:_,tag:0,payload:null,callback:null,next:null}}function dh(_e,_,tt){var nt=_e.updateQueue;if(nt===null)return null;if(nt=nt.shared,K&2){var rt=nt.pending;return rt===null?_.next=_:(_.next=rt.next,rt.next=_),nt.pending=_,Zg(_e,tt)}return rt=nt.interleaved,rt===null?(_.next=_,Xg(nt)):(_.next=rt.next,rt.next=_),nt.interleaved=_,Zg(_e,tt)}function eh(_e,_,tt){if(_=_.updateQueue,_!==null&&(_=_.shared,(tt&4194240)!==0)){var nt=_.lanes;nt&=_e.pendingLanes,tt|=nt,_.lanes=tt,Cc(_e,tt)}}function fh(_e,_){var tt=_e.updateQueue,nt=_e.alternate;if(nt!==null&&(nt=nt.updateQueue,tt===nt)){var rt=null,it=null;if(tt=tt.firstBaseUpdate,tt!==null){do{var at={eventTime:tt.eventTime,lane:tt.lane,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null};it===null?rt=it=at:it=it.next=at,tt=tt.next}while(tt!==null);it===null?rt=it=_:it=it.next=_}else rt=it=_;tt={baseState:nt.baseState,firstBaseUpdate:rt,lastBaseUpdate:it,shared:nt.shared,effects:nt.effects},_e.updateQueue=tt;return}_e=tt.lastBaseUpdate,_e===null?tt.firstBaseUpdate=_:_e.next=_,tt.lastBaseUpdate=_}function gh(_e,_,tt,nt){var rt=_e.updateQueue;$g=!1;var it=rt.firstBaseUpdate,at=rt.lastBaseUpdate,ot=rt.shared.pending;if(ot!==null){rt.shared.pending=null;var st=ot,lt=st.next;st.next=null,at===null?it=lt:at.next=lt,at=st;var ct=_e.alternate;ct!==null&&(ct=ct.updateQueue,ot=ct.lastBaseUpdate,ot!==at&&(ot===null?ct.firstBaseUpdate=lt:ot.next=lt,ct.lastBaseUpdate=st))}if(it!==null){var ut=rt.baseState;at=0,ct=lt=st=null,ot=it;do{var ft=ot.lane,pt=ot.eventTime;if((nt&ft)===ft){ct!==null&&(ct=ct.next={eventTime:pt,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var gt=_e,xt=ot;switch(ft=_,pt=tt,xt.tag){case 1:if(gt=xt.payload,typeof gt=="function"){ut=gt.call(pt,ut,ft);break e}ut=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=xt.payload,ft=typeof gt=="function"?gt.call(pt,ut,ft):gt,ft==null)break e;ut=A$2({},ut,ft);break e;case 2:$g=!0}}ot.callback!==null&&ot.lane!==0&&(_e.flags|=64,ft=rt.effects,ft===null?rt.effects=[ot]:ft.push(ot))}else pt={eventTime:pt,lane:ft,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},ct===null?(lt=ct=pt,st=ut):ct=ct.next=pt,at|=ft;if(ot=ot.next,ot===null){if(ot=rt.shared.pending,ot===null)break;ft=ot,ot=ft.next,ft.next=null,rt.lastBaseUpdate=ft,rt.shared.pending=null}}while(1);if(ct===null&&(st=ut),rt.baseState=st,rt.firstBaseUpdate=lt,rt.lastBaseUpdate=ct,_=rt.shared.interleaved,_!==null){rt=_;do at|=rt.lane,rt=rt.next;while(rt!==_)}else it===null&&(rt.shared.lanes=0);hh|=at,_e.lanes=at,_e.memoizedState=ut}}function ih(_e,_,tt){if(_e=_.effects,_.effects=null,_e!==null)for(_=0;_<_e.length;_++){var nt=_e[_],rt=nt.callback;if(rt!==null){if(nt.callback=null,nt=tt,typeof rt!="function")throw Error(p$5(191,rt));rt.call(nt)}}}var jh=new aa.Component().refs;function kh(_e,_,tt,nt){_=_e.memoizedState,tt=tt(nt,_),tt=tt==null?_:A$2({},_,tt),_e.memoizedState=tt,_e.lanes===0&&(_e.updateQueue.baseState=tt)}var nh={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,_,tt){_e=_e._reactInternals;var nt=L$2(),rt=lh(_e),it=ch(nt,rt);it.payload=_,tt!=null&&(it.callback=tt),_=dh(_e,it,rt),_!==null&&(mh(_,_e,rt,nt),eh(_,_e,rt))},enqueueReplaceState:function(_e,_,tt){_e=_e._reactInternals;var nt=L$2(),rt=lh(_e),it=ch(nt,rt);it.tag=1,it.payload=_,tt!=null&&(it.callback=tt),_=dh(_e,it,rt),_!==null&&(mh(_,_e,rt,nt),eh(_,_e,rt))},enqueueForceUpdate:function(_e,_){_e=_e._reactInternals;var tt=L$2(),nt=lh(_e),rt=ch(tt,nt);rt.tag=2,_!=null&&(rt.callback=_),_=dh(_e,rt,nt),_!==null&&(mh(_,_e,nt,tt),eh(_,_e,nt))}};function oh(_e,_,tt,nt,rt,it,at){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(nt,it,at):_.prototype&&_.prototype.isPureReactComponent?!Ie(tt,nt)||!Ie(rt,it):!0}function ph(_e,_,tt){var nt=!1,rt=Vf,it=_.contextType;return typeof it=="object"&&it!==null?it=Vg(it):(rt=Zf(_)?Xf:H$2.current,nt=_.contextTypes,it=(nt=nt!=null)?Yf(_e,rt):Vf),_=new _(tt,it),_e.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=nh,_e.stateNode=_,_._reactInternals=_e,nt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=rt,_e.__reactInternalMemoizedMaskedChildContext=it),_}function qh(_e,_,tt,nt){_e=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(tt,nt),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(tt,nt),_.state!==_e&&nh.enqueueReplaceState(_,_.state,null)}function rh(_e,_,tt,nt){var rt=_e.stateNode;rt.props=tt,rt.state=_e.memoizedState,rt.refs=jh,ah(_e);var it=_.contextType;typeof it=="object"&&it!==null?rt.context=Vg(it):(it=Zf(_)?Xf:H$2.current,rt.context=Yf(_e,it)),rt.state=_e.memoizedState,it=_.getDerivedStateFromProps,typeof it=="function"&&(kh(_e,_,it,tt),rt.state=_e.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof rt.getSnapshotBeforeUpdate=="function"||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(_=rt.state,typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount(),_!==rt.state&&nh.enqueueReplaceState(rt,rt.state,null),gh(_e,tt,rt,nt),rt.state=_e.memoizedState),typeof rt.componentDidMount=="function"&&(_e.flags|=4194308)}function sh(_e,_,tt){if(_e=tt.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(tt._owner){if(tt=tt._owner,tt){if(tt.tag!==1)throw Error(p$5(309));var nt=tt.stateNode}if(!nt)throw Error(p$5(147,_e));var rt=nt,it=""+_e;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===it?_.ref:(_=function(at){var ot=rt.refs;ot===jh&&(ot=rt.refs={}),at===null?delete ot[it]:ot[it]=at},_._stringRef=it,_)}if(typeof _e!="string")throw Error(p$5(284));if(!tt._owner)throw Error(p$5(290,_e))}return _e}function th(_e,_){throw _e=Object.prototype.toString.call(_),Error(p$5(31,_e==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":_e))}function uh(_e){var _=_e._init;return _(_e._payload)}function vh(_e){function _(mt,At){if(_e){var vt=mt.deletions;vt===null?(mt.deletions=[At],mt.flags|=16):vt.push(At)}}function tt(mt,At){if(!_e)return null;for(;At!==null;)_(mt,At),At=At.sibling;return null}function nt(mt,At){for(mt=new Map;At!==null;)At.key!==null?mt.set(At.key,At):mt.set(At.index,At),At=At.sibling;return mt}function rt(mt,At){return mt=wh(mt,At),mt.index=0,mt.sibling=null,mt}function it(mt,At,vt){return mt.index=vt,_e?(vt=mt.alternate,vt!==null?(vt=vt.index,vt<At?(mt.flags|=2,At):vt):(mt.flags|=2,At)):(mt.flags|=1048576,At)}function at(mt){return _e&&mt.alternate===null&&(mt.flags|=2),mt}function ot(mt,At,vt,Et){return At===null||At.tag!==6?(At=xh(vt,mt.mode,Et),At.return=mt,At):(At=rt(At,vt),At.return=mt,At)}function st(mt,At,vt,Et){var Ct=vt.type;return Ct===ya?ct(mt,At,vt.props.children,Et,vt.key):At!==null&&(At.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Ha&&uh(Ct)===At.type)?(Et=rt(At,vt.props),Et.ref=sh(mt,At,vt),Et.return=mt,Et):(Et=yh(vt.type,vt.key,vt.props,null,mt.mode,Et),Et.ref=sh(mt,At,vt),Et.return=mt,Et)}function lt(mt,At,vt,Et){return At===null||At.tag!==4||At.stateNode.containerInfo!==vt.containerInfo||At.stateNode.implementation!==vt.implementation?(At=zh(vt,mt.mode,Et),At.return=mt,At):(At=rt(At,vt.children||[]),At.return=mt,At)}function ct(mt,At,vt,Et,Ct){return At===null||At.tag!==7?(At=Ah(vt,mt.mode,Et,Ct),At.return=mt,At):(At=rt(At,vt),At.return=mt,At)}function ut(mt,At,vt){if(typeof At=="string"&&At!==""||typeof At=="number")return At=xh(""+At,mt.mode,vt),At.return=mt,At;if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va:return vt=yh(At.type,At.key,At.props,null,mt.mode,vt),vt.ref=sh(mt,null,At),vt.return=mt,vt;case wa:return At=zh(At,mt.mode,vt),At.return=mt,At;case Ha:var Et=At._init;return ut(mt,Et(At._payload),vt)}if(eb(At)||Ka(At))return At=Ah(At,mt.mode,vt,null),At.return=mt,At;th(mt,At)}return null}function ft(mt,At,vt,Et){var Ct=At!==null?At.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number")return Ct!==null?null:ot(mt,At,""+vt,Et);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case va:return vt.key===Ct?st(mt,At,vt,Et):null;case wa:return vt.key===Ct?lt(mt,At,vt,Et):null;case Ha:return Ct=vt._init,ft(mt,At,Ct(vt._payload),Et)}if(eb(vt)||Ka(vt))return Ct!==null?null:ct(mt,At,vt,Et,null);th(mt,vt)}return null}function pt(mt,At,vt,Et,Ct){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return mt=mt.get(vt)||null,ot(At,mt,""+Et,Ct);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:return mt=mt.get(Et.key===null?vt:Et.key)||null,st(At,mt,Et,Ct);case wa:return mt=mt.get(Et.key===null?vt:Et.key)||null,lt(At,mt,Et,Ct);case Ha:var Tt=Et._init;return pt(mt,At,vt,Tt(Et._payload),Ct)}if(eb(Et)||Ka(Et))return mt=mt.get(vt)||null,ct(At,mt,Et,Ct,null);th(At,Et)}return null}function gt(mt,At,vt,Et){for(var Ct=null,Tt=null,bt=At,It=At=0,wt=null;bt!==null&&It<vt.length;It++){bt.index>It?(wt=bt,bt=null):wt=bt.sibling;var Rt=ft(mt,bt,vt[It],Et);if(Rt===null){bt===null&&(bt=wt);break}_e&&bt&&Rt.alternate===null&&_(mt,bt),At=it(Rt,At,It),Tt===null?Ct=Rt:Tt.sibling=Rt,Tt=Rt,bt=wt}if(It===vt.length)return tt(mt,bt),I$4&&tg(mt,It),Ct;if(bt===null){for(;It<vt.length;It++)bt=ut(mt,vt[It],Et),bt!==null&&(At=it(bt,At,It),Tt===null?Ct=bt:Tt.sibling=bt,Tt=bt);return I$4&&tg(mt,It),Ct}for(bt=nt(mt,bt);It<vt.length;It++)wt=pt(bt,mt,It,vt[It],Et),wt!==null&&(_e&&wt.alternate!==null&&bt.delete(wt.key===null?It:wt.key),At=it(wt,At,It),Tt===null?Ct=wt:Tt.sibling=wt,Tt=wt);return _e&&bt.forEach(function(Ft){return _(mt,Ft)}),I$4&&tg(mt,It),Ct}function xt(mt,At,vt,Et){var Ct=Ka(vt);if(typeof Ct!="function")throw Error(p$5(150));if(vt=Ct.call(vt),vt==null)throw Error(p$5(151));for(var Tt=Ct=null,bt=At,It=At=0,wt=null,Rt=vt.next();bt!==null&&!Rt.done;It++,Rt=vt.next()){bt.index>It?(wt=bt,bt=null):wt=bt.sibling;var Ft=ft(mt,bt,Rt.value,Et);if(Ft===null){bt===null&&(bt=wt);break}_e&&bt&&Ft.alternate===null&&_(mt,bt),At=it(Ft,At,It),Tt===null?Ct=Ft:Tt.sibling=Ft,Tt=Ft,bt=wt}if(Rt.done)return tt(mt,bt),I$4&&tg(mt,It),Ct;if(bt===null){for(;!Rt.done;It++,Rt=vt.next())Rt=ut(mt,Rt.value,Et),Rt!==null&&(At=it(Rt,At,It),Tt===null?Ct=Rt:Tt.sibling=Rt,Tt=Rt);return I$4&&tg(mt,It),Ct}for(bt=nt(mt,bt);!Rt.done;It++,Rt=vt.next())Rt=pt(bt,mt,It,Rt.value,Et),Rt!==null&&(_e&&Rt.alternate!==null&&bt.delete(Rt.key===null?It:Rt.key),At=it(Rt,At,It),Tt===null?Ct=Rt:Tt.sibling=Rt,Tt=Rt);return _e&&bt.forEach(function(Ut){return _(mt,Ut)}),I$4&&tg(mt,It),Ct}function yt(mt,At,vt,Et){if(typeof vt=="object"&&vt!==null&&vt.type===ya&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case va:e:{for(var Ct=vt.key,Tt=At;Tt!==null;){if(Tt.key===Ct){if(Ct=vt.type,Ct===ya){if(Tt.tag===7){tt(mt,Tt.sibling),At=rt(Tt,vt.props.children),At.return=mt,mt=At;break e}}else if(Tt.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===Ha&&uh(Ct)===Tt.type){tt(mt,Tt.sibling),At=rt(Tt,vt.props),At.ref=sh(mt,Tt,vt),At.return=mt,mt=At;break e}tt(mt,Tt);break}else _(mt,Tt);Tt=Tt.sibling}vt.type===ya?(At=Ah(vt.props.children,mt.mode,Et,vt.key),At.return=mt,mt=At):(Et=yh(vt.type,vt.key,vt.props,null,mt.mode,Et),Et.ref=sh(mt,At,vt),Et.return=mt,mt=Et)}return at(mt);case wa:e:{for(Tt=vt.key;At!==null;){if(At.key===Tt)if(At.tag===4&&At.stateNode.containerInfo===vt.containerInfo&&At.stateNode.implementation===vt.implementation){tt(mt,At.sibling),At=rt(At,vt.children||[]),At.return=mt,mt=At;break e}else{tt(mt,At);break}else _(mt,At);At=At.sibling}At=zh(vt,mt.mode,Et),At.return=mt,mt=At}return at(mt);case Ha:return Tt=vt._init,yt(mt,At,Tt(vt._payload),Et)}if(eb(vt))return gt(mt,At,vt,Et);if(Ka(vt))return xt(mt,At,vt,Et);th(mt,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"?(vt=""+vt,At!==null&&At.tag===6?(tt(mt,At.sibling),At=rt(At,vt),At.return=mt,mt=At):(tt(mt,At),At=xh(vt,mt.mode,Et),At.return=mt,mt=At),at(mt)):tt(mt,At)}return yt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(_e){if(_e===Dh)throw Error(p$5(174));return _e}function Ih(_e,_){switch(G$1(Gh,_),G$1(Fh,_e),G$1(Eh,Dh),_e=_.nodeType,_e){case 9:case 11:_=(_=_.documentElement)?_.namespaceURI:lb(null,"");break;default:_e=_e===8?_.parentNode:_,_=_e.namespaceURI||null,_e=_e.tagName,_=lb(_,_e)}E$1(Eh),G$1(Eh,_)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(_e){Hh(Gh.current);var _=Hh(Eh.current),tt=lb(_,_e.type);_!==tt&&(G$1(Fh,_e),G$1(Eh,tt))}function Lh(_e){Fh.current===_e&&(E$1(Eh),E$1(Fh))}var M$2=Uf(0);function Mh(_e){for(var _=_e;_!==null;){if(_.tag===13){var tt=_.memoizedState;if(tt!==null&&(tt=tt.dehydrated,tt===null||tt.data==="$?"||tt.data==="$!"))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if(_.flags&128)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Nh=[];function Oh(){for(var _e=0;_e<Nh.length;_e++)Nh[_e]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$2=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$2(){throw Error(p$5(321))}function Wh(_e,_){if(_===null)return!1;for(var tt=0;tt<_.length&&tt<_e.length;tt++)if(!He(_e[tt],_[tt]))return!1;return!0}function Xh(_e,_,tt,nt,rt,it){if(Rh=it,N$2=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Ph.current=_e===null||_e.memoizedState===null?Yh:Zh,_e=tt(nt,rt),Th){it=0;do{if(Th=!1,Uh=0,25<=it)throw Error(p$5(301));it+=1,P$1=O$1=null,_.updateQueue=null,Ph.current=$h,_e=tt(nt,rt)}while(Th)}if(Ph.current=ai,_=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$2=null,Sh=!1,_)throw Error(p$5(300));return _e}function bi(){var _e=Uh!==0;return Uh=0,_e}function ci(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$2.memoizedState=P$1=_e:P$1=P$1.next=_e,P$1}function di(){if(O$1===null){var _e=N$2.alternate;_e=_e!==null?_e.memoizedState:null}else _e=O$1.next;var _=P$1===null?N$2.memoizedState:P$1.next;if(_!==null)P$1=_,O$1=_e;else{if(_e===null)throw Error(p$5(310));O$1=_e,_e={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$2.memoizedState=P$1=_e:P$1=P$1.next=_e}return P$1}function ei(_e,_){return typeof _=="function"?_(_e):_}function fi(_e){var _=di(),tt=_.queue;if(tt===null)throw Error(p$5(311));tt.lastRenderedReducer=_e;var nt=O$1,rt=nt.baseQueue,it=tt.pending;if(it!==null){if(rt!==null){var at=rt.next;rt.next=it.next,it.next=at}nt.baseQueue=rt=it,tt.pending=null}if(rt!==null){it=rt.next,nt=nt.baseState;var ot=at=null,st=null,lt=it;do{var ct=lt.lane;if((Rh&ct)===ct)st!==null&&(st=st.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),nt=lt.hasEagerState?lt.eagerState:_e(nt,lt.action);else{var ut={lane:ct,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};st===null?(ot=st=ut,at=nt):st=st.next=ut,N$2.lanes|=ct,hh|=ct}lt=lt.next}while(lt!==null&&lt!==it);st===null?at=nt:st.next=ot,He(nt,_.memoizedState)||(Ug=!0),_.memoizedState=nt,_.baseState=at,_.baseQueue=st,tt.lastRenderedState=nt}if(_e=tt.interleaved,_e!==null){rt=_e;do it=rt.lane,N$2.lanes|=it,hh|=it,rt=rt.next;while(rt!==_e)}else rt===null&&(tt.lanes=0);return[_.memoizedState,tt.dispatch]}function gi(_e){var _=di(),tt=_.queue;if(tt===null)throw Error(p$5(311));tt.lastRenderedReducer=_e;var nt=tt.dispatch,rt=tt.pending,it=_.memoizedState;if(rt!==null){tt.pending=null;var at=rt=rt.next;do it=_e(it,at.action),at=at.next;while(at!==rt);He(it,_.memoizedState)||(Ug=!0),_.memoizedState=it,_.baseQueue===null&&(_.baseState=it),tt.lastRenderedState=it}return[it,nt]}function hi(){}function ii(_e,_){var tt=N$2,nt=di(),rt=_(),it=!He(nt.memoizedState,rt);if(it&&(nt.memoizedState=rt,Ug=!0),nt=nt.queue,ji(ki.bind(null,tt,nt,_e),[_e]),nt.getSnapshot!==_||it||P$1!==null&&P$1.memoizedState.tag&1){if(tt.flags|=2048,li(9,mi.bind(null,tt,nt,rt,_),void 0,null),R$1===null)throw Error(p$5(349));Rh&30||ni(tt,_,rt)}return rt}function ni(_e,_,tt){_e.flags|=16384,_e={getSnapshot:_,value:tt},_=N$2.updateQueue,_===null?(_={lastEffect:null,stores:null},N$2.updateQueue=_,_.stores=[_e]):(tt=_.stores,tt===null?_.stores=[_e]:tt.push(_e))}function mi(_e,_,tt,nt){_.value=tt,_.getSnapshot=nt,oi(_)&&pi(_e)}function ki(_e,_,tt){return tt(function(){oi(_)&&pi(_e)})}function oi(_e){var _=_e.getSnapshot;_e=_e.value;try{var tt=_();return!He(_e,tt)}catch{return!0}}function pi(_e){var _=Zg(_e,1);_!==null&&mh(_,_e,1,-1)}function qi(_e){var _=ci();return typeof _e=="function"&&(_e=_e()),_.memoizedState=_.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:_e},_.queue=_e,_e=_e.dispatch=ri.bind(null,N$2,_e),[_.memoizedState,_e]}function li(_e,_,tt,nt){return _e={tag:_e,create:_,destroy:tt,deps:nt,next:null},_=N$2.updateQueue,_===null?(_={lastEffect:null,stores:null},N$2.updateQueue=_,_.lastEffect=_e.next=_e):(tt=_.lastEffect,tt===null?_.lastEffect=_e.next=_e:(nt=tt.next,tt.next=_e,_e.next=nt,_.lastEffect=_e)),_e}function si(){return di().memoizedState}function ti(_e,_,tt,nt){var rt=ci();N$2.flags|=_e,rt.memoizedState=li(1|_,tt,void 0,nt===void 0?null:nt)}function ui(_e,_,tt,nt){var rt=di();nt=nt===void 0?null:nt;var it=void 0;if(O$1!==null){var at=O$1.memoizedState;if(it=at.destroy,nt!==null&&Wh(nt,at.deps)){rt.memoizedState=li(_,tt,it,nt);return}}N$2.flags|=_e,rt.memoizedState=li(1|_,tt,it,nt)}function vi(_e,_){return ti(8390656,8,_e,_)}function ji(_e,_){return ui(2048,8,_e,_)}function wi(_e,_){return ui(4,2,_e,_)}function xi(_e,_){return ui(4,4,_e,_)}function yi(_e,_){if(typeof _=="function")return _e=_e(),_(_e),function(){_(null)};if(_!=null)return _e=_e(),_.current=_e,function(){_.current=null}}function zi(_e,_,tt){return tt=tt!=null?tt.concat([_e]):null,ui(4,4,yi.bind(null,_,_e),tt)}function Ai(){}function Bi(_e,_){var tt=di();_=_===void 0?null:_;var nt=tt.memoizedState;return nt!==null&&_!==null&&Wh(_,nt[1])?nt[0]:(tt.memoizedState=[_e,_],_e)}function Ci(_e,_){var tt=di();_=_===void 0?null:_;var nt=tt.memoizedState;return nt!==null&&_!==null&&Wh(_,nt[1])?nt[0]:(_e=_e(),tt.memoizedState=[_e,_],_e)}function Di(_e,_,tt){return Rh&21?(He(tt,_)||(tt=yc(),N$2.lanes|=tt,hh|=tt,_e.baseState=!0),_):(_e.baseState&&(_e.baseState=!1,Ug=!0),_e.memoizedState=tt)}function Ei(_e,_){var tt=C$2;C$2=tt!==0&&4>tt?tt:4,_e(!0);var nt=Qh.transition;Qh.transition={};try{_e(!1),_()}finally{C$2=tt,Qh.transition=nt}}function Fi(){return di().memoizedState}function Gi(_e,_,tt){var nt=lh(_e);if(tt={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null},Hi(_e))Ii(_,tt);else if(tt=Yg(_e,_,tt,nt),tt!==null){var rt=L$2();mh(tt,_e,nt,rt),Ji(tt,_,nt)}}function ri(_e,_,tt){var nt=lh(_e),rt={lane:nt,action:tt,hasEagerState:!1,eagerState:null,next:null};if(Hi(_e))Ii(_,rt);else{var it=_e.alternate;if(_e.lanes===0&&(it===null||it.lanes===0)&&(it=_.lastRenderedReducer,it!==null))try{var at=_.lastRenderedState,ot=it(at,tt);if(rt.hasEagerState=!0,rt.eagerState=ot,He(ot,at)){var st=_.interleaved;st===null?(rt.next=rt,Xg(_)):(rt.next=st.next,st.next=rt),_.interleaved=rt;return}}catch{}finally{}tt=Yg(_e,_,rt,nt),tt!==null&&(rt=L$2(),mh(tt,_e,nt,rt),Ji(tt,_,nt))}}function Hi(_e){var _=_e.alternate;return _e===N$2||_!==null&&_===N$2}function Ii(_e,_){Th=Sh=!0;var tt=_e.pending;tt===null?_.next=_:(_.next=tt.next,tt.next=_),_e.pending=_}function Ji(_e,_,tt){if(tt&4194240){var nt=_.lanes;nt&=_e.pendingLanes,tt|=nt,_.lanes=tt,Cc(_e,tt)}}var ai={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(_e,_){return ci().memoizedState=[_e,_===void 0?null:_],_e},useContext:Vg,useEffect:vi,useImperativeHandle:function(_e,_,tt){return tt=tt!=null?tt.concat([_e]):null,ti(4194308,4,yi.bind(null,_,_e),tt)},useLayoutEffect:function(_e,_){return ti(4194308,4,_e,_)},useInsertionEffect:function(_e,_){return ti(4,2,_e,_)},useMemo:function(_e,_){var tt=ci();return _=_===void 0?null:_,_e=_e(),tt.memoizedState=[_e,_],_e},useReducer:function(_e,_,tt){var nt=ci();return _=tt!==void 0?tt(_):_,nt.memoizedState=nt.baseState=_,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:_},nt.queue=_e,_e=_e.dispatch=Gi.bind(null,N$2,_e),[nt.memoizedState,_e]},useRef:function(_e){var _=ci();return _e={current:_e},_.memoizedState=_e},useState:qi,useDebugValue:Ai,useDeferredValue:function(_e){return ci().memoizedState=_e},useTransition:function(){var _e=qi(!1),_=_e[0];return _e=Ei.bind(null,_e[1]),ci().memoizedState=_e,[_,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,_,tt){var nt=N$2,rt=ci();if(I$4){if(tt===void 0)throw Error(p$5(407));tt=tt()}else{if(tt=_(),R$1===null)throw Error(p$5(349));Rh&30||ni(nt,_,tt)}rt.memoizedState=tt;var it={value:tt,getSnapshot:_};return rt.queue=it,vi(ki.bind(null,nt,it,_e),[_e]),nt.flags|=2048,li(9,mi.bind(null,nt,it,tt,_),void 0,null),tt},useId:function(){var _e=ci(),_=R$1.identifierPrefix;if(I$4){var tt=sg,nt=rg;tt=(nt&~(1<<32-oc(nt)-1)).toString(32)+tt,_=":"+_+"R"+tt,tt=Uh++,0<tt&&(_+="H"+tt.toString(32)),_+=":"}else tt=Vh++,_=":"+_+"r"+tt.toString(32)+":";return _e.memoizedState=_},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(_e){var _=di();return Di(_,O$1.memoizedState,_e)},useTransition:function(){var _e=fi(ei)[0],_=di().memoizedState;return[_e,_]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(_e){var _=di();return O$1===null?_.memoizedState=_e:Di(_,O$1.memoizedState,_e)},useTransition:function(){var _e=gi(ei)[0],_=di().memoizedState;return[_e,_]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(_e,_){try{var tt="",nt=_;do tt+=Pa(nt),nt=nt.return;while(nt);var rt=tt}catch(it){rt=`
Error generating stack: `+it.message+`
`+it.stack}return{value:_e,source:_,stack:rt,digest:null}}function Li(_e,_,tt){return{value:_e,source:null,stack:tt??null,digest:_??null}}function Mi(_e,_){try{console.error(_.value)}catch(tt){setTimeout(function(){throw tt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(_e,_,tt){tt=ch(-1,tt),tt.tag=3,tt.payload={element:null};var nt=_.value;return tt.callback=function(){Pi||(Pi=!0,Qi=nt),Mi(_e,_)},tt}function Ri(_e,_,tt){tt=ch(-1,tt),tt.tag=3;var nt=_e.type.getDerivedStateFromError;if(typeof nt=="function"){var rt=_.value;tt.payload=function(){return nt(rt)},tt.callback=function(){Mi(_e,_)}}var it=_e.stateNode;return it!==null&&typeof it.componentDidCatch=="function"&&(tt.callback=function(){Mi(_e,_),typeof nt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var at=_.stack;this.componentDidCatch(_.value,{componentStack:at!==null?at:""})}),tt}function Ti(_e,_,tt){var nt=_e.pingCache;if(nt===null){nt=_e.pingCache=new Ni;var rt=new Set;nt.set(_,rt)}else rt=nt.get(_),rt===void 0&&(rt=new Set,nt.set(_,rt));rt.has(tt)||(rt.add(tt),_e=Ui.bind(null,_e,_,tt),_.then(_e,_e))}function Vi(_e){do{var _;if((_=_e.tag===13)&&(_=_e.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return _e;_e=_e.return}while(_e!==null);return null}function Wi(_e,_,tt,nt,rt){return _e.mode&1?(_e.flags|=65536,_e.lanes=rt,_e):(_e===_?_e.flags|=65536:(_e.flags|=128,tt.flags|=131072,tt.flags&=-52805,tt.tag===1&&(tt.alternate===null?tt.tag=17:(_=ch(-1,1),_.tag=2,dh(tt,_,1))),tt.lanes|=1),_e)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(_e,_,tt,nt){_.child=_e===null?Ch(_,null,tt,nt):Bh(_,_e.child,tt,nt)}function Zi(_e,_,tt,nt,rt){tt=tt.render;var it=_.ref;return Tg(_,rt),nt=Xh(_e,_,tt,nt,it,rt),tt=bi(),_e!==null&&!Ug?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~rt,$i(_e,_,rt)):(I$4&&tt&&vg(_),_.flags|=1,Yi(_e,_,nt,rt),_.child)}function aj(_e,_,tt,nt,rt){if(_e===null){var it=tt.type;return typeof it=="function"&&!bj(it)&&it.defaultProps===void 0&&tt.compare===null&&tt.defaultProps===void 0?(_.tag=15,_.type=it,cj(_e,_,it,nt,rt)):(_e=yh(tt.type,null,nt,_,_.mode,rt),_e.ref=_.ref,_e.return=_,_.child=_e)}if(it=_e.child,!(_e.lanes&rt)){var at=it.memoizedProps;if(tt=tt.compare,tt=tt!==null?tt:Ie,tt(at,nt)&&_e.ref===_.ref)return $i(_e,_,rt)}return _.flags|=1,_e=wh(it,nt),_e.ref=_.ref,_e.return=_,_.child=_e}function cj(_e,_,tt,nt,rt){if(_e!==null){var it=_e.memoizedProps;if(Ie(it,nt)&&_e.ref===_.ref)if(Ug=!1,_.pendingProps=nt=it,(_e.lanes&rt)!==0)_e.flags&131072&&(Ug=!0);else return _.lanes=_e.lanes,$i(_e,_,rt)}return dj(_e,_,tt,nt,rt)}function ej(_e,_,tt){var nt=_.pendingProps,rt=nt.children,it=_e!==null?_e.memoizedState:null;if(nt.mode==="hidden")if(!(_.mode&1))_.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=tt;else{if(!(tt&1073741824))return _e=it!==null?it.baseLanes|tt:tt,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:_e,cachePool:null,transitions:null},_.updateQueue=null,G$1(fj,gj),gj|=_e,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt=it!==null?it.baseLanes:tt,G$1(fj,gj),gj|=nt}else it!==null?(nt=it.baseLanes|tt,_.memoizedState=null):nt=tt,G$1(fj,gj),gj|=nt;return Yi(_e,_,rt,tt),_.child}function hj(_e,_){var tt=_.ref;(_e===null&&tt!==null||_e!==null&&_e.ref!==tt)&&(_.flags|=512,_.flags|=2097152)}function dj(_e,_,tt,nt,rt){var it=Zf(tt)?Xf:H$2.current;return it=Yf(_,it),Tg(_,rt),tt=Xh(_e,_,tt,nt,it,rt),nt=bi(),_e!==null&&!Ug?(_.updateQueue=_e.updateQueue,_.flags&=-2053,_e.lanes&=~rt,$i(_e,_,rt)):(I$4&&nt&&vg(_),_.flags|=1,Yi(_e,_,tt,rt),_.child)}function ij(_e,_,tt,nt,rt){if(Zf(tt)){var it=!0;cg(_)}else it=!1;if(Tg(_,rt),_.stateNode===null)jj(_e,_),ph(_,tt,nt),rh(_,tt,nt,rt),nt=!0;else if(_e===null){var at=_.stateNode,ot=_.memoizedProps;at.props=ot;var st=at.context,lt=tt.contextType;typeof lt=="object"&&lt!==null?lt=Vg(lt):(lt=Zf(tt)?Xf:H$2.current,lt=Yf(_,lt));var ct=tt.getDerivedStateFromProps,ut=typeof ct=="function"||typeof at.getSnapshotBeforeUpdate=="function";ut||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||(ot!==nt||st!==lt)&&qh(_,at,nt,lt),$g=!1;var ft=_.memoizedState;at.state=ft,gh(_,nt,at,rt),st=_.memoizedState,ot!==nt||ft!==st||Wf.current||$g?(typeof ct=="function"&&(kh(_,tt,ct,nt),st=_.memoizedState),(ot=$g||oh(_,tt,ot,nt,ft,st,lt))?(ut||typeof at.UNSAFE_componentWillMount!="function"&&typeof at.componentWillMount!="function"||(typeof at.componentWillMount=="function"&&at.componentWillMount(),typeof at.UNSAFE_componentWillMount=="function"&&at.UNSAFE_componentWillMount()),typeof at.componentDidMount=="function"&&(_.flags|=4194308)):(typeof at.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=nt,_.memoizedState=st),at.props=nt,at.state=st,at.context=lt,nt=ot):(typeof at.componentDidMount=="function"&&(_.flags|=4194308),nt=!1)}else{at=_.stateNode,bh(_e,_),ot=_.memoizedProps,lt=_.type===_.elementType?ot:Lg(_.type,ot),at.props=lt,ut=_.pendingProps,ft=at.context,st=tt.contextType,typeof st=="object"&&st!==null?st=Vg(st):(st=Zf(tt)?Xf:H$2.current,st=Yf(_,st));var pt=tt.getDerivedStateFromProps;(ct=typeof pt=="function"||typeof at.getSnapshotBeforeUpdate=="function")||typeof at.UNSAFE_componentWillReceiveProps!="function"&&typeof at.componentWillReceiveProps!="function"||(ot!==ut||ft!==st)&&qh(_,at,nt,st),$g=!1,ft=_.memoizedState,at.state=ft,gh(_,nt,at,rt);var gt=_.memoizedState;ot!==ut||ft!==gt||Wf.current||$g?(typeof pt=="function"&&(kh(_,tt,pt,nt),gt=_.memoizedState),(lt=$g||oh(_,tt,lt,nt,ft,gt,st)||!1)?(ct||typeof at.UNSAFE_componentWillUpdate!="function"&&typeof at.componentWillUpdate!="function"||(typeof at.componentWillUpdate=="function"&&at.componentWillUpdate(nt,gt,st),typeof at.UNSAFE_componentWillUpdate=="function"&&at.UNSAFE_componentWillUpdate(nt,gt,st)),typeof at.componentDidUpdate=="function"&&(_.flags|=4),typeof at.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof at.componentDidUpdate!="function"||ot===_e.memoizedProps&&ft===_e.memoizedState||(_.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&ft===_e.memoizedState||(_.flags|=1024),_.memoizedProps=nt,_.memoizedState=gt),at.props=nt,at.state=gt,at.context=st,nt=lt):(typeof at.componentDidUpdate!="function"||ot===_e.memoizedProps&&ft===_e.memoizedState||(_.flags|=4),typeof at.getSnapshotBeforeUpdate!="function"||ot===_e.memoizedProps&&ft===_e.memoizedState||(_.flags|=1024),nt=!1)}return kj(_e,_,tt,nt,it,rt)}function kj(_e,_,tt,nt,rt,it){hj(_e,_);var at=(_.flags&128)!==0;if(!nt&&!at)return rt&&dg(_,tt,!1),$i(_e,_,it);nt=_.stateNode,Xi.current=_;var ot=at&&typeof tt.getDerivedStateFromError!="function"?null:nt.render();return _.flags|=1,_e!==null&&at?(_.child=Bh(_,_e.child,null,it),_.child=Bh(_,null,ot,it)):Yi(_e,_,ot,it),_.memoizedState=nt.state,rt&&dg(_,tt,!0),_.child}function lj(_e){var _=_e.stateNode;_.pendingContext?ag(_e,_.pendingContext,_.pendingContext!==_.context):_.context&&ag(_e,_.context,!1),Ih(_e,_.containerInfo)}function mj(_e,_,tt,nt,rt){return Ig(),Jg(rt),_.flags|=256,Yi(_e,_,tt,nt),_.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function pj(_e,_,tt){var nt=_.pendingProps,rt=M$2.current,it=!1,at=(_.flags&128)!==0,ot;if((ot=at)||(ot=_e!==null&&_e.memoizedState===null?!1:(rt&2)!==0),ot?(it=!0,_.flags&=-129):(_e===null||_e.memoizedState!==null)&&(rt|=1),G$1(M$2,rt&1),_e===null)return Eg(_),_e=_.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(_.mode&1?_e.data==="$!"?_.lanes=8:_.lanes=1073741824:_.lanes=1,null):(at=nt.children,_e=nt.fallback,it?(nt=_.mode,it=_.child,at={mode:"hidden",children:at},!(nt&1)&&it!==null?(it.childLanes=0,it.pendingProps=at):it=qj(at,nt,0,null),_e=Ah(_e,nt,tt,null),it.return=_,_e.return=_,it.sibling=_e,_.child=it,_.child.memoizedState=oj(tt),_.memoizedState=nj,_e):rj(_,at));if(rt=_e.memoizedState,rt!==null&&(ot=rt.dehydrated,ot!==null))return sj(_e,_,at,nt,ot,rt,tt);if(it){it=nt.fallback,at=_.mode,rt=_e.child,ot=rt.sibling;var st={mode:"hidden",children:nt.children};return!(at&1)&&_.child!==rt?(nt=_.child,nt.childLanes=0,nt.pendingProps=st,_.deletions=null):(nt=wh(rt,st),nt.subtreeFlags=rt.subtreeFlags&14680064),ot!==null?it=wh(ot,it):(it=Ah(it,at,tt,null),it.flags|=2),it.return=_,nt.return=_,nt.sibling=it,_.child=nt,nt=it,it=_.child,at=_e.child.memoizedState,at=at===null?oj(tt):{baseLanes:at.baseLanes|tt,cachePool:null,transitions:at.transitions},it.memoizedState=at,it.childLanes=_e.childLanes&~tt,_.memoizedState=nj,nt}return it=_e.child,_e=it.sibling,nt=wh(it,{mode:"visible",children:nt.children}),!(_.mode&1)&&(nt.lanes=tt),nt.return=_,nt.sibling=null,_e!==null&&(tt=_.deletions,tt===null?(_.deletions=[_e],_.flags|=16):tt.push(_e)),_.child=nt,_.memoizedState=null,nt}function rj(_e,_){return _=qj({mode:"visible",children:_},_e.mode,0,null),_.return=_e,_e.child=_}function tj(_e,_,tt,nt){return nt!==null&&Jg(nt),Bh(_,_e.child,null,tt),_e=rj(_,_.pendingProps.children),_e.flags|=2,_.memoizedState=null,_e}function sj(_e,_,tt,nt,rt,it,at){if(tt)return _.flags&256?(_.flags&=-257,nt=Li(Error(p$5(422))),tj(_e,_,at,nt)):_.memoizedState!==null?(_.child=_e.child,_.flags|=128,null):(it=nt.fallback,rt=_.mode,nt=qj({mode:"visible",children:nt.children},rt,0,null),it=Ah(it,rt,at,null),it.flags|=2,nt.return=_,it.return=_,nt.sibling=it,_.child=nt,_.mode&1&&Bh(_,_e.child,null,at),_.child.memoizedState=oj(at),_.memoizedState=nj,it);if(!(_.mode&1))return tj(_e,_,at,null);if(rt.data==="$!"){if(nt=rt.nextSibling&&rt.nextSibling.dataset,nt)var ot=nt.dgst;return nt=ot,it=Error(p$5(419)),nt=Li(it,nt,void 0),tj(_e,_,at,nt)}if(ot=(at&_e.childLanes)!==0,Ug||ot){if(nt=R$1,nt!==null){switch(at&-at){case 4:rt=2;break;case 16:rt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:rt=32;break;case 536870912:rt=268435456;break;default:rt=0}rt=rt&(nt.suspendedLanes|at)?0:rt,rt!==0&&rt!==it.retryLane&&(it.retryLane=rt,Zg(_e,rt),mh(nt,_e,rt,-1))}return uj(),nt=Li(Error(p$5(421))),tj(_e,_,at,nt)}return rt.data==="$?"?(_.flags|=128,_.child=_e.child,_=vj.bind(null,_e),rt._reactRetry=_,null):(_e=it.treeContext,yg=Lf(rt.nextSibling),xg=_,I$4=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=_),_=rj(_,nt.children),_.flags|=4096,_)}function wj(_e,_,tt){_e.lanes|=_;var nt=_e.alternate;nt!==null&&(nt.lanes|=_),Sg(_e.return,_,tt)}function xj(_e,_,tt,nt,rt){var it=_e.memoizedState;it===null?_e.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:nt,tail:tt,tailMode:rt}:(it.isBackwards=_,it.rendering=null,it.renderingStartTime=0,it.last=nt,it.tail=tt,it.tailMode=rt)}function yj(_e,_,tt){var nt=_.pendingProps,rt=nt.revealOrder,it=nt.tail;if(Yi(_e,_,nt.children,tt),nt=M$2.current,nt&2)nt=nt&1|2,_.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=_.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&wj(_e,tt,_);else if(_e.tag===19)wj(_e,tt,_);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===_)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===_)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}nt&=1}if(G$1(M$2,nt),!(_.mode&1))_.memoizedState=null;else switch(rt){case"forwards":for(tt=_.child,rt=null;tt!==null;)_e=tt.alternate,_e!==null&&Mh(_e)===null&&(rt=tt),tt=tt.sibling;tt=rt,tt===null?(rt=_.child,_.child=null):(rt=tt.sibling,tt.sibling=null),xj(_,!1,rt,tt,it);break;case"backwards":for(tt=null,rt=_.child,_.child=null;rt!==null;){if(_e=rt.alternate,_e!==null&&Mh(_e)===null){_.child=rt;break}_e=rt.sibling,rt.sibling=tt,tt=rt,rt=_e}xj(_,!0,tt,null,it);break;case"together":xj(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function jj(_e,_){!(_.mode&1)&&_e!==null&&(_e.alternate=null,_.alternate=null,_.flags|=2)}function $i(_e,_,tt){if(_e!==null&&(_.dependencies=_e.dependencies),hh|=_.lanes,!(tt&_.childLanes))return null;if(_e!==null&&_.child!==_e.child)throw Error(p$5(153));if(_.child!==null){for(_e=_.child,tt=wh(_e,_e.pendingProps),_.child=tt,tt.return=_;_e.sibling!==null;)_e=_e.sibling,tt=tt.sibling=wh(_e,_e.pendingProps),tt.return=_;tt.sibling=null}return _.child}function zj(_e,_,tt){switch(_.tag){case 3:lj(_),Ig();break;case 5:Kh(_);break;case 1:Zf(_.type)&&cg(_);break;case 4:Ih(_,_.stateNode.containerInfo);break;case 10:var nt=_.type._context,rt=_.memoizedProps.value;G$1(Mg,nt._currentValue),nt._currentValue=rt;break;case 13:if(nt=_.memoizedState,nt!==null)return nt.dehydrated!==null?(G$1(M$2,M$2.current&1),_.flags|=128,null):tt&_.child.childLanes?pj(_e,_,tt):(G$1(M$2,M$2.current&1),_e=$i(_e,_,tt),_e!==null?_e.sibling:null);G$1(M$2,M$2.current&1);break;case 19:if(nt=(tt&_.childLanes)!==0,_e.flags&128){if(nt)return yj(_e,_,tt);_.flags|=128}if(rt=_.memoizedState,rt!==null&&(rt.rendering=null,rt.tail=null,rt.lastEffect=null),G$1(M$2,M$2.current),nt)break;return null;case 22:case 23:return _.lanes=0,ej(_e,_,tt)}return $i(_e,_,tt)}var Aj,Bj,Cj,Dj;Aj=function(_e,_){for(var tt=_.child;tt!==null;){if(tt.tag===5||tt.tag===6)_e.appendChild(tt.stateNode);else if(tt.tag!==4&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===_)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===_)return;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}};Bj=function(){};Cj=function(_e,_,tt,nt){var rt=_e.memoizedProps;if(rt!==nt){_e=_.stateNode,Hh(Eh.current);var it=null;switch(tt){case"input":rt=Ya(_e,rt),nt=Ya(_e,nt),it=[];break;case"select":rt=A$2({},rt,{value:void 0}),nt=A$2({},nt,{value:void 0}),it=[];break;case"textarea":rt=gb(_e,rt),nt=gb(_e,nt),it=[];break;default:typeof rt.onClick!="function"&&typeof nt.onClick=="function"&&(_e.onclick=Bf)}ub(tt,nt);var at;tt=null;for(lt in rt)if(!nt.hasOwnProperty(lt)&&rt.hasOwnProperty(lt)&&rt[lt]!=null)if(lt==="style"){var ot=rt[lt];for(at in ot)ot.hasOwnProperty(at)&&(tt||(tt={}),tt[at]="")}else lt!=="dangerouslySetInnerHTML"&&lt!=="children"&&lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(ea.hasOwnProperty(lt)?it||(it=[]):(it=it||[]).push(lt,null));for(lt in nt){var st=nt[lt];if(ot=rt!=null?rt[lt]:void 0,nt.hasOwnProperty(lt)&&st!==ot&&(st!=null||ot!=null))if(lt==="style")if(ot){for(at in ot)!ot.hasOwnProperty(at)||st&&st.hasOwnProperty(at)||(tt||(tt={}),tt[at]="");for(at in st)st.hasOwnProperty(at)&&ot[at]!==st[at]&&(tt||(tt={}),tt[at]=st[at])}else tt||(it||(it=[]),it.push(lt,tt)),tt=st;else lt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,ot=ot?ot.__html:void 0,st!=null&&ot!==st&&(it=it||[]).push(lt,st)):lt==="children"?typeof st!="string"&&typeof st!="number"||(it=it||[]).push(lt,""+st):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(lt)?(st!=null&&lt==="onScroll"&&D$1("scroll",_e),it||ot===st||(it=[])):(it=it||[]).push(lt,st))}tt&&(it=it||[]).push("style",tt);var lt=it;(_.updateQueue=lt)&&(_.flags|=4)}};Dj=function(_e,_,tt,nt){tt!==nt&&(_.flags|=4)};function Ej(_e,_){if(!I$4)switch(_e.tailMode){case"hidden":_=_e.tail;for(var tt=null;_!==null;)_.alternate!==null&&(tt=_),_=_.sibling;tt===null?_e.tail=null:tt.sibling=null;break;case"collapsed":tt=_e.tail;for(var nt=null;tt!==null;)tt.alternate!==null&&(nt=tt),tt=tt.sibling;nt===null?_||_e.tail===null?_e.tail=null:_e.tail.sibling=null:nt.sibling=null}}function S$3(_e){var _=_e.alternate!==null&&_e.alternate.child===_e.child,tt=0,nt=0;if(_)for(var rt=_e.child;rt!==null;)tt|=rt.lanes|rt.childLanes,nt|=rt.subtreeFlags&14680064,nt|=rt.flags&14680064,rt.return=_e,rt=rt.sibling;else for(rt=_e.child;rt!==null;)tt|=rt.lanes|rt.childLanes,nt|=rt.subtreeFlags,nt|=rt.flags,rt.return=_e,rt=rt.sibling;return _e.subtreeFlags|=nt,_e.childLanes=tt,_}function Fj(_e,_,tt){var nt=_.pendingProps;switch(wg(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(_),null;case 1:return Zf(_.type)&&$f(),S$3(_),null;case 3:return nt=_.stateNode,Jh(),E$1(Wf),E$1(H$2),Oh(),nt.pendingContext&&(nt.context=nt.pendingContext,nt.pendingContext=null),(_e===null||_e.child===null)&&(Gg(_)?_.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(_.flags&256)||(_.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(_e,_),S$3(_),null;case 5:Lh(_);var rt=Hh(Gh.current);if(tt=_.type,_e!==null&&_.stateNode!=null)Cj(_e,_,tt,nt,rt),_e.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!nt){if(_.stateNode===null)throw Error(p$5(166));return S$3(_),null}if(_e=Hh(Eh.current),Gg(_)){nt=_.stateNode,tt=_.type;var it=_.memoizedProps;switch(nt[Of]=_,nt[Pf]=it,_e=(_.mode&1)!==0,tt){case"dialog":D$1("cancel",nt),D$1("close",nt);break;case"iframe":case"object":case"embed":D$1("load",nt);break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],nt);break;case"source":D$1("error",nt);break;case"img":case"image":case"link":D$1("error",nt),D$1("load",nt);break;case"details":D$1("toggle",nt);break;case"input":Za(nt,it),D$1("invalid",nt);break;case"select":nt._wrapperState={wasMultiple:!!it.multiple},D$1("invalid",nt);break;case"textarea":hb(nt,it),D$1("invalid",nt)}ub(tt,it),rt=null;for(var at in it)if(it.hasOwnProperty(at)){var ot=it[at];at==="children"?typeof ot=="string"?nt.textContent!==ot&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,ot,_e),rt=["children",ot]):typeof ot=="number"&&nt.textContent!==""+ot&&(it.suppressHydrationWarning!==!0&&Af(nt.textContent,ot,_e),rt=["children",""+ot]):ea.hasOwnProperty(at)&&ot!=null&&at==="onScroll"&&D$1("scroll",nt)}switch(tt){case"input":Va(nt),db(nt,it,!0);break;case"textarea":Va(nt),jb(nt);break;case"select":case"option":break;default:typeof it.onClick=="function"&&(nt.onclick=Bf)}nt=rt,_.updateQueue=nt,nt!==null&&(_.flags|=4)}else{at=rt.nodeType===9?rt:rt.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(tt)),_e==="http://www.w3.org/1999/xhtml"?tt==="script"?(_e=at.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof nt.is=="string"?_e=at.createElement(tt,{is:nt.is}):(_e=at.createElement(tt),tt==="select"&&(at=_e,nt.multiple?at.multiple=!0:nt.size&&(at.size=nt.size))):_e=at.createElementNS(_e,tt),_e[Of]=_,_e[Pf]=nt,Aj(_e,_,!1,!1),_.stateNode=_e;e:{switch(at=vb(tt,nt),tt){case"dialog":D$1("cancel",_e),D$1("close",_e),rt=nt;break;case"iframe":case"object":case"embed":D$1("load",_e),rt=nt;break;case"video":case"audio":for(rt=0;rt<lf.length;rt++)D$1(lf[rt],_e);rt=nt;break;case"source":D$1("error",_e),rt=nt;break;case"img":case"image":case"link":D$1("error",_e),D$1("load",_e),rt=nt;break;case"details":D$1("toggle",_e),rt=nt;break;case"input":Za(_e,nt),rt=Ya(_e,nt),D$1("invalid",_e);break;case"option":rt=nt;break;case"select":_e._wrapperState={wasMultiple:!!nt.multiple},rt=A$2({},nt,{value:void 0}),D$1("invalid",_e);break;case"textarea":hb(_e,nt),rt=gb(_e,nt),D$1("invalid",_e);break;default:rt=nt}ub(tt,rt),ot=rt;for(it in ot)if(ot.hasOwnProperty(it)){var st=ot[it];it==="style"?sb(_e,st):it==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&nb(_e,st)):it==="children"?typeof st=="string"?(tt!=="textarea"||st!=="")&&ob(_e,st):typeof st=="number"&&ob(_e,""+st):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?st!=null&&it==="onScroll"&&D$1("scroll",_e):st!=null&&ta(_e,it,st,at))}switch(tt){case"input":Va(_e),db(_e,nt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":nt.value!=null&&_e.setAttribute("value",""+Sa(nt.value));break;case"select":_e.multiple=!!nt.multiple,it=nt.value,it!=null?fb(_e,!!nt.multiple,it,!1):nt.defaultValue!=null&&fb(_e,!!nt.multiple,nt.defaultValue,!0);break;default:typeof rt.onClick=="function"&&(_e.onclick=Bf)}switch(tt){case"button":case"input":case"select":case"textarea":nt=!!nt.autoFocus;break e;case"img":nt=!0;break e;default:nt=!1}}nt&&(_.flags|=4)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return S$3(_),null;case 6:if(_e&&_.stateNode!=null)Dj(_e,_,_e.memoizedProps,nt);else{if(typeof nt!="string"&&_.stateNode===null)throw Error(p$5(166));if(tt=Hh(Gh.current),Hh(Eh.current),Gg(_)){if(nt=_.stateNode,tt=_.memoizedProps,nt[Of]=_,(it=nt.nodeValue!==tt)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(nt.nodeValue,tt,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(nt.nodeValue,tt,(_e.mode&1)!==0)}it&&(_.flags|=4)}else nt=(tt.nodeType===9?tt:tt.ownerDocument).createTextNode(nt),nt[Of]=_,_.stateNode=nt}return S$3(_),null;case 13:if(E$1(M$2),nt=_.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$4&&yg!==null&&_.mode&1&&!(_.flags&128))Hg(),Ig(),_.flags|=98560,it=!1;else if(it=Gg(_),nt!==null&&nt.dehydrated!==null){if(_e===null){if(!it)throw Error(p$5(318));if(it=_.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(p$5(317));it[Of]=_}else Ig(),!(_.flags&128)&&(_.memoizedState=null),_.flags|=4;S$3(_),it=!1}else zg!==null&&(Gj(zg),zg=null),it=!0;if(!it)return _.flags&65536?_:null}return _.flags&128?(_.lanes=tt,_):(nt=nt!==null,nt!==(_e!==null&&_e.memoizedState!==null)&&nt&&(_.child.flags|=8192,_.mode&1&&(_e===null||M$2.current&1?T$2===0&&(T$2=3):uj())),_.updateQueue!==null&&(_.flags|=4),S$3(_),null);case 4:return Jh(),Bj(_e,_),_e===null&&sf(_.stateNode.containerInfo),S$3(_),null;case 10:return Rg(_.type._context),S$3(_),null;case 17:return Zf(_.type)&&$f(),S$3(_),null;case 19:if(E$1(M$2),it=_.memoizedState,it===null)return S$3(_),null;if(nt=(_.flags&128)!==0,at=it.rendering,at===null)if(nt)Ej(it,!1);else{if(T$2!==0||_e!==null&&_e.flags&128)for(_e=_.child;_e!==null;){if(at=Mh(_e),at!==null){for(_.flags|=128,Ej(it,!1),nt=at.updateQueue,nt!==null&&(_.updateQueue=nt,_.flags|=4),_.subtreeFlags=0,nt=tt,tt=_.child;tt!==null;)it=tt,_e=nt,it.flags&=14680066,at=it.alternate,at===null?(it.childLanes=0,it.lanes=_e,it.child=null,it.subtreeFlags=0,it.memoizedProps=null,it.memoizedState=null,it.updateQueue=null,it.dependencies=null,it.stateNode=null):(it.childLanes=at.childLanes,it.lanes=at.lanes,it.child=at.child,it.subtreeFlags=0,it.deletions=null,it.memoizedProps=at.memoizedProps,it.memoizedState=at.memoizedState,it.updateQueue=at.updateQueue,it.type=at.type,_e=at.dependencies,it.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),tt=tt.sibling;return G$1(M$2,M$2.current&1|2),_.child}_e=_e.sibling}it.tail!==null&&B$2()>Hj&&(_.flags|=128,nt=!0,Ej(it,!1),_.lanes=4194304)}else{if(!nt)if(_e=Mh(at),_e!==null){if(_.flags|=128,nt=!0,tt=_e.updateQueue,tt!==null&&(_.updateQueue=tt,_.flags|=4),Ej(it,!0),it.tail===null&&it.tailMode==="hidden"&&!at.alternate&&!I$4)return S$3(_),null}else 2*B$2()-it.renderingStartTime>Hj&&tt!==1073741824&&(_.flags|=128,nt=!0,Ej(it,!1),_.lanes=4194304);it.isBackwards?(at.sibling=_.child,_.child=at):(tt=it.last,tt!==null?tt.sibling=at:_.child=at,it.last=at)}return it.tail!==null?(_=it.tail,it.rendering=_,it.tail=_.sibling,it.renderingStartTime=B$2(),_.sibling=null,tt=M$2.current,G$1(M$2,nt?tt&1|2:tt&1),_):(S$3(_),null);case 22:case 23:return Ij(),nt=_.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==nt&&(_.flags|=8192),nt&&_.mode&1?gj&1073741824&&(S$3(_),_.subtreeFlags&6&&(_.flags|=8192)):S$3(_),null;case 24:return null;case 25:return null}throw Error(p$5(156,_.tag))}function Jj(_e,_){switch(wg(_),_.tag){case 1:return Zf(_.type)&&$f(),_e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 3:return Jh(),E$1(Wf),E$1(H$2),Oh(),_e=_.flags,_e&65536&&!(_e&128)?(_.flags=_e&-65537|128,_):null;case 5:return Lh(_),null;case 13:if(E$1(M$2),_e=_.memoizedState,_e!==null&&_e.dehydrated!==null){if(_.alternate===null)throw Error(p$5(340));Ig()}return _e=_.flags,_e&65536?(_.flags=_e&-65537|128,_):null;case 19:return E$1(M$2),null;case 4:return Jh(),null;case 10:return Rg(_.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Mj(_e,_){var tt=_e.ref;if(tt!==null)if(typeof tt=="function")try{tt(null)}catch(nt){W$1(_e,_,nt)}else tt.current=null}function Nj(_e,_,tt){try{tt()}catch(nt){W$1(_e,_,nt)}}var Oj=!1;function Pj(_e,_){if(Cf=dd,_e=Me$1(),Ne$1(_e)){if("selectionStart"in _e)var tt={start:_e.selectionStart,end:_e.selectionEnd};else e:{tt=(tt=_e.ownerDocument)&&tt.defaultView||window;var nt=tt.getSelection&&tt.getSelection();if(nt&&nt.rangeCount!==0){tt=nt.anchorNode;var rt=nt.anchorOffset,it=nt.focusNode;nt=nt.focusOffset;try{tt.nodeType,it.nodeType}catch{tt=null;break e}var at=0,ot=-1,st=-1,lt=0,ct=0,ut=_e,ft=null;t:for(;;){for(var pt;ut!==tt||rt!==0&&ut.nodeType!==3||(ot=at+rt),ut!==it||nt!==0&&ut.nodeType!==3||(st=at+nt),ut.nodeType===3&&(at+=ut.nodeValue.length),(pt=ut.firstChild)!==null;)ft=ut,ut=pt;for(;;){if(ut===_e)break t;if(ft===tt&&++lt===rt&&(ot=at),ft===it&&++ct===nt&&(st=at),(pt=ut.nextSibling)!==null)break;ut=ft,ft=ut.parentNode}ut=pt}tt=ot===-1||st===-1?null:{start:ot,end:st}}else tt=null}tt=tt||{start:0,end:0}}else tt=null;for(Df={focusedElem:_e,selectionRange:tt},dd=!1,V$3=_;V$3!==null;)if(_=V$3,_e=_.child,(_.subtreeFlags&1028)!==0&&_e!==null)_e.return=_,V$3=_e;else for(;V$3!==null;){_=V$3;try{var gt=_.alternate;if(_.flags&1024)switch(_.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var xt=gt.memoizedProps,yt=gt.memoizedState,mt=_.stateNode,At=mt.getSnapshotBeforeUpdate(_.elementType===_.type?xt:Lg(_.type,xt),yt);mt.__reactInternalSnapshotBeforeUpdate=At}break;case 3:var vt=_.stateNode.containerInfo;vt.nodeType===1?vt.textContent="":vt.nodeType===9&&vt.documentElement&&vt.removeChild(vt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$5(163))}}catch(Et){W$1(_,_.return,Et)}if(_e=_.sibling,_e!==null){_e.return=_.return,V$3=_e;break}V$3=_.return}return gt=Oj,Oj=!1,gt}function Qj(_e,_,tt){var nt=_.updateQueue;if(nt=nt!==null?nt.lastEffect:null,nt!==null){var rt=nt=nt.next;do{if((rt.tag&_e)===_e){var it=rt.destroy;rt.destroy=void 0,it!==void 0&&Nj(_,tt,it)}rt=rt.next}while(rt!==nt)}}function Rj(_e,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var tt=_=_.next;do{if((tt.tag&_e)===_e){var nt=tt.create;tt.destroy=nt()}tt=tt.next}while(tt!==_)}}function Sj(_e){var _=_e.ref;if(_!==null){var tt=_e.stateNode;switch(_e.tag){case 5:_e=tt;break;default:_e=tt}typeof _=="function"?_(_e):_.current=_e}}function Tj(_e){var _=_e.alternate;_!==null&&(_e.alternate=null,Tj(_)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(_=_e.stateNode,_!==null&&(delete _[Of],delete _[Pf],delete _[of],delete _[Qf],delete _[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Uj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Vj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Uj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Wj(_e,_,tt){var nt=_e.tag;if(nt===5||nt===6)_e=_e.stateNode,_?tt.nodeType===8?tt.parentNode.insertBefore(_e,_):tt.insertBefore(_e,_):(tt.nodeType===8?(_=tt.parentNode,_.insertBefore(_e,tt)):(_=tt,_.appendChild(_e)),tt=tt._reactRootContainer,tt!=null||_.onclick!==null||(_.onclick=Bf));else if(nt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,_,tt),_e=_e.sibling;_e!==null;)Wj(_e,_,tt),_e=_e.sibling}function Xj(_e,_,tt){var nt=_e.tag;if(nt===5||nt===6)_e=_e.stateNode,_?tt.insertBefore(_e,_):tt.appendChild(_e);else if(nt!==4&&(_e=_e.child,_e!==null))for(Xj(_e,_,tt),_e=_e.sibling;_e!==null;)Xj(_e,_,tt),_e=_e.sibling}var X=null,Yj=!1;function Zj(_e,_,tt){for(tt=tt.child;tt!==null;)ak(_e,_,tt),tt=tt.sibling}function ak(_e,_,tt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,tt)}catch{}switch(tt.tag){case 5:U$2||Mj(tt,_);case 6:var nt=X,rt=Yj;X=null,Zj(_e,_,tt),X=nt,Yj=rt,X!==null&&(Yj?(_e=X,tt=tt.stateNode,_e.nodeType===8?_e.parentNode.removeChild(tt):_e.removeChild(tt)):X.removeChild(tt.stateNode));break;case 18:X!==null&&(Yj?(_e=X,tt=tt.stateNode,_e.nodeType===8?Kf(_e.parentNode,tt):_e.nodeType===1&&Kf(_e,tt),bd(_e)):Kf(X,tt.stateNode));break;case 4:nt=X,rt=Yj,X=tt.stateNode.containerInfo,Yj=!0,Zj(_e,_,tt),X=nt,Yj=rt;break;case 0:case 11:case 14:case 15:if(!U$2&&(nt=tt.updateQueue,nt!==null&&(nt=nt.lastEffect,nt!==null))){rt=nt=nt.next;do{var it=rt,at=it.destroy;it=it.tag,at!==void 0&&(it&2||it&4)&&Nj(tt,_,at),rt=rt.next}while(rt!==nt)}Zj(_e,_,tt);break;case 1:if(!U$2&&(Mj(tt,_),nt=tt.stateNode,typeof nt.componentWillUnmount=="function"))try{nt.props=tt.memoizedProps,nt.state=tt.memoizedState,nt.componentWillUnmount()}catch(ot){W$1(tt,_,ot)}Zj(_e,_,tt);break;case 21:Zj(_e,_,tt);break;case 22:tt.mode&1?(U$2=(nt=U$2)||tt.memoizedState!==null,Zj(_e,_,tt),U$2=nt):Zj(_e,_,tt);break;default:Zj(_e,_,tt)}}function bk(_e){var _=_e.updateQueue;if(_!==null){_e.updateQueue=null;var tt=_e.stateNode;tt===null&&(tt=_e.stateNode=new Lj),_.forEach(function(nt){var rt=ck.bind(null,_e,nt);tt.has(nt)||(tt.add(nt),nt.then(rt,rt))})}}function dk(_e,_){var tt=_.deletions;if(tt!==null)for(var nt=0;nt<tt.length;nt++){var rt=tt[nt];try{var it=_e,at=_,ot=at;e:for(;ot!==null;){switch(ot.tag){case 5:X=ot.stateNode,Yj=!1;break e;case 3:X=ot.stateNode.containerInfo,Yj=!0;break e;case 4:X=ot.stateNode.containerInfo,Yj=!0;break e}ot=ot.return}if(X===null)throw Error(p$5(160));ak(it,at,rt),X=null,Yj=!1;var st=rt.alternate;st!==null&&(st.return=null),rt.return=null}catch(lt){W$1(rt,_,lt)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)ek(_,_e),_=_.sibling}function ek(_e,_){var tt=_e.alternate,nt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(dk(_,_e),fk(_e),nt&4){try{Qj(3,_e,_e.return),Rj(3,_e)}catch(xt){W$1(_e,_e.return,xt)}try{Qj(5,_e,_e.return)}catch(xt){W$1(_e,_e.return,xt)}}break;case 1:dk(_,_e),fk(_e),nt&512&&tt!==null&&Mj(tt,tt.return);break;case 5:if(dk(_,_e),fk(_e),nt&512&&tt!==null&&Mj(tt,tt.return),_e.flags&32){var rt=_e.stateNode;try{ob(rt,"")}catch(xt){W$1(_e,_e.return,xt)}}if(nt&4&&(rt=_e.stateNode,rt!=null)){var it=_e.memoizedProps,at=tt!==null?tt.memoizedProps:it,ot=_e.type,st=_e.updateQueue;if(_e.updateQueue=null,st!==null)try{ot==="input"&&it.type==="radio"&&it.name!=null&&ab(rt,it),vb(ot,at);var lt=vb(ot,it);for(at=0;at<st.length;at+=2){var ct=st[at],ut=st[at+1];ct==="style"?sb(rt,ut):ct==="dangerouslySetInnerHTML"?nb(rt,ut):ct==="children"?ob(rt,ut):ta(rt,ct,ut,lt)}switch(ot){case"input":bb(rt,it);break;case"textarea":ib(rt,it);break;case"select":var ft=rt._wrapperState.wasMultiple;rt._wrapperState.wasMultiple=!!it.multiple;var pt=it.value;pt!=null?fb(rt,!!it.multiple,pt,!1):ft!==!!it.multiple&&(it.defaultValue!=null?fb(rt,!!it.multiple,it.defaultValue,!0):fb(rt,!!it.multiple,it.multiple?[]:"",!1))}rt[Pf]=it}catch(xt){W$1(_e,_e.return,xt)}}break;case 6:if(dk(_,_e),fk(_e),nt&4){if(_e.stateNode===null)throw Error(p$5(162));rt=_e.stateNode,it=_e.memoizedProps;try{rt.nodeValue=it}catch(xt){W$1(_e,_e.return,xt)}}break;case 3:if(dk(_,_e),fk(_e),nt&4&&tt!==null&&tt.memoizedState.isDehydrated)try{bd(_.containerInfo)}catch(xt){W$1(_e,_e.return,xt)}break;case 4:dk(_,_e),fk(_e);break;case 13:dk(_,_e),fk(_e),rt=_e.child,rt.flags&8192&&(it=rt.memoizedState!==null,rt.stateNode.isHidden=it,!it||rt.alternate!==null&&rt.alternate.memoizedState!==null||(gk=B$2())),nt&4&&bk(_e);break;case 22:if(ct=tt!==null&&tt.memoizedState!==null,_e.mode&1?(U$2=(lt=U$2)||ct,dk(_,_e),U$2=lt):dk(_,_e),fk(_e),nt&8192){if(lt=_e.memoizedState!==null,(_e.stateNode.isHidden=lt)&&!ct&&_e.mode&1)for(V$3=_e,ct=_e.child;ct!==null;){for(ut=V$3=ct;V$3!==null;){switch(ft=V$3,pt=ft.child,ft.tag){case 0:case 11:case 14:case 15:Qj(4,ft,ft.return);break;case 1:Mj(ft,ft.return);var gt=ft.stateNode;if(typeof gt.componentWillUnmount=="function"){nt=ft,tt=ft.return;try{_=nt,gt.props=_.memoizedProps,gt.state=_.memoizedState,gt.componentWillUnmount()}catch(xt){W$1(nt,tt,xt)}}break;case 5:Mj(ft,ft.return);break;case 22:if(ft.memoizedState!==null){hk(ut);continue}}pt!==null?(pt.return=ft,V$3=pt):hk(ut)}ct=ct.sibling}e:for(ct=null,ut=_e;;){if(ut.tag===5){if(ct===null){ct=ut;try{rt=ut.stateNode,lt?(it=rt.style,typeof it.setProperty=="function"?it.setProperty("display","none","important"):it.display="none"):(ot=ut.stateNode,st=ut.memoizedProps.style,at=st!=null&&st.hasOwnProperty("display")?st.display:null,ot.style.display=rb("display",at))}catch(xt){W$1(_e,_e.return,xt)}}}else if(ut.tag===6){if(ct===null)try{ut.stateNode.nodeValue=lt?"":ut.memoizedProps}catch(xt){W$1(_e,_e.return,xt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===_e)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===_e)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===_e)break e;ct===ut&&(ct=null),ut=ut.return}ct===ut&&(ct=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:dk(_,_e),fk(_e),nt&4&&bk(_e);break;case 21:break;default:dk(_,_e),fk(_e)}}function fk(_e){var _=_e.flags;if(_&2){try{e:{for(var tt=_e.return;tt!==null;){if(Uj(tt)){var nt=tt;break e}tt=tt.return}throw Error(p$5(160))}switch(nt.tag){case 5:var rt=nt.stateNode;nt.flags&32&&(ob(rt,""),nt.flags&=-33);var it=Vj(_e);Xj(_e,it,rt);break;case 3:case 4:var at=nt.stateNode.containerInfo,ot=Vj(_e);Wj(_e,ot,at);break;default:throw Error(p$5(161))}}catch(st){W$1(_e,_e.return,st)}_e.flags&=-3}_&4096&&(_e.flags&=-4097)}function ik(_e,_,tt){V$3=_e,jk(_e)}function jk(_e,_,tt){for(var nt=(_e.mode&1)!==0;V$3!==null;){var rt=V$3,it=rt.child;if(rt.tag===22&&nt){var at=rt.memoizedState!==null||Kj;if(!at){var ot=rt.alternate,st=ot!==null&&ot.memoizedState!==null||U$2;ot=Kj;var lt=U$2;if(Kj=at,(U$2=st)&&!lt)for(V$3=rt;V$3!==null;)at=V$3,st=at.child,at.tag===22&&at.memoizedState!==null?kk(rt):st!==null?(st.return=at,V$3=st):kk(rt);for(;it!==null;)V$3=it,jk(it),it=it.sibling;V$3=rt,Kj=ot,U$2=lt}lk(_e)}else rt.subtreeFlags&8772&&it!==null?(it.return=rt,V$3=it):lk(_e)}}function lk(_e){for(;V$3!==null;){var _=V$3;if(_.flags&8772){var tt=_.alternate;try{if(_.flags&8772)switch(_.tag){case 0:case 11:case 15:U$2||Rj(5,_);break;case 1:var nt=_.stateNode;if(_.flags&4&&!U$2)if(tt===null)nt.componentDidMount();else{var rt=_.elementType===_.type?tt.memoizedProps:Lg(_.type,tt.memoizedProps);nt.componentDidUpdate(rt,tt.memoizedState,nt.__reactInternalSnapshotBeforeUpdate)}var it=_.updateQueue;it!==null&&ih(_,it,nt);break;case 3:var at=_.updateQueue;if(at!==null){if(tt=null,_.child!==null)switch(_.child.tag){case 5:tt=_.child.stateNode;break;case 1:tt=_.child.stateNode}ih(_,at,tt)}break;case 5:var ot=_.stateNode;if(tt===null&&_.flags&4){tt=ot;var st=_.memoizedProps;switch(_.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&tt.focus();break;case"img":st.src&&(tt.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(_.memoizedState===null){var lt=_.alternate;if(lt!==null){var ct=lt.memoizedState;if(ct!==null){var ut=ct.dehydrated;ut!==null&&bd(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$5(163))}U$2||_.flags&512&&Sj(_)}catch(ft){W$1(_,_.return,ft)}}if(_===_e){V$3=null;break}if(tt=_.sibling,tt!==null){tt.return=_.return,V$3=tt;break}V$3=_.return}}function hk(_e){for(;V$3!==null;){var _=V$3;if(_===_e){V$3=null;break}var tt=_.sibling;if(tt!==null){tt.return=_.return,V$3=tt;break}V$3=_.return}}function kk(_e){for(;V$3!==null;){var _=V$3;try{switch(_.tag){case 0:case 11:case 15:var tt=_.return;try{Rj(4,_)}catch(st){W$1(_,tt,st)}break;case 1:var nt=_.stateNode;if(typeof nt.componentDidMount=="function"){var rt=_.return;try{nt.componentDidMount()}catch(st){W$1(_,rt,st)}}var it=_.return;try{Sj(_)}catch(st){W$1(_,it,st)}break;case 5:var at=_.return;try{Sj(_)}catch(st){W$1(_,at,st)}}}catch(st){W$1(_,_.return,st)}if(_===_e){V$3=null;break}var ot=_.sibling;if(ot!==null){ot.return=_.return,V$3=ot;break}V$3=_.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R$1=null,Y$2=null,Z=0,gj=0,fj=Uf(0),T$2=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$2(){return K&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(_e){return _e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(_e=C$2,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function mh(_e,_,tt,nt){if(50<zk)throw zk=0,Ak=null,Error(p$5(185));Ac(_e,tt,nt),(!(K&2)||_e!==R$1)&&(_e===R$1&&(!(K&2)&&(rk|=tt),T$2===4&&Dk(_e,Z)),Ek(_e,nt),tt===1&&K===0&&!(_.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(_e,_){var tt=_e.callbackNode;wc(_e,_);var nt=uc(_e,_e===R$1?Z:0);if(nt===0)tt!==null&&bc(tt),_e.callbackNode=null,_e.callbackPriority=0;else if(_=nt&-nt,_e.callbackPriority!==_){if(tt!=null&&bc(tt),_===1)_e.tag===0?ig(Fk.bind(null,_e)):hg(Fk.bind(null,_e)),Jf(function(){!(K&6)&&jg()}),tt=null;else{switch(Dc(nt)){case 1:tt=fc;break;case 4:tt=gc;break;case 16:tt=hc;break;case 536870912:tt=jc;break;default:tt=hc}tt=Gk(tt,Hk.bind(null,_e))}_e.callbackPriority=_,_e.callbackNode=tt}}function Hk(_e,_){if(Bk=-1,Ck=0,K&6)throw Error(p$5(327));var tt=_e.callbackNode;if(Ik()&&_e.callbackNode!==tt)return null;var nt=uc(_e,_e===R$1?Z:0);if(nt===0)return null;if(nt&30||nt&_e.expiredLanes||_)_=Jk(_e,nt);else{_=nt;var rt=K;K|=2;var it=Kk();(R$1!==_e||Z!==_)&&(vk=null,Hj=B$2()+500,Lk(_e,_));do try{Mk();break}catch(ot){Nk(_e,ot)}while(1);Qg(),nk.current=it,K=rt,Y$2!==null?_=0:(R$1=null,Z=0,_=T$2)}if(_!==0){if(_===2&&(rt=xc(_e),rt!==0&&(nt=rt,_=Ok(_e,rt))),_===1)throw tt=qk,Lk(_e,0),Dk(_e,nt),Ek(_e,B$2()),tt;if(_===6)Dk(_e,nt);else{if(rt=_e.current.alternate,!(nt&30)&&!Pk(rt)&&(_=Jk(_e,nt),_===2&&(it=xc(_e),it!==0&&(nt=it,_=Ok(_e,it))),_===1))throw tt=qk,Lk(_e,0),Dk(_e,nt),Ek(_e,B$2()),tt;switch(_e.finishedWork=rt,_e.finishedLanes=nt,_){case 0:case 1:throw Error(p$5(345));case 2:Qk(_e,uk,vk);break;case 3:if(Dk(_e,nt),(nt&130023424)===nt&&(_=gk+500-B$2(),10<_)){if(uc(_e,0)!==0)break;if(rt=_e.suspendedLanes,(rt&nt)!==nt){L$2(),_e.pingedLanes|=_e.suspendedLanes&rt;break}_e.timeoutHandle=Ff(Qk.bind(null,_e,uk,vk),_);break}Qk(_e,uk,vk);break;case 4:if(Dk(_e,nt),(nt&4194240)===nt)break;for(_=_e.eventTimes,rt=-1;0<nt;){var at=31-oc(nt);it=1<<at,at=_[at],at>rt&&(rt=at),nt&=~it}if(nt=rt,nt=B$2()-nt,nt=(120>nt?120:480>nt?480:1080>nt?1080:1920>nt?1920:3e3>nt?3e3:4320>nt?4320:1960*mk(nt/1960))-nt,10<nt){_e.timeoutHandle=Ff(Qk.bind(null,_e,uk,vk),nt);break}Qk(_e,uk,vk);break;case 5:Qk(_e,uk,vk);break;default:throw Error(p$5(329))}}}return Ek(_e,B$2()),_e.callbackNode===tt?Hk.bind(null,_e):null}function Ok(_e,_){var tt=tk;return _e.current.memoizedState.isDehydrated&&(Lk(_e,_).flags|=256),_e=Jk(_e,_),_e!==2&&(_=uk,uk=tt,_!==null&&Gj(_)),_e}function Gj(_e){uk===null?uk=_e:uk.push.apply(uk,_e)}function Pk(_e){for(var _=_e;;){if(_.flags&16384){var tt=_.updateQueue;if(tt!==null&&(tt=tt.stores,tt!==null))for(var nt=0;nt<tt.length;nt++){var rt=tt[nt],it=rt.getSnapshot;rt=rt.value;try{if(!He(it(),rt))return!1}catch{return!1}}}if(tt=_.child,_.subtreeFlags&16384&&tt!==null)tt.return=_,_=tt;else{if(_===_e)break;for(;_.sibling===null;){if(_.return===null||_.return===_e)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Dk(_e,_){for(_&=~sk,_&=~rk,_e.suspendedLanes|=_,_e.pingedLanes&=~_,_e=_e.expirationTimes;0<_;){var tt=31-oc(_),nt=1<<tt;_e[tt]=-1,_&=~nt}}function Fk(_e){if(K&6)throw Error(p$5(327));Ik();var _=uc(_e,0);if(!(_&1))return Ek(_e,B$2()),null;var tt=Jk(_e,_);if(_e.tag!==0&&tt===2){var nt=xc(_e);nt!==0&&(_=nt,tt=Ok(_e,nt))}if(tt===1)throw tt=qk,Lk(_e,0),Dk(_e,_),Ek(_e,B$2()),tt;if(tt===6)throw Error(p$5(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=_,Qk(_e,uk,vk),Ek(_e,B$2()),null}function Rk(_e,_){var tt=K;K|=1;try{return _e(_)}finally{K=tt,K===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(_e){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var _=K;K|=1;var tt=pk.transition,nt=C$2;try{if(pk.transition=null,C$2=1,_e)return _e()}finally{C$2=nt,pk.transition=tt,K=_,!(K&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(_e,_){_e.finishedWork=null,_e.finishedLanes=0;var tt=_e.timeoutHandle;if(tt!==-1&&(_e.timeoutHandle=-1,Gf(tt)),Y$2!==null)for(tt=Y$2.return;tt!==null;){var nt=tt;switch(wg(nt),nt.tag){case 1:nt=nt.type.childContextTypes,nt!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$2),Oh();break;case 5:Lh(nt);break;case 4:Jh();break;case 13:E$1(M$2);break;case 19:E$1(M$2);break;case 10:Rg(nt.type._context);break;case 22:case 23:Ij()}tt=tt.return}if(R$1=_e,Y$2=_e=wh(_e.current,null),Z=gj=_,T$2=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(_=0;_<Wg.length;_++)if(tt=Wg[_],nt=tt.interleaved,nt!==null){tt.interleaved=null;var rt=nt.next,it=tt.pending;if(it!==null){var at=it.next;it.next=rt,nt.next=at}tt.pending=nt}Wg=null}return _e}function Nk(_e,_){do{var tt=Y$2;try{if(Qg(),Ph.current=ai,Sh){for(var nt=N$2.memoizedState;nt!==null;){var rt=nt.queue;rt!==null&&(rt.pending=null),nt=nt.next}Sh=!1}if(Rh=0,P$1=O$1=N$2=null,Th=!1,Uh=0,ok.current=null,tt===null||tt.return===null){T$2=1,qk=_,Y$2=null;break}e:{var it=_e,at=tt.return,ot=tt,st=_;if(_=Z,ot.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var lt=st,ct=ot,ut=ct.tag;if(!(ct.mode&1)&&(ut===0||ut===11||ut===15)){var ft=ct.alternate;ft?(ct.updateQueue=ft.updateQueue,ct.memoizedState=ft.memoizedState,ct.lanes=ft.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var pt=Vi(at);if(pt!==null){pt.flags&=-257,Wi(pt,at,ot,it,_),pt.mode&1&&Ti(it,lt,_),_=pt,st=lt;var gt=_.updateQueue;if(gt===null){var xt=new Set;xt.add(st),_.updateQueue=xt}else gt.add(st);break e}else{if(!(_&1)){Ti(it,lt,_),uj();break e}st=Error(p$5(426))}}else if(I$4&&ot.mode&1){var yt=Vi(at);if(yt!==null){!(yt.flags&65536)&&(yt.flags|=256),Wi(yt,at,ot,it,_),Jg(Ki(st,ot));break e}}it=st=Ki(st,ot),T$2!==4&&(T$2=2),tk===null?tk=[it]:tk.push(it),it=at;do{switch(it.tag){case 3:it.flags|=65536,_&=-_,it.lanes|=_;var mt=Oi(it,st,_);fh(it,mt);break e;case 1:ot=st;var At=it.type,vt=it.stateNode;if(!(it.flags&128)&&(typeof At.getDerivedStateFromError=="function"||vt!==null&&typeof vt.componentDidCatch=="function"&&(Si===null||!Si.has(vt)))){it.flags|=65536,_&=-_,it.lanes|=_;var Et=Ri(it,ot,_);fh(it,Et);break e}}it=it.return}while(it!==null)}Tk(tt)}catch(Ct){_=Ct,Y$2===tt&&tt!==null&&(Y$2=tt=tt.return);continue}break}while(1)}function Kk(){var _e=nk.current;return nk.current=ai,_e===null?ai:_e}function uj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z)}function Jk(_e,_){var tt=K;K|=2;var nt=Kk();(R$1!==_e||Z!==_)&&(vk=null,Lk(_e,_));do try{Uk();break}catch(rt){Nk(_e,rt)}while(1);if(Qg(),K=tt,nk.current=nt,Y$2!==null)throw Error(p$5(261));return R$1=null,Z=0,T$2}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc$1();)Vk(Y$2)}function Vk(_e){var _=Wk(_e.alternate,_e,gj);_e.memoizedProps=_e.pendingProps,_===null?Tk(_e):Y$2=_,ok.current=null}function Tk(_e){var _=_e;do{var tt=_.alternate;if(_e=_.return,_.flags&32768){if(tt=Jj(tt,_),tt!==null){tt.flags&=32767,Y$2=tt;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$2=6,Y$2=null;return}}else if(tt=Fj(tt,_,gj),tt!==null){Y$2=tt;return}if(_=_.sibling,_!==null){Y$2=_;return}Y$2=_=_e}while(_!==null);T$2===0&&(T$2=5)}function Qk(_e,_,tt){var nt=C$2,rt=pk.transition;try{pk.transition=null,C$2=1,Xk(_e,_,tt,nt)}finally{pk.transition=rt,C$2=nt}return null}function Xk(_e,_,tt,nt){do Ik();while(xk!==null);if(K&6)throw Error(p$5(327));tt=_e.finishedWork;var rt=_e.finishedLanes;if(tt===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,tt===_e.current)throw Error(p$5(177));_e.callbackNode=null,_e.callbackPriority=0;var it=tt.lanes|tt.childLanes;if(Bc(_e,it),_e===R$1&&(Y$2=R$1=null,Z=0),!(tt.subtreeFlags&2064)&&!(tt.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),it=(tt.flags&15990)!==0,tt.subtreeFlags&15990||it){it=pk.transition,pk.transition=null;var at=C$2;C$2=1;var ot=K;K|=4,ok.current=null,Pj(_e,tt),ek(tt,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=tt,ik(tt),dc(),K=ot,C$2=at,pk.transition=it}else _e.current=tt;if(wk&&(wk=!1,xk=_e,yk=rt),it=_e.pendingLanes,it===0&&(Si=null),mc(tt.stateNode),Ek(_e,B$2()),_!==null)for(nt=_e.onRecoverableError,tt=0;tt<_.length;tt++)rt=_[tt],nt(rt.value,{componentStack:rt.stack,digest:rt.digest});if(Pi)throw Pi=!1,_e=Qi,Qi=null,_e;return yk&1&&_e.tag!==0&&Ik(),it=_e.pendingLanes,it&1?_e===Ak?zk++:(zk=0,Ak=_e):zk=0,jg(),null}function Ik(){if(xk!==null){var _e=Dc(yk),_=pk.transition,tt=C$2;try{if(pk.transition=null,C$2=16>_e?16:_e,xk===null)var nt=!1;else{if(_e=xk,xk=null,yk=0,K&6)throw Error(p$5(331));var rt=K;for(K|=4,V$3=_e.current;V$3!==null;){var it=V$3,at=it.child;if(V$3.flags&16){var ot=it.deletions;if(ot!==null){for(var st=0;st<ot.length;st++){var lt=ot[st];for(V$3=lt;V$3!==null;){var ct=V$3;switch(ct.tag){case 0:case 11:case 15:Qj(8,ct,it)}var ut=ct.child;if(ut!==null)ut.return=ct,V$3=ut;else for(;V$3!==null;){ct=V$3;var ft=ct.sibling,pt=ct.return;if(Tj(ct),ct===lt){V$3=null;break}if(ft!==null){ft.return=pt,V$3=ft;break}V$3=pt}}}var gt=it.alternate;if(gt!==null){var xt=gt.child;if(xt!==null){gt.child=null;do{var yt=xt.sibling;xt.sibling=null,xt=yt}while(xt!==null)}}V$3=it}}if(it.subtreeFlags&2064&&at!==null)at.return=it,V$3=at;else e:for(;V$3!==null;){if(it=V$3,it.flags&2048)switch(it.tag){case 0:case 11:case 15:Qj(9,it,it.return)}var mt=it.sibling;if(mt!==null){mt.return=it.return,V$3=mt;break e}V$3=it.return}}var At=_e.current;for(V$3=At;V$3!==null;){at=V$3;var vt=at.child;if(at.subtreeFlags&2064&&vt!==null)vt.return=at,V$3=vt;else e:for(at=At;V$3!==null;){if(ot=V$3,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Rj(9,ot)}}catch(Ct){W$1(ot,ot.return,Ct)}if(ot===at){V$3=null;break e}var Et=ot.sibling;if(Et!==null){Et.return=ot.return,V$3=Et;break e}V$3=ot.return}}if(K=rt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}nt=!0}return nt}finally{C$2=tt,pk.transition=_}}return!1}function Yk(_e,_,tt){_=Ki(tt,_),_=Oi(_e,_,1),_e=dh(_e,_,1),_=L$2(),_e!==null&&(Ac(_e,1,_),Ek(_e,_))}function W$1(_e,_,tt){if(_e.tag===3)Yk(_e,_e,tt);else for(;_!==null;){if(_.tag===3){Yk(_,_e,tt);break}else if(_.tag===1){var nt=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof nt.componentDidCatch=="function"&&(Si===null||!Si.has(nt))){_e=Ki(tt,_e),_e=Ri(_,_e,1),_=dh(_,_e,1),_e=L$2(),_!==null&&(Ac(_,1,_e),Ek(_,_e));break}}_=_.return}}function Ui(_e,_,tt){var nt=_e.pingCache;nt!==null&&nt.delete(_),_=L$2(),_e.pingedLanes|=_e.suspendedLanes&tt,R$1===_e&&(Z&tt)===tt&&(T$2===4||T$2===3&&(Z&130023424)===Z&&500>B$2()-gk?Lk(_e,0):sk|=tt),Ek(_e,_)}function Zk(_e,_){_===0&&(_e.mode&1?(_=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):_=1);var tt=L$2();_e=Zg(_e,_),_e!==null&&(Ac(_e,_,tt),Ek(_e,tt))}function vj(_e){var _=_e.memoizedState,tt=0;_!==null&&(tt=_.retryLane),Zk(_e,tt)}function ck(_e,_){var tt=0;switch(_e.tag){case 13:var nt=_e.stateNode,rt=_e.memoizedState;rt!==null&&(tt=rt.retryLane);break;case 19:nt=_e.stateNode;break;default:throw Error(p$5(314))}nt!==null&&nt.delete(_),Zk(_e,tt)}var Wk;Wk=function(_e,_,tt){if(_e!==null)if(_e.memoizedProps!==_.pendingProps||Wf.current)Ug=!0;else{if(!(_e.lanes&tt)&&!(_.flags&128))return Ug=!1,zj(_e,_,tt);Ug=!!(_e.flags&131072)}else Ug=!1,I$4&&_.flags&1048576&&ug(_,ng,_.index);switch(_.lanes=0,_.tag){case 2:var nt=_.type;jj(_e,_),_e=_.pendingProps;var rt=Yf(_,H$2.current);Tg(_,tt),rt=Xh(null,_,nt,_e,rt,tt);var it=bi();return _.flags|=1,typeof rt=="object"&&rt!==null&&typeof rt.render=="function"&&rt.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Zf(nt)?(it=!0,cg(_)):it=!1,_.memoizedState=rt.state!==null&&rt.state!==void 0?rt.state:null,ah(_),rt.updater=nh,_.stateNode=rt,rt._reactInternals=_,rh(_,nt,_e,tt),_=kj(null,_,nt,!0,it,tt)):(_.tag=0,I$4&&it&&vg(_),Yi(null,_,rt,tt),_=_.child),_;case 16:nt=_.elementType;e:{switch(jj(_e,_),_e=_.pendingProps,rt=nt._init,nt=rt(nt._payload),_.type=nt,rt=_.tag=$k(nt),_e=Lg(nt,_e),rt){case 0:_=dj(null,_,nt,_e,tt);break e;case 1:_=ij(null,_,nt,_e,tt);break e;case 11:_=Zi(null,_,nt,_e,tt);break e;case 14:_=aj(null,_,nt,Lg(nt.type,_e),tt);break e}throw Error(p$5(306,nt,""))}return _;case 0:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Lg(nt,rt),dj(_e,_,nt,rt,tt);case 1:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Lg(nt,rt),ij(_e,_,nt,rt,tt);case 3:e:{if(lj(_),_e===null)throw Error(p$5(387));nt=_.pendingProps,it=_.memoizedState,rt=it.element,bh(_e,_),gh(_,nt,null,tt);var at=_.memoizedState;if(nt=at.element,it.isDehydrated)if(it={element:nt,isDehydrated:!1,cache:at.cache,pendingSuspenseBoundaries:at.pendingSuspenseBoundaries,transitions:at.transitions},_.updateQueue.baseState=it,_.memoizedState=it,_.flags&256){rt=Ki(Error(p$5(423)),_),_=mj(_e,_,nt,tt,rt);break e}else if(nt!==rt){rt=Ki(Error(p$5(424)),_),_=mj(_e,_,nt,tt,rt);break e}else for(yg=Lf(_.stateNode.containerInfo.firstChild),xg=_,I$4=!0,zg=null,tt=Ch(_,null,nt,tt),_.child=tt;tt;)tt.flags=tt.flags&-3|4096,tt=tt.sibling;else{if(Ig(),nt===rt){_=$i(_e,_,tt);break e}Yi(_e,_,nt,tt)}_=_.child}return _;case 5:return Kh(_),_e===null&&Eg(_),nt=_.type,rt=_.pendingProps,it=_e!==null?_e.memoizedProps:null,at=rt.children,Ef(nt,rt)?at=null:it!==null&&Ef(nt,it)&&(_.flags|=32),hj(_e,_),Yi(_e,_,at,tt),_.child;case 6:return _e===null&&Eg(_),null;case 13:return pj(_e,_,tt);case 4:return Ih(_,_.stateNode.containerInfo),nt=_.pendingProps,_e===null?_.child=Bh(_,null,nt,tt):Yi(_e,_,nt,tt),_.child;case 11:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Lg(nt,rt),Zi(_e,_,nt,rt,tt);case 7:return Yi(_e,_,_.pendingProps,tt),_.child;case 8:return Yi(_e,_,_.pendingProps.children,tt),_.child;case 12:return Yi(_e,_,_.pendingProps.children,tt),_.child;case 10:e:{if(nt=_.type._context,rt=_.pendingProps,it=_.memoizedProps,at=rt.value,G$1(Mg,nt._currentValue),nt._currentValue=at,it!==null)if(He(it.value,at)){if(it.children===rt.children&&!Wf.current){_=$i(_e,_,tt);break e}}else for(it=_.child,it!==null&&(it.return=_);it!==null;){var ot=it.dependencies;if(ot!==null){at=it.child;for(var st=ot.firstContext;st!==null;){if(st.context===nt){if(it.tag===1){st=ch(-1,tt&-tt),st.tag=2;var lt=it.updateQueue;if(lt!==null){lt=lt.shared;var ct=lt.pending;ct===null?st.next=st:(st.next=ct.next,ct.next=st),lt.pending=st}}it.lanes|=tt,st=it.alternate,st!==null&&(st.lanes|=tt),Sg(it.return,tt,_),ot.lanes|=tt;break}st=st.next}}else if(it.tag===10)at=it.type===_.type?null:it.child;else if(it.tag===18){if(at=it.return,at===null)throw Error(p$5(341));at.lanes|=tt,ot=at.alternate,ot!==null&&(ot.lanes|=tt),Sg(at,tt,_),at=it.sibling}else at=it.child;if(at!==null)at.return=it;else for(at=it;at!==null;){if(at===_){at=null;break}if(it=at.sibling,it!==null){it.return=at.return,at=it;break}at=at.return}it=at}Yi(_e,_,rt.children,tt),_=_.child}return _;case 9:return rt=_.type,nt=_.pendingProps.children,Tg(_,tt),rt=Vg(rt),nt=nt(rt),_.flags|=1,Yi(_e,_,nt,tt),_.child;case 14:return nt=_.type,rt=Lg(nt,_.pendingProps),rt=Lg(nt.type,rt),aj(_e,_,nt,rt,tt);case 15:return cj(_e,_,_.type,_.pendingProps,tt);case 17:return nt=_.type,rt=_.pendingProps,rt=_.elementType===nt?rt:Lg(nt,rt),jj(_e,_),_.tag=1,Zf(nt)?(_e=!0,cg(_)):_e=!1,Tg(_,tt),ph(_,nt,rt),rh(_,nt,rt,tt),kj(null,_,nt,!0,_e,tt);case 19:return yj(_e,_,tt);case 22:return ej(_e,_,tt)}throw Error(p$5(156,_.tag))};function Gk(_e,_){return ac(_e,_)}function al(_e,_,tt,nt){this.tag=_e,this.key=tt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,_,tt,nt){return new al(_e,_,tt,nt)}function bj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function $k(_e){if(typeof _e=="function")return bj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function wh(_e,_){var tt=_e.alternate;return tt===null?(tt=Bg(_e.tag,_,_e.key,_e.mode),tt.elementType=_e.elementType,tt.type=_e.type,tt.stateNode=_e.stateNode,tt.alternate=_e,_e.alternate=tt):(tt.pendingProps=_,tt.type=_e.type,tt.flags=0,tt.subtreeFlags=0,tt.deletions=null),tt.flags=_e.flags&14680064,tt.childLanes=_e.childLanes,tt.lanes=_e.lanes,tt.child=_e.child,tt.memoizedProps=_e.memoizedProps,tt.memoizedState=_e.memoizedState,tt.updateQueue=_e.updateQueue,_=_e.dependencies,tt.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},tt.sibling=_e.sibling,tt.index=_e.index,tt.ref=_e.ref,tt}function yh(_e,_,tt,nt,rt,it){var at=2;if(nt=_e,typeof _e=="function")bj(_e)&&(at=1);else if(typeof _e=="string")at=5;else e:switch(_e){case ya:return Ah(tt.children,rt,it,_);case za:at=8,rt|=8;break;case Aa:return _e=Bg(12,tt,_,rt|2),_e.elementType=Aa,_e.lanes=it,_e;case Ea:return _e=Bg(13,tt,_,rt),_e.elementType=Ea,_e.lanes=it,_e;case Fa:return _e=Bg(19,tt,_,rt),_e.elementType=Fa,_e.lanes=it,_e;case Ia:return qj(tt,rt,it,_);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:at=10;break e;case Ca:at=9;break e;case Da:at=11;break e;case Ga:at=14;break e;case Ha:at=16,nt=null;break e}throw Error(p$5(130,_e==null?_e:typeof _e,""))}return _=Bg(at,tt,_,rt),_.elementType=_e,_.type=nt,_.lanes=it,_}function Ah(_e,_,tt,nt){return _e=Bg(7,_e,nt,_),_e.lanes=tt,_e}function qj(_e,_,tt,nt){return _e=Bg(22,_e,nt,_),_e.elementType=Ia,_e.lanes=tt,_e.stateNode={isHidden:!1},_e}function xh(_e,_,tt){return _e=Bg(6,_e,null,_),_e.lanes=tt,_e}function zh(_e,_,tt){return _=Bg(4,_e.children!==null?_e.children:[],_e.key,_),_.lanes=tt,_.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},_}function bl(_e,_,tt,nt,rt){this.tag=_,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nt,this.onRecoverableError=rt,this.mutableSourceEagerHydrationData=null}function cl(_e,_,tt,nt,rt,it,at,ot,st){return _e=new bl(_e,_,tt,ot,st),_===1?(_=1,it===!0&&(_|=8)):_=0,it=Bg(3,null,null,_),_e.current=it,it.stateNode=_e,it.memoizedState={element:nt,isDehydrated:tt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(it),_e}function dl(_e,_,tt){var nt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nt==null?null:""+nt,children:_e,containerInfo:_,implementation:tt}}function el(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$5(170));var _=_e;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Zf(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(p$5(171))}if(_e.tag===1){var tt=_e.type;if(Zf(tt))return bg(_e,tt,_)}return _}function fl$1(_e,_,tt,nt,rt,it,at,ot,st){return _e=cl(tt,nt,!0,_e,rt,it,at,ot,st),_e.context=el(null),tt=_e.current,nt=L$2(),rt=lh(tt),it=ch(nt,rt),it.callback=_??null,dh(tt,it,rt),_e.current.lanes=rt,Ac(_e,rt,nt),Ek(_e,nt),_e}function gl(_e,_,tt,nt){var rt=_.current,it=L$2(),at=lh(rt);return tt=el(tt),_.context===null?_.context=tt:_.pendingContext=tt,_=ch(it,at),_.payload={element:_e},nt=nt===void 0?null:nt,nt!==null&&(_.callback=nt),_e=dh(rt,_,at),_e!==null&&(mh(_e,rt,at,it),eh(_e,rt,at)),at}function hl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function il(_e,_){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var tt=_e.retryLane;_e.retryLane=tt!==0&&tt<_?tt:_}}function jl(_e,_){il(_e,_),(_e=_e.alternate)&&il(_e,_)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ml(_e){this._internalRoot=_e}nl.prototype.render=ml.prototype.render=function(_e){var _=this._internalRoot;if(_===null)throw Error(p$5(409));gl(_e,_,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var _=_e.containerInfo;Sk(function(){gl(null,_e,null,null)}),_[uf]=null}};function nl(_e){this._internalRoot=_e}nl.prototype.unstable_scheduleHydration=function(_e){if(_e){var _=Hc();_e={blockedOn:null,target:_e,priority:_};for(var tt=0;tt<Qc.length&&_!==0&&_<Qc[tt].priority;tt++);Qc.splice(tt,0,_e),tt===0&&Vc(_e)}};function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function pl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(_e,_,tt,nt,rt){if(rt){if(typeof nt=="function"){var it=nt;nt=function(){var lt=hl(at);it.call(lt)}}var at=fl$1(_,nt,_e,0,null,!1,!1,"",ql);return _e._reactRootContainer=at,_e[uf]=at.current,sf(_e.nodeType===8?_e.parentNode:_e),Sk(),at}for(;rt=_e.lastChild;)_e.removeChild(rt);if(typeof nt=="function"){var ot=nt;nt=function(){var lt=hl(st);ot.call(lt)}}var st=cl(_e,0,!1,null,null,!1,!1,"",ql);return _e._reactRootContainer=st,_e[uf]=st.current,sf(_e.nodeType===8?_e.parentNode:_e),Sk(function(){gl(_,st,tt,nt)}),st}function sl(_e,_,tt,nt,rt){var it=tt._reactRootContainer;if(it){var at=it;if(typeof rt=="function"){var ot=rt;rt=function(){var st=hl(at);ot.call(st)}}gl(_,at,_e,rt)}else at=rl(tt,_,_e,rt,nt);return hl(at)}Ec=function(_e){switch(_e.tag){case 3:var _=_e.stateNode;if(_.current.memoizedState.isDehydrated){var tt=tc(_.pendingLanes);tt!==0&&(Cc(_,tt|1),Ek(_,B$2()),!(K&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var nt=Zg(_e,1);if(nt!==null){var rt=L$2();mh(nt,_e,1,rt)}}),jl(_e,1)}};Fc=function(_e){if(_e.tag===13){var _=Zg(_e,134217728);if(_!==null){var tt=L$2();mh(_,_e,134217728,tt)}jl(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var _=lh(_e),tt=Zg(_e,_);if(tt!==null){var nt=L$2();mh(tt,_e,_,nt)}jl(_e,_)}};Hc=function(){return C$2};Ic=function(_e,_){var tt=C$2;try{return C$2=_e,_()}finally{C$2=tt}};yb=function(_e,_,tt){switch(_){case"input":if(bb(_e,tt),_=tt.name,tt.type==="radio"&&_!=null){for(tt=_e;tt.parentNode;)tt=tt.parentNode;for(tt=tt.querySelectorAll("input[name="+JSON.stringify(""+_)+'][type="radio"]'),_=0;_<tt.length;_++){var nt=tt[_];if(nt!==_e&&nt.form===_e.form){var rt=Db(nt);if(!rt)throw Error(p$5(90));Wa(nt),bb(nt,rt)}}}break;case"textarea":ib(_e,tt);break;case"select":_=tt.value,_!=null&&fb(_e,!!tt.multiple,_,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(_e,_){var tt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(_))throw Error(p$5(200));return dl(_e,_,null,tt)};reactDom_production_min.createRoot=function(_e,_){if(!ol(_e))throw Error(p$5(299));var tt=!1,nt="",rt=ll;return _!=null&&(_.unstable_strictMode===!0&&(tt=!0),_.identifierPrefix!==void 0&&(nt=_.identifierPrefix),_.onRecoverableError!==void 0&&(rt=_.onRecoverableError)),_=cl(_e,1,!1,null,null,tt,!1,nt,rt),_e[uf]=_.current,sf(_e.nodeType===8?_e.parentNode:_e),new ml(_)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var _=_e._reactInternals;if(_===void 0)throw typeof _e.render=="function"?Error(p$5(188)):(_e=Object.keys(_e).join(","),Error(p$5(268,_e)));return _e=Zb(_),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Sk(_e)};reactDom_production_min.hydrate=function(_e,_,tt){if(!pl(_))throw Error(p$5(200));return sl(null,_e,_,!0,tt)};reactDom_production_min.hydrateRoot=function(_e,_,tt){if(!ol(_e))throw Error(p$5(405));var nt=tt!=null&&tt.hydratedSources||null,rt=!1,it="",at=ll;if(tt!=null&&(tt.unstable_strictMode===!0&&(rt=!0),tt.identifierPrefix!==void 0&&(it=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(at=tt.onRecoverableError)),_=fl$1(_,null,_e,1,tt??null,rt,!1,it,at),_e[uf]=_.current,sf(_e),nt)for(_e=0;_e<nt.length;_e++)tt=nt[_e],rt=tt._getVersion,rt=rt(tt._source),_.mutableSourceEagerHydrationData==null?_.mutableSourceEagerHydrationData=[tt,rt]:_.mutableSourceEagerHydrationData.push(tt,rt);return new nl(_)};reactDom_production_min.render=function(_e,_,tt){if(!pl(_))throw Error(p$5(200));return sl(null,_e,_,!1,tt)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!pl(_e))throw Error(p$5(40));return _e._reactRootContainer?(Sk(function(){sl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,_,tt,nt){if(!pl(tt))throw Error(p$5(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$5(38));return sl(_e,_,tt,!1,nt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$4=reactDomExports;client.createRoot=m$4.createRoot,client.hydrateRoot=m$4.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="156",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,TwoPassDoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,AlphaFormat=1021,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,LinearEncoding=3e3,sRGBEncoding=3001,BasicDepthPacking=3200,RGBADepthPacking=3201,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",DisplayP3ColorSpace="display-p3",LinearDisplayP3ColorSpace="display-p3-linear",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",_SRGBAFormat=1035,WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001;class EventDispatcher{addEventListener(_,tt){this._listeners===void 0&&(this._listeners={});const nt=this._listeners;nt[_]===void 0&&(nt[_]=[]),nt[_].indexOf(tt)===-1&&nt[_].push(tt)}hasEventListener(_,tt){if(this._listeners===void 0)return!1;const nt=this._listeners;return nt[_]!==void 0&&nt[_].indexOf(tt)!==-1}removeEventListener(_,tt){if(this._listeners===void 0)return;const rt=this._listeners[_];if(rt!==void 0){const it=rt.indexOf(tt);it!==-1&&rt.splice(it,1)}}dispatchEvent(_){if(this._listeners===void 0)return;const nt=this._listeners[_.type];if(nt!==void 0){_.target=this;const rt=nt.slice(0);for(let it=0,at=rt.length;it<at;it++)rt[it].call(this,_);_.target=null}}}const _lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const _e=Math.random()*4294967295|0,_=Math.random()*4294967295|0,tt=Math.random()*4294967295|0,nt=Math.random()*4294967295|0;return(_lut$1[_e&255]+_lut$1[_e>>8&255]+_lut$1[_e>>16&255]+_lut$1[_e>>24&255]+"-"+_lut$1[_&255]+_lut$1[_>>8&255]+"-"+_lut$1[_>>16&15|64]+_lut$1[_>>24&255]+"-"+_lut$1[tt&63|128]+_lut$1[tt>>8&255]+"-"+_lut$1[tt>>16&255]+_lut$1[tt>>24&255]+_lut$1[nt&255]+_lut$1[nt>>8&255]+_lut$1[nt>>16&255]+_lut$1[nt>>24&255]).toLowerCase()}function clamp$4(_e,_,tt){return Math.max(_,Math.min(tt,_e))}function euclideanModulo(_e,_){return(_e%_+_)%_}function mapLinear(_e,_,tt,nt,rt){return nt+(_e-_)*(rt-nt)/(tt-_)}function inverseLerp(_e,_,tt){return _e!==_?(tt-_e)/(_-_e):0}function lerp(_e,_,tt){return(1-tt)*_e+tt*_}function damp$1(_e,_,tt,nt){return lerp(_e,_,1-Math.exp(-tt*nt))}function pingpong(_e,_=1){return _-Math.abs(euclideanModulo(_e,_*2)-_)}function smoothstep(_e,_,tt){return _e<=_?0:_e>=tt?1:(_e=(_e-_)/(tt-_),_e*_e*(3-2*_e))}function smootherstep(_e,_,tt){return _e<=_?0:_e>=tt?1:(_e=(_e-_)/(tt-_),_e*_e*_e*(_e*(_e*6-15)+10))}function randInt(_e,_){return _e+Math.floor(Math.random()*(_-_e+1))}function randFloat(_e,_){return _e+Math.random()*(_-_e)}function randFloatSpread(_e){return _e*(.5-Math.random())}function seededRandom(_e){_e!==void 0&&(_seed=_e);let _=_seed+=1831565813;return _=Math.imul(_^_>>>15,_|1),_^=_+Math.imul(_^_>>>7,_|61),((_^_>>>14)>>>0)/4294967296}function degToRad(_e){return _e*DEG2RAD}function radToDeg(_e){return _e*RAD2DEG}function isPowerOfTwo(_e){return(_e&_e-1)===0&&_e!==0}function ceilPowerOfTwo(_e){return Math.pow(2,Math.ceil(Math.log(_e)/Math.LN2))}function floorPowerOfTwo(_e){return Math.pow(2,Math.floor(Math.log(_e)/Math.LN2))}function setQuaternionFromProperEuler(_e,_,tt,nt,rt){const it=Math.cos,at=Math.sin,ot=it(tt/2),st=at(tt/2),lt=it((_+nt)/2),ct=at((_+nt)/2),ut=it((_-nt)/2),ft=at((_-nt)/2),pt=it((nt-_)/2),gt=at((nt-_)/2);switch(rt){case"XYX":_e.set(ot*ct,st*ut,st*ft,ot*lt);break;case"YZY":_e.set(st*ft,ot*ct,st*ut,ot*lt);break;case"ZXZ":_e.set(st*ut,st*ft,ot*ct,ot*lt);break;case"XZX":_e.set(ot*ct,st*gt,st*pt,ot*lt);break;case"YXY":_e.set(st*pt,ot*ct,st*gt,ot*lt);break;case"ZYZ":_e.set(st*gt,st*pt,ot*ct,ot*lt);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+rt)}}function denormalize(_e,_){switch(_.constructor){case Float32Array:return _e;case Uint32Array:return _e/4294967295;case Uint16Array:return _e/65535;case Uint8Array:return _e/255;case Int32Array:return Math.max(_e/2147483647,-1);case Int16Array:return Math.max(_e/32767,-1);case Int8Array:return Math.max(_e/127,-1);default:throw new Error("Invalid component type.")}}function normalize$5(_e,_){switch(_.constructor){case Float32Array:return _e;case Uint32Array:return Math.round(_e*4294967295);case Uint16Array:return Math.round(_e*65535);case Uint8Array:return Math.round(_e*255);case Int32Array:return Math.round(_e*2147483647);case Int16Array:return Math.round(_e*32767);case Int8Array:return Math.round(_e*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID:generateUUID$1,clamp:clamp$4,euclideanModulo,mapLinear,inverseLerp,lerp,damp:damp$1,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize:normalize$5,denormalize};class Vector2{constructor(_=0,tt=0){Vector2.prototype.isVector2=!0,this.x=_,this.y=tt}get width(){return this.x}set width(_){this.x=_}get height(){return this.y}set height(_){this.y=_}set(_,tt){return this.x=_,this.y=tt,this}setScalar(_){return this.x=_,this.y=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setComponent(_,tt){switch(_){case 0:this.x=tt;break;case 1:this.y=tt;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y)}copy(_){return this.x=_.x,this.y=_.y,this}add(_){return this.x+=_.x,this.y+=_.y,this}addScalar(_){return this.x+=_,this.y+=_,this}addVectors(_,tt){return this.x=_.x+tt.x,this.y=_.y+tt.y,this}addScaledVector(_,tt){return this.x+=_.x*tt,this.y+=_.y*tt,this}sub(_){return this.x-=_.x,this.y-=_.y,this}subScalar(_){return this.x-=_,this.y-=_,this}subVectors(_,tt){return this.x=_.x-tt.x,this.y=_.y-tt.y,this}multiply(_){return this.x*=_.x,this.y*=_.y,this}multiplyScalar(_){return this.x*=_,this.y*=_,this}divide(_){return this.x/=_.x,this.y/=_.y,this}divideScalar(_){return this.multiplyScalar(1/_)}applyMatrix3(_){const tt=this.x,nt=this.y,rt=_.elements;return this.x=rt[0]*tt+rt[3]*nt+rt[6],this.y=rt[1]*tt+rt[4]*nt+rt[7],this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this}clamp(_,tt){return this.x=Math.max(_.x,Math.min(tt.x,this.x)),this.y=Math.max(_.y,Math.min(tt.y,this.y)),this}clampScalar(_,tt){return this.x=Math.max(_,Math.min(tt,this.x)),this.y=Math.max(_,Math.min(tt,this.y)),this}clampLength(_,tt){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(tt,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(_){return this.x*_.x+this.y*_.y}cross(_){return this.x*_.y-this.y*_.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(_){const tt=Math.sqrt(this.lengthSq()*_.lengthSq());if(tt===0)return Math.PI/2;const nt=this.dot(_)/tt;return Math.acos(clamp$4(nt,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const tt=this.x-_.x,nt=this.y-_.y;return tt*tt+nt*nt}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,tt){return this.x+=(_.x-this.x)*tt,this.y+=(_.y-this.y)*tt,this}lerpVectors(_,tt,nt){return this.x=_.x+(tt.x-_.x)*nt,this.y=_.y+(tt.y-_.y)*nt,this}equals(_){return _.x===this.x&&_.y===this.y}fromArray(_,tt=0){return this.x=_[tt],this.y=_[tt+1],this}toArray(_=[],tt=0){return _[tt]=this.x,_[tt+1]=this.y,_}fromBufferAttribute(_,tt){return this.x=_.getX(tt),this.y=_.getY(tt),this}rotateAround(_,tt){const nt=Math.cos(tt),rt=Math.sin(tt),it=this.x-_.x,at=this.y-_.y;return this.x=it*nt-at*rt+_.x,this.y=it*rt+at*nt+_.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(_,tt,nt,rt,it,at,ot,st,lt){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],_!==void 0&&this.set(_,tt,nt,rt,it,at,ot,st,lt)}set(_,tt,nt,rt,it,at,ot,st,lt){const ct=this.elements;return ct[0]=_,ct[1]=rt,ct[2]=ot,ct[3]=tt,ct[4]=it,ct[5]=st,ct[6]=nt,ct[7]=at,ct[8]=lt,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(_){const tt=this.elements,nt=_.elements;return tt[0]=nt[0],tt[1]=nt[1],tt[2]=nt[2],tt[3]=nt[3],tt[4]=nt[4],tt[5]=nt[5],tt[6]=nt[6],tt[7]=nt[7],tt[8]=nt[8],this}extractBasis(_,tt,nt){return _.setFromMatrix3Column(this,0),tt.setFromMatrix3Column(this,1),nt.setFromMatrix3Column(this,2),this}setFromMatrix4(_){const tt=_.elements;return this.set(tt[0],tt[4],tt[8],tt[1],tt[5],tt[9],tt[2],tt[6],tt[10]),this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,tt){const nt=_.elements,rt=tt.elements,it=this.elements,at=nt[0],ot=nt[3],st=nt[6],lt=nt[1],ct=nt[4],ut=nt[7],ft=nt[2],pt=nt[5],gt=nt[8],xt=rt[0],yt=rt[3],mt=rt[6],At=rt[1],vt=rt[4],Et=rt[7],Ct=rt[2],Tt=rt[5],bt=rt[8];return it[0]=at*xt+ot*At+st*Ct,it[3]=at*yt+ot*vt+st*Tt,it[6]=at*mt+ot*Et+st*bt,it[1]=lt*xt+ct*At+ut*Ct,it[4]=lt*yt+ct*vt+ut*Tt,it[7]=lt*mt+ct*Et+ut*bt,it[2]=ft*xt+pt*At+gt*Ct,it[5]=ft*yt+pt*vt+gt*Tt,it[8]=ft*mt+pt*Et+gt*bt,this}multiplyScalar(_){const tt=this.elements;return tt[0]*=_,tt[3]*=_,tt[6]*=_,tt[1]*=_,tt[4]*=_,tt[7]*=_,tt[2]*=_,tt[5]*=_,tt[8]*=_,this}determinant(){const _=this.elements,tt=_[0],nt=_[1],rt=_[2],it=_[3],at=_[4],ot=_[5],st=_[6],lt=_[7],ct=_[8];return tt*at*ct-tt*ot*lt-nt*it*ct+nt*ot*st+rt*it*lt-rt*at*st}invert(){const _=this.elements,tt=_[0],nt=_[1],rt=_[2],it=_[3],at=_[4],ot=_[5],st=_[6],lt=_[7],ct=_[8],ut=ct*at-ot*lt,ft=ot*st-ct*it,pt=lt*it-at*st,gt=tt*ut+nt*ft+rt*pt;if(gt===0)return this.set(0,0,0,0,0,0,0,0,0);const xt=1/gt;return _[0]=ut*xt,_[1]=(rt*lt-ct*nt)*xt,_[2]=(ot*nt-rt*at)*xt,_[3]=ft*xt,_[4]=(ct*tt-rt*st)*xt,_[5]=(rt*it-ot*tt)*xt,_[6]=pt*xt,_[7]=(nt*st-lt*tt)*xt,_[8]=(at*tt-nt*it)*xt,this}transpose(){let _;const tt=this.elements;return _=tt[1],tt[1]=tt[3],tt[3]=_,_=tt[2],tt[2]=tt[6],tt[6]=_,_=tt[5],tt[5]=tt[7],tt[7]=_,this}getNormalMatrix(_){return this.setFromMatrix4(_).invert().transpose()}transposeIntoArray(_){const tt=this.elements;return _[0]=tt[0],_[1]=tt[3],_[2]=tt[6],_[3]=tt[1],_[4]=tt[4],_[5]=tt[7],_[6]=tt[2],_[7]=tt[5],_[8]=tt[8],this}setUvTransform(_,tt,nt,rt,it,at,ot){const st=Math.cos(it),lt=Math.sin(it);return this.set(nt*st,nt*lt,-nt*(st*at+lt*ot)+at+_,-rt*lt,rt*st,-rt*(-lt*at+st*ot)+ot+tt,0,0,1),this}scale(_,tt){return this.premultiply(_m3.makeScale(_,tt)),this}rotate(_){return this.premultiply(_m3.makeRotation(-_)),this}translate(_,tt){return this.premultiply(_m3.makeTranslation(_,tt)),this}makeTranslation(_,tt){return _.isVector2?this.set(1,0,_.x,0,1,_.y,0,0,1):this.set(1,0,_,0,1,tt,0,0,1),this}makeRotation(_){const tt=Math.cos(_),nt=Math.sin(_);return this.set(tt,-nt,0,nt,tt,0,0,0,1),this}makeScale(_,tt){return this.set(_,0,0,0,tt,0,0,0,1),this}equals(_){const tt=this.elements,nt=_.elements;for(let rt=0;rt<9;rt++)if(tt[rt]!==nt[rt])return!1;return!0}fromArray(_,tt=0){for(let nt=0;nt<9;nt++)this.elements[nt]=_[nt+tt];return this}toArray(_=[],tt=0){const nt=this.elements;return _[tt]=nt[0],_[tt+1]=nt[1],_[tt+2]=nt[2],_[tt+3]=nt[3],_[tt+4]=nt[4],_[tt+5]=nt[5],_[tt+6]=nt[6],_[tt+7]=nt[7],_[tt+8]=nt[8],_}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(_e){for(let _=_e.length-1;_>=0;--_)if(_e[_]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(_e,_){return new TYPED_ARRAYS[_e](_)}function createElementNS(_e){return document.createElementNS("http://www.w3.org/1999/xhtml",_e)}function createCanvasElement(){const _e=createElementNS("canvas");return _e.style.display="block",_e}const _cache={};function warnOnce(_e){_e in _cache||(_cache[_e]=!0,console.warn(_e))}function SRGBToLinear(_e){return _e<.04045?_e*.0773993808:Math.pow(_e*.9478672986+.0521327014,2.4)}function LinearToSRGB(_e){return _e<.0031308?_e*12.92:1.055*Math.pow(_e,.41666)-.055}const LINEAR_SRGB_TO_LINEAR_DISPLAY_P3=new Matrix3().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),LINEAR_DISPLAY_P3_TO_LINEAR_SRGB=new Matrix3().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function DisplayP3ToLinearSRGB(_e){return _e.convertSRGBToLinear().applyMatrix3(LINEAR_DISPLAY_P3_TO_LINEAR_SRGB)}function LinearSRGBToDisplayP3(_e){return _e.applyMatrix3(LINEAR_SRGB_TO_LINEAR_DISPLAY_P3).convertLinearToSRGB()}const TO_LINEAR={[LinearSRGBColorSpace]:_e=>_e,[SRGBColorSpace]:_e=>_e.convertSRGBToLinear(),[DisplayP3ColorSpace]:DisplayP3ToLinearSRGB},FROM_LINEAR={[LinearSRGBColorSpace]:_e=>_e,[SRGBColorSpace]:_e=>_e.convertLinearToSRGB(),[DisplayP3ColorSpace]:LinearSRGBToDisplayP3},ColorManagement={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(_e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!_e},get workingColorSpace(){return LinearSRGBColorSpace},set workingColorSpace(_e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(_e,_,tt){if(this.enabled===!1||_===tt||!_||!tt)return _e;const nt=TO_LINEAR[_],rt=FROM_LINEAR[tt];if(nt===void 0||rt===void 0)throw new Error(`Unsupported color space conversion, "${_}" to "${tt}".`);return rt(nt(_e))},fromWorkingColorSpace:function(_e,_){return this.convert(_e,this.workingColorSpace,_)},toWorkingColorSpace:function(_e,_){return this.convert(_e,_,this.workingColorSpace)}};let _canvas;class ImageUtils{static getDataURL(_){if(/^data:/i.test(_.src)||typeof HTMLCanvasElement>"u")return _.src;let tt;if(_ instanceof HTMLCanvasElement)tt=_;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=_.width,_canvas.height=_.height;const nt=_canvas.getContext("2d");_ instanceof ImageData?nt.putImageData(_,0,0):nt.drawImage(_,0,0,_.width,_.height),tt=_canvas}return tt.width>2048||tt.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",_),tt.toDataURL("image/jpeg",.6)):tt.toDataURL("image/png")}static sRGBToLinear(_){if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap){const tt=createElementNS("canvas");tt.width=_.width,tt.height=_.height;const nt=tt.getContext("2d");nt.drawImage(_,0,0,_.width,_.height);const rt=nt.getImageData(0,0,_.width,_.height),it=rt.data;for(let at=0;at<it.length;at++)it[at]=SRGBToLinear(it[at]/255)*255;return nt.putImageData(rt,0,0),tt}else if(_.data){const tt=_.data.slice(0);for(let nt=0;nt<tt.length;nt++)tt instanceof Uint8Array||tt instanceof Uint8ClampedArray?tt[nt]=Math.floor(SRGBToLinear(tt[nt]/255)*255):tt[nt]=SRGBToLinear(tt[nt]);return{data:tt,width:_.width,height:_.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),_}}let sourceId=0;class Source{constructor(_=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sourceId++}),this.uuid=generateUUID$1(),this.data=_,this.version=0}set needsUpdate(_){_===!0&&this.version++}toJSON(_){const tt=_===void 0||typeof _=="string";if(!tt&&_.images[this.uuid]!==void 0)return _.images[this.uuid];const nt={uuid:this.uuid,url:""},rt=this.data;if(rt!==null){let it;if(Array.isArray(rt)){it=[];for(let at=0,ot=rt.length;at<ot;at++)rt[at].isDataTexture?it.push(serializeImage(rt[at].image)):it.push(serializeImage(rt[at]))}else it=serializeImage(rt);nt.url=it}return tt||(_.images[this.uuid]=nt),nt}}function serializeImage(_e){return typeof HTMLImageElement<"u"&&_e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_e instanceof ImageBitmap?ImageUtils.getDataURL(_e):_e.data?{data:Array.from(_e.data),width:_e.width,height:_e.height,type:_e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher{constructor(_=Texture.DEFAULT_IMAGE,tt=Texture.DEFAULT_MAPPING,nt=ClampToEdgeWrapping,rt=ClampToEdgeWrapping,it=LinearFilter,at=LinearMipmapLinearFilter,ot=RGBAFormat,st=UnsignedByteType,lt=Texture.DEFAULT_ANISOTROPY,ct=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(_),this.mipmaps=[],this.mapping=tt,this.channel=0,this.wrapS=nt,this.wrapT=rt,this.magFilter=it,this.minFilter=at,this.anisotropy=lt,this.format=ot,this.internalFormat=null,this.type=st,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof ct=="string"?this.colorSpace=ct:(warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=ct===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(_=null){this.source.data=_}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(_){return this.name=_.name,this.source=_.source,this.mipmaps=_.mipmaps.slice(0),this.mapping=_.mapping,this.channel=_.channel,this.wrapS=_.wrapS,this.wrapT=_.wrapT,this.magFilter=_.magFilter,this.minFilter=_.minFilter,this.anisotropy=_.anisotropy,this.format=_.format,this.internalFormat=_.internalFormat,this.type=_.type,this.offset.copy(_.offset),this.repeat.copy(_.repeat),this.center.copy(_.center),this.rotation=_.rotation,this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrix.copy(_.matrix),this.generateMipmaps=_.generateMipmaps,this.premultiplyAlpha=_.premultiplyAlpha,this.flipY=_.flipY,this.unpackAlignment=_.unpackAlignment,this.colorSpace=_.colorSpace,this.userData=JSON.parse(JSON.stringify(_.userData)),this.needsUpdate=!0,this}toJSON(_){const tt=_===void 0||typeof _=="string";if(!tt&&_.textures[this.uuid]!==void 0)return _.textures[this.uuid];const nt={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(_).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(nt.userData=this.userData),tt||(_.textures[this.uuid]=nt),nt}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(_){if(this.mapping!==UVMapping)return _;if(_.applyMatrix3(this.matrix),_.x<0||_.x>1)switch(this.wrapS){case RepeatWrapping:_.x=_.x-Math.floor(_.x);break;case ClampToEdgeWrapping:_.x=_.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.x)%2)===1?_.x=Math.ceil(_.x)-_.x:_.x=_.x-Math.floor(_.x);break}if(_.y<0||_.y>1)switch(this.wrapT){case RepeatWrapping:_.y=_.y-Math.floor(_.y);break;case ClampToEdgeWrapping:_.y=_.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(_.y)%2)===1?_.y=Math.ceil(_.y)-_.y:_.y=_.y-Math.floor(_.y);break}return this.flipY&&(_.y=1-_.y),_}set needsUpdate(_){_===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set encoding(_){warnOnce("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=_===sRGBEncoding?SRGBColorSpace:NoColorSpace}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(_=0,tt=0,nt=0,rt=1){Vector4.prototype.isVector4=!0,this.x=_,this.y=tt,this.z=nt,this.w=rt}get width(){return this.z}set width(_){this.z=_}get height(){return this.w}set height(_){this.w=_}set(_,tt,nt,rt){return this.x=_,this.y=tt,this.z=nt,this.w=rt,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this.w=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setW(_){return this.w=_,this}setComponent(_,tt){switch(_){case 0:this.x=tt;break;case 1:this.y=tt;break;case 2:this.z=tt;break;case 3:this.w=tt;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this.w=_.w!==void 0?_.w:1,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this.w+=_.w,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this.w+=_,this}addVectors(_,tt){return this.x=_.x+tt.x,this.y=_.y+tt.y,this.z=_.z+tt.z,this.w=_.w+tt.w,this}addScaledVector(_,tt){return this.x+=_.x*tt,this.y+=_.y*tt,this.z+=_.z*tt,this.w+=_.w*tt,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this.w-=_.w,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this.w-=_,this}subVectors(_,tt){return this.x=_.x-tt.x,this.y=_.y-tt.y,this.z=_.z-tt.z,this.w=_.w-tt.w,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this.w*=_.w,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this.w*=_,this}applyMatrix4(_){const tt=this.x,nt=this.y,rt=this.z,it=this.w,at=_.elements;return this.x=at[0]*tt+at[4]*nt+at[8]*rt+at[12]*it,this.y=at[1]*tt+at[5]*nt+at[9]*rt+at[13]*it,this.z=at[2]*tt+at[6]*nt+at[10]*rt+at[14]*it,this.w=at[3]*tt+at[7]*nt+at[11]*rt+at[15]*it,this}divideScalar(_){return this.multiplyScalar(1/_)}setAxisAngleFromQuaternion(_){this.w=2*Math.acos(_.w);const tt=Math.sqrt(1-_.w*_.w);return tt<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=_.x/tt,this.y=_.y/tt,this.z=_.z/tt),this}setAxisAngleFromRotationMatrix(_){let tt,nt,rt,it;const st=_.elements,lt=st[0],ct=st[4],ut=st[8],ft=st[1],pt=st[5],gt=st[9],xt=st[2],yt=st[6],mt=st[10];if(Math.abs(ct-ft)<.01&&Math.abs(ut-xt)<.01&&Math.abs(gt-yt)<.01){if(Math.abs(ct+ft)<.1&&Math.abs(ut+xt)<.1&&Math.abs(gt+yt)<.1&&Math.abs(lt+pt+mt-3)<.1)return this.set(1,0,0,0),this;tt=Math.PI;const vt=(lt+1)/2,Et=(pt+1)/2,Ct=(mt+1)/2,Tt=(ct+ft)/4,bt=(ut+xt)/4,It=(gt+yt)/4;return vt>Et&&vt>Ct?vt<.01?(nt=0,rt=.707106781,it=.707106781):(nt=Math.sqrt(vt),rt=Tt/nt,it=bt/nt):Et>Ct?Et<.01?(nt=.707106781,rt=0,it=.707106781):(rt=Math.sqrt(Et),nt=Tt/rt,it=It/rt):Ct<.01?(nt=.707106781,rt=.707106781,it=0):(it=Math.sqrt(Ct),nt=bt/it,rt=It/it),this.set(nt,rt,it,tt),this}let At=Math.sqrt((yt-gt)*(yt-gt)+(ut-xt)*(ut-xt)+(ft-ct)*(ft-ct));return Math.abs(At)<.001&&(At=1),this.x=(yt-gt)/At,this.y=(ut-xt)/At,this.z=(ft-ct)/At,this.w=Math.acos((lt+pt+mt-1)/2),this}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this.w=Math.min(this.w,_.w),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this.w=Math.max(this.w,_.w),this}clamp(_,tt){return this.x=Math.max(_.x,Math.min(tt.x,this.x)),this.y=Math.max(_.y,Math.min(tt.y,this.y)),this.z=Math.max(_.z,Math.min(tt.z,this.z)),this.w=Math.max(_.w,Math.min(tt.w,this.w)),this}clampScalar(_,tt){return this.x=Math.max(_,Math.min(tt,this.x)),this.y=Math.max(_,Math.min(tt,this.y)),this.z=Math.max(_,Math.min(tt,this.z)),this.w=Math.max(_,Math.min(tt,this.w)),this}clampLength(_,tt){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(tt,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z+this.w*_.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,tt){return this.x+=(_.x-this.x)*tt,this.y+=(_.y-this.y)*tt,this.z+=(_.z-this.z)*tt,this.w+=(_.w-this.w)*tt,this}lerpVectors(_,tt,nt){return this.x=_.x+(tt.x-_.x)*nt,this.y=_.y+(tt.y-_.y)*nt,this.z=_.z+(tt.z-_.z)*nt,this.w=_.w+(tt.w-_.w)*nt,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z&&_.w===this.w}fromArray(_,tt=0){return this.x=_[tt],this.y=_[tt+1],this.z=_[tt+2],this.w=_[tt+3],this}toArray(_=[],tt=0){return _[tt]=this.x,_[tt+1]=this.y,_[tt+2]=this.z,_[tt+3]=this.w,_}fromBufferAttribute(_,tt){return this.x=_.getX(tt),this.y=_.getY(tt),this.z=_.getZ(tt),this.w=_.getW(tt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(_=1,tt=1,nt={}){super(),this.isRenderTarget=!0,this.width=_,this.height=tt,this.depth=1,this.scissor=new Vector4(0,0,_,tt),this.scissorTest=!1,this.viewport=new Vector4(0,0,_,tt);const rt={width:_,height:tt,depth:1};nt.encoding!==void 0&&(warnOnce("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),nt.colorSpace=nt.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new Texture(rt,nt.mapping,nt.wrapS,nt.wrapT,nt.magFilter,nt.minFilter,nt.format,nt.type,nt.anisotropy,nt.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=nt.generateMipmaps!==void 0?nt.generateMipmaps:!1,this.texture.internalFormat=nt.internalFormat!==void 0?nt.internalFormat:null,this.texture.minFilter=nt.minFilter!==void 0?nt.minFilter:LinearFilter,this.depthBuffer=nt.depthBuffer!==void 0?nt.depthBuffer:!0,this.stencilBuffer=nt.stencilBuffer!==void 0?nt.stencilBuffer:!1,this.depthTexture=nt.depthTexture!==void 0?nt.depthTexture:null,this.samples=nt.samples!==void 0?nt.samples:0}setSize(_,tt,nt=1){(this.width!==_||this.height!==tt||this.depth!==nt)&&(this.width=_,this.height=tt,this.depth=nt,this.texture.image.width=_,this.texture.image.height=tt,this.texture.image.depth=nt,this.dispose()),this.viewport.set(0,0,_,tt),this.scissor.set(0,0,_,tt)}clone(){return new this.constructor().copy(this)}copy(_){this.width=_.width,this.height=_.height,this.depth=_.depth,this.scissor.copy(_.scissor),this.scissorTest=_.scissorTest,this.viewport.copy(_.viewport),this.texture=_.texture.clone(),this.texture.isRenderTargetTexture=!0;const tt=Object.assign({},_.texture.image);return this.texture.source=new Source(tt),this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.samples=_.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(_=1,tt=1,nt={}){super(_,tt,nt),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(_=null,tt=1,nt=1,rt=1){super(null),this.isDataArrayTexture=!0,this.image={data:_,width:tt,height:nt,depth:rt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(_=1,tt=1,nt=1){super(_,tt),this.isWebGLArrayRenderTarget=!0,this.depth=nt,this.texture=new DataArrayTexture(null,_,tt,nt),this.texture.isRenderTargetTexture=!0}}let Data3DTexture$1=class extends Texture{constructor(_=null,tt=1,nt=1,rt=1){super(null),this.isData3DTexture=!0,this.image={data:_,width:tt,height:nt,depth:rt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(_=1,tt=1,nt=1){super(_,tt),this.isWebGL3DRenderTarget=!0,this.depth=nt,this.texture=new Data3DTexture$1(null,_,tt,nt),this.texture.isRenderTargetTexture=!0}}class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(_=1,tt=1,nt=1,rt={}){super(_,tt,rt),this.isWebGLMultipleRenderTargets=!0;const it=this.texture;this.texture=[];for(let at=0;at<nt;at++)this.texture[at]=it.clone(),this.texture[at].isRenderTargetTexture=!0}setSize(_,tt,nt=1){if(this.width!==_||this.height!==tt||this.depth!==nt){this.width=_,this.height=tt,this.depth=nt;for(let rt=0,it=this.texture.length;rt<it;rt++)this.texture[rt].image.width=_,this.texture[rt].image.height=tt,this.texture[rt].image.depth=nt;this.dispose()}this.viewport.set(0,0,_,tt),this.scissor.set(0,0,_,tt)}copy(_){this.dispose(),this.width=_.width,this.height=_.height,this.depth=_.depth,this.scissor.copy(_.scissor),this.scissorTest=_.scissorTest,this.viewport.copy(_.viewport),this.depthBuffer=_.depthBuffer,this.stencilBuffer=_.stencilBuffer,_.depthTexture!==null&&(this.depthTexture=_.depthTexture.clone()),this.texture.length=0;for(let tt=0,nt=_.texture.length;tt<nt;tt++)this.texture[tt]=_.texture[tt].clone(),this.texture[tt].isRenderTargetTexture=!0;return this}}class Quaternion{constructor(_=0,tt=0,nt=0,rt=1){this.isQuaternion=!0,this._x=_,this._y=tt,this._z=nt,this._w=rt}static slerpFlat(_,tt,nt,rt,it,at,ot){let st=nt[rt+0],lt=nt[rt+1],ct=nt[rt+2],ut=nt[rt+3];const ft=it[at+0],pt=it[at+1],gt=it[at+2],xt=it[at+3];if(ot===0){_[tt+0]=st,_[tt+1]=lt,_[tt+2]=ct,_[tt+3]=ut;return}if(ot===1){_[tt+0]=ft,_[tt+1]=pt,_[tt+2]=gt,_[tt+3]=xt;return}if(ut!==xt||st!==ft||lt!==pt||ct!==gt){let yt=1-ot;const mt=st*ft+lt*pt+ct*gt+ut*xt,At=mt>=0?1:-1,vt=1-mt*mt;if(vt>Number.EPSILON){const Ct=Math.sqrt(vt),Tt=Math.atan2(Ct,mt*At);yt=Math.sin(yt*Tt)/Ct,ot=Math.sin(ot*Tt)/Ct}const Et=ot*At;if(st=st*yt+ft*Et,lt=lt*yt+pt*Et,ct=ct*yt+gt*Et,ut=ut*yt+xt*Et,yt===1-ot){const Ct=1/Math.sqrt(st*st+lt*lt+ct*ct+ut*ut);st*=Ct,lt*=Ct,ct*=Ct,ut*=Ct}}_[tt]=st,_[tt+1]=lt,_[tt+2]=ct,_[tt+3]=ut}static multiplyQuaternionsFlat(_,tt,nt,rt,it,at){const ot=nt[rt],st=nt[rt+1],lt=nt[rt+2],ct=nt[rt+3],ut=it[at],ft=it[at+1],pt=it[at+2],gt=it[at+3];return _[tt]=ot*gt+ct*ut+st*pt-lt*ft,_[tt+1]=st*gt+ct*ft+lt*ut-ot*pt,_[tt+2]=lt*gt+ct*pt+ot*ft-st*ut,_[tt+3]=ct*gt-ot*ut-st*ft-lt*pt,_}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get w(){return this._w}set w(_){this._w=_,this._onChangeCallback()}set(_,tt,nt,rt){return this._x=_,this._y=tt,this._z=nt,this._w=rt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(_){return this._x=_.x,this._y=_.y,this._z=_.z,this._w=_.w,this._onChangeCallback(),this}setFromEuler(_,tt){const nt=_._x,rt=_._y,it=_._z,at=_._order,ot=Math.cos,st=Math.sin,lt=ot(nt/2),ct=ot(rt/2),ut=ot(it/2),ft=st(nt/2),pt=st(rt/2),gt=st(it/2);switch(at){case"XYZ":this._x=ft*ct*ut+lt*pt*gt,this._y=lt*pt*ut-ft*ct*gt,this._z=lt*ct*gt+ft*pt*ut,this._w=lt*ct*ut-ft*pt*gt;break;case"YXZ":this._x=ft*ct*ut+lt*pt*gt,this._y=lt*pt*ut-ft*ct*gt,this._z=lt*ct*gt-ft*pt*ut,this._w=lt*ct*ut+ft*pt*gt;break;case"ZXY":this._x=ft*ct*ut-lt*pt*gt,this._y=lt*pt*ut+ft*ct*gt,this._z=lt*ct*gt+ft*pt*ut,this._w=lt*ct*ut-ft*pt*gt;break;case"ZYX":this._x=ft*ct*ut-lt*pt*gt,this._y=lt*pt*ut+ft*ct*gt,this._z=lt*ct*gt-ft*pt*ut,this._w=lt*ct*ut+ft*pt*gt;break;case"YZX":this._x=ft*ct*ut+lt*pt*gt,this._y=lt*pt*ut+ft*ct*gt,this._z=lt*ct*gt-ft*pt*ut,this._w=lt*ct*ut-ft*pt*gt;break;case"XZY":this._x=ft*ct*ut-lt*pt*gt,this._y=lt*pt*ut-ft*ct*gt,this._z=lt*ct*gt+ft*pt*ut,this._w=lt*ct*ut+ft*pt*gt;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+at)}return tt!==!1&&this._onChangeCallback(),this}setFromAxisAngle(_,tt){const nt=tt/2,rt=Math.sin(nt);return this._x=_.x*rt,this._y=_.y*rt,this._z=_.z*rt,this._w=Math.cos(nt),this._onChangeCallback(),this}setFromRotationMatrix(_){const tt=_.elements,nt=tt[0],rt=tt[4],it=tt[8],at=tt[1],ot=tt[5],st=tt[9],lt=tt[2],ct=tt[6],ut=tt[10],ft=nt+ot+ut;if(ft>0){const pt=.5/Math.sqrt(ft+1);this._w=.25/pt,this._x=(ct-st)*pt,this._y=(it-lt)*pt,this._z=(at-rt)*pt}else if(nt>ot&&nt>ut){const pt=2*Math.sqrt(1+nt-ot-ut);this._w=(ct-st)/pt,this._x=.25*pt,this._y=(rt+at)/pt,this._z=(it+lt)/pt}else if(ot>ut){const pt=2*Math.sqrt(1+ot-nt-ut);this._w=(it-lt)/pt,this._x=(rt+at)/pt,this._y=.25*pt,this._z=(st+ct)/pt}else{const pt=2*Math.sqrt(1+ut-nt-ot);this._w=(at-rt)/pt,this._x=(it+lt)/pt,this._y=(st+ct)/pt,this._z=.25*pt}return this._onChangeCallback(),this}setFromUnitVectors(_,tt){let nt=_.dot(tt)+1;return nt<Number.EPSILON?(nt=0,Math.abs(_.x)>Math.abs(_.z)?(this._x=-_.y,this._y=_.x,this._z=0,this._w=nt):(this._x=0,this._y=-_.z,this._z=_.y,this._w=nt)):(this._x=_.y*tt.z-_.z*tt.y,this._y=_.z*tt.x-_.x*tt.z,this._z=_.x*tt.y-_.y*tt.x,this._w=nt),this.normalize()}angleTo(_){return 2*Math.acos(Math.abs(clamp$4(this.dot(_),-1,1)))}rotateTowards(_,tt){const nt=this.angleTo(_);if(nt===0)return this;const rt=Math.min(1,tt/nt);return this.slerp(_,rt),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(_){return this._x*_._x+this._y*_._y+this._z*_._z+this._w*_._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let _=this.length();return _===0?(this._x=0,this._y=0,this._z=0,this._w=1):(_=1/_,this._x=this._x*_,this._y=this._y*_,this._z=this._z*_,this._w=this._w*_),this._onChangeCallback(),this}multiply(_){return this.multiplyQuaternions(this,_)}premultiply(_){return this.multiplyQuaternions(_,this)}multiplyQuaternions(_,tt){const nt=_._x,rt=_._y,it=_._z,at=_._w,ot=tt._x,st=tt._y,lt=tt._z,ct=tt._w;return this._x=nt*ct+at*ot+rt*lt-it*st,this._y=rt*ct+at*st+it*ot-nt*lt,this._z=it*ct+at*lt+nt*st-rt*ot,this._w=at*ct-nt*ot-rt*st-it*lt,this._onChangeCallback(),this}slerp(_,tt){if(tt===0)return this;if(tt===1)return this.copy(_);const nt=this._x,rt=this._y,it=this._z,at=this._w;let ot=at*_._w+nt*_._x+rt*_._y+it*_._z;if(ot<0?(this._w=-_._w,this._x=-_._x,this._y=-_._y,this._z=-_._z,ot=-ot):this.copy(_),ot>=1)return this._w=at,this._x=nt,this._y=rt,this._z=it,this;const st=1-ot*ot;if(st<=Number.EPSILON){const pt=1-tt;return this._w=pt*at+tt*this._w,this._x=pt*nt+tt*this._x,this._y=pt*rt+tt*this._y,this._z=pt*it+tt*this._z,this.normalize(),this._onChangeCallback(),this}const lt=Math.sqrt(st),ct=Math.atan2(lt,ot),ut=Math.sin((1-tt)*ct)/lt,ft=Math.sin(tt*ct)/lt;return this._w=at*ut+this._w*ft,this._x=nt*ut+this._x*ft,this._y=rt*ut+this._y*ft,this._z=it*ut+this._z*ft,this._onChangeCallback(),this}slerpQuaternions(_,tt,nt){return this.copy(_).slerp(tt,nt)}random(){const _=Math.random(),tt=Math.sqrt(1-_),nt=Math.sqrt(_),rt=2*Math.PI*Math.random(),it=2*Math.PI*Math.random();return this.set(tt*Math.cos(rt),nt*Math.sin(it),nt*Math.cos(it),tt*Math.sin(rt))}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._w===this._w}fromArray(_,tt=0){return this._x=_[tt],this._y=_[tt+1],this._z=_[tt+2],this._w=_[tt+3],this._onChangeCallback(),this}toArray(_=[],tt=0){return _[tt]=this._x,_[tt+1]=this._y,_[tt+2]=this._z,_[tt+3]=this._w,_}fromBufferAttribute(_,tt){return this._x=_.getX(tt),this._y=_.getY(tt),this._z=_.getZ(tt),this._w=_.getW(tt),this}toJSON(){return this.toArray()}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(_=0,tt=0,nt=0){Vector3.prototype.isVector3=!0,this.x=_,this.y=tt,this.z=nt}set(_,tt,nt){return nt===void 0&&(nt=this.z),this.x=_,this.y=tt,this.z=nt,this}setScalar(_){return this.x=_,this.y=_,this.z=_,this}setX(_){return this.x=_,this}setY(_){return this.y=_,this}setZ(_){return this.z=_,this}setComponent(_,tt){switch(_){case 0:this.x=tt;break;case 1:this.y=tt;break;case 2:this.z=tt;break;default:throw new Error("index is out of range: "+_)}return this}getComponent(_){switch(_){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+_)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(_){return this.x=_.x,this.y=_.y,this.z=_.z,this}add(_){return this.x+=_.x,this.y+=_.y,this.z+=_.z,this}addScalar(_){return this.x+=_,this.y+=_,this.z+=_,this}addVectors(_,tt){return this.x=_.x+tt.x,this.y=_.y+tt.y,this.z=_.z+tt.z,this}addScaledVector(_,tt){return this.x+=_.x*tt,this.y+=_.y*tt,this.z+=_.z*tt,this}sub(_){return this.x-=_.x,this.y-=_.y,this.z-=_.z,this}subScalar(_){return this.x-=_,this.y-=_,this.z-=_,this}subVectors(_,tt){return this.x=_.x-tt.x,this.y=_.y-tt.y,this.z=_.z-tt.z,this}multiply(_){return this.x*=_.x,this.y*=_.y,this.z*=_.z,this}multiplyScalar(_){return this.x*=_,this.y*=_,this.z*=_,this}multiplyVectors(_,tt){return this.x=_.x*tt.x,this.y=_.y*tt.y,this.z=_.z*tt.z,this}applyEuler(_){return this.applyQuaternion(_quaternion$4.setFromEuler(_))}applyAxisAngle(_,tt){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(_,tt))}applyMatrix3(_){const tt=this.x,nt=this.y,rt=this.z,it=_.elements;return this.x=it[0]*tt+it[3]*nt+it[6]*rt,this.y=it[1]*tt+it[4]*nt+it[7]*rt,this.z=it[2]*tt+it[5]*nt+it[8]*rt,this}applyNormalMatrix(_){return this.applyMatrix3(_).normalize()}applyMatrix4(_){const tt=this.x,nt=this.y,rt=this.z,it=_.elements,at=1/(it[3]*tt+it[7]*nt+it[11]*rt+it[15]);return this.x=(it[0]*tt+it[4]*nt+it[8]*rt+it[12])*at,this.y=(it[1]*tt+it[5]*nt+it[9]*rt+it[13])*at,this.z=(it[2]*tt+it[6]*nt+it[10]*rt+it[14])*at,this}applyQuaternion(_){const tt=this.x,nt=this.y,rt=this.z,it=_.x,at=_.y,ot=_.z,st=_.w,lt=st*tt+at*rt-ot*nt,ct=st*nt+ot*tt-it*rt,ut=st*rt+it*nt-at*tt,ft=-it*tt-at*nt-ot*rt;return this.x=lt*st+ft*-it+ct*-ot-ut*-at,this.y=ct*st+ft*-at+ut*-it-lt*-ot,this.z=ut*st+ft*-ot+lt*-at-ct*-it,this}project(_){return this.applyMatrix4(_.matrixWorldInverse).applyMatrix4(_.projectionMatrix)}unproject(_){return this.applyMatrix4(_.projectionMatrixInverse).applyMatrix4(_.matrixWorld)}transformDirection(_){const tt=this.x,nt=this.y,rt=this.z,it=_.elements;return this.x=it[0]*tt+it[4]*nt+it[8]*rt,this.y=it[1]*tt+it[5]*nt+it[9]*rt,this.z=it[2]*tt+it[6]*nt+it[10]*rt,this.normalize()}divide(_){return this.x/=_.x,this.y/=_.y,this.z/=_.z,this}divideScalar(_){return this.multiplyScalar(1/_)}min(_){return this.x=Math.min(this.x,_.x),this.y=Math.min(this.y,_.y),this.z=Math.min(this.z,_.z),this}max(_){return this.x=Math.max(this.x,_.x),this.y=Math.max(this.y,_.y),this.z=Math.max(this.z,_.z),this}clamp(_,tt){return this.x=Math.max(_.x,Math.min(tt.x,this.x)),this.y=Math.max(_.y,Math.min(tt.y,this.y)),this.z=Math.max(_.z,Math.min(tt.z,this.z)),this}clampScalar(_,tt){return this.x=Math.max(_,Math.min(tt,this.x)),this.y=Math.max(_,Math.min(tt,this.y)),this.z=Math.max(_,Math.min(tt,this.z)),this}clampLength(_,tt){const nt=this.length();return this.divideScalar(nt||1).multiplyScalar(Math.max(_,Math.min(tt,nt)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(_){return this.x*_.x+this.y*_.y+this.z*_.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(_){return this.normalize().multiplyScalar(_)}lerp(_,tt){return this.x+=(_.x-this.x)*tt,this.y+=(_.y-this.y)*tt,this.z+=(_.z-this.z)*tt,this}lerpVectors(_,tt,nt){return this.x=_.x+(tt.x-_.x)*nt,this.y=_.y+(tt.y-_.y)*nt,this.z=_.z+(tt.z-_.z)*nt,this}cross(_){return this.crossVectors(this,_)}crossVectors(_,tt){const nt=_.x,rt=_.y,it=_.z,at=tt.x,ot=tt.y,st=tt.z;return this.x=rt*st-it*ot,this.y=it*at-nt*st,this.z=nt*ot-rt*at,this}projectOnVector(_){const tt=_.lengthSq();if(tt===0)return this.set(0,0,0);const nt=_.dot(this)/tt;return this.copy(_).multiplyScalar(nt)}projectOnPlane(_){return _vector$b.copy(this).projectOnVector(_),this.sub(_vector$b)}reflect(_){return this.sub(_vector$b.copy(_).multiplyScalar(2*this.dot(_)))}angleTo(_){const tt=Math.sqrt(this.lengthSq()*_.lengthSq());if(tt===0)return Math.PI/2;const nt=this.dot(_)/tt;return Math.acos(clamp$4(nt,-1,1))}distanceTo(_){return Math.sqrt(this.distanceToSquared(_))}distanceToSquared(_){const tt=this.x-_.x,nt=this.y-_.y,rt=this.z-_.z;return tt*tt+nt*nt+rt*rt}manhattanDistanceTo(_){return Math.abs(this.x-_.x)+Math.abs(this.y-_.y)+Math.abs(this.z-_.z)}setFromSpherical(_){return this.setFromSphericalCoords(_.radius,_.phi,_.theta)}setFromSphericalCoords(_,tt,nt){const rt=Math.sin(tt)*_;return this.x=rt*Math.sin(nt),this.y=Math.cos(tt)*_,this.z=rt*Math.cos(nt),this}setFromCylindrical(_){return this.setFromCylindricalCoords(_.radius,_.theta,_.y)}setFromCylindricalCoords(_,tt,nt){return this.x=_*Math.sin(tt),this.y=nt,this.z=_*Math.cos(tt),this}setFromMatrixPosition(_){const tt=_.elements;return this.x=tt[12],this.y=tt[13],this.z=tt[14],this}setFromMatrixScale(_){const tt=this.setFromMatrixColumn(_,0).length(),nt=this.setFromMatrixColumn(_,1).length(),rt=this.setFromMatrixColumn(_,2).length();return this.x=tt,this.y=nt,this.z=rt,this}setFromMatrixColumn(_,tt){return this.fromArray(_.elements,tt*4)}setFromMatrix3Column(_,tt){return this.fromArray(_.elements,tt*3)}setFromEuler(_){return this.x=_._x,this.y=_._y,this.z=_._z,this}setFromColor(_){return this.x=_.r,this.y=_.g,this.z=_.b,this}equals(_){return _.x===this.x&&_.y===this.y&&_.z===this.z}fromArray(_,tt=0){return this.x=_[tt],this.y=_[tt+1],this.z=_[tt+2],this}toArray(_=[],tt=0){return _[tt]=this.x,_[tt+1]=this.y,_[tt+2]=this.z,_}fromBufferAttribute(_,tt){return this.x=_.getX(tt),this.y=_.getY(tt),this.z=_.getZ(tt),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const _=(Math.random()-.5)*2,tt=Math.random()*Math.PI*2,nt=Math.sqrt(1-_**2);return this.x=nt*Math.cos(tt),this.y=nt*Math.sin(tt),this.z=_,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$b=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(_=new Vector3(1/0,1/0,1/0),tt=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=_,this.max=tt}set(_,tt){return this.min.copy(_),this.max.copy(tt),this}setFromArray(_){this.makeEmpty();for(let tt=0,nt=_.length;tt<nt;tt+=3)this.expandByPoint(_vector$a.fromArray(_,tt));return this}setFromBufferAttribute(_){this.makeEmpty();for(let tt=0,nt=_.count;tt<nt;tt++)this.expandByPoint(_vector$a.fromBufferAttribute(_,tt));return this}setFromPoints(_){this.makeEmpty();for(let tt=0,nt=_.length;tt<nt;tt++)this.expandByPoint(_[tt]);return this}setFromCenterAndSize(_,tt){const nt=_vector$a.copy(tt).multiplyScalar(.5);return this.min.copy(_).sub(nt),this.max.copy(_).add(nt),this}setFromObject(_,tt=!1){return this.makeEmpty(),this.expandByObject(_,tt)}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(_){return this.isEmpty()?_.set(0,0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}expandByObject(_,tt=!1){if(_.updateWorldMatrix(!1,!1),_.boundingBox!==void 0)_.boundingBox===null&&_.computeBoundingBox(),_box$3.copy(_.boundingBox),_box$3.applyMatrix4(_.matrixWorld),this.union(_box$3);else{const rt=_.geometry;if(rt!==void 0)if(tt&&rt.attributes!==void 0&&rt.attributes.position!==void 0){const it=rt.attributes.position;for(let at=0,ot=it.count;at<ot;at++)_vector$a.fromBufferAttribute(it,at).applyMatrix4(_.matrixWorld),this.expandByPoint(_vector$a)}else rt.boundingBox===null&&rt.computeBoundingBox(),_box$3.copy(rt.boundingBox),_box$3.applyMatrix4(_.matrixWorld),this.union(_box$3)}const nt=_.children;for(let rt=0,it=nt.length;rt<it;rt++)this.expandByObject(nt[rt],tt);return this}containsPoint(_){return!(_.x<this.min.x||_.x>this.max.x||_.y<this.min.y||_.y>this.max.y||_.z<this.min.z||_.z>this.max.z)}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y&&this.min.z<=_.min.z&&_.max.z<=this.max.z}getParameter(_,tt){return tt.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y),(_.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(_){return!(_.max.x<this.min.x||_.min.x>this.max.x||_.max.y<this.min.y||_.min.y>this.max.y||_.max.z<this.min.z||_.min.z>this.max.z)}intersectsSphere(_){return this.clampPoint(_.center,_vector$a),_vector$a.distanceToSquared(_.center)<=_.radius*_.radius}intersectsPlane(_){let tt,nt;return _.normal.x>0?(tt=_.normal.x*this.min.x,nt=_.normal.x*this.max.x):(tt=_.normal.x*this.max.x,nt=_.normal.x*this.min.x),_.normal.y>0?(tt+=_.normal.y*this.min.y,nt+=_.normal.y*this.max.y):(tt+=_.normal.y*this.max.y,nt+=_.normal.y*this.min.y),_.normal.z>0?(tt+=_.normal.z*this.min.z,nt+=_.normal.z*this.max.z):(tt+=_.normal.z*this.max.z,nt+=_.normal.z*this.min.z),tt<=-_.constant&&nt>=-_.constant}intersectsTriangle(_){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(_.a,_center),_v1$7.subVectors(_.b,_center),_v2$4.subVectors(_.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let tt=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(tt,_v0$2,_v1$7,_v2$4,_extents)||(tt=[1,0,0,0,1,0,0,0,1],!satForAxes(tt,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),tt=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(tt,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(_,tt){return tt.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$a).distanceTo(_)}getBoundingSphere(_){return this.isEmpty()?_.makeEmpty():(this.getCenter(_.center),_.radius=this.getSize(_vector$a).length()*.5),_}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}applyMatrix4(_){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(_),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(_),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(_),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(_),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(_),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(_),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(_),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(_),this.setFromPoints(_points),this)}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$a=new Vector3,_box$3=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(_e,_,tt,nt,rt){for(let it=0,at=_e.length-3;it<=at;it+=3){_testAxis.fromArray(_e,it);const ot=rt.x*Math.abs(_testAxis.x)+rt.y*Math.abs(_testAxis.y)+rt.z*Math.abs(_testAxis.z),st=_.dot(_testAxis),lt=tt.dot(_testAxis),ct=nt.dot(_testAxis);if(Math.max(-Math.max(st,lt,ct),Math.min(st,lt,ct))>ot)return!1}return!0}const _box$2=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(_=new Vector3,tt=-1){this.center=_,this.radius=tt}set(_,tt){return this.center.copy(_),this.radius=tt,this}setFromPoints(_,tt){const nt=this.center;tt!==void 0?nt.copy(tt):_box$2.setFromPoints(_).getCenter(nt);let rt=0;for(let it=0,at=_.length;it<at;it++)rt=Math.max(rt,nt.distanceToSquared(_[it]));return this.radius=Math.sqrt(rt),this}copy(_){return this.center.copy(_.center),this.radius=_.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(_){return _.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(_){return _.distanceTo(this.center)-this.radius}intersectsSphere(_){const tt=this.radius+_.radius;return _.center.distanceToSquared(this.center)<=tt*tt}intersectsBox(_){return _.intersectsSphere(this)}intersectsPlane(_){return Math.abs(_.distanceToPoint(this.center))<=this.radius}clampPoint(_,tt){const nt=this.center.distanceToSquared(_);return tt.copy(_),nt>this.radius*this.radius&&(tt.sub(this.center).normalize(),tt.multiplyScalar(this.radius).add(this.center)),tt}getBoundingBox(_){return this.isEmpty()?(_.makeEmpty(),_):(_.set(this.center,this.center),_.expandByScalar(this.radius),_)}applyMatrix4(_){return this.center.applyMatrix4(_),this.radius=this.radius*_.getMaxScaleOnAxis(),this}translate(_){return this.center.add(_),this}expandByPoint(_){if(this.isEmpty())return this.center.copy(_),this.radius=0,this;_v1$6.subVectors(_,this.center);const tt=_v1$6.lengthSq();if(tt>this.radius*this.radius){const nt=Math.sqrt(tt),rt=(nt-this.radius)*.5;this.center.addScaledVector(_v1$6,rt/nt),this.radius+=rt}return this}union(_){return _.isEmpty()?this:this.isEmpty()?(this.copy(_),this):(this.center.equals(_.center)===!0?this.radius=Math.max(this.radius,_.radius):(_v2$3.subVectors(_.center,this.center).setLength(_.radius),this.expandByPoint(_v1$6.copy(_.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(_.center).sub(_v2$3))),this)}equals(_){return _.center.equals(this.center)&&_.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$9=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(_=new Vector3,tt=new Vector3(0,0,-1)){this.origin=_,this.direction=tt}set(_,tt){return this.origin.copy(_),this.direction.copy(tt),this}copy(_){return this.origin.copy(_.origin),this.direction.copy(_.direction),this}at(_,tt){return tt.copy(this.origin).addScaledVector(this.direction,_)}lookAt(_){return this.direction.copy(_).sub(this.origin).normalize(),this}recast(_){return this.origin.copy(this.at(_,_vector$9)),this}closestPointToPoint(_,tt){tt.subVectors(_,this.origin);const nt=tt.dot(this.direction);return nt<0?tt.copy(this.origin):tt.copy(this.origin).addScaledVector(this.direction,nt)}distanceToPoint(_){return Math.sqrt(this.distanceSqToPoint(_))}distanceSqToPoint(_){const tt=_vector$9.subVectors(_,this.origin).dot(this.direction);return tt<0?this.origin.distanceToSquared(_):(_vector$9.copy(this.origin).addScaledVector(this.direction,tt),_vector$9.distanceToSquared(_))}distanceSqToSegment(_,tt,nt,rt){_segCenter.copy(_).add(tt).multiplyScalar(.5),_segDir.copy(tt).sub(_).normalize(),_diff.copy(this.origin).sub(_segCenter);const it=_.distanceTo(tt)*.5,at=-this.direction.dot(_segDir),ot=_diff.dot(this.direction),st=-_diff.dot(_segDir),lt=_diff.lengthSq(),ct=Math.abs(1-at*at);let ut,ft,pt,gt;if(ct>0)if(ut=at*st-ot,ft=at*ot-st,gt=it*ct,ut>=0)if(ft>=-gt)if(ft<=gt){const xt=1/ct;ut*=xt,ft*=xt,pt=ut*(ut+at*ft+2*ot)+ft*(at*ut+ft+2*st)+lt}else ft=it,ut=Math.max(0,-(at*ft+ot)),pt=-ut*ut+ft*(ft+2*st)+lt;else ft=-it,ut=Math.max(0,-(at*ft+ot)),pt=-ut*ut+ft*(ft+2*st)+lt;else ft<=-gt?(ut=Math.max(0,-(-at*it+ot)),ft=ut>0?-it:Math.min(Math.max(-it,-st),it),pt=-ut*ut+ft*(ft+2*st)+lt):ft<=gt?(ut=0,ft=Math.min(Math.max(-it,-st),it),pt=ft*(ft+2*st)+lt):(ut=Math.max(0,-(at*it+ot)),ft=ut>0?it:Math.min(Math.max(-it,-st),it),pt=-ut*ut+ft*(ft+2*st)+lt);else ft=at>0?-it:it,ut=Math.max(0,-(at*ft+ot)),pt=-ut*ut+ft*(ft+2*st)+lt;return nt&&nt.copy(this.origin).addScaledVector(this.direction,ut),rt&&rt.copy(_segCenter).addScaledVector(_segDir,ft),pt}intersectSphere(_,tt){_vector$9.subVectors(_.center,this.origin);const nt=_vector$9.dot(this.direction),rt=_vector$9.dot(_vector$9)-nt*nt,it=_.radius*_.radius;if(rt>it)return null;const at=Math.sqrt(it-rt),ot=nt-at,st=nt+at;return st<0?null:ot<0?this.at(st,tt):this.at(ot,tt)}intersectsSphere(_){return this.distanceSqToPoint(_.center)<=_.radius*_.radius}distanceToPlane(_){const tt=_.normal.dot(this.direction);if(tt===0)return _.distanceToPoint(this.origin)===0?0:null;const nt=-(this.origin.dot(_.normal)+_.constant)/tt;return nt>=0?nt:null}intersectPlane(_,tt){const nt=this.distanceToPlane(_);return nt===null?null:this.at(nt,tt)}intersectsPlane(_){const tt=_.distanceToPoint(this.origin);return tt===0||_.normal.dot(this.direction)*tt<0}intersectBox(_,tt){let nt,rt,it,at,ot,st;const lt=1/this.direction.x,ct=1/this.direction.y,ut=1/this.direction.z,ft=this.origin;return lt>=0?(nt=(_.min.x-ft.x)*lt,rt=(_.max.x-ft.x)*lt):(nt=(_.max.x-ft.x)*lt,rt=(_.min.x-ft.x)*lt),ct>=0?(it=(_.min.y-ft.y)*ct,at=(_.max.y-ft.y)*ct):(it=(_.max.y-ft.y)*ct,at=(_.min.y-ft.y)*ct),nt>at||it>rt||((it>nt||isNaN(nt))&&(nt=it),(at<rt||isNaN(rt))&&(rt=at),ut>=0?(ot=(_.min.z-ft.z)*ut,st=(_.max.z-ft.z)*ut):(ot=(_.max.z-ft.z)*ut,st=(_.min.z-ft.z)*ut),nt>st||ot>rt)||((ot>nt||nt!==nt)&&(nt=ot),(st<rt||rt!==rt)&&(rt=st),rt<0)?null:this.at(nt>=0?nt:rt,tt)}intersectsBox(_){return this.intersectBox(_,_vector$9)!==null}intersectTriangle(_,tt,nt,rt,it){_edge1.subVectors(tt,_),_edge2.subVectors(nt,_),_normal$1.crossVectors(_edge1,_edge2);let at=this.direction.dot(_normal$1),ot;if(at>0){if(rt)return null;ot=1}else if(at<0)ot=-1,at=-at;else return null;_diff.subVectors(this.origin,_);const st=ot*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(st<0)return null;const lt=ot*this.direction.dot(_edge1.cross(_diff));if(lt<0||st+lt>at)return null;const ct=-ot*_diff.dot(_normal$1);return ct<0?null:this.at(ct/at,it)}applyMatrix4(_){return this.origin.applyMatrix4(_),this.direction.transformDirection(_),this}equals(_){return _.origin.equals(this.origin)&&_.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(_,tt,nt,rt,it,at,ot,st,lt,ct,ut,ft,pt,gt,xt,yt){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],_!==void 0&&this.set(_,tt,nt,rt,it,at,ot,st,lt,ct,ut,ft,pt,gt,xt,yt)}set(_,tt,nt,rt,it,at,ot,st,lt,ct,ut,ft,pt,gt,xt,yt){const mt=this.elements;return mt[0]=_,mt[4]=tt,mt[8]=nt,mt[12]=rt,mt[1]=it,mt[5]=at,mt[9]=ot,mt[13]=st,mt[2]=lt,mt[6]=ct,mt[10]=ut,mt[14]=ft,mt[3]=pt,mt[7]=gt,mt[11]=xt,mt[15]=yt,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(_){const tt=this.elements,nt=_.elements;return tt[0]=nt[0],tt[1]=nt[1],tt[2]=nt[2],tt[3]=nt[3],tt[4]=nt[4],tt[5]=nt[5],tt[6]=nt[6],tt[7]=nt[7],tt[8]=nt[8],tt[9]=nt[9],tt[10]=nt[10],tt[11]=nt[11],tt[12]=nt[12],tt[13]=nt[13],tt[14]=nt[14],tt[15]=nt[15],this}copyPosition(_){const tt=this.elements,nt=_.elements;return tt[12]=nt[12],tt[13]=nt[13],tt[14]=nt[14],this}setFromMatrix3(_){const tt=_.elements;return this.set(tt[0],tt[3],tt[6],0,tt[1],tt[4],tt[7],0,tt[2],tt[5],tt[8],0,0,0,0,1),this}extractBasis(_,tt,nt){return _.setFromMatrixColumn(this,0),tt.setFromMatrixColumn(this,1),nt.setFromMatrixColumn(this,2),this}makeBasis(_,tt,nt){return this.set(_.x,tt.x,nt.x,0,_.y,tt.y,nt.y,0,_.z,tt.z,nt.z,0,0,0,0,1),this}extractRotation(_){const tt=this.elements,nt=_.elements,rt=1/_v1$5.setFromMatrixColumn(_,0).length(),it=1/_v1$5.setFromMatrixColumn(_,1).length(),at=1/_v1$5.setFromMatrixColumn(_,2).length();return tt[0]=nt[0]*rt,tt[1]=nt[1]*rt,tt[2]=nt[2]*rt,tt[3]=0,tt[4]=nt[4]*it,tt[5]=nt[5]*it,tt[6]=nt[6]*it,tt[7]=0,tt[8]=nt[8]*at,tt[9]=nt[9]*at,tt[10]=nt[10]*at,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,this}makeRotationFromEuler(_){const tt=this.elements,nt=_.x,rt=_.y,it=_.z,at=Math.cos(nt),ot=Math.sin(nt),st=Math.cos(rt),lt=Math.sin(rt),ct=Math.cos(it),ut=Math.sin(it);if(_.order==="XYZ"){const ft=at*ct,pt=at*ut,gt=ot*ct,xt=ot*ut;tt[0]=st*ct,tt[4]=-st*ut,tt[8]=lt,tt[1]=pt+gt*lt,tt[5]=ft-xt*lt,tt[9]=-ot*st,tt[2]=xt-ft*lt,tt[6]=gt+pt*lt,tt[10]=at*st}else if(_.order==="YXZ"){const ft=st*ct,pt=st*ut,gt=lt*ct,xt=lt*ut;tt[0]=ft+xt*ot,tt[4]=gt*ot-pt,tt[8]=at*lt,tt[1]=at*ut,tt[5]=at*ct,tt[9]=-ot,tt[2]=pt*ot-gt,tt[6]=xt+ft*ot,tt[10]=at*st}else if(_.order==="ZXY"){const ft=st*ct,pt=st*ut,gt=lt*ct,xt=lt*ut;tt[0]=ft-xt*ot,tt[4]=-at*ut,tt[8]=gt+pt*ot,tt[1]=pt+gt*ot,tt[5]=at*ct,tt[9]=xt-ft*ot,tt[2]=-at*lt,tt[6]=ot,tt[10]=at*st}else if(_.order==="ZYX"){const ft=at*ct,pt=at*ut,gt=ot*ct,xt=ot*ut;tt[0]=st*ct,tt[4]=gt*lt-pt,tt[8]=ft*lt+xt,tt[1]=st*ut,tt[5]=xt*lt+ft,tt[9]=pt*lt-gt,tt[2]=-lt,tt[6]=ot*st,tt[10]=at*st}else if(_.order==="YZX"){const ft=at*st,pt=at*lt,gt=ot*st,xt=ot*lt;tt[0]=st*ct,tt[4]=xt-ft*ut,tt[8]=gt*ut+pt,tt[1]=ut,tt[5]=at*ct,tt[9]=-ot*ct,tt[2]=-lt*ct,tt[6]=pt*ut+gt,tt[10]=ft-xt*ut}else if(_.order==="XZY"){const ft=at*st,pt=at*lt,gt=ot*st,xt=ot*lt;tt[0]=st*ct,tt[4]=-ut,tt[8]=lt*ct,tt[1]=ft*ut+xt,tt[5]=at*ct,tt[9]=pt*ut-gt,tt[2]=gt*ut-pt,tt[6]=ot*ct,tt[10]=xt*ut+ft}return tt[3]=0,tt[7]=0,tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,this}makeRotationFromQuaternion(_){return this.compose(_zero,_,_one)}lookAt(_,tt,nt){const rt=this.elements;return _z.subVectors(_,tt),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(nt,_z),_x.lengthSq()===0&&(Math.abs(nt.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(nt,_z)),_x.normalize(),_y.crossVectors(_z,_x),rt[0]=_x.x,rt[4]=_y.x,rt[8]=_z.x,rt[1]=_x.y,rt[5]=_y.y,rt[9]=_z.y,rt[2]=_x.z,rt[6]=_y.z,rt[10]=_z.z,this}multiply(_){return this.multiplyMatrices(this,_)}premultiply(_){return this.multiplyMatrices(_,this)}multiplyMatrices(_,tt){const nt=_.elements,rt=tt.elements,it=this.elements,at=nt[0],ot=nt[4],st=nt[8],lt=nt[12],ct=nt[1],ut=nt[5],ft=nt[9],pt=nt[13],gt=nt[2],xt=nt[6],yt=nt[10],mt=nt[14],At=nt[3],vt=nt[7],Et=nt[11],Ct=nt[15],Tt=rt[0],bt=rt[4],It=rt[8],wt=rt[12],Rt=rt[1],Ft=rt[5],Ut=rt[9],Gt=rt[13],Ht=rt[2],jt=rt[6],Xt=rt[10],Jt=rt[14],Dt=rt[3],zt=rt[7],$t=rt[11],Lt=rt[15];return it[0]=at*Tt+ot*Rt+st*Ht+lt*Dt,it[4]=at*bt+ot*Ft+st*jt+lt*zt,it[8]=at*It+ot*Ut+st*Xt+lt*$t,it[12]=at*wt+ot*Gt+st*Jt+lt*Lt,it[1]=ct*Tt+ut*Rt+ft*Ht+pt*Dt,it[5]=ct*bt+ut*Ft+ft*jt+pt*zt,it[9]=ct*It+ut*Ut+ft*Xt+pt*$t,it[13]=ct*wt+ut*Gt+ft*Jt+pt*Lt,it[2]=gt*Tt+xt*Rt+yt*Ht+mt*Dt,it[6]=gt*bt+xt*Ft+yt*jt+mt*zt,it[10]=gt*It+xt*Ut+yt*Xt+mt*$t,it[14]=gt*wt+xt*Gt+yt*Jt+mt*Lt,it[3]=At*Tt+vt*Rt+Et*Ht+Ct*Dt,it[7]=At*bt+vt*Ft+Et*jt+Ct*zt,it[11]=At*It+vt*Ut+Et*Xt+Ct*$t,it[15]=At*wt+vt*Gt+Et*Jt+Ct*Lt,this}multiplyScalar(_){const tt=this.elements;return tt[0]*=_,tt[4]*=_,tt[8]*=_,tt[12]*=_,tt[1]*=_,tt[5]*=_,tt[9]*=_,tt[13]*=_,tt[2]*=_,tt[6]*=_,tt[10]*=_,tt[14]*=_,tt[3]*=_,tt[7]*=_,tt[11]*=_,tt[15]*=_,this}determinant(){const _=this.elements,tt=_[0],nt=_[4],rt=_[8],it=_[12],at=_[1],ot=_[5],st=_[9],lt=_[13],ct=_[2],ut=_[6],ft=_[10],pt=_[14],gt=_[3],xt=_[7],yt=_[11],mt=_[15];return gt*(+it*st*ut-rt*lt*ut-it*ot*ft+nt*lt*ft+rt*ot*pt-nt*st*pt)+xt*(+tt*st*pt-tt*lt*ft+it*at*ft-rt*at*pt+rt*lt*ct-it*st*ct)+yt*(+tt*lt*ut-tt*ot*pt-it*at*ut+nt*at*pt+it*ot*ct-nt*lt*ct)+mt*(-rt*ot*ct-tt*st*ut+tt*ot*ft+rt*at*ut-nt*at*ft+nt*st*ct)}transpose(){const _=this.elements;let tt;return tt=_[1],_[1]=_[4],_[4]=tt,tt=_[2],_[2]=_[8],_[8]=tt,tt=_[6],_[6]=_[9],_[9]=tt,tt=_[3],_[3]=_[12],_[12]=tt,tt=_[7],_[7]=_[13],_[13]=tt,tt=_[11],_[11]=_[14],_[14]=tt,this}setPosition(_,tt,nt){const rt=this.elements;return _.isVector3?(rt[12]=_.x,rt[13]=_.y,rt[14]=_.z):(rt[12]=_,rt[13]=tt,rt[14]=nt),this}invert(){const _=this.elements,tt=_[0],nt=_[1],rt=_[2],it=_[3],at=_[4],ot=_[5],st=_[6],lt=_[7],ct=_[8],ut=_[9],ft=_[10],pt=_[11],gt=_[12],xt=_[13],yt=_[14],mt=_[15],At=ut*yt*lt-xt*ft*lt+xt*st*pt-ot*yt*pt-ut*st*mt+ot*ft*mt,vt=gt*ft*lt-ct*yt*lt-gt*st*pt+at*yt*pt+ct*st*mt-at*ft*mt,Et=ct*xt*lt-gt*ut*lt+gt*ot*pt-at*xt*pt-ct*ot*mt+at*ut*mt,Ct=gt*ut*st-ct*xt*st-gt*ot*ft+at*xt*ft+ct*ot*yt-at*ut*yt,Tt=tt*At+nt*vt+rt*Et+it*Ct;if(Tt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const bt=1/Tt;return _[0]=At*bt,_[1]=(xt*ft*it-ut*yt*it-xt*rt*pt+nt*yt*pt+ut*rt*mt-nt*ft*mt)*bt,_[2]=(ot*yt*it-xt*st*it+xt*rt*lt-nt*yt*lt-ot*rt*mt+nt*st*mt)*bt,_[3]=(ut*st*it-ot*ft*it-ut*rt*lt+nt*ft*lt+ot*rt*pt-nt*st*pt)*bt,_[4]=vt*bt,_[5]=(ct*yt*it-gt*ft*it+gt*rt*pt-tt*yt*pt-ct*rt*mt+tt*ft*mt)*bt,_[6]=(gt*st*it-at*yt*it-gt*rt*lt+tt*yt*lt+at*rt*mt-tt*st*mt)*bt,_[7]=(at*ft*it-ct*st*it+ct*rt*lt-tt*ft*lt-at*rt*pt+tt*st*pt)*bt,_[8]=Et*bt,_[9]=(gt*ut*it-ct*xt*it-gt*nt*pt+tt*xt*pt+ct*nt*mt-tt*ut*mt)*bt,_[10]=(at*xt*it-gt*ot*it+gt*nt*lt-tt*xt*lt-at*nt*mt+tt*ot*mt)*bt,_[11]=(ct*ot*it-at*ut*it-ct*nt*lt+tt*ut*lt+at*nt*pt-tt*ot*pt)*bt,_[12]=Ct*bt,_[13]=(ct*xt*rt-gt*ut*rt+gt*nt*ft-tt*xt*ft-ct*nt*yt+tt*ut*yt)*bt,_[14]=(gt*ot*rt-at*xt*rt-gt*nt*st+tt*xt*st+at*nt*yt-tt*ot*yt)*bt,_[15]=(at*ut*rt-ct*ot*rt+ct*nt*st-tt*ut*st-at*nt*ft+tt*ot*ft)*bt,this}scale(_){const tt=this.elements,nt=_.x,rt=_.y,it=_.z;return tt[0]*=nt,tt[4]*=rt,tt[8]*=it,tt[1]*=nt,tt[5]*=rt,tt[9]*=it,tt[2]*=nt,tt[6]*=rt,tt[10]*=it,tt[3]*=nt,tt[7]*=rt,tt[11]*=it,this}getMaxScaleOnAxis(){const _=this.elements,tt=_[0]*_[0]+_[1]*_[1]+_[2]*_[2],nt=_[4]*_[4]+_[5]*_[5]+_[6]*_[6],rt=_[8]*_[8]+_[9]*_[9]+_[10]*_[10];return Math.sqrt(Math.max(tt,nt,rt))}makeTranslation(_,tt,nt){return _.isVector3?this.set(1,0,0,_.x,0,1,0,_.y,0,0,1,_.z,0,0,0,1):this.set(1,0,0,_,0,1,0,tt,0,0,1,nt,0,0,0,1),this}makeRotationX(_){const tt=Math.cos(_),nt=Math.sin(_);return this.set(1,0,0,0,0,tt,-nt,0,0,nt,tt,0,0,0,0,1),this}makeRotationY(_){const tt=Math.cos(_),nt=Math.sin(_);return this.set(tt,0,nt,0,0,1,0,0,-nt,0,tt,0,0,0,0,1),this}makeRotationZ(_){const tt=Math.cos(_),nt=Math.sin(_);return this.set(tt,-nt,0,0,nt,tt,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(_,tt){const nt=Math.cos(tt),rt=Math.sin(tt),it=1-nt,at=_.x,ot=_.y,st=_.z,lt=it*at,ct=it*ot;return this.set(lt*at+nt,lt*ot-rt*st,lt*st+rt*ot,0,lt*ot+rt*st,ct*ot+nt,ct*st-rt*at,0,lt*st-rt*ot,ct*st+rt*at,it*st*st+nt,0,0,0,0,1),this}makeScale(_,tt,nt){return this.set(_,0,0,0,0,tt,0,0,0,0,nt,0,0,0,0,1),this}makeShear(_,tt,nt,rt,it,at){return this.set(1,nt,it,0,_,1,at,0,tt,rt,1,0,0,0,0,1),this}compose(_,tt,nt){const rt=this.elements,it=tt._x,at=tt._y,ot=tt._z,st=tt._w,lt=it+it,ct=at+at,ut=ot+ot,ft=it*lt,pt=it*ct,gt=it*ut,xt=at*ct,yt=at*ut,mt=ot*ut,At=st*lt,vt=st*ct,Et=st*ut,Ct=nt.x,Tt=nt.y,bt=nt.z;return rt[0]=(1-(xt+mt))*Ct,rt[1]=(pt+Et)*Ct,rt[2]=(gt-vt)*Ct,rt[3]=0,rt[4]=(pt-Et)*Tt,rt[5]=(1-(ft+mt))*Tt,rt[6]=(yt+At)*Tt,rt[7]=0,rt[8]=(gt+vt)*bt,rt[9]=(yt-At)*bt,rt[10]=(1-(ft+xt))*bt,rt[11]=0,rt[12]=_.x,rt[13]=_.y,rt[14]=_.z,rt[15]=1,this}decompose(_,tt,nt){const rt=this.elements;let it=_v1$5.set(rt[0],rt[1],rt[2]).length();const at=_v1$5.set(rt[4],rt[5],rt[6]).length(),ot=_v1$5.set(rt[8],rt[9],rt[10]).length();this.determinant()<0&&(it=-it),_.x=rt[12],_.y=rt[13],_.z=rt[14],_m1$2.copy(this);const lt=1/it,ct=1/at,ut=1/ot;return _m1$2.elements[0]*=lt,_m1$2.elements[1]*=lt,_m1$2.elements[2]*=lt,_m1$2.elements[4]*=ct,_m1$2.elements[5]*=ct,_m1$2.elements[6]*=ct,_m1$2.elements[8]*=ut,_m1$2.elements[9]*=ut,_m1$2.elements[10]*=ut,tt.setFromRotationMatrix(_m1$2),nt.x=it,nt.y=at,nt.z=ot,this}makePerspective(_,tt,nt,rt,it,at,ot=WebGLCoordinateSystem){const st=this.elements,lt=2*it/(tt-_),ct=2*it/(nt-rt),ut=(tt+_)/(tt-_),ft=(nt+rt)/(nt-rt);let pt,gt;if(ot===WebGLCoordinateSystem)pt=-(at+it)/(at-it),gt=-2*at*it/(at-it);else if(ot===WebGPUCoordinateSystem)pt=-at/(at-it),gt=-at*it/(at-it);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+ot);return st[0]=lt,st[4]=0,st[8]=ut,st[12]=0,st[1]=0,st[5]=ct,st[9]=ft,st[13]=0,st[2]=0,st[6]=0,st[10]=pt,st[14]=gt,st[3]=0,st[7]=0,st[11]=-1,st[15]=0,this}makeOrthographic(_,tt,nt,rt,it,at,ot=WebGLCoordinateSystem){const st=this.elements,lt=1/(tt-_),ct=1/(nt-rt),ut=1/(at-it),ft=(tt+_)*lt,pt=(nt+rt)*ct;let gt,xt;if(ot===WebGLCoordinateSystem)gt=(at+it)*ut,xt=-2*ut;else if(ot===WebGPUCoordinateSystem)gt=it*ut,xt=-1*ut;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+ot);return st[0]=2*lt,st[4]=0,st[8]=0,st[12]=-ft,st[1]=0,st[5]=2*ct,st[9]=0,st[13]=-pt,st[2]=0,st[6]=0,st[10]=xt,st[14]=-gt,st[3]=0,st[7]=0,st[11]=0,st[15]=1,this}equals(_){const tt=this.elements,nt=_.elements;for(let rt=0;rt<16;rt++)if(tt[rt]!==nt[rt])return!1;return!0}fromArray(_,tt=0){for(let nt=0;nt<16;nt++)this.elements[nt]=_[nt+tt];return this}toArray(_=[],tt=0){const nt=this.elements;return _[tt]=nt[0],_[tt+1]=nt[1],_[tt+2]=nt[2],_[tt+3]=nt[3],_[tt+4]=nt[4],_[tt+5]=nt[5],_[tt+6]=nt[6],_[tt+7]=nt[7],_[tt+8]=nt[8],_[tt+9]=nt[9],_[tt+10]=nt[10],_[tt+11]=nt[11],_[tt+12]=nt[12],_[tt+13]=nt[13],_[tt+14]=nt[14],_[tt+15]=nt[15],_}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(_=0,tt=0,nt=0,rt=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=_,this._y=tt,this._z=nt,this._order=rt}get x(){return this._x}set x(_){this._x=_,this._onChangeCallback()}get y(){return this._y}set y(_){this._y=_,this._onChangeCallback()}get z(){return this._z}set z(_){this._z=_,this._onChangeCallback()}get order(){return this._order}set order(_){this._order=_,this._onChangeCallback()}set(_,tt,nt,rt=this._order){return this._x=_,this._y=tt,this._z=nt,this._order=rt,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(_){return this._x=_._x,this._y=_._y,this._z=_._z,this._order=_._order,this._onChangeCallback(),this}setFromRotationMatrix(_,tt=this._order,nt=!0){const rt=_.elements,it=rt[0],at=rt[4],ot=rt[8],st=rt[1],lt=rt[5],ct=rt[9],ut=rt[2],ft=rt[6],pt=rt[10];switch(tt){case"XYZ":this._y=Math.asin(clamp$4(ot,-1,1)),Math.abs(ot)<.9999999?(this._x=Math.atan2(-ct,pt),this._z=Math.atan2(-at,it)):(this._x=Math.atan2(ft,lt),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$4(ct,-1,1)),Math.abs(ct)<.9999999?(this._y=Math.atan2(ot,pt),this._z=Math.atan2(st,lt)):(this._y=Math.atan2(-ut,it),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$4(ft,-1,1)),Math.abs(ft)<.9999999?(this._y=Math.atan2(-ut,pt),this._z=Math.atan2(-at,lt)):(this._y=0,this._z=Math.atan2(st,it));break;case"ZYX":this._y=Math.asin(-clamp$4(ut,-1,1)),Math.abs(ut)<.9999999?(this._x=Math.atan2(ft,pt),this._z=Math.atan2(st,it)):(this._x=0,this._z=Math.atan2(-at,lt));break;case"YZX":this._z=Math.asin(clamp$4(st,-1,1)),Math.abs(st)<.9999999?(this._x=Math.atan2(-ct,lt),this._y=Math.atan2(-ut,it)):(this._x=0,this._y=Math.atan2(ot,pt));break;case"XZY":this._z=Math.asin(-clamp$4(at,-1,1)),Math.abs(at)<.9999999?(this._x=Math.atan2(ft,lt),this._y=Math.atan2(ot,it)):(this._x=Math.atan2(-ct,pt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+tt)}return this._order=tt,nt===!0&&this._onChangeCallback(),this}setFromQuaternion(_,tt,nt){return _matrix.makeRotationFromQuaternion(_),this.setFromRotationMatrix(_matrix,tt,nt)}setFromVector3(_,tt=this._order){return this.set(_.x,_.y,_.z,tt)}reorder(_){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,_)}equals(_){return _._x===this._x&&_._y===this._y&&_._z===this._z&&_._order===this._order}fromArray(_){return this._x=_[0],this._y=_[1],this._z=_[2],_[3]!==void 0&&(this._order=_[3]),this._onChangeCallback(),this}toArray(_=[],tt=0){return _[tt]=this._x,_[tt+1]=this._y,_[tt+2]=this._z,_[tt+3]=this._order,_}_onChange(_){return this._onChangeCallback=_,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(_){this.mask=(1<<_|0)>>>0}enable(_){this.mask|=1<<_|0}enableAll(){this.mask=-1}toggle(_){this.mask^=1<<_|0}disable(_){this.mask&=~(1<<_|0)}disableAll(){this.mask=0}test(_){return(this.mask&_.mask)!==0}isEnabled(_){return(this.mask&(1<<_|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const _=new Vector3,tt=new Euler,nt=new Quaternion,rt=new Vector3(1,1,1);function it(){nt.setFromEuler(tt,!1)}function at(){tt.setFromQuaternion(nt,void 0,!1)}tt._onChange(it),nt._onChange(at),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:_},rotation:{configurable:!0,enumerable:!0,value:tt},quaternion:{configurable:!0,enumerable:!0,value:nt},scale:{configurable:!0,enumerable:!0,value:rt},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(_){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(_),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(_){return this.quaternion.premultiply(_),this}setRotationFromAxisAngle(_,tt){this.quaternion.setFromAxisAngle(_,tt)}setRotationFromEuler(_){this.quaternion.setFromEuler(_,!0)}setRotationFromMatrix(_){this.quaternion.setFromRotationMatrix(_)}setRotationFromQuaternion(_){this.quaternion.copy(_)}rotateOnAxis(_,tt){return _q1.setFromAxisAngle(_,tt),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(_,tt){return _q1.setFromAxisAngle(_,tt),this.quaternion.premultiply(_q1),this}rotateX(_){return this.rotateOnAxis(_xAxis,_)}rotateY(_){return this.rotateOnAxis(_yAxis,_)}rotateZ(_){return this.rotateOnAxis(_zAxis,_)}translateOnAxis(_,tt){return _v1$4.copy(_).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(tt)),this}translateX(_){return this.translateOnAxis(_xAxis,_)}translateY(_){return this.translateOnAxis(_yAxis,_)}translateZ(_){return this.translateOnAxis(_zAxis,_)}localToWorld(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(this.matrixWorld)}worldToLocal(_){return this.updateWorldMatrix(!0,!1),_.applyMatrix4(_m1$1.copy(this.matrixWorld).invert())}lookAt(_,tt,nt){_.isVector3?_target.copy(_):_target.set(_,tt,nt);const rt=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1.lookAt(_position$3,_target,this.up):_m1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1),rt&&(_m1$1.extractRotation(rt.matrixWorld),_q1.setFromRotationMatrix(_m1$1),this.quaternion.premultiply(_q1.invert()))}add(_){if(arguments.length>1){for(let tt=0;tt<arguments.length;tt++)this.add(arguments[tt]);return this}return _===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",_),this):(_&&_.isObject3D?(_.parent!==null&&_.parent.remove(_),_.parent=this,this.children.push(_),_.dispatchEvent(_addedEvent)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",_),this)}remove(_){if(arguments.length>1){for(let nt=0;nt<arguments.length;nt++)this.remove(arguments[nt]);return this}const tt=this.children.indexOf(_);return tt!==-1&&(_.parent=null,this.children.splice(tt,1),_.dispatchEvent(_removedEvent)),this}removeFromParent(){const _=this.parent;return _!==null&&_.remove(this),this}clear(){return this.remove(...this.children)}attach(_){return this.updateWorldMatrix(!0,!1),_m1$1.copy(this.matrixWorld).invert(),_.parent!==null&&(_.parent.updateWorldMatrix(!0,!1),_m1$1.multiply(_.parent.matrixWorld)),_.applyMatrix4(_m1$1),this.add(_),_.updateWorldMatrix(!1,!0),this}getObjectById(_){return this.getObjectByProperty("id",_)}getObjectByName(_){return this.getObjectByProperty("name",_)}getObjectByProperty(_,tt){if(this[_]===tt)return this;for(let nt=0,rt=this.children.length;nt<rt;nt++){const at=this.children[nt].getObjectByProperty(_,tt);if(at!==void 0)return at}}getObjectsByProperty(_,tt){let nt=[];this[_]===tt&&nt.push(this);for(let rt=0,it=this.children.length;rt<it;rt++){const at=this.children[rt].getObjectsByProperty(_,tt);at.length>0&&(nt=nt.concat(at))}return nt}getWorldPosition(_){return this.updateWorldMatrix(!0,!1),_.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_,_scale$2),_}getWorldScale(_){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,_),_}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const tt=this.matrixWorld.elements;return _.set(tt[8],tt[9],tt[10]).normalize()}raycast(){}traverse(_){_(this);const tt=this.children;for(let nt=0,rt=tt.length;nt<rt;nt++)tt[nt].traverse(_)}traverseVisible(_){if(this.visible===!1)return;_(this);const tt=this.children;for(let nt=0,rt=tt.length;nt<rt;nt++)tt[nt].traverseVisible(_)}traverseAncestors(_){const tt=this.parent;tt!==null&&(_(tt),tt.traverseAncestors(_))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(_){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||_)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,_=!0);const tt=this.children;for(let nt=0,rt=tt.length;nt<rt;nt++){const it=tt[nt];(it.matrixWorldAutoUpdate===!0||_===!0)&&it.updateMatrixWorld(_)}}updateWorldMatrix(_,tt){const nt=this.parent;if(_===!0&&nt!==null&&nt.matrixWorldAutoUpdate===!0&&nt.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),tt===!0){const rt=this.children;for(let it=0,at=rt.length;it<at;it++){const ot=rt[it];ot.matrixWorldAutoUpdate===!0&&ot.updateWorldMatrix(!1,!0)}}}toJSON(_){const tt=_===void 0||typeof _=="string",nt={};tt&&(_={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},nt.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const rt={};rt.uuid=this.uuid,rt.type=this.type,this.name!==""&&(rt.name=this.name),this.castShadow===!0&&(rt.castShadow=!0),this.receiveShadow===!0&&(rt.receiveShadow=!0),this.visible===!1&&(rt.visible=!1),this.frustumCulled===!1&&(rt.frustumCulled=!1),this.renderOrder!==0&&(rt.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(rt.userData=this.userData),rt.layers=this.layers.mask,rt.matrix=this.matrix.toArray(),rt.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(rt.matrixAutoUpdate=!1),this.isInstancedMesh&&(rt.type="InstancedMesh",rt.count=this.count,rt.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(rt.instanceColor=this.instanceColor.toJSON()));function it(ot,st){return ot[st.uuid]===void 0&&(ot[st.uuid]=st.toJSON(_)),st.uuid}if(this.isScene)this.background&&(this.background.isColor?rt.background=this.background.toJSON():this.background.isTexture&&(rt.background=this.background.toJSON(_).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(rt.environment=this.environment.toJSON(_).uuid);else if(this.isMesh||this.isLine||this.isPoints){rt.geometry=it(_.geometries,this.geometry);const ot=this.geometry.parameters;if(ot!==void 0&&ot.shapes!==void 0){const st=ot.shapes;if(Array.isArray(st))for(let lt=0,ct=st.length;lt<ct;lt++){const ut=st[lt];it(_.shapes,ut)}else it(_.shapes,st)}}if(this.isSkinnedMesh&&(rt.bindMode=this.bindMode,rt.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(it(_.skeletons,this.skeleton),rt.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const ot=[];for(let st=0,lt=this.material.length;st<lt;st++)ot.push(it(_.materials,this.material[st]));rt.material=ot}else rt.material=it(_.materials,this.material);if(this.children.length>0){rt.children=[];for(let ot=0;ot<this.children.length;ot++)rt.children.push(this.children[ot].toJSON(_).object)}if(this.animations.length>0){rt.animations=[];for(let ot=0;ot<this.animations.length;ot++){const st=this.animations[ot];rt.animations.push(it(_.animations,st))}}if(tt){const ot=at(_.geometries),st=at(_.materials),lt=at(_.textures),ct=at(_.images),ut=at(_.shapes),ft=at(_.skeletons),pt=at(_.animations),gt=at(_.nodes);ot.length>0&&(nt.geometries=ot),st.length>0&&(nt.materials=st),lt.length>0&&(nt.textures=lt),ct.length>0&&(nt.images=ct),ut.length>0&&(nt.shapes=ut),ft.length>0&&(nt.skeletons=ft),pt.length>0&&(nt.animations=pt),gt.length>0&&(nt.nodes=gt)}return nt.object=rt,nt;function at(ot){const st=[];for(const lt in ot){const ct=ot[lt];delete ct.metadata,st.push(ct)}return st}}clone(_){return new this.constructor().copy(this,_)}copy(_,tt=!0){if(this.name=_.name,this.up.copy(_.up),this.position.copy(_.position),this.rotation.order=_.rotation.order,this.quaternion.copy(_.quaternion),this.scale.copy(_.scale),this.matrix.copy(_.matrix),this.matrixWorld.copy(_.matrixWorld),this.matrixAutoUpdate=_.matrixAutoUpdate,this.matrixWorldNeedsUpdate=_.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=_.matrixWorldAutoUpdate,this.layers.mask=_.layers.mask,this.visible=_.visible,this.castShadow=_.castShadow,this.receiveShadow=_.receiveShadow,this.frustumCulled=_.frustumCulled,this.renderOrder=_.renderOrder,this.animations=_.animations.slice(),this.userData=JSON.parse(JSON.stringify(_.userData)),tt===!0)for(let nt=0;nt<_.children.length;nt++){const rt=_.children[nt];this.add(rt.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$1=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3;let warnedGetUV=!1;class Triangle{constructor(_=new Vector3,tt=new Vector3,nt=new Vector3){this.a=_,this.b=tt,this.c=nt}static getNormal(_,tt,nt,rt){rt.subVectors(nt,tt),_v0$1.subVectors(_,tt),rt.cross(_v0$1);const it=rt.lengthSq();return it>0?rt.multiplyScalar(1/Math.sqrt(it)):rt.set(0,0,0)}static getBarycoord(_,tt,nt,rt,it){_v0$1.subVectors(rt,tt),_v1$3.subVectors(nt,tt),_v2$2.subVectors(_,tt);const at=_v0$1.dot(_v0$1),ot=_v0$1.dot(_v1$3),st=_v0$1.dot(_v2$2),lt=_v1$3.dot(_v1$3),ct=_v1$3.dot(_v2$2),ut=at*lt-ot*ot;if(ut===0)return it.set(-2,-1,-1);const ft=1/ut,pt=(lt*st-ot*ct)*ft,gt=(at*ct-ot*st)*ft;return it.set(1-pt-gt,gt,pt)}static containsPoint(_,tt,nt,rt){return this.getBarycoord(_,tt,nt,rt,_v3$1),_v3$1.x>=0&&_v3$1.y>=0&&_v3$1.x+_v3$1.y<=1}static getUV(_,tt,nt,rt,it,at,ot,st){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),this.getInterpolation(_,tt,nt,rt,it,at,ot,st)}static getInterpolation(_,tt,nt,rt,it,at,ot,st){return this.getBarycoord(_,tt,nt,rt,_v3$1),st.setScalar(0),st.addScaledVector(it,_v3$1.x),st.addScaledVector(at,_v3$1.y),st.addScaledVector(ot,_v3$1.z),st}static isFrontFacing(_,tt,nt,rt){return _v0$1.subVectors(nt,tt),_v1$3.subVectors(_,tt),_v0$1.cross(_v1$3).dot(rt)<0}set(_,tt,nt){return this.a.copy(_),this.b.copy(tt),this.c.copy(nt),this}setFromPointsAndIndices(_,tt,nt,rt){return this.a.copy(_[tt]),this.b.copy(_[nt]),this.c.copy(_[rt]),this}setFromAttributeAndIndices(_,tt,nt,rt){return this.a.fromBufferAttribute(_,tt),this.b.fromBufferAttribute(_,nt),this.c.fromBufferAttribute(_,rt),this}clone(){return new this.constructor().copy(this)}copy(_){return this.a.copy(_.a),this.b.copy(_.b),this.c.copy(_.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(_){return _.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(_){return Triangle.getNormal(this.a,this.b,this.c,_)}getPlane(_){return _.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(_,tt){return Triangle.getBarycoord(_,this.a,this.b,this.c,tt)}getUV(_,tt,nt,rt,it){return warnedGetUV===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),warnedGetUV=!0),Triangle.getInterpolation(_,this.a,this.b,this.c,tt,nt,rt,it)}getInterpolation(_,tt,nt,rt,it){return Triangle.getInterpolation(_,this.a,this.b,this.c,tt,nt,rt,it)}containsPoint(_){return Triangle.containsPoint(_,this.a,this.b,this.c)}isFrontFacing(_){return Triangle.isFrontFacing(this.a,this.b,this.c,_)}intersectsBox(_){return _.intersectsTriangle(this)}closestPointToPoint(_,tt){const nt=this.a,rt=this.b,it=this.c;let at,ot;_vab.subVectors(rt,nt),_vac.subVectors(it,nt),_vap.subVectors(_,nt);const st=_vab.dot(_vap),lt=_vac.dot(_vap);if(st<=0&&lt<=0)return tt.copy(nt);_vbp.subVectors(_,rt);const ct=_vab.dot(_vbp),ut=_vac.dot(_vbp);if(ct>=0&&ut<=ct)return tt.copy(rt);const ft=st*ut-ct*lt;if(ft<=0&&st>=0&&ct<=0)return at=st/(st-ct),tt.copy(nt).addScaledVector(_vab,at);_vcp.subVectors(_,it);const pt=_vab.dot(_vcp),gt=_vac.dot(_vcp);if(gt>=0&&pt<=gt)return tt.copy(it);const xt=pt*lt-st*gt;if(xt<=0&&lt>=0&&gt<=0)return ot=lt/(lt-gt),tt.copy(nt).addScaledVector(_vac,ot);const yt=ct*gt-pt*ut;if(yt<=0&&ut-ct>=0&&pt-gt>=0)return _vbc.subVectors(it,rt),ot=(ut-ct)/(ut-ct+(pt-gt)),tt.copy(rt).addScaledVector(_vbc,ot);const mt=1/(yt+xt+ft);return at=xt*mt,ot=ft*mt,tt.copy(nt).addScaledVector(_vab,at).addScaledVector(_vac,ot)}equals(_){return _.a.equals(this.a)&&_.b.equals(this.b)&&_.c.equals(this.c)}}let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(_){this._alphaTest>0!=_>0&&this.version++,this._alphaTest=_}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(_){if(_!==void 0)for(const tt in _){const nt=_[tt];if(nt===void 0){console.warn(`THREE.Material: parameter '${tt}' has value of undefined.`);continue}const rt=this[tt];if(rt===void 0){console.warn(`THREE.Material: '${tt}' is not a property of THREE.${this.type}.`);continue}rt&&rt.isColor?rt.set(nt):rt&&rt.isVector3&&nt&&nt.isVector3?rt.copy(nt):this[tt]=nt}}toJSON(_){const tt=_===void 0||typeof _=="string";tt&&(_={textures:{},images:{}});const nt={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};nt.uuid=this.uuid,nt.type=this.type,this.name!==""&&(nt.name=this.name),this.color&&this.color.isColor&&(nt.color=this.color.getHex()),this.roughness!==void 0&&(nt.roughness=this.roughness),this.metalness!==void 0&&(nt.metalness=this.metalness),this.sheen!==void 0&&(nt.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(nt.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(nt.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(nt.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(nt.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(nt.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(nt.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(nt.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(nt.shininess=this.shininess),this.clearcoat!==void 0&&(nt.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(nt.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(nt.clearcoatMap=this.clearcoatMap.toJSON(_).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(nt.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(_).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(nt.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(_).uuid,nt.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(nt.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(nt.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(nt.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(nt.iridescenceMap=this.iridescenceMap.toJSON(_).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(nt.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(_).uuid),this.anisotropy!==void 0&&(nt.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(nt.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(nt.anisotropyMap=this.anisotropyMap.toJSON(_).uuid),this.map&&this.map.isTexture&&(nt.map=this.map.toJSON(_).uuid),this.matcap&&this.matcap.isTexture&&(nt.matcap=this.matcap.toJSON(_).uuid),this.alphaMap&&this.alphaMap.isTexture&&(nt.alphaMap=this.alphaMap.toJSON(_).uuid),this.lightMap&&this.lightMap.isTexture&&(nt.lightMap=this.lightMap.toJSON(_).uuid,nt.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(nt.aoMap=this.aoMap.toJSON(_).uuid,nt.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(nt.bumpMap=this.bumpMap.toJSON(_).uuid,nt.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(nt.normalMap=this.normalMap.toJSON(_).uuid,nt.normalMapType=this.normalMapType,nt.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(nt.displacementMap=this.displacementMap.toJSON(_).uuid,nt.displacementScale=this.displacementScale,nt.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(nt.roughnessMap=this.roughnessMap.toJSON(_).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(nt.metalnessMap=this.metalnessMap.toJSON(_).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(nt.emissiveMap=this.emissiveMap.toJSON(_).uuid),this.specularMap&&this.specularMap.isTexture&&(nt.specularMap=this.specularMap.toJSON(_).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(nt.specularIntensityMap=this.specularIntensityMap.toJSON(_).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(nt.specularColorMap=this.specularColorMap.toJSON(_).uuid),this.envMap&&this.envMap.isTexture&&(nt.envMap=this.envMap.toJSON(_).uuid,this.combine!==void 0&&(nt.combine=this.combine)),this.envMapIntensity!==void 0&&(nt.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(nt.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(nt.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(nt.gradientMap=this.gradientMap.toJSON(_).uuid),this.transmission!==void 0&&(nt.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(nt.transmissionMap=this.transmissionMap.toJSON(_).uuid),this.thickness!==void 0&&(nt.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(nt.thicknessMap=this.thicknessMap.toJSON(_).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(nt.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(nt.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(nt.size=this.size),this.shadowSide!==null&&(nt.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(nt.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(nt.blending=this.blending),this.side!==FrontSide&&(nt.side=this.side),this.vertexColors&&(nt.vertexColors=!0),this.opacity<1&&(nt.opacity=this.opacity),this.transparent===!0&&(nt.transparent=this.transparent),nt.depthFunc=this.depthFunc,nt.depthTest=this.depthTest,nt.depthWrite=this.depthWrite,nt.colorWrite=this.colorWrite,nt.stencilWrite=this.stencilWrite,nt.stencilWriteMask=this.stencilWriteMask,nt.stencilFunc=this.stencilFunc,nt.stencilRef=this.stencilRef,nt.stencilFuncMask=this.stencilFuncMask,nt.stencilFail=this.stencilFail,nt.stencilZFail=this.stencilZFail,nt.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(nt.rotation=this.rotation),this.polygonOffset===!0&&(nt.polygonOffset=!0),this.polygonOffsetFactor!==0&&(nt.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(nt.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(nt.linewidth=this.linewidth),this.dashSize!==void 0&&(nt.dashSize=this.dashSize),this.gapSize!==void 0&&(nt.gapSize=this.gapSize),this.scale!==void 0&&(nt.scale=this.scale),this.dithering===!0&&(nt.dithering=!0),this.alphaTest>0&&(nt.alphaTest=this.alphaTest),this.alphaHash===!0&&(nt.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(nt.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(nt.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(nt.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(nt.wireframe=this.wireframe),this.wireframeLinewidth>1&&(nt.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(nt.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(nt.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(nt.flatShading=this.flatShading),this.visible===!1&&(nt.visible=!1),this.toneMapped===!1&&(nt.toneMapped=!1),this.fog===!1&&(nt.fog=!1),Object.keys(this.userData).length>0&&(nt.userData=this.userData);function rt(it){const at=[];for(const ot in it){const st=it[ot];delete st.metadata,at.push(st)}return at}if(tt){const it=rt(_.textures),at=rt(_.images);it.length>0&&(nt.textures=it),at.length>0&&(nt.images=at)}return nt}clone(){return new this.constructor().copy(this)}copy(_){this.name=_.name,this.blending=_.blending,this.side=_.side,this.vertexColors=_.vertexColors,this.opacity=_.opacity,this.transparent=_.transparent,this.blendSrc=_.blendSrc,this.blendDst=_.blendDst,this.blendEquation=_.blendEquation,this.blendSrcAlpha=_.blendSrcAlpha,this.blendDstAlpha=_.blendDstAlpha,this.blendEquationAlpha=_.blendEquationAlpha,this.depthFunc=_.depthFunc,this.depthTest=_.depthTest,this.depthWrite=_.depthWrite,this.stencilWriteMask=_.stencilWriteMask,this.stencilFunc=_.stencilFunc,this.stencilRef=_.stencilRef,this.stencilFuncMask=_.stencilFuncMask,this.stencilFail=_.stencilFail,this.stencilZFail=_.stencilZFail,this.stencilZPass=_.stencilZPass,this.stencilWrite=_.stencilWrite;const tt=_.clippingPlanes;let nt=null;if(tt!==null){const rt=tt.length;nt=new Array(rt);for(let it=0;it!==rt;++it)nt[it]=tt[it].clone()}return this.clippingPlanes=nt,this.clipIntersection=_.clipIntersection,this.clipShadows=_.clipShadows,this.shadowSide=_.shadowSide,this.colorWrite=_.colorWrite,this.precision=_.precision,this.polygonOffset=_.polygonOffset,this.polygonOffsetFactor=_.polygonOffsetFactor,this.polygonOffsetUnits=_.polygonOffsetUnits,this.dithering=_.dithering,this.alphaTest=_.alphaTest,this.alphaHash=_.alphaHash,this.alphaToCoverage=_.alphaToCoverage,this.premultipliedAlpha=_.premultipliedAlpha,this.forceSinglePass=_.forceSinglePass,this.visible=_.visible,this.toneMapped=_.toneMapped,this.userData=JSON.parse(JSON.stringify(_.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(_){_===!0&&this.version++}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(_e,_,tt){return tt<0&&(tt+=1),tt>1&&(tt-=1),tt<1/6?_e+(_-_e)*6*tt:tt<1/2?_:tt<2/3?_e+(_-_e)*6*(2/3-tt):_e}let Color$1=class{constructor(_,tt,nt){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(_,tt,nt)}set(_,tt,nt){if(tt===void 0&&nt===void 0){const rt=_;rt&&rt.isColor?this.copy(rt):typeof rt=="number"?this.setHex(rt):typeof rt=="string"&&this.setStyle(rt)}else this.setRGB(_,tt,nt);return this}setScalar(_){return this.r=_,this.g=_,this.b=_,this}setHex(_,tt=SRGBColorSpace){return _=Math.floor(_),this.r=(_>>16&255)/255,this.g=(_>>8&255)/255,this.b=(_&255)/255,ColorManagement.toWorkingColorSpace(this,tt),this}setRGB(_,tt,nt,rt=ColorManagement.workingColorSpace){return this.r=_,this.g=tt,this.b=nt,ColorManagement.toWorkingColorSpace(this,rt),this}setHSL(_,tt,nt,rt=ColorManagement.workingColorSpace){if(_=euclideanModulo(_,1),tt=clamp$4(tt,0,1),nt=clamp$4(nt,0,1),tt===0)this.r=this.g=this.b=nt;else{const it=nt<=.5?nt*(1+tt):nt+tt-nt*tt,at=2*nt-it;this.r=hue2rgb(at,it,_+1/3),this.g=hue2rgb(at,it,_),this.b=hue2rgb(at,it,_-1/3)}return ColorManagement.toWorkingColorSpace(this,rt),this}setStyle(_,tt=SRGBColorSpace){function nt(it){it!==void 0&&parseFloat(it)<1&&console.warn("THREE.Color: Alpha component of "+_+" will be ignored.")}let rt;if(rt=/^(\w+)\(([^\)]*)\)/.exec(_)){let it;const at=rt[1],ot=rt[2];switch(at){case"rgb":case"rgba":if(it=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ot))return nt(it[4]),this.setRGB(Math.min(255,parseInt(it[1],10))/255,Math.min(255,parseInt(it[2],10))/255,Math.min(255,parseInt(it[3],10))/255,tt);if(it=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ot))return nt(it[4]),this.setRGB(Math.min(100,parseInt(it[1],10))/100,Math.min(100,parseInt(it[2],10))/100,Math.min(100,parseInt(it[3],10))/100,tt);break;case"hsl":case"hsla":if(it=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ot))return nt(it[4]),this.setHSL(parseFloat(it[1])/360,parseFloat(it[2])/100,parseFloat(it[3])/100,tt);break;default:console.warn("THREE.Color: Unknown color model "+_)}}else if(rt=/^\#([A-Fa-f\d]+)$/.exec(_)){const it=rt[1],at=it.length;if(at===3)return this.setRGB(parseInt(it.charAt(0),16)/15,parseInt(it.charAt(1),16)/15,parseInt(it.charAt(2),16)/15,tt);if(at===6)return this.setHex(parseInt(it,16),tt);console.warn("THREE.Color: Invalid hex color "+_)}else if(_&&_.length>0)return this.setColorName(_,tt);return this}setColorName(_,tt=SRGBColorSpace){const nt=_colorKeywords[_.toLowerCase()];return nt!==void 0?this.setHex(nt,tt):console.warn("THREE.Color: Unknown color "+_),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(_){return this.r=_.r,this.g=_.g,this.b=_.b,this}copySRGBToLinear(_){return this.r=SRGBToLinear(_.r),this.g=SRGBToLinear(_.g),this.b=SRGBToLinear(_.b),this}copyLinearToSRGB(_){return this.r=LinearToSRGB(_.r),this.g=LinearToSRGB(_.g),this.b=LinearToSRGB(_.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(_=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),_),Math.round(clamp$4(_color.r*255,0,255))*65536+Math.round(clamp$4(_color.g*255,0,255))*256+Math.round(clamp$4(_color.b*255,0,255))}getHexString(_=SRGBColorSpace){return("000000"+this.getHex(_).toString(16)).slice(-6)}getHSL(_,tt=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),tt);const nt=_color.r,rt=_color.g,it=_color.b,at=Math.max(nt,rt,it),ot=Math.min(nt,rt,it);let st,lt;const ct=(ot+at)/2;if(ot===at)st=0,lt=0;else{const ut=at-ot;switch(lt=ct<=.5?ut/(at+ot):ut/(2-at-ot),at){case nt:st=(rt-it)/ut+(rt<it?6:0);break;case rt:st=(it-nt)/ut+2;break;case it:st=(nt-rt)/ut+4;break}st/=6}return _.h=st,_.s=lt,_.l=ct,_}getRGB(_,tt=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),tt),_.r=_color.r,_.g=_color.g,_.b=_color.b,_}getStyle(_=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),_);const tt=_color.r,nt=_color.g,rt=_color.b;return _!==SRGBColorSpace?`color(${_} ${tt.toFixed(3)} ${nt.toFixed(3)} ${rt.toFixed(3)})`:`rgb(${Math.round(tt*255)},${Math.round(nt*255)},${Math.round(rt*255)})`}offsetHSL(_,tt,nt){return this.getHSL(_hslA),_hslA.h+=_,_hslA.s+=tt,_hslA.l+=nt,this.setHSL(_hslA.h,_hslA.s,_hslA.l),this}add(_){return this.r+=_.r,this.g+=_.g,this.b+=_.b,this}addColors(_,tt){return this.r=_.r+tt.r,this.g=_.g+tt.g,this.b=_.b+tt.b,this}addScalar(_){return this.r+=_,this.g+=_,this.b+=_,this}sub(_){return this.r=Math.max(0,this.r-_.r),this.g=Math.max(0,this.g-_.g),this.b=Math.max(0,this.b-_.b),this}multiply(_){return this.r*=_.r,this.g*=_.g,this.b*=_.b,this}multiplyScalar(_){return this.r*=_,this.g*=_,this.b*=_,this}lerp(_,tt){return this.r+=(_.r-this.r)*tt,this.g+=(_.g-this.g)*tt,this.b+=(_.b-this.b)*tt,this}lerpColors(_,tt,nt){return this.r=_.r+(tt.r-_.r)*nt,this.g=_.g+(tt.g-_.g)*nt,this.b=_.b+(tt.b-_.b)*nt,this}lerpHSL(_,tt){this.getHSL(_hslA),_.getHSL(_hslB);const nt=lerp(_hslA.h,_hslB.h,tt),rt=lerp(_hslA.s,_hslB.s,tt),it=lerp(_hslA.l,_hslB.l,tt);return this.setHSL(nt,rt,it),this}setFromVector3(_){return this.r=_.x,this.g=_.y,this.b=_.z,this}applyMatrix3(_){const tt=this.r,nt=this.g,rt=this.b,it=_.elements;return this.r=it[0]*tt+it[3]*nt+it[6]*rt,this.g=it[1]*tt+it[4]*nt+it[7]*rt,this.b=it[2]*tt+it[5]*nt+it[8]*rt,this}equals(_){return _.r===this.r&&_.g===this.g&&_.b===this.b}fromArray(_,tt=0){return this.r=_[tt],this.g=_[tt+1],this.b=_[tt+2],this}toArray(_=[],tt=0){return _[tt]=this.r,_[tt+1]=this.g,_[tt+2]=this.b,_}fromBufferAttribute(_,tt){return this.r=_.getX(tt),this.g=_.getY(tt),this.b=_.getZ(tt),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _color=new Color$1;Color$1.NAMES=_colorKeywords;class MeshBasicMaterial extends Material{constructor(_){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}const _tables=_generateTables();function _generateTables(){const _e=new ArrayBuffer(4),_=new Float32Array(_e),tt=new Uint32Array(_e),nt=new Uint32Array(512),rt=new Uint32Array(512);for(let st=0;st<256;++st){const lt=st-127;lt<-27?(nt[st]=0,nt[st|256]=32768,rt[st]=24,rt[st|256]=24):lt<-14?(nt[st]=1024>>-lt-14,nt[st|256]=1024>>-lt-14|32768,rt[st]=-lt-1,rt[st|256]=-lt-1):lt<=15?(nt[st]=lt+15<<10,nt[st|256]=lt+15<<10|32768,rt[st]=13,rt[st|256]=13):lt<128?(nt[st]=31744,nt[st|256]=64512,rt[st]=24,rt[st|256]=24):(nt[st]=31744,nt[st|256]=64512,rt[st]=13,rt[st|256]=13)}const it=new Uint32Array(2048),at=new Uint32Array(64),ot=new Uint32Array(64);for(let st=1;st<1024;++st){let lt=st<<13,ct=0;for(;!(lt&8388608);)lt<<=1,ct-=8388608;lt&=-8388609,ct+=947912704,it[st]=lt|ct}for(let st=1024;st<2048;++st)it[st]=939524096+(st-1024<<13);for(let st=1;st<31;++st)at[st]=st<<23;at[31]=1199570944,at[32]=2147483648;for(let st=33;st<63;++st)at[st]=2147483648+(st-32<<23);at[63]=3347054592;for(let st=1;st<64;++st)st!==32&&(ot[st]=1024);return{floatView:_,uint32View:tt,baseTable:nt,shiftTable:rt,mantissaTable:it,exponentTable:at,offsetTable:ot}}function toHalfFloat(_e){Math.abs(_e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),_e=clamp$4(_e,-65504,65504),_tables.floatView[0]=_e;const _=_tables.uint32View[0],tt=_>>23&511;return _tables.baseTable[tt]+((_&8388607)>>_tables.shiftTable[tt])}function fromHalfFloat(_e){const _=_e>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[_]+(_e&1023)]+_tables.exponentTable[_],_tables.floatView[0]}const DataUtils={toHalfFloat,fromHalfFloat},_vector$8=new Vector3,_vector2$1=new Vector2;class BufferAttribute{constructor(_,tt,nt=!1){if(Array.isArray(_))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=_,this.itemSize=tt,this.count=_!==void 0?_.length/tt:0,this.normalized=nt,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}copy(_){return this.name=_.name,this.array=new _.array.constructor(_.array),this.itemSize=_.itemSize,this.count=_.count,this.normalized=_.normalized,this.usage=_.usage,this.gpuType=_.gpuType,this}copyAt(_,tt,nt){_*=this.itemSize,nt*=tt.itemSize;for(let rt=0,it=this.itemSize;rt<it;rt++)this.array[_+rt]=tt.array[nt+rt];return this}copyArray(_){return this.array.set(_),this}applyMatrix3(_){if(this.itemSize===2)for(let tt=0,nt=this.count;tt<nt;tt++)_vector2$1.fromBufferAttribute(this,tt),_vector2$1.applyMatrix3(_),this.setXY(tt,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let tt=0,nt=this.count;tt<nt;tt++)_vector$8.fromBufferAttribute(this,tt),_vector$8.applyMatrix3(_),this.setXYZ(tt,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyMatrix4(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$8.fromBufferAttribute(this,tt),_vector$8.applyMatrix4(_),this.setXYZ(tt,_vector$8.x,_vector$8.y,_vector$8.z);return this}applyNormalMatrix(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$8.fromBufferAttribute(this,tt),_vector$8.applyNormalMatrix(_),this.setXYZ(tt,_vector$8.x,_vector$8.y,_vector$8.z);return this}transformDirection(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$8.fromBufferAttribute(this,tt),_vector$8.transformDirection(_),this.setXYZ(tt,_vector$8.x,_vector$8.y,_vector$8.z);return this}set(_,tt=0){return this.array.set(_,tt),this}getComponent(_,tt){let nt=this.array[_*this.itemSize+tt];return this.normalized&&(nt=denormalize(nt,this.array)),nt}setComponent(_,tt,nt){return this.normalized&&(nt=normalize$5(nt,this.array)),this.array[_*this.itemSize+tt]=nt,this}getX(_){let tt=this.array[_*this.itemSize];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setX(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize]=tt,this}getY(_){let tt=this.array[_*this.itemSize+1];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setY(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+1]=tt,this}getZ(_){let tt=this.array[_*this.itemSize+2];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setZ(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+2]=tt,this}getW(_){let tt=this.array[_*this.itemSize+3];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setW(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+3]=tt,this}setXY(_,tt,nt){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array)),this.array[_+0]=tt,this.array[_+1]=nt,this}setXYZ(_,tt,nt,rt){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.array[_+0]=tt,this.array[_+1]=nt,this.array[_+2]=rt,this}setXYZW(_,tt,nt,rt,it){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.array[_+0]=tt,this.array[_+1]=nt,this.array[_+2]=rt,this.array[_+3]=it,this}onUpload(_){return this.onUploadCallback=_,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const _={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(_.name=this.name),this.usage!==StaticDrawUsage&&(_.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(_.updateRange=this.updateRange),_}}class Int8BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Int8Array(_),tt,nt)}}class Uint8BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint8Array(_),tt,nt)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint8ClampedArray(_),tt,nt)}}class Int16BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Int16Array(_),tt,nt)}}class Uint16BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint16Array(_),tt,nt)}}class Int32BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Int32Array(_),tt,nt)}}class Uint32BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint32Array(_),tt,nt)}}class Float16BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Uint16Array(_),tt,nt),this.isFloat16BufferAttribute=!0}getX(_){let tt=fromHalfFloat(this.array[_*this.itemSize]);return this.normalized&&(tt=denormalize(tt,this.array)),tt}setX(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize]=toHalfFloat(tt),this}getY(_){let tt=fromHalfFloat(this.array[_*this.itemSize+1]);return this.normalized&&(tt=denormalize(tt,this.array)),tt}setY(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+1]=toHalfFloat(tt),this}getZ(_){let tt=fromHalfFloat(this.array[_*this.itemSize+2]);return this.normalized&&(tt=denormalize(tt,this.array)),tt}setZ(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+2]=toHalfFloat(tt),this}getW(_){let tt=fromHalfFloat(this.array[_*this.itemSize+3]);return this.normalized&&(tt=denormalize(tt,this.array)),tt}setW(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.array[_*this.itemSize+3]=toHalfFloat(tt),this}setXY(_,tt,nt){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array)),this.array[_+0]=toHalfFloat(tt),this.array[_+1]=toHalfFloat(nt),this}setXYZ(_,tt,nt,rt){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.array[_+0]=toHalfFloat(tt),this.array[_+1]=toHalfFloat(nt),this.array[_+2]=toHalfFloat(rt),this}setXYZW(_,tt,nt,rt,it){return _*=this.itemSize,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.array[_+0]=toHalfFloat(tt),this.array[_+1]=toHalfFloat(nt),this.array[_+2]=toHalfFloat(rt),this.array[_+3]=toHalfFloat(it),this}}class Float32BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Float32Array(_),tt,nt)}}class Float64BufferAttribute extends BufferAttribute{constructor(_,tt,nt){super(new Float64Array(_),tt,nt)}}let _id$2=0;const _m1=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$1=new Box3,_boxMorphTargets=new Box3,_vector$7=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(_){return Array.isArray(_)?this.index=new(arrayNeedsUint32(_)?Uint32BufferAttribute:Uint16BufferAttribute)(_,1):this.index=_,this}getAttribute(_){return this.attributes[_]}setAttribute(_,tt){return this.attributes[_]=tt,this}deleteAttribute(_){return delete this.attributes[_],this}hasAttribute(_){return this.attributes[_]!==void 0}addGroup(_,tt,nt=0){this.groups.push({start:_,count:tt,materialIndex:nt})}clearGroups(){this.groups=[]}setDrawRange(_,tt){this.drawRange.start=_,this.drawRange.count=tt}applyMatrix4(_){const tt=this.attributes.position;tt!==void 0&&(tt.applyMatrix4(_),tt.needsUpdate=!0);const nt=this.attributes.normal;if(nt!==void 0){const it=new Matrix3().getNormalMatrix(_);nt.applyNormalMatrix(it),nt.needsUpdate=!0}const rt=this.attributes.tangent;return rt!==void 0&&(rt.transformDirection(_),rt.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(_){return _m1.makeRotationFromQuaternion(_),this.applyMatrix4(_m1),this}rotateX(_){return _m1.makeRotationX(_),this.applyMatrix4(_m1),this}rotateY(_){return _m1.makeRotationY(_),this.applyMatrix4(_m1),this}rotateZ(_){return _m1.makeRotationZ(_),this.applyMatrix4(_m1),this}translate(_,tt,nt){return _m1.makeTranslation(_,tt,nt),this.applyMatrix4(_m1),this}scale(_,tt,nt){return _m1.makeScale(_,tt,nt),this.applyMatrix4(_m1),this}lookAt(_){return _obj.lookAt(_),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(_){const tt=[];for(let nt=0,rt=_.length;nt<rt;nt++){const it=_[nt];tt.push(it.x,it.y,it.z||0)}return this.setAttribute("position",new Float32BufferAttribute(tt,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const _=this.attributes.position,tt=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(_!==void 0){if(this.boundingBox.setFromBufferAttribute(_),tt)for(let nt=0,rt=tt.length;nt<rt;nt++){const it=tt[nt];_box$1.setFromBufferAttribute(it),this.morphTargetsRelative?(_vector$7.addVectors(this.boundingBox.min,_box$1.min),this.boundingBox.expandByPoint(_vector$7),_vector$7.addVectors(this.boundingBox.max,_box$1.max),this.boundingBox.expandByPoint(_vector$7)):(this.boundingBox.expandByPoint(_box$1.min),this.boundingBox.expandByPoint(_box$1.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const _=this.attributes.position,tt=this.morphAttributes.position;if(_&&_.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Vector3,1/0);return}if(_){const nt=this.boundingSphere.center;if(_box$1.setFromBufferAttribute(_),tt)for(let it=0,at=tt.length;it<at;it++){const ot=tt[it];_boxMorphTargets.setFromBufferAttribute(ot),this.morphTargetsRelative?(_vector$7.addVectors(_box$1.min,_boxMorphTargets.min),_box$1.expandByPoint(_vector$7),_vector$7.addVectors(_box$1.max,_boxMorphTargets.max),_box$1.expandByPoint(_vector$7)):(_box$1.expandByPoint(_boxMorphTargets.min),_box$1.expandByPoint(_boxMorphTargets.max))}_box$1.getCenter(nt);let rt=0;for(let it=0,at=_.count;it<at;it++)_vector$7.fromBufferAttribute(_,it),rt=Math.max(rt,nt.distanceToSquared(_vector$7));if(tt)for(let it=0,at=tt.length;it<at;it++){const ot=tt[it],st=this.morphTargetsRelative;for(let lt=0,ct=ot.count;lt<ct;lt++)_vector$7.fromBufferAttribute(ot,lt),st&&(_offset.fromBufferAttribute(_,lt),_vector$7.add(_offset)),rt=Math.max(rt,nt.distanceToSquared(_vector$7))}this.boundingSphere.radius=Math.sqrt(rt),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const _=this.index,tt=this.attributes;if(_===null||tt.position===void 0||tt.normal===void 0||tt.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const nt=_.array,rt=tt.position.array,it=tt.normal.array,at=tt.uv.array,ot=rt.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*ot),4));const st=this.getAttribute("tangent").array,lt=[],ct=[];for(let Rt=0;Rt<ot;Rt++)lt[Rt]=new Vector3,ct[Rt]=new Vector3;const ut=new Vector3,ft=new Vector3,pt=new Vector3,gt=new Vector2,xt=new Vector2,yt=new Vector2,mt=new Vector3,At=new Vector3;function vt(Rt,Ft,Ut){ut.fromArray(rt,Rt*3),ft.fromArray(rt,Ft*3),pt.fromArray(rt,Ut*3),gt.fromArray(at,Rt*2),xt.fromArray(at,Ft*2),yt.fromArray(at,Ut*2),ft.sub(ut),pt.sub(ut),xt.sub(gt),yt.sub(gt);const Gt=1/(xt.x*yt.y-yt.x*xt.y);isFinite(Gt)&&(mt.copy(ft).multiplyScalar(yt.y).addScaledVector(pt,-xt.y).multiplyScalar(Gt),At.copy(pt).multiplyScalar(xt.x).addScaledVector(ft,-yt.x).multiplyScalar(Gt),lt[Rt].add(mt),lt[Ft].add(mt),lt[Ut].add(mt),ct[Rt].add(At),ct[Ft].add(At),ct[Ut].add(At))}let Et=this.groups;Et.length===0&&(Et=[{start:0,count:nt.length}]);for(let Rt=0,Ft=Et.length;Rt<Ft;++Rt){const Ut=Et[Rt],Gt=Ut.start,Ht=Ut.count;for(let jt=Gt,Xt=Gt+Ht;jt<Xt;jt+=3)vt(nt[jt+0],nt[jt+1],nt[jt+2])}const Ct=new Vector3,Tt=new Vector3,bt=new Vector3,It=new Vector3;function wt(Rt){bt.fromArray(it,Rt*3),It.copy(bt);const Ft=lt[Rt];Ct.copy(Ft),Ct.sub(bt.multiplyScalar(bt.dot(Ft))).normalize(),Tt.crossVectors(It,Ft);const Gt=Tt.dot(ct[Rt])<0?-1:1;st[Rt*4]=Ct.x,st[Rt*4+1]=Ct.y,st[Rt*4+2]=Ct.z,st[Rt*4+3]=Gt}for(let Rt=0,Ft=Et.length;Rt<Ft;++Rt){const Ut=Et[Rt],Gt=Ut.start,Ht=Ut.count;for(let jt=Gt,Xt=Gt+Ht;jt<Xt;jt+=3)wt(nt[jt+0]),wt(nt[jt+1]),wt(nt[jt+2])}}computeVertexNormals(){const _=this.index,tt=this.getAttribute("position");if(tt!==void 0){let nt=this.getAttribute("normal");if(nt===void 0)nt=new BufferAttribute(new Float32Array(tt.count*3),3),this.setAttribute("normal",nt);else for(let ft=0,pt=nt.count;ft<pt;ft++)nt.setXYZ(ft,0,0,0);const rt=new Vector3,it=new Vector3,at=new Vector3,ot=new Vector3,st=new Vector3,lt=new Vector3,ct=new Vector3,ut=new Vector3;if(_)for(let ft=0,pt=_.count;ft<pt;ft+=3){const gt=_.getX(ft+0),xt=_.getX(ft+1),yt=_.getX(ft+2);rt.fromBufferAttribute(tt,gt),it.fromBufferAttribute(tt,xt),at.fromBufferAttribute(tt,yt),ct.subVectors(at,it),ut.subVectors(rt,it),ct.cross(ut),ot.fromBufferAttribute(nt,gt),st.fromBufferAttribute(nt,xt),lt.fromBufferAttribute(nt,yt),ot.add(ct),st.add(ct),lt.add(ct),nt.setXYZ(gt,ot.x,ot.y,ot.z),nt.setXYZ(xt,st.x,st.y,st.z),nt.setXYZ(yt,lt.x,lt.y,lt.z)}else for(let ft=0,pt=tt.count;ft<pt;ft+=3)rt.fromBufferAttribute(tt,ft+0),it.fromBufferAttribute(tt,ft+1),at.fromBufferAttribute(tt,ft+2),ct.subVectors(at,it),ut.subVectors(rt,it),ct.cross(ut),nt.setXYZ(ft+0,ct.x,ct.y,ct.z),nt.setXYZ(ft+1,ct.x,ct.y,ct.z),nt.setXYZ(ft+2,ct.x,ct.y,ct.z);this.normalizeNormals(),nt.needsUpdate=!0}}normalizeNormals(){const _=this.attributes.normal;for(let tt=0,nt=_.count;tt<nt;tt++)_vector$7.fromBufferAttribute(_,tt),_vector$7.normalize(),_.setXYZ(tt,_vector$7.x,_vector$7.y,_vector$7.z)}toNonIndexed(){function _(ot,st){const lt=ot.array,ct=ot.itemSize,ut=ot.normalized,ft=new lt.constructor(st.length*ct);let pt=0,gt=0;for(let xt=0,yt=st.length;xt<yt;xt++){ot.isInterleavedBufferAttribute?pt=st[xt]*ot.data.stride+ot.offset:pt=st[xt]*ct;for(let mt=0;mt<ct;mt++)ft[gt++]=lt[pt++]}return new BufferAttribute(ft,ct,ut)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const tt=new BufferGeometry,nt=this.index.array,rt=this.attributes;for(const ot in rt){const st=rt[ot],lt=_(st,nt);tt.setAttribute(ot,lt)}const it=this.morphAttributes;for(const ot in it){const st=[],lt=it[ot];for(let ct=0,ut=lt.length;ct<ut;ct++){const ft=lt[ct],pt=_(ft,nt);st.push(pt)}tt.morphAttributes[ot]=st}tt.morphTargetsRelative=this.morphTargetsRelative;const at=this.groups;for(let ot=0,st=at.length;ot<st;ot++){const lt=at[ot];tt.addGroup(lt.start,lt.count,lt.materialIndex)}return tt}toJSON(){const _={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(_.uuid=this.uuid,_.type=this.type,this.name!==""&&(_.name=this.name),Object.keys(this.userData).length>0&&(_.userData=this.userData),this.parameters!==void 0){const st=this.parameters;for(const lt in st)st[lt]!==void 0&&(_[lt]=st[lt]);return _}_.data={attributes:{}};const tt=this.index;tt!==null&&(_.data.index={type:tt.array.constructor.name,array:Array.prototype.slice.call(tt.array)});const nt=this.attributes;for(const st in nt){const lt=nt[st];_.data.attributes[st]=lt.toJSON(_.data)}const rt={};let it=!1;for(const st in this.morphAttributes){const lt=this.morphAttributes[st],ct=[];for(let ut=0,ft=lt.length;ut<ft;ut++){const pt=lt[ut];ct.push(pt.toJSON(_.data))}ct.length>0&&(rt[st]=ct,it=!0)}it&&(_.data.morphAttributes=rt,_.data.morphTargetsRelative=this.morphTargetsRelative);const at=this.groups;at.length>0&&(_.data.groups=JSON.parse(JSON.stringify(at)));const ot=this.boundingSphere;return ot!==null&&(_.data.boundingSphere={center:ot.center.toArray(),radius:ot.radius}),_}clone(){return new this.constructor().copy(this)}copy(_){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const tt={};this.name=_.name;const nt=_.index;nt!==null&&this.setIndex(nt.clone(tt));const rt=_.attributes;for(const lt in rt){const ct=rt[lt];this.setAttribute(lt,ct.clone(tt))}const it=_.morphAttributes;for(const lt in it){const ct=[],ut=it[lt];for(let ft=0,pt=ut.length;ft<pt;ft++)ct.push(ut[ft].clone(tt));this.morphAttributes[lt]=ct}this.morphTargetsRelative=_.morphTargetsRelative;const at=_.groups;for(let lt=0,ct=at.length;lt<ct;lt++){const ut=at[lt];this.addGroup(ut.start,ut.count,ut.materialIndex)}const ot=_.boundingBox;ot!==null&&(this.boundingBox=ot.clone());const st=_.boundingSphere;return st!==null&&(this.boundingSphere=st.clone()),this.drawRange.start=_.drawRange.start,this.drawRange.count=_.drawRange.count,this.userData=_.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$5=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(_=new BufferGeometry,tt=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=_,this.material=tt,this.updateMorphTargets()}copy(_,tt){return super.copy(_,tt),_.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=_.morphTargetInfluences.slice()),_.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},_.morphTargetDictionary)),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}updateMorphTargets(){const tt=this.geometry.morphAttributes,nt=Object.keys(tt);if(nt.length>0){const rt=tt[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,at=rt.length;it<at;it++){const ot=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ot]=it}}}}getVertexPosition(_,tt){const nt=this.geometry,rt=nt.attributes.position,it=nt.morphAttributes.position,at=nt.morphTargetsRelative;tt.fromBufferAttribute(rt,_);const ot=this.morphTargetInfluences;if(it&&ot){_morphA.set(0,0,0);for(let st=0,lt=it.length;st<lt;st++){const ct=ot[st],ut=it[st];ct!==0&&(_tempA.fromBufferAttribute(ut,_),at?_morphA.addScaledVector(_tempA,ct):_morphA.addScaledVector(_tempA.sub(tt),ct))}tt.add(_morphA)}return tt}raycast(_,tt){const nt=this.geometry,rt=this.material,it=this.matrixWorld;rt!==void 0&&(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere$5.copy(nt.boundingSphere),_sphere$5.applyMatrix4(it),_ray$3.copy(_.ray).recast(_.near),!(_sphere$5.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$5,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(_.far-_.near)**2))&&(_inverseMatrix$3.copy(it).invert(),_ray$3.copy(_.ray).applyMatrix4(_inverseMatrix$3),!(nt.boundingBox!==null&&_ray$3.intersectsBox(nt.boundingBox)===!1)&&this._computeIntersections(_,tt,_ray$3)))}_computeIntersections(_,tt,nt){let rt;const it=this.geometry,at=this.material,ot=it.index,st=it.attributes.position,lt=it.attributes.uv,ct=it.attributes.uv1,ut=it.attributes.normal,ft=it.groups,pt=it.drawRange;if(ot!==null)if(Array.isArray(at))for(let gt=0,xt=ft.length;gt<xt;gt++){const yt=ft[gt],mt=at[yt.materialIndex],At=Math.max(yt.start,pt.start),vt=Math.min(ot.count,Math.min(yt.start+yt.count,pt.start+pt.count));for(let Et=At,Ct=vt;Et<Ct;Et+=3){const Tt=ot.getX(Et),bt=ot.getX(Et+1),It=ot.getX(Et+2);rt=checkGeometryIntersection(this,mt,_,nt,lt,ct,ut,Tt,bt,It),rt&&(rt.faceIndex=Math.floor(Et/3),rt.face.materialIndex=yt.materialIndex,tt.push(rt))}}else{const gt=Math.max(0,pt.start),xt=Math.min(ot.count,pt.start+pt.count);for(let yt=gt,mt=xt;yt<mt;yt+=3){const At=ot.getX(yt),vt=ot.getX(yt+1),Et=ot.getX(yt+2);rt=checkGeometryIntersection(this,at,_,nt,lt,ct,ut,At,vt,Et),rt&&(rt.faceIndex=Math.floor(yt/3),tt.push(rt))}}else if(st!==void 0)if(Array.isArray(at))for(let gt=0,xt=ft.length;gt<xt;gt++){const yt=ft[gt],mt=at[yt.materialIndex],At=Math.max(yt.start,pt.start),vt=Math.min(st.count,Math.min(yt.start+yt.count,pt.start+pt.count));for(let Et=At,Ct=vt;Et<Ct;Et+=3){const Tt=Et,bt=Et+1,It=Et+2;rt=checkGeometryIntersection(this,mt,_,nt,lt,ct,ut,Tt,bt,It),rt&&(rt.faceIndex=Math.floor(Et/3),rt.face.materialIndex=yt.materialIndex,tt.push(rt))}}else{const gt=Math.max(0,pt.start),xt=Math.min(st.count,pt.start+pt.count);for(let yt=gt,mt=xt;yt<mt;yt+=3){const At=yt,vt=yt+1,Et=yt+2;rt=checkGeometryIntersection(this,at,_,nt,lt,ct,ut,At,vt,Et),rt&&(rt.faceIndex=Math.floor(yt/3),tt.push(rt))}}}}function checkIntersection(_e,_,tt,nt,rt,it,at,ot){let st;if(_.side===BackSide?st=nt.intersectTriangle(at,it,rt,!0,ot):st=nt.intersectTriangle(rt,it,at,_.side===FrontSide,ot),st===null)return null;_intersectionPointWorld.copy(ot),_intersectionPointWorld.applyMatrix4(_e.matrixWorld);const lt=tt.ray.origin.distanceTo(_intersectionPointWorld);return lt<tt.near||lt>tt.far?null:{distance:lt,point:_intersectionPointWorld.clone(),object:_e}}function checkGeometryIntersection(_e,_,tt,nt,rt,it,at,ot,st,lt){_e.getVertexPosition(ot,_vA$1),_e.getVertexPosition(st,_vB$1),_e.getVertexPosition(lt,_vC$1);const ct=checkIntersection(_e,_,tt,nt,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(ct){rt&&(_uvA$1.fromBufferAttribute(rt,ot),_uvB$1.fromBufferAttribute(rt,st),_uvC$1.fromBufferAttribute(rt,lt),ct.uv=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2)),it&&(_uvA$1.fromBufferAttribute(it,ot),_uvB$1.fromBufferAttribute(it,st),_uvC$1.fromBufferAttribute(it,lt),ct.uv1=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_uvA$1,_uvB$1,_uvC$1,new Vector2),ct.uv2=ct.uv1),at&&(_normalA.fromBufferAttribute(at,ot),_normalB.fromBufferAttribute(at,st),_normalC.fromBufferAttribute(at,lt),ct.normal=Triangle.getInterpolation(_intersectionPoint,_vA$1,_vB$1,_vC$1,_normalA,_normalB,_normalC,new Vector3),ct.normal.dot(nt.direction)>0&&ct.normal.multiplyScalar(-1));const ut={a:ot,b:st,c:lt,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,ut.normal),ct.face=ut}return ct}class BoxGeometry extends BufferGeometry{constructor(_=1,tt=1,nt=1,rt=1,it=1,at=1){super(),this.type="BoxGeometry",this.parameters={width:_,height:tt,depth:nt,widthSegments:rt,heightSegments:it,depthSegments:at};const ot=this;rt=Math.floor(rt),it=Math.floor(it),at=Math.floor(at);const st=[],lt=[],ct=[],ut=[];let ft=0,pt=0;gt("z","y","x",-1,-1,nt,tt,_,at,it,0),gt("z","y","x",1,-1,nt,tt,-_,at,it,1),gt("x","z","y",1,1,_,nt,tt,rt,at,2),gt("x","z","y",1,-1,_,nt,-tt,rt,at,3),gt("x","y","z",1,-1,_,tt,nt,rt,it,4),gt("x","y","z",-1,-1,_,tt,-nt,rt,it,5),this.setIndex(st),this.setAttribute("position",new Float32BufferAttribute(lt,3)),this.setAttribute("normal",new Float32BufferAttribute(ct,3)),this.setAttribute("uv",new Float32BufferAttribute(ut,2));function gt(xt,yt,mt,At,vt,Et,Ct,Tt,bt,It,wt){const Rt=Et/bt,Ft=Ct/It,Ut=Et/2,Gt=Ct/2,Ht=Tt/2,jt=bt+1,Xt=It+1;let Jt=0,Dt=0;const zt=new Vector3;for(let $t=0;$t<Xt;$t++){const Lt=$t*Ft-Gt;for(let Vt=0;Vt<jt;Vt++){const tn=Vt*Rt-Ut;zt[xt]=tn*At,zt[yt]=Lt*vt,zt[mt]=Ht,lt.push(zt.x,zt.y,zt.z),zt[xt]=0,zt[yt]=0,zt[mt]=Tt>0?1:-1,ct.push(zt.x,zt.y,zt.z),ut.push(Vt/bt),ut.push(1-$t/It),Jt+=1}}for(let $t=0;$t<It;$t++)for(let Lt=0;Lt<bt;Lt++){const Vt=ft+Lt+jt*$t,tn=ft+Lt+jt*($t+1),an=ft+(Lt+1)+jt*($t+1),on=ft+(Lt+1)+jt*$t;st.push(Vt,tn,on),st.push(tn,an,on),Dt+=6}ot.addGroup(pt,Dt,wt),pt+=Dt,ft+=Jt}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new BoxGeometry(_.width,_.height,_.depth,_.widthSegments,_.heightSegments,_.depthSegments)}}function cloneUniforms(_e){const _={};for(const tt in _e){_[tt]={};for(const nt in _e[tt]){const rt=_e[tt][nt];rt&&(rt.isColor||rt.isMatrix3||rt.isMatrix4||rt.isVector2||rt.isVector3||rt.isVector4||rt.isTexture||rt.isQuaternion)?rt.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),_[tt][nt]=null):_[tt][nt]=rt.clone():Array.isArray(rt)?_[tt][nt]=rt.slice():_[tt][nt]=rt}}return _}function mergeUniforms(_e){const _={};for(let tt=0;tt<_e.length;tt++){const nt=cloneUniforms(_e[tt]);for(const rt in nt)_[rt]=nt[rt]}return _}function cloneUniformsGroups(_e){const _=[];for(let tt=0;tt<_e.length;tt++)_.push(_e[tt].clone());return _}function getUnlitUniformColorSpace(_e){return _e.getRenderTarget()===null?_e.outputColorSpace:LinearSRGBColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(_){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,_!==void 0&&this.setValues(_)}copy(_){return super.copy(_),this.fragmentShader=_.fragmentShader,this.vertexShader=_.vertexShader,this.uniforms=cloneUniforms(_.uniforms),this.uniformsGroups=cloneUniformsGroups(_.uniformsGroups),this.defines=Object.assign({},_.defines),this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.fog=_.fog,this.lights=_.lights,this.clipping=_.clipping,this.extensions=Object.assign({},_.extensions),this.glslVersion=_.glslVersion,this}toJSON(_){const tt=super.toJSON(_);tt.glslVersion=this.glslVersion,tt.uniforms={};for(const rt in this.uniforms){const at=this.uniforms[rt].value;at&&at.isTexture?tt.uniforms[rt]={type:"t",value:at.toJSON(_).uuid}:at&&at.isColor?tt.uniforms[rt]={type:"c",value:at.getHex()}:at&&at.isVector2?tt.uniforms[rt]={type:"v2",value:at.toArray()}:at&&at.isVector3?tt.uniforms[rt]={type:"v3",value:at.toArray()}:at&&at.isVector4?tt.uniforms[rt]={type:"v4",value:at.toArray()}:at&&at.isMatrix3?tt.uniforms[rt]={type:"m3",value:at.toArray()}:at&&at.isMatrix4?tt.uniforms[rt]={type:"m4",value:at.toArray()}:tt.uniforms[rt]={value:at}}Object.keys(this.defines).length>0&&(tt.defines=this.defines),tt.vertexShader=this.vertexShader,tt.fragmentShader=this.fragmentShader,tt.lights=this.lights,tt.clipping=this.clipping;const nt={};for(const rt in this.extensions)this.extensions[rt]===!0&&(nt[rt]=!0);return Object.keys(nt).length>0&&(tt.extensions=nt),tt}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(_,tt){return super.copy(_,tt),this.matrixWorldInverse.copy(_.matrixWorldInverse),this.projectionMatrix.copy(_.projectionMatrix),this.projectionMatrixInverse.copy(_.projectionMatrixInverse),this.coordinateSystem=_.coordinateSystem,this}getWorldDirection(_){this.updateWorldMatrix(!0,!1);const tt=this.matrixWorld.elements;return _.set(-tt[8],-tt[9],-tt[10]).normalize()}updateMatrixWorld(_){super.updateMatrixWorld(_),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(_,tt){super.updateWorldMatrix(_,tt),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class PerspectiveCamera extends Camera{constructor(_=50,tt=1,nt=.1,rt=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=_,this.zoom=1,this.near=nt,this.far=rt,this.focus=10,this.aspect=tt,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(_,tt){return super.copy(_,tt),this.fov=_.fov,this.zoom=_.zoom,this.near=_.near,this.far=_.far,this.focus=_.focus,this.aspect=_.aspect,this.view=_.view===null?null:Object.assign({},_.view),this.filmGauge=_.filmGauge,this.filmOffset=_.filmOffset,this}setFocalLength(_){const tt=.5*this.getFilmHeight()/_;this.fov=RAD2DEG*2*Math.atan(tt),this.updateProjectionMatrix()}getFocalLength(){const _=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/_}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(_,tt,nt,rt,it,at){this.aspect=_/tt,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=tt,this.view.offsetX=nt,this.view.offsetY=rt,this.view.width=it,this.view.height=at,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=this.near;let tt=_*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,nt=2*tt,rt=this.aspect*nt,it=-.5*rt;const at=this.view;if(this.view!==null&&this.view.enabled){const st=at.fullWidth,lt=at.fullHeight;it+=at.offsetX*rt/st,tt-=at.offsetY*nt/lt,rt*=at.width/st,nt*=at.height/lt}const ot=this.filmOffset;ot!==0&&(it+=_*ot/this.getFilmWidth()),this.projectionMatrix.makePerspective(it,it+rt,tt,tt-nt,_,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const tt=super.toJSON(_);return tt.object.fov=this.fov,tt.object.zoom=this.zoom,tt.object.near=this.near,tt.object.far=this.far,tt.object.focus=this.focus,tt.object.aspect=this.aspect,this.view!==null&&(tt.object.view=Object.assign({},this.view)),tt.object.filmGauge=this.filmGauge,tt.object.filmOffset=this.filmOffset,tt}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(_,tt,nt){super(),this.type="CubeCamera",this.renderTarget=nt,this.coordinateSystem=null;const rt=new PerspectiveCamera(fov,aspect,_,tt);rt.layers=this.layers,this.add(rt);const it=new PerspectiveCamera(fov,aspect,_,tt);it.layers=this.layers,this.add(it);const at=new PerspectiveCamera(fov,aspect,_,tt);at.layers=this.layers,this.add(at);const ot=new PerspectiveCamera(fov,aspect,_,tt);ot.layers=this.layers,this.add(ot);const st=new PerspectiveCamera(fov,aspect,_,tt);st.layers=this.layers,this.add(st);const lt=new PerspectiveCamera(fov,aspect,_,tt);lt.layers=this.layers,this.add(lt)}updateCoordinateSystem(){const _=this.coordinateSystem,tt=this.children.concat(),[nt,rt,it,at,ot,st]=tt;for(const lt of tt)this.remove(lt);if(_===WebGLCoordinateSystem)nt.up.set(0,1,0),nt.lookAt(1,0,0),rt.up.set(0,1,0),rt.lookAt(-1,0,0),it.up.set(0,0,-1),it.lookAt(0,1,0),at.up.set(0,0,1),at.lookAt(0,-1,0),ot.up.set(0,1,0),ot.lookAt(0,0,1),st.up.set(0,1,0),st.lookAt(0,0,-1);else if(_===WebGPUCoordinateSystem)nt.up.set(0,-1,0),nt.lookAt(-1,0,0),rt.up.set(0,-1,0),rt.lookAt(1,0,0),it.up.set(0,0,1),it.lookAt(0,1,0),at.up.set(0,0,-1),at.lookAt(0,-1,0),ot.up.set(0,-1,0),ot.lookAt(0,0,1),st.up.set(0,-1,0),st.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+_);for(const lt of tt)this.add(lt),lt.updateMatrixWorld()}update(_,tt){this.parent===null&&this.updateMatrixWorld();const nt=this.renderTarget;this.coordinateSystem!==_.coordinateSystem&&(this.coordinateSystem=_.coordinateSystem,this.updateCoordinateSystem());const[rt,it,at,ot,st,lt]=this.children,ct=_.getRenderTarget(),ut=_.xr.enabled;_.xr.enabled=!1;const ft=nt.texture.generateMipmaps;nt.texture.generateMipmaps=!1,_.setRenderTarget(nt,0),_.render(tt,rt),_.setRenderTarget(nt,1),_.render(tt,it),_.setRenderTarget(nt,2),_.render(tt,at),_.setRenderTarget(nt,3),_.render(tt,ot),_.setRenderTarget(nt,4),_.render(tt,st),nt.texture.generateMipmaps=ft,_.setRenderTarget(nt,5),_.render(tt,lt),_.setRenderTarget(ct),_.xr.enabled=ut,nt.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(_,tt,nt,rt,it,at,ot,st,lt,ct){_=_!==void 0?_:[],tt=tt!==void 0?tt:CubeReflectionMapping,super(_,tt,nt,rt,it,at,ot,st,lt,ct),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(_){this.image=_}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(_=1,tt={}){super(_,_,tt),this.isWebGLCubeRenderTarget=!0;const nt={width:_,height:_,depth:1},rt=[nt,nt,nt,nt,nt,nt];tt.encoding!==void 0&&(warnOnce("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),tt.colorSpace=tt.encoding===sRGBEncoding?SRGBColorSpace:NoColorSpace),this.texture=new CubeTexture(rt,tt.mapping,tt.wrapS,tt.wrapT,tt.magFilter,tt.minFilter,tt.format,tt.type,tt.anisotropy,tt.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=tt.generateMipmaps!==void 0?tt.generateMipmaps:!1,this.texture.minFilter=tt.minFilter!==void 0?tt.minFilter:LinearFilter}fromEquirectangularTexture(_,tt){this.texture.type=tt.type,this.texture.colorSpace=tt.colorSpace,this.texture.generateMipmaps=tt.generateMipmaps,this.texture.minFilter=tt.minFilter,this.texture.magFilter=tt.magFilter;const nt={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},rt=new BoxGeometry(5,5,5),it=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(nt.uniforms),vertexShader:nt.vertexShader,fragmentShader:nt.fragmentShader,side:BackSide,blending:NoBlending});it.uniforms.tEquirect.value=tt;const at=new Mesh(rt,it),ot=tt.minFilter;return tt.minFilter===LinearMipmapLinearFilter&&(tt.minFilter=LinearFilter),new CubeCamera(1,10,this).update(_,at),tt.minFilter=ot,at.geometry.dispose(),at.material.dispose(),this}clear(_,tt,nt,rt){const it=_.getRenderTarget();for(let at=0;at<6;at++)_.setRenderTarget(this,at),_.clear(tt,nt,rt);_.setRenderTarget(it)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(_=new Vector3(1,0,0),tt=0){this.isPlane=!0,this.normal=_,this.constant=tt}set(_,tt){return this.normal.copy(_),this.constant=tt,this}setComponents(_,tt,nt,rt){return this.normal.set(_,tt,nt),this.constant=rt,this}setFromNormalAndCoplanarPoint(_,tt){return this.normal.copy(_),this.constant=-tt.dot(this.normal),this}setFromCoplanarPoints(_,tt,nt){const rt=_vector1.subVectors(nt,tt).cross(_vector2.subVectors(_,tt)).normalize();return this.setFromNormalAndCoplanarPoint(rt,_),this}copy(_){return this.normal.copy(_.normal),this.constant=_.constant,this}normalize(){const _=1/this.normal.length();return this.normal.multiplyScalar(_),this.constant*=_,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(_){return this.normal.dot(_)+this.constant}distanceToSphere(_){return this.distanceToPoint(_.center)-_.radius}projectPoint(_,tt){return tt.copy(_).addScaledVector(this.normal,-this.distanceToPoint(_))}intersectLine(_,tt){const nt=_.delta(_vector1),rt=this.normal.dot(nt);if(rt===0)return this.distanceToPoint(_.start)===0?tt.copy(_.start):null;const it=-(_.start.dot(this.normal)+this.constant)/rt;return it<0||it>1?null:tt.copy(_.start).addScaledVector(nt,it)}intersectsLine(_){const tt=this.distanceToPoint(_.start),nt=this.distanceToPoint(_.end);return tt<0&&nt>0||nt<0&&tt>0}intersectsBox(_){return _.intersectsPlane(this)}intersectsSphere(_){return _.intersectsPlane(this)}coplanarPoint(_){return _.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(_,tt){const nt=tt||_normalMatrix.getNormalMatrix(_),rt=this.coplanarPoint(_vector1).applyMatrix4(_),it=this.normal.applyMatrix3(nt).normalize();return this.constant=-rt.dot(it),this}translate(_){return this.constant-=_.dot(this.normal),this}equals(_){return _.normal.equals(this.normal)&&_.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$4=new Sphere,_vector$6=new Vector3;class Frustum{constructor(_=new Plane,tt=new Plane,nt=new Plane,rt=new Plane,it=new Plane,at=new Plane){this.planes=[_,tt,nt,rt,it,at]}set(_,tt,nt,rt,it,at){const ot=this.planes;return ot[0].copy(_),ot[1].copy(tt),ot[2].copy(nt),ot[3].copy(rt),ot[4].copy(it),ot[5].copy(at),this}copy(_){const tt=this.planes;for(let nt=0;nt<6;nt++)tt[nt].copy(_.planes[nt]);return this}setFromProjectionMatrix(_,tt=WebGLCoordinateSystem){const nt=this.planes,rt=_.elements,it=rt[0],at=rt[1],ot=rt[2],st=rt[3],lt=rt[4],ct=rt[5],ut=rt[6],ft=rt[7],pt=rt[8],gt=rt[9],xt=rt[10],yt=rt[11],mt=rt[12],At=rt[13],vt=rt[14],Et=rt[15];if(nt[0].setComponents(st-it,ft-lt,yt-pt,Et-mt).normalize(),nt[1].setComponents(st+it,ft+lt,yt+pt,Et+mt).normalize(),nt[2].setComponents(st+at,ft+ct,yt+gt,Et+At).normalize(),nt[3].setComponents(st-at,ft-ct,yt-gt,Et-At).normalize(),nt[4].setComponents(st-ot,ft-ut,yt-xt,Et-vt).normalize(),tt===WebGLCoordinateSystem)nt[5].setComponents(st+ot,ft+ut,yt+xt,Et+vt).normalize();else if(tt===WebGPUCoordinateSystem)nt[5].setComponents(ot,ut,xt,vt).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+tt);return this}intersectsObject(_){if(_.boundingSphere!==void 0)_.boundingSphere===null&&_.computeBoundingSphere(),_sphere$4.copy(_.boundingSphere).applyMatrix4(_.matrixWorld);else{const tt=_.geometry;tt.boundingSphere===null&&tt.computeBoundingSphere(),_sphere$4.copy(tt.boundingSphere).applyMatrix4(_.matrixWorld)}return this.intersectsSphere(_sphere$4)}intersectsSprite(_){return _sphere$4.center.set(0,0,0),_sphere$4.radius=.7071067811865476,_sphere$4.applyMatrix4(_.matrixWorld),this.intersectsSphere(_sphere$4)}intersectsSphere(_){const tt=this.planes,nt=_.center,rt=-_.radius;for(let it=0;it<6;it++)if(tt[it].distanceToPoint(nt)<rt)return!1;return!0}intersectsBox(_){const tt=this.planes;for(let nt=0;nt<6;nt++){const rt=tt[nt];if(_vector$6.x=rt.normal.x>0?_.max.x:_.min.x,_vector$6.y=rt.normal.y>0?_.max.y:_.min.y,_vector$6.z=rt.normal.z>0?_.max.z:_.min.z,rt.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(_){const tt=this.planes;for(let nt=0;nt<6;nt++)if(tt[nt].distanceToPoint(_)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function WebGLAnimation(){let _e=null,_=!1,tt=null,nt=null;function rt(it,at){tt(it,at),nt=_e.requestAnimationFrame(rt)}return{start:function(){_!==!0&&tt!==null&&(nt=_e.requestAnimationFrame(rt),_=!0)},stop:function(){_e.cancelAnimationFrame(nt),_=!1},setAnimationLoop:function(it){tt=it},setContext:function(it){_e=it}}}function WebGLAttributes(_e,_){const tt=_.isWebGL2,nt=new WeakMap;function rt(lt,ct){const ut=lt.array,ft=lt.usage,pt=_e.createBuffer();_e.bindBuffer(ct,pt),_e.bufferData(ct,ut,ft),lt.onUploadCallback();let gt;if(ut instanceof Float32Array)gt=_e.FLOAT;else if(ut instanceof Uint16Array)if(lt.isFloat16BufferAttribute)if(tt)gt=_e.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else gt=_e.UNSIGNED_SHORT;else if(ut instanceof Int16Array)gt=_e.SHORT;else if(ut instanceof Uint32Array)gt=_e.UNSIGNED_INT;else if(ut instanceof Int32Array)gt=_e.INT;else if(ut instanceof Int8Array)gt=_e.BYTE;else if(ut instanceof Uint8Array)gt=_e.UNSIGNED_BYTE;else if(ut instanceof Uint8ClampedArray)gt=_e.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+ut);return{buffer:pt,type:gt,bytesPerElement:ut.BYTES_PER_ELEMENT,version:lt.version}}function it(lt,ct,ut){const ft=ct.array,pt=ct.updateRange;_e.bindBuffer(ut,lt),pt.count===-1?_e.bufferSubData(ut,0,ft):(tt?_e.bufferSubData(ut,pt.offset*ft.BYTES_PER_ELEMENT,ft,pt.offset,pt.count):_e.bufferSubData(ut,pt.offset*ft.BYTES_PER_ELEMENT,ft.subarray(pt.offset,pt.offset+pt.count)),pt.count=-1),ct.onUploadCallback()}function at(lt){return lt.isInterleavedBufferAttribute&&(lt=lt.data),nt.get(lt)}function ot(lt){lt.isInterleavedBufferAttribute&&(lt=lt.data);const ct=nt.get(lt);ct&&(_e.deleteBuffer(ct.buffer),nt.delete(lt))}function st(lt,ct){if(lt.isGLBufferAttribute){const ft=nt.get(lt);(!ft||ft.version<lt.version)&&nt.set(lt,{buffer:lt.buffer,type:lt.type,bytesPerElement:lt.elementSize,version:lt.version});return}lt.isInterleavedBufferAttribute&&(lt=lt.data);const ut=nt.get(lt);ut===void 0?nt.set(lt,rt(lt,ct)):ut.version<lt.version&&(it(ut.buffer,lt,ct),ut.version=lt.version)}return{get:at,remove:ot,update:st}}class PlaneGeometry extends BufferGeometry{constructor(_=1,tt=1,nt=1,rt=1){super(),this.type="PlaneGeometry",this.parameters={width:_,height:tt,widthSegments:nt,heightSegments:rt};const it=_/2,at=tt/2,ot=Math.floor(nt),st=Math.floor(rt),lt=ot+1,ct=st+1,ut=_/ot,ft=tt/st,pt=[],gt=[],xt=[],yt=[];for(let mt=0;mt<ct;mt++){const At=mt*ft-at;for(let vt=0;vt<lt;vt++){const Et=vt*ut-it;gt.push(Et,-At,0),xt.push(0,0,1),yt.push(vt/ot),yt.push(1-mt/st)}}for(let mt=0;mt<st;mt++)for(let At=0;At<ot;At++){const vt=At+lt*mt,Et=At+lt*(mt+1),Ct=At+1+lt*(mt+1),Tt=At+1+lt*mt;pt.push(vt,Et,Tt),pt.push(Et,Ct,Tt)}this.setIndex(pt),this.setAttribute("position",new Float32BufferAttribute(gt,3)),this.setAttribute("normal",new Float32BufferAttribute(xt,3)),this.setAttribute("uv",new Float32BufferAttribute(yt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PlaneGeometry(_.width,_.height,_.widthSegments,_.heightSegments)}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_fragment=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color$1(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},specular:{value:new Color$1(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color$1(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color$1(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color$1(0)},specularColor:{value:new Color$1(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0};function WebGLBackground(_e,_,tt,nt,rt,it,at){const ot=new Color$1(0);let st=it===!0?0:1,lt,ct,ut=null,ft=0,pt=null;function gt(yt,mt){let At=!1,vt=mt.isScene===!0?mt.background:null;vt&&vt.isTexture&&(vt=(mt.backgroundBlurriness>0?tt:_).get(vt)),vt===null?xt(ot,st):vt&&vt.isColor&&(xt(vt,1),At=!0);const Et=_e.xr.getEnvironmentBlendMode();Et==="additive"?nt.buffers.color.setClear(0,0,0,1,at):Et==="alpha-blend"&&nt.buffers.color.setClear(0,0,0,0,at),(_e.autoClear||At)&&_e.clear(_e.autoClearColor,_e.autoClearDepth,_e.autoClearStencil),vt&&(vt.isCubeTexture||vt.mapping===CubeUVReflectionMapping)?(ct===void 0&&(ct=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),ct.geometry.deleteAttribute("normal"),ct.geometry.deleteAttribute("uv"),ct.onBeforeRender=function(Ct,Tt,bt){this.matrixWorld.copyPosition(bt.matrixWorld)},Object.defineProperty(ct.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),rt.update(ct)),ct.material.uniforms.envMap.value=vt,ct.material.uniforms.flipEnvMap.value=vt.isCubeTexture&&vt.isRenderTargetTexture===!1?-1:1,ct.material.uniforms.backgroundBlurriness.value=mt.backgroundBlurriness,ct.material.uniforms.backgroundIntensity.value=mt.backgroundIntensity,ct.material.toneMapped=vt.colorSpace!==SRGBColorSpace,(ut!==vt||ft!==vt.version||pt!==_e.toneMapping)&&(ct.material.needsUpdate=!0,ut=vt,ft=vt.version,pt=_e.toneMapping),ct.layers.enableAll(),yt.unshift(ct,ct.geometry,ct.material,0,0,null)):vt&&vt.isTexture&&(lt===void 0&&(lt=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),lt.geometry.deleteAttribute("normal"),Object.defineProperty(lt.material,"map",{get:function(){return this.uniforms.t2D.value}}),rt.update(lt)),lt.material.uniforms.t2D.value=vt,lt.material.uniforms.backgroundIntensity.value=mt.backgroundIntensity,lt.material.toneMapped=vt.colorSpace!==SRGBColorSpace,vt.matrixAutoUpdate===!0&&vt.updateMatrix(),lt.material.uniforms.uvTransform.value.copy(vt.matrix),(ut!==vt||ft!==vt.version||pt!==_e.toneMapping)&&(lt.material.needsUpdate=!0,ut=vt,ft=vt.version,pt=_e.toneMapping),lt.layers.enableAll(),yt.unshift(lt,lt.geometry,lt.material,0,0,null))}function xt(yt,mt){yt.getRGB(_rgb,getUnlitUniformColorSpace(_e)),nt.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,mt,at)}return{getClearColor:function(){return ot},setClearColor:function(yt,mt=1){ot.set(yt),st=mt,xt(ot,st)},getClearAlpha:function(){return st},setClearAlpha:function(yt){st=yt,xt(ot,st)},render:gt}}function WebGLBindingStates(_e,_,tt,nt){const rt=_e.getParameter(_e.MAX_VERTEX_ATTRIBS),it=nt.isWebGL2?null:_.get("OES_vertex_array_object"),at=nt.isWebGL2||it!==null,ot={},st=yt(null);let lt=st,ct=!1;function ut(Ht,jt,Xt,Jt,Dt){let zt=!1;if(at){const $t=xt(Jt,Xt,jt);lt!==$t&&(lt=$t,pt(lt.object)),zt=mt(Ht,Jt,Xt,Dt),zt&&At(Ht,Jt,Xt,Dt)}else{const $t=jt.wireframe===!0;(lt.geometry!==Jt.id||lt.program!==Xt.id||lt.wireframe!==$t)&&(lt.geometry=Jt.id,lt.program=Xt.id,lt.wireframe=$t,zt=!0)}Dt!==null&&tt.update(Dt,_e.ELEMENT_ARRAY_BUFFER),(zt||ct)&&(ct=!1,It(Ht,jt,Xt,Jt),Dt!==null&&_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,tt.get(Dt).buffer))}function ft(){return nt.isWebGL2?_e.createVertexArray():it.createVertexArrayOES()}function pt(Ht){return nt.isWebGL2?_e.bindVertexArray(Ht):it.bindVertexArrayOES(Ht)}function gt(Ht){return nt.isWebGL2?_e.deleteVertexArray(Ht):it.deleteVertexArrayOES(Ht)}function xt(Ht,jt,Xt){const Jt=Xt.wireframe===!0;let Dt=ot[Ht.id];Dt===void 0&&(Dt={},ot[Ht.id]=Dt);let zt=Dt[jt.id];zt===void 0&&(zt={},Dt[jt.id]=zt);let $t=zt[Jt];return $t===void 0&&($t=yt(ft()),zt[Jt]=$t),$t}function yt(Ht){const jt=[],Xt=[],Jt=[];for(let Dt=0;Dt<rt;Dt++)jt[Dt]=0,Xt[Dt]=0,Jt[Dt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:jt,enabledAttributes:Xt,attributeDivisors:Jt,object:Ht,attributes:{},index:null}}function mt(Ht,jt,Xt,Jt){const Dt=lt.attributes,zt=jt.attributes;let $t=0;const Lt=Xt.getAttributes();for(const Vt in Lt)if(Lt[Vt].location>=0){const an=Dt[Vt];let on=zt[Vt];if(on===void 0&&(Vt==="instanceMatrix"&&Ht.instanceMatrix&&(on=Ht.instanceMatrix),Vt==="instanceColor"&&Ht.instanceColor&&(on=Ht.instanceColor)),an===void 0||an.attribute!==on||on&&an.data!==on.data)return!0;$t++}return lt.attributesNum!==$t||lt.index!==Jt}function At(Ht,jt,Xt,Jt){const Dt={},zt=jt.attributes;let $t=0;const Lt=Xt.getAttributes();for(const Vt in Lt)if(Lt[Vt].location>=0){let an=zt[Vt];an===void 0&&(Vt==="instanceMatrix"&&Ht.instanceMatrix&&(an=Ht.instanceMatrix),Vt==="instanceColor"&&Ht.instanceColor&&(an=Ht.instanceColor));const on={};on.attribute=an,an&&an.data&&(on.data=an.data),Dt[Vt]=on,$t++}lt.attributes=Dt,lt.attributesNum=$t,lt.index=Jt}function vt(){const Ht=lt.newAttributes;for(let jt=0,Xt=Ht.length;jt<Xt;jt++)Ht[jt]=0}function Et(Ht){Ct(Ht,0)}function Ct(Ht,jt){const Xt=lt.newAttributes,Jt=lt.enabledAttributes,Dt=lt.attributeDivisors;Xt[Ht]=1,Jt[Ht]===0&&(_e.enableVertexAttribArray(Ht),Jt[Ht]=1),Dt[Ht]!==jt&&((nt.isWebGL2?_e:_.get("ANGLE_instanced_arrays"))[nt.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ht,jt),Dt[Ht]=jt)}function Tt(){const Ht=lt.newAttributes,jt=lt.enabledAttributes;for(let Xt=0,Jt=jt.length;Xt<Jt;Xt++)jt[Xt]!==Ht[Xt]&&(_e.disableVertexAttribArray(Xt),jt[Xt]=0)}function bt(Ht,jt,Xt,Jt,Dt,zt,$t){$t===!0?_e.vertexAttribIPointer(Ht,jt,Xt,Dt,zt):_e.vertexAttribPointer(Ht,jt,Xt,Jt,Dt,zt)}function It(Ht,jt,Xt,Jt){if(nt.isWebGL2===!1&&(Ht.isInstancedMesh||Jt.isInstancedBufferGeometry)&&_.get("ANGLE_instanced_arrays")===null)return;vt();const Dt=Jt.attributes,zt=Xt.getAttributes(),$t=jt.defaultAttributeValues;for(const Lt in zt){const Vt=zt[Lt];if(Vt.location>=0){let tn=Dt[Lt];if(tn===void 0&&(Lt==="instanceMatrix"&&Ht.instanceMatrix&&(tn=Ht.instanceMatrix),Lt==="instanceColor"&&Ht.instanceColor&&(tn=Ht.instanceColor)),tn!==void 0){const an=tn.normalized,on=tn.itemSize,sn=tt.get(tn);if(sn===void 0)continue;const ln=sn.buffer,cn=sn.type,In=sn.bytesPerElement,zn=nt.isWebGL2===!0&&(cn===_e.INT||cn===_e.UNSIGNED_INT||tn.gpuType===IntType);if(tn.isInterleavedBufferAttribute){const yn=tn.data,Wt=yn.stride,_n=tn.offset;if(yn.isInstancedInterleavedBuffer){for(let gn=0;gn<Vt.locationSize;gn++)Ct(Vt.location+gn,yn.meshPerAttribute);Ht.isInstancedMesh!==!0&&Jt._maxInstanceCount===void 0&&(Jt._maxInstanceCount=yn.meshPerAttribute*yn.count)}else for(let gn=0;gn<Vt.locationSize;gn++)Et(Vt.location+gn);_e.bindBuffer(_e.ARRAY_BUFFER,ln);for(let gn=0;gn<Vt.locationSize;gn++)bt(Vt.location+gn,on/Vt.locationSize,cn,an,Wt*In,(_n+on/Vt.locationSize*gn)*In,zn)}else{if(tn.isInstancedBufferAttribute){for(let yn=0;yn<Vt.locationSize;yn++)Ct(Vt.location+yn,tn.meshPerAttribute);Ht.isInstancedMesh!==!0&&Jt._maxInstanceCount===void 0&&(Jt._maxInstanceCount=tn.meshPerAttribute*tn.count)}else for(let yn=0;yn<Vt.locationSize;yn++)Et(Vt.location+yn);_e.bindBuffer(_e.ARRAY_BUFFER,ln);for(let yn=0;yn<Vt.locationSize;yn++)bt(Vt.location+yn,on/Vt.locationSize,cn,an,on*In,on/Vt.locationSize*yn*In,zn)}}else if($t!==void 0){const an=$t[Lt];if(an!==void 0)switch(an.length){case 2:_e.vertexAttrib2fv(Vt.location,an);break;case 3:_e.vertexAttrib3fv(Vt.location,an);break;case 4:_e.vertexAttrib4fv(Vt.location,an);break;default:_e.vertexAttrib1fv(Vt.location,an)}}}}Tt()}function wt(){Ut();for(const Ht in ot){const jt=ot[Ht];for(const Xt in jt){const Jt=jt[Xt];for(const Dt in Jt)gt(Jt[Dt].object),delete Jt[Dt];delete jt[Xt]}delete ot[Ht]}}function Rt(Ht){if(ot[Ht.id]===void 0)return;const jt=ot[Ht.id];for(const Xt in jt){const Jt=jt[Xt];for(const Dt in Jt)gt(Jt[Dt].object),delete Jt[Dt];delete jt[Xt]}delete ot[Ht.id]}function Ft(Ht){for(const jt in ot){const Xt=ot[jt];if(Xt[Ht.id]===void 0)continue;const Jt=Xt[Ht.id];for(const Dt in Jt)gt(Jt[Dt].object),delete Jt[Dt];delete Xt[Ht.id]}}function Ut(){Gt(),ct=!0,lt!==st&&(lt=st,pt(lt.object))}function Gt(){st.geometry=null,st.program=null,st.wireframe=!1}return{setup:ut,reset:Ut,resetDefaultState:Gt,dispose:wt,releaseStatesOfGeometry:Rt,releaseStatesOfProgram:Ft,initAttributes:vt,enableAttribute:Et,disableUnusedAttributes:Tt}}function WebGLBufferRenderer(_e,_,tt,nt){const rt=nt.isWebGL2;let it;function at(lt){it=lt}function ot(lt,ct){_e.drawArrays(it,lt,ct),tt.update(ct,it,1)}function st(lt,ct,ut){if(ut===0)return;let ft,pt;if(rt)ft=_e,pt="drawArraysInstanced";else if(ft=_.get("ANGLE_instanced_arrays"),pt="drawArraysInstancedANGLE",ft===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}ft[pt](it,lt,ct,ut),tt.update(ct,it,ut)}this.setMode=at,this.render=ot,this.renderInstances=st}function WebGLCapabilities(_e,_,tt){let nt;function rt(){if(nt!==void 0)return nt;if(_.has("EXT_texture_filter_anisotropic")===!0){const bt=_.get("EXT_texture_filter_anisotropic");nt=_e.getParameter(bt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else nt=0;return nt}function it(bt){if(bt==="highp"){if(_e.getShaderPrecisionFormat(_e.VERTEX_SHADER,_e.HIGH_FLOAT).precision>0&&_e.getShaderPrecisionFormat(_e.FRAGMENT_SHADER,_e.HIGH_FLOAT).precision>0)return"highp";bt="mediump"}return bt==="mediump"&&_e.getShaderPrecisionFormat(_e.VERTEX_SHADER,_e.MEDIUM_FLOAT).precision>0&&_e.getShaderPrecisionFormat(_e.FRAGMENT_SHADER,_e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const at=typeof WebGL2RenderingContext<"u"&&_e.constructor.name==="WebGL2RenderingContext";let ot=tt.precision!==void 0?tt.precision:"highp";const st=it(ot);st!==ot&&(console.warn("THREE.WebGLRenderer:",ot,"not supported, using",st,"instead."),ot=st);const lt=at||_.has("WEBGL_draw_buffers"),ct=tt.logarithmicDepthBuffer===!0,ut=_e.getParameter(_e.MAX_TEXTURE_IMAGE_UNITS),ft=_e.getParameter(_e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),pt=_e.getParameter(_e.MAX_TEXTURE_SIZE),gt=_e.getParameter(_e.MAX_CUBE_MAP_TEXTURE_SIZE),xt=_e.getParameter(_e.MAX_VERTEX_ATTRIBS),yt=_e.getParameter(_e.MAX_VERTEX_UNIFORM_VECTORS),mt=_e.getParameter(_e.MAX_VARYING_VECTORS),At=_e.getParameter(_e.MAX_FRAGMENT_UNIFORM_VECTORS),vt=ft>0,Et=at||_.has("OES_texture_float"),Ct=vt&&Et,Tt=at?_e.getParameter(_e.MAX_SAMPLES):0;return{isWebGL2:at,drawBuffers:lt,getMaxAnisotropy:rt,getMaxPrecision:it,precision:ot,logarithmicDepthBuffer:ct,maxTextures:ut,maxVertexTextures:ft,maxTextureSize:pt,maxCubemapSize:gt,maxAttributes:xt,maxVertexUniforms:yt,maxVaryings:mt,maxFragmentUniforms:At,vertexTextures:vt,floatFragmentTextures:Et,floatVertexTextures:Ct,maxSamples:Tt}}function WebGLClipping(_e){const _=this;let tt=null,nt=0,rt=!1,it=!1;const at=new Plane,ot=new Matrix3,st={value:null,needsUpdate:!1};this.uniform=st,this.numPlanes=0,this.numIntersection=0,this.init=function(ut,ft){const pt=ut.length!==0||ft||nt!==0||rt;return rt=ft,nt=ut.length,pt},this.beginShadows=function(){it=!0,ct(null)},this.endShadows=function(){it=!1},this.setGlobalState=function(ut,ft){tt=ct(ut,ft,0)},this.setState=function(ut,ft,pt){const gt=ut.clippingPlanes,xt=ut.clipIntersection,yt=ut.clipShadows,mt=_e.get(ut);if(!rt||gt===null||gt.length===0||it&&!yt)it?ct(null):lt();else{const At=it?0:nt,vt=At*4;let Et=mt.clippingState||null;st.value=Et,Et=ct(gt,ft,vt,pt);for(let Ct=0;Ct!==vt;++Ct)Et[Ct]=tt[Ct];mt.clippingState=Et,this.numIntersection=xt?this.numPlanes:0,this.numPlanes+=At}};function lt(){st.value!==tt&&(st.value=tt,st.needsUpdate=nt>0),_.numPlanes=nt,_.numIntersection=0}function ct(ut,ft,pt,gt){const xt=ut!==null?ut.length:0;let yt=null;if(xt!==0){if(yt=st.value,gt!==!0||yt===null){const mt=pt+xt*4,At=ft.matrixWorldInverse;ot.getNormalMatrix(At),(yt===null||yt.length<mt)&&(yt=new Float32Array(mt));for(let vt=0,Et=pt;vt!==xt;++vt,Et+=4)at.copy(ut[vt]).applyMatrix4(At,ot),at.normal.toArray(yt,Et),yt[Et+3]=at.constant}st.value=yt,st.needsUpdate=!0}return _.numPlanes=xt,_.numIntersection=0,yt}}function WebGLCubeMaps(_e){let _=new WeakMap;function tt(at,ot){return ot===EquirectangularReflectionMapping?at.mapping=CubeReflectionMapping:ot===EquirectangularRefractionMapping&&(at.mapping=CubeRefractionMapping),at}function nt(at){if(at&&at.isTexture&&at.isRenderTargetTexture===!1){const ot=at.mapping;if(ot===EquirectangularReflectionMapping||ot===EquirectangularRefractionMapping)if(_.has(at)){const st=_.get(at).texture;return tt(st,at.mapping)}else{const st=at.image;if(st&&st.height>0){const lt=new WebGLCubeRenderTarget(st.height/2);return lt.fromEquirectangularTexture(_e,at),_.set(at,lt),at.addEventListener("dispose",rt),tt(lt.texture,at.mapping)}else return null}}return at}function rt(at){const ot=at.target;ot.removeEventListener("dispose",rt);const st=_.get(ot);st!==void 0&&(_.delete(ot),st.dispose())}function it(){_=new WeakMap}return{get:nt,dispose:it}}class OrthographicCamera extends Camera{constructor(_=-1,tt=1,nt=1,rt=-1,it=.1,at=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=_,this.right=tt,this.top=nt,this.bottom=rt,this.near=it,this.far=at,this.updateProjectionMatrix()}copy(_,tt){return super.copy(_,tt),this.left=_.left,this.right=_.right,this.top=_.top,this.bottom=_.bottom,this.near=_.near,this.far=_.far,this.zoom=_.zoom,this.view=_.view===null?null:Object.assign({},_.view),this}setViewOffset(_,tt,nt,rt,it,at){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=_,this.view.fullHeight=tt,this.view.offsetX=nt,this.view.offsetY=rt,this.view.width=it,this.view.height=at,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const _=(this.right-this.left)/(2*this.zoom),tt=(this.top-this.bottom)/(2*this.zoom),nt=(this.right+this.left)/2,rt=(this.top+this.bottom)/2;let it=nt-_,at=nt+_,ot=rt+tt,st=rt-tt;if(this.view!==null&&this.view.enabled){const lt=(this.right-this.left)/this.view.fullWidth/this.zoom,ct=(this.top-this.bottom)/this.view.fullHeight/this.zoom;it+=lt*this.view.offsetX,at=it+lt*this.view.width,ot-=ct*this.view.offsetY,st=ot-ct*this.view.height}this.projectionMatrix.makeOrthographic(it,at,ot,st,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(_){const tt=super.toJSON(_);return tt.object.zoom=this.zoom,tt.object.left=this.left,tt.object.right=this.right,tt.object.top=this.top,tt.object.bottom=this.bottom,tt.object.near=this.near,tt.object.far=this.far,this.view!==null&&(tt.object.view=Object.assign({},this.view)),tt}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color$1;let _oldTarget=null;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,PHI,INV_PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(INV_PHI,0,PHI),new Vector3(-INV_PHI,0,PHI),new Vector3(PHI,INV_PHI,0),new Vector3(-PHI,INV_PHI,0)];class PMREMGenerator{constructor(_){this._renderer=_,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(_,tt=0,nt=.1,rt=100){_oldTarget=this._renderer.getRenderTarget(),this._setSize(256);const it=this._allocateTargets();return it.depthBuffer=!0,this._sceneToCubeUV(_,nt,rt,it),tt>0&&this._blur(it,0,0,tt),this._applyPMREM(it),this._cleanup(it),it}fromEquirectangular(_,tt=null){return this._fromTexture(_,tt)}fromCubemap(_,tt=null){return this._fromTexture(_,tt)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(_){this._lodMax=Math.floor(Math.log2(_)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let _=0;_<this._lodPlanes.length;_++)this._lodPlanes[_].dispose()}_cleanup(_){this._renderer.setRenderTarget(_oldTarget),_.scissorTest=!1,_setViewport(_,0,0,_.width,_.height)}_fromTexture(_,tt){_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping?this._setSize(_.image.length===0?16:_.image[0].width||_.image[0].image.width):this._setSize(_.image.width/4),_oldTarget=this._renderer.getRenderTarget();const nt=tt||this._allocateTargets();return this._textureToCubeUV(_,nt),this._applyPMREM(nt),this._cleanup(nt),nt}_allocateTargets(){const _=3*Math.max(this._cubeSize,112),tt=4*this._cubeSize,nt={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},rt=_createRenderTarget(_,tt,nt);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==_||this._pingPongRenderTarget.height!==tt){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(_,tt,nt);const{_lodMax:it}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(it)),this._blurMaterial=_getBlurShader(it,_,tt)}return rt}_compileMaterial(_){const tt=new Mesh(this._lodPlanes[0],_);this._renderer.compile(tt,_flatCamera)}_sceneToCubeUV(_,tt,nt,rt){const ot=new PerspectiveCamera(90,1,tt,nt),st=[1,-1,1,1,1,1],lt=[1,1,1,-1,-1,-1],ct=this._renderer,ut=ct.autoClear,ft=ct.toneMapping;ct.getClearColor(_clearColor),ct.toneMapping=NoToneMapping,ct.autoClear=!1;const pt=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),gt=new Mesh(new BoxGeometry,pt);let xt=!1;const yt=_.background;yt?yt.isColor&&(pt.color.copy(yt),_.background=null,xt=!0):(pt.color.copy(_clearColor),xt=!0);for(let mt=0;mt<6;mt++){const At=mt%3;At===0?(ot.up.set(0,st[mt],0),ot.lookAt(lt[mt],0,0)):At===1?(ot.up.set(0,0,st[mt]),ot.lookAt(0,lt[mt],0)):(ot.up.set(0,st[mt],0),ot.lookAt(0,0,lt[mt]));const vt=this._cubeSize;_setViewport(rt,At*vt,mt>2?vt:0,vt,vt),ct.setRenderTarget(rt),xt&&ct.render(gt,ot),ct.render(_,ot)}gt.geometry.dispose(),gt.material.dispose(),ct.toneMapping=ft,ct.autoClear=ut,_.background=yt}_textureToCubeUV(_,tt){const nt=this._renderer,rt=_.mapping===CubeReflectionMapping||_.mapping===CubeRefractionMapping;rt?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=_.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const it=rt?this._cubemapMaterial:this._equirectMaterial,at=new Mesh(this._lodPlanes[0],it),ot=it.uniforms;ot.envMap.value=_;const st=this._cubeSize;_setViewport(tt,0,0,3*st,2*st),nt.setRenderTarget(tt),nt.render(at,_flatCamera)}_applyPMREM(_){const tt=this._renderer,nt=tt.autoClear;tt.autoClear=!1;for(let rt=1;rt<this._lodPlanes.length;rt++){const it=Math.sqrt(this._sigmas[rt]*this._sigmas[rt]-this._sigmas[rt-1]*this._sigmas[rt-1]),at=_axisDirections[(rt-1)%_axisDirections.length];this._blur(_,rt-1,rt,it,at)}tt.autoClear=nt}_blur(_,tt,nt,rt,it){const at=this._pingPongRenderTarget;this._halfBlur(_,at,tt,nt,rt,"latitudinal",it),this._halfBlur(at,_,nt,nt,rt,"longitudinal",it)}_halfBlur(_,tt,nt,rt,it,at,ot){const st=this._renderer,lt=this._blurMaterial;at!=="latitudinal"&&at!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const ct=3,ut=new Mesh(this._lodPlanes[rt],lt),ft=lt.uniforms,pt=this._sizeLods[nt]-1,gt=isFinite(it)?Math.PI/(2*pt):2*Math.PI/(2*MAX_SAMPLES-1),xt=it/gt,yt=isFinite(it)?1+Math.floor(ct*xt):MAX_SAMPLES;yt>MAX_SAMPLES&&console.warn(`sigmaRadians, ${it}, is too large and will clip, as it requested ${yt} samples when the maximum is set to ${MAX_SAMPLES}`);const mt=[];let At=0;for(let bt=0;bt<MAX_SAMPLES;++bt){const It=bt/xt,wt=Math.exp(-It*It/2);mt.push(wt),bt===0?At+=wt:bt<yt&&(At+=2*wt)}for(let bt=0;bt<mt.length;bt++)mt[bt]=mt[bt]/At;ft.envMap.value=_.texture,ft.samples.value=yt,ft.weights.value=mt,ft.latitudinal.value=at==="latitudinal",ot&&(ft.poleAxis.value=ot);const{_lodMax:vt}=this;ft.dTheta.value=gt,ft.mipInt.value=vt-nt;const Et=this._sizeLods[rt],Ct=3*Et*(rt>vt-LOD_MIN?rt-vt+LOD_MIN:0),Tt=4*(this._cubeSize-Et);_setViewport(tt,Ct,Tt,3*Et,2*Et),st.setRenderTarget(tt),st.render(ut,_flatCamera)}}function _createPlanes(_e){const _=[],tt=[],nt=[];let rt=_e;const it=_e-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let at=0;at<it;at++){const ot=Math.pow(2,rt);tt.push(ot);let st=1/ot;at>_e-LOD_MIN?st=EXTRA_LOD_SIGMA[at-_e+LOD_MIN-1]:at===0&&(st=0),nt.push(st);const lt=1/(ot-2),ct=-lt,ut=1+lt,ft=[ct,ct,ut,ct,ut,ut,ct,ct,ut,ut,ct,ut],pt=6,gt=6,xt=3,yt=2,mt=1,At=new Float32Array(xt*gt*pt),vt=new Float32Array(yt*gt*pt),Et=new Float32Array(mt*gt*pt);for(let Tt=0;Tt<pt;Tt++){const bt=Tt%3*2/3-1,It=Tt>2?0:-1,wt=[bt,It,0,bt+2/3,It,0,bt+2/3,It+1,0,bt,It,0,bt+2/3,It+1,0,bt,It+1,0];At.set(wt,xt*gt*Tt),vt.set(ft,yt*gt*Tt);const Rt=[Tt,Tt,Tt,Tt,Tt,Tt];Et.set(Rt,mt*gt*Tt)}const Ct=new BufferGeometry;Ct.setAttribute("position",new BufferAttribute(At,xt)),Ct.setAttribute("uv",new BufferAttribute(vt,yt)),Ct.setAttribute("faceIndex",new BufferAttribute(Et,mt)),_.push(Ct),rt>LOD_MIN&&rt--}return{lodPlanes:_,sizeLods:tt,sigmas:nt}}function _createRenderTarget(_e,_,tt){const nt=new WebGLRenderTarget(_e,_,tt);return nt.texture.mapping=CubeUVReflectionMapping,nt.texture.name="PMREM.cubeUv",nt.scissorTest=!0,nt}function _setViewport(_e,_,tt,nt,rt){_e.viewport.set(_,tt,nt,rt),_e.scissor.set(_,tt,nt,rt)}function _getBlurShader(_e,_,tt){const nt=new Float32Array(MAX_SAMPLES),rt=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/_,CUBEUV_TEXEL_HEIGHT:1/tt,CUBEUV_MAX_MIP:`${_e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:nt},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:rt}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(_e){let _=new WeakMap,tt=null;function nt(ot){if(ot&&ot.isTexture){const st=ot.mapping,lt=st===EquirectangularReflectionMapping||st===EquirectangularRefractionMapping,ct=st===CubeReflectionMapping||st===CubeRefractionMapping;if(lt||ct)if(ot.isRenderTargetTexture&&ot.needsPMREMUpdate===!0){ot.needsPMREMUpdate=!1;let ut=_.get(ot);return tt===null&&(tt=new PMREMGenerator(_e)),ut=lt?tt.fromEquirectangular(ot,ut):tt.fromCubemap(ot,ut),_.set(ot,ut),ut.texture}else{if(_.has(ot))return _.get(ot).texture;{const ut=ot.image;if(lt&&ut&&ut.height>0||ct&&ut&&rt(ut)){tt===null&&(tt=new PMREMGenerator(_e));const ft=lt?tt.fromEquirectangular(ot):tt.fromCubemap(ot);return _.set(ot,ft),ot.addEventListener("dispose",it),ft.texture}else return null}}}return ot}function rt(ot){let st=0;const lt=6;for(let ct=0;ct<lt;ct++)ot[ct]!==void 0&&st++;return st===lt}function it(ot){const st=ot.target;st.removeEventListener("dispose",it);const lt=_.get(st);lt!==void 0&&(_.delete(st),lt.dispose())}function at(){_=new WeakMap,tt!==null&&(tt.dispose(),tt=null)}return{get:nt,dispose:at}}function WebGLExtensions(_e){const _={};function tt(nt){if(_[nt]!==void 0)return _[nt];let rt;switch(nt){case"WEBGL_depth_texture":rt=_e.getExtension("WEBGL_depth_texture")||_e.getExtension("MOZ_WEBGL_depth_texture")||_e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":rt=_e.getExtension("EXT_texture_filter_anisotropic")||_e.getExtension("MOZ_EXT_texture_filter_anisotropic")||_e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":rt=_e.getExtension("WEBGL_compressed_texture_s3tc")||_e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":rt=_e.getExtension("WEBGL_compressed_texture_pvrtc")||_e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:rt=_e.getExtension(nt)}return _[nt]=rt,rt}return{has:function(nt){return tt(nt)!==null},init:function(nt){nt.isWebGL2?tt("EXT_color_buffer_float"):(tt("WEBGL_depth_texture"),tt("OES_texture_float"),tt("OES_texture_half_float"),tt("OES_texture_half_float_linear"),tt("OES_standard_derivatives"),tt("OES_element_index_uint"),tt("OES_vertex_array_object"),tt("ANGLE_instanced_arrays")),tt("OES_texture_float_linear"),tt("EXT_color_buffer_half_float"),tt("WEBGL_multisampled_render_to_texture")},get:function(nt){const rt=tt(nt);return rt===null&&console.warn("THREE.WebGLRenderer: "+nt+" extension not supported."),rt}}}function WebGLGeometries(_e,_,tt,nt){const rt={},it=new WeakMap;function at(ut){const ft=ut.target;ft.index!==null&&_.remove(ft.index);for(const gt in ft.attributes)_.remove(ft.attributes[gt]);for(const gt in ft.morphAttributes){const xt=ft.morphAttributes[gt];for(let yt=0,mt=xt.length;yt<mt;yt++)_.remove(xt[yt])}ft.removeEventListener("dispose",at),delete rt[ft.id];const pt=it.get(ft);pt&&(_.remove(pt),it.delete(ft)),nt.releaseStatesOfGeometry(ft),ft.isInstancedBufferGeometry===!0&&delete ft._maxInstanceCount,tt.memory.geometries--}function ot(ut,ft){return rt[ft.id]===!0||(ft.addEventListener("dispose",at),rt[ft.id]=!0,tt.memory.geometries++),ft}function st(ut){const ft=ut.attributes;for(const gt in ft)_.update(ft[gt],_e.ARRAY_BUFFER);const pt=ut.morphAttributes;for(const gt in pt){const xt=pt[gt];for(let yt=0,mt=xt.length;yt<mt;yt++)_.update(xt[yt],_e.ARRAY_BUFFER)}}function lt(ut){const ft=[],pt=ut.index,gt=ut.attributes.position;let xt=0;if(pt!==null){const At=pt.array;xt=pt.version;for(let vt=0,Et=At.length;vt<Et;vt+=3){const Ct=At[vt+0],Tt=At[vt+1],bt=At[vt+2];ft.push(Ct,Tt,Tt,bt,bt,Ct)}}else if(gt!==void 0){const At=gt.array;xt=gt.version;for(let vt=0,Et=At.length/3-1;vt<Et;vt+=3){const Ct=vt+0,Tt=vt+1,bt=vt+2;ft.push(Ct,Tt,Tt,bt,bt,Ct)}}else return;const yt=new(arrayNeedsUint32(ft)?Uint32BufferAttribute:Uint16BufferAttribute)(ft,1);yt.version=xt;const mt=it.get(ut);mt&&_.remove(mt),it.set(ut,yt)}function ct(ut){const ft=it.get(ut);if(ft){const pt=ut.index;pt!==null&&ft.version<pt.version&&lt(ut)}else lt(ut);return it.get(ut)}return{get:ot,update:st,getWireframeAttribute:ct}}function WebGLIndexedBufferRenderer(_e,_,tt,nt){const rt=nt.isWebGL2;let it;function at(ft){it=ft}let ot,st;function lt(ft){ot=ft.type,st=ft.bytesPerElement}function ct(ft,pt){_e.drawElements(it,pt,ot,ft*st),tt.update(pt,it,1)}function ut(ft,pt,gt){if(gt===0)return;let xt,yt;if(rt)xt=_e,yt="drawElementsInstanced";else if(xt=_.get("ANGLE_instanced_arrays"),yt="drawElementsInstancedANGLE",xt===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}xt[yt](it,pt,ot,ft*st,gt),tt.update(pt,it,gt)}this.setMode=at,this.setIndex=lt,this.render=ct,this.renderInstances=ut}function WebGLInfo(_e){const _={geometries:0,textures:0},tt={frame:0,calls:0,triangles:0,points:0,lines:0};function nt(it,at,ot){switch(tt.calls++,at){case _e.TRIANGLES:tt.triangles+=ot*(it/3);break;case _e.LINES:tt.lines+=ot*(it/2);break;case _e.LINE_STRIP:tt.lines+=ot*(it-1);break;case _e.LINE_LOOP:tt.lines+=ot*it;break;case _e.POINTS:tt.points+=ot*it;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",at);break}}function rt(){tt.calls=0,tt.triangles=0,tt.points=0,tt.lines=0}return{memory:_,render:tt,programs:null,autoReset:!0,reset:rt,update:nt}}function numericalSort(_e,_){return _e[0]-_[0]}function absNumericalSort(_e,_){return Math.abs(_[1])-Math.abs(_e[1])}function WebGLMorphtargets(_e,_,tt){const nt={},rt=new Float32Array(8),it=new WeakMap,at=new Vector4,ot=[];for(let lt=0;lt<8;lt++)ot[lt]=[lt,0];function st(lt,ct,ut){const ft=lt.morphTargetInfluences;if(_.isWebGL2===!0){const gt=ct.morphAttributes.position||ct.morphAttributes.normal||ct.morphAttributes.color,xt=gt!==void 0?gt.length:0;let yt=it.get(ct);if(yt===void 0||yt.count!==xt){let jt=function(){Gt.dispose(),it.delete(ct),ct.removeEventListener("dispose",jt)};var pt=jt;yt!==void 0&&yt.texture.dispose();const vt=ct.morphAttributes.position!==void 0,Et=ct.morphAttributes.normal!==void 0,Ct=ct.morphAttributes.color!==void 0,Tt=ct.morphAttributes.position||[],bt=ct.morphAttributes.normal||[],It=ct.morphAttributes.color||[];let wt=0;vt===!0&&(wt=1),Et===!0&&(wt=2),Ct===!0&&(wt=3);let Rt=ct.attributes.position.count*wt,Ft=1;Rt>_.maxTextureSize&&(Ft=Math.ceil(Rt/_.maxTextureSize),Rt=_.maxTextureSize);const Ut=new Float32Array(Rt*Ft*4*xt),Gt=new DataArrayTexture(Ut,Rt,Ft,xt);Gt.type=FloatType,Gt.needsUpdate=!0;const Ht=wt*4;for(let Xt=0;Xt<xt;Xt++){const Jt=Tt[Xt],Dt=bt[Xt],zt=It[Xt],$t=Rt*Ft*4*Xt;for(let Lt=0;Lt<Jt.count;Lt++){const Vt=Lt*Ht;vt===!0&&(at.fromBufferAttribute(Jt,Lt),Ut[$t+Vt+0]=at.x,Ut[$t+Vt+1]=at.y,Ut[$t+Vt+2]=at.z,Ut[$t+Vt+3]=0),Et===!0&&(at.fromBufferAttribute(Dt,Lt),Ut[$t+Vt+4]=at.x,Ut[$t+Vt+5]=at.y,Ut[$t+Vt+6]=at.z,Ut[$t+Vt+7]=0),Ct===!0&&(at.fromBufferAttribute(zt,Lt),Ut[$t+Vt+8]=at.x,Ut[$t+Vt+9]=at.y,Ut[$t+Vt+10]=at.z,Ut[$t+Vt+11]=zt.itemSize===4?at.w:1)}}yt={count:xt,texture:Gt,size:new Vector2(Rt,Ft)},it.set(ct,yt),ct.addEventListener("dispose",jt)}let mt=0;for(let vt=0;vt<ft.length;vt++)mt+=ft[vt];const At=ct.morphTargetsRelative?1:1-mt;ut.getUniforms().setValue(_e,"morphTargetBaseInfluence",At),ut.getUniforms().setValue(_e,"morphTargetInfluences",ft),ut.getUniforms().setValue(_e,"morphTargetsTexture",yt.texture,tt),ut.getUniforms().setValue(_e,"morphTargetsTextureSize",yt.size)}else{const gt=ft===void 0?0:ft.length;let xt=nt[ct.id];if(xt===void 0||xt.length!==gt){xt=[];for(let Et=0;Et<gt;Et++)xt[Et]=[Et,0];nt[ct.id]=xt}for(let Et=0;Et<gt;Et++){const Ct=xt[Et];Ct[0]=Et,Ct[1]=ft[Et]}xt.sort(absNumericalSort);for(let Et=0;Et<8;Et++)Et<gt&&xt[Et][1]?(ot[Et][0]=xt[Et][0],ot[Et][1]=xt[Et][1]):(ot[Et][0]=Number.MAX_SAFE_INTEGER,ot[Et][1]=0);ot.sort(numericalSort);const yt=ct.morphAttributes.position,mt=ct.morphAttributes.normal;let At=0;for(let Et=0;Et<8;Et++){const Ct=ot[Et],Tt=Ct[0],bt=Ct[1];Tt!==Number.MAX_SAFE_INTEGER&&bt?(yt&&ct.getAttribute("morphTarget"+Et)!==yt[Tt]&&ct.setAttribute("morphTarget"+Et,yt[Tt]),mt&&ct.getAttribute("morphNormal"+Et)!==mt[Tt]&&ct.setAttribute("morphNormal"+Et,mt[Tt]),rt[Et]=bt,At+=bt):(yt&&ct.hasAttribute("morphTarget"+Et)===!0&&ct.deleteAttribute("morphTarget"+Et),mt&&ct.hasAttribute("morphNormal"+Et)===!0&&ct.deleteAttribute("morphNormal"+Et),rt[Et]=0)}const vt=ct.morphTargetsRelative?1:1-At;ut.getUniforms().setValue(_e,"morphTargetBaseInfluence",vt),ut.getUniforms().setValue(_e,"morphTargetInfluences",rt)}}return{update:st}}function WebGLObjects(_e,_,tt,nt){let rt=new WeakMap;function it(st){const lt=nt.render.frame,ct=st.geometry,ut=_.get(st,ct);if(rt.get(ut)!==lt&&(_.update(ut),rt.set(ut,lt)),st.isInstancedMesh&&(st.hasEventListener("dispose",ot)===!1&&st.addEventListener("dispose",ot),rt.get(st)!==lt&&(tt.update(st.instanceMatrix,_e.ARRAY_BUFFER),st.instanceColor!==null&&tt.update(st.instanceColor,_e.ARRAY_BUFFER),rt.set(st,lt))),st.isSkinnedMesh){const ft=st.skeleton;rt.get(ft)!==lt&&(ft.update(),rt.set(ft,lt))}return ut}function at(){rt=new WeakMap}function ot(st){const lt=st.target;lt.removeEventListener("dispose",ot),tt.remove(lt.instanceMatrix),lt.instanceColor!==null&&tt.remove(lt.instanceColor)}return{update:it,dispose:at}}const emptyTexture=new Texture,emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture$1,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten$2(_e,_,tt){const nt=_e[0];if(nt<=0||nt>0)return _e;const rt=_*tt;let it=arrayCacheF32[rt];if(it===void 0&&(it=new Float32Array(rt),arrayCacheF32[rt]=it),_!==0){nt.toArray(it,0);for(let at=1,ot=0;at!==_;++at)ot+=tt,_e[at].toArray(it,ot)}return it}function arraysEqual$1(_e,_){if(_e.length!==_.length)return!1;for(let tt=0,nt=_e.length;tt<nt;tt++)if(_e[tt]!==_[tt])return!1;return!0}function copyArray$1(_e,_){for(let tt=0,nt=_.length;tt<nt;tt++)_e[tt]=_[tt]}function allocTexUnits(_e,_){let tt=arrayCacheI32[_];tt===void 0&&(tt=new Int32Array(_),arrayCacheI32[_]=tt);for(let nt=0;nt!==_;++nt)tt[nt]=_e.allocateTextureUnit();return tt}function setValueV1f(_e,_){const tt=this.cache;tt[0]!==_&&(_e.uniform1f(this.addr,_),tt[0]=_)}function setValueV2f(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y)&&(_e.uniform2f(this.addr,_.x,_.y),tt[0]=_.x,tt[1]=_.y);else{if(arraysEqual$1(tt,_))return;_e.uniform2fv(this.addr,_),copyArray$1(tt,_)}}function setValueV3f(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z)&&(_e.uniform3f(this.addr,_.x,_.y,_.z),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z);else if(_.r!==void 0)(tt[0]!==_.r||tt[1]!==_.g||tt[2]!==_.b)&&(_e.uniform3f(this.addr,_.r,_.g,_.b),tt[0]=_.r,tt[1]=_.g,tt[2]=_.b);else{if(arraysEqual$1(tt,_))return;_e.uniform3fv(this.addr,_),copyArray$1(tt,_)}}function setValueV4f(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z||tt[3]!==_.w)&&(_e.uniform4f(this.addr,_.x,_.y,_.z,_.w),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z,tt[3]=_.w);else{if(arraysEqual$1(tt,_))return;_e.uniform4fv(this.addr,_),copyArray$1(tt,_)}}function setValueM2(_e,_){const tt=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual$1(tt,_))return;_e.uniformMatrix2fv(this.addr,!1,_),copyArray$1(tt,_)}else{if(arraysEqual$1(tt,nt))return;mat2array.set(nt),_e.uniformMatrix2fv(this.addr,!1,mat2array),copyArray$1(tt,nt)}}function setValueM3(_e,_){const tt=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual$1(tt,_))return;_e.uniformMatrix3fv(this.addr,!1,_),copyArray$1(tt,_)}else{if(arraysEqual$1(tt,nt))return;mat3array.set(nt),_e.uniformMatrix3fv(this.addr,!1,mat3array),copyArray$1(tt,nt)}}function setValueM4(_e,_){const tt=this.cache,nt=_.elements;if(nt===void 0){if(arraysEqual$1(tt,_))return;_e.uniformMatrix4fv(this.addr,!1,_),copyArray$1(tt,_)}else{if(arraysEqual$1(tt,nt))return;mat4array.set(nt),_e.uniformMatrix4fv(this.addr,!1,mat4array),copyArray$1(tt,nt)}}function setValueV1i(_e,_){const tt=this.cache;tt[0]!==_&&(_e.uniform1i(this.addr,_),tt[0]=_)}function setValueV2i(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y)&&(_e.uniform2i(this.addr,_.x,_.y),tt[0]=_.x,tt[1]=_.y);else{if(arraysEqual$1(tt,_))return;_e.uniform2iv(this.addr,_),copyArray$1(tt,_)}}function setValueV3i(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z)&&(_e.uniform3i(this.addr,_.x,_.y,_.z),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z);else{if(arraysEqual$1(tt,_))return;_e.uniform3iv(this.addr,_),copyArray$1(tt,_)}}function setValueV4i(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z||tt[3]!==_.w)&&(_e.uniform4i(this.addr,_.x,_.y,_.z,_.w),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z,tt[3]=_.w);else{if(arraysEqual$1(tt,_))return;_e.uniform4iv(this.addr,_),copyArray$1(tt,_)}}function setValueV1ui(_e,_){const tt=this.cache;tt[0]!==_&&(_e.uniform1ui(this.addr,_),tt[0]=_)}function setValueV2ui(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y)&&(_e.uniform2ui(this.addr,_.x,_.y),tt[0]=_.x,tt[1]=_.y);else{if(arraysEqual$1(tt,_))return;_e.uniform2uiv(this.addr,_),copyArray$1(tt,_)}}function setValueV3ui(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z)&&(_e.uniform3ui(this.addr,_.x,_.y,_.z),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z);else{if(arraysEqual$1(tt,_))return;_e.uniform3uiv(this.addr,_),copyArray$1(tt,_)}}function setValueV4ui(_e,_){const tt=this.cache;if(_.x!==void 0)(tt[0]!==_.x||tt[1]!==_.y||tt[2]!==_.z||tt[3]!==_.w)&&(_e.uniform4ui(this.addr,_.x,_.y,_.z,_.w),tt[0]=_.x,tt[1]=_.y,tt[2]=_.z,tt[3]=_.w);else{if(arraysEqual$1(tt,_))return;_e.uniform4uiv(this.addr,_),copyArray$1(tt,_)}}function setValueT1(_e,_,tt){const nt=this.cache,rt=tt.allocateTextureUnit();nt[0]!==rt&&(_e.uniform1i(this.addr,rt),nt[0]=rt),tt.setTexture2D(_||emptyTexture,rt)}function setValueT3D1(_e,_,tt){const nt=this.cache,rt=tt.allocateTextureUnit();nt[0]!==rt&&(_e.uniform1i(this.addr,rt),nt[0]=rt),tt.setTexture3D(_||empty3dTexture,rt)}function setValueT6(_e,_,tt){const nt=this.cache,rt=tt.allocateTextureUnit();nt[0]!==rt&&(_e.uniform1i(this.addr,rt),nt[0]=rt),tt.setTextureCube(_||emptyCubeTexture,rt)}function setValueT2DArray1(_e,_,tt){const nt=this.cache,rt=tt.allocateTextureUnit();nt[0]!==rt&&(_e.uniform1i(this.addr,rt),nt[0]=rt),tt.setTexture2DArray(_||emptyArrayTexture,rt)}function getSingularSetter(_e){switch(_e){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(_e,_){_e.uniform1fv(this.addr,_)}function setValueV2fArray(_e,_){const tt=flatten$2(_,this.size,2);_e.uniform2fv(this.addr,tt)}function setValueV3fArray(_e,_){const tt=flatten$2(_,this.size,3);_e.uniform3fv(this.addr,tt)}function setValueV4fArray(_e,_){const tt=flatten$2(_,this.size,4);_e.uniform4fv(this.addr,tt)}function setValueM2Array(_e,_){const tt=flatten$2(_,this.size,4);_e.uniformMatrix2fv(this.addr,!1,tt)}function setValueM3Array(_e,_){const tt=flatten$2(_,this.size,9);_e.uniformMatrix3fv(this.addr,!1,tt)}function setValueM4Array(_e,_){const tt=flatten$2(_,this.size,16);_e.uniformMatrix4fv(this.addr,!1,tt)}function setValueV1iArray(_e,_){_e.uniform1iv(this.addr,_)}function setValueV2iArray(_e,_){_e.uniform2iv(this.addr,_)}function setValueV3iArray(_e,_){_e.uniform3iv(this.addr,_)}function setValueV4iArray(_e,_){_e.uniform4iv(this.addr,_)}function setValueV1uiArray(_e,_){_e.uniform1uiv(this.addr,_)}function setValueV2uiArray(_e,_){_e.uniform2uiv(this.addr,_)}function setValueV3uiArray(_e,_){_e.uniform3uiv(this.addr,_)}function setValueV4uiArray(_e,_){_e.uniform4uiv(this.addr,_)}function setValueT1Array(_e,_,tt){const nt=this.cache,rt=_.length,it=allocTexUnits(tt,rt);arraysEqual$1(nt,it)||(_e.uniform1iv(this.addr,it),copyArray$1(nt,it));for(let at=0;at!==rt;++at)tt.setTexture2D(_[at]||emptyTexture,it[at])}function setValueT3DArray(_e,_,tt){const nt=this.cache,rt=_.length,it=allocTexUnits(tt,rt);arraysEqual$1(nt,it)||(_e.uniform1iv(this.addr,it),copyArray$1(nt,it));for(let at=0;at!==rt;++at)tt.setTexture3D(_[at]||empty3dTexture,it[at])}function setValueT6Array(_e,_,tt){const nt=this.cache,rt=_.length,it=allocTexUnits(tt,rt);arraysEqual$1(nt,it)||(_e.uniform1iv(this.addr,it),copyArray$1(nt,it));for(let at=0;at!==rt;++at)tt.setTextureCube(_[at]||emptyCubeTexture,it[at])}function setValueT2DArrayArray(_e,_,tt){const nt=this.cache,rt=_.length,it=allocTexUnits(tt,rt);arraysEqual$1(nt,it)||(_e.uniform1iv(this.addr,it),copyArray$1(nt,it));for(let at=0;at!==rt;++at)tt.setTexture2DArray(_[at]||emptyArrayTexture,it[at])}function getPureArraySetter(_e){switch(_e){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(_,tt,nt){this.id=_,this.addr=nt,this.cache=[],this.setValue=getSingularSetter(tt.type)}}class PureArrayUniform{constructor(_,tt,nt){this.id=_,this.addr=nt,this.cache=[],this.size=tt.size,this.setValue=getPureArraySetter(tt.type)}}class StructuredUniform{constructor(_){this.id=_,this.seq=[],this.map={}}setValue(_,tt,nt){const rt=this.seq;for(let it=0,at=rt.length;it!==at;++it){const ot=rt[it];ot.setValue(_,tt[ot.id],nt)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(_e,_){_e.seq.push(_),_e.map[_.id]=_}function parseUniform(_e,_,tt){const nt=_e.name,rt=nt.length;for(RePathPart.lastIndex=0;;){const it=RePathPart.exec(nt),at=RePathPart.lastIndex;let ot=it[1];const st=it[2]==="]",lt=it[3];if(st&&(ot=ot|0),lt===void 0||lt==="["&&at+2===rt){addUniform(tt,lt===void 0?new SingleUniform(ot,_e,_):new PureArrayUniform(ot,_e,_));break}else{let ut=tt.map[ot];ut===void 0&&(ut=new StructuredUniform(ot),addUniform(tt,ut)),tt=ut}}}class WebGLUniforms{constructor(_,tt){this.seq=[],this.map={};const nt=_.getProgramParameter(tt,_.ACTIVE_UNIFORMS);for(let rt=0;rt<nt;++rt){const it=_.getActiveUniform(tt,rt),at=_.getUniformLocation(tt,it.name);parseUniform(it,at,this)}}setValue(_,tt,nt,rt){const it=this.map[tt];it!==void 0&&it.setValue(_,nt,rt)}setOptional(_,tt,nt){const rt=tt[nt];rt!==void 0&&this.setValue(_,nt,rt)}static upload(_,tt,nt,rt){for(let it=0,at=tt.length;it!==at;++it){const ot=tt[it],st=nt[ot.id];st.needsUpdate!==!1&&ot.setValue(_,st.value,rt)}}static seqWithValue(_,tt){const nt=[];for(let rt=0,it=_.length;rt!==it;++rt){const at=_[rt];at.id in tt&&nt.push(at)}return nt}}function WebGLShader(_e,_,tt){const nt=_e.createShader(_);return _e.shaderSource(nt,tt),_e.compileShader(nt),nt}let programIdCount=0;function handleSource(_e,_){const tt=_e.split(`
`),nt=[],rt=Math.max(_-6,0),it=Math.min(_+6,tt.length);for(let at=rt;at<it;at++){const ot=at+1;nt.push(`${ot===_?">":" "} ${ot}: ${tt[at]}`)}return nt.join(`
`)}function getEncodingComponents(_e){switch(_e){case LinearSRGBColorSpace:return["Linear","( value )"];case SRGBColorSpace:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",_e),["Linear","( value )"]}}function getShaderErrors(_e,_,tt){const nt=_e.getShaderParameter(_,_e.COMPILE_STATUS),rt=_e.getShaderInfoLog(_).trim();if(nt&&rt==="")return"";const it=/ERROR: 0:(\d+)/.exec(rt);if(it){const at=parseInt(it[1]);return tt.toUpperCase()+`

`+rt+`

`+handleSource(_e.getShaderSource(_),at)}else return rt}function getTexelEncodingFunction(_e,_){const tt=getEncodingComponents(_);return"vec4 "+_e+"( vec4 value ) { return LinearTo"+tt[0]+tt[1]+"; }"}function getToneMappingFunction(_e,_){let tt;switch(_){case LinearToneMapping:tt="Linear";break;case ReinhardToneMapping:tt="Reinhard";break;case CineonToneMapping:tt="OptimizedCineon";break;case ACESFilmicToneMapping:tt="ACESFilmic";break;case CustomToneMapping:tt="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",_),tt="Linear"}return"vec3 "+_e+"( vec3 color ) { return "+tt+"ToneMapping( color ); }"}function generateExtensions(_e){return[_e.extensionDerivatives||_e.envMapCubeUVHeight||_e.bumpMap||_e.normalMapTangentSpace||_e.clearcoatNormalMap||_e.flatShading||_e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(_e.extensionFragDepth||_e.logarithmicDepthBuffer)&&_e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",_e.extensionDrawBuffers&&_e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(_e.extensionShaderTextureLOD||_e.envMap||_e.transmission)&&_e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join(`
`)}function generateDefines(_e){const _=[];for(const tt in _e){const nt=_e[tt];nt!==!1&&_.push("#define "+tt+" "+nt)}return _.join(`
`)}function fetchAttributeLocations(_e,_){const tt={},nt=_e.getProgramParameter(_,_e.ACTIVE_ATTRIBUTES);for(let rt=0;rt<nt;rt++){const it=_e.getActiveAttrib(_,rt),at=it.name;let ot=1;it.type===_e.FLOAT_MAT2&&(ot=2),it.type===_e.FLOAT_MAT3&&(ot=3),it.type===_e.FLOAT_MAT4&&(ot=4),tt[at]={type:it.type,location:_e.getAttribLocation(_,at),locationSize:ot}}return tt}function filterEmptyLine(_e){return _e!==""}function replaceLightNums(_e,_){const tt=_.numSpotLightShadows+_.numSpotLightMaps-_.numSpotLightShadowsWithMaps;return _e.replace(/NUM_DIR_LIGHTS/g,_.numDirLights).replace(/NUM_SPOT_LIGHTS/g,_.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,_.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,tt).replace(/NUM_RECT_AREA_LIGHTS/g,_.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,_.numPointLights).replace(/NUM_HEMI_LIGHTS/g,_.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,_.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,_.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,_.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,_.numPointLightShadows)}function replaceClippingPlaneNums(_e,_){return _e.replace(/NUM_CLIPPING_PLANES/g,_.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,_.numClippingPlanes-_.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(_e){return _e.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function includeReplacer(_e,_){let tt=ShaderChunk[_];if(tt===void 0){const nt=shaderChunkMap.get(_);if(nt!==void 0)tt=ShaderChunk[nt],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',_,nt);else throw new Error("Can not resolve #include <"+_+">")}return resolveIncludes(tt)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(_e){return _e.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(_e,_,tt,nt){let rt="";for(let it=parseInt(_);it<parseInt(tt);it++)rt+=nt.replace(/\[\s*i\s*\]/g,"[ "+it+" ]").replace(/UNROLLED_LOOP_INDEX/g,it);return rt}function generatePrecision(_e){let _="precision "+_e.precision+` float;
precision `+_e.precision+" int;";return _e.precision==="highp"?_+=`
#define HIGH_PRECISION`:_e.precision==="mediump"?_+=`
#define MEDIUM_PRECISION`:_e.precision==="lowp"&&(_+=`
#define LOW_PRECISION`),_}function generateShadowMapTypeDefine(_e){let _="SHADOWMAP_TYPE_BASIC";return _e.shadowMapType===PCFShadowMap?_="SHADOWMAP_TYPE_PCF":_e.shadowMapType===PCFSoftShadowMap?_="SHADOWMAP_TYPE_PCF_SOFT":_e.shadowMapType===VSMShadowMap&&(_="SHADOWMAP_TYPE_VSM"),_}function generateEnvMapTypeDefine(_e){let _="ENVMAP_TYPE_CUBE";if(_e.envMap)switch(_e.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:_="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:_="ENVMAP_TYPE_CUBE_UV";break}return _}function generateEnvMapModeDefine(_e){let _="ENVMAP_MODE_REFLECTION";if(_e.envMap)switch(_e.envMapMode){case CubeRefractionMapping:_="ENVMAP_MODE_REFRACTION";break}return _}function generateEnvMapBlendingDefine(_e){let _="ENVMAP_BLENDING_NONE";if(_e.envMap)switch(_e.combine){case MultiplyOperation:_="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:_="ENVMAP_BLENDING_MIX";break;case AddOperation:_="ENVMAP_BLENDING_ADD";break}return _}function generateCubeUVSize(_e){const _=_e.envMapCubeUVHeight;if(_===null)return null;const tt=Math.log2(_)-2,nt=1/_;return{texelWidth:1/(3*Math.max(Math.pow(2,tt),7*16)),texelHeight:nt,maxMip:tt}}function WebGLProgram(_e,_,tt,nt){const rt=_e.getContext(),it=tt.defines;let at=tt.vertexShader,ot=tt.fragmentShader;const st=generateShadowMapTypeDefine(tt),lt=generateEnvMapTypeDefine(tt),ct=generateEnvMapModeDefine(tt),ut=generateEnvMapBlendingDefine(tt),ft=generateCubeUVSize(tt),pt=tt.isWebGL2?"":generateExtensions(tt),gt=generateDefines(it),xt=rt.createProgram();let yt,mt,At=tt.glslVersion?"#version "+tt.glslVersion+`
`:"";tt.isRawShaderMaterial?(yt=["#define SHADER_TYPE "+tt.shaderType,"#define SHADER_NAME "+tt.shaderName,gt].filter(filterEmptyLine).join(`
`),yt.length>0&&(yt+=`
`),mt=[pt,"#define SHADER_TYPE "+tt.shaderType,"#define SHADER_NAME "+tt.shaderName,gt].filter(filterEmptyLine).join(`
`),mt.length>0&&(mt+=`
`)):(yt=[generatePrecision(tt),"#define SHADER_TYPE "+tt.shaderType,"#define SHADER_NAME "+tt.shaderName,gt,tt.instancing?"#define USE_INSTANCING":"",tt.instancingColor?"#define USE_INSTANCING_COLOR":"",tt.useFog&&tt.fog?"#define USE_FOG":"",tt.useFog&&tt.fogExp2?"#define FOG_EXP2":"",tt.map?"#define USE_MAP":"",tt.envMap?"#define USE_ENVMAP":"",tt.envMap?"#define "+ct:"",tt.lightMap?"#define USE_LIGHTMAP":"",tt.aoMap?"#define USE_AOMAP":"",tt.bumpMap?"#define USE_BUMPMAP":"",tt.normalMap?"#define USE_NORMALMAP":"",tt.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",tt.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",tt.displacementMap?"#define USE_DISPLACEMENTMAP":"",tt.emissiveMap?"#define USE_EMISSIVEMAP":"",tt.anisotropyMap?"#define USE_ANISOTROPYMAP":"",tt.clearcoatMap?"#define USE_CLEARCOATMAP":"",tt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",tt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",tt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",tt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",tt.specularMap?"#define USE_SPECULARMAP":"",tt.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",tt.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",tt.roughnessMap?"#define USE_ROUGHNESSMAP":"",tt.metalnessMap?"#define USE_METALNESSMAP":"",tt.alphaMap?"#define USE_ALPHAMAP":"",tt.alphaHash?"#define USE_ALPHAHASH":"",tt.transmission?"#define USE_TRANSMISSION":"",tt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",tt.thicknessMap?"#define USE_THICKNESSMAP":"",tt.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",tt.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",tt.mapUv?"#define MAP_UV "+tt.mapUv:"",tt.alphaMapUv?"#define ALPHAMAP_UV "+tt.alphaMapUv:"",tt.lightMapUv?"#define LIGHTMAP_UV "+tt.lightMapUv:"",tt.aoMapUv?"#define AOMAP_UV "+tt.aoMapUv:"",tt.emissiveMapUv?"#define EMISSIVEMAP_UV "+tt.emissiveMapUv:"",tt.bumpMapUv?"#define BUMPMAP_UV "+tt.bumpMapUv:"",tt.normalMapUv?"#define NORMALMAP_UV "+tt.normalMapUv:"",tt.displacementMapUv?"#define DISPLACEMENTMAP_UV "+tt.displacementMapUv:"",tt.metalnessMapUv?"#define METALNESSMAP_UV "+tt.metalnessMapUv:"",tt.roughnessMapUv?"#define ROUGHNESSMAP_UV "+tt.roughnessMapUv:"",tt.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+tt.anisotropyMapUv:"",tt.clearcoatMapUv?"#define CLEARCOATMAP_UV "+tt.clearcoatMapUv:"",tt.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+tt.clearcoatNormalMapUv:"",tt.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+tt.clearcoatRoughnessMapUv:"",tt.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+tt.iridescenceMapUv:"",tt.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+tt.iridescenceThicknessMapUv:"",tt.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+tt.sheenColorMapUv:"",tt.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+tt.sheenRoughnessMapUv:"",tt.specularMapUv?"#define SPECULARMAP_UV "+tt.specularMapUv:"",tt.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+tt.specularColorMapUv:"",tt.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+tt.specularIntensityMapUv:"",tt.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+tt.transmissionMapUv:"",tt.thicknessMapUv?"#define THICKNESSMAP_UV "+tt.thicknessMapUv:"",tt.vertexTangents&&tt.flatShading===!1?"#define USE_TANGENT":"",tt.vertexColors?"#define USE_COLOR":"",tt.vertexAlphas?"#define USE_COLOR_ALPHA":"",tt.vertexUv1s?"#define USE_UV1":"",tt.vertexUv2s?"#define USE_UV2":"",tt.vertexUv3s?"#define USE_UV3":"",tt.pointsUvs?"#define USE_POINTS_UV":"",tt.flatShading?"#define FLAT_SHADED":"",tt.skinning?"#define USE_SKINNING":"",tt.morphTargets?"#define USE_MORPHTARGETS":"",tt.morphNormals&&tt.flatShading===!1?"#define USE_MORPHNORMALS":"",tt.morphColors&&tt.isWebGL2?"#define USE_MORPHCOLORS":"",tt.morphTargetsCount>0&&tt.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",tt.morphTargetsCount>0&&tt.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+tt.morphTextureStride:"",tt.morphTargetsCount>0&&tt.isWebGL2?"#define MORPHTARGETS_COUNT "+tt.morphTargetsCount:"",tt.doubleSided?"#define DOUBLE_SIDED":"",tt.flipSided?"#define FLIP_SIDED":"",tt.shadowMapEnabled?"#define USE_SHADOWMAP":"",tt.shadowMapEnabled?"#define "+st:"",tt.sizeAttenuation?"#define USE_SIZEATTENUATION":"",tt.useLegacyLights?"#define LEGACY_LIGHTS":"",tt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",tt.logarithmicDepthBuffer&&tt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),mt=[pt,generatePrecision(tt),"#define SHADER_TYPE "+tt.shaderType,"#define SHADER_NAME "+tt.shaderName,gt,tt.useFog&&tt.fog?"#define USE_FOG":"",tt.useFog&&tt.fogExp2?"#define FOG_EXP2":"",tt.map?"#define USE_MAP":"",tt.matcap?"#define USE_MATCAP":"",tt.envMap?"#define USE_ENVMAP":"",tt.envMap?"#define "+lt:"",tt.envMap?"#define "+ct:"",tt.envMap?"#define "+ut:"",ft?"#define CUBEUV_TEXEL_WIDTH "+ft.texelWidth:"",ft?"#define CUBEUV_TEXEL_HEIGHT "+ft.texelHeight:"",ft?"#define CUBEUV_MAX_MIP "+ft.maxMip+".0":"",tt.lightMap?"#define USE_LIGHTMAP":"",tt.aoMap?"#define USE_AOMAP":"",tt.bumpMap?"#define USE_BUMPMAP":"",tt.normalMap?"#define USE_NORMALMAP":"",tt.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",tt.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",tt.emissiveMap?"#define USE_EMISSIVEMAP":"",tt.anisotropy?"#define USE_ANISOTROPY":"",tt.anisotropyMap?"#define USE_ANISOTROPYMAP":"",tt.clearcoat?"#define USE_CLEARCOAT":"",tt.clearcoatMap?"#define USE_CLEARCOATMAP":"",tt.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",tt.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",tt.iridescence?"#define USE_IRIDESCENCE":"",tt.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",tt.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",tt.specularMap?"#define USE_SPECULARMAP":"",tt.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",tt.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",tt.roughnessMap?"#define USE_ROUGHNESSMAP":"",tt.metalnessMap?"#define USE_METALNESSMAP":"",tt.alphaMap?"#define USE_ALPHAMAP":"",tt.alphaTest?"#define USE_ALPHATEST":"",tt.alphaHash?"#define USE_ALPHAHASH":"",tt.sheen?"#define USE_SHEEN":"",tt.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",tt.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",tt.transmission?"#define USE_TRANSMISSION":"",tt.transmissionMap?"#define USE_TRANSMISSIONMAP":"",tt.thicknessMap?"#define USE_THICKNESSMAP":"",tt.vertexTangents&&tt.flatShading===!1?"#define USE_TANGENT":"",tt.vertexColors||tt.instancingColor?"#define USE_COLOR":"",tt.vertexAlphas?"#define USE_COLOR_ALPHA":"",tt.vertexUv1s?"#define USE_UV1":"",tt.vertexUv2s?"#define USE_UV2":"",tt.vertexUv3s?"#define USE_UV3":"",tt.pointsUvs?"#define USE_POINTS_UV":"",tt.gradientMap?"#define USE_GRADIENTMAP":"",tt.flatShading?"#define FLAT_SHADED":"",tt.doubleSided?"#define DOUBLE_SIDED":"",tt.flipSided?"#define FLIP_SIDED":"",tt.shadowMapEnabled?"#define USE_SHADOWMAP":"",tt.shadowMapEnabled?"#define "+st:"",tt.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",tt.useLegacyLights?"#define LEGACY_LIGHTS":"",tt.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",tt.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",tt.logarithmicDepthBuffer&&tt.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",tt.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",tt.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",tt.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",tt.toneMapping):"",tt.dithering?"#define DITHERING":"",tt.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",tt.outputColorSpace),tt.useDepthPacking?"#define DEPTH_PACKING "+tt.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),at=resolveIncludes(at),at=replaceLightNums(at,tt),at=replaceClippingPlaneNums(at,tt),ot=resolveIncludes(ot),ot=replaceLightNums(ot,tt),ot=replaceClippingPlaneNums(ot,tt),at=unrollLoops(at),ot=unrollLoops(ot),tt.isWebGL2&&tt.isRawShaderMaterial!==!0&&(At=`#version 300 es
`,yt=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+yt,mt=["#define varying in",tt.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",tt.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+mt);const vt=At+yt+at,Et=At+mt+ot,Ct=WebGLShader(rt,rt.VERTEX_SHADER,vt),Tt=WebGLShader(rt,rt.FRAGMENT_SHADER,Et);if(rt.attachShader(xt,Ct),rt.attachShader(xt,Tt),tt.index0AttributeName!==void 0?rt.bindAttribLocation(xt,0,tt.index0AttributeName):tt.morphTargets===!0&&rt.bindAttribLocation(xt,0,"position"),rt.linkProgram(xt),_e.debug.checkShaderErrors){const wt=rt.getProgramInfoLog(xt).trim(),Rt=rt.getShaderInfoLog(Ct).trim(),Ft=rt.getShaderInfoLog(Tt).trim();let Ut=!0,Gt=!0;if(rt.getProgramParameter(xt,rt.LINK_STATUS)===!1)if(Ut=!1,typeof _e.debug.onShaderError=="function")_e.debug.onShaderError(rt,xt,Ct,Tt);else{const Ht=getShaderErrors(rt,Ct,"vertex"),jt=getShaderErrors(rt,Tt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+rt.getError()+" - VALIDATE_STATUS "+rt.getProgramParameter(xt,rt.VALIDATE_STATUS)+`

Program Info Log: `+wt+`
`+Ht+`
`+jt)}else wt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",wt):(Rt===""||Ft==="")&&(Gt=!1);Gt&&(this.diagnostics={runnable:Ut,programLog:wt,vertexShader:{log:Rt,prefix:yt},fragmentShader:{log:Ft,prefix:mt}})}rt.deleteShader(Ct),rt.deleteShader(Tt);let bt;this.getUniforms=function(){return bt===void 0&&(bt=new WebGLUniforms(rt,xt)),bt};let It;return this.getAttributes=function(){return It===void 0&&(It=fetchAttributeLocations(rt,xt)),It},this.destroy=function(){nt.releaseStatesOfProgram(this),rt.deleteProgram(xt),this.program=void 0},this.type=tt.shaderType,this.name=tt.shaderName,this.id=programIdCount++,this.cacheKey=_,this.usedTimes=1,this.program=xt,this.vertexShader=Ct,this.fragmentShader=Tt,this}let _id$1=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(_){const tt=_.vertexShader,nt=_.fragmentShader,rt=this._getShaderStage(tt),it=this._getShaderStage(nt),at=this._getShaderCacheForMaterial(_);return at.has(rt)===!1&&(at.add(rt),rt.usedTimes++),at.has(it)===!1&&(at.add(it),it.usedTimes++),this}remove(_){const tt=this.materialCache.get(_);for(const nt of tt)nt.usedTimes--,nt.usedTimes===0&&this.shaderCache.delete(nt.code);return this.materialCache.delete(_),this}getVertexShaderID(_){return this._getShaderStage(_.vertexShader).id}getFragmentShaderID(_){return this._getShaderStage(_.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(_){const tt=this.materialCache;let nt=tt.get(_);return nt===void 0&&(nt=new Set,tt.set(_,nt)),nt}_getShaderStage(_){const tt=this.shaderCache;let nt=tt.get(_);return nt===void 0&&(nt=new WebGLShaderStage(_),tt.set(_,nt)),nt}}class WebGLShaderStage{constructor(_){this.id=_id$1++,this.code=_,this.usedTimes=0}}function WebGLPrograms(_e,_,tt,nt,rt,it,at){const ot=new Layers,st=new WebGLShaderCache,lt=[],ct=rt.isWebGL2,ut=rt.logarithmicDepthBuffer,ft=rt.vertexTextures;let pt=rt.precision;const gt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function xt(wt){return wt===0?"uv":`uv${wt}`}function yt(wt,Rt,Ft,Ut,Gt){const Ht=Ut.fog,jt=Gt.geometry,Xt=wt.isMeshStandardMaterial?Ut.environment:null,Jt=(wt.isMeshStandardMaterial?tt:_).get(wt.envMap||Xt),Dt=Jt&&Jt.mapping===CubeUVReflectionMapping?Jt.image.height:null,zt=gt[wt.type];wt.precision!==null&&(pt=rt.getMaxPrecision(wt.precision),pt!==wt.precision&&console.warn("THREE.WebGLProgram.getParameters:",wt.precision,"not supported, using",pt,"instead."));const $t=jt.morphAttributes.position||jt.morphAttributes.normal||jt.morphAttributes.color,Lt=$t!==void 0?$t.length:0;let Vt=0;jt.morphAttributes.position!==void 0&&(Vt=1),jt.morphAttributes.normal!==void 0&&(Vt=2),jt.morphAttributes.color!==void 0&&(Vt=3);let tn,an,on,sn;if(zt){const Pr=ShaderLib[zt];tn=Pr.vertexShader,an=Pr.fragmentShader}else tn=wt.vertexShader,an=wt.fragmentShader,st.update(wt),on=st.getVertexShaderID(wt),sn=st.getFragmentShaderID(wt);const ln=_e.getRenderTarget(),cn=Gt.isInstancedMesh===!0,In=!!wt.map,zn=!!wt.matcap,yn=!!Jt,Wt=!!wt.aoMap,_n=!!wt.lightMap,gn=!!wt.bumpMap,vn=!!wt.normalMap,mn=!!wt.displacementMap,Wn=!!wt.emissiveMap,xn=!!wt.metalnessMap,Dn=!!wt.roughnessMap,Fn=wt.anisotropy>0,bn=wt.clearcoat>0,jn=wt.iridescence>0,Nt=wt.sheen>0,kt=wt.transmission>0,rn=Fn&&!!wt.anisotropyMap,Mn=bn&&!!wt.clearcoatMap,wn=bn&&!!wt.clearcoatNormalMap,Tn=bn&&!!wt.clearcoatRoughnessMap,Gn=jn&&!!wt.iridescenceMap,Un=jn&&!!wt.iridescenceThicknessMap,dn=Nt&&!!wt.sheenColorMap,Vn=Nt&&!!wt.sheenRoughnessMap,Qn=!!wt.specularMap,Nn=!!wt.specularColorMap,kn=!!wt.specularIntensityMap,$n=kt&&!!wt.transmissionMap,Yn=kt&&!!wt.thicknessMap,tr=!!wt.gradientMap,nn=!!wt.alphaMap,pn=wt.alphaTest>0,An=!!wt.alphaHash,Hn=!!wt.extensions,Jn=!!jt.attributes.uv1,Ar=!!jt.attributes.uv2,Er=!!jt.attributes.uv3;let Tr=NoToneMapping;return wt.toneMapped&&(ln===null||ln.isXRRenderTarget===!0)&&(Tr=_e.toneMapping),{isWebGL2:ct,shaderID:zt,shaderType:wt.type,shaderName:wt.name,vertexShader:tn,fragmentShader:an,defines:wt.defines,customVertexShaderID:on,customFragmentShaderID:sn,isRawShaderMaterial:wt.isRawShaderMaterial===!0,glslVersion:wt.glslVersion,precision:pt,instancing:cn,instancingColor:cn&&Gt.instanceColor!==null,supportsVertexTextures:ft,outputColorSpace:ln===null?_e.outputColorSpace:ln.isXRRenderTarget===!0?ln.texture.colorSpace:LinearSRGBColorSpace,map:In,matcap:zn,envMap:yn,envMapMode:yn&&Jt.mapping,envMapCubeUVHeight:Dt,aoMap:Wt,lightMap:_n,bumpMap:gn,normalMap:vn,displacementMap:ft&&mn,emissiveMap:Wn,normalMapObjectSpace:vn&&wt.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:vn&&wt.normalMapType===TangentSpaceNormalMap,metalnessMap:xn,roughnessMap:Dn,anisotropy:Fn,anisotropyMap:rn,clearcoat:bn,clearcoatMap:Mn,clearcoatNormalMap:wn,clearcoatRoughnessMap:Tn,iridescence:jn,iridescenceMap:Gn,iridescenceThicknessMap:Un,sheen:Nt,sheenColorMap:dn,sheenRoughnessMap:Vn,specularMap:Qn,specularColorMap:Nn,specularIntensityMap:kn,transmission:kt,transmissionMap:$n,thicknessMap:Yn,gradientMap:tr,opaque:wt.transparent===!1&&wt.blending===NormalBlending,alphaMap:nn,alphaTest:pn,alphaHash:An,combine:wt.combine,mapUv:In&&xt(wt.map.channel),aoMapUv:Wt&&xt(wt.aoMap.channel),lightMapUv:_n&&xt(wt.lightMap.channel),bumpMapUv:gn&&xt(wt.bumpMap.channel),normalMapUv:vn&&xt(wt.normalMap.channel),displacementMapUv:mn&&xt(wt.displacementMap.channel),emissiveMapUv:Wn&&xt(wt.emissiveMap.channel),metalnessMapUv:xn&&xt(wt.metalnessMap.channel),roughnessMapUv:Dn&&xt(wt.roughnessMap.channel),anisotropyMapUv:rn&&xt(wt.anisotropyMap.channel),clearcoatMapUv:Mn&&xt(wt.clearcoatMap.channel),clearcoatNormalMapUv:wn&&xt(wt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Tn&&xt(wt.clearcoatRoughnessMap.channel),iridescenceMapUv:Gn&&xt(wt.iridescenceMap.channel),iridescenceThicknessMapUv:Un&&xt(wt.iridescenceThicknessMap.channel),sheenColorMapUv:dn&&xt(wt.sheenColorMap.channel),sheenRoughnessMapUv:Vn&&xt(wt.sheenRoughnessMap.channel),specularMapUv:Qn&&xt(wt.specularMap.channel),specularColorMapUv:Nn&&xt(wt.specularColorMap.channel),specularIntensityMapUv:kn&&xt(wt.specularIntensityMap.channel),transmissionMapUv:$n&&xt(wt.transmissionMap.channel),thicknessMapUv:Yn&&xt(wt.thicknessMap.channel),alphaMapUv:nn&&xt(wt.alphaMap.channel),vertexTangents:!!jt.attributes.tangent&&(vn||Fn),vertexColors:wt.vertexColors,vertexAlphas:wt.vertexColors===!0&&!!jt.attributes.color&&jt.attributes.color.itemSize===4,vertexUv1s:Jn,vertexUv2s:Ar,vertexUv3s:Er,pointsUvs:Gt.isPoints===!0&&!!jt.attributes.uv&&(In||nn),fog:!!Ht,useFog:wt.fog===!0,fogExp2:Ht&&Ht.isFogExp2,flatShading:wt.flatShading===!0,sizeAttenuation:wt.sizeAttenuation===!0,logarithmicDepthBuffer:ut,skinning:Gt.isSkinnedMesh===!0,morphTargets:jt.morphAttributes.position!==void 0,morphNormals:jt.morphAttributes.normal!==void 0,morphColors:jt.morphAttributes.color!==void 0,morphTargetsCount:Lt,morphTextureStride:Vt,numDirLights:Rt.directional.length,numPointLights:Rt.point.length,numSpotLights:Rt.spot.length,numSpotLightMaps:Rt.spotLightMap.length,numRectAreaLights:Rt.rectArea.length,numHemiLights:Rt.hemi.length,numDirLightShadows:Rt.directionalShadowMap.length,numPointLightShadows:Rt.pointShadowMap.length,numSpotLightShadows:Rt.spotShadowMap.length,numSpotLightShadowsWithMaps:Rt.numSpotLightShadowsWithMaps,numClippingPlanes:at.numPlanes,numClipIntersection:at.numIntersection,dithering:wt.dithering,shadowMapEnabled:_e.shadowMap.enabled&&Ft.length>0,shadowMapType:_e.shadowMap.type,toneMapping:Tr,useLegacyLights:_e._useLegacyLights,decodeVideoTexture:In&&wt.map.isVideoTexture===!0&&wt.map.colorSpace===SRGBColorSpace,premultipliedAlpha:wt.premultipliedAlpha,doubleSided:wt.side===DoubleSide,flipSided:wt.side===BackSide,useDepthPacking:wt.depthPacking>=0,depthPacking:wt.depthPacking||0,index0AttributeName:wt.index0AttributeName,extensionDerivatives:Hn&&wt.extensions.derivatives===!0,extensionFragDepth:Hn&&wt.extensions.fragDepth===!0,extensionDrawBuffers:Hn&&wt.extensions.drawBuffers===!0,extensionShaderTextureLOD:Hn&&wt.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:ct||nt.has("EXT_frag_depth"),rendererExtensionDrawBuffers:ct||nt.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:ct||nt.has("EXT_shader_texture_lod"),customProgramCacheKey:wt.customProgramCacheKey()}}function mt(wt){const Rt=[];if(wt.shaderID?Rt.push(wt.shaderID):(Rt.push(wt.customVertexShaderID),Rt.push(wt.customFragmentShaderID)),wt.defines!==void 0)for(const Ft in wt.defines)Rt.push(Ft),Rt.push(wt.defines[Ft]);return wt.isRawShaderMaterial===!1&&(At(Rt,wt),vt(Rt,wt),Rt.push(_e.outputColorSpace)),Rt.push(wt.customProgramCacheKey),Rt.join()}function At(wt,Rt){wt.push(Rt.precision),wt.push(Rt.outputColorSpace),wt.push(Rt.envMapMode),wt.push(Rt.envMapCubeUVHeight),wt.push(Rt.mapUv),wt.push(Rt.alphaMapUv),wt.push(Rt.lightMapUv),wt.push(Rt.aoMapUv),wt.push(Rt.bumpMapUv),wt.push(Rt.normalMapUv),wt.push(Rt.displacementMapUv),wt.push(Rt.emissiveMapUv),wt.push(Rt.metalnessMapUv),wt.push(Rt.roughnessMapUv),wt.push(Rt.anisotropyMapUv),wt.push(Rt.clearcoatMapUv),wt.push(Rt.clearcoatNormalMapUv),wt.push(Rt.clearcoatRoughnessMapUv),wt.push(Rt.iridescenceMapUv),wt.push(Rt.iridescenceThicknessMapUv),wt.push(Rt.sheenColorMapUv),wt.push(Rt.sheenRoughnessMapUv),wt.push(Rt.specularMapUv),wt.push(Rt.specularColorMapUv),wt.push(Rt.specularIntensityMapUv),wt.push(Rt.transmissionMapUv),wt.push(Rt.thicknessMapUv),wt.push(Rt.combine),wt.push(Rt.fogExp2),wt.push(Rt.sizeAttenuation),wt.push(Rt.morphTargetsCount),wt.push(Rt.morphAttributeCount),wt.push(Rt.numDirLights),wt.push(Rt.numPointLights),wt.push(Rt.numSpotLights),wt.push(Rt.numSpotLightMaps),wt.push(Rt.numHemiLights),wt.push(Rt.numRectAreaLights),wt.push(Rt.numDirLightShadows),wt.push(Rt.numPointLightShadows),wt.push(Rt.numSpotLightShadows),wt.push(Rt.numSpotLightShadowsWithMaps),wt.push(Rt.shadowMapType),wt.push(Rt.toneMapping),wt.push(Rt.numClippingPlanes),wt.push(Rt.numClipIntersection),wt.push(Rt.depthPacking)}function vt(wt,Rt){ot.disableAll(),Rt.isWebGL2&&ot.enable(0),Rt.supportsVertexTextures&&ot.enable(1),Rt.instancing&&ot.enable(2),Rt.instancingColor&&ot.enable(3),Rt.matcap&&ot.enable(4),Rt.envMap&&ot.enable(5),Rt.normalMapObjectSpace&&ot.enable(6),Rt.normalMapTangentSpace&&ot.enable(7),Rt.clearcoat&&ot.enable(8),Rt.iridescence&&ot.enable(9),Rt.alphaTest&&ot.enable(10),Rt.vertexColors&&ot.enable(11),Rt.vertexAlphas&&ot.enable(12),Rt.vertexUv1s&&ot.enable(13),Rt.vertexUv2s&&ot.enable(14),Rt.vertexUv3s&&ot.enable(15),Rt.vertexTangents&&ot.enable(16),Rt.anisotropy&&ot.enable(17),wt.push(ot.mask),ot.disableAll(),Rt.fog&&ot.enable(0),Rt.useFog&&ot.enable(1),Rt.flatShading&&ot.enable(2),Rt.logarithmicDepthBuffer&&ot.enable(3),Rt.skinning&&ot.enable(4),Rt.morphTargets&&ot.enable(5),Rt.morphNormals&&ot.enable(6),Rt.morphColors&&ot.enable(7),Rt.premultipliedAlpha&&ot.enable(8),Rt.shadowMapEnabled&&ot.enable(9),Rt.useLegacyLights&&ot.enable(10),Rt.doubleSided&&ot.enable(11),Rt.flipSided&&ot.enable(12),Rt.useDepthPacking&&ot.enable(13),Rt.dithering&&ot.enable(14),Rt.transmission&&ot.enable(15),Rt.sheen&&ot.enable(16),Rt.opaque&&ot.enable(17),Rt.pointsUvs&&ot.enable(18),Rt.decodeVideoTexture&&ot.enable(19),wt.push(ot.mask)}function Et(wt){const Rt=gt[wt.type];let Ft;if(Rt){const Ut=ShaderLib[Rt];Ft=UniformsUtils.clone(Ut.uniforms)}else Ft=wt.uniforms;return Ft}function Ct(wt,Rt){let Ft;for(let Ut=0,Gt=lt.length;Ut<Gt;Ut++){const Ht=lt[Ut];if(Ht.cacheKey===Rt){Ft=Ht,++Ft.usedTimes;break}}return Ft===void 0&&(Ft=new WebGLProgram(_e,Rt,wt,it),lt.push(Ft)),Ft}function Tt(wt){if(--wt.usedTimes===0){const Rt=lt.indexOf(wt);lt[Rt]=lt[lt.length-1],lt.pop(),wt.destroy()}}function bt(wt){st.remove(wt)}function It(){st.dispose()}return{getParameters:yt,getProgramCacheKey:mt,getUniforms:Et,acquireProgram:Ct,releaseProgram:Tt,releaseShaderCache:bt,programs:lt,dispose:It}}function WebGLProperties(){let _e=new WeakMap;function _(it){let at=_e.get(it);return at===void 0&&(at={},_e.set(it,at)),at}function tt(it){_e.delete(it)}function nt(it,at,ot){_e.get(it)[at]=ot}function rt(){_e=new WeakMap}return{get:_,remove:tt,update:nt,dispose:rt}}function painterSortStable(_e,_){return _e.groupOrder!==_.groupOrder?_e.groupOrder-_.groupOrder:_e.renderOrder!==_.renderOrder?_e.renderOrder-_.renderOrder:_e.material.id!==_.material.id?_e.material.id-_.material.id:_e.z!==_.z?_e.z-_.z:_e.id-_.id}function reversePainterSortStable(_e,_){return _e.groupOrder!==_.groupOrder?_e.groupOrder-_.groupOrder:_e.renderOrder!==_.renderOrder?_e.renderOrder-_.renderOrder:_e.z!==_.z?_.z-_e.z:_e.id-_.id}function WebGLRenderList(){const _e=[];let _=0;const tt=[],nt=[],rt=[];function it(){_=0,tt.length=0,nt.length=0,rt.length=0}function at(ut,ft,pt,gt,xt,yt){let mt=_e[_];return mt===void 0?(mt={id:ut.id,object:ut,geometry:ft,material:pt,groupOrder:gt,renderOrder:ut.renderOrder,z:xt,group:yt},_e[_]=mt):(mt.id=ut.id,mt.object=ut,mt.geometry=ft,mt.material=pt,mt.groupOrder=gt,mt.renderOrder=ut.renderOrder,mt.z=xt,mt.group=yt),_++,mt}function ot(ut,ft,pt,gt,xt,yt){const mt=at(ut,ft,pt,gt,xt,yt);pt.transmission>0?nt.push(mt):pt.transparent===!0?rt.push(mt):tt.push(mt)}function st(ut,ft,pt,gt,xt,yt){const mt=at(ut,ft,pt,gt,xt,yt);pt.transmission>0?nt.unshift(mt):pt.transparent===!0?rt.unshift(mt):tt.unshift(mt)}function lt(ut,ft){tt.length>1&&tt.sort(ut||painterSortStable),nt.length>1&&nt.sort(ft||reversePainterSortStable),rt.length>1&&rt.sort(ft||reversePainterSortStable)}function ct(){for(let ut=_,ft=_e.length;ut<ft;ut++){const pt=_e[ut];if(pt.id===null)break;pt.id=null,pt.object=null,pt.geometry=null,pt.material=null,pt.group=null}}return{opaque:tt,transmissive:nt,transparent:rt,init:it,push:ot,unshift:st,finish:ct,sort:lt}}function WebGLRenderLists(){let _e=new WeakMap;function _(nt,rt){const it=_e.get(nt);let at;return it===void 0?(at=new WebGLRenderList,_e.set(nt,[at])):rt>=it.length?(at=new WebGLRenderList,it.push(at)):at=it[rt],at}function tt(){_e=new WeakMap}return{get:_,dispose:tt}}function UniformsCache(){const _e={};return{get:function(_){if(_e[_.id]!==void 0)return _e[_.id];let tt;switch(_.type){case"DirectionalLight":tt={direction:new Vector3,color:new Color$1};break;case"SpotLight":tt={position:new Vector3,direction:new Vector3,color:new Color$1,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":tt={position:new Vector3,color:new Color$1,distance:0,decay:0};break;case"HemisphereLight":tt={direction:new Vector3,skyColor:new Color$1,groundColor:new Color$1};break;case"RectAreaLight":tt={color:new Color$1,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return _e[_.id]=tt,tt}}}function ShadowUniformsCache(){const _e={};return{get:function(_){if(_e[_.id]!==void 0)return _e[_.id];let tt;switch(_.type){case"DirectionalLight":tt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":tt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":tt={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return _e[_.id]=tt,tt}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(_e,_){return(_.castShadow?2:0)-(_e.castShadow?2:0)+(_.map?1:0)-(_e.map?1:0)}function WebGLLights(_e,_){const tt=new UniformsCache,nt=ShadowUniformsCache(),rt={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let ct=0;ct<9;ct++)rt.probe.push(new Vector3);const it=new Vector3,at=new Matrix4,ot=new Matrix4;function st(ct,ut){let ft=0,pt=0,gt=0;for(let Ft=0;Ft<9;Ft++)rt.probe[Ft].set(0,0,0);let xt=0,yt=0,mt=0,At=0,vt=0,Et=0,Ct=0,Tt=0,bt=0,It=0;ct.sort(shadowCastingAndTexturingLightsFirst);const wt=ut===!0?Math.PI:1;for(let Ft=0,Ut=ct.length;Ft<Ut;Ft++){const Gt=ct[Ft],Ht=Gt.color,jt=Gt.intensity,Xt=Gt.distance,Jt=Gt.shadow&&Gt.shadow.map?Gt.shadow.map.texture:null;if(Gt.isAmbientLight)ft+=Ht.r*jt*wt,pt+=Ht.g*jt*wt,gt+=Ht.b*jt*wt;else if(Gt.isLightProbe)for(let Dt=0;Dt<9;Dt++)rt.probe[Dt].addScaledVector(Gt.sh.coefficients[Dt],jt);else if(Gt.isDirectionalLight){const Dt=tt.get(Gt);if(Dt.color.copy(Gt.color).multiplyScalar(Gt.intensity*wt),Gt.castShadow){const zt=Gt.shadow,$t=nt.get(Gt);$t.shadowBias=zt.bias,$t.shadowNormalBias=zt.normalBias,$t.shadowRadius=zt.radius,$t.shadowMapSize=zt.mapSize,rt.directionalShadow[xt]=$t,rt.directionalShadowMap[xt]=Jt,rt.directionalShadowMatrix[xt]=Gt.shadow.matrix,Et++}rt.directional[xt]=Dt,xt++}else if(Gt.isSpotLight){const Dt=tt.get(Gt);Dt.position.setFromMatrixPosition(Gt.matrixWorld),Dt.color.copy(Ht).multiplyScalar(jt*wt),Dt.distance=Xt,Dt.coneCos=Math.cos(Gt.angle),Dt.penumbraCos=Math.cos(Gt.angle*(1-Gt.penumbra)),Dt.decay=Gt.decay,rt.spot[mt]=Dt;const zt=Gt.shadow;if(Gt.map&&(rt.spotLightMap[bt]=Gt.map,bt++,zt.updateMatrices(Gt),Gt.castShadow&&It++),rt.spotLightMatrix[mt]=zt.matrix,Gt.castShadow){const $t=nt.get(Gt);$t.shadowBias=zt.bias,$t.shadowNormalBias=zt.normalBias,$t.shadowRadius=zt.radius,$t.shadowMapSize=zt.mapSize,rt.spotShadow[mt]=$t,rt.spotShadowMap[mt]=Jt,Tt++}mt++}else if(Gt.isRectAreaLight){const Dt=tt.get(Gt);Dt.color.copy(Ht).multiplyScalar(jt),Dt.halfWidth.set(Gt.width*.5,0,0),Dt.halfHeight.set(0,Gt.height*.5,0),rt.rectArea[At]=Dt,At++}else if(Gt.isPointLight){const Dt=tt.get(Gt);if(Dt.color.copy(Gt.color).multiplyScalar(Gt.intensity*wt),Dt.distance=Gt.distance,Dt.decay=Gt.decay,Gt.castShadow){const zt=Gt.shadow,$t=nt.get(Gt);$t.shadowBias=zt.bias,$t.shadowNormalBias=zt.normalBias,$t.shadowRadius=zt.radius,$t.shadowMapSize=zt.mapSize,$t.shadowCameraNear=zt.camera.near,$t.shadowCameraFar=zt.camera.far,rt.pointShadow[yt]=$t,rt.pointShadowMap[yt]=Jt,rt.pointShadowMatrix[yt]=Gt.shadow.matrix,Ct++}rt.point[yt]=Dt,yt++}else if(Gt.isHemisphereLight){const Dt=tt.get(Gt);Dt.skyColor.copy(Gt.color).multiplyScalar(jt*wt),Dt.groundColor.copy(Gt.groundColor).multiplyScalar(jt*wt),rt.hemi[vt]=Dt,vt++}}At>0&&(_.isWebGL2||_e.has("OES_texture_float_linear")===!0?(rt.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,rt.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):_e.has("OES_texture_half_float_linear")===!0?(rt.rectAreaLTC1=UniformsLib.LTC_HALF_1,rt.rectAreaLTC2=UniformsLib.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),rt.ambient[0]=ft,rt.ambient[1]=pt,rt.ambient[2]=gt;const Rt=rt.hash;(Rt.directionalLength!==xt||Rt.pointLength!==yt||Rt.spotLength!==mt||Rt.rectAreaLength!==At||Rt.hemiLength!==vt||Rt.numDirectionalShadows!==Et||Rt.numPointShadows!==Ct||Rt.numSpotShadows!==Tt||Rt.numSpotMaps!==bt)&&(rt.directional.length=xt,rt.spot.length=mt,rt.rectArea.length=At,rt.point.length=yt,rt.hemi.length=vt,rt.directionalShadow.length=Et,rt.directionalShadowMap.length=Et,rt.pointShadow.length=Ct,rt.pointShadowMap.length=Ct,rt.spotShadow.length=Tt,rt.spotShadowMap.length=Tt,rt.directionalShadowMatrix.length=Et,rt.pointShadowMatrix.length=Ct,rt.spotLightMatrix.length=Tt+bt-It,rt.spotLightMap.length=bt,rt.numSpotLightShadowsWithMaps=It,Rt.directionalLength=xt,Rt.pointLength=yt,Rt.spotLength=mt,Rt.rectAreaLength=At,Rt.hemiLength=vt,Rt.numDirectionalShadows=Et,Rt.numPointShadows=Ct,Rt.numSpotShadows=Tt,Rt.numSpotMaps=bt,rt.version=nextVersion++)}function lt(ct,ut){let ft=0,pt=0,gt=0,xt=0,yt=0;const mt=ut.matrixWorldInverse;for(let At=0,vt=ct.length;At<vt;At++){const Et=ct[At];if(Et.isDirectionalLight){const Ct=rt.directional[ft];Ct.direction.setFromMatrixPosition(Et.matrixWorld),it.setFromMatrixPosition(Et.target.matrixWorld),Ct.direction.sub(it),Ct.direction.transformDirection(mt),ft++}else if(Et.isSpotLight){const Ct=rt.spot[gt];Ct.position.setFromMatrixPosition(Et.matrixWorld),Ct.position.applyMatrix4(mt),Ct.direction.setFromMatrixPosition(Et.matrixWorld),it.setFromMatrixPosition(Et.target.matrixWorld),Ct.direction.sub(it),Ct.direction.transformDirection(mt),gt++}else if(Et.isRectAreaLight){const Ct=rt.rectArea[xt];Ct.position.setFromMatrixPosition(Et.matrixWorld),Ct.position.applyMatrix4(mt),ot.identity(),at.copy(Et.matrixWorld),at.premultiply(mt),ot.extractRotation(at),Ct.halfWidth.set(Et.width*.5,0,0),Ct.halfHeight.set(0,Et.height*.5,0),Ct.halfWidth.applyMatrix4(ot),Ct.halfHeight.applyMatrix4(ot),xt++}else if(Et.isPointLight){const Ct=rt.point[pt];Ct.position.setFromMatrixPosition(Et.matrixWorld),Ct.position.applyMatrix4(mt),pt++}else if(Et.isHemisphereLight){const Ct=rt.hemi[yt];Ct.direction.setFromMatrixPosition(Et.matrixWorld),Ct.direction.transformDirection(mt),yt++}}}return{setup:st,setupView:lt,state:rt}}function WebGLRenderState(_e,_){const tt=new WebGLLights(_e,_),nt=[],rt=[];function it(){nt.length=0,rt.length=0}function at(ut){nt.push(ut)}function ot(ut){rt.push(ut)}function st(ut){tt.setup(nt,ut)}function lt(ut){tt.setupView(nt,ut)}return{init:it,state:{lightsArray:nt,shadowsArray:rt,lights:tt},setupLights:st,setupLightsView:lt,pushLight:at,pushShadow:ot}}function WebGLRenderStates(_e,_){let tt=new WeakMap;function nt(it,at=0){const ot=tt.get(it);let st;return ot===void 0?(st=new WebGLRenderState(_e,_),tt.set(it,[st])):at>=ot.length?(st=new WebGLRenderState(_e,_),ot.push(st)):st=ot[at],st}function rt(){tt=new WeakMap}return{get:nt,dispose:rt}}class MeshDepthMaterial extends Material{constructor(_){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(_)}copy(_){return super.copy(_),this.depthPacking=_.depthPacking,this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(_){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(_)}copy(_){return super.copy(_),this.map=_.map,this.alphaMap=_.alphaMap,this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(_e,_,tt){let nt=new Frustum;const rt=new Vector2,it=new Vector2,at=new Vector4,ot=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),st=new MeshDistanceMaterial,lt={},ct=tt.maxTextureSize,ut={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},ft=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),pt=ft.clone();pt.defines.HORIZONTAL_PASS=1;const gt=new BufferGeometry;gt.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const xt=new Mesh(gt,ft),yt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let mt=this.type;this.render=function(Ct,Tt,bt){if(yt.enabled===!1||yt.autoUpdate===!1&&yt.needsUpdate===!1||Ct.length===0)return;const It=_e.getRenderTarget(),wt=_e.getActiveCubeFace(),Rt=_e.getActiveMipmapLevel(),Ft=_e.state;Ft.setBlending(NoBlending),Ft.buffers.color.setClear(1,1,1,1),Ft.buffers.depth.setTest(!0),Ft.setScissorTest(!1);const Ut=mt!==VSMShadowMap&&this.type===VSMShadowMap,Gt=mt===VSMShadowMap&&this.type!==VSMShadowMap;for(let Ht=0,jt=Ct.length;Ht<jt;Ht++){const Xt=Ct[Ht],Jt=Xt.shadow;if(Jt===void 0){console.warn("THREE.WebGLShadowMap:",Xt,"has no shadow.");continue}if(Jt.autoUpdate===!1&&Jt.needsUpdate===!1)continue;rt.copy(Jt.mapSize);const Dt=Jt.getFrameExtents();if(rt.multiply(Dt),it.copy(Jt.mapSize),(rt.x>ct||rt.y>ct)&&(rt.x>ct&&(it.x=Math.floor(ct/Dt.x),rt.x=it.x*Dt.x,Jt.mapSize.x=it.x),rt.y>ct&&(it.y=Math.floor(ct/Dt.y),rt.y=it.y*Dt.y,Jt.mapSize.y=it.y)),Jt.map===null||Ut===!0||Gt===!0){const $t=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Jt.map!==null&&Jt.map.dispose(),Jt.map=new WebGLRenderTarget(rt.x,rt.y,$t),Jt.map.texture.name=Xt.name+".shadowMap",Jt.camera.updateProjectionMatrix()}_e.setRenderTarget(Jt.map),_e.clear();const zt=Jt.getViewportCount();for(let $t=0;$t<zt;$t++){const Lt=Jt.getViewport($t);at.set(it.x*Lt.x,it.y*Lt.y,it.x*Lt.z,it.y*Lt.w),Ft.viewport(at),Jt.updateMatrices(Xt,$t),nt=Jt.getFrustum(),Et(Tt,bt,Jt.camera,Xt,this.type)}Jt.isPointLightShadow!==!0&&this.type===VSMShadowMap&&At(Jt,bt),Jt.needsUpdate=!1}mt=this.type,yt.needsUpdate=!1,_e.setRenderTarget(It,wt,Rt)};function At(Ct,Tt){const bt=_.update(xt);ft.defines.VSM_SAMPLES!==Ct.blurSamples&&(ft.defines.VSM_SAMPLES=Ct.blurSamples,pt.defines.VSM_SAMPLES=Ct.blurSamples,ft.needsUpdate=!0,pt.needsUpdate=!0),Ct.mapPass===null&&(Ct.mapPass=new WebGLRenderTarget(rt.x,rt.y)),ft.uniforms.shadow_pass.value=Ct.map.texture,ft.uniforms.resolution.value=Ct.mapSize,ft.uniforms.radius.value=Ct.radius,_e.setRenderTarget(Ct.mapPass),_e.clear(),_e.renderBufferDirect(Tt,null,bt,ft,xt,null),pt.uniforms.shadow_pass.value=Ct.mapPass.texture,pt.uniforms.resolution.value=Ct.mapSize,pt.uniforms.radius.value=Ct.radius,_e.setRenderTarget(Ct.map),_e.clear(),_e.renderBufferDirect(Tt,null,bt,pt,xt,null)}function vt(Ct,Tt,bt,It){let wt=null;const Rt=bt.isPointLight===!0?Ct.customDistanceMaterial:Ct.customDepthMaterial;if(Rt!==void 0)wt=Rt;else if(wt=bt.isPointLight===!0?st:ot,_e.localClippingEnabled&&Tt.clipShadows===!0&&Array.isArray(Tt.clippingPlanes)&&Tt.clippingPlanes.length!==0||Tt.displacementMap&&Tt.displacementScale!==0||Tt.alphaMap&&Tt.alphaTest>0||Tt.map&&Tt.alphaTest>0){const Ft=wt.uuid,Ut=Tt.uuid;let Gt=lt[Ft];Gt===void 0&&(Gt={},lt[Ft]=Gt);let Ht=Gt[Ut];Ht===void 0&&(Ht=wt.clone(),Gt[Ut]=Ht),wt=Ht}if(wt.visible=Tt.visible,wt.wireframe=Tt.wireframe,It===VSMShadowMap?wt.side=Tt.shadowSide!==null?Tt.shadowSide:Tt.side:wt.side=Tt.shadowSide!==null?Tt.shadowSide:ut[Tt.side],wt.alphaMap=Tt.alphaMap,wt.alphaTest=Tt.alphaTest,wt.map=Tt.map,wt.clipShadows=Tt.clipShadows,wt.clippingPlanes=Tt.clippingPlanes,wt.clipIntersection=Tt.clipIntersection,wt.displacementMap=Tt.displacementMap,wt.displacementScale=Tt.displacementScale,wt.displacementBias=Tt.displacementBias,wt.wireframeLinewidth=Tt.wireframeLinewidth,wt.linewidth=Tt.linewidth,bt.isPointLight===!0&&wt.isMeshDistanceMaterial===!0){const Ft=_e.properties.get(wt);Ft.light=bt}return wt}function Et(Ct,Tt,bt,It,wt){if(Ct.visible===!1)return;if(Ct.layers.test(Tt.layers)&&(Ct.isMesh||Ct.isLine||Ct.isPoints)&&(Ct.castShadow||Ct.receiveShadow&&wt===VSMShadowMap)&&(!Ct.frustumCulled||nt.intersectsObject(Ct))){Ct.modelViewMatrix.multiplyMatrices(bt.matrixWorldInverse,Ct.matrixWorld);const Ut=_.update(Ct),Gt=Ct.material;if(Array.isArray(Gt)){const Ht=Ut.groups;for(let jt=0,Xt=Ht.length;jt<Xt;jt++){const Jt=Ht[jt],Dt=Gt[Jt.materialIndex];if(Dt&&Dt.visible){const zt=vt(Ct,Dt,It,wt);_e.renderBufferDirect(bt,null,Ut,zt,Ct,Jt)}}}else if(Gt.visible){const Ht=vt(Ct,Gt,It,wt);_e.renderBufferDirect(bt,null,Ut,Ht,Ct,null)}}const Ft=Ct.children;for(let Ut=0,Gt=Ft.length;Ut<Gt;Ut++)Et(Ft[Ut],Tt,bt,It,wt)}}function WebGLState(_e,_,tt){const nt=tt.isWebGL2;function rt(){let nn=!1;const pn=new Vector4;let An=null;const Hn=new Vector4(0,0,0,0);return{setMask:function(Jn){An!==Jn&&!nn&&(_e.colorMask(Jn,Jn,Jn,Jn),An=Jn)},setLocked:function(Jn){nn=Jn},setClear:function(Jn,Ar,Er,Tr,Rr){Rr===!0&&(Jn*=Tr,Ar*=Tr,Er*=Tr),pn.set(Jn,Ar,Er,Tr),Hn.equals(pn)===!1&&(_e.clearColor(Jn,Ar,Er,Tr),Hn.copy(pn))},reset:function(){nn=!1,An=null,Hn.set(-1,0,0,0)}}}function it(){let nn=!1,pn=null,An=null,Hn=null;return{setTest:function(Jn){Jn?ln(_e.DEPTH_TEST):cn(_e.DEPTH_TEST)},setMask:function(Jn){pn!==Jn&&!nn&&(_e.depthMask(Jn),pn=Jn)},setFunc:function(Jn){if(An!==Jn){switch(Jn){case NeverDepth:_e.depthFunc(_e.NEVER);break;case AlwaysDepth:_e.depthFunc(_e.ALWAYS);break;case LessDepth:_e.depthFunc(_e.LESS);break;case LessEqualDepth:_e.depthFunc(_e.LEQUAL);break;case EqualDepth:_e.depthFunc(_e.EQUAL);break;case GreaterEqualDepth:_e.depthFunc(_e.GEQUAL);break;case GreaterDepth:_e.depthFunc(_e.GREATER);break;case NotEqualDepth:_e.depthFunc(_e.NOTEQUAL);break;default:_e.depthFunc(_e.LEQUAL)}An=Jn}},setLocked:function(Jn){nn=Jn},setClear:function(Jn){Hn!==Jn&&(_e.clearDepth(Jn),Hn=Jn)},reset:function(){nn=!1,pn=null,An=null,Hn=null}}}function at(){let nn=!1,pn=null,An=null,Hn=null,Jn=null,Ar=null,Er=null,Tr=null,Rr=null;return{setTest:function(Pr){nn||(Pr?ln(_e.STENCIL_TEST):cn(_e.STENCIL_TEST))},setMask:function(Pr){pn!==Pr&&!nn&&(_e.stencilMask(Pr),pn=Pr)},setFunc:function(Pr,Mr,_r){(An!==Pr||Hn!==Mr||Jn!==_r)&&(_e.stencilFunc(Pr,Mr,_r),An=Pr,Hn=Mr,Jn=_r)},setOp:function(Pr,Mr,_r){(Ar!==Pr||Er!==Mr||Tr!==_r)&&(_e.stencilOp(Pr,Mr,_r),Ar=Pr,Er=Mr,Tr=_r)},setLocked:function(Pr){nn=Pr},setClear:function(Pr){Rr!==Pr&&(_e.clearStencil(Pr),Rr=Pr)},reset:function(){nn=!1,pn=null,An=null,Hn=null,Jn=null,Ar=null,Er=null,Tr=null,Rr=null}}}const ot=new rt,st=new it,lt=new at,ct=new WeakMap,ut=new WeakMap;let ft={},pt={},gt=new WeakMap,xt=[],yt=null,mt=!1,At=null,vt=null,Et=null,Ct=null,Tt=null,bt=null,It=null,wt=!1,Rt=null,Ft=null,Ut=null,Gt=null,Ht=null;const jt=_e.getParameter(_e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Xt=!1,Jt=0;const Dt=_e.getParameter(_e.VERSION);Dt.indexOf("WebGL")!==-1?(Jt=parseFloat(/^WebGL (\d)/.exec(Dt)[1]),Xt=Jt>=1):Dt.indexOf("OpenGL ES")!==-1&&(Jt=parseFloat(/^OpenGL ES (\d)/.exec(Dt)[1]),Xt=Jt>=2);let zt=null,$t={};const Lt=_e.getParameter(_e.SCISSOR_BOX),Vt=_e.getParameter(_e.VIEWPORT),tn=new Vector4().fromArray(Lt),an=new Vector4().fromArray(Vt);function on(nn,pn,An,Hn){const Jn=new Uint8Array(4),Ar=_e.createTexture();_e.bindTexture(nn,Ar),_e.texParameteri(nn,_e.TEXTURE_MIN_FILTER,_e.NEAREST),_e.texParameteri(nn,_e.TEXTURE_MAG_FILTER,_e.NEAREST);for(let Er=0;Er<An;Er++)nt&&(nn===_e.TEXTURE_3D||nn===_e.TEXTURE_2D_ARRAY)?_e.texImage3D(pn,0,_e.RGBA,1,1,Hn,0,_e.RGBA,_e.UNSIGNED_BYTE,Jn):_e.texImage2D(pn+Er,0,_e.RGBA,1,1,0,_e.RGBA,_e.UNSIGNED_BYTE,Jn);return Ar}const sn={};sn[_e.TEXTURE_2D]=on(_e.TEXTURE_2D,_e.TEXTURE_2D,1),sn[_e.TEXTURE_CUBE_MAP]=on(_e.TEXTURE_CUBE_MAP,_e.TEXTURE_CUBE_MAP_POSITIVE_X,6),nt&&(sn[_e.TEXTURE_2D_ARRAY]=on(_e.TEXTURE_2D_ARRAY,_e.TEXTURE_2D_ARRAY,1,1),sn[_e.TEXTURE_3D]=on(_e.TEXTURE_3D,_e.TEXTURE_3D,1,1)),ot.setClear(0,0,0,1),st.setClear(1),lt.setClear(0),ln(_e.DEPTH_TEST),st.setFunc(LessEqualDepth),mn(!1),Wn(CullFaceBack),ln(_e.CULL_FACE),gn(NoBlending);function ln(nn){ft[nn]!==!0&&(_e.enable(nn),ft[nn]=!0)}function cn(nn){ft[nn]!==!1&&(_e.disable(nn),ft[nn]=!1)}function In(nn,pn){return pt[nn]!==pn?(_e.bindFramebuffer(nn,pn),pt[nn]=pn,nt&&(nn===_e.DRAW_FRAMEBUFFER&&(pt[_e.FRAMEBUFFER]=pn),nn===_e.FRAMEBUFFER&&(pt[_e.DRAW_FRAMEBUFFER]=pn)),!0):!1}function zn(nn,pn){let An=xt,Hn=!1;if(nn)if(An=gt.get(pn),An===void 0&&(An=[],gt.set(pn,An)),nn.isWebGLMultipleRenderTargets){const Jn=nn.texture;if(An.length!==Jn.length||An[0]!==_e.COLOR_ATTACHMENT0){for(let Ar=0,Er=Jn.length;Ar<Er;Ar++)An[Ar]=_e.COLOR_ATTACHMENT0+Ar;An.length=Jn.length,Hn=!0}}else An[0]!==_e.COLOR_ATTACHMENT0&&(An[0]=_e.COLOR_ATTACHMENT0,Hn=!0);else An[0]!==_e.BACK&&(An[0]=_e.BACK,Hn=!0);Hn&&(tt.isWebGL2?_e.drawBuffers(An):_.get("WEBGL_draw_buffers").drawBuffersWEBGL(An))}function yn(nn){return yt!==nn?(_e.useProgram(nn),yt=nn,!0):!1}const Wt={[AddEquation]:_e.FUNC_ADD,[SubtractEquation]:_e.FUNC_SUBTRACT,[ReverseSubtractEquation]:_e.FUNC_REVERSE_SUBTRACT};if(nt)Wt[MinEquation]=_e.MIN,Wt[MaxEquation]=_e.MAX;else{const nn=_.get("EXT_blend_minmax");nn!==null&&(Wt[MinEquation]=nn.MIN_EXT,Wt[MaxEquation]=nn.MAX_EXT)}const _n={[ZeroFactor]:_e.ZERO,[OneFactor]:_e.ONE,[SrcColorFactor]:_e.SRC_COLOR,[SrcAlphaFactor]:_e.SRC_ALPHA,[SrcAlphaSaturateFactor]:_e.SRC_ALPHA_SATURATE,[DstColorFactor]:_e.DST_COLOR,[DstAlphaFactor]:_e.DST_ALPHA,[OneMinusSrcColorFactor]:_e.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:_e.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:_e.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:_e.ONE_MINUS_DST_ALPHA};function gn(nn,pn,An,Hn,Jn,Ar,Er,Tr){if(nn===NoBlending){mt===!0&&(cn(_e.BLEND),mt=!1);return}if(mt===!1&&(ln(_e.BLEND),mt=!0),nn!==CustomBlending){if(nn!==At||Tr!==wt){if((vt!==AddEquation||Tt!==AddEquation)&&(_e.blendEquation(_e.FUNC_ADD),vt=AddEquation,Tt=AddEquation),Tr)switch(nn){case NormalBlending:_e.blendFuncSeparate(_e.ONE,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:_e.blendFunc(_e.ONE,_e.ONE);break;case SubtractiveBlending:_e.blendFuncSeparate(_e.ZERO,_e.ONE_MINUS_SRC_COLOR,_e.ZERO,_e.ONE);break;case MultiplyBlending:_e.blendFuncSeparate(_e.ZERO,_e.SRC_COLOR,_e.ZERO,_e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",nn);break}else switch(nn){case NormalBlending:_e.blendFuncSeparate(_e.SRC_ALPHA,_e.ONE_MINUS_SRC_ALPHA,_e.ONE,_e.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:_e.blendFunc(_e.SRC_ALPHA,_e.ONE);break;case SubtractiveBlending:_e.blendFuncSeparate(_e.ZERO,_e.ONE_MINUS_SRC_COLOR,_e.ZERO,_e.ONE);break;case MultiplyBlending:_e.blendFunc(_e.ZERO,_e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",nn);break}Et=null,Ct=null,bt=null,It=null,At=nn,wt=Tr}return}Jn=Jn||pn,Ar=Ar||An,Er=Er||Hn,(pn!==vt||Jn!==Tt)&&(_e.blendEquationSeparate(Wt[pn],Wt[Jn]),vt=pn,Tt=Jn),(An!==Et||Hn!==Ct||Ar!==bt||Er!==It)&&(_e.blendFuncSeparate(_n[An],_n[Hn],_n[Ar],_n[Er]),Et=An,Ct=Hn,bt=Ar,It=Er),At=nn,wt=!1}function vn(nn,pn){nn.side===DoubleSide?cn(_e.CULL_FACE):ln(_e.CULL_FACE);let An=nn.side===BackSide;pn&&(An=!An),mn(An),nn.blending===NormalBlending&&nn.transparent===!1?gn(NoBlending):gn(nn.blending,nn.blendEquation,nn.blendSrc,nn.blendDst,nn.blendEquationAlpha,nn.blendSrcAlpha,nn.blendDstAlpha,nn.premultipliedAlpha),st.setFunc(nn.depthFunc),st.setTest(nn.depthTest),st.setMask(nn.depthWrite),ot.setMask(nn.colorWrite);const Hn=nn.stencilWrite;lt.setTest(Hn),Hn&&(lt.setMask(nn.stencilWriteMask),lt.setFunc(nn.stencilFunc,nn.stencilRef,nn.stencilFuncMask),lt.setOp(nn.stencilFail,nn.stencilZFail,nn.stencilZPass)),Dn(nn.polygonOffset,nn.polygonOffsetFactor,nn.polygonOffsetUnits),nn.alphaToCoverage===!0?ln(_e.SAMPLE_ALPHA_TO_COVERAGE):cn(_e.SAMPLE_ALPHA_TO_COVERAGE)}function mn(nn){Rt!==nn&&(nn?_e.frontFace(_e.CW):_e.frontFace(_e.CCW),Rt=nn)}function Wn(nn){nn!==CullFaceNone?(ln(_e.CULL_FACE),nn!==Ft&&(nn===CullFaceBack?_e.cullFace(_e.BACK):nn===CullFaceFront?_e.cullFace(_e.FRONT):_e.cullFace(_e.FRONT_AND_BACK))):cn(_e.CULL_FACE),Ft=nn}function xn(nn){nn!==Ut&&(Xt&&_e.lineWidth(nn),Ut=nn)}function Dn(nn,pn,An){nn?(ln(_e.POLYGON_OFFSET_FILL),(Gt!==pn||Ht!==An)&&(_e.polygonOffset(pn,An),Gt=pn,Ht=An)):cn(_e.POLYGON_OFFSET_FILL)}function Fn(nn){nn?ln(_e.SCISSOR_TEST):cn(_e.SCISSOR_TEST)}function bn(nn){nn===void 0&&(nn=_e.TEXTURE0+jt-1),zt!==nn&&(_e.activeTexture(nn),zt=nn)}function jn(nn,pn,An){An===void 0&&(zt===null?An=_e.TEXTURE0+jt-1:An=zt);let Hn=$t[An];Hn===void 0&&(Hn={type:void 0,texture:void 0},$t[An]=Hn),(Hn.type!==nn||Hn.texture!==pn)&&(zt!==An&&(_e.activeTexture(An),zt=An),_e.bindTexture(nn,pn||sn[nn]),Hn.type=nn,Hn.texture=pn)}function Nt(){const nn=$t[zt];nn!==void 0&&nn.type!==void 0&&(_e.bindTexture(nn.type,null),nn.type=void 0,nn.texture=void 0)}function kt(){try{_e.compressedTexImage2D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function rn(){try{_e.compressedTexImage3D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function Mn(){try{_e.texSubImage2D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function wn(){try{_e.texSubImage3D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function Tn(){try{_e.compressedTexSubImage2D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function Gn(){try{_e.compressedTexSubImage3D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function Un(){try{_e.texStorage2D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function dn(){try{_e.texStorage3D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function Vn(){try{_e.texImage2D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function Qn(){try{_e.texImage3D.apply(_e,arguments)}catch(nn){console.error("THREE.WebGLState:",nn)}}function Nn(nn){tn.equals(nn)===!1&&(_e.scissor(nn.x,nn.y,nn.z,nn.w),tn.copy(nn))}function kn(nn){an.equals(nn)===!1&&(_e.viewport(nn.x,nn.y,nn.z,nn.w),an.copy(nn))}function $n(nn,pn){let An=ut.get(pn);An===void 0&&(An=new WeakMap,ut.set(pn,An));let Hn=An.get(nn);Hn===void 0&&(Hn=_e.getUniformBlockIndex(pn,nn.name),An.set(nn,Hn))}function Yn(nn,pn){const Hn=ut.get(pn).get(nn);ct.get(pn)!==Hn&&(_e.uniformBlockBinding(pn,Hn,nn.__bindingPointIndex),ct.set(pn,Hn))}function tr(){_e.disable(_e.BLEND),_e.disable(_e.CULL_FACE),_e.disable(_e.DEPTH_TEST),_e.disable(_e.POLYGON_OFFSET_FILL),_e.disable(_e.SCISSOR_TEST),_e.disable(_e.STENCIL_TEST),_e.disable(_e.SAMPLE_ALPHA_TO_COVERAGE),_e.blendEquation(_e.FUNC_ADD),_e.blendFunc(_e.ONE,_e.ZERO),_e.blendFuncSeparate(_e.ONE,_e.ZERO,_e.ONE,_e.ZERO),_e.colorMask(!0,!0,!0,!0),_e.clearColor(0,0,0,0),_e.depthMask(!0),_e.depthFunc(_e.LESS),_e.clearDepth(1),_e.stencilMask(4294967295),_e.stencilFunc(_e.ALWAYS,0,4294967295),_e.stencilOp(_e.KEEP,_e.KEEP,_e.KEEP),_e.clearStencil(0),_e.cullFace(_e.BACK),_e.frontFace(_e.CCW),_e.polygonOffset(0,0),_e.activeTexture(_e.TEXTURE0),_e.bindFramebuffer(_e.FRAMEBUFFER,null),nt===!0&&(_e.bindFramebuffer(_e.DRAW_FRAMEBUFFER,null),_e.bindFramebuffer(_e.READ_FRAMEBUFFER,null)),_e.useProgram(null),_e.lineWidth(1),_e.scissor(0,0,_e.canvas.width,_e.canvas.height),_e.viewport(0,0,_e.canvas.width,_e.canvas.height),ft={},zt=null,$t={},pt={},gt=new WeakMap,xt=[],yt=null,mt=!1,At=null,vt=null,Et=null,Ct=null,Tt=null,bt=null,It=null,wt=!1,Rt=null,Ft=null,Ut=null,Gt=null,Ht=null,tn.set(0,0,_e.canvas.width,_e.canvas.height),an.set(0,0,_e.canvas.width,_e.canvas.height),ot.reset(),st.reset(),lt.reset()}return{buffers:{color:ot,depth:st,stencil:lt},enable:ln,disable:cn,bindFramebuffer:In,drawBuffers:zn,useProgram:yn,setBlending:gn,setMaterial:vn,setFlipSided:mn,setCullFace:Wn,setLineWidth:xn,setPolygonOffset:Dn,setScissorTest:Fn,activeTexture:bn,bindTexture:jn,unbindTexture:Nt,compressedTexImage2D:kt,compressedTexImage3D:rn,texImage2D:Vn,texImage3D:Qn,updateUBOMapping:$n,uniformBlockBinding:Yn,texStorage2D:Un,texStorage3D:dn,texSubImage2D:Mn,texSubImage3D:wn,compressedTexSubImage2D:Tn,compressedTexSubImage3D:Gn,scissor:Nn,viewport:kn,reset:tr}}function WebGLTextures(_e,_,tt,nt,rt,it,at){const ot=rt.isWebGL2,st=rt.maxTextures,lt=rt.maxCubemapSize,ct=rt.maxTextureSize,ut=rt.maxSamples,ft=_.has("WEBGL_multisampled_render_to_texture")?_.get("WEBGL_multisampled_render_to_texture"):null,pt=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),gt=new WeakMap;let xt;const yt=new WeakMap;let mt=!1;try{mt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function At(Nt,kt){return mt?new OffscreenCanvas(Nt,kt):createElementNS("canvas")}function vt(Nt,kt,rn,Mn){let wn=1;if((Nt.width>Mn||Nt.height>Mn)&&(wn=Mn/Math.max(Nt.width,Nt.height)),wn<1||kt===!0)if(typeof HTMLImageElement<"u"&&Nt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Nt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Nt instanceof ImageBitmap){const Tn=kt?floorPowerOfTwo:Math.floor,Gn=Tn(wn*Nt.width),Un=Tn(wn*Nt.height);xt===void 0&&(xt=At(Gn,Un));const dn=rn?At(Gn,Un):xt;return dn.width=Gn,dn.height=Un,dn.getContext("2d").drawImage(Nt,0,0,Gn,Un),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Nt.width+"x"+Nt.height+") to ("+Gn+"x"+Un+")."),dn}else return"data"in Nt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Nt.width+"x"+Nt.height+")."),Nt;return Nt}function Et(Nt){return isPowerOfTwo(Nt.width)&&isPowerOfTwo(Nt.height)}function Ct(Nt){return ot?!1:Nt.wrapS!==ClampToEdgeWrapping||Nt.wrapT!==ClampToEdgeWrapping||Nt.minFilter!==NearestFilter&&Nt.minFilter!==LinearFilter}function Tt(Nt,kt){return Nt.generateMipmaps&&kt&&Nt.minFilter!==NearestFilter&&Nt.minFilter!==LinearFilter}function bt(Nt){_e.generateMipmap(Nt)}function It(Nt,kt,rn,Mn,wn=!1){if(ot===!1)return kt;if(Nt!==null){if(_e[Nt]!==void 0)return _e[Nt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Nt+"'")}let Tn=kt;return kt===_e.RED&&(rn===_e.FLOAT&&(Tn=_e.R32F),rn===_e.HALF_FLOAT&&(Tn=_e.R16F),rn===_e.UNSIGNED_BYTE&&(Tn=_e.R8)),kt===_e.RED_INTEGER&&(rn===_e.UNSIGNED_BYTE&&(Tn=_e.R8UI),rn===_e.UNSIGNED_SHORT&&(Tn=_e.R16UI),rn===_e.UNSIGNED_INT&&(Tn=_e.R32UI),rn===_e.BYTE&&(Tn=_e.R8I),rn===_e.SHORT&&(Tn=_e.R16I),rn===_e.INT&&(Tn=_e.R32I)),kt===_e.RG&&(rn===_e.FLOAT&&(Tn=_e.RG32F),rn===_e.HALF_FLOAT&&(Tn=_e.RG16F),rn===_e.UNSIGNED_BYTE&&(Tn=_e.RG8)),kt===_e.RGBA&&(rn===_e.FLOAT&&(Tn=_e.RGBA32F),rn===_e.HALF_FLOAT&&(Tn=_e.RGBA16F),rn===_e.UNSIGNED_BYTE&&(Tn=Mn===SRGBColorSpace&&wn===!1?_e.SRGB8_ALPHA8:_e.RGBA8),rn===_e.UNSIGNED_SHORT_4_4_4_4&&(Tn=_e.RGBA4),rn===_e.UNSIGNED_SHORT_5_5_5_1&&(Tn=_e.RGB5_A1)),(Tn===_e.R16F||Tn===_e.R32F||Tn===_e.RG16F||Tn===_e.RG32F||Tn===_e.RGBA16F||Tn===_e.RGBA32F)&&_.get("EXT_color_buffer_float"),Tn}function wt(Nt,kt,rn){return Tt(Nt,rn)===!0||Nt.isFramebufferTexture&&Nt.minFilter!==NearestFilter&&Nt.minFilter!==LinearFilter?Math.log2(Math.max(kt.width,kt.height))+1:Nt.mipmaps!==void 0&&Nt.mipmaps.length>0?Nt.mipmaps.length:Nt.isCompressedTexture&&Array.isArray(Nt.image)?kt.mipmaps.length:1}function Rt(Nt){return Nt===NearestFilter||Nt===NearestMipmapNearestFilter||Nt===NearestMipmapLinearFilter?_e.NEAREST:_e.LINEAR}function Ft(Nt){const kt=Nt.target;kt.removeEventListener("dispose",Ft),Gt(kt),kt.isVideoTexture&&gt.delete(kt)}function Ut(Nt){const kt=Nt.target;kt.removeEventListener("dispose",Ut),jt(kt)}function Gt(Nt){const kt=nt.get(Nt);if(kt.__webglInit===void 0)return;const rn=Nt.source,Mn=yt.get(rn);if(Mn){const wn=Mn[kt.__cacheKey];wn.usedTimes--,wn.usedTimes===0&&Ht(Nt),Object.keys(Mn).length===0&&yt.delete(rn)}nt.remove(Nt)}function Ht(Nt){const kt=nt.get(Nt);_e.deleteTexture(kt.__webglTexture);const rn=Nt.source,Mn=yt.get(rn);delete Mn[kt.__cacheKey],at.memory.textures--}function jt(Nt){const kt=Nt.texture,rn=nt.get(Nt),Mn=nt.get(kt);if(Mn.__webglTexture!==void 0&&(_e.deleteTexture(Mn.__webglTexture),at.memory.textures--),Nt.depthTexture&&Nt.depthTexture.dispose(),Nt.isWebGLCubeRenderTarget)for(let wn=0;wn<6;wn++){if(Array.isArray(rn.__webglFramebuffer[wn]))for(let Tn=0;Tn<rn.__webglFramebuffer[wn].length;Tn++)_e.deleteFramebuffer(rn.__webglFramebuffer[wn][Tn]);else _e.deleteFramebuffer(rn.__webglFramebuffer[wn]);rn.__webglDepthbuffer&&_e.deleteRenderbuffer(rn.__webglDepthbuffer[wn])}else{if(Array.isArray(rn.__webglFramebuffer))for(let wn=0;wn<rn.__webglFramebuffer.length;wn++)_e.deleteFramebuffer(rn.__webglFramebuffer[wn]);else _e.deleteFramebuffer(rn.__webglFramebuffer);if(rn.__webglDepthbuffer&&_e.deleteRenderbuffer(rn.__webglDepthbuffer),rn.__webglMultisampledFramebuffer&&_e.deleteFramebuffer(rn.__webglMultisampledFramebuffer),rn.__webglColorRenderbuffer)for(let wn=0;wn<rn.__webglColorRenderbuffer.length;wn++)rn.__webglColorRenderbuffer[wn]&&_e.deleteRenderbuffer(rn.__webglColorRenderbuffer[wn]);rn.__webglDepthRenderbuffer&&_e.deleteRenderbuffer(rn.__webglDepthRenderbuffer)}if(Nt.isWebGLMultipleRenderTargets)for(let wn=0,Tn=kt.length;wn<Tn;wn++){const Gn=nt.get(kt[wn]);Gn.__webglTexture&&(_e.deleteTexture(Gn.__webglTexture),at.memory.textures--),nt.remove(kt[wn])}nt.remove(kt),nt.remove(Nt)}let Xt=0;function Jt(){Xt=0}function Dt(){const Nt=Xt;return Nt>=st&&console.warn("THREE.WebGLTextures: Trying to use "+Nt+" texture units while this GPU supports only "+st),Xt+=1,Nt}function zt(Nt){const kt=[];return kt.push(Nt.wrapS),kt.push(Nt.wrapT),kt.push(Nt.wrapR||0),kt.push(Nt.magFilter),kt.push(Nt.minFilter),kt.push(Nt.anisotropy),kt.push(Nt.internalFormat),kt.push(Nt.format),kt.push(Nt.type),kt.push(Nt.generateMipmaps),kt.push(Nt.premultiplyAlpha),kt.push(Nt.flipY),kt.push(Nt.unpackAlignment),kt.push(Nt.colorSpace),kt.join()}function $t(Nt,kt){const rn=nt.get(Nt);if(Nt.isVideoTexture&&bn(Nt),Nt.isRenderTargetTexture===!1&&Nt.version>0&&rn.__version!==Nt.version){const Mn=Nt.image;if(Mn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Mn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{In(rn,Nt,kt);return}}tt.bindTexture(_e.TEXTURE_2D,rn.__webglTexture,_e.TEXTURE0+kt)}function Lt(Nt,kt){const rn=nt.get(Nt);if(Nt.version>0&&rn.__version!==Nt.version){In(rn,Nt,kt);return}tt.bindTexture(_e.TEXTURE_2D_ARRAY,rn.__webglTexture,_e.TEXTURE0+kt)}function Vt(Nt,kt){const rn=nt.get(Nt);if(Nt.version>0&&rn.__version!==Nt.version){In(rn,Nt,kt);return}tt.bindTexture(_e.TEXTURE_3D,rn.__webglTexture,_e.TEXTURE0+kt)}function tn(Nt,kt){const rn=nt.get(Nt);if(Nt.version>0&&rn.__version!==Nt.version){zn(rn,Nt,kt);return}tt.bindTexture(_e.TEXTURE_CUBE_MAP,rn.__webglTexture,_e.TEXTURE0+kt)}const an={[RepeatWrapping]:_e.REPEAT,[ClampToEdgeWrapping]:_e.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:_e.MIRRORED_REPEAT},on={[NearestFilter]:_e.NEAREST,[NearestMipmapNearestFilter]:_e.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:_e.NEAREST_MIPMAP_LINEAR,[LinearFilter]:_e.LINEAR,[LinearMipmapNearestFilter]:_e.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:_e.LINEAR_MIPMAP_LINEAR},sn={[NeverCompare]:_e.NEVER,[AlwaysCompare]:_e.ALWAYS,[LessCompare]:_e.LESS,[LessEqualCompare]:_e.LEQUAL,[EqualCompare]:_e.EQUAL,[GreaterEqualCompare]:_e.GEQUAL,[GreaterCompare]:_e.GREATER,[NotEqualCompare]:_e.NOTEQUAL};function ln(Nt,kt,rn){if(rn?(_e.texParameteri(Nt,_e.TEXTURE_WRAP_S,an[kt.wrapS]),_e.texParameteri(Nt,_e.TEXTURE_WRAP_T,an[kt.wrapT]),(Nt===_e.TEXTURE_3D||Nt===_e.TEXTURE_2D_ARRAY)&&_e.texParameteri(Nt,_e.TEXTURE_WRAP_R,an[kt.wrapR]),_e.texParameteri(Nt,_e.TEXTURE_MAG_FILTER,on[kt.magFilter]),_e.texParameteri(Nt,_e.TEXTURE_MIN_FILTER,on[kt.minFilter])):(_e.texParameteri(Nt,_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),_e.texParameteri(Nt,_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),(Nt===_e.TEXTURE_3D||Nt===_e.TEXTURE_2D_ARRAY)&&_e.texParameteri(Nt,_e.TEXTURE_WRAP_R,_e.CLAMP_TO_EDGE),(kt.wrapS!==ClampToEdgeWrapping||kt.wrapT!==ClampToEdgeWrapping)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),_e.texParameteri(Nt,_e.TEXTURE_MAG_FILTER,Rt(kt.magFilter)),_e.texParameteri(Nt,_e.TEXTURE_MIN_FILTER,Rt(kt.minFilter)),kt.minFilter!==NearestFilter&&kt.minFilter!==LinearFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),kt.compareFunction&&(_e.texParameteri(Nt,_e.TEXTURE_COMPARE_MODE,_e.COMPARE_REF_TO_TEXTURE),_e.texParameteri(Nt,_e.TEXTURE_COMPARE_FUNC,sn[kt.compareFunction])),_.has("EXT_texture_filter_anisotropic")===!0){const Mn=_.get("EXT_texture_filter_anisotropic");if(kt.magFilter===NearestFilter||kt.minFilter!==NearestMipmapLinearFilter&&kt.minFilter!==LinearMipmapLinearFilter||kt.type===FloatType&&_.has("OES_texture_float_linear")===!1||ot===!1&&kt.type===HalfFloatType&&_.has("OES_texture_half_float_linear")===!1)return;(kt.anisotropy>1||nt.get(kt).__currentAnisotropy)&&(_e.texParameterf(Nt,Mn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(kt.anisotropy,rt.getMaxAnisotropy())),nt.get(kt).__currentAnisotropy=kt.anisotropy)}}function cn(Nt,kt){let rn=!1;Nt.__webglInit===void 0&&(Nt.__webglInit=!0,kt.addEventListener("dispose",Ft));const Mn=kt.source;let wn=yt.get(Mn);wn===void 0&&(wn={},yt.set(Mn,wn));const Tn=zt(kt);if(Tn!==Nt.__cacheKey){wn[Tn]===void 0&&(wn[Tn]={texture:_e.createTexture(),usedTimes:0},at.memory.textures++,rn=!0),wn[Tn].usedTimes++;const Gn=wn[Nt.__cacheKey];Gn!==void 0&&(wn[Nt.__cacheKey].usedTimes--,Gn.usedTimes===0&&Ht(kt)),Nt.__cacheKey=Tn,Nt.__webglTexture=wn[Tn].texture}return rn}function In(Nt,kt,rn){let Mn=_e.TEXTURE_2D;(kt.isDataArrayTexture||kt.isCompressedArrayTexture)&&(Mn=_e.TEXTURE_2D_ARRAY),kt.isData3DTexture&&(Mn=_e.TEXTURE_3D);const wn=cn(Nt,kt),Tn=kt.source;tt.bindTexture(Mn,Nt.__webglTexture,_e.TEXTURE0+rn);const Gn=nt.get(Tn);if(Tn.version!==Gn.__version||wn===!0){tt.activeTexture(_e.TEXTURE0+rn),_e.pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,kt.flipY),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,kt.premultiplyAlpha),_e.pixelStorei(_e.UNPACK_ALIGNMENT,kt.unpackAlignment),_e.pixelStorei(_e.UNPACK_COLORSPACE_CONVERSION_WEBGL,_e.NONE);const Un=Ct(kt)&&Et(kt.image)===!1;let dn=vt(kt.image,Un,!1,ct);dn=jn(kt,dn);const Vn=Et(dn)||ot,Qn=it.convert(kt.format,kt.colorSpace);let Nn=it.convert(kt.type),kn=It(kt.internalFormat,Qn,Nn,kt.colorSpace,kt.isVideoTexture);ln(Mn,kt,Vn);let $n;const Yn=kt.mipmaps,tr=ot&&kt.isVideoTexture!==!0,nn=Gn.__version===void 0||wn===!0,pn=wt(kt,dn,Vn);if(kt.isDepthTexture)kn=_e.DEPTH_COMPONENT,ot?kt.type===FloatType?kn=_e.DEPTH_COMPONENT32F:kt.type===UnsignedIntType?kn=_e.DEPTH_COMPONENT24:kt.type===UnsignedInt248Type?kn=_e.DEPTH24_STENCIL8:kn=_e.DEPTH_COMPONENT16:kt.type===FloatType&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),kt.format===DepthFormat&&kn===_e.DEPTH_COMPONENT&&kt.type!==UnsignedShortType&&kt.type!==UnsignedIntType&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),kt.type=UnsignedIntType,Nn=it.convert(kt.type)),kt.format===DepthStencilFormat&&kn===_e.DEPTH_COMPONENT&&(kn=_e.DEPTH_STENCIL,kt.type!==UnsignedInt248Type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),kt.type=UnsignedInt248Type,Nn=it.convert(kt.type))),nn&&(tr?tt.texStorage2D(_e.TEXTURE_2D,1,kn,dn.width,dn.height):tt.texImage2D(_e.TEXTURE_2D,0,kn,dn.width,dn.height,0,Qn,Nn,null));else if(kt.isDataTexture)if(Yn.length>0&&Vn){tr&&nn&&tt.texStorage2D(_e.TEXTURE_2D,pn,kn,Yn[0].width,Yn[0].height);for(let An=0,Hn=Yn.length;An<Hn;An++)$n=Yn[An],tr?tt.texSubImage2D(_e.TEXTURE_2D,An,0,0,$n.width,$n.height,Qn,Nn,$n.data):tt.texImage2D(_e.TEXTURE_2D,An,kn,$n.width,$n.height,0,Qn,Nn,$n.data);kt.generateMipmaps=!1}else tr?(nn&&tt.texStorage2D(_e.TEXTURE_2D,pn,kn,dn.width,dn.height),tt.texSubImage2D(_e.TEXTURE_2D,0,0,0,dn.width,dn.height,Qn,Nn,dn.data)):tt.texImage2D(_e.TEXTURE_2D,0,kn,dn.width,dn.height,0,Qn,Nn,dn.data);else if(kt.isCompressedTexture)if(kt.isCompressedArrayTexture){tr&&nn&&tt.texStorage3D(_e.TEXTURE_2D_ARRAY,pn,kn,Yn[0].width,Yn[0].height,dn.depth);for(let An=0,Hn=Yn.length;An<Hn;An++)$n=Yn[An],kt.format!==RGBAFormat?Qn!==null?tr?tt.compressedTexSubImage3D(_e.TEXTURE_2D_ARRAY,An,0,0,0,$n.width,$n.height,dn.depth,Qn,$n.data,0,0):tt.compressedTexImage3D(_e.TEXTURE_2D_ARRAY,An,kn,$n.width,$n.height,dn.depth,0,$n.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tr?tt.texSubImage3D(_e.TEXTURE_2D_ARRAY,An,0,0,0,$n.width,$n.height,dn.depth,Qn,Nn,$n.data):tt.texImage3D(_e.TEXTURE_2D_ARRAY,An,kn,$n.width,$n.height,dn.depth,0,Qn,Nn,$n.data)}else{tr&&nn&&tt.texStorage2D(_e.TEXTURE_2D,pn,kn,Yn[0].width,Yn[0].height);for(let An=0,Hn=Yn.length;An<Hn;An++)$n=Yn[An],kt.format!==RGBAFormat?Qn!==null?tr?tt.compressedTexSubImage2D(_e.TEXTURE_2D,An,0,0,$n.width,$n.height,Qn,$n.data):tt.compressedTexImage2D(_e.TEXTURE_2D,An,kn,$n.width,$n.height,0,$n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):tr?tt.texSubImage2D(_e.TEXTURE_2D,An,0,0,$n.width,$n.height,Qn,Nn,$n.data):tt.texImage2D(_e.TEXTURE_2D,An,kn,$n.width,$n.height,0,Qn,Nn,$n.data)}else if(kt.isDataArrayTexture)tr?(nn&&tt.texStorage3D(_e.TEXTURE_2D_ARRAY,pn,kn,dn.width,dn.height,dn.depth),tt.texSubImage3D(_e.TEXTURE_2D_ARRAY,0,0,0,0,dn.width,dn.height,dn.depth,Qn,Nn,dn.data)):tt.texImage3D(_e.TEXTURE_2D_ARRAY,0,kn,dn.width,dn.height,dn.depth,0,Qn,Nn,dn.data);else if(kt.isData3DTexture)tr?(nn&&tt.texStorage3D(_e.TEXTURE_3D,pn,kn,dn.width,dn.height,dn.depth),tt.texSubImage3D(_e.TEXTURE_3D,0,0,0,0,dn.width,dn.height,dn.depth,Qn,Nn,dn.data)):tt.texImage3D(_e.TEXTURE_3D,0,kn,dn.width,dn.height,dn.depth,0,Qn,Nn,dn.data);else if(kt.isFramebufferTexture){if(nn)if(tr)tt.texStorage2D(_e.TEXTURE_2D,pn,kn,dn.width,dn.height);else{let An=dn.width,Hn=dn.height;for(let Jn=0;Jn<pn;Jn++)tt.texImage2D(_e.TEXTURE_2D,Jn,kn,An,Hn,0,Qn,Nn,null),An>>=1,Hn>>=1}}else if(Yn.length>0&&Vn){tr&&nn&&tt.texStorage2D(_e.TEXTURE_2D,pn,kn,Yn[0].width,Yn[0].height);for(let An=0,Hn=Yn.length;An<Hn;An++)$n=Yn[An],tr?tt.texSubImage2D(_e.TEXTURE_2D,An,0,0,Qn,Nn,$n):tt.texImage2D(_e.TEXTURE_2D,An,kn,Qn,Nn,$n);kt.generateMipmaps=!1}else tr?(nn&&tt.texStorage2D(_e.TEXTURE_2D,pn,kn,dn.width,dn.height),tt.texSubImage2D(_e.TEXTURE_2D,0,0,0,Qn,Nn,dn)):tt.texImage2D(_e.TEXTURE_2D,0,kn,Qn,Nn,dn);Tt(kt,Vn)&&bt(Mn),Gn.__version=Tn.version,kt.onUpdate&&kt.onUpdate(kt)}Nt.__version=kt.version}function zn(Nt,kt,rn){if(kt.image.length!==6)return;const Mn=cn(Nt,kt),wn=kt.source;tt.bindTexture(_e.TEXTURE_CUBE_MAP,Nt.__webglTexture,_e.TEXTURE0+rn);const Tn=nt.get(wn);if(wn.version!==Tn.__version||Mn===!0){tt.activeTexture(_e.TEXTURE0+rn),_e.pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,kt.flipY),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,kt.premultiplyAlpha),_e.pixelStorei(_e.UNPACK_ALIGNMENT,kt.unpackAlignment),_e.pixelStorei(_e.UNPACK_COLORSPACE_CONVERSION_WEBGL,_e.NONE);const Gn=kt.isCompressedTexture||kt.image[0].isCompressedTexture,Un=kt.image[0]&&kt.image[0].isDataTexture,dn=[];for(let An=0;An<6;An++)!Gn&&!Un?dn[An]=vt(kt.image[An],!1,!0,lt):dn[An]=Un?kt.image[An].image:kt.image[An],dn[An]=jn(kt,dn[An]);const Vn=dn[0],Qn=Et(Vn)||ot,Nn=it.convert(kt.format,kt.colorSpace),kn=it.convert(kt.type),$n=It(kt.internalFormat,Nn,kn,kt.colorSpace),Yn=ot&&kt.isVideoTexture!==!0,tr=Tn.__version===void 0||Mn===!0;let nn=wt(kt,Vn,Qn);ln(_e.TEXTURE_CUBE_MAP,kt,Qn);let pn;if(Gn){Yn&&tr&&tt.texStorage2D(_e.TEXTURE_CUBE_MAP,nn,$n,Vn.width,Vn.height);for(let An=0;An<6;An++){pn=dn[An].mipmaps;for(let Hn=0;Hn<pn.length;Hn++){const Jn=pn[Hn];kt.format!==RGBAFormat?Nn!==null?Yn?tt.compressedTexSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,Hn,0,0,Jn.width,Jn.height,Nn,Jn.data):tt.compressedTexImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,Hn,$n,Jn.width,Jn.height,0,Jn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yn?tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,Hn,0,0,Jn.width,Jn.height,Nn,kn,Jn.data):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,Hn,$n,Jn.width,Jn.height,0,Nn,kn,Jn.data)}}}else{pn=kt.mipmaps,Yn&&tr&&(pn.length>0&&nn++,tt.texStorage2D(_e.TEXTURE_CUBE_MAP,nn,$n,dn[0].width,dn[0].height));for(let An=0;An<6;An++)if(Un){Yn?tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,0,0,0,dn[An].width,dn[An].height,Nn,kn,dn[An].data):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,0,$n,dn[An].width,dn[An].height,0,Nn,kn,dn[An].data);for(let Hn=0;Hn<pn.length;Hn++){const Ar=pn[Hn].image[An].image;Yn?tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,Hn+1,0,0,Ar.width,Ar.height,Nn,kn,Ar.data):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,Hn+1,$n,Ar.width,Ar.height,0,Nn,kn,Ar.data)}}else{Yn?tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,0,0,0,Nn,kn,dn[An]):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,0,$n,Nn,kn,dn[An]);for(let Hn=0;Hn<pn.length;Hn++){const Jn=pn[Hn];Yn?tt.texSubImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,Hn+1,0,0,Nn,kn,Jn.image[An]):tt.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+An,Hn+1,$n,Nn,kn,Jn.image[An])}}}Tt(kt,Qn)&&bt(_e.TEXTURE_CUBE_MAP),Tn.__version=wn.version,kt.onUpdate&&kt.onUpdate(kt)}Nt.__version=kt.version}function yn(Nt,kt,rn,Mn,wn,Tn){const Gn=it.convert(rn.format,rn.colorSpace),Un=it.convert(rn.type),dn=It(rn.internalFormat,Gn,Un,rn.colorSpace);if(!nt.get(kt).__hasExternalTextures){const Qn=Math.max(1,kt.width>>Tn),Nn=Math.max(1,kt.height>>Tn);wn===_e.TEXTURE_3D||wn===_e.TEXTURE_2D_ARRAY?tt.texImage3D(wn,Tn,dn,Qn,Nn,kt.depth,0,Gn,Un,null):tt.texImage2D(wn,Tn,dn,Qn,Nn,0,Gn,Un,null)}tt.bindFramebuffer(_e.FRAMEBUFFER,Nt),Fn(kt)?ft.framebufferTexture2DMultisampleEXT(_e.FRAMEBUFFER,Mn,wn,nt.get(rn).__webglTexture,0,Dn(kt)):(wn===_e.TEXTURE_2D||wn>=_e.TEXTURE_CUBE_MAP_POSITIVE_X&&wn<=_e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&_e.framebufferTexture2D(_e.FRAMEBUFFER,Mn,wn,nt.get(rn).__webglTexture,Tn),tt.bindFramebuffer(_e.FRAMEBUFFER,null)}function Wt(Nt,kt,rn){if(_e.bindRenderbuffer(_e.RENDERBUFFER,Nt),kt.depthBuffer&&!kt.stencilBuffer){let Mn=_e.DEPTH_COMPONENT16;if(rn||Fn(kt)){const wn=kt.depthTexture;wn&&wn.isDepthTexture&&(wn.type===FloatType?Mn=_e.DEPTH_COMPONENT32F:wn.type===UnsignedIntType&&(Mn=_e.DEPTH_COMPONENT24));const Tn=Dn(kt);Fn(kt)?ft.renderbufferStorageMultisampleEXT(_e.RENDERBUFFER,Tn,Mn,kt.width,kt.height):_e.renderbufferStorageMultisample(_e.RENDERBUFFER,Tn,Mn,kt.width,kt.height)}else _e.renderbufferStorage(_e.RENDERBUFFER,Mn,kt.width,kt.height);_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.DEPTH_ATTACHMENT,_e.RENDERBUFFER,Nt)}else if(kt.depthBuffer&&kt.stencilBuffer){const Mn=Dn(kt);rn&&Fn(kt)===!1?_e.renderbufferStorageMultisample(_e.RENDERBUFFER,Mn,_e.DEPTH24_STENCIL8,kt.width,kt.height):Fn(kt)?ft.renderbufferStorageMultisampleEXT(_e.RENDERBUFFER,Mn,_e.DEPTH24_STENCIL8,kt.width,kt.height):_e.renderbufferStorage(_e.RENDERBUFFER,_e.DEPTH_STENCIL,kt.width,kt.height),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.DEPTH_STENCIL_ATTACHMENT,_e.RENDERBUFFER,Nt)}else{const Mn=kt.isWebGLMultipleRenderTargets===!0?kt.texture:[kt.texture];for(let wn=0;wn<Mn.length;wn++){const Tn=Mn[wn],Gn=it.convert(Tn.format,Tn.colorSpace),Un=it.convert(Tn.type),dn=It(Tn.internalFormat,Gn,Un,Tn.colorSpace),Vn=Dn(kt);rn&&Fn(kt)===!1?_e.renderbufferStorageMultisample(_e.RENDERBUFFER,Vn,dn,kt.width,kt.height):Fn(kt)?ft.renderbufferStorageMultisampleEXT(_e.RENDERBUFFER,Vn,dn,kt.width,kt.height):_e.renderbufferStorage(_e.RENDERBUFFER,dn,kt.width,kt.height)}}_e.bindRenderbuffer(_e.RENDERBUFFER,null)}function _n(Nt,kt){if(kt&&kt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(tt.bindFramebuffer(_e.FRAMEBUFFER,Nt),!(kt.depthTexture&&kt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!nt.get(kt.depthTexture).__webglTexture||kt.depthTexture.image.width!==kt.width||kt.depthTexture.image.height!==kt.height)&&(kt.depthTexture.image.width=kt.width,kt.depthTexture.image.height=kt.height,kt.depthTexture.needsUpdate=!0),$t(kt.depthTexture,0);const Mn=nt.get(kt.depthTexture).__webglTexture,wn=Dn(kt);if(kt.depthTexture.format===DepthFormat)Fn(kt)?ft.framebufferTexture2DMultisampleEXT(_e.FRAMEBUFFER,_e.DEPTH_ATTACHMENT,_e.TEXTURE_2D,Mn,0,wn):_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.DEPTH_ATTACHMENT,_e.TEXTURE_2D,Mn,0);else if(kt.depthTexture.format===DepthStencilFormat)Fn(kt)?ft.framebufferTexture2DMultisampleEXT(_e.FRAMEBUFFER,_e.DEPTH_STENCIL_ATTACHMENT,_e.TEXTURE_2D,Mn,0,wn):_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.DEPTH_STENCIL_ATTACHMENT,_e.TEXTURE_2D,Mn,0);else throw new Error("Unknown depthTexture format")}function gn(Nt){const kt=nt.get(Nt),rn=Nt.isWebGLCubeRenderTarget===!0;if(Nt.depthTexture&&!kt.__autoAllocateDepthBuffer){if(rn)throw new Error("target.depthTexture not supported in Cube render targets");_n(kt.__webglFramebuffer,Nt)}else if(rn){kt.__webglDepthbuffer=[];for(let Mn=0;Mn<6;Mn++)tt.bindFramebuffer(_e.FRAMEBUFFER,kt.__webglFramebuffer[Mn]),kt.__webglDepthbuffer[Mn]=_e.createRenderbuffer(),Wt(kt.__webglDepthbuffer[Mn],Nt,!1)}else tt.bindFramebuffer(_e.FRAMEBUFFER,kt.__webglFramebuffer),kt.__webglDepthbuffer=_e.createRenderbuffer(),Wt(kt.__webglDepthbuffer,Nt,!1);tt.bindFramebuffer(_e.FRAMEBUFFER,null)}function vn(Nt,kt,rn){const Mn=nt.get(Nt);kt!==void 0&&yn(Mn.__webglFramebuffer,Nt,Nt.texture,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,0),rn!==void 0&&gn(Nt)}function mn(Nt){const kt=Nt.texture,rn=nt.get(Nt),Mn=nt.get(kt);Nt.addEventListener("dispose",Ut),Nt.isWebGLMultipleRenderTargets!==!0&&(Mn.__webglTexture===void 0&&(Mn.__webglTexture=_e.createTexture()),Mn.__version=kt.version,at.memory.textures++);const wn=Nt.isWebGLCubeRenderTarget===!0,Tn=Nt.isWebGLMultipleRenderTargets===!0,Gn=Et(Nt)||ot;if(wn){rn.__webglFramebuffer=[];for(let Un=0;Un<6;Un++)if(ot&&kt.mipmaps&&kt.mipmaps.length>0){rn.__webglFramebuffer[Un]=[];for(let dn=0;dn<kt.mipmaps.length;dn++)rn.__webglFramebuffer[Un][dn]=_e.createFramebuffer()}else rn.__webglFramebuffer[Un]=_e.createFramebuffer()}else{if(ot&&kt.mipmaps&&kt.mipmaps.length>0){rn.__webglFramebuffer=[];for(let Un=0;Un<kt.mipmaps.length;Un++)rn.__webglFramebuffer[Un]=_e.createFramebuffer()}else rn.__webglFramebuffer=_e.createFramebuffer();if(Tn)if(rt.drawBuffers){const Un=Nt.texture;for(let dn=0,Vn=Un.length;dn<Vn;dn++){const Qn=nt.get(Un[dn]);Qn.__webglTexture===void 0&&(Qn.__webglTexture=_e.createTexture(),at.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(ot&&Nt.samples>0&&Fn(Nt)===!1){const Un=Tn?kt:[kt];rn.__webglMultisampledFramebuffer=_e.createFramebuffer(),rn.__webglColorRenderbuffer=[],tt.bindFramebuffer(_e.FRAMEBUFFER,rn.__webglMultisampledFramebuffer);for(let dn=0;dn<Un.length;dn++){const Vn=Un[dn];rn.__webglColorRenderbuffer[dn]=_e.createRenderbuffer(),_e.bindRenderbuffer(_e.RENDERBUFFER,rn.__webglColorRenderbuffer[dn]);const Qn=it.convert(Vn.format,Vn.colorSpace),Nn=it.convert(Vn.type),kn=It(Vn.internalFormat,Qn,Nn,Vn.colorSpace,Nt.isXRRenderTarget===!0),$n=Dn(Nt);_e.renderbufferStorageMultisample(_e.RENDERBUFFER,$n,kn,Nt.width,Nt.height),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0+dn,_e.RENDERBUFFER,rn.__webglColorRenderbuffer[dn])}_e.bindRenderbuffer(_e.RENDERBUFFER,null),Nt.depthBuffer&&(rn.__webglDepthRenderbuffer=_e.createRenderbuffer(),Wt(rn.__webglDepthRenderbuffer,Nt,!0)),tt.bindFramebuffer(_e.FRAMEBUFFER,null)}}if(wn){tt.bindTexture(_e.TEXTURE_CUBE_MAP,Mn.__webglTexture),ln(_e.TEXTURE_CUBE_MAP,kt,Gn);for(let Un=0;Un<6;Un++)if(ot&&kt.mipmaps&&kt.mipmaps.length>0)for(let dn=0;dn<kt.mipmaps.length;dn++)yn(rn.__webglFramebuffer[Un][dn],Nt,kt,_e.COLOR_ATTACHMENT0,_e.TEXTURE_CUBE_MAP_POSITIVE_X+Un,dn);else yn(rn.__webglFramebuffer[Un],Nt,kt,_e.COLOR_ATTACHMENT0,_e.TEXTURE_CUBE_MAP_POSITIVE_X+Un,0);Tt(kt,Gn)&&bt(_e.TEXTURE_CUBE_MAP),tt.unbindTexture()}else if(Tn){const Un=Nt.texture;for(let dn=0,Vn=Un.length;dn<Vn;dn++){const Qn=Un[dn],Nn=nt.get(Qn);tt.bindTexture(_e.TEXTURE_2D,Nn.__webglTexture),ln(_e.TEXTURE_2D,Qn,Gn),yn(rn.__webglFramebuffer,Nt,Qn,_e.COLOR_ATTACHMENT0+dn,_e.TEXTURE_2D,0),Tt(Qn,Gn)&&bt(_e.TEXTURE_2D)}tt.unbindTexture()}else{let Un=_e.TEXTURE_2D;if((Nt.isWebGL3DRenderTarget||Nt.isWebGLArrayRenderTarget)&&(ot?Un=Nt.isWebGL3DRenderTarget?_e.TEXTURE_3D:_e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),tt.bindTexture(Un,Mn.__webglTexture),ln(Un,kt,Gn),ot&&kt.mipmaps&&kt.mipmaps.length>0)for(let dn=0;dn<kt.mipmaps.length;dn++)yn(rn.__webglFramebuffer[dn],Nt,kt,_e.COLOR_ATTACHMENT0,Un,dn);else yn(rn.__webglFramebuffer,Nt,kt,_e.COLOR_ATTACHMENT0,Un,0);Tt(kt,Gn)&&bt(Un),tt.unbindTexture()}Nt.depthBuffer&&gn(Nt)}function Wn(Nt){const kt=Et(Nt)||ot,rn=Nt.isWebGLMultipleRenderTargets===!0?Nt.texture:[Nt.texture];for(let Mn=0,wn=rn.length;Mn<wn;Mn++){const Tn=rn[Mn];if(Tt(Tn,kt)){const Gn=Nt.isWebGLCubeRenderTarget?_e.TEXTURE_CUBE_MAP:_e.TEXTURE_2D,Un=nt.get(Tn).__webglTexture;tt.bindTexture(Gn,Un),bt(Gn),tt.unbindTexture()}}}function xn(Nt){if(ot&&Nt.samples>0&&Fn(Nt)===!1){const kt=Nt.isWebGLMultipleRenderTargets?Nt.texture:[Nt.texture],rn=Nt.width,Mn=Nt.height;let wn=_e.COLOR_BUFFER_BIT;const Tn=[],Gn=Nt.stencilBuffer?_e.DEPTH_STENCIL_ATTACHMENT:_e.DEPTH_ATTACHMENT,Un=nt.get(Nt),dn=Nt.isWebGLMultipleRenderTargets===!0;if(dn)for(let Vn=0;Vn<kt.length;Vn++)tt.bindFramebuffer(_e.FRAMEBUFFER,Un.__webglMultisampledFramebuffer),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0+Vn,_e.RENDERBUFFER,null),tt.bindFramebuffer(_e.FRAMEBUFFER,Un.__webglFramebuffer),_e.framebufferTexture2D(_e.DRAW_FRAMEBUFFER,_e.COLOR_ATTACHMENT0+Vn,_e.TEXTURE_2D,null,0);tt.bindFramebuffer(_e.READ_FRAMEBUFFER,Un.__webglMultisampledFramebuffer),tt.bindFramebuffer(_e.DRAW_FRAMEBUFFER,Un.__webglFramebuffer);for(let Vn=0;Vn<kt.length;Vn++){Tn.push(_e.COLOR_ATTACHMENT0+Vn),Nt.depthBuffer&&Tn.push(Gn);const Qn=Un.__ignoreDepthValues!==void 0?Un.__ignoreDepthValues:!1;if(Qn===!1&&(Nt.depthBuffer&&(wn|=_e.DEPTH_BUFFER_BIT),Nt.stencilBuffer&&(wn|=_e.STENCIL_BUFFER_BIT)),dn&&_e.framebufferRenderbuffer(_e.READ_FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.RENDERBUFFER,Un.__webglColorRenderbuffer[Vn]),Qn===!0&&(_e.invalidateFramebuffer(_e.READ_FRAMEBUFFER,[Gn]),_e.invalidateFramebuffer(_e.DRAW_FRAMEBUFFER,[Gn])),dn){const Nn=nt.get(kt[Vn]).__webglTexture;_e.framebufferTexture2D(_e.DRAW_FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,Nn,0)}_e.blitFramebuffer(0,0,rn,Mn,0,0,rn,Mn,wn,_e.NEAREST),pt&&_e.invalidateFramebuffer(_e.READ_FRAMEBUFFER,Tn)}if(tt.bindFramebuffer(_e.READ_FRAMEBUFFER,null),tt.bindFramebuffer(_e.DRAW_FRAMEBUFFER,null),dn)for(let Vn=0;Vn<kt.length;Vn++){tt.bindFramebuffer(_e.FRAMEBUFFER,Un.__webglMultisampledFramebuffer),_e.framebufferRenderbuffer(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0+Vn,_e.RENDERBUFFER,Un.__webglColorRenderbuffer[Vn]);const Qn=nt.get(kt[Vn]).__webglTexture;tt.bindFramebuffer(_e.FRAMEBUFFER,Un.__webglFramebuffer),_e.framebufferTexture2D(_e.DRAW_FRAMEBUFFER,_e.COLOR_ATTACHMENT0+Vn,_e.TEXTURE_2D,Qn,0)}tt.bindFramebuffer(_e.DRAW_FRAMEBUFFER,Un.__webglMultisampledFramebuffer)}}function Dn(Nt){return Math.min(ut,Nt.samples)}function Fn(Nt){const kt=nt.get(Nt);return ot&&Nt.samples>0&&_.has("WEBGL_multisampled_render_to_texture")===!0&&kt.__useRenderToTexture!==!1}function bn(Nt){const kt=at.render.frame;gt.get(Nt)!==kt&&(gt.set(Nt,kt),Nt.update())}function jn(Nt,kt){const rn=Nt.colorSpace,Mn=Nt.format,wn=Nt.type;return Nt.isCompressedTexture===!0||Nt.isVideoTexture===!0||Nt.format===_SRGBAFormat||rn!==LinearSRGBColorSpace&&rn!==NoColorSpace&&(rn===SRGBColorSpace||rn===DisplayP3ColorSpace?ot===!1?_.has("EXT_sRGB")===!0&&Mn===RGBAFormat?(Nt.format=_SRGBAFormat,Nt.minFilter=LinearFilter,Nt.generateMipmaps=!1):kt=ImageUtils.sRGBToLinear(kt):(Mn!==RGBAFormat||wn!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",rn)),kt}this.allocateTextureUnit=Dt,this.resetTextureUnits=Jt,this.setTexture2D=$t,this.setTexture2DArray=Lt,this.setTexture3D=Vt,this.setTextureCube=tn,this.rebindTextures=vn,this.setupRenderTarget=mn,this.updateRenderTargetMipmap=Wn,this.updateMultisampleRenderTarget=xn,this.setupDepthRenderbuffer=gn,this.setupFrameBufferTexture=yn,this.useMultisampledRTT=Fn}const LinearTransferFunction=0,SRGBTransferFunction=1;function WebGLUtils(_e,_,tt){const nt=tt.isWebGL2;function rt(it,at=NoColorSpace){let ot;const st=at===SRGBColorSpace||at===DisplayP3ColorSpace?SRGBTransferFunction:LinearTransferFunction;if(it===UnsignedByteType)return _e.UNSIGNED_BYTE;if(it===UnsignedShort4444Type)return _e.UNSIGNED_SHORT_4_4_4_4;if(it===UnsignedShort5551Type)return _e.UNSIGNED_SHORT_5_5_5_1;if(it===ByteType)return _e.BYTE;if(it===ShortType)return _e.SHORT;if(it===UnsignedShortType)return _e.UNSIGNED_SHORT;if(it===IntType)return _e.INT;if(it===UnsignedIntType)return _e.UNSIGNED_INT;if(it===FloatType)return _e.FLOAT;if(it===HalfFloatType)return nt?_e.HALF_FLOAT:(ot=_.get("OES_texture_half_float"),ot!==null?ot.HALF_FLOAT_OES:null);if(it===AlphaFormat)return _e.ALPHA;if(it===RGBAFormat)return _e.RGBA;if(it===LuminanceFormat)return _e.LUMINANCE;if(it===LuminanceAlphaFormat)return _e.LUMINANCE_ALPHA;if(it===DepthFormat)return _e.DEPTH_COMPONENT;if(it===DepthStencilFormat)return _e.DEPTH_STENCIL;if(it===_SRGBAFormat)return ot=_.get("EXT_sRGB"),ot!==null?ot.SRGB_ALPHA_EXT:null;if(it===RedFormat)return _e.RED;if(it===RedIntegerFormat)return _e.RED_INTEGER;if(it===RGFormat)return _e.RG;if(it===RGIntegerFormat)return _e.RG_INTEGER;if(it===RGBAIntegerFormat)return _e.RGBA_INTEGER;if(it===RGB_S3TC_DXT1_Format||it===RGBA_S3TC_DXT1_Format||it===RGBA_S3TC_DXT3_Format||it===RGBA_S3TC_DXT5_Format)if(st===SRGBTransferFunction)if(ot=_.get("WEBGL_compressed_texture_s3tc_srgb"),ot!==null){if(it===RGB_S3TC_DXT1_Format)return ot.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT1_Format)return ot.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT3_Format)return ot.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(it===RGBA_S3TC_DXT5_Format)return ot.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(ot=_.get("WEBGL_compressed_texture_s3tc"),ot!==null){if(it===RGB_S3TC_DXT1_Format)return ot.COMPRESSED_RGB_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT1_Format)return ot.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(it===RGBA_S3TC_DXT3_Format)return ot.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(it===RGBA_S3TC_DXT5_Format)return ot.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(it===RGB_PVRTC_4BPPV1_Format||it===RGB_PVRTC_2BPPV1_Format||it===RGBA_PVRTC_4BPPV1_Format||it===RGBA_PVRTC_2BPPV1_Format)if(ot=_.get("WEBGL_compressed_texture_pvrtc"),ot!==null){if(it===RGB_PVRTC_4BPPV1_Format)return ot.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(it===RGB_PVRTC_2BPPV1_Format)return ot.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(it===RGBA_PVRTC_4BPPV1_Format)return ot.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(it===RGBA_PVRTC_2BPPV1_Format)return ot.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(it===RGB_ETC1_Format)return ot=_.get("WEBGL_compressed_texture_etc1"),ot!==null?ot.COMPRESSED_RGB_ETC1_WEBGL:null;if(it===RGB_ETC2_Format||it===RGBA_ETC2_EAC_Format)if(ot=_.get("WEBGL_compressed_texture_etc"),ot!==null){if(it===RGB_ETC2_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ETC2:ot.COMPRESSED_RGB8_ETC2;if(it===RGBA_ETC2_EAC_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:ot.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(it===RGBA_ASTC_4x4_Format||it===RGBA_ASTC_5x4_Format||it===RGBA_ASTC_5x5_Format||it===RGBA_ASTC_6x5_Format||it===RGBA_ASTC_6x6_Format||it===RGBA_ASTC_8x5_Format||it===RGBA_ASTC_8x6_Format||it===RGBA_ASTC_8x8_Format||it===RGBA_ASTC_10x5_Format||it===RGBA_ASTC_10x6_Format||it===RGBA_ASTC_10x8_Format||it===RGBA_ASTC_10x10_Format||it===RGBA_ASTC_12x10_Format||it===RGBA_ASTC_12x12_Format)if(ot=_.get("WEBGL_compressed_texture_astc"),ot!==null){if(it===RGBA_ASTC_4x4_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:ot.COMPRESSED_RGBA_ASTC_4x4_KHR;if(it===RGBA_ASTC_5x4_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:ot.COMPRESSED_RGBA_ASTC_5x4_KHR;if(it===RGBA_ASTC_5x5_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:ot.COMPRESSED_RGBA_ASTC_5x5_KHR;if(it===RGBA_ASTC_6x5_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:ot.COMPRESSED_RGBA_ASTC_6x5_KHR;if(it===RGBA_ASTC_6x6_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:ot.COMPRESSED_RGBA_ASTC_6x6_KHR;if(it===RGBA_ASTC_8x5_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:ot.COMPRESSED_RGBA_ASTC_8x5_KHR;if(it===RGBA_ASTC_8x6_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:ot.COMPRESSED_RGBA_ASTC_8x6_KHR;if(it===RGBA_ASTC_8x8_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:ot.COMPRESSED_RGBA_ASTC_8x8_KHR;if(it===RGBA_ASTC_10x5_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:ot.COMPRESSED_RGBA_ASTC_10x5_KHR;if(it===RGBA_ASTC_10x6_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:ot.COMPRESSED_RGBA_ASTC_10x6_KHR;if(it===RGBA_ASTC_10x8_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:ot.COMPRESSED_RGBA_ASTC_10x8_KHR;if(it===RGBA_ASTC_10x10_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:ot.COMPRESSED_RGBA_ASTC_10x10_KHR;if(it===RGBA_ASTC_12x10_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:ot.COMPRESSED_RGBA_ASTC_12x10_KHR;if(it===RGBA_ASTC_12x12_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:ot.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(it===RGBA_BPTC_Format||it===RGB_BPTC_SIGNED_Format||it===RGB_BPTC_UNSIGNED_Format)if(ot=_.get("EXT_texture_compression_bptc"),ot!==null){if(it===RGBA_BPTC_Format)return st===SRGBTransferFunction?ot.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:ot.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(it===RGB_BPTC_SIGNED_Format)return ot.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(it===RGB_BPTC_UNSIGNED_Format)return ot.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(it===RED_RGTC1_Format||it===SIGNED_RED_RGTC1_Format||it===RED_GREEN_RGTC2_Format||it===SIGNED_RED_GREEN_RGTC2_Format)if(ot=_.get("EXT_texture_compression_rgtc"),ot!==null){if(it===RGBA_BPTC_Format)return ot.COMPRESSED_RED_RGTC1_EXT;if(it===SIGNED_RED_RGTC1_Format)return ot.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(it===RED_GREEN_RGTC2_Format)return ot.COMPRESSED_RED_GREEN_RGTC2_EXT;if(it===SIGNED_RED_GREEN_RGTC2_Format)return ot.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return it===UnsignedInt248Type?nt?_e.UNSIGNED_INT_24_8:(ot=_.get("WEBGL_depth_texture"),ot!==null?ot.UNSIGNED_INT_24_8_WEBGL:null):_e[it]!==void 0?_e[it]:null}return{convert:rt}}class ArrayCamera extends PerspectiveCamera{constructor(_=[]){super(),this.isArrayCamera=!0,this.cameras=_}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(_){return this._targetRay!==null&&this._targetRay.dispatchEvent(_),this._grip!==null&&this._grip.dispatchEvent(_),this._hand!==null&&this._hand.dispatchEvent(_),this}connect(_){if(_&&_.hand){const tt=this._hand;if(tt)for(const nt of _.hand.values())this._getHandJoint(tt,nt)}return this.dispatchEvent({type:"connected",data:_}),this}disconnect(_){return this.dispatchEvent({type:"disconnected",data:_}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(_,tt,nt){let rt=null,it=null,at=null;const ot=this._targetRay,st=this._grip,lt=this._hand;if(_&&tt.session.visibilityState!=="visible-blurred"){if(lt&&_.hand){at=!0;for(const xt of _.hand.values()){const yt=tt.getJointPose(xt,nt),mt=this._getHandJoint(lt,xt);yt!==null&&(mt.matrix.fromArray(yt.transform.matrix),mt.matrix.decompose(mt.position,mt.rotation,mt.scale),mt.matrixWorldNeedsUpdate=!0,mt.jointRadius=yt.radius),mt.visible=yt!==null}const ct=lt.joints["index-finger-tip"],ut=lt.joints["thumb-tip"],ft=ct.position.distanceTo(ut.position),pt=.02,gt=.005;lt.inputState.pinching&&ft>pt+gt?(lt.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:_.handedness,target:this})):!lt.inputState.pinching&&ft<=pt-gt&&(lt.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:_.handedness,target:this}))}else st!==null&&_.gripSpace&&(it=tt.getPose(_.gripSpace,nt),it!==null&&(st.matrix.fromArray(it.transform.matrix),st.matrix.decompose(st.position,st.rotation,st.scale),st.matrixWorldNeedsUpdate=!0,it.linearVelocity?(st.hasLinearVelocity=!0,st.linearVelocity.copy(it.linearVelocity)):st.hasLinearVelocity=!1,it.angularVelocity?(st.hasAngularVelocity=!0,st.angularVelocity.copy(it.angularVelocity)):st.hasAngularVelocity=!1));ot!==null&&(rt=tt.getPose(_.targetRaySpace,nt),rt===null&&it!==null&&(rt=it),rt!==null&&(ot.matrix.fromArray(rt.transform.matrix),ot.matrix.decompose(ot.position,ot.rotation,ot.scale),ot.matrixWorldNeedsUpdate=!0,rt.linearVelocity?(ot.hasLinearVelocity=!0,ot.linearVelocity.copy(rt.linearVelocity)):ot.hasLinearVelocity=!1,rt.angularVelocity?(ot.hasAngularVelocity=!0,ot.angularVelocity.copy(rt.angularVelocity)):ot.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return ot!==null&&(ot.visible=rt!==null),st!==null&&(st.visible=it!==null),lt!==null&&(lt.visible=at!==null),this}_getHandJoint(_,tt){if(_.joints[tt.jointName]===void 0){const nt=new Group;nt.matrixAutoUpdate=!1,nt.visible=!1,_.joints[tt.jointName]=nt,_.add(nt)}return _.joints[tt.jointName]}}class DepthTexture extends Texture{constructor(_,tt,nt,rt,it,at,ot,st,lt,ct){if(ct=ct!==void 0?ct:DepthFormat,ct!==DepthFormat&&ct!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");nt===void 0&&ct===DepthFormat&&(nt=UnsignedIntType),nt===void 0&&ct===DepthStencilFormat&&(nt=UnsignedInt248Type),super(null,rt,it,at,ot,st,ct,nt,lt),this.isDepthTexture=!0,this.image={width:_,height:tt},this.magFilter=ot!==void 0?ot:NearestFilter,this.minFilter=st!==void 0?st:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(_){return super.copy(_),this.compareFunction=_.compareFunction,this}toJSON(_){const tt=super.toJSON(_);return this.compareFunction!==null&&(tt.compareFunction=this.compareFunction),tt}}class WebXRManager extends EventDispatcher{constructor(_,tt){super();const nt=this;let rt=null,it=1,at=null,ot="local-floor",st=1,lt=null,ct=null,ut=null,ft=null,pt=null,gt=null;const xt=tt.getContextAttributes();let yt=null,mt=null;const At=[],vt=[],Et=new PerspectiveCamera;Et.layers.enable(1),Et.viewport=new Vector4;const Ct=new PerspectiveCamera;Ct.layers.enable(2),Ct.viewport=new Vector4;const Tt=[Et,Ct],bt=new ArrayCamera;bt.layers.enable(1),bt.layers.enable(2);let It=null,wt=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Lt){let Vt=At[Lt];return Vt===void 0&&(Vt=new WebXRController,At[Lt]=Vt),Vt.getTargetRaySpace()},this.getControllerGrip=function(Lt){let Vt=At[Lt];return Vt===void 0&&(Vt=new WebXRController,At[Lt]=Vt),Vt.getGripSpace()},this.getHand=function(Lt){let Vt=At[Lt];return Vt===void 0&&(Vt=new WebXRController,At[Lt]=Vt),Vt.getHandSpace()};function Rt(Lt){const Vt=vt.indexOf(Lt.inputSource);if(Vt===-1)return;const tn=At[Vt];tn!==void 0&&(tn.update(Lt.inputSource,Lt.frame,lt||at),tn.dispatchEvent({type:Lt.type,data:Lt.inputSource}))}function Ft(){rt.removeEventListener("select",Rt),rt.removeEventListener("selectstart",Rt),rt.removeEventListener("selectend",Rt),rt.removeEventListener("squeeze",Rt),rt.removeEventListener("squeezestart",Rt),rt.removeEventListener("squeezeend",Rt),rt.removeEventListener("end",Ft),rt.removeEventListener("inputsourceschange",Ut);for(let Lt=0;Lt<At.length;Lt++){const Vt=vt[Lt];Vt!==null&&(vt[Lt]=null,At[Lt].disconnect(Vt))}It=null,wt=null,_.setRenderTarget(yt),pt=null,ft=null,ut=null,rt=null,mt=null,$t.stop(),nt.isPresenting=!1,nt.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Lt){it=Lt,nt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Lt){ot=Lt,nt.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return lt||at},this.setReferenceSpace=function(Lt){lt=Lt},this.getBaseLayer=function(){return ft!==null?ft:pt},this.getBinding=function(){return ut},this.getFrame=function(){return gt},this.getSession=function(){return rt},this.setSession=async function(Lt){if(rt=Lt,rt!==null){if(yt=_.getRenderTarget(),rt.addEventListener("select",Rt),rt.addEventListener("selectstart",Rt),rt.addEventListener("selectend",Rt),rt.addEventListener("squeeze",Rt),rt.addEventListener("squeezestart",Rt),rt.addEventListener("squeezeend",Rt),rt.addEventListener("end",Ft),rt.addEventListener("inputsourceschange",Ut),xt.xrCompatible!==!0&&await tt.makeXRCompatible(),rt.renderState.layers===void 0||_.capabilities.isWebGL2===!1){const Vt={antialias:rt.renderState.layers===void 0?xt.antialias:!0,alpha:!0,depth:xt.depth,stencil:xt.stencil,framebufferScaleFactor:it};pt=new XRWebGLLayer(rt,tt,Vt),rt.updateRenderState({baseLayer:pt}),mt=new WebGLRenderTarget(pt.framebufferWidth,pt.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:_.outputColorSpace,stencilBuffer:xt.stencil})}else{let Vt=null,tn=null,an=null;xt.depth&&(an=xt.stencil?tt.DEPTH24_STENCIL8:tt.DEPTH_COMPONENT24,Vt=xt.stencil?DepthStencilFormat:DepthFormat,tn=xt.stencil?UnsignedInt248Type:UnsignedIntType);const on={colorFormat:tt.RGBA8,depthFormat:an,scaleFactor:it};ut=new XRWebGLBinding(rt,tt),ft=ut.createProjectionLayer(on),rt.updateRenderState({layers:[ft]}),mt=new WebGLRenderTarget(ft.textureWidth,ft.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(ft.textureWidth,ft.textureHeight,tn,void 0,void 0,void 0,void 0,void 0,void 0,Vt),stencilBuffer:xt.stencil,colorSpace:_.outputColorSpace,samples:xt.antialias?4:0});const sn=_.properties.get(mt);sn.__ignoreDepthValues=ft.ignoreDepthValues}mt.isXRRenderTarget=!0,this.setFoveation(st),lt=null,at=await rt.requestReferenceSpace(ot),$t.setContext(rt),$t.start(),nt.isPresenting=!0,nt.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(rt!==null)return rt.environmentBlendMode};function Ut(Lt){for(let Vt=0;Vt<Lt.removed.length;Vt++){const tn=Lt.removed[Vt],an=vt.indexOf(tn);an>=0&&(vt[an]=null,At[an].disconnect(tn))}for(let Vt=0;Vt<Lt.added.length;Vt++){const tn=Lt.added[Vt];let an=vt.indexOf(tn);if(an===-1){for(let sn=0;sn<At.length;sn++)if(sn>=vt.length){vt.push(tn),an=sn;break}else if(vt[sn]===null){vt[sn]=tn,an=sn;break}if(an===-1)break}const on=At[an];on&&on.connect(tn)}}const Gt=new Vector3,Ht=new Vector3;function jt(Lt,Vt,tn){Gt.setFromMatrixPosition(Vt.matrixWorld),Ht.setFromMatrixPosition(tn.matrixWorld);const an=Gt.distanceTo(Ht),on=Vt.projectionMatrix.elements,sn=tn.projectionMatrix.elements,ln=on[14]/(on[10]-1),cn=on[14]/(on[10]+1),In=(on[9]+1)/on[5],zn=(on[9]-1)/on[5],yn=(on[8]-1)/on[0],Wt=(sn[8]+1)/sn[0],_n=ln*yn,gn=ln*Wt,vn=an/(-yn+Wt),mn=vn*-yn;Vt.matrixWorld.decompose(Lt.position,Lt.quaternion,Lt.scale),Lt.translateX(mn),Lt.translateZ(vn),Lt.matrixWorld.compose(Lt.position,Lt.quaternion,Lt.scale),Lt.matrixWorldInverse.copy(Lt.matrixWorld).invert();const Wn=ln+vn,xn=cn+vn,Dn=_n-mn,Fn=gn+(an-mn),bn=In*cn/xn*Wn,jn=zn*cn/xn*Wn;Lt.projectionMatrix.makePerspective(Dn,Fn,bn,jn,Wn,xn),Lt.projectionMatrixInverse.copy(Lt.projectionMatrix).invert()}function Xt(Lt,Vt){Vt===null?Lt.matrixWorld.copy(Lt.matrix):Lt.matrixWorld.multiplyMatrices(Vt.matrixWorld,Lt.matrix),Lt.matrixWorldInverse.copy(Lt.matrixWorld).invert()}this.updateCamera=function(Lt){if(rt===null)return;bt.near=Ct.near=Et.near=Lt.near,bt.far=Ct.far=Et.far=Lt.far,(It!==bt.near||wt!==bt.far)&&(rt.updateRenderState({depthNear:bt.near,depthFar:bt.far}),It=bt.near,wt=bt.far);const Vt=Lt.parent,tn=bt.cameras;Xt(bt,Vt);for(let an=0;an<tn.length;an++)Xt(tn[an],Vt);tn.length===2?jt(bt,Et,Ct):bt.projectionMatrix.copy(Et.projectionMatrix),Jt(Lt,bt,Vt)};function Jt(Lt,Vt,tn){tn===null?Lt.matrix.copy(Vt.matrixWorld):(Lt.matrix.copy(tn.matrixWorld),Lt.matrix.invert(),Lt.matrix.multiply(Vt.matrixWorld)),Lt.matrix.decompose(Lt.position,Lt.quaternion,Lt.scale),Lt.updateMatrixWorld(!0),Lt.projectionMatrix.copy(Vt.projectionMatrix),Lt.projectionMatrixInverse.copy(Vt.projectionMatrixInverse),Lt.isPerspectiveCamera&&(Lt.fov=RAD2DEG*2*Math.atan(1/Lt.projectionMatrix.elements[5]),Lt.zoom=1)}this.getCamera=function(){return bt},this.getFoveation=function(){if(!(ft===null&&pt===null))return st},this.setFoveation=function(Lt){st=Lt,ft!==null&&(ft.fixedFoveation=Lt),pt!==null&&pt.fixedFoveation!==void 0&&(pt.fixedFoveation=Lt)};let Dt=null;function zt(Lt,Vt){if(ct=Vt.getViewerPose(lt||at),gt=Vt,ct!==null){const tn=ct.views;pt!==null&&(_.setRenderTargetFramebuffer(mt,pt.framebuffer),_.setRenderTarget(mt));let an=!1;tn.length!==bt.cameras.length&&(bt.cameras.length=0,an=!0);for(let on=0;on<tn.length;on++){const sn=tn[on];let ln=null;if(pt!==null)ln=pt.getViewport(sn);else{const In=ut.getViewSubImage(ft,sn);ln=In.viewport,on===0&&(_.setRenderTargetTextures(mt,In.colorTexture,ft.ignoreDepthValues?void 0:In.depthStencilTexture),_.setRenderTarget(mt))}let cn=Tt[on];cn===void 0&&(cn=new PerspectiveCamera,cn.layers.enable(on),cn.viewport=new Vector4,Tt[on]=cn),cn.matrix.fromArray(sn.transform.matrix),cn.matrix.decompose(cn.position,cn.quaternion,cn.scale),cn.projectionMatrix.fromArray(sn.projectionMatrix),cn.projectionMatrixInverse.copy(cn.projectionMatrix).invert(),cn.viewport.set(ln.x,ln.y,ln.width,ln.height),on===0&&(bt.matrix.copy(cn.matrix),bt.matrix.decompose(bt.position,bt.quaternion,bt.scale)),an===!0&&bt.cameras.push(cn)}}for(let tn=0;tn<At.length;tn++){const an=vt[tn],on=At[tn];an!==null&&on!==void 0&&on.update(an,Vt,lt||at)}Dt&&Dt(Lt,Vt),Vt.detectedPlanes&&nt.dispatchEvent({type:"planesdetected",data:Vt}),gt=null}const $t=new WebGLAnimation;$t.setAnimationLoop(zt),this.setAnimationLoop=function(Lt){Dt=Lt},this.dispose=function(){}}}function WebGLMaterials(_e,_){function tt(yt,mt){yt.matrixAutoUpdate===!0&&yt.updateMatrix(),mt.value.copy(yt.matrix)}function nt(yt,mt){mt.color.getRGB(yt.fogColor.value,getUnlitUniformColorSpace(_e)),mt.isFog?(yt.fogNear.value=mt.near,yt.fogFar.value=mt.far):mt.isFogExp2&&(yt.fogDensity.value=mt.density)}function rt(yt,mt,At,vt,Et){mt.isMeshBasicMaterial||mt.isMeshLambertMaterial?it(yt,mt):mt.isMeshToonMaterial?(it(yt,mt),ut(yt,mt)):mt.isMeshPhongMaterial?(it(yt,mt),ct(yt,mt)):mt.isMeshStandardMaterial?(it(yt,mt),ft(yt,mt),mt.isMeshPhysicalMaterial&&pt(yt,mt,Et)):mt.isMeshMatcapMaterial?(it(yt,mt),gt(yt,mt)):mt.isMeshDepthMaterial?it(yt,mt):mt.isMeshDistanceMaterial?(it(yt,mt),xt(yt,mt)):mt.isMeshNormalMaterial?it(yt,mt):mt.isLineBasicMaterial?(at(yt,mt),mt.isLineDashedMaterial&&ot(yt,mt)):mt.isPointsMaterial?st(yt,mt,At,vt):mt.isSpriteMaterial?lt(yt,mt):mt.isShadowMaterial?(yt.color.value.copy(mt.color),yt.opacity.value=mt.opacity):mt.isShaderMaterial&&(mt.uniformsNeedUpdate=!1)}function it(yt,mt){yt.opacity.value=mt.opacity,mt.color&&yt.diffuse.value.copy(mt.color),mt.emissive&&yt.emissive.value.copy(mt.emissive).multiplyScalar(mt.emissiveIntensity),mt.map&&(yt.map.value=mt.map,tt(mt.map,yt.mapTransform)),mt.alphaMap&&(yt.alphaMap.value=mt.alphaMap,tt(mt.alphaMap,yt.alphaMapTransform)),mt.bumpMap&&(yt.bumpMap.value=mt.bumpMap,tt(mt.bumpMap,yt.bumpMapTransform),yt.bumpScale.value=mt.bumpScale,mt.side===BackSide&&(yt.bumpScale.value*=-1)),mt.normalMap&&(yt.normalMap.value=mt.normalMap,tt(mt.normalMap,yt.normalMapTransform),yt.normalScale.value.copy(mt.normalScale),mt.side===BackSide&&yt.normalScale.value.negate()),mt.displacementMap&&(yt.displacementMap.value=mt.displacementMap,tt(mt.displacementMap,yt.displacementMapTransform),yt.displacementScale.value=mt.displacementScale,yt.displacementBias.value=mt.displacementBias),mt.emissiveMap&&(yt.emissiveMap.value=mt.emissiveMap,tt(mt.emissiveMap,yt.emissiveMapTransform)),mt.specularMap&&(yt.specularMap.value=mt.specularMap,tt(mt.specularMap,yt.specularMapTransform)),mt.alphaTest>0&&(yt.alphaTest.value=mt.alphaTest);const At=_.get(mt).envMap;if(At&&(yt.envMap.value=At,yt.flipEnvMap.value=At.isCubeTexture&&At.isRenderTargetTexture===!1?-1:1,yt.reflectivity.value=mt.reflectivity,yt.ior.value=mt.ior,yt.refractionRatio.value=mt.refractionRatio),mt.lightMap){yt.lightMap.value=mt.lightMap;const vt=_e._useLegacyLights===!0?Math.PI:1;yt.lightMapIntensity.value=mt.lightMapIntensity*vt,tt(mt.lightMap,yt.lightMapTransform)}mt.aoMap&&(yt.aoMap.value=mt.aoMap,yt.aoMapIntensity.value=mt.aoMapIntensity,tt(mt.aoMap,yt.aoMapTransform))}function at(yt,mt){yt.diffuse.value.copy(mt.color),yt.opacity.value=mt.opacity,mt.map&&(yt.map.value=mt.map,tt(mt.map,yt.mapTransform))}function ot(yt,mt){yt.dashSize.value=mt.dashSize,yt.totalSize.value=mt.dashSize+mt.gapSize,yt.scale.value=mt.scale}function st(yt,mt,At,vt){yt.diffuse.value.copy(mt.color),yt.opacity.value=mt.opacity,yt.size.value=mt.size*At,yt.scale.value=vt*.5,mt.map&&(yt.map.value=mt.map,tt(mt.map,yt.uvTransform)),mt.alphaMap&&(yt.alphaMap.value=mt.alphaMap,tt(mt.alphaMap,yt.alphaMapTransform)),mt.alphaTest>0&&(yt.alphaTest.value=mt.alphaTest)}function lt(yt,mt){yt.diffuse.value.copy(mt.color),yt.opacity.value=mt.opacity,yt.rotation.value=mt.rotation,mt.map&&(yt.map.value=mt.map,tt(mt.map,yt.mapTransform)),mt.alphaMap&&(yt.alphaMap.value=mt.alphaMap,tt(mt.alphaMap,yt.alphaMapTransform)),mt.alphaTest>0&&(yt.alphaTest.value=mt.alphaTest)}function ct(yt,mt){yt.specular.value.copy(mt.specular),yt.shininess.value=Math.max(mt.shininess,1e-4)}function ut(yt,mt){mt.gradientMap&&(yt.gradientMap.value=mt.gradientMap)}function ft(yt,mt){yt.metalness.value=mt.metalness,mt.metalnessMap&&(yt.metalnessMap.value=mt.metalnessMap,tt(mt.metalnessMap,yt.metalnessMapTransform)),yt.roughness.value=mt.roughness,mt.roughnessMap&&(yt.roughnessMap.value=mt.roughnessMap,tt(mt.roughnessMap,yt.roughnessMapTransform)),_.get(mt).envMap&&(yt.envMapIntensity.value=mt.envMapIntensity)}function pt(yt,mt,At){yt.ior.value=mt.ior,mt.sheen>0&&(yt.sheenColor.value.copy(mt.sheenColor).multiplyScalar(mt.sheen),yt.sheenRoughness.value=mt.sheenRoughness,mt.sheenColorMap&&(yt.sheenColorMap.value=mt.sheenColorMap,tt(mt.sheenColorMap,yt.sheenColorMapTransform)),mt.sheenRoughnessMap&&(yt.sheenRoughnessMap.value=mt.sheenRoughnessMap,tt(mt.sheenRoughnessMap,yt.sheenRoughnessMapTransform))),mt.clearcoat>0&&(yt.clearcoat.value=mt.clearcoat,yt.clearcoatRoughness.value=mt.clearcoatRoughness,mt.clearcoatMap&&(yt.clearcoatMap.value=mt.clearcoatMap,tt(mt.clearcoatMap,yt.clearcoatMapTransform)),mt.clearcoatRoughnessMap&&(yt.clearcoatRoughnessMap.value=mt.clearcoatRoughnessMap,tt(mt.clearcoatRoughnessMap,yt.clearcoatRoughnessMapTransform)),mt.clearcoatNormalMap&&(yt.clearcoatNormalMap.value=mt.clearcoatNormalMap,tt(mt.clearcoatNormalMap,yt.clearcoatNormalMapTransform),yt.clearcoatNormalScale.value.copy(mt.clearcoatNormalScale),mt.side===BackSide&&yt.clearcoatNormalScale.value.negate())),mt.iridescence>0&&(yt.iridescence.value=mt.iridescence,yt.iridescenceIOR.value=mt.iridescenceIOR,yt.iridescenceThicknessMinimum.value=mt.iridescenceThicknessRange[0],yt.iridescenceThicknessMaximum.value=mt.iridescenceThicknessRange[1],mt.iridescenceMap&&(yt.iridescenceMap.value=mt.iridescenceMap,tt(mt.iridescenceMap,yt.iridescenceMapTransform)),mt.iridescenceThicknessMap&&(yt.iridescenceThicknessMap.value=mt.iridescenceThicknessMap,tt(mt.iridescenceThicknessMap,yt.iridescenceThicknessMapTransform))),mt.transmission>0&&(yt.transmission.value=mt.transmission,yt.transmissionSamplerMap.value=At.texture,yt.transmissionSamplerSize.value.set(At.width,At.height),mt.transmissionMap&&(yt.transmissionMap.value=mt.transmissionMap,tt(mt.transmissionMap,yt.transmissionMapTransform)),yt.thickness.value=mt.thickness,mt.thicknessMap&&(yt.thicknessMap.value=mt.thicknessMap,tt(mt.thicknessMap,yt.thicknessMapTransform)),yt.attenuationDistance.value=mt.attenuationDistance,yt.attenuationColor.value.copy(mt.attenuationColor)),mt.anisotropy>0&&(yt.anisotropyVector.value.set(mt.anisotropy*Math.cos(mt.anisotropyRotation),mt.anisotropy*Math.sin(mt.anisotropyRotation)),mt.anisotropyMap&&(yt.anisotropyMap.value=mt.anisotropyMap,tt(mt.anisotropyMap,yt.anisotropyMapTransform))),yt.specularIntensity.value=mt.specularIntensity,yt.specularColor.value.copy(mt.specularColor),mt.specularColorMap&&(yt.specularColorMap.value=mt.specularColorMap,tt(mt.specularColorMap,yt.specularColorMapTransform)),mt.specularIntensityMap&&(yt.specularIntensityMap.value=mt.specularIntensityMap,tt(mt.specularIntensityMap,yt.specularIntensityMapTransform))}function gt(yt,mt){mt.matcap&&(yt.matcap.value=mt.matcap)}function xt(yt,mt){const At=_.get(mt).light;yt.referencePosition.value.setFromMatrixPosition(At.matrixWorld),yt.nearDistance.value=At.shadow.camera.near,yt.farDistance.value=At.shadow.camera.far}return{refreshFogUniforms:nt,refreshMaterialUniforms:rt}}function WebGLUniformsGroups(_e,_,tt,nt){let rt={},it={},at=[];const ot=tt.isWebGL2?_e.getParameter(_e.MAX_UNIFORM_BUFFER_BINDINGS):0;function st(At,vt){const Et=vt.program;nt.uniformBlockBinding(At,Et)}function lt(At,vt){let Et=rt[At.id];Et===void 0&&(gt(At),Et=ct(At),rt[At.id]=Et,At.addEventListener("dispose",yt));const Ct=vt.program;nt.updateUBOMapping(At,Ct);const Tt=_.render.frame;it[At.id]!==Tt&&(ft(At),it[At.id]=Tt)}function ct(At){const vt=ut();At.__bindingPointIndex=vt;const Et=_e.createBuffer(),Ct=At.__size,Tt=At.usage;return _e.bindBuffer(_e.UNIFORM_BUFFER,Et),_e.bufferData(_e.UNIFORM_BUFFER,Ct,Tt),_e.bindBuffer(_e.UNIFORM_BUFFER,null),_e.bindBufferBase(_e.UNIFORM_BUFFER,vt,Et),Et}function ut(){for(let At=0;At<ot;At++)if(at.indexOf(At)===-1)return at.push(At),At;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function ft(At){const vt=rt[At.id],Et=At.uniforms,Ct=At.__cache;_e.bindBuffer(_e.UNIFORM_BUFFER,vt);for(let Tt=0,bt=Et.length;Tt<bt;Tt++){const It=Et[Tt];if(pt(It,Tt,Ct)===!0){const wt=It.__offset,Rt=Array.isArray(It.value)?It.value:[It.value];let Ft=0;for(let Ut=0;Ut<Rt.length;Ut++){const Gt=Rt[Ut],Ht=xt(Gt);typeof Gt=="number"?(It.__data[0]=Gt,_e.bufferSubData(_e.UNIFORM_BUFFER,wt+Ft,It.__data)):Gt.isMatrix3?(It.__data[0]=Gt.elements[0],It.__data[1]=Gt.elements[1],It.__data[2]=Gt.elements[2],It.__data[3]=Gt.elements[0],It.__data[4]=Gt.elements[3],It.__data[5]=Gt.elements[4],It.__data[6]=Gt.elements[5],It.__data[7]=Gt.elements[0],It.__data[8]=Gt.elements[6],It.__data[9]=Gt.elements[7],It.__data[10]=Gt.elements[8],It.__data[11]=Gt.elements[0]):(Gt.toArray(It.__data,Ft),Ft+=Ht.storage/Float32Array.BYTES_PER_ELEMENT)}_e.bufferSubData(_e.UNIFORM_BUFFER,wt,It.__data)}}_e.bindBuffer(_e.UNIFORM_BUFFER,null)}function pt(At,vt,Et){const Ct=At.value;if(Et[vt]===void 0){if(typeof Ct=="number")Et[vt]=Ct;else{const Tt=Array.isArray(Ct)?Ct:[Ct],bt=[];for(let It=0;It<Tt.length;It++)bt.push(Tt[It].clone());Et[vt]=bt}return!0}else if(typeof Ct=="number"){if(Et[vt]!==Ct)return Et[vt]=Ct,!0}else{const Tt=Array.isArray(Et[vt])?Et[vt]:[Et[vt]],bt=Array.isArray(Ct)?Ct:[Ct];for(let It=0;It<Tt.length;It++){const wt=Tt[It];if(wt.equals(bt[It])===!1)return wt.copy(bt[It]),!0}}return!1}function gt(At){const vt=At.uniforms;let Et=0;const Ct=16;let Tt=0;for(let bt=0,It=vt.length;bt<It;bt++){const wt=vt[bt],Rt={boundary:0,storage:0},Ft=Array.isArray(wt.value)?wt.value:[wt.value];for(let Ut=0,Gt=Ft.length;Ut<Gt;Ut++){const Ht=Ft[Ut],jt=xt(Ht);Rt.boundary+=jt.boundary,Rt.storage+=jt.storage}if(wt.__data=new Float32Array(Rt.storage/Float32Array.BYTES_PER_ELEMENT),wt.__offset=Et,bt>0){Tt=Et%Ct;const Ut=Ct-Tt;Tt!==0&&Ut-Rt.boundary<0&&(Et+=Ct-Tt,wt.__offset=Et)}Et+=Rt.storage}return Tt=Et%Ct,Tt>0&&(Et+=Ct-Tt),At.__size=Et,At.__cache={},this}function xt(At){const vt={boundary:0,storage:0};return typeof At=="number"?(vt.boundary=4,vt.storage=4):At.isVector2?(vt.boundary=8,vt.storage=8):At.isVector3||At.isColor?(vt.boundary=16,vt.storage=12):At.isVector4?(vt.boundary=16,vt.storage=16):At.isMatrix3?(vt.boundary=48,vt.storage=48):At.isMatrix4?(vt.boundary=64,vt.storage=64):At.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",At),vt}function yt(At){const vt=At.target;vt.removeEventListener("dispose",yt);const Et=at.indexOf(vt.__bindingPointIndex);at.splice(Et,1),_e.deleteBuffer(rt[vt.id]),delete rt[vt.id],delete it[vt.id]}function mt(){for(const At in rt)_e.deleteBuffer(rt[At]);at=[],rt={},it={}}return{bind:st,update:lt,dispose:mt}}class WebGLRenderer{constructor(_={}){const{canvas:tt=createCanvasElement(),context:nt=null,depth:rt=!0,stencil:it=!0,alpha:at=!1,antialias:ot=!1,premultipliedAlpha:st=!0,preserveDrawingBuffer:lt=!1,powerPreference:ct="default",failIfMajorPerformanceCaveat:ut=!1}=_;this.isWebGLRenderer=!0;let ft;nt!==null?ft=nt.getContextAttributes().alpha:ft=at;const pt=new Uint32Array(4),gt=new Int32Array(4);let xt=null,yt=null;const mt=[],At=[];this.domElement=tt,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=SRGBColorSpace,this._useLegacyLights=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const vt=this;let Et=!1,Ct=0,Tt=0,bt=null,It=-1,wt=null;const Rt=new Vector4,Ft=new Vector4;let Ut=null;const Gt=new Color$1(0);let Ht=0,jt=tt.width,Xt=tt.height,Jt=1,Dt=null,zt=null;const $t=new Vector4(0,0,jt,Xt),Lt=new Vector4(0,0,jt,Xt);let Vt=!1;const tn=new Frustum;let an=!1,on=!1,sn=null;const ln=new Matrix4,cn=new Vector2,In=new Vector3,zn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function yn(){return bt===null?Jt:1}let Wt=nt;function _n(Pt,Qt){for(let Kt=0;Kt<Pt.length;Kt++){const Yt=Pt[Kt],en=tt.getContext(Yt,Qt);if(en!==null)return en}return null}try{const Pt={alpha:!0,depth:rt,stencil:it,antialias:ot,premultipliedAlpha:st,preserveDrawingBuffer:lt,powerPreference:ct,failIfMajorPerformanceCaveat:ut};if("setAttribute"in tt&&tt.setAttribute("data-engine",`three.js r${REVISION}`),tt.addEventListener("webglcontextlost",pn,!1),tt.addEventListener("webglcontextrestored",An,!1),tt.addEventListener("webglcontextcreationerror",Hn,!1),Wt===null){const Qt=["webgl2","webgl","experimental-webgl"];if(vt.isWebGL1Renderer===!0&&Qt.shift(),Wt=_n(Qt,Pt),Wt===null)throw _n(Qt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Wt instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Wt.getShaderPrecisionFormat===void 0&&(Wt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Pt){throw console.error("THREE.WebGLRenderer: "+Pt.message),Pt}let gn,vn,mn,Wn,xn,Dn,Fn,bn,jn,Nt,kt,rn,Mn,wn,Tn,Gn,Un,dn,Vn,Qn,Nn,kn,$n,Yn;function tr(){gn=new WebGLExtensions(Wt),vn=new WebGLCapabilities(Wt,gn,_),gn.init(vn),kn=new WebGLUtils(Wt,gn,vn),mn=new WebGLState(Wt,gn,vn),Wn=new WebGLInfo(Wt),xn=new WebGLProperties,Dn=new WebGLTextures(Wt,gn,mn,xn,vn,kn,Wn),Fn=new WebGLCubeMaps(vt),bn=new WebGLCubeUVMaps(vt),jn=new WebGLAttributes(Wt,vn),$n=new WebGLBindingStates(Wt,gn,jn,vn),Nt=new WebGLGeometries(Wt,jn,Wn,$n),kt=new WebGLObjects(Wt,Nt,jn,Wn),Vn=new WebGLMorphtargets(Wt,vn,Dn),Gn=new WebGLClipping(xn),rn=new WebGLPrograms(vt,Fn,bn,gn,vn,$n,Gn),Mn=new WebGLMaterials(vt,xn),wn=new WebGLRenderLists,Tn=new WebGLRenderStates(gn,vn),dn=new WebGLBackground(vt,Fn,bn,mn,kt,ft,st),Un=new WebGLShadowMap(vt,kt,vn),Yn=new WebGLUniformsGroups(Wt,Wn,vn,mn),Qn=new WebGLBufferRenderer(Wt,gn,Wn,vn),Nn=new WebGLIndexedBufferRenderer(Wt,gn,Wn,vn),Wn.programs=rn.programs,vt.capabilities=vn,vt.extensions=gn,vt.properties=xn,vt.renderLists=wn,vt.shadowMap=Un,vt.state=mn,vt.info=Wn}tr();const nn=new WebXRManager(vt,Wt);this.xr=nn,this.getContext=function(){return Wt},this.getContextAttributes=function(){return Wt.getContextAttributes()},this.forceContextLoss=function(){const Pt=gn.get("WEBGL_lose_context");Pt&&Pt.loseContext()},this.forceContextRestore=function(){const Pt=gn.get("WEBGL_lose_context");Pt&&Pt.restoreContext()},this.getPixelRatio=function(){return Jt},this.setPixelRatio=function(Pt){Pt!==void 0&&(Jt=Pt,this.setSize(jt,Xt,!1))},this.getSize=function(Pt){return Pt.set(jt,Xt)},this.setSize=function(Pt,Qt,Kt=!0){if(nn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}jt=Pt,Xt=Qt,tt.width=Math.floor(Pt*Jt),tt.height=Math.floor(Qt*Jt),Kt===!0&&(tt.style.width=Pt+"px",tt.style.height=Qt+"px"),this.setViewport(0,0,Pt,Qt)},this.getDrawingBufferSize=function(Pt){return Pt.set(jt*Jt,Xt*Jt).floor()},this.setDrawingBufferSize=function(Pt,Qt,Kt){jt=Pt,Xt=Qt,Jt=Kt,tt.width=Math.floor(Pt*Kt),tt.height=Math.floor(Qt*Kt),this.setViewport(0,0,Pt,Qt)},this.getCurrentViewport=function(Pt){return Pt.copy(Rt)},this.getViewport=function(Pt){return Pt.copy($t)},this.setViewport=function(Pt,Qt,Kt,Yt){Pt.isVector4?$t.set(Pt.x,Pt.y,Pt.z,Pt.w):$t.set(Pt,Qt,Kt,Yt),mn.viewport(Rt.copy($t).multiplyScalar(Jt).floor())},this.getScissor=function(Pt){return Pt.copy(Lt)},this.setScissor=function(Pt,Qt,Kt,Yt){Pt.isVector4?Lt.set(Pt.x,Pt.y,Pt.z,Pt.w):Lt.set(Pt,Qt,Kt,Yt),mn.scissor(Ft.copy(Lt).multiplyScalar(Jt).floor())},this.getScissorTest=function(){return Vt},this.setScissorTest=function(Pt){mn.setScissorTest(Vt=Pt)},this.setOpaqueSort=function(Pt){Dt=Pt},this.setTransparentSort=function(Pt){zt=Pt},this.getClearColor=function(Pt){return Pt.copy(dn.getClearColor())},this.setClearColor=function(){dn.setClearColor.apply(dn,arguments)},this.getClearAlpha=function(){return dn.getClearAlpha()},this.setClearAlpha=function(){dn.setClearAlpha.apply(dn,arguments)},this.clear=function(Pt=!0,Qt=!0,Kt=!0){let Yt=0;if(Pt){let en=!1;if(bt!==null){const En=bt.texture.format;en=En===RGBAIntegerFormat||En===RGIntegerFormat||En===RedIntegerFormat}if(en){const En=bt.texture.type,Sn=En===UnsignedByteType||En===UnsignedIntType||En===UnsignedShortType||En===UnsignedInt248Type||En===UnsignedShort4444Type||En===UnsignedShort5551Type,Pn=dn.getClearColor(),Bn=dn.getClearAlpha(),On=Pn.r,un=Pn.g,er=Pn.b;Sn?(pt[0]=On,pt[1]=un,pt[2]=er,pt[3]=Bn,Wt.clearBufferuiv(Wt.COLOR,0,pt)):(gt[0]=On,gt[1]=un,gt[2]=er,gt[3]=Bn,Wt.clearBufferiv(Wt.COLOR,0,gt))}else Yt|=Wt.COLOR_BUFFER_BIT}Qt&&(Yt|=Wt.DEPTH_BUFFER_BIT),Kt&&(Yt|=Wt.STENCIL_BUFFER_BIT),Wt.clear(Yt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){tt.removeEventListener("webglcontextlost",pn,!1),tt.removeEventListener("webglcontextrestored",An,!1),tt.removeEventListener("webglcontextcreationerror",Hn,!1),wn.dispose(),Tn.dispose(),xn.dispose(),Fn.dispose(),bn.dispose(),kt.dispose(),$n.dispose(),Yn.dispose(),rn.dispose(),nn.dispose(),nn.removeEventListener("sessionstart",Pr),nn.removeEventListener("sessionend",Mr),sn&&(sn.dispose(),sn=null),_r.stop()};function pn(Pt){Pt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Et=!0}function An(){console.log("THREE.WebGLRenderer: Context Restored."),Et=!1;const Pt=Wn.autoReset,Qt=Un.enabled,Kt=Un.autoUpdate,Yt=Un.needsUpdate,en=Un.type;tr(),Wn.autoReset=Pt,Un.enabled=Qt,Un.autoUpdate=Kt,Un.needsUpdate=Yt,Un.type=en}function Hn(Pt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Pt.statusMessage)}function Jn(Pt){const Qt=Pt.target;Qt.removeEventListener("dispose",Jn),Ar(Qt)}function Ar(Pt){Er(Pt),xn.remove(Pt)}function Er(Pt){const Qt=xn.get(Pt).programs;Qt!==void 0&&(Qt.forEach(function(Kt){rn.releaseProgram(Kt)}),Pt.isShaderMaterial&&rn.releaseShaderCache(Pt))}this.renderBufferDirect=function(Pt,Qt,Kt,Yt,en,En){Qt===null&&(Qt=zn);const Sn=en.isMesh&&en.matrixWorld.determinant()<0,Pn=Xr(Pt,Qt,Kt,Yt,en);mn.setMaterial(Yt,Sn);let Bn=Kt.index,On=1;if(Yt.wireframe===!0){if(Bn=Nt.getWireframeAttribute(Kt),Bn===void 0)return;On=2}const un=Kt.drawRange,er=Kt.attributes.position;let Kn=un.start*On,qn=(un.start+un.count)*On;En!==null&&(Kn=Math.max(Kn,En.start*On),qn=Math.min(qn,(En.start+En.count)*On)),Bn!==null?(Kn=Math.max(Kn,0),qn=Math.min(qn,Bn.count)):er!=null&&(Kn=Math.max(Kn,0),qn=Math.min(qn,er.count));const or=qn-Kn;if(or<0||or===1/0)return;$n.setup(en,Yt,Pn,Kt,Bn);let fr,lr=Qn;if(Bn!==null&&(fr=jn.get(Bn),lr=Nn,lr.setIndex(fr)),en.isMesh)Yt.wireframe===!0?(mn.setLineWidth(Yt.wireframeLinewidth*yn()),lr.setMode(Wt.LINES)):lr.setMode(Wt.TRIANGLES);else if(en.isLine){let Zn=Yt.linewidth;Zn===void 0&&(Zn=1),mn.setLineWidth(Zn*yn()),en.isLineSegments?lr.setMode(Wt.LINES):en.isLineLoop?lr.setMode(Wt.LINE_LOOP):lr.setMode(Wt.LINE_STRIP)}else en.isPoints?lr.setMode(Wt.POINTS):en.isSprite&&lr.setMode(Wt.TRIANGLES);if(en.isInstancedMesh)lr.renderInstances(Kn,or,en.count);else if(Kt.isInstancedBufferGeometry){const Zn=Kt._maxInstanceCount!==void 0?Kt._maxInstanceCount:1/0,hr=Math.min(Kt.instanceCount,Zn);lr.renderInstances(Kn,or,hr)}else lr.render(Kn,or)},this.compile=function(Pt,Qt){function Kt(Yt,en,En){Yt.transparent===!0&&Yt.side===DoubleSide&&Yt.forceSinglePass===!1?(Yt.side=BackSide,Yt.needsUpdate=!0,Lr(Yt,en,En),Yt.side=FrontSide,Yt.needsUpdate=!0,Lr(Yt,en,En),Yt.side=DoubleSide):Lr(Yt,en,En)}yt=Tn.get(Pt),yt.init(),At.push(yt),Pt.traverseVisible(function(Yt){Yt.isLight&&Yt.layers.test(Qt.layers)&&(yt.pushLight(Yt),Yt.castShadow&&yt.pushShadow(Yt))}),yt.setupLights(vt._useLegacyLights),Pt.traverse(function(Yt){const en=Yt.material;if(en)if(Array.isArray(en))for(let En=0;En<en.length;En++){const Sn=en[En];Kt(Sn,Pt,Yt)}else Kt(en,Pt,Yt)}),At.pop(),yt=null};let Tr=null;function Rr(Pt){Tr&&Tr(Pt)}function Pr(){_r.stop()}function Mr(){_r.start()}const _r=new WebGLAnimation;_r.setAnimationLoop(Rr),typeof self<"u"&&_r.setContext(self),this.setAnimationLoop=function(Pt){Tr=Pt,nn.setAnimationLoop(Pt),Pt===null?_r.stop():_r.start()},nn.addEventListener("sessionstart",Pr),nn.addEventListener("sessionend",Mr),this.render=function(Pt,Qt){if(Qt!==void 0&&Qt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Et===!0)return;Pt.matrixWorldAutoUpdate===!0&&Pt.updateMatrixWorld(),Qt.parent===null&&Qt.matrixWorldAutoUpdate===!0&&Qt.updateMatrixWorld(),nn.enabled===!0&&nn.isPresenting===!0&&(nn.cameraAutoUpdate===!0&&nn.updateCamera(Qt),Qt=nn.getCamera()),Pt.isScene===!0&&Pt.onBeforeRender(vt,Pt,Qt,bt),yt=Tn.get(Pt,At.length),yt.init(),At.push(yt),ln.multiplyMatrices(Qt.projectionMatrix,Qt.matrixWorldInverse),tn.setFromProjectionMatrix(ln),on=this.localClippingEnabled,an=Gn.init(this.clippingPlanes,on),xt=wn.get(Pt,mt.length),xt.init(),mt.push(xt),ba(Pt,Qt,0,vt.sortObjects),xt.finish(),vt.sortObjects===!0&&xt.sort(Dt,zt),this.info.render.frame++,an===!0&&Gn.beginShadows();const Kt=yt.state.shadowsArray;if(Un.render(Kt,Pt,Qt),an===!0&&Gn.endShadows(),this.info.autoReset===!0&&this.info.reset(),dn.render(xt,Pt),yt.setupLights(vt._useLegacyLights),Qt.isArrayCamera){const Yt=Qt.cameras;for(let en=0,En=Yt.length;en<En;en++){const Sn=Yt[en];_i(xt,Pt,Sn,Sn.viewport)}}else _i(xt,Pt,Qt);bt!==null&&(Dn.updateMultisampleRenderTarget(bt),Dn.updateRenderTargetMipmap(bt)),Pt.isScene===!0&&Pt.onAfterRender(vt,Pt,Qt),$n.resetDefaultState(),It=-1,wt=null,At.pop(),At.length>0?yt=At[At.length-1]:yt=null,mt.pop(),mt.length>0?xt=mt[mt.length-1]:xt=null};function ba(Pt,Qt,Kt,Yt){if(Pt.visible===!1)return;if(Pt.layers.test(Qt.layers)){if(Pt.isGroup)Kt=Pt.renderOrder;else if(Pt.isLOD)Pt.autoUpdate===!0&&Pt.update(Qt);else if(Pt.isLight)yt.pushLight(Pt),Pt.castShadow&&yt.pushShadow(Pt);else if(Pt.isSprite){if(!Pt.frustumCulled||tn.intersectsSprite(Pt)){Yt&&In.setFromMatrixPosition(Pt.matrixWorld).applyMatrix4(ln);const Sn=kt.update(Pt),Pn=Pt.material;Pn.visible&&xt.push(Pt,Sn,Pn,Kt,In.z,null)}}else if((Pt.isMesh||Pt.isLine||Pt.isPoints)&&(!Pt.frustumCulled||tn.intersectsObject(Pt))){const Sn=kt.update(Pt),Pn=Pt.material;if(Yt&&(Pt.boundingSphere!==void 0?(Pt.boundingSphere===null&&Pt.computeBoundingSphere(),In.copy(Pt.boundingSphere.center)):(Sn.boundingSphere===null&&Sn.computeBoundingSphere(),In.copy(Sn.boundingSphere.center)),In.applyMatrix4(Pt.matrixWorld).applyMatrix4(ln)),Array.isArray(Pn)){const Bn=Sn.groups;for(let On=0,un=Bn.length;On<un;On++){const er=Bn[On],Kn=Pn[er.materialIndex];Kn&&Kn.visible&&xt.push(Pt,Sn,Kn,Kt,In.z,er)}}else Pn.visible&&xt.push(Pt,Sn,Pn,Kt,In.z,null)}}const En=Pt.children;for(let Sn=0,Pn=En.length;Sn<Pn;Sn++)ba(En[Sn],Qt,Kt,Yt)}function _i(Pt,Qt,Kt,Yt){const en=Pt.opaque,En=Pt.transmissive,Sn=Pt.transparent;yt.setupLightsView(Kt),an===!0&&Gn.setGlobalState(vt.clippingPlanes,Kt),En.length>0&&Ir(en,En,Qt,Kt),Yt&&mn.viewport(Rt.copy(Yt)),en.length>0&&Nr(en,Qt,Kt),En.length>0&&Nr(En,Qt,Kt),Sn.length>0&&Nr(Sn,Qt,Kt),mn.buffers.depth.setTest(!0),mn.buffers.depth.setMask(!0),mn.buffers.color.setMask(!0),mn.setPolygonOffset(!1)}function Ir(Pt,Qt,Kt,Yt){const en=vn.isWebGL2;sn===null&&(sn=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:gn.has("EXT_color_buffer_half_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:en?4:0})),vt.getDrawingBufferSize(cn),en?sn.setSize(cn.x,cn.y):sn.setSize(floorPowerOfTwo(cn.x),floorPowerOfTwo(cn.y));const En=vt.getRenderTarget();vt.setRenderTarget(sn),vt.getClearColor(Gt),Ht=vt.getClearAlpha(),Ht<1&&vt.setClearColor(16777215,.5),vt.clear();const Sn=vt.toneMapping;vt.toneMapping=NoToneMapping,Nr(Pt,Kt,Yt),Dn.updateMultisampleRenderTarget(sn),Dn.updateRenderTargetMipmap(sn);let Pn=!1;for(let Bn=0,On=Qt.length;Bn<On;Bn++){const un=Qt[Bn],er=un.object,Kn=un.geometry,qn=un.material,or=un.group;if(qn.side===DoubleSide&&er.layers.test(Yt.layers)){const fr=qn.side;qn.side=BackSide,qn.needsUpdate=!0,Qr(er,Kt,Yt,Kn,qn,or),qn.side=fr,qn.needsUpdate=!0,Pn=!0}}Pn===!0&&(Dn.updateMultisampleRenderTarget(sn),Dn.updateRenderTargetMipmap(sn)),vt.setRenderTarget(En),vt.setClearColor(Gt,Ht),vt.toneMapping=Sn}function Nr(Pt,Qt,Kt){const Yt=Qt.isScene===!0?Qt.overrideMaterial:null;for(let en=0,En=Pt.length;en<En;en++){const Sn=Pt[en],Pn=Sn.object,Bn=Sn.geometry,On=Yt===null?Sn.material:Yt,un=Sn.group;Pn.layers.test(Kt.layers)&&Qr(Pn,Qt,Kt,Bn,On,un)}}function Qr(Pt,Qt,Kt,Yt,en,En){Pt.onBeforeRender(vt,Qt,Kt,Yt,en,En),Pt.modelViewMatrix.multiplyMatrices(Kt.matrixWorldInverse,Pt.matrixWorld),Pt.normalMatrix.getNormalMatrix(Pt.modelViewMatrix),en.onBeforeRender(vt,Qt,Kt,Yt,Pt,En),en.transparent===!0&&en.side===DoubleSide&&en.forceSinglePass===!1?(en.side=BackSide,en.needsUpdate=!0,vt.renderBufferDirect(Kt,Qt,Yt,en,Pt,En),en.side=FrontSide,en.needsUpdate=!0,vt.renderBufferDirect(Kt,Qt,Yt,en,Pt,En),en.side=DoubleSide):vt.renderBufferDirect(Kt,Qt,Yt,en,Pt,En),Pt.onAfterRender(vt,Qt,Kt,Yt,en,En)}function Lr(Pt,Qt,Kt){Qt.isScene!==!0&&(Qt=zn);const Yt=xn.get(Pt),en=yt.state.lights,En=yt.state.shadowsArray,Sn=en.state.version,Pn=rn.getParameters(Pt,en.state,En,Qt,Kt),Bn=rn.getProgramCacheKey(Pn);let On=Yt.programs;Yt.environment=Pt.isMeshStandardMaterial?Qt.environment:null,Yt.fog=Qt.fog,Yt.envMap=(Pt.isMeshStandardMaterial?bn:Fn).get(Pt.envMap||Yt.environment),On===void 0&&(Pt.addEventListener("dispose",Jn),On=new Map,Yt.programs=On);let un=On.get(Bn);if(un!==void 0){if(Yt.currentProgram===un&&Yt.lightsStateVersion===Sn)return sr(Pt,Pn),un}else Pn.uniforms=rn.getUniforms(Pt),Pt.onBuild(Kt,Pn,vt),Pt.onBeforeCompile(Pn,vt),un=rn.acquireProgram(Pn,Bn),On.set(Bn,un),Yt.uniforms=Pn.uniforms;const er=Yt.uniforms;(!Pt.isShaderMaterial&&!Pt.isRawShaderMaterial||Pt.clipping===!0)&&(er.clippingPlanes=Gn.uniform),sr(Pt,Pn),Yt.needsLights=Ot(Pt),Yt.lightsStateVersion=Sn,Yt.needsLights&&(er.ambientLightColor.value=en.state.ambient,er.lightProbe.value=en.state.probe,er.directionalLights.value=en.state.directional,er.directionalLightShadows.value=en.state.directionalShadow,er.spotLights.value=en.state.spot,er.spotLightShadows.value=en.state.spotShadow,er.rectAreaLights.value=en.state.rectArea,er.ltc_1.value=en.state.rectAreaLTC1,er.ltc_2.value=en.state.rectAreaLTC2,er.pointLights.value=en.state.point,er.pointLightShadows.value=en.state.pointShadow,er.hemisphereLights.value=en.state.hemi,er.directionalShadowMap.value=en.state.directionalShadowMap,er.directionalShadowMatrix.value=en.state.directionalShadowMatrix,er.spotShadowMap.value=en.state.spotShadowMap,er.spotLightMatrix.value=en.state.spotLightMatrix,er.spotLightMap.value=en.state.spotLightMap,er.pointShadowMap.value=en.state.pointShadowMap,er.pointShadowMatrix.value=en.state.pointShadowMatrix);const Kn=un.getUniforms(),qn=WebGLUniforms.seqWithValue(Kn.seq,er);return Yt.currentProgram=un,Yt.uniformsList=qn,un}function sr(Pt,Qt){const Kt=xn.get(Pt);Kt.outputColorSpace=Qt.outputColorSpace,Kt.instancing=Qt.instancing,Kt.instancingColor=Qt.instancingColor,Kt.skinning=Qt.skinning,Kt.morphTargets=Qt.morphTargets,Kt.morphNormals=Qt.morphNormals,Kt.morphColors=Qt.morphColors,Kt.morphTargetsCount=Qt.morphTargetsCount,Kt.numClippingPlanes=Qt.numClippingPlanes,Kt.numIntersection=Qt.numClipIntersection,Kt.vertexAlphas=Qt.vertexAlphas,Kt.vertexTangents=Qt.vertexTangents,Kt.toneMapping=Qt.toneMapping}function Xr(Pt,Qt,Kt,Yt,en){Qt.isScene!==!0&&(Qt=zn),Dn.resetTextureUnits();const En=Qt.fog,Sn=Yt.isMeshStandardMaterial?Qt.environment:null,Pn=bt===null?vt.outputColorSpace:bt.isXRRenderTarget===!0?bt.texture.colorSpace:LinearSRGBColorSpace,Bn=(Yt.isMeshStandardMaterial?bn:Fn).get(Yt.envMap||Sn),On=Yt.vertexColors===!0&&!!Kt.attributes.color&&Kt.attributes.color.itemSize===4,un=!!Kt.attributes.tangent&&(!!Yt.normalMap||Yt.anisotropy>0),er=!!Kt.morphAttributes.position,Kn=!!Kt.morphAttributes.normal,qn=!!Kt.morphAttributes.color;let or=NoToneMapping;Yt.toneMapped&&(bt===null||bt.isXRRenderTarget===!0)&&(or=vt.toneMapping);const fr=Kt.morphAttributes.position||Kt.morphAttributes.normal||Kt.morphAttributes.color,lr=fr!==void 0?fr.length:0,Zn=xn.get(Yt),hr=yt.state.lights;if(an===!0&&(on===!0||Pt!==wt)){const mr=Pt===wt&&Yt.id===It;Gn.setState(Yt,Pt,mr)}let ir=!1;Yt.version===Zn.__version?(Zn.needsLights&&Zn.lightsStateVersion!==hr.state.version||Zn.outputColorSpace!==Pn||en.isInstancedMesh&&Zn.instancing===!1||!en.isInstancedMesh&&Zn.instancing===!0||en.isSkinnedMesh&&Zn.skinning===!1||!en.isSkinnedMesh&&Zn.skinning===!0||en.isInstancedMesh&&Zn.instancingColor===!0&&en.instanceColor===null||en.isInstancedMesh&&Zn.instancingColor===!1&&en.instanceColor!==null||Zn.envMap!==Bn||Yt.fog===!0&&Zn.fog!==En||Zn.numClippingPlanes!==void 0&&(Zn.numClippingPlanes!==Gn.numPlanes||Zn.numIntersection!==Gn.numIntersection)||Zn.vertexAlphas!==On||Zn.vertexTangents!==un||Zn.morphTargets!==er||Zn.morphNormals!==Kn||Zn.morphColors!==qn||Zn.toneMapping!==or||vn.isWebGL2===!0&&Zn.morphTargetsCount!==lr)&&(ir=!0):(ir=!0,Zn.__version=Yt.version);let gr=Zn.currentProgram;ir===!0&&(gr=Lr(Yt,Qt,en));let Dr=!1,pr=!1,Fr=!1;const br=gr.getUniforms(),kr=Zn.uniforms;if(mn.useProgram(gr.program)&&(Dr=!0,pr=!0,Fr=!0),Yt.id!==It&&(It=Yt.id,pr=!0),Dr||wt!==Pt){br.setValue(Wt,"projectionMatrix",Pt.projectionMatrix),br.setValue(Wt,"viewMatrix",Pt.matrixWorldInverse);const mr=br.map.cameraPosition;mr!==void 0&&mr.setValue(Wt,In.setFromMatrixPosition(Pt.matrixWorld)),vn.logarithmicDepthBuffer&&br.setValue(Wt,"logDepthBufFC",2/(Math.log(Pt.far+1)/Math.LN2)),(Yt.isMeshPhongMaterial||Yt.isMeshToonMaterial||Yt.isMeshLambertMaterial||Yt.isMeshBasicMaterial||Yt.isMeshStandardMaterial||Yt.isShaderMaterial)&&br.setValue(Wt,"isOrthographic",Pt.isOrthographicCamera===!0),wt!==Pt&&(wt=Pt,pr=!0,Fr=!0)}if(en.isSkinnedMesh){br.setOptional(Wt,en,"bindMatrix"),br.setOptional(Wt,en,"bindMatrixInverse");const mr=en.skeleton;mr&&(vn.floatVertexTextures?(mr.boneTexture===null&&mr.computeBoneTexture(),br.setValue(Wt,"boneTexture",mr.boneTexture,Dn),br.setValue(Wt,"boneTextureSize",mr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const $r=Kt.morphAttributes;if(($r.position!==void 0||$r.normal!==void 0||$r.color!==void 0&&vn.isWebGL2===!0)&&Vn.update(en,Kt,gr),(pr||Zn.receiveShadow!==en.receiveShadow)&&(Zn.receiveShadow=en.receiveShadow,br.setValue(Wt,"receiveShadow",en.receiveShadow)),Yt.isMeshGouraudMaterial&&Yt.envMap!==null&&(kr.envMap.value=Bn,kr.flipEnvMap.value=Bn.isCubeTexture&&Bn.isRenderTargetTexture===!1?-1:1),pr&&(br.setValue(Wt,"toneMappingExposure",vt.toneMappingExposure),Zn.needsLights&&go(kr,Fr),En&&Yt.fog===!0&&Mn.refreshFogUniforms(kr,En),Mn.refreshMaterialUniforms(kr,Yt,Jt,Xt,sn),WebGLUniforms.upload(Wt,Zn.uniformsList,kr,Dn)),Yt.isShaderMaterial&&Yt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Wt,Zn.uniformsList,kr,Dn),Yt.uniformsNeedUpdate=!1),Yt.isSpriteMaterial&&br.setValue(Wt,"center",en.center),br.setValue(Wt,"modelViewMatrix",en.modelViewMatrix),br.setValue(Wt,"normalMatrix",en.normalMatrix),br.setValue(Wt,"modelMatrix",en.matrixWorld),Yt.isShaderMaterial||Yt.isRawShaderMaterial){const mr=Yt.uniformsGroups;for(let Gr=0,Br=mr.length;Gr<Br;Gr++)if(vn.isWebGL2){const vr=mr[Gr];Yn.update(vr,gr),Yn.bind(vr,gr)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return gr}function go(Pt,Qt){Pt.ambientLightColor.needsUpdate=Qt,Pt.lightProbe.needsUpdate=Qt,Pt.directionalLights.needsUpdate=Qt,Pt.directionalLightShadows.needsUpdate=Qt,Pt.pointLights.needsUpdate=Qt,Pt.pointLightShadows.needsUpdate=Qt,Pt.spotLights.needsUpdate=Qt,Pt.spotLightShadows.needsUpdate=Qt,Pt.rectAreaLights.needsUpdate=Qt,Pt.hemisphereLights.needsUpdate=Qt}function Ot(Pt){return Pt.isMeshLambertMaterial||Pt.isMeshToonMaterial||Pt.isMeshPhongMaterial||Pt.isMeshStandardMaterial||Pt.isShadowMaterial||Pt.isShaderMaterial&&Pt.lights===!0}this.getActiveCubeFace=function(){return Ct},this.getActiveMipmapLevel=function(){return Tt},this.getRenderTarget=function(){return bt},this.setRenderTargetTextures=function(Pt,Qt,Kt){xn.get(Pt.texture).__webglTexture=Qt,xn.get(Pt.depthTexture).__webglTexture=Kt;const Yt=xn.get(Pt);Yt.__hasExternalTextures=!0,Yt.__hasExternalTextures&&(Yt.__autoAllocateDepthBuffer=Kt===void 0,Yt.__autoAllocateDepthBuffer||gn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Yt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Pt,Qt){const Kt=xn.get(Pt);Kt.__webglFramebuffer=Qt,Kt.__useDefaultFramebuffer=Qt===void 0},this.setRenderTarget=function(Pt,Qt=0,Kt=0){bt=Pt,Ct=Qt,Tt=Kt;let Yt=!0,en=null,En=!1,Sn=!1;if(Pt){const Bn=xn.get(Pt);Bn.__useDefaultFramebuffer!==void 0?(mn.bindFramebuffer(Wt.FRAMEBUFFER,null),Yt=!1):Bn.__webglFramebuffer===void 0?Dn.setupRenderTarget(Pt):Bn.__hasExternalTextures&&Dn.rebindTextures(Pt,xn.get(Pt.texture).__webglTexture,xn.get(Pt.depthTexture).__webglTexture);const On=Pt.texture;(On.isData3DTexture||On.isDataArrayTexture||On.isCompressedArrayTexture)&&(Sn=!0);const un=xn.get(Pt).__webglFramebuffer;Pt.isWebGLCubeRenderTarget?(Array.isArray(un[Qt])?en=un[Qt][Kt]:en=un[Qt],En=!0):vn.isWebGL2&&Pt.samples>0&&Dn.useMultisampledRTT(Pt)===!1?en=xn.get(Pt).__webglMultisampledFramebuffer:Array.isArray(un)?en=un[Kt]:en=un,Rt.copy(Pt.viewport),Ft.copy(Pt.scissor),Ut=Pt.scissorTest}else Rt.copy($t).multiplyScalar(Jt).floor(),Ft.copy(Lt).multiplyScalar(Jt).floor(),Ut=Vt;if(mn.bindFramebuffer(Wt.FRAMEBUFFER,en)&&vn.drawBuffers&&Yt&&mn.drawBuffers(Pt,en),mn.viewport(Rt),mn.scissor(Ft),mn.setScissorTest(Ut),En){const Bn=xn.get(Pt.texture);Wt.framebufferTexture2D(Wt.FRAMEBUFFER,Wt.COLOR_ATTACHMENT0,Wt.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,Bn.__webglTexture,Kt)}else if(Sn){const Bn=xn.get(Pt.texture),On=Qt||0;Wt.framebufferTextureLayer(Wt.FRAMEBUFFER,Wt.COLOR_ATTACHMENT0,Bn.__webglTexture,Kt||0,On)}It=-1},this.readRenderTargetPixels=function(Pt,Qt,Kt,Yt,en,En,Sn){if(!(Pt&&Pt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pn=xn.get(Pt).__webglFramebuffer;if(Pt.isWebGLCubeRenderTarget&&Sn!==void 0&&(Pn=Pn[Sn]),Pn){mn.bindFramebuffer(Wt.FRAMEBUFFER,Pn);try{const Bn=Pt.texture,On=Bn.format,un=Bn.type;if(On!==RGBAFormat&&kn.convert(On)!==Wt.getParameter(Wt.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const er=un===HalfFloatType&&(gn.has("EXT_color_buffer_half_float")||vn.isWebGL2&&gn.has("EXT_color_buffer_float"));if(un!==UnsignedByteType&&kn.convert(un)!==Wt.getParameter(Wt.IMPLEMENTATION_COLOR_READ_TYPE)&&!(un===FloatType&&(vn.isWebGL2||gn.has("OES_texture_float")||gn.has("WEBGL_color_buffer_float")))&&!er){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Qt>=0&&Qt<=Pt.width-Yt&&Kt>=0&&Kt<=Pt.height-en&&Wt.readPixels(Qt,Kt,Yt,en,kn.convert(On),kn.convert(un),En)}finally{const Bn=bt!==null?xn.get(bt).__webglFramebuffer:null;mn.bindFramebuffer(Wt.FRAMEBUFFER,Bn)}}},this.copyFramebufferToTexture=function(Pt,Qt,Kt=0){const Yt=Math.pow(2,-Kt),en=Math.floor(Qt.image.width*Yt),En=Math.floor(Qt.image.height*Yt);Dn.setTexture2D(Qt,0),Wt.copyTexSubImage2D(Wt.TEXTURE_2D,Kt,0,0,Pt.x,Pt.y,en,En),mn.unbindTexture()},this.copyTextureToTexture=function(Pt,Qt,Kt,Yt=0){const en=Qt.image.width,En=Qt.image.height,Sn=kn.convert(Kt.format),Pn=kn.convert(Kt.type);Dn.setTexture2D(Kt,0),Wt.pixelStorei(Wt.UNPACK_FLIP_Y_WEBGL,Kt.flipY),Wt.pixelStorei(Wt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Kt.premultiplyAlpha),Wt.pixelStorei(Wt.UNPACK_ALIGNMENT,Kt.unpackAlignment),Qt.isDataTexture?Wt.texSubImage2D(Wt.TEXTURE_2D,Yt,Pt.x,Pt.y,en,En,Sn,Pn,Qt.image.data):Qt.isCompressedTexture?Wt.compressedTexSubImage2D(Wt.TEXTURE_2D,Yt,Pt.x,Pt.y,Qt.mipmaps[0].width,Qt.mipmaps[0].height,Sn,Qt.mipmaps[0].data):Wt.texSubImage2D(Wt.TEXTURE_2D,Yt,Pt.x,Pt.y,Sn,Pn,Qt.image),Yt===0&&Kt.generateMipmaps&&Wt.generateMipmap(Wt.TEXTURE_2D),mn.unbindTexture()},this.copyTextureToTexture3D=function(Pt,Qt,Kt,Yt,en=0){if(vt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const En=Pt.max.x-Pt.min.x+1,Sn=Pt.max.y-Pt.min.y+1,Pn=Pt.max.z-Pt.min.z+1,Bn=kn.convert(Yt.format),On=kn.convert(Yt.type);let un;if(Yt.isData3DTexture)Dn.setTexture3D(Yt,0),un=Wt.TEXTURE_3D;else if(Yt.isDataArrayTexture)Dn.setTexture2DArray(Yt,0),un=Wt.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Wt.pixelStorei(Wt.UNPACK_FLIP_Y_WEBGL,Yt.flipY),Wt.pixelStorei(Wt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Yt.premultiplyAlpha),Wt.pixelStorei(Wt.UNPACK_ALIGNMENT,Yt.unpackAlignment);const er=Wt.getParameter(Wt.UNPACK_ROW_LENGTH),Kn=Wt.getParameter(Wt.UNPACK_IMAGE_HEIGHT),qn=Wt.getParameter(Wt.UNPACK_SKIP_PIXELS),or=Wt.getParameter(Wt.UNPACK_SKIP_ROWS),fr=Wt.getParameter(Wt.UNPACK_SKIP_IMAGES),lr=Kt.isCompressedTexture?Kt.mipmaps[0]:Kt.image;Wt.pixelStorei(Wt.UNPACK_ROW_LENGTH,lr.width),Wt.pixelStorei(Wt.UNPACK_IMAGE_HEIGHT,lr.height),Wt.pixelStorei(Wt.UNPACK_SKIP_PIXELS,Pt.min.x),Wt.pixelStorei(Wt.UNPACK_SKIP_ROWS,Pt.min.y),Wt.pixelStorei(Wt.UNPACK_SKIP_IMAGES,Pt.min.z),Kt.isDataTexture||Kt.isData3DTexture?Wt.texSubImage3D(un,en,Qt.x,Qt.y,Qt.z,En,Sn,Pn,Bn,On,lr.data):Kt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Wt.compressedTexSubImage3D(un,en,Qt.x,Qt.y,Qt.z,En,Sn,Pn,Bn,lr.data)):Wt.texSubImage3D(un,en,Qt.x,Qt.y,Qt.z,En,Sn,Pn,Bn,On,lr),Wt.pixelStorei(Wt.UNPACK_ROW_LENGTH,er),Wt.pixelStorei(Wt.UNPACK_IMAGE_HEIGHT,Kn),Wt.pixelStorei(Wt.UNPACK_SKIP_PIXELS,qn),Wt.pixelStorei(Wt.UNPACK_SKIP_ROWS,or),Wt.pixelStorei(Wt.UNPACK_SKIP_IMAGES,fr),en===0&&Yt.generateMipmaps&&Wt.generateMipmap(un),mn.unbindTexture()},this.initTexture=function(Pt){Pt.isCubeTexture?Dn.setTextureCube(Pt,0):Pt.isData3DTexture?Dn.setTexture3D(Pt,0):Pt.isDataArrayTexture||Pt.isCompressedArrayTexture?Dn.setTexture2DArray(Pt,0):Dn.setTexture2D(Pt,0),mn.unbindTexture()},this.resetState=function(){Ct=0,Tt=0,bt=null,mn.reset(),$n.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(_){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!_}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===SRGBColorSpace?sRGBEncoding:LinearEncoding}set outputEncoding(_){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=_===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(_){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=_}}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(_,tt=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color$1(_),this.density=tt}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Fog{constructor(_,tt=1,nt=1e3){this.isFog=!0,this.name="",this.color=new Color$1(_),this.near=tt,this.far=nt}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(_,tt){return super.copy(_,tt),_.background!==null&&(this.background=_.background.clone()),_.environment!==null&&(this.environment=_.environment.clone()),_.fog!==null&&(this.fog=_.fog.clone()),this.backgroundBlurriness=_.backgroundBlurriness,this.backgroundIntensity=_.backgroundIntensity,_.overrideMaterial!==null&&(this.overrideMaterial=_.overrideMaterial.clone()),this.matrixAutoUpdate=_.matrixAutoUpdate,this}toJSON(_){const tt=super.toJSON(_);return this.fog!==null&&(tt.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(tt.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(tt.object.backgroundIntensity=this.backgroundIntensity),tt}}class InterleavedBuffer{constructor(_,tt){this.isInterleavedBuffer=!0,this.array=_,this.stride=tt,this.count=_!==void 0?_.length/tt:0,this.usage=StaticDrawUsage,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(_){_===!0&&this.version++}setUsage(_){return this.usage=_,this}copy(_){return this.array=new _.array.constructor(_.array),this.count=_.count,this.stride=_.stride,this.usage=_.usage,this}copyAt(_,tt,nt){_*=this.stride,nt*=tt.stride;for(let rt=0,it=this.stride;rt<it;rt++)this.array[_+rt]=tt.array[nt+rt];return this}set(_,tt=0){return this.array.set(_,tt),this}clone(_){_.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const tt=new this.array.constructor(_.arrayBuffers[this.array.buffer._uuid]),nt=new this.constructor(tt,this.stride);return nt.setUsage(this.usage),nt}onUpload(_){return this.onUploadCallback=_,this}toJSON(_){return _.arrayBuffers===void 0&&(_.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),_.arrayBuffers[this.array.buffer._uuid]===void 0&&(_.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$5=new Vector3;class InterleavedBufferAttribute{constructor(_,tt,nt,rt=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=_,this.itemSize=tt,this.offset=nt,this.normalized=rt}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(_){this.data.needsUpdate=_}applyMatrix4(_){for(let tt=0,nt=this.data.count;tt<nt;tt++)_vector$5.fromBufferAttribute(this,tt),_vector$5.applyMatrix4(_),this.setXYZ(tt,_vector$5.x,_vector$5.y,_vector$5.z);return this}applyNormalMatrix(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$5.fromBufferAttribute(this,tt),_vector$5.applyNormalMatrix(_),this.setXYZ(tt,_vector$5.x,_vector$5.y,_vector$5.z);return this}transformDirection(_){for(let tt=0,nt=this.count;tt<nt;tt++)_vector$5.fromBufferAttribute(this,tt),_vector$5.transformDirection(_),this.setXYZ(tt,_vector$5.x,_vector$5.y,_vector$5.z);return this}setX(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.data.array[_*this.data.stride+this.offset]=tt,this}setY(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.data.array[_*this.data.stride+this.offset+1]=tt,this}setZ(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.data.array[_*this.data.stride+this.offset+2]=tt,this}setW(_,tt){return this.normalized&&(tt=normalize$5(tt,this.array)),this.data.array[_*this.data.stride+this.offset+3]=tt,this}getX(_){let tt=this.data.array[_*this.data.stride+this.offset];return this.normalized&&(tt=denormalize(tt,this.array)),tt}getY(_){let tt=this.data.array[_*this.data.stride+this.offset+1];return this.normalized&&(tt=denormalize(tt,this.array)),tt}getZ(_){let tt=this.data.array[_*this.data.stride+this.offset+2];return this.normalized&&(tt=denormalize(tt,this.array)),tt}getW(_){let tt=this.data.array[_*this.data.stride+this.offset+3];return this.normalized&&(tt=denormalize(tt,this.array)),tt}setXY(_,tt,nt){return _=_*this.data.stride+this.offset,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array)),this.data.array[_+0]=tt,this.data.array[_+1]=nt,this}setXYZ(_,tt,nt,rt){return _=_*this.data.stride+this.offset,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array)),this.data.array[_+0]=tt,this.data.array[_+1]=nt,this.data.array[_+2]=rt,this}setXYZW(_,tt,nt,rt,it){return _=_*this.data.stride+this.offset,this.normalized&&(tt=normalize$5(tt,this.array),nt=normalize$5(nt,this.array),rt=normalize$5(rt,this.array),it=normalize$5(it,this.array)),this.data.array[_+0]=tt,this.data.array[_+1]=nt,this.data.array[_+2]=rt,this.data.array[_+3]=it,this}clone(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const tt=[];for(let nt=0;nt<this.count;nt++){const rt=nt*this.data.stride+this.offset;for(let it=0;it<this.itemSize;it++)tt.push(this.data.array[rt+it])}return new BufferAttribute(new this.array.constructor(tt),this.itemSize,this.normalized)}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.clone(_)),new InterleavedBufferAttribute(_.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(_){if(_===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const tt=[];for(let nt=0;nt<this.count;nt++){const rt=nt*this.data.stride+this.offset;for(let it=0;it<this.itemSize;it++)tt.push(this.data.array[rt+it])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:tt,normalized:this.normalized}}else return _.interleavedBuffers===void 0&&(_.interleavedBuffers={}),_.interleavedBuffers[this.data.uuid]===void 0&&(_.interleavedBuffers[this.data.uuid]=this.data.toJSON(_)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(_){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.rotation=_.rotation,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(_){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const tt=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),nt=new InterleavedBuffer(tt,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(nt,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(nt,2,3,!1))}this.geometry=_geometry,this.material=_!==void 0?_:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(_,tt){_.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(_.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(_.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),_.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const nt=this.material.rotation;let rt,it;nt!==0&&(it=Math.cos(nt),rt=Math.sin(nt));const at=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,at,_worldScale,rt,it),transformVertex(_vB.set(.5,-.5,0),_mvPosition,at,_worldScale,rt,it),transformVertex(_vC.set(.5,.5,0),_mvPosition,at,_worldScale,rt,it),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let ot=_.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(ot===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,at,_worldScale,rt,it),_uvB.set(0,1),ot=_.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),ot===null))return;const st=_.ray.origin.distanceTo(_intersectPoint);st<_.near||st>_.far||tt.push({distance:st,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(_,tt){return super.copy(_,tt),_.center!==void 0&&this.center.copy(_.center),this.material=_.material,this}}function transformVertex(_e,_,tt,nt,rt,it){_alignedPosition.subVectors(_e,tt).addScalar(.5).multiply(nt),rt!==void 0?(_rotatedPosition.x=it*_alignedPosition.x-rt*_alignedPosition.y,_rotatedPosition.y=rt*_alignedPosition.x+it*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),_e.copy(_),_e.x+=_rotatedPosition.x,_e.y+=_rotatedPosition.y,_e.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(_){super.copy(_,!1);const tt=_.levels;for(let nt=0,rt=tt.length;nt<rt;nt++){const it=tt[nt];this.addLevel(it.object.clone(),it.distance,it.hysteresis)}return this.autoUpdate=_.autoUpdate,this}addLevel(_,tt=0,nt=0){tt=Math.abs(tt);const rt=this.levels;let it;for(it=0;it<rt.length&&!(tt<rt[it].distance);it++);return rt.splice(it,0,{distance:tt,hysteresis:nt,object:_}),this.add(_),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(_){const tt=this.levels;if(tt.length>0){let nt,rt;for(nt=1,rt=tt.length;nt<rt;nt++){let it=tt[nt].distance;if(tt[nt].object.visible&&(it-=it*tt[nt].hysteresis),_<it)break}return tt[nt-1].object}return null}raycast(_,tt){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const rt=_.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(rt).raycast(_,tt)}}update(_){const tt=this.levels;if(tt.length>1){_v1$2.setFromMatrixPosition(_.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const nt=_v1$2.distanceTo(_v2$1)/_.zoom;tt[0].object.visible=!0;let rt,it;for(rt=1,it=tt.length;rt<it;rt++){let at=tt[rt].distance;if(tt[rt].object.visible&&(at-=at*tt[rt].hysteresis),nt>=at)tt[rt-1].object.visible=!1,tt[rt].object.visible=!0;else break}for(this._currentLevel=rt-1;rt<it;rt++)tt[rt].object.visible=!1}}toJSON(_){const tt=super.toJSON(_);this.autoUpdate===!1&&(tt.object.autoUpdate=!1),tt.object.levels=[];const nt=this.levels;for(let rt=0,it=nt.length;rt<it;rt++){const at=nt[rt];tt.object.levels.push({object:at.object.uuid,distance:at.distance,hysteresis:at.hysteresis})}return tt}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$3=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(_,tt){super(_,tt),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const _=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const tt=_.getAttribute("position");for(let nt=0;nt<tt.count;nt++)_vertex.fromBufferAttribute(tt,nt),this.applyBoneTransform(nt,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const _=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const tt=_.getAttribute("position");for(let nt=0;nt<tt.count;nt++)_vertex.fromBufferAttribute(tt,nt),this.applyBoneTransform(nt,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(_,tt){return super.copy(_,tt),this.bindMode=_.bindMode,this.bindMatrix.copy(_.bindMatrix),this.bindMatrixInverse.copy(_.bindMatrixInverse),this.skeleton=_.skeleton,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}raycast(_,tt){const nt=this.material,rt=this.matrixWorld;nt!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$3.copy(this.boundingSphere),_sphere$3.applyMatrix4(rt),_.ray.intersectsSphere(_sphere$3)!==!1&&(_inverseMatrix$2.copy(rt).invert(),_ray$2.copy(_.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(_,tt,_ray$2)))}getVertexPosition(_,tt){return super.getVertexPosition(_,tt),this.applyBoneTransform(_,tt),tt}bind(_,tt){this.skeleton=_,tt===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),tt=this.matrixWorld),this.bindMatrix.copy(tt),this.bindMatrixInverse.copy(tt).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const _=new Vector4,tt=this.geometry.attributes.skinWeight;for(let nt=0,rt=tt.count;nt<rt;nt++){_.fromBufferAttribute(tt,nt);const it=1/_.manhattanLength();it!==1/0?_.multiplyScalar(it):_.set(1,0,0,0),tt.setXYZW(nt,_.x,_.y,_.z,_.w)}}updateMatrixWorld(_){super.updateMatrixWorld(_),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(_,tt){const nt=this.skeleton,rt=this.geometry;_skinIndex.fromBufferAttribute(rt.attributes.skinIndex,_),_skinWeight.fromBufferAttribute(rt.attributes.skinWeight,_),_basePosition.copy(tt).applyMatrix4(this.bindMatrix),tt.set(0,0,0);for(let it=0;it<4;it++){const at=_skinWeight.getComponent(it);if(at!==0){const ot=_skinIndex.getComponent(it);_matrix4.multiplyMatrices(nt.bones[ot].matrixWorld,nt.boneInverses[ot]),tt.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),at)}}return tt.applyMatrix4(this.bindMatrixInverse)}boneTransform(_,tt){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(_,tt)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(_=null,tt=1,nt=1,rt,it,at,ot,st,lt=NearestFilter,ct=NearestFilter,ut,ft){super(null,at,ot,st,lt,ct,rt,it,ut,ft),this.isDataTexture=!0,this.image={data:_,width:tt,height:nt},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix=new Matrix4;class Skeleton{constructor(_=[],tt=[]){this.uuid=generateUUID$1(),this.bones=_.slice(0),this.boneInverses=tt,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const _=this.bones,tt=this.boneInverses;if(this.boneMatrices=new Float32Array(_.length*16),tt.length===0)this.calculateInverses();else if(_.length!==tt.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let nt=0,rt=this.bones.length;nt<rt;nt++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let _=0,tt=this.bones.length;_<tt;_++){const nt=new Matrix4;this.bones[_]&&nt.copy(this.bones[_].matrixWorld).invert(),this.boneInverses.push(nt)}}pose(){for(let _=0,tt=this.bones.length;_<tt;_++){const nt=this.bones[_];nt&&nt.matrixWorld.copy(this.boneInverses[_]).invert()}for(let _=0,tt=this.bones.length;_<tt;_++){const nt=this.bones[_];nt&&(nt.parent&&nt.parent.isBone?(nt.matrix.copy(nt.parent.matrixWorld).invert(),nt.matrix.multiply(nt.matrixWorld)):nt.matrix.copy(nt.matrixWorld),nt.matrix.decompose(nt.position,nt.quaternion,nt.scale))}}update(){const _=this.bones,tt=this.boneInverses,nt=this.boneMatrices,rt=this.boneTexture;for(let it=0,at=_.length;it<at;it++){const ot=_[it]?_[it].matrixWorld:_identityMatrix;_offsetMatrix.multiplyMatrices(ot,tt[it]),_offsetMatrix.toArray(nt,it*16)}rt!==null&&(rt.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let _=Math.sqrt(this.bones.length*4);_=ceilPowerOfTwo(_),_=Math.max(_,4);const tt=new Float32Array(_*_*4);tt.set(this.boneMatrices);const nt=new DataTexture(tt,_,_,RGBAFormat,FloatType);return nt.needsUpdate=!0,this.boneMatrices=tt,this.boneTexture=nt,this.boneTextureSize=_,this}getBoneByName(_){for(let tt=0,nt=this.bones.length;tt<nt;tt++){const rt=this.bones[tt];if(rt.name===_)return rt}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(_,tt){this.uuid=_.uuid;for(let nt=0,rt=_.bones.length;nt<rt;nt++){const it=_.bones[nt];let at=tt[it];at===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",it),at=new Bone),this.bones.push(at),this.boneInverses.push(new Matrix4().fromArray(_.boneInverses[nt]))}return this.init(),this}toJSON(){const _={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};_.uuid=this.uuid;const tt=this.bones,nt=this.boneInverses;for(let rt=0,it=tt.length;rt<it;rt++){const at=tt[rt];_.bones.push(at.uuid);const ot=nt[rt];_.boneInverses.push(ot.toArray())}return _}}class InstancedBufferAttribute extends BufferAttribute{constructor(_,tt,nt,rt=1){super(_,tt,nt),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=rt}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}toJSON(){const _=super.toJSON();return _.meshPerAttribute=this.meshPerAttribute,_.isInstancedBufferAttribute=!0,_}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh=new Mesh,_sphere$2=new Sphere;class InstancedMesh extends Mesh{constructor(_,tt,nt){super(_,tt),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(nt*16),16),this.instanceColor=null,this.count=nt,this.boundingBox=null,this.boundingSphere=null;for(let rt=0;rt<nt;rt++)this.setMatrixAt(rt,_identity)}computeBoundingBox(){const _=this.geometry,tt=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),_.boundingBox===null&&_.computeBoundingBox(),this.boundingBox.makeEmpty();for(let nt=0;nt<tt;nt++)this.getMatrixAt(nt,_instanceLocalMatrix),_box3.copy(_.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const _=this.geometry,tt=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),_.boundingSphere===null&&_.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let nt=0;nt<tt;nt++)this.getMatrixAt(nt,_instanceLocalMatrix),_sphere$2.copy(_.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$2)}copy(_,tt){return super.copy(_,tt),this.instanceMatrix.copy(_.instanceMatrix),_.instanceColor!==null&&(this.instanceColor=_.instanceColor.clone()),this.count=_.count,_.boundingBox!==null&&(this.boundingBox=_.boundingBox.clone()),_.boundingSphere!==null&&(this.boundingSphere=_.boundingSphere.clone()),this}getColorAt(_,tt){tt.fromArray(this.instanceColor.array,_*3)}getMatrixAt(_,tt){tt.fromArray(this.instanceMatrix.array,_*16)}raycast(_,tt){const nt=this.matrixWorld,rt=this.count;if(_mesh.geometry=this.geometry,_mesh.material=this.material,_mesh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$2.copy(this.boundingSphere),_sphere$2.applyMatrix4(nt),_.ray.intersectsSphere(_sphere$2)!==!1))for(let it=0;it<rt;it++){this.getMatrixAt(it,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(nt,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,_mesh.raycast(_,_instanceIntersects);for(let at=0,ot=_instanceIntersects.length;at<ot;at++){const st=_instanceIntersects[at];st.instanceId=it,st.object=this,tt.push(st)}_instanceIntersects.length=0}}setColorAt(_,tt){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3),3)),tt.toArray(this.instanceColor.array,_*3)}setMatrixAt(_,tt){tt.toArray(this.instanceMatrix.array,_*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class LineBasicMaterial extends Material{constructor(_){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.linewidth=_.linewidth,this.linecap=_.linecap,this.linejoin=_.linejoin,this.fog=_.fog,this}}const _start$1=new Vector3,_end$1=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere;class Line extends Object3D{constructor(_=new BufferGeometry,tt=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=_,this.material=tt,this.updateMorphTargets()}copy(_,tt){return super.copy(_,tt),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}computeLineDistances(){const _=this.geometry;if(_.index===null){const tt=_.attributes.position,nt=[0];for(let rt=1,it=tt.count;rt<it;rt++)_start$1.fromBufferAttribute(tt,rt-1),_end$1.fromBufferAttribute(tt,rt),nt[rt]=nt[rt-1],nt[rt]+=_start$1.distanceTo(_end$1);_.setAttribute("lineDistance",new Float32BufferAttribute(nt,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(_,tt){const nt=this.geometry,rt=this.matrixWorld,it=_.params.Line.threshold,at=nt.drawRange;if(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere$1.copy(nt.boundingSphere),_sphere$1.applyMatrix4(rt),_sphere$1.radius+=it,_.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(rt).invert(),_ray$1.copy(_.ray).applyMatrix4(_inverseMatrix$1);const ot=it/((this.scale.x+this.scale.y+this.scale.z)/3),st=ot*ot,lt=new Vector3,ct=new Vector3,ut=new Vector3,ft=new Vector3,pt=this.isLineSegments?2:1,gt=nt.index,yt=nt.attributes.position;if(gt!==null){const mt=Math.max(0,at.start),At=Math.min(gt.count,at.start+at.count);for(let vt=mt,Et=At-1;vt<Et;vt+=pt){const Ct=gt.getX(vt),Tt=gt.getX(vt+1);if(lt.fromBufferAttribute(yt,Ct),ct.fromBufferAttribute(yt,Tt),_ray$1.distanceSqToSegment(lt,ct,ft,ut)>st)continue;ft.applyMatrix4(this.matrixWorld);const It=_.ray.origin.distanceTo(ft);It<_.near||It>_.far||tt.push({distance:It,point:ut.clone().applyMatrix4(this.matrixWorld),index:vt,face:null,faceIndex:null,object:this})}}else{const mt=Math.max(0,at.start),At=Math.min(yt.count,at.start+at.count);for(let vt=mt,Et=At-1;vt<Et;vt+=pt){if(lt.fromBufferAttribute(yt,vt),ct.fromBufferAttribute(yt,vt+1),_ray$1.distanceSqToSegment(lt,ct,ft,ut)>st)continue;ft.applyMatrix4(this.matrixWorld);const Tt=_.ray.origin.distanceTo(ft);Tt<_.near||Tt>_.far||tt.push({distance:Tt,point:ut.clone().applyMatrix4(this.matrixWorld),index:vt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const tt=this.geometry.morphAttributes,nt=Object.keys(tt);if(nt.length>0){const rt=tt[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,at=rt.length;it<at;it++){const ot=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ot]=it}}}}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(_,tt){super(_,tt),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const _=this.geometry;if(_.index===null){const tt=_.attributes.position,nt=[];for(let rt=0,it=tt.count;rt<it;rt+=2)_start.fromBufferAttribute(tt,rt),_end.fromBufferAttribute(tt,rt+1),nt[rt]=rt===0?0:nt[rt-1],nt[rt+1]=nt[rt]+_start.distanceTo(_end);_.setAttribute("lineDistance",new Float32BufferAttribute(nt,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(_,tt){super(_,tt),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(_){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.alphaMap=_.alphaMap,this.size=_.size,this.sizeAttenuation=_.sizeAttenuation,this.fog=_.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(_=new BufferGeometry,tt=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=_,this.material=tt,this.updateMorphTargets()}copy(_,tt){return super.copy(_,tt),this.material=Array.isArray(_.material)?_.material.slice():_.material,this.geometry=_.geometry,this}raycast(_,tt){const nt=this.geometry,rt=this.matrixWorld,it=_.params.Points.threshold,at=nt.drawRange;if(nt.boundingSphere===null&&nt.computeBoundingSphere(),_sphere.copy(nt.boundingSphere),_sphere.applyMatrix4(rt),_sphere.radius+=it,_.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(rt).invert(),_ray.copy(_.ray).applyMatrix4(_inverseMatrix);const ot=it/((this.scale.x+this.scale.y+this.scale.z)/3),st=ot*ot,lt=nt.index,ut=nt.attributes.position;if(lt!==null){const ft=Math.max(0,at.start),pt=Math.min(lt.count,at.start+at.count);for(let gt=ft,xt=pt;gt<xt;gt++){const yt=lt.getX(gt);_position$2.fromBufferAttribute(ut,yt),testPoint(_position$2,yt,st,rt,_,tt,this)}}else{const ft=Math.max(0,at.start),pt=Math.min(ut.count,at.start+at.count);for(let gt=ft,xt=pt;gt<xt;gt++)_position$2.fromBufferAttribute(ut,gt),testPoint(_position$2,gt,st,rt,_,tt,this)}}updateMorphTargets(){const tt=this.geometry.morphAttributes,nt=Object.keys(tt);if(nt.length>0){const rt=tt[nt[0]];if(rt!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let it=0,at=rt.length;it<at;it++){const ot=rt[it].name||String(it);this.morphTargetInfluences.push(0),this.morphTargetDictionary[ot]=it}}}}}function testPoint(_e,_,tt,nt,rt,it,at){const ot=_ray.distanceSqToPoint(_e);if(ot<tt){const st=new Vector3;_ray.closestPointToPoint(_e,st),st.applyMatrix4(nt);const lt=rt.ray.origin.distanceTo(st);if(lt<rt.near||lt>rt.far)return;it.push({distance:lt,distanceToRay:Math.sqrt(ot),point:st,index:_,face:null,object:at})}}class VideoTexture extends Texture{constructor(_,tt,nt,rt,it,at,ot,st,lt){super(_,tt,nt,rt,it,at,ot,st,lt),this.isVideoTexture=!0,this.minFilter=at!==void 0?at:LinearFilter,this.magFilter=it!==void 0?it:LinearFilter,this.generateMipmaps=!1;const ct=this;function ut(){ct.needsUpdate=!0,_.requestVideoFrameCallback(ut)}"requestVideoFrameCallback"in _&&_.requestVideoFrameCallback(ut)}clone(){return new this.constructor(this.image).copy(this)}update(){const _=this.image;"requestVideoFrameCallback"in _===!1&&_.readyState>=_.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FramebufferTexture extends Texture{constructor(_,tt){super({width:_,height:tt}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(_,tt,nt,rt,it,at,ot,st,lt,ct,ut,ft){super(null,at,ot,st,lt,ct,rt,it,ut,ft),this.isCompressedTexture=!0,this.image={width:tt,height:nt},this.mipmaps=_,this.flipY=!1,this.generateMipmaps=!1}}let CompressedArrayTexture$1=class extends CompressedTexture{constructor(_,tt,nt,rt,it,at){super(_,tt,nt,it,at),this.isCompressedArrayTexture=!0,this.image.depth=rt,this.wrapR=ClampToEdgeWrapping}};class CompressedCubeTexture extends CompressedTexture{constructor(_,tt,nt){super(void 0,_[0].width,_[0].height,tt,nt,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=_}}class CanvasTexture extends Texture{constructor(_,tt,nt,rt,it,at,ot,st,lt){super(_,tt,nt,rt,it,at,ot,st,lt),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(_,tt){const nt=this.getUtoTmapping(_);return this.getPoint(nt,tt)}getPoints(_=5){const tt=[];for(let nt=0;nt<=_;nt++)tt.push(this.getPoint(nt/_));return tt}getSpacedPoints(_=5){const tt=[];for(let nt=0;nt<=_;nt++)tt.push(this.getPointAt(nt/_));return tt}getLength(){const _=this.getLengths();return _[_.length-1]}getLengths(_=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===_+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const tt=[];let nt,rt=this.getPoint(0),it=0;tt.push(0);for(let at=1;at<=_;at++)nt=this.getPoint(at/_),it+=nt.distanceTo(rt),tt.push(it),rt=nt;return this.cacheArcLengths=tt,tt}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(_,tt){const nt=this.getLengths();let rt=0;const it=nt.length;let at;tt?at=tt:at=_*nt[it-1];let ot=0,st=it-1,lt;for(;ot<=st;)if(rt=Math.floor(ot+(st-ot)/2),lt=nt[rt]-at,lt<0)ot=rt+1;else if(lt>0)st=rt-1;else{st=rt;break}if(rt=st,nt[rt]===at)return rt/(it-1);const ct=nt[rt],ft=nt[rt+1]-ct,pt=(at-ct)/ft;return(rt+pt)/(it-1)}getTangent(_,tt){let rt=_-1e-4,it=_+1e-4;rt<0&&(rt=0),it>1&&(it=1);const at=this.getPoint(rt),ot=this.getPoint(it),st=tt||(at.isVector2?new Vector2:new Vector3);return st.copy(ot).sub(at).normalize(),st}getTangentAt(_,tt){const nt=this.getUtoTmapping(_);return this.getTangent(nt,tt)}computeFrenetFrames(_,tt){const nt=new Vector3,rt=[],it=[],at=[],ot=new Vector3,st=new Matrix4;for(let pt=0;pt<=_;pt++){const gt=pt/_;rt[pt]=this.getTangentAt(gt,new Vector3)}it[0]=new Vector3,at[0]=new Vector3;let lt=Number.MAX_VALUE;const ct=Math.abs(rt[0].x),ut=Math.abs(rt[0].y),ft=Math.abs(rt[0].z);ct<=lt&&(lt=ct,nt.set(1,0,0)),ut<=lt&&(lt=ut,nt.set(0,1,0)),ft<=lt&&nt.set(0,0,1),ot.crossVectors(rt[0],nt).normalize(),it[0].crossVectors(rt[0],ot),at[0].crossVectors(rt[0],it[0]);for(let pt=1;pt<=_;pt++){if(it[pt]=it[pt-1].clone(),at[pt]=at[pt-1].clone(),ot.crossVectors(rt[pt-1],rt[pt]),ot.length()>Number.EPSILON){ot.normalize();const gt=Math.acos(clamp$4(rt[pt-1].dot(rt[pt]),-1,1));it[pt].applyMatrix4(st.makeRotationAxis(ot,gt))}at[pt].crossVectors(rt[pt],it[pt])}if(tt===!0){let pt=Math.acos(clamp$4(it[0].dot(it[_]),-1,1));pt/=_,rt[0].dot(ot.crossVectors(it[0],it[_]))>0&&(pt=-pt);for(let gt=1;gt<=_;gt++)it[gt].applyMatrix4(st.makeRotationAxis(rt[gt],pt*gt)),at[gt].crossVectors(rt[gt],it[gt])}return{tangents:rt,normals:it,binormals:at}}clone(){return new this.constructor().copy(this)}copy(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}toJSON(){const _={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return _.arcLengthDivisions=this.arcLengthDivisions,_.type=this.type,_}fromJSON(_){return this.arcLengthDivisions=_.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(_=0,tt=0,nt=1,rt=1,it=0,at=Math.PI*2,ot=!1,st=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=_,this.aY=tt,this.xRadius=nt,this.yRadius=rt,this.aStartAngle=it,this.aEndAngle=at,this.aClockwise=ot,this.aRotation=st}getPoint(_,tt){const nt=tt||new Vector2,rt=Math.PI*2;let it=this.aEndAngle-this.aStartAngle;const at=Math.abs(it)<Number.EPSILON;for(;it<0;)it+=rt;for(;it>rt;)it-=rt;it<Number.EPSILON&&(at?it=0:it=rt),this.aClockwise===!0&&!at&&(it===rt?it=-rt:it=it-rt);const ot=this.aStartAngle+_*it;let st=this.aX+this.xRadius*Math.cos(ot),lt=this.aY+this.yRadius*Math.sin(ot);if(this.aRotation!==0){const ct=Math.cos(this.aRotation),ut=Math.sin(this.aRotation),ft=st-this.aX,pt=lt-this.aY;st=ft*ct-pt*ut+this.aX,lt=ft*ut+pt*ct+this.aY}return nt.set(st,lt)}copy(_){return super.copy(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}toJSON(){const _=super.toJSON();return _.aX=this.aX,_.aY=this.aY,_.xRadius=this.xRadius,_.yRadius=this.yRadius,_.aStartAngle=this.aStartAngle,_.aEndAngle=this.aEndAngle,_.aClockwise=this.aClockwise,_.aRotation=this.aRotation,_}fromJSON(_){return super.fromJSON(_),this.aX=_.aX,this.aY=_.aY,this.xRadius=_.xRadius,this.yRadius=_.yRadius,this.aStartAngle=_.aStartAngle,this.aEndAngle=_.aEndAngle,this.aClockwise=_.aClockwise,this.aRotation=_.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(_,tt,nt,rt,it,at){super(_,tt,nt,nt,rt,it,at),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let _e=0,_=0,tt=0,nt=0;function rt(it,at,ot,st){_e=it,_=ot,tt=-3*it+3*at-2*ot-st,nt=2*it-2*at+ot+st}return{initCatmullRom:function(it,at,ot,st,lt){rt(at,ot,lt*(ot-it),lt*(st-at))},initNonuniformCatmullRom:function(it,at,ot,st,lt,ct,ut){let ft=(at-it)/lt-(ot-it)/(lt+ct)+(ot-at)/ct,pt=(ot-at)/ct-(st-at)/(ct+ut)+(st-ot)/ut;ft*=ct,pt*=ct,rt(at,ot,ft,pt)},calc:function(it){const at=it*it,ot=at*it;return _e+_*it+tt*at+nt*ot}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(_=[],tt=!1,nt="centripetal",rt=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=_,this.closed=tt,this.curveType=nt,this.tension=rt}getPoint(_,tt=new Vector3){const nt=tt,rt=this.points,it=rt.length,at=(it-(this.closed?0:1))*_;let ot=Math.floor(at),st=at-ot;this.closed?ot+=ot>0?0:(Math.floor(Math.abs(ot)/it)+1)*it:st===0&&ot===it-1&&(ot=it-2,st=1);let lt,ct;this.closed||ot>0?lt=rt[(ot-1)%it]:(tmp.subVectors(rt[0],rt[1]).add(rt[0]),lt=tmp);const ut=rt[ot%it],ft=rt[(ot+1)%it];if(this.closed||ot+2<it?ct=rt[(ot+2)%it]:(tmp.subVectors(rt[it-1],rt[it-2]).add(rt[it-1]),ct=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const pt=this.curveType==="chordal"?.5:.25;let gt=Math.pow(lt.distanceToSquared(ut),pt),xt=Math.pow(ut.distanceToSquared(ft),pt),yt=Math.pow(ft.distanceToSquared(ct),pt);xt<1e-4&&(xt=1),gt<1e-4&&(gt=xt),yt<1e-4&&(yt=xt),px.initNonuniformCatmullRom(lt.x,ut.x,ft.x,ct.x,gt,xt,yt),py.initNonuniformCatmullRom(lt.y,ut.y,ft.y,ct.y,gt,xt,yt),pz.initNonuniformCatmullRom(lt.z,ut.z,ft.z,ct.z,gt,xt,yt)}else this.curveType==="catmullrom"&&(px.initCatmullRom(lt.x,ut.x,ft.x,ct.x,this.tension),py.initCatmullRom(lt.y,ut.y,ft.y,ct.y,this.tension),pz.initCatmullRom(lt.z,ut.z,ft.z,ct.z,this.tension));return nt.set(px.calc(st),py.calc(st),pz.calc(st)),nt}copy(_){super.copy(_),this.points=[];for(let tt=0,nt=_.points.length;tt<nt;tt++){const rt=_.points[tt];this.points.push(rt.clone())}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}toJSON(){const _=super.toJSON();_.points=[];for(let tt=0,nt=this.points.length;tt<nt;tt++){const rt=this.points[tt];_.points.push(rt.toArray())}return _.closed=this.closed,_.curveType=this.curveType,_.tension=this.tension,_}fromJSON(_){super.fromJSON(_),this.points=[];for(let tt=0,nt=_.points.length;tt<nt;tt++){const rt=_.points[tt];this.points.push(new Vector3().fromArray(rt))}return this.closed=_.closed,this.curveType=_.curveType,this.tension=_.tension,this}}function CatmullRom(_e,_,tt,nt,rt){const it=(nt-_)*.5,at=(rt-tt)*.5,ot=_e*_e,st=_e*ot;return(2*tt-2*nt+it+at)*st+(-3*tt+3*nt-2*it-at)*ot+it*_e+tt}function QuadraticBezierP0(_e,_){const tt=1-_e;return tt*tt*_}function QuadraticBezierP1(_e,_){return 2*(1-_e)*_e*_}function QuadraticBezierP2(_e,_){return _e*_e*_}function QuadraticBezier(_e,_,tt,nt){return QuadraticBezierP0(_e,_)+QuadraticBezierP1(_e,tt)+QuadraticBezierP2(_e,nt)}function CubicBezierP0(_e,_){const tt=1-_e;return tt*tt*tt*_}function CubicBezierP1(_e,_){const tt=1-_e;return 3*tt*tt*_e*_}function CubicBezierP2(_e,_){return 3*(1-_e)*_e*_e*_}function CubicBezierP3(_e,_){return _e*_e*_e*_}function CubicBezier(_e,_,tt,nt,rt){return CubicBezierP0(_e,_)+CubicBezierP1(_e,tt)+CubicBezierP2(_e,nt)+CubicBezierP3(_e,rt)}class CubicBezierCurve extends Curve{constructor(_=new Vector2,tt=new Vector2,nt=new Vector2,rt=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=_,this.v1=tt,this.v2=nt,this.v3=rt}getPoint(_,tt=new Vector2){const nt=tt,rt=this.v0,it=this.v1,at=this.v2,ot=this.v3;return nt.set(CubicBezier(_,rt.x,it.x,at.x,ot.x),CubicBezier(_,rt.y,it.y,at.y,ot.y)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class CubicBezierCurve3 extends Curve{constructor(_=new Vector3,tt=new Vector3,nt=new Vector3,rt=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=_,this.v1=tt,this.v2=nt,this.v3=rt}getPoint(_,tt=new Vector3){const nt=tt,rt=this.v0,it=this.v1,at=this.v2,ot=this.v3;return nt.set(CubicBezier(_,rt.x,it.x,at.x,ot.x),CubicBezier(_,rt.y,it.y,at.y,ot.y),CubicBezier(_,rt.z,it.z,at.z,ot.z)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this.v3.copy(_.v3),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_.v3=this.v3.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this.v3.fromArray(_.v3),this}}class LineCurve extends Curve{constructor(_=new Vector2,tt=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=_,this.v2=tt}getPoint(_,tt=new Vector2){const nt=tt;return _===1?nt.copy(this.v2):(nt.copy(this.v2).sub(this.v1),nt.multiplyScalar(_).add(this.v1)),nt}getPointAt(_,tt){return this.getPoint(_,tt)}getTangent(_,tt=new Vector2){return tt.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,tt){return this.getTangent(_,tt)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class LineCurve3 extends Curve{constructor(_=new Vector3,tt=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=_,this.v2=tt}getPoint(_,tt=new Vector3){const nt=tt;return _===1?nt.copy(this.v2):(nt.copy(this.v2).sub(this.v1),nt.multiplyScalar(_).add(this.v1)),nt}getPointAt(_,tt){return this.getPoint(_,tt)}getTangent(_,tt=new Vector3){return tt.subVectors(this.v2,this.v1).normalize()}getTangentAt(_,tt){return this.getTangent(_,tt)}copy(_){return super.copy(_),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve extends Curve{constructor(_=new Vector2,tt=new Vector2,nt=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=_,this.v1=tt,this.v2=nt}getPoint(_,tt=new Vector2){const nt=tt,rt=this.v0,it=this.v1,at=this.v2;return nt.set(QuadraticBezier(_,rt.x,it.x,at.x),QuadraticBezier(_,rt.y,it.y,at.y)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(_=new Vector3,tt=new Vector3,nt=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=_,this.v1=tt,this.v2=nt}getPoint(_,tt=new Vector3){const nt=tt,rt=this.v0,it=this.v1,at=this.v2;return nt.set(QuadraticBezier(_,rt.x,it.x,at.x),QuadraticBezier(_,rt.y,it.y,at.y),QuadraticBezier(_,rt.z,it.z,at.z)),nt}copy(_){return super.copy(_),this.v0.copy(_.v0),this.v1.copy(_.v1),this.v2.copy(_.v2),this}toJSON(){const _=super.toJSON();return _.v0=this.v0.toArray(),_.v1=this.v1.toArray(),_.v2=this.v2.toArray(),_}fromJSON(_){return super.fromJSON(_),this.v0.fromArray(_.v0),this.v1.fromArray(_.v1),this.v2.fromArray(_.v2),this}}class SplineCurve extends Curve{constructor(_=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=_}getPoint(_,tt=new Vector2){const nt=tt,rt=this.points,it=(rt.length-1)*_,at=Math.floor(it),ot=it-at,st=rt[at===0?at:at-1],lt=rt[at],ct=rt[at>rt.length-2?rt.length-1:at+1],ut=rt[at>rt.length-3?rt.length-1:at+2];return nt.set(CatmullRom(ot,st.x,lt.x,ct.x,ut.x),CatmullRom(ot,st.y,lt.y,ct.y,ut.y)),nt}copy(_){super.copy(_),this.points=[];for(let tt=0,nt=_.points.length;tt<nt;tt++){const rt=_.points[tt];this.points.push(rt.clone())}return this}toJSON(){const _=super.toJSON();_.points=[];for(let tt=0,nt=this.points.length;tt<nt;tt++){const rt=this.points[tt];_.points.push(rt.toArray())}return _}fromJSON(_){super.fromJSON(_),this.points=[];for(let tt=0,nt=_.points.length;tt<nt;tt++){const rt=_.points[tt];this.points.push(new Vector2().fromArray(rt))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(_){this.curves.push(_)}closePath(){const _=this.curves[0].getPoint(0),tt=this.curves[this.curves.length-1].getPoint(1);_.equals(tt)||this.curves.push(new LineCurve(tt,_))}getPoint(_,tt){const nt=_*this.getLength(),rt=this.getCurveLengths();let it=0;for(;it<rt.length;){if(rt[it]>=nt){const at=rt[it]-nt,ot=this.curves[it],st=ot.getLength(),lt=st===0?0:1-at/st;return ot.getPointAt(lt,tt)}it++}return null}getLength(){const _=this.getCurveLengths();return _[_.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const _=[];let tt=0;for(let nt=0,rt=this.curves.length;nt<rt;nt++)tt+=this.curves[nt].getLength(),_.push(tt);return this.cacheLengths=_,_}getSpacedPoints(_=40){const tt=[];for(let nt=0;nt<=_;nt++)tt.push(this.getPoint(nt/_));return this.autoClose&&tt.push(tt[0]),tt}getPoints(_=12){const tt=[];let nt;for(let rt=0,it=this.curves;rt<it.length;rt++){const at=it[rt],ot=at.isEllipseCurve?_*2:at.isLineCurve||at.isLineCurve3?1:at.isSplineCurve?_*at.points.length:_,st=at.getPoints(ot);for(let lt=0;lt<st.length;lt++){const ct=st[lt];nt&&nt.equals(ct)||(tt.push(ct),nt=ct)}}return this.autoClose&&tt.length>1&&!tt[tt.length-1].equals(tt[0])&&tt.push(tt[0]),tt}copy(_){super.copy(_),this.curves=[];for(let tt=0,nt=_.curves.length;tt<nt;tt++){const rt=_.curves[tt];this.curves.push(rt.clone())}return this.autoClose=_.autoClose,this}toJSON(){const _=super.toJSON();_.autoClose=this.autoClose,_.curves=[];for(let tt=0,nt=this.curves.length;tt<nt;tt++){const rt=this.curves[tt];_.curves.push(rt.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.autoClose=_.autoClose,this.curves=[];for(let tt=0,nt=_.curves.length;tt<nt;tt++){const rt=_.curves[tt];this.curves.push(new Curves[rt.type]().fromJSON(rt))}return this}}let Path$1=class extends CurvePath{constructor(_){super(),this.type="Path",this.currentPoint=new Vector2,_&&this.setFromPoints(_)}setFromPoints(_){this.moveTo(_[0].x,_[0].y);for(let tt=1,nt=_.length;tt<nt;tt++)this.lineTo(_[tt].x,_[tt].y);return this}moveTo(_,tt){return this.currentPoint.set(_,tt),this}lineTo(_,tt){const nt=new LineCurve(this.currentPoint.clone(),new Vector2(_,tt));return this.curves.push(nt),this.currentPoint.set(_,tt),this}quadraticCurveTo(_,tt,nt,rt){const it=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(_,tt),new Vector2(nt,rt));return this.curves.push(it),this.currentPoint.set(nt,rt),this}bezierCurveTo(_,tt,nt,rt,it,at){const ot=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(_,tt),new Vector2(nt,rt),new Vector2(it,at));return this.curves.push(ot),this.currentPoint.set(it,at),this}splineThru(_){const tt=[this.currentPoint.clone()].concat(_),nt=new SplineCurve(tt);return this.curves.push(nt),this.currentPoint.copy(_[_.length-1]),this}arc(_,tt,nt,rt,it,at){const ot=this.currentPoint.x,st=this.currentPoint.y;return this.absarc(_+ot,tt+st,nt,rt,it,at),this}absarc(_,tt,nt,rt,it,at){return this.absellipse(_,tt,nt,nt,rt,it,at),this}ellipse(_,tt,nt,rt,it,at,ot,st){const lt=this.currentPoint.x,ct=this.currentPoint.y;return this.absellipse(_+lt,tt+ct,nt,rt,it,at,ot,st),this}absellipse(_,tt,nt,rt,it,at,ot,st){const lt=new EllipseCurve(_,tt,nt,rt,it,at,ot,st);if(this.curves.length>0){const ut=lt.getPoint(0);ut.equals(this.currentPoint)||this.lineTo(ut.x,ut.y)}this.curves.push(lt);const ct=lt.getPoint(1);return this.currentPoint.copy(ct),this}copy(_){return super.copy(_),this.currentPoint.copy(_.currentPoint),this}toJSON(){const _=super.toJSON();return _.currentPoint=this.currentPoint.toArray(),_}fromJSON(_){return super.fromJSON(_),this.currentPoint.fromArray(_.currentPoint),this}};class LatheGeometry extends BufferGeometry{constructor(_=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],tt=12,nt=0,rt=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:_,segments:tt,phiStart:nt,phiLength:rt},tt=Math.floor(tt),rt=clamp$4(rt,0,Math.PI*2);const it=[],at=[],ot=[],st=[],lt=[],ct=1/tt,ut=new Vector3,ft=new Vector2,pt=new Vector3,gt=new Vector3,xt=new Vector3;let yt=0,mt=0;for(let At=0;At<=_.length-1;At++)switch(At){case 0:yt=_[At+1].x-_[At].x,mt=_[At+1].y-_[At].y,pt.x=mt*1,pt.y=-yt,pt.z=mt*0,xt.copy(pt),pt.normalize(),st.push(pt.x,pt.y,pt.z);break;case _.length-1:st.push(xt.x,xt.y,xt.z);break;default:yt=_[At+1].x-_[At].x,mt=_[At+1].y-_[At].y,pt.x=mt*1,pt.y=-yt,pt.z=mt*0,gt.copy(pt),pt.x+=xt.x,pt.y+=xt.y,pt.z+=xt.z,pt.normalize(),st.push(pt.x,pt.y,pt.z),xt.copy(gt)}for(let At=0;At<=tt;At++){const vt=nt+At*ct*rt,Et=Math.sin(vt),Ct=Math.cos(vt);for(let Tt=0;Tt<=_.length-1;Tt++){ut.x=_[Tt].x*Et,ut.y=_[Tt].y,ut.z=_[Tt].x*Ct,at.push(ut.x,ut.y,ut.z),ft.x=At/tt,ft.y=Tt/(_.length-1),ot.push(ft.x,ft.y);const bt=st[3*Tt+0]*Et,It=st[3*Tt+1],wt=st[3*Tt+0]*Ct;lt.push(bt,It,wt)}}for(let At=0;At<tt;At++)for(let vt=0;vt<_.length-1;vt++){const Et=vt+At*_.length,Ct=Et,Tt=Et+_.length,bt=Et+_.length+1,It=Et+1;it.push(Ct,Tt,It),it.push(bt,It,Tt)}this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("uv",new Float32BufferAttribute(ot,2)),this.setAttribute("normal",new Float32BufferAttribute(lt,3))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new LatheGeometry(_.points,_.segments,_.phiStart,_.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(_=1,tt=1,nt=4,rt=8){const it=new Path$1;it.absarc(0,-tt/2,_,Math.PI*1.5,0),it.absarc(0,tt/2,_,0,Math.PI*.5),super(it.getPoints(nt),rt),this.type="CapsuleGeometry",this.parameters={radius:_,length:tt,capSegments:nt,radialSegments:rt}}static fromJSON(_){return new CapsuleGeometry(_.radius,_.length,_.capSegments,_.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(_=1,tt=32,nt=0,rt=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:_,segments:tt,thetaStart:nt,thetaLength:rt},tt=Math.max(3,tt);const it=[],at=[],ot=[],st=[],lt=new Vector3,ct=new Vector2;at.push(0,0,0),ot.push(0,0,1),st.push(.5,.5);for(let ut=0,ft=3;ut<=tt;ut++,ft+=3){const pt=nt+ut/tt*rt;lt.x=_*Math.cos(pt),lt.y=_*Math.sin(pt),at.push(lt.x,lt.y,lt.z),ot.push(0,0,1),ct.x=(at[ft]/_+1)/2,ct.y=(at[ft+1]/_+1)/2,st.push(ct.x,ct.y)}for(let ut=1;ut<=tt;ut++)it.push(ut,ut+1,0);this.setIndex(it),this.setAttribute("position",new Float32BufferAttribute(at,3)),this.setAttribute("normal",new Float32BufferAttribute(ot,3)),this.setAttribute("uv",new Float32BufferAttribute(st,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CircleGeometry(_.radius,_.segments,_.thetaStart,_.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(_=1,tt=1,nt=1,rt=32,it=1,at=!1,ot=0,st=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:_,radiusBottom:tt,height:nt,radialSegments:rt,heightSegments:it,openEnded:at,thetaStart:ot,thetaLength:st};const lt=this;rt=Math.floor(rt),it=Math.floor(it);const ct=[],ut=[],ft=[],pt=[];let gt=0;const xt=[],yt=nt/2;let mt=0;At(),at===!1&&(_>0&&vt(!0),tt>0&&vt(!1)),this.setIndex(ct),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("normal",new Float32BufferAttribute(ft,3)),this.setAttribute("uv",new Float32BufferAttribute(pt,2));function At(){const Et=new Vector3,Ct=new Vector3;let Tt=0;const bt=(tt-_)/nt;for(let It=0;It<=it;It++){const wt=[],Rt=It/it,Ft=Rt*(tt-_)+_;for(let Ut=0;Ut<=rt;Ut++){const Gt=Ut/rt,Ht=Gt*st+ot,jt=Math.sin(Ht),Xt=Math.cos(Ht);Ct.x=Ft*jt,Ct.y=-Rt*nt+yt,Ct.z=Ft*Xt,ut.push(Ct.x,Ct.y,Ct.z),Et.set(jt,bt,Xt).normalize(),ft.push(Et.x,Et.y,Et.z),pt.push(Gt,1-Rt),wt.push(gt++)}xt.push(wt)}for(let It=0;It<rt;It++)for(let wt=0;wt<it;wt++){const Rt=xt[wt][It],Ft=xt[wt+1][It],Ut=xt[wt+1][It+1],Gt=xt[wt][It+1];ct.push(Rt,Ft,Gt),ct.push(Ft,Ut,Gt),Tt+=6}lt.addGroup(mt,Tt,0),mt+=Tt}function vt(Et){const Ct=gt,Tt=new Vector2,bt=new Vector3;let It=0;const wt=Et===!0?_:tt,Rt=Et===!0?1:-1;for(let Ut=1;Ut<=rt;Ut++)ut.push(0,yt*Rt,0),ft.push(0,Rt,0),pt.push(.5,.5),gt++;const Ft=gt;for(let Ut=0;Ut<=rt;Ut++){const Ht=Ut/rt*st+ot,jt=Math.cos(Ht),Xt=Math.sin(Ht);bt.x=wt*Xt,bt.y=yt*Rt,bt.z=wt*jt,ut.push(bt.x,bt.y,bt.z),ft.push(0,Rt,0),Tt.x=jt*.5+.5,Tt.y=Xt*.5*Rt+.5,pt.push(Tt.x,Tt.y),gt++}for(let Ut=0;Ut<rt;Ut++){const Gt=Ct+Ut,Ht=Ft+Ut;Et===!0?ct.push(Ht,Ht+1,Gt):ct.push(Ht+1,Ht,Gt),It+=3}lt.addGroup(mt,It,Et===!0?1:2),mt+=It}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new CylinderGeometry(_.radiusTop,_.radiusBottom,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(_=1,tt=1,nt=32,rt=1,it=!1,at=0,ot=Math.PI*2){super(0,_,tt,nt,rt,it,at,ot),this.type="ConeGeometry",this.parameters={radius:_,height:tt,radialSegments:nt,heightSegments:rt,openEnded:it,thetaStart:at,thetaLength:ot}}static fromJSON(_){return new ConeGeometry(_.radius,_.height,_.radialSegments,_.heightSegments,_.openEnded,_.thetaStart,_.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(_=[],tt=[],nt=1,rt=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:_,indices:tt,radius:nt,detail:rt};const it=[],at=[];ot(rt),lt(nt),ct(),this.setAttribute("position",new Float32BufferAttribute(it,3)),this.setAttribute("normal",new Float32BufferAttribute(it.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(at,2)),rt===0?this.computeVertexNormals():this.normalizeNormals();function ot(At){const vt=new Vector3,Et=new Vector3,Ct=new Vector3;for(let Tt=0;Tt<tt.length;Tt+=3)pt(tt[Tt+0],vt),pt(tt[Tt+1],Et),pt(tt[Tt+2],Ct),st(vt,Et,Ct,At)}function st(At,vt,Et,Ct){const Tt=Ct+1,bt=[];for(let It=0;It<=Tt;It++){bt[It]=[];const wt=At.clone().lerp(Et,It/Tt),Rt=vt.clone().lerp(Et,It/Tt),Ft=Tt-It;for(let Ut=0;Ut<=Ft;Ut++)Ut===0&&It===Tt?bt[It][Ut]=wt:bt[It][Ut]=wt.clone().lerp(Rt,Ut/Ft)}for(let It=0;It<Tt;It++)for(let wt=0;wt<2*(Tt-It)-1;wt++){const Rt=Math.floor(wt/2);wt%2===0?(ft(bt[It][Rt+1]),ft(bt[It+1][Rt]),ft(bt[It][Rt])):(ft(bt[It][Rt+1]),ft(bt[It+1][Rt+1]),ft(bt[It+1][Rt]))}}function lt(At){const vt=new Vector3;for(let Et=0;Et<it.length;Et+=3)vt.x=it[Et+0],vt.y=it[Et+1],vt.z=it[Et+2],vt.normalize().multiplyScalar(At),it[Et+0]=vt.x,it[Et+1]=vt.y,it[Et+2]=vt.z}function ct(){const At=new Vector3;for(let vt=0;vt<it.length;vt+=3){At.x=it[vt+0],At.y=it[vt+1],At.z=it[vt+2];const Et=yt(At)/2/Math.PI+.5,Ct=mt(At)/Math.PI+.5;at.push(Et,1-Ct)}gt(),ut()}function ut(){for(let At=0;At<at.length;At+=6){const vt=at[At+0],Et=at[At+2],Ct=at[At+4],Tt=Math.max(vt,Et,Ct),bt=Math.min(vt,Et,Ct);Tt>.9&&bt<.1&&(vt<.2&&(at[At+0]+=1),Et<.2&&(at[At+2]+=1),Ct<.2&&(at[At+4]+=1))}}function ft(At){it.push(At.x,At.y,At.z)}function pt(At,vt){const Et=At*3;vt.x=_[Et+0],vt.y=_[Et+1],vt.z=_[Et+2]}function gt(){const At=new Vector3,vt=new Vector3,Et=new Vector3,Ct=new Vector3,Tt=new Vector2,bt=new Vector2,It=new Vector2;for(let wt=0,Rt=0;wt<it.length;wt+=9,Rt+=6){At.set(it[wt+0],it[wt+1],it[wt+2]),vt.set(it[wt+3],it[wt+4],it[wt+5]),Et.set(it[wt+6],it[wt+7],it[wt+8]),Tt.set(at[Rt+0],at[Rt+1]),bt.set(at[Rt+2],at[Rt+3]),It.set(at[Rt+4],at[Rt+5]),Ct.copy(At).add(vt).add(Et).divideScalar(3);const Ft=yt(Ct);xt(Tt,Rt+0,At,Ft),xt(bt,Rt+2,vt,Ft),xt(It,Rt+4,Et,Ft)}}function xt(At,vt,Et,Ct){Ct<0&&At.x===1&&(at[vt]=At.x-1),Et.x===0&&Et.z===0&&(at[vt]=Ct/2/Math.PI+.5)}function yt(At){return Math.atan2(At.z,-At.x)}function mt(At){return Math.atan2(-At.y,Math.sqrt(At.x*At.x+At.z*At.z))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new PolyhedronGeometry(_.vertices,_.indices,_.radius,_.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(_=1,tt=0){const nt=(1+Math.sqrt(5))/2,rt=1/nt,it=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-rt,-nt,0,-rt,nt,0,rt,-nt,0,rt,nt,-rt,-nt,0,-rt,nt,0,rt,-nt,0,rt,nt,0,-nt,0,-rt,nt,0,-rt,-nt,0,rt,nt,0,rt],at=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(it,at,_,tt),this.type="DodecahedronGeometry",this.parameters={radius:_,detail:tt}}static fromJSON(_){return new DodecahedronGeometry(_.radius,_.detail)}}const _v0=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(_=null,tt=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:_,thresholdAngle:tt},_!==null){const rt=Math.pow(10,4),it=Math.cos(DEG2RAD*tt),at=_.getIndex(),ot=_.getAttribute("position"),st=at?at.count:ot.count,lt=[0,0,0],ct=["a","b","c"],ut=new Array(3),ft={},pt=[];for(let gt=0;gt<st;gt+=3){at?(lt[0]=at.getX(gt),lt[1]=at.getX(gt+1),lt[2]=at.getX(gt+2)):(lt[0]=gt,lt[1]=gt+1,lt[2]=gt+2);const{a:xt,b:yt,c:mt}=_triangle;if(xt.fromBufferAttribute(ot,lt[0]),yt.fromBufferAttribute(ot,lt[1]),mt.fromBufferAttribute(ot,lt[2]),_triangle.getNormal(_normal),ut[0]=`${Math.round(xt.x*rt)},${Math.round(xt.y*rt)},${Math.round(xt.z*rt)}`,ut[1]=`${Math.round(yt.x*rt)},${Math.round(yt.y*rt)},${Math.round(yt.z*rt)}`,ut[2]=`${Math.round(mt.x*rt)},${Math.round(mt.y*rt)},${Math.round(mt.z*rt)}`,!(ut[0]===ut[1]||ut[1]===ut[2]||ut[2]===ut[0]))for(let At=0;At<3;At++){const vt=(At+1)%3,Et=ut[At],Ct=ut[vt],Tt=_triangle[ct[At]],bt=_triangle[ct[vt]],It=`${Et}_${Ct}`,wt=`${Ct}_${Et}`;wt in ft&&ft[wt]?(_normal.dot(ft[wt].normal)<=it&&(pt.push(Tt.x,Tt.y,Tt.z),pt.push(bt.x,bt.y,bt.z)),ft[wt]=null):It in ft||(ft[It]={index0:lt[At],index1:lt[vt],normal:_normal.clone()})}}for(const gt in ft)if(ft[gt]){const{index0:xt,index1:yt}=ft[gt];_v0.fromBufferAttribute(ot,xt),_v1$1.fromBufferAttribute(ot,yt),pt.push(_v0.x,_v0.y,_v0.z),pt.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(pt,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}class Shape extends Path$1{constructor(_){super(_),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(_){const tt=[];for(let nt=0,rt=this.holes.length;nt<rt;nt++)tt[nt]=this.holes[nt].getPoints(_);return tt}extractPoints(_){return{shape:this.getPoints(_),holes:this.getPointsHoles(_)}}copy(_){super.copy(_),this.holes=[];for(let tt=0,nt=_.holes.length;tt<nt;tt++){const rt=_.holes[tt];this.holes.push(rt.clone())}return this}toJSON(){const _=super.toJSON();_.uuid=this.uuid,_.holes=[];for(let tt=0,nt=this.holes.length;tt<nt;tt++){const rt=this.holes[tt];_.holes.push(rt.toJSON())}return _}fromJSON(_){super.fromJSON(_),this.uuid=_.uuid,this.holes=[];for(let tt=0,nt=_.holes.length;tt<nt;tt++){const rt=_.holes[tt];this.holes.push(new Path$1().fromJSON(rt))}return this}}const Earcut={triangulate:function(_e,_,tt=2){const nt=_&&_.length,rt=nt?_[0]*tt:_e.length;let it=linkedList(_e,0,rt,tt,!0);const at=[];if(!it||it.next===it.prev)return at;let ot,st,lt,ct,ut,ft,pt;if(nt&&(it=eliminateHoles(_e,_,it,tt)),_e.length>80*tt){ot=lt=_e[0],st=ct=_e[1];for(let gt=tt;gt<rt;gt+=tt)ut=_e[gt],ft=_e[gt+1],ut<ot&&(ot=ut),ft<st&&(st=ft),ut>lt&&(lt=ut),ft>ct&&(ct=ft);pt=Math.max(lt-ot,ct-st),pt=pt!==0?32767/pt:0}return earcutLinked(it,at,tt,ot,st,pt,0),at}};function linkedList(_e,_,tt,nt,rt){let it,at;if(rt===signedArea(_e,_,tt,nt)>0)for(it=_;it<tt;it+=nt)at=insertNode(it,_e[it],_e[it+1],at);else for(it=tt-nt;it>=_;it-=nt)at=insertNode(it,_e[it],_e[it+1],at);return at&&equals$1(at,at.next)&&(removeNode(at),at=at.next),at}function filterPoints(_e,_){if(!_e)return _e;_||(_=_e);let tt=_e,nt;do if(nt=!1,!tt.steiner&&(equals$1(tt,tt.next)||area(tt.prev,tt,tt.next)===0)){if(removeNode(tt),tt=_=tt.prev,tt===tt.next)break;nt=!0}else tt=tt.next;while(nt||tt!==_);return _}function earcutLinked(_e,_,tt,nt,rt,it,at){if(!_e)return;!at&&it&&indexCurve(_e,nt,rt,it);let ot=_e,st,lt;for(;_e.prev!==_e.next;){if(st=_e.prev,lt=_e.next,it?isEarHashed(_e,nt,rt,it):isEar(_e)){_.push(st.i/tt|0),_.push(_e.i/tt|0),_.push(lt.i/tt|0),removeNode(_e),_e=lt.next,ot=lt.next;continue}if(_e=lt,_e===ot){at?at===1?(_e=cureLocalIntersections(filterPoints(_e),_,tt),earcutLinked(_e,_,tt,nt,rt,it,2)):at===2&&splitEarcut(_e,_,tt,nt,rt,it):earcutLinked(filterPoints(_e),_,tt,nt,rt,it,1);break}}}function isEar(_e){const _=_e.prev,tt=_e,nt=_e.next;if(area(_,tt,nt)>=0)return!1;const rt=_.x,it=tt.x,at=nt.x,ot=_.y,st=tt.y,lt=nt.y,ct=rt<it?rt<at?rt:at:it<at?it:at,ut=ot<st?ot<lt?ot:lt:st<lt?st:lt,ft=rt>it?rt>at?rt:at:it>at?it:at,pt=ot>st?ot>lt?ot:lt:st>lt?st:lt;let gt=nt.next;for(;gt!==_;){if(gt.x>=ct&&gt.x<=ft&&gt.y>=ut&&gt.y<=pt&&pointInTriangle(rt,ot,it,st,at,lt,gt.x,gt.y)&&area(gt.prev,gt,gt.next)>=0)return!1;gt=gt.next}return!0}function isEarHashed(_e,_,tt,nt){const rt=_e.prev,it=_e,at=_e.next;if(area(rt,it,at)>=0)return!1;const ot=rt.x,st=it.x,lt=at.x,ct=rt.y,ut=it.y,ft=at.y,pt=ot<st?ot<lt?ot:lt:st<lt?st:lt,gt=ct<ut?ct<ft?ct:ft:ut<ft?ut:ft,xt=ot>st?ot>lt?ot:lt:st>lt?st:lt,yt=ct>ut?ct>ft?ct:ft:ut>ft?ut:ft,mt=zOrder(pt,gt,_,tt,nt),At=zOrder(xt,yt,_,tt,nt);let vt=_e.prevZ,Et=_e.nextZ;for(;vt&&vt.z>=mt&&Et&&Et.z<=At;){if(vt.x>=pt&&vt.x<=xt&&vt.y>=gt&&vt.y<=yt&&vt!==rt&&vt!==at&&pointInTriangle(ot,ct,st,ut,lt,ft,vt.x,vt.y)&&area(vt.prev,vt,vt.next)>=0||(vt=vt.prevZ,Et.x>=pt&&Et.x<=xt&&Et.y>=gt&&Et.y<=yt&&Et!==rt&&Et!==at&&pointInTriangle(ot,ct,st,ut,lt,ft,Et.x,Et.y)&&area(Et.prev,Et,Et.next)>=0))return!1;Et=Et.nextZ}for(;vt&&vt.z>=mt;){if(vt.x>=pt&&vt.x<=xt&&vt.y>=gt&&vt.y<=yt&&vt!==rt&&vt!==at&&pointInTriangle(ot,ct,st,ut,lt,ft,vt.x,vt.y)&&area(vt.prev,vt,vt.next)>=0)return!1;vt=vt.prevZ}for(;Et&&Et.z<=At;){if(Et.x>=pt&&Et.x<=xt&&Et.y>=gt&&Et.y<=yt&&Et!==rt&&Et!==at&&pointInTriangle(ot,ct,st,ut,lt,ft,Et.x,Et.y)&&area(Et.prev,Et,Et.next)>=0)return!1;Et=Et.nextZ}return!0}function cureLocalIntersections(_e,_,tt){let nt=_e;do{const rt=nt.prev,it=nt.next.next;!equals$1(rt,it)&&intersects(rt,nt,nt.next,it)&&locallyInside(rt,it)&&locallyInside(it,rt)&&(_.push(rt.i/tt|0),_.push(nt.i/tt|0),_.push(it.i/tt|0),removeNode(nt),removeNode(nt.next),nt=_e=it),nt=nt.next}while(nt!==_e);return filterPoints(nt)}function splitEarcut(_e,_,tt,nt,rt,it){let at=_e;do{let ot=at.next.next;for(;ot!==at.prev;){if(at.i!==ot.i&&isValidDiagonal(at,ot)){let st=splitPolygon(at,ot);at=filterPoints(at,at.next),st=filterPoints(st,st.next),earcutLinked(at,_,tt,nt,rt,it,0),earcutLinked(st,_,tt,nt,rt,it,0);return}ot=ot.next}at=at.next}while(at!==_e)}function eliminateHoles(_e,_,tt,nt){const rt=[];let it,at,ot,st,lt;for(it=0,at=_.length;it<at;it++)ot=_[it]*nt,st=it<at-1?_[it+1]*nt:_e.length,lt=linkedList(_e,ot,st,nt,!1),lt===lt.next&&(lt.steiner=!0),rt.push(getLeftmost(lt));for(rt.sort(compareX),it=0;it<rt.length;it++)tt=eliminateHole(rt[it],tt);return tt}function compareX(_e,_){return _e.x-_.x}function eliminateHole(_e,_){const tt=findHoleBridge(_e,_);if(!tt)return _;const nt=splitPolygon(tt,_e);return filterPoints(nt,nt.next),filterPoints(tt,tt.next)}function findHoleBridge(_e,_){let tt=_,nt=-1/0,rt;const it=_e.x,at=_e.y;do{if(at<=tt.y&&at>=tt.next.y&&tt.next.y!==tt.y){const ft=tt.x+(at-tt.y)*(tt.next.x-tt.x)/(tt.next.y-tt.y);if(ft<=it&&ft>nt&&(nt=ft,rt=tt.x<tt.next.x?tt:tt.next,ft===it))return rt}tt=tt.next}while(tt!==_);if(!rt)return null;const ot=rt,st=rt.x,lt=rt.y;let ct=1/0,ut;tt=rt;do it>=tt.x&&tt.x>=st&&it!==tt.x&&pointInTriangle(at<lt?it:nt,at,st,lt,at<lt?nt:it,at,tt.x,tt.y)&&(ut=Math.abs(at-tt.y)/(it-tt.x),locallyInside(tt,_e)&&(ut<ct||ut===ct&&(tt.x>rt.x||tt.x===rt.x&&sectorContainsSector(rt,tt)))&&(rt=tt,ct=ut)),tt=tt.next;while(tt!==ot);return rt}function sectorContainsSector(_e,_){return area(_e.prev,_e,_.prev)<0&&area(_.next,_e,_e.next)<0}function indexCurve(_e,_,tt,nt){let rt=_e;do rt.z===0&&(rt.z=zOrder(rt.x,rt.y,_,tt,nt)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==_e);rt.prevZ.nextZ=null,rt.prevZ=null,sortLinked(rt)}function sortLinked(_e){let _,tt,nt,rt,it,at,ot,st,lt=1;do{for(tt=_e,_e=null,it=null,at=0;tt;){for(at++,nt=tt,ot=0,_=0;_<lt&&(ot++,nt=nt.nextZ,!!nt);_++);for(st=lt;ot>0||st>0&&nt;)ot!==0&&(st===0||!nt||tt.z<=nt.z)?(rt=tt,tt=tt.nextZ,ot--):(rt=nt,nt=nt.nextZ,st--),it?it.nextZ=rt:_e=rt,rt.prevZ=it,it=rt;tt=nt}it.nextZ=null,lt*=2}while(at>1);return _e}function zOrder(_e,_,tt,nt,rt){return _e=(_e-tt)*rt|0,_=(_-nt)*rt|0,_e=(_e|_e<<8)&16711935,_e=(_e|_e<<4)&252645135,_e=(_e|_e<<2)&858993459,_e=(_e|_e<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,_e|_<<1}function getLeftmost(_e){let _=_e,tt=_e;do(_.x<tt.x||_.x===tt.x&&_.y<tt.y)&&(tt=_),_=_.next;while(_!==_e);return tt}function pointInTriangle(_e,_,tt,nt,rt,it,at,ot){return(rt-at)*(_-ot)>=(_e-at)*(it-ot)&&(_e-at)*(nt-ot)>=(tt-at)*(_-ot)&&(tt-at)*(it-ot)>=(rt-at)*(nt-ot)}function isValidDiagonal(_e,_){return _e.next.i!==_.i&&_e.prev.i!==_.i&&!intersectsPolygon(_e,_)&&(locallyInside(_e,_)&&locallyInside(_,_e)&&middleInside(_e,_)&&(area(_e.prev,_e,_.prev)||area(_e,_.prev,_))||equals$1(_e,_)&&area(_e.prev,_e,_e.next)>0&&area(_.prev,_,_.next)>0)}function area(_e,_,tt){return(_.y-_e.y)*(tt.x-_.x)-(_.x-_e.x)*(tt.y-_.y)}function equals$1(_e,_){return _e.x===_.x&&_e.y===_.y}function intersects(_e,_,tt,nt){const rt=sign(area(_e,_,tt)),it=sign(area(_e,_,nt)),at=sign(area(tt,nt,_e)),ot=sign(area(tt,nt,_));return!!(rt!==it&&at!==ot||rt===0&&onSegment(_e,tt,_)||it===0&&onSegment(_e,nt,_)||at===0&&onSegment(tt,_e,nt)||ot===0&&onSegment(tt,_,nt))}function onSegment(_e,_,tt){return _.x<=Math.max(_e.x,tt.x)&&_.x>=Math.min(_e.x,tt.x)&&_.y<=Math.max(_e.y,tt.y)&&_.y>=Math.min(_e.y,tt.y)}function sign(_e){return _e>0?1:_e<0?-1:0}function intersectsPolygon(_e,_){let tt=_e;do{if(tt.i!==_e.i&&tt.next.i!==_e.i&&tt.i!==_.i&&tt.next.i!==_.i&&intersects(tt,tt.next,_e,_))return!0;tt=tt.next}while(tt!==_e);return!1}function locallyInside(_e,_){return area(_e.prev,_e,_e.next)<0?area(_e,_,_e.next)>=0&&area(_e,_e.prev,_)>=0:area(_e,_,_e.prev)<0||area(_e,_e.next,_)<0}function middleInside(_e,_){let tt=_e,nt=!1;const rt=(_e.x+_.x)/2,it=(_e.y+_.y)/2;do tt.y>it!=tt.next.y>it&&tt.next.y!==tt.y&&rt<(tt.next.x-tt.x)*(it-tt.y)/(tt.next.y-tt.y)+tt.x&&(nt=!nt),tt=tt.next;while(tt!==_e);return nt}function splitPolygon(_e,_){const tt=new Node$1(_e.i,_e.x,_e.y),nt=new Node$1(_.i,_.x,_.y),rt=_e.next,it=_.prev;return _e.next=_,_.prev=_e,tt.next=rt,rt.prev=tt,nt.next=tt,tt.prev=nt,it.next=nt,nt.prev=it,nt}function insertNode(_e,_,tt,nt){const rt=new Node$1(_e,_,tt);return nt?(rt.next=nt.next,rt.prev=nt,nt.next.prev=rt,nt.next=rt):(rt.prev=rt,rt.next=rt),rt}function removeNode(_e){_e.next.prev=_e.prev,_e.prev.next=_e.next,_e.prevZ&&(_e.prevZ.nextZ=_e.nextZ),_e.nextZ&&(_e.nextZ.prevZ=_e.prevZ)}function Node$1(_e,_,tt){this.i=_e,this.x=_,this.y=tt,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(_e,_,tt,nt){let rt=0;for(let it=_,at=tt-nt;it<tt;it+=nt)rt+=(_e[at]-_e[it])*(_e[it+1]+_e[at+1]),at=it;return rt}class ShapeUtils{static area(_){const tt=_.length;let nt=0;for(let rt=tt-1,it=0;it<tt;rt=it++)nt+=_[rt].x*_[it].y-_[it].x*_[rt].y;return nt*.5}static isClockWise(_){return ShapeUtils.area(_)<0}static triangulateShape(_,tt){const nt=[],rt=[],it=[];removeDupEndPts(_),addContour(nt,_);let at=_.length;tt.forEach(removeDupEndPts);for(let st=0;st<tt.length;st++)rt.push(at),at+=tt[st].length,addContour(nt,tt[st]);const ot=Earcut.triangulate(nt,rt);for(let st=0;st<ot.length;st+=3)it.push(ot.slice(st,st+3));return it}}function removeDupEndPts(_e){const _=_e.length;_>2&&_e[_-1].equals(_e[0])&&_e.pop()}function addContour(_e,_){for(let tt=0;tt<_.length;tt++)_e.push(_[tt].x),_e.push(_[tt].y)}class ExtrudeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),tt={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:_,options:tt},_=Array.isArray(_)?_:[_];const nt=this,rt=[],it=[];for(let ot=0,st=_.length;ot<st;ot++){const lt=_[ot];at(lt)}this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("uv",new Float32BufferAttribute(it,2)),this.computeVertexNormals();function at(ot){const st=[],lt=tt.curveSegments!==void 0?tt.curveSegments:12,ct=tt.steps!==void 0?tt.steps:1,ut=tt.depth!==void 0?tt.depth:1;let ft=tt.bevelEnabled!==void 0?tt.bevelEnabled:!0,pt=tt.bevelThickness!==void 0?tt.bevelThickness:.2,gt=tt.bevelSize!==void 0?tt.bevelSize:pt-.1,xt=tt.bevelOffset!==void 0?tt.bevelOffset:0,yt=tt.bevelSegments!==void 0?tt.bevelSegments:3;const mt=tt.extrudePath,At=tt.UVGenerator!==void 0?tt.UVGenerator:WorldUVGenerator;let vt,Et=!1,Ct,Tt,bt,It;mt&&(vt=mt.getSpacedPoints(ct),Et=!0,ft=!1,Ct=mt.computeFrenetFrames(ct,!1),Tt=new Vector3,bt=new Vector3,It=new Vector3),ft||(yt=0,pt=0,gt=0,xt=0);const wt=ot.extractPoints(lt);let Rt=wt.shape;const Ft=wt.holes;if(!ShapeUtils.isClockWise(Rt)){Rt=Rt.reverse();for(let Wt=0,_n=Ft.length;Wt<_n;Wt++){const gn=Ft[Wt];ShapeUtils.isClockWise(gn)&&(Ft[Wt]=gn.reverse())}}const Gt=ShapeUtils.triangulateShape(Rt,Ft),Ht=Rt;for(let Wt=0,_n=Ft.length;Wt<_n;Wt++){const gn=Ft[Wt];Rt=Rt.concat(gn)}function jt(Wt,_n,gn){return _n||console.error("THREE.ExtrudeGeometry: vec does not exist"),Wt.clone().addScaledVector(_n,gn)}const Xt=Rt.length,Jt=Gt.length;function Dt(Wt,_n,gn){let vn,mn,Wn;const xn=Wt.x-_n.x,Dn=Wt.y-_n.y,Fn=gn.x-Wt.x,bn=gn.y-Wt.y,jn=xn*xn+Dn*Dn,Nt=xn*bn-Dn*Fn;if(Math.abs(Nt)>Number.EPSILON){const kt=Math.sqrt(jn),rn=Math.sqrt(Fn*Fn+bn*bn),Mn=_n.x-Dn/kt,wn=_n.y+xn/kt,Tn=gn.x-bn/rn,Gn=gn.y+Fn/rn,Un=((Tn-Mn)*bn-(Gn-wn)*Fn)/(xn*bn-Dn*Fn);vn=Mn+xn*Un-Wt.x,mn=wn+Dn*Un-Wt.y;const dn=vn*vn+mn*mn;if(dn<=2)return new Vector2(vn,mn);Wn=Math.sqrt(dn/2)}else{let kt=!1;xn>Number.EPSILON?Fn>Number.EPSILON&&(kt=!0):xn<-Number.EPSILON?Fn<-Number.EPSILON&&(kt=!0):Math.sign(Dn)===Math.sign(bn)&&(kt=!0),kt?(vn=-Dn,mn=xn,Wn=Math.sqrt(jn)):(vn=xn,mn=Dn,Wn=Math.sqrt(jn/2))}return new Vector2(vn/Wn,mn/Wn)}const zt=[];for(let Wt=0,_n=Ht.length,gn=_n-1,vn=Wt+1;Wt<_n;Wt++,gn++,vn++)gn===_n&&(gn=0),vn===_n&&(vn=0),zt[Wt]=Dt(Ht[Wt],Ht[gn],Ht[vn]);const $t=[];let Lt,Vt=zt.concat();for(let Wt=0,_n=Ft.length;Wt<_n;Wt++){const gn=Ft[Wt];Lt=[];for(let vn=0,mn=gn.length,Wn=mn-1,xn=vn+1;vn<mn;vn++,Wn++,xn++)Wn===mn&&(Wn=0),xn===mn&&(xn=0),Lt[vn]=Dt(gn[vn],gn[Wn],gn[xn]);$t.push(Lt),Vt=Vt.concat(Lt)}for(let Wt=0;Wt<yt;Wt++){const _n=Wt/yt,gn=pt*Math.cos(_n*Math.PI/2),vn=gt*Math.sin(_n*Math.PI/2)+xt;for(let mn=0,Wn=Ht.length;mn<Wn;mn++){const xn=jt(Ht[mn],zt[mn],vn);ln(xn.x,xn.y,-gn)}for(let mn=0,Wn=Ft.length;mn<Wn;mn++){const xn=Ft[mn];Lt=$t[mn];for(let Dn=0,Fn=xn.length;Dn<Fn;Dn++){const bn=jt(xn[Dn],Lt[Dn],vn);ln(bn.x,bn.y,-gn)}}}const tn=gt+xt;for(let Wt=0;Wt<Xt;Wt++){const _n=ft?jt(Rt[Wt],Vt[Wt],tn):Rt[Wt];Et?(bt.copy(Ct.normals[0]).multiplyScalar(_n.x),Tt.copy(Ct.binormals[0]).multiplyScalar(_n.y),It.copy(vt[0]).add(bt).add(Tt),ln(It.x,It.y,It.z)):ln(_n.x,_n.y,0)}for(let Wt=1;Wt<=ct;Wt++)for(let _n=0;_n<Xt;_n++){const gn=ft?jt(Rt[_n],Vt[_n],tn):Rt[_n];Et?(bt.copy(Ct.normals[Wt]).multiplyScalar(gn.x),Tt.copy(Ct.binormals[Wt]).multiplyScalar(gn.y),It.copy(vt[Wt]).add(bt).add(Tt),ln(It.x,It.y,It.z)):ln(gn.x,gn.y,ut/ct*Wt)}for(let Wt=yt-1;Wt>=0;Wt--){const _n=Wt/yt,gn=pt*Math.cos(_n*Math.PI/2),vn=gt*Math.sin(_n*Math.PI/2)+xt;for(let mn=0,Wn=Ht.length;mn<Wn;mn++){const xn=jt(Ht[mn],zt[mn],vn);ln(xn.x,xn.y,ut+gn)}for(let mn=0,Wn=Ft.length;mn<Wn;mn++){const xn=Ft[mn];Lt=$t[mn];for(let Dn=0,Fn=xn.length;Dn<Fn;Dn++){const bn=jt(xn[Dn],Lt[Dn],vn);Et?ln(bn.x,bn.y+vt[ct-1].y,vt[ct-1].x+gn):ln(bn.x,bn.y,ut+gn)}}}an(),on();function an(){const Wt=rt.length/3;if(ft){let _n=0,gn=Xt*_n;for(let vn=0;vn<Jt;vn++){const mn=Gt[vn];cn(mn[2]+gn,mn[1]+gn,mn[0]+gn)}_n=ct+yt*2,gn=Xt*_n;for(let vn=0;vn<Jt;vn++){const mn=Gt[vn];cn(mn[0]+gn,mn[1]+gn,mn[2]+gn)}}else{for(let _n=0;_n<Jt;_n++){const gn=Gt[_n];cn(gn[2],gn[1],gn[0])}for(let _n=0;_n<Jt;_n++){const gn=Gt[_n];cn(gn[0]+Xt*ct,gn[1]+Xt*ct,gn[2]+Xt*ct)}}nt.addGroup(Wt,rt.length/3-Wt,0)}function on(){const Wt=rt.length/3;let _n=0;sn(Ht,_n),_n+=Ht.length;for(let gn=0,vn=Ft.length;gn<vn;gn++){const mn=Ft[gn];sn(mn,_n),_n+=mn.length}nt.addGroup(Wt,rt.length/3-Wt,1)}function sn(Wt,_n){let gn=Wt.length;for(;--gn>=0;){const vn=gn;let mn=gn-1;mn<0&&(mn=Wt.length-1);for(let Wn=0,xn=ct+yt*2;Wn<xn;Wn++){const Dn=Xt*Wn,Fn=Xt*(Wn+1),bn=_n+vn+Dn,jn=_n+mn+Dn,Nt=_n+mn+Fn,kt=_n+vn+Fn;In(bn,jn,Nt,kt)}}}function ln(Wt,_n,gn){st.push(Wt),st.push(_n),st.push(gn)}function cn(Wt,_n,gn){zn(Wt),zn(_n),zn(gn);const vn=rt.length/3,mn=At.generateTopUV(nt,rt,vn-3,vn-2,vn-1);yn(mn[0]),yn(mn[1]),yn(mn[2])}function In(Wt,_n,gn,vn){zn(Wt),zn(_n),zn(vn),zn(_n),zn(gn),zn(vn);const mn=rt.length/3,Wn=At.generateSideWallUV(nt,rt,mn-6,mn-3,mn-2,mn-1);yn(Wn[0]),yn(Wn[1]),yn(Wn[3]),yn(Wn[1]),yn(Wn[2]),yn(Wn[3])}function zn(Wt){rt.push(st[Wt*3+0]),rt.push(st[Wt*3+1]),rt.push(st[Wt*3+2])}function yn(Wt){it.push(Wt.x),it.push(Wt.y)}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),tt=this.parameters.shapes,nt=this.parameters.options;return toJSON$1(tt,nt,_)}static fromJSON(_,tt){const nt=[];for(let it=0,at=_.shapes.length;it<at;it++){const ot=tt[_.shapes[it]];nt.push(ot)}const rt=_.options.extrudePath;return rt!==void 0&&(_.options.extrudePath=new Curves[rt.type]().fromJSON(rt)),new ExtrudeGeometry(nt,_.options)}}const WorldUVGenerator={generateTopUV:function(_e,_,tt,nt,rt){const it=_[tt*3],at=_[tt*3+1],ot=_[nt*3],st=_[nt*3+1],lt=_[rt*3],ct=_[rt*3+1];return[new Vector2(it,at),new Vector2(ot,st),new Vector2(lt,ct)]},generateSideWallUV:function(_e,_,tt,nt,rt,it){const at=_[tt*3],ot=_[tt*3+1],st=_[tt*3+2],lt=_[nt*3],ct=_[nt*3+1],ut=_[nt*3+2],ft=_[rt*3],pt=_[rt*3+1],gt=_[rt*3+2],xt=_[it*3],yt=_[it*3+1],mt=_[it*3+2];return Math.abs(ot-ct)<Math.abs(at-lt)?[new Vector2(at,1-st),new Vector2(lt,1-ut),new Vector2(ft,1-gt),new Vector2(xt,1-mt)]:[new Vector2(ot,1-st),new Vector2(ct,1-ut),new Vector2(pt,1-gt),new Vector2(yt,1-mt)]}};function toJSON$1(_e,_,tt){if(tt.shapes=[],Array.isArray(_e))for(let nt=0,rt=_e.length;nt<rt;nt++){const it=_e[nt];tt.shapes.push(it.uuid)}else tt.shapes.push(_e.uuid);return tt.options=Object.assign({},_),_.extrudePath!==void 0&&(tt.options.extrudePath=_.extrudePath.toJSON()),tt}class IcosahedronGeometry extends PolyhedronGeometry{constructor(_=1,tt=0){const nt=(1+Math.sqrt(5))/2,rt=[-1,nt,0,1,nt,0,-1,-nt,0,1,-nt,0,0,-1,nt,0,1,nt,0,-1,-nt,0,1,-nt,nt,0,-1,nt,0,1,-nt,0,-1,-nt,0,1],it=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(rt,it,_,tt),this.type="IcosahedronGeometry",this.parameters={radius:_,detail:tt}}static fromJSON(_){return new IcosahedronGeometry(_.radius,_.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(_=1,tt=0){const nt=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],rt=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(nt,rt,_,tt),this.type="OctahedronGeometry",this.parameters={radius:_,detail:tt}}static fromJSON(_){return new OctahedronGeometry(_.radius,_.detail)}}class RingGeometry extends BufferGeometry{constructor(_=.5,tt=1,nt=32,rt=1,it=0,at=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:_,outerRadius:tt,thetaSegments:nt,phiSegments:rt,thetaStart:it,thetaLength:at},nt=Math.max(3,nt),rt=Math.max(1,rt);const ot=[],st=[],lt=[],ct=[];let ut=_;const ft=(tt-_)/rt,pt=new Vector3,gt=new Vector2;for(let xt=0;xt<=rt;xt++){for(let yt=0;yt<=nt;yt++){const mt=it+yt/nt*at;pt.x=ut*Math.cos(mt),pt.y=ut*Math.sin(mt),st.push(pt.x,pt.y,pt.z),lt.push(0,0,1),gt.x=(pt.x/tt+1)/2,gt.y=(pt.y/tt+1)/2,ct.push(gt.x,gt.y)}ut+=ft}for(let xt=0;xt<rt;xt++){const yt=xt*(nt+1);for(let mt=0;mt<nt;mt++){const At=mt+yt,vt=At,Et=At+nt+1,Ct=At+nt+2,Tt=At+1;ot.push(vt,Et,Tt),ot.push(Et,Ct,Tt)}}this.setIndex(ot),this.setAttribute("position",new Float32BufferAttribute(st,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new RingGeometry(_.innerRadius,_.outerRadius,_.thetaSegments,_.phiSegments,_.thetaStart,_.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(_=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),tt=12){super(),this.type="ShapeGeometry",this.parameters={shapes:_,curveSegments:tt};const nt=[],rt=[],it=[],at=[];let ot=0,st=0;if(Array.isArray(_)===!1)lt(_);else for(let ct=0;ct<_.length;ct++)lt(_[ct]),this.addGroup(ot,st,ct),ot+=st,st=0;this.setIndex(nt),this.setAttribute("position",new Float32BufferAttribute(rt,3)),this.setAttribute("normal",new Float32BufferAttribute(it,3)),this.setAttribute("uv",new Float32BufferAttribute(at,2));function lt(ct){const ut=rt.length/3,ft=ct.extractPoints(tt);let pt=ft.shape;const gt=ft.holes;ShapeUtils.isClockWise(pt)===!1&&(pt=pt.reverse());for(let yt=0,mt=gt.length;yt<mt;yt++){const At=gt[yt];ShapeUtils.isClockWise(At)===!0&&(gt[yt]=At.reverse())}const xt=ShapeUtils.triangulateShape(pt,gt);for(let yt=0,mt=gt.length;yt<mt;yt++){const At=gt[yt];pt=pt.concat(At)}for(let yt=0,mt=pt.length;yt<mt;yt++){const At=pt[yt];rt.push(At.x,At.y,0),it.push(0,0,1),at.push(At.x,At.y)}for(let yt=0,mt=xt.length;yt<mt;yt++){const At=xt[yt],vt=At[0]+ut,Et=At[1]+ut,Ct=At[2]+ut;nt.push(vt,Et,Ct),st+=3}}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON(),tt=this.parameters.shapes;return toJSON(tt,_)}static fromJSON(_,tt){const nt=[];for(let rt=0,it=_.shapes.length;rt<it;rt++){const at=tt[_.shapes[rt]];nt.push(at)}return new ShapeGeometry(nt,_.curveSegments)}}function toJSON(_e,_){if(_.shapes=[],Array.isArray(_e))for(let tt=0,nt=_e.length;tt<nt;tt++){const rt=_e[tt];_.shapes.push(rt.uuid)}else _.shapes.push(_e.uuid);return _}class SphereGeometry extends BufferGeometry{constructor(_=1,tt=32,nt=16,rt=0,it=Math.PI*2,at=0,ot=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:_,widthSegments:tt,heightSegments:nt,phiStart:rt,phiLength:it,thetaStart:at,thetaLength:ot},tt=Math.max(3,Math.floor(tt)),nt=Math.max(2,Math.floor(nt));const st=Math.min(at+ot,Math.PI);let lt=0;const ct=[],ut=new Vector3,ft=new Vector3,pt=[],gt=[],xt=[],yt=[];for(let mt=0;mt<=nt;mt++){const At=[],vt=mt/nt;let Et=0;mt===0&&at===0?Et=.5/tt:mt===nt&&st===Math.PI&&(Et=-.5/tt);for(let Ct=0;Ct<=tt;Ct++){const Tt=Ct/tt;ut.x=-_*Math.cos(rt+Tt*it)*Math.sin(at+vt*ot),ut.y=_*Math.cos(at+vt*ot),ut.z=_*Math.sin(rt+Tt*it)*Math.sin(at+vt*ot),gt.push(ut.x,ut.y,ut.z),ft.copy(ut).normalize(),xt.push(ft.x,ft.y,ft.z),yt.push(Tt+Et,1-vt),At.push(lt++)}ct.push(At)}for(let mt=0;mt<nt;mt++)for(let At=0;At<tt;At++){const vt=ct[mt][At+1],Et=ct[mt][At],Ct=ct[mt+1][At],Tt=ct[mt+1][At+1];(mt!==0||at>0)&&pt.push(vt,Et,Tt),(mt!==nt-1||st<Math.PI)&&pt.push(Et,Ct,Tt)}this.setIndex(pt),this.setAttribute("position",new Float32BufferAttribute(gt,3)),this.setAttribute("normal",new Float32BufferAttribute(xt,3)),this.setAttribute("uv",new Float32BufferAttribute(yt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new SphereGeometry(_.radius,_.widthSegments,_.heightSegments,_.phiStart,_.phiLength,_.thetaStart,_.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(_=1,tt=0){const nt=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],rt=[2,1,0,0,3,2,1,3,0,2,3,1];super(nt,rt,_,tt),this.type="TetrahedronGeometry",this.parameters={radius:_,detail:tt}}static fromJSON(_){return new TetrahedronGeometry(_.radius,_.detail)}}class TorusGeometry extends BufferGeometry{constructor(_=1,tt=.4,nt=12,rt=48,it=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:_,tube:tt,radialSegments:nt,tubularSegments:rt,arc:it},nt=Math.floor(nt),rt=Math.floor(rt);const at=[],ot=[],st=[],lt=[],ct=new Vector3,ut=new Vector3,ft=new Vector3;for(let pt=0;pt<=nt;pt++)for(let gt=0;gt<=rt;gt++){const xt=gt/rt*it,yt=pt/nt*Math.PI*2;ut.x=(_+tt*Math.cos(yt))*Math.cos(xt),ut.y=(_+tt*Math.cos(yt))*Math.sin(xt),ut.z=tt*Math.sin(yt),ot.push(ut.x,ut.y,ut.z),ct.x=_*Math.cos(xt),ct.y=_*Math.sin(xt),ft.subVectors(ut,ct).normalize(),st.push(ft.x,ft.y,ft.z),lt.push(gt/rt),lt.push(pt/nt)}for(let pt=1;pt<=nt;pt++)for(let gt=1;gt<=rt;gt++){const xt=(rt+1)*pt+gt-1,yt=(rt+1)*(pt-1)+gt-1,mt=(rt+1)*(pt-1)+gt,At=(rt+1)*pt+gt;at.push(xt,yt,At),at.push(yt,mt,At)}this.setIndex(at),this.setAttribute("position",new Float32BufferAttribute(ot,3)),this.setAttribute("normal",new Float32BufferAttribute(st,3)),this.setAttribute("uv",new Float32BufferAttribute(lt,2))}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusGeometry(_.radius,_.tube,_.radialSegments,_.tubularSegments,_.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(_=1,tt=.4,nt=64,rt=8,it=2,at=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:_,tube:tt,tubularSegments:nt,radialSegments:rt,p:it,q:at},nt=Math.floor(nt),rt=Math.floor(rt);const ot=[],st=[],lt=[],ct=[],ut=new Vector3,ft=new Vector3,pt=new Vector3,gt=new Vector3,xt=new Vector3,yt=new Vector3,mt=new Vector3;for(let vt=0;vt<=nt;++vt){const Et=vt/nt*it*Math.PI*2;At(Et,it,at,_,pt),At(Et+.01,it,at,_,gt),yt.subVectors(gt,pt),mt.addVectors(gt,pt),xt.crossVectors(yt,mt),mt.crossVectors(xt,yt),xt.normalize(),mt.normalize();for(let Ct=0;Ct<=rt;++Ct){const Tt=Ct/rt*Math.PI*2,bt=-tt*Math.cos(Tt),It=tt*Math.sin(Tt);ut.x=pt.x+(bt*mt.x+It*xt.x),ut.y=pt.y+(bt*mt.y+It*xt.y),ut.z=pt.z+(bt*mt.z+It*xt.z),st.push(ut.x,ut.y,ut.z),ft.subVectors(ut,pt).normalize(),lt.push(ft.x,ft.y,ft.z),ct.push(vt/nt),ct.push(Ct/rt)}}for(let vt=1;vt<=nt;vt++)for(let Et=1;Et<=rt;Et++){const Ct=(rt+1)*(vt-1)+(Et-1),Tt=(rt+1)*vt+(Et-1),bt=(rt+1)*vt+Et,It=(rt+1)*(vt-1)+Et;ot.push(Ct,Tt,It),ot.push(Tt,bt,It)}this.setIndex(ot),this.setAttribute("position",new Float32BufferAttribute(st,3)),this.setAttribute("normal",new Float32BufferAttribute(lt,3)),this.setAttribute("uv",new Float32BufferAttribute(ct,2));function At(vt,Et,Ct,Tt,bt){const It=Math.cos(vt),wt=Math.sin(vt),Rt=Ct/Et*vt,Ft=Math.cos(Rt);bt.x=Tt*(2+Ft)*.5*It,bt.y=Tt*(2+Ft)*wt*.5,bt.z=Tt*Math.sin(Rt)*.5}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}static fromJSON(_){return new TorusKnotGeometry(_.radius,_.tube,_.tubularSegments,_.radialSegments,_.p,_.q)}}class TubeGeometry extends BufferGeometry{constructor(_=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),tt=64,nt=1,rt=8,it=!1){super(),this.type="TubeGeometry",this.parameters={path:_,tubularSegments:tt,radius:nt,radialSegments:rt,closed:it};const at=_.computeFrenetFrames(tt,it);this.tangents=at.tangents,this.normals=at.normals,this.binormals=at.binormals;const ot=new Vector3,st=new Vector3,lt=new Vector2;let ct=new Vector3;const ut=[],ft=[],pt=[],gt=[];xt(),this.setIndex(gt),this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("normal",new Float32BufferAttribute(ft,3)),this.setAttribute("uv",new Float32BufferAttribute(pt,2));function xt(){for(let vt=0;vt<tt;vt++)yt(vt);yt(it===!1?tt:0),At(),mt()}function yt(vt){ct=_.getPointAt(vt/tt,ct);const Et=at.normals[vt],Ct=at.binormals[vt];for(let Tt=0;Tt<=rt;Tt++){const bt=Tt/rt*Math.PI*2,It=Math.sin(bt),wt=-Math.cos(bt);st.x=wt*Et.x+It*Ct.x,st.y=wt*Et.y+It*Ct.y,st.z=wt*Et.z+It*Ct.z,st.normalize(),ft.push(st.x,st.y,st.z),ot.x=ct.x+nt*st.x,ot.y=ct.y+nt*st.y,ot.z=ct.z+nt*st.z,ut.push(ot.x,ot.y,ot.z)}}function mt(){for(let vt=1;vt<=tt;vt++)for(let Et=1;Et<=rt;Et++){const Ct=(rt+1)*(vt-1)+(Et-1),Tt=(rt+1)*vt+(Et-1),bt=(rt+1)*vt+Et,It=(rt+1)*(vt-1)+Et;gt.push(Ct,Tt,It),gt.push(Tt,bt,It)}}function At(){for(let vt=0;vt<=tt;vt++)for(let Et=0;Et<=rt;Et++)lt.x=vt/tt,lt.y=Et/rt,pt.push(lt.x,lt.y)}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}toJSON(){const _=super.toJSON();return _.path=this.parameters.path.toJSON(),_}static fromJSON(_){return new TubeGeometry(new Curves[_.path.type]().fromJSON(_.path),_.tubularSegments,_.radius,_.radialSegments,_.closed)}}class WireframeGeometry extends BufferGeometry{constructor(_=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:_},_!==null){const tt=[],nt=new Set,rt=new Vector3,it=new Vector3;if(_.index!==null){const at=_.attributes.position,ot=_.index;let st=_.groups;st.length===0&&(st=[{start:0,count:ot.count,materialIndex:0}]);for(let lt=0,ct=st.length;lt<ct;++lt){const ut=st[lt],ft=ut.start,pt=ut.count;for(let gt=ft,xt=ft+pt;gt<xt;gt+=3)for(let yt=0;yt<3;yt++){const mt=ot.getX(gt+yt),At=ot.getX(gt+(yt+1)%3);rt.fromBufferAttribute(at,mt),it.fromBufferAttribute(at,At),isUniqueEdge(rt,it,nt)===!0&&(tt.push(rt.x,rt.y,rt.z),tt.push(it.x,it.y,it.z))}}}else{const at=_.attributes.position;for(let ot=0,st=at.count/3;ot<st;ot++)for(let lt=0;lt<3;lt++){const ct=3*ot+lt,ut=3*ot+(lt+1)%3;rt.fromBufferAttribute(at,ct),it.fromBufferAttribute(at,ut),isUniqueEdge(rt,it,nt)===!0&&(tt.push(rt.x,rt.y,rt.z),tt.push(it.x,it.y,it.z))}}this.setAttribute("position",new Float32BufferAttribute(tt,3))}}copy(_){return super.copy(_),this.parameters=Object.assign({},_.parameters),this}}function isUniqueEdge(_e,_,tt){const nt=`${_e.x},${_e.y},${_e.z}-${_.x},${_.y},${_.z}`,rt=`${_.x},${_.y},${_.z}-${_e.x},${_e.y},${_e.z}`;return tt.has(nt)===!0||tt.has(rt)===!0?!1:(tt.add(nt),tt.add(rt),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(_){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color$1(0),this.transparent=!0,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.fog=_.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(_){super(_),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(_){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color$1(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={STANDARD:""},this.color.copy(_.color),this.roughness=_.roughness,this.metalness=_.metalness,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.roughnessMap=_.roughnessMap,this.metalnessMap=_.metalnessMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.envMapIntensity=_.envMapIntensity,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(_){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$4(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(tt){this.ior=(1+.4*tt)/(1-.4*tt)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color$1(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color$1(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color$1(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(_)}get anisotropy(){return this._anisotropy}set anisotropy(_){this._anisotropy>0!=_>0&&this.version++,this._anisotropy=_}get clearcoat(){return this._clearcoat}set clearcoat(_){this._clearcoat>0!=_>0&&this.version++,this._clearcoat=_}get iridescence(){return this._iridescence}set iridescence(_){this._iridescence>0!=_>0&&this.version++,this._iridescence=_}get sheen(){return this._sheen}set sheen(_){this._sheen>0!=_>0&&this.version++,this._sheen=_}get transmission(){return this._transmission}set transmission(_){this._transmission>0!=_>0&&this.version++,this._transmission=_}copy(_){return super.copy(_),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=_.anisotropy,this.anisotropyRotation=_.anisotropyRotation,this.anisotropyMap=_.anisotropyMap,this.clearcoat=_.clearcoat,this.clearcoatMap=_.clearcoatMap,this.clearcoatRoughness=_.clearcoatRoughness,this.clearcoatRoughnessMap=_.clearcoatRoughnessMap,this.clearcoatNormalMap=_.clearcoatNormalMap,this.clearcoatNormalScale.copy(_.clearcoatNormalScale),this.ior=_.ior,this.iridescence=_.iridescence,this.iridescenceMap=_.iridescenceMap,this.iridescenceIOR=_.iridescenceIOR,this.iridescenceThicknessRange=[..._.iridescenceThicknessRange],this.iridescenceThicknessMap=_.iridescenceThicknessMap,this.sheen=_.sheen,this.sheenColor.copy(_.sheenColor),this.sheenColorMap=_.sheenColorMap,this.sheenRoughness=_.sheenRoughness,this.sheenRoughnessMap=_.sheenRoughnessMap,this.transmission=_.transmission,this.transmissionMap=_.transmissionMap,this.thickness=_.thickness,this.thicknessMap=_.thicknessMap,this.attenuationDistance=_.attenuationDistance,this.attenuationColor.copy(_.attenuationColor),this.specularIntensity=_.specularIntensity,this.specularIntensityMap=_.specularIntensityMap,this.specularColor.copy(_.specularColor),this.specularColorMap=_.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(_){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color$1(16777215),this.specular=new Color$1(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.specular.copy(_.specular),this.shininess=_.shininess,this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshToonMaterial extends Material{constructor(_){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color$1(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.gradientMap=_.gradientMap,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.fog=_.fog,this}}class MeshNormalMaterial extends Material{constructor(_){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(_)}copy(_){return super.copy(_),this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.flatShading=_.flatShading,this}}class MeshLambertMaterial extends Material{constructor(_){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.color.copy(_.color),this.map=_.map,this.lightMap=_.lightMap,this.lightMapIntensity=_.lightMapIntensity,this.aoMap=_.aoMap,this.aoMapIntensity=_.aoMapIntensity,this.emissive.copy(_.emissive),this.emissiveMap=_.emissiveMap,this.emissiveIntensity=_.emissiveIntensity,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.specularMap=_.specularMap,this.alphaMap=_.alphaMap,this.envMap=_.envMap,this.combine=_.combine,this.reflectivity=_.reflectivity,this.refractionRatio=_.refractionRatio,this.wireframe=_.wireframe,this.wireframeLinewidth=_.wireframeLinewidth,this.wireframeLinecap=_.wireframeLinecap,this.wireframeLinejoin=_.wireframeLinejoin,this.flatShading=_.flatShading,this.fog=_.fog,this}}class MeshMatcapMaterial extends Material{constructor(_){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color$1(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(_)}copy(_){return super.copy(_),this.defines={MATCAP:""},this.color.copy(_.color),this.matcap=_.matcap,this.map=_.map,this.bumpMap=_.bumpMap,this.bumpScale=_.bumpScale,this.normalMap=_.normalMap,this.normalMapType=_.normalMapType,this.normalScale.copy(_.normalScale),this.displacementMap=_.displacementMap,this.displacementScale=_.displacementScale,this.displacementBias=_.displacementBias,this.alphaMap=_.alphaMap,this.flatShading=_.flatShading,this.fog=_.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(_){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(_)}copy(_){return super.copy(_),this.scale=_.scale,this.dashSize=_.dashSize,this.gapSize=_.gapSize,this}}function arraySlice(_e,_,tt){return isTypedArray$2(_e)?new _e.constructor(_e.subarray(_,tt!==void 0?tt:_e.length)):_e.slice(_,tt)}function convertArray(_e,_,tt){return!_e||!tt&&_e.constructor===_?_e:typeof _.BYTES_PER_ELEMENT=="number"?new _(_e):Array.prototype.slice.call(_e)}function isTypedArray$2(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function getKeyframeOrder(_e){function _(rt,it){return _e[rt]-_e[it]}const tt=_e.length,nt=new Array(tt);for(let rt=0;rt!==tt;++rt)nt[rt]=rt;return nt.sort(_),nt}function sortedArray(_e,_,tt){const nt=_e.length,rt=new _e.constructor(nt);for(let it=0,at=0;at!==nt;++it){const ot=tt[it]*_;for(let st=0;st!==_;++st)rt[at++]=_e[ot+st]}return rt}function flattenJSON(_e,_,tt,nt){let rt=1,it=_e[0];for(;it!==void 0&&it[nt]===void 0;)it=_e[rt++];if(it===void 0)return;let at=it[nt];if(at!==void 0)if(Array.isArray(at))do at=it[nt],at!==void 0&&(_.push(it.time),tt.push.apply(tt,at)),it=_e[rt++];while(it!==void 0);else if(at.toArray!==void 0)do at=it[nt],at!==void 0&&(_.push(it.time),at.toArray(tt,tt.length)),it=_e[rt++];while(it!==void 0);else do at=it[nt],at!==void 0&&(_.push(it.time),tt.push(at)),it=_e[rt++];while(it!==void 0)}function subclip(_e,_,tt,nt,rt=30){const it=_e.clone();it.name=_;const at=[];for(let st=0;st<it.tracks.length;++st){const lt=it.tracks[st],ct=lt.getValueSize(),ut=[],ft=[];for(let pt=0;pt<lt.times.length;++pt){const gt=lt.times[pt]*rt;if(!(gt<tt||gt>=nt)){ut.push(lt.times[pt]);for(let xt=0;xt<ct;++xt)ft.push(lt.values[pt*ct+xt])}}ut.length!==0&&(lt.times=convertArray(ut,lt.times.constructor),lt.values=convertArray(ft,lt.values.constructor),at.push(lt))}it.tracks=at;let ot=1/0;for(let st=0;st<it.tracks.length;++st)ot>it.tracks[st].times[0]&&(ot=it.tracks[st].times[0]);for(let st=0;st<it.tracks.length;++st)it.tracks[st].shift(-1*ot);return it.resetDuration(),it}function makeClipAdditive(_e,_=0,tt=_e,nt=30){nt<=0&&(nt=30);const rt=tt.tracks.length,it=_/nt;for(let at=0;at<rt;++at){const ot=tt.tracks[at],st=ot.ValueTypeName;if(st==="bool"||st==="string")continue;const lt=_e.tracks.find(function(mt){return mt.name===ot.name&&mt.ValueTypeName===st});if(lt===void 0)continue;let ct=0;const ut=ot.getValueSize();ot.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ct=ut/3);let ft=0;const pt=lt.getValueSize();lt.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(ft=pt/3);const gt=ot.times.length-1;let xt;if(it<=ot.times[0]){const mt=ct,At=ut-ct;xt=arraySlice(ot.values,mt,At)}else if(it>=ot.times[gt]){const mt=gt*ut+ct,At=mt+ut-ct;xt=arraySlice(ot.values,mt,At)}else{const mt=ot.createInterpolant(),At=ct,vt=ut-ct;mt.evaluate(it),xt=arraySlice(mt.resultBuffer,At,vt)}st==="quaternion"&&new Quaternion().fromArray(xt).normalize().conjugate().toArray(xt);const yt=lt.times.length;for(let mt=0;mt<yt;++mt){const At=mt*pt+ft;if(st==="quaternion")Quaternion.multiplyQuaternionsFlat(lt.values,At,xt,0,lt.values,At);else{const vt=pt-ft*2;for(let Et=0;Et<vt;++Et)lt.values[At+Et]-=xt[Et]}}}return _e.blendMode=AdditiveAnimationBlendMode,_e}const AnimationUtils={arraySlice,convertArray,isTypedArray:isTypedArray$2,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(_,tt,nt,rt){this.parameterPositions=_,this._cachedIndex=0,this.resultBuffer=rt!==void 0?rt:new tt.constructor(nt),this.sampleValues=tt,this.valueSize=nt,this.settings=null,this.DefaultSettings_={}}evaluate(_){const tt=this.parameterPositions;let nt=this._cachedIndex,rt=tt[nt],it=tt[nt-1];e:{t:{let at;n:{r:if(!(_<rt)){for(let ot=nt+2;;){if(rt===void 0){if(_<it)break r;return nt=tt.length,this._cachedIndex=nt,this.copySampleValue_(nt-1)}if(nt===ot)break;if(it=rt,rt=tt[++nt],_<rt)break t}at=tt.length;break n}if(!(_>=it)){const ot=tt[1];_<ot&&(nt=2,it=ot);for(let st=nt-2;;){if(it===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(nt===st)break;if(rt=it,it=tt[--nt-1],_>=it)break t}at=nt,nt=0;break n}break e}for(;nt<at;){const ot=nt+at>>>1;_<tt[ot]?at=ot:nt=ot+1}if(rt=tt[nt],it=tt[nt-1],it===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(rt===void 0)return nt=tt.length,this._cachedIndex=nt,this.copySampleValue_(nt-1)}this._cachedIndex=nt,this.intervalChanged_(nt,it,rt)}return this.interpolate_(nt,it,_,rt)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(_){const tt=this.resultBuffer,nt=this.sampleValues,rt=this.valueSize,it=_*rt;for(let at=0;at!==rt;++at)tt[at]=nt[it+at];return tt}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(_,tt,nt){const rt=this.parameterPositions;let it=_-2,at=_+1,ot=rt[it],st=rt[at];if(ot===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:it=_,ot=2*tt-nt;break;case WrapAroundEnding:it=rt.length-2,ot=tt+rt[it]-rt[it+1];break;default:it=_,ot=nt}if(st===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:at=_,st=2*nt-tt;break;case WrapAroundEnding:at=1,st=nt+rt[1]-rt[0];break;default:at=_-1,st=tt}const lt=(nt-tt)*.5,ct=this.valueSize;this._weightPrev=lt/(tt-ot),this._weightNext=lt/(st-nt),this._offsetPrev=it*ct,this._offsetNext=at*ct}interpolate_(_,tt,nt,rt){const it=this.resultBuffer,at=this.sampleValues,ot=this.valueSize,st=_*ot,lt=st-ot,ct=this._offsetPrev,ut=this._offsetNext,ft=this._weightPrev,pt=this._weightNext,gt=(nt-tt)/(rt-tt),xt=gt*gt,yt=xt*gt,mt=-ft*yt+2*ft*xt-ft*gt,At=(1+ft)*yt+(-1.5-2*ft)*xt+(-.5+ft)*gt+1,vt=(-1-pt)*yt+(1.5+pt)*xt+.5*gt,Et=pt*yt-pt*xt;for(let Ct=0;Ct!==ot;++Ct)it[Ct]=mt*at[ct+Ct]+At*at[lt+Ct]+vt*at[st+Ct]+Et*at[ut+Ct];return it}}class LinearInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt)}interpolate_(_,tt,nt,rt){const it=this.resultBuffer,at=this.sampleValues,ot=this.valueSize,st=_*ot,lt=st-ot,ct=(nt-tt)/(rt-tt),ut=1-ct;for(let ft=0;ft!==ot;++ft)it[ft]=at[lt+ft]*ut+at[st+ft]*ct;return it}}class DiscreteInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt)}interpolate_(_){return this.copySampleValue_(_-1)}}class KeyframeTrack{constructor(_,tt,nt,rt){if(_===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(tt===void 0||tt.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+_);this.name=_,this.times=convertArray(tt,this.TimeBufferType),this.values=convertArray(nt,this.ValueBufferType),this.setInterpolation(rt||this.DefaultInterpolation)}static toJSON(_){const tt=_.constructor;let nt;if(tt.toJSON!==this.toJSON)nt=tt.toJSON(_);else{nt={name:_.name,times:convertArray(_.times,Array),values:convertArray(_.values,Array)};const rt=_.getInterpolation();rt!==_.DefaultInterpolation&&(nt.interpolation=rt)}return nt.type=_.ValueTypeName,nt}InterpolantFactoryMethodDiscrete(_){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodLinear(_){return new LinearInterpolant(this.times,this.values,this.getValueSize(),_)}InterpolantFactoryMethodSmooth(_){return new CubicInterpolant(this.times,this.values,this.getValueSize(),_)}setInterpolation(_){let tt;switch(_){case InterpolateDiscrete:tt=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:tt=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:tt=this.InterpolantFactoryMethodSmooth;break}if(tt===void 0){const nt="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(_!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(nt);return console.warn("THREE.KeyframeTrack:",nt),this}return this.createInterpolant=tt,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(_){if(_!==0){const tt=this.times;for(let nt=0,rt=tt.length;nt!==rt;++nt)tt[nt]+=_}return this}scale(_){if(_!==1){const tt=this.times;for(let nt=0,rt=tt.length;nt!==rt;++nt)tt[nt]*=_}return this}trim(_,tt){const nt=this.times,rt=nt.length;let it=0,at=rt-1;for(;it!==rt&&nt[it]<_;)++it;for(;at!==-1&&nt[at]>tt;)--at;if(++at,it!==0||at!==rt){it>=at&&(at=Math.max(at,1),it=at-1);const ot=this.getValueSize();this.times=arraySlice(nt,it,at),this.values=arraySlice(this.values,it*ot,at*ot)}return this}validate(){let _=!0;const tt=this.getValueSize();tt-Math.floor(tt)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),_=!1);const nt=this.times,rt=this.values,it=nt.length;it===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),_=!1);let at=null;for(let ot=0;ot!==it;ot++){const st=nt[ot];if(typeof st=="number"&&isNaN(st)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,ot,st),_=!1;break}if(at!==null&&at>st){console.error("THREE.KeyframeTrack: Out of order keys.",this,ot,st,at),_=!1;break}at=st}if(rt!==void 0&&isTypedArray$2(rt))for(let ot=0,st=rt.length;ot!==st;++ot){const lt=rt[ot];if(isNaN(lt)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,ot,lt),_=!1;break}}return _}optimize(){const _=arraySlice(this.times),tt=arraySlice(this.values),nt=this.getValueSize(),rt=this.getInterpolation()===InterpolateSmooth,it=_.length-1;let at=1;for(let ot=1;ot<it;++ot){let st=!1;const lt=_[ot],ct=_[ot+1];if(lt!==ct&&(ot!==1||lt!==_[0]))if(rt)st=!0;else{const ut=ot*nt,ft=ut-nt,pt=ut+nt;for(let gt=0;gt!==nt;++gt){const xt=tt[ut+gt];if(xt!==tt[ft+gt]||xt!==tt[pt+gt]){st=!0;break}}}if(st){if(ot!==at){_[at]=_[ot];const ut=ot*nt,ft=at*nt;for(let pt=0;pt!==nt;++pt)tt[ft+pt]=tt[ut+pt]}++at}}if(it>0){_[at]=_[it];for(let ot=it*nt,st=at*nt,lt=0;lt!==nt;++lt)tt[st+lt]=tt[ot+lt];++at}return at!==_.length?(this.times=arraySlice(_,0,at),this.values=arraySlice(tt,0,at*nt)):(this.times=_,this.values=tt),this}clone(){const _=arraySlice(this.times,0),tt=arraySlice(this.values,0),nt=this.constructor,rt=new nt(this.name,_,tt);return rt.createInterpolant=this.createInterpolant,rt}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(_,tt,nt,rt){super(_,tt,nt,rt)}interpolate_(_,tt,nt,rt){const it=this.resultBuffer,at=this.sampleValues,ot=this.valueSize,st=(nt-tt)/(rt-tt);let lt=_*ot;for(let ct=lt+ot;lt!==ct;lt+=4)Quaternion.slerpFlat(it,0,at,lt-ot,at,lt,st);return it}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(_){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),_)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(_,tt=-1,nt,rt=NormalAnimationBlendMode){this.name=_,this.tracks=nt,this.duration=tt,this.blendMode=rt,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(_){const tt=[],nt=_.tracks,rt=1/(_.fps||1);for(let at=0,ot=nt.length;at!==ot;++at)tt.push(parseKeyframeTrack(nt[at]).scale(rt));const it=new this(_.name,_.duration,tt,_.blendMode);return it.uuid=_.uuid,it}static toJSON(_){const tt=[],nt=_.tracks,rt={name:_.name,duration:_.duration,tracks:tt,uuid:_.uuid,blendMode:_.blendMode};for(let it=0,at=nt.length;it!==at;++it)tt.push(KeyframeTrack.toJSON(nt[it]));return rt}static CreateFromMorphTargetSequence(_,tt,nt,rt){const it=tt.length,at=[];for(let ot=0;ot<it;ot++){let st=[],lt=[];st.push((ot+it-1)%it,ot,(ot+1)%it),lt.push(0,1,0);const ct=getKeyframeOrder(st);st=sortedArray(st,1,ct),lt=sortedArray(lt,1,ct),!rt&&st[0]===0&&(st.push(it),lt.push(lt[0])),at.push(new NumberKeyframeTrack(".morphTargetInfluences["+tt[ot].name+"]",st,lt).scale(1/nt))}return new this(_,-1,at)}static findByName(_,tt){let nt=_;if(!Array.isArray(_)){const rt=_;nt=rt.geometry&&rt.geometry.animations||rt.animations}for(let rt=0;rt<nt.length;rt++)if(nt[rt].name===tt)return nt[rt];return null}static CreateClipsFromMorphTargetSequences(_,tt,nt){const rt={},it=/^([\w-]*?)([\d]+)$/;for(let ot=0,st=_.length;ot<st;ot++){const lt=_[ot],ct=lt.name.match(it);if(ct&&ct.length>1){const ut=ct[1];let ft=rt[ut];ft||(rt[ut]=ft=[]),ft.push(lt)}}const at=[];for(const ot in rt)at.push(this.CreateFromMorphTargetSequence(ot,rt[ot],tt,nt));return at}static parseAnimation(_,tt){if(!_)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const nt=function(ut,ft,pt,gt,xt){if(pt.length!==0){const yt=[],mt=[];flattenJSON(pt,yt,mt,gt),yt.length!==0&&xt.push(new ut(ft,yt,mt))}},rt=[],it=_.name||"default",at=_.fps||30,ot=_.blendMode;let st=_.length||-1;const lt=_.hierarchy||[];for(let ut=0;ut<lt.length;ut++){const ft=lt[ut].keys;if(!(!ft||ft.length===0))if(ft[0].morphTargets){const pt={};let gt;for(gt=0;gt<ft.length;gt++)if(ft[gt].morphTargets)for(let xt=0;xt<ft[gt].morphTargets.length;xt++)pt[ft[gt].morphTargets[xt]]=-1;for(const xt in pt){const yt=[],mt=[];for(let At=0;At!==ft[gt].morphTargets.length;++At){const vt=ft[gt];yt.push(vt.time),mt.push(vt.morphTarget===xt?1:0)}rt.push(new NumberKeyframeTrack(".morphTargetInfluence["+xt+"]",yt,mt))}st=pt.length*at}else{const pt=".bones["+tt[ut].name+"]";nt(VectorKeyframeTrack,pt+".position",ft,"pos",rt),nt(QuaternionKeyframeTrack,pt+".quaternion",ft,"rot",rt),nt(VectorKeyframeTrack,pt+".scale",ft,"scl",rt)}}return rt.length===0?null:new this(it,st,rt,ot)}resetDuration(){const _=this.tracks;let tt=0;for(let nt=0,rt=_.length;nt!==rt;++nt){const it=this.tracks[nt];tt=Math.max(tt,it.times[it.times.length-1])}return this.duration=tt,this}trim(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].trim(0,this.duration);return this}validate(){let _=!0;for(let tt=0;tt<this.tracks.length;tt++)_=_&&this.tracks[tt].validate();return _}optimize(){for(let _=0;_<this.tracks.length;_++)this.tracks[_].optimize();return this}clone(){const _=[];for(let tt=0;tt<this.tracks.length;tt++)_.push(this.tracks[tt].clone());return new this.constructor(this.name,this.duration,_,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(_e){switch(_e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+_e)}function parseKeyframeTrack(_e){if(_e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const _=getTrackTypeForValueTypeName(_e.type);if(_e.times===void 0){const tt=[],nt=[];flattenJSON(_e.keys,tt,nt,"value"),_e.times=tt,_e.values=nt}return _.parse!==void 0?_.parse(_e):new _(_e.name,_e.times,_e.values,_e.interpolation)}const Cache={enabled:!1,files:{},add:function(_e,_){this.enabled!==!1&&(this.files[_e]=_)},get:function(_e){if(this.enabled!==!1)return this.files[_e]},remove:function(_e){delete this.files[_e]},clear:function(){this.files={}}};class LoadingManager{constructor(_,tt,nt){const rt=this;let it=!1,at=0,ot=0,st;const lt=[];this.onStart=void 0,this.onLoad=_,this.onProgress=tt,this.onError=nt,this.itemStart=function(ct){ot++,it===!1&&rt.onStart!==void 0&&rt.onStart(ct,at,ot),it=!0},this.itemEnd=function(ct){at++,rt.onProgress!==void 0&&rt.onProgress(ct,at,ot),at===ot&&(it=!1,rt.onLoad!==void 0&&rt.onLoad())},this.itemError=function(ct){rt.onError!==void 0&&rt.onError(ct)},this.resolveURL=function(ct){return st?st(ct):ct},this.setURLModifier=function(ct){return st=ct,this},this.addHandler=function(ct,ut){return lt.push(ct,ut),this},this.removeHandler=function(ct){const ut=lt.indexOf(ct);return ut!==-1&&lt.splice(ut,2),this},this.getHandler=function(ct){for(let ut=0,ft=lt.length;ut<ft;ut+=2){const pt=lt[ut],gt=lt[ut+1];if(pt.global&&(pt.lastIndex=0),pt.test(ct))return gt}return null}}}const DefaultLoadingManager=new LoadingManager;let Loader$1=class{constructor(_){this.manager=_!==void 0?_:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(_,tt){const nt=this;return new Promise(function(rt,it){nt.load(_,rt,tt,it)})}parse(){}setCrossOrigin(_){return this.crossOrigin=_,this}setWithCredentials(_){return this.withCredentials=_,this}setPath(_){return this.path=_,this}setResourcePath(_){return this.resourcePath=_,this}setRequestHeader(_){return this.requestHeader=_,this}};Loader$1.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(_,tt){super(_),this.response=tt}}class FileLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=Cache.get(_);if(it!==void 0)return this.manager.itemStart(_),setTimeout(()=>{tt&&tt(it),this.manager.itemEnd(_)},0),it;if(loading[_]!==void 0){loading[_].push({onLoad:tt,onProgress:nt,onError:rt});return}loading[_]=[],loading[_].push({onLoad:tt,onProgress:nt,onError:rt});const at=new Request(_,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),ot=this.mimeType,st=this.responseType;fetch(at).then(lt=>{if(lt.status===200||lt.status===0){if(lt.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||lt.body===void 0||lt.body.getReader===void 0)return lt;const ct=loading[_],ut=lt.body.getReader(),ft=lt.headers.get("Content-Length")||lt.headers.get("X-File-Size"),pt=ft?parseInt(ft):0,gt=pt!==0;let xt=0;const yt=new ReadableStream({start(mt){At();function At(){ut.read().then(({done:vt,value:Et})=>{if(vt)mt.close();else{xt+=Et.byteLength;const Ct=new ProgressEvent("progress",{lengthComputable:gt,loaded:xt,total:pt});for(let Tt=0,bt=ct.length;Tt<bt;Tt++){const It=ct[Tt];It.onProgress&&It.onProgress(Ct)}mt.enqueue(Et),At()}})}}});return new Response(yt)}else throw new HttpError(`fetch for "${lt.url}" responded with ${lt.status}: ${lt.statusText}`,lt)}).then(lt=>{switch(st){case"arraybuffer":return lt.arrayBuffer();case"blob":return lt.blob();case"document":return lt.text().then(ct=>new DOMParser().parseFromString(ct,ot));case"json":return lt.json();default:if(ot===void 0)return lt.text();{const ut=/charset="?([^;"\s]*)"?/i.exec(ot),ft=ut&&ut[1]?ut[1].toLowerCase():void 0,pt=new TextDecoder(ft);return lt.arrayBuffer().then(gt=>pt.decode(gt))}}}).then(lt=>{Cache.add(_,lt);const ct=loading[_];delete loading[_];for(let ut=0,ft=ct.length;ut<ft;ut++){const pt=ct[ut];pt.onLoad&&pt.onLoad(lt)}}).catch(lt=>{const ct=loading[_];if(ct===void 0)throw this.manager.itemError(_),lt;delete loading[_];for(let ut=0,ft=ct.length;ut<ft;ut++){const pt=ct[ut];pt.onError&&pt.onError(lt)}this.manager.itemError(_)}).finally(()=>{this.manager.itemEnd(_)}),this.manager.itemStart(_)}setResponseType(_){return this.responseType=_,this}setMimeType(_){return this.mimeType=_,this}}class AnimationLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,at=new FileLoader(this.manager);at.setPath(this.path),at.setRequestHeader(this.requestHeader),at.setWithCredentials(this.withCredentials),at.load(_,function(ot){try{tt(it.parse(JSON.parse(ot)))}catch(st){rt?rt(st):console.error(st),it.manager.itemError(_)}},nt,rt)}parse(_){const tt=[];for(let nt=0;nt<_.length;nt++){const rt=AnimationClip.parse(_[nt]);tt.push(rt)}return tt}}class CompressedTextureLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,at=[],ot=new CompressedTexture,st=new FileLoader(this.manager);st.setPath(this.path),st.setResponseType("arraybuffer"),st.setRequestHeader(this.requestHeader),st.setWithCredentials(it.withCredentials);let lt=0;function ct(ut){st.load(_[ut],function(ft){const pt=it.parse(ft,!0);at[ut]={width:pt.width,height:pt.height,format:pt.format,mipmaps:pt.mipmaps},lt+=1,lt===6&&(pt.mipmapCount===1&&(ot.minFilter=LinearFilter),ot.image=at,ot.format=pt.format,ot.needsUpdate=!0,tt&&tt(ot))},nt,rt)}if(Array.isArray(_))for(let ut=0,ft=_.length;ut<ft;++ut)ct(ut);else st.load(_,function(ut){const ft=it.parse(ut,!0);if(ft.isCubemap){const pt=ft.mipmaps.length/ft.mipmapCount;for(let gt=0;gt<pt;gt++){at[gt]={mipmaps:[]};for(let xt=0;xt<ft.mipmapCount;xt++)at[gt].mipmaps.push(ft.mipmaps[gt*ft.mipmapCount+xt]),at[gt].format=ft.format,at[gt].width=ft.width,at[gt].height=ft.height}ot.image=at}else ot.image.width=ft.width,ot.image.height=ft.height,ot.mipmaps=ft.mipmaps;ft.mipmapCount===1&&(ot.minFilter=LinearFilter),ot.format=ft.format,ot.needsUpdate=!0,tt&&tt(ot)},nt,rt);return ot}}class ImageLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=this,at=Cache.get(_);if(at!==void 0)return it.manager.itemStart(_),setTimeout(function(){tt&&tt(at),it.manager.itemEnd(_)},0),at;const ot=createElementNS("img");function st(){ct(),Cache.add(_,this),tt&&tt(this),it.manager.itemEnd(_)}function lt(ut){ct(),rt&&rt(ut),it.manager.itemError(_),it.manager.itemEnd(_)}function ct(){ot.removeEventListener("load",st,!1),ot.removeEventListener("error",lt,!1)}return ot.addEventListener("load",st,!1),ot.addEventListener("error",lt,!1),_.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(ot.crossOrigin=this.crossOrigin),it.manager.itemStart(_),ot.src=_,ot}}class CubeTextureLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){const it=new CubeTexture;it.colorSpace=SRGBColorSpace;const at=new ImageLoader(this.manager);at.setCrossOrigin(this.crossOrigin),at.setPath(this.path);let ot=0;function st(lt){at.load(_[lt],function(ct){it.images[lt]=ct,ot++,ot===6&&(it.needsUpdate=!0,tt&&tt(it))},void 0,rt)}for(let lt=0;lt<_.length;++lt)st(lt);return it}}class DataTextureLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,at=new DataTexture,ot=new FileLoader(this.manager);return ot.setResponseType("arraybuffer"),ot.setRequestHeader(this.requestHeader),ot.setPath(this.path),ot.setWithCredentials(it.withCredentials),ot.load(_,function(st){let lt;try{lt=it.parse(st)}catch(ct){if(rt!==void 0)rt(ct);else{console.error(ct);return}}lt.image!==void 0?at.image=lt.image:lt.data!==void 0&&(at.image.width=lt.width,at.image.height=lt.height,at.image.data=lt.data),at.wrapS=lt.wrapS!==void 0?lt.wrapS:ClampToEdgeWrapping,at.wrapT=lt.wrapT!==void 0?lt.wrapT:ClampToEdgeWrapping,at.magFilter=lt.magFilter!==void 0?lt.magFilter:LinearFilter,at.minFilter=lt.minFilter!==void 0?lt.minFilter:LinearFilter,at.anisotropy=lt.anisotropy!==void 0?lt.anisotropy:1,lt.colorSpace!==void 0?at.colorSpace=lt.colorSpace:lt.encoding!==void 0&&(at.encoding=lt.encoding),lt.flipY!==void 0&&(at.flipY=lt.flipY),lt.format!==void 0&&(at.format=lt.format),lt.type!==void 0&&(at.type=lt.type),lt.mipmaps!==void 0&&(at.mipmaps=lt.mipmaps,at.minFilter=LinearMipmapLinearFilter),lt.mipmapCount===1&&(at.minFilter=LinearFilter),lt.generateMipmaps!==void 0&&(at.generateMipmaps=lt.generateMipmaps),at.needsUpdate=!0,tt&&tt(at,lt)},nt,rt),at}}class TextureLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){const it=new Texture,at=new ImageLoader(this.manager);return at.setCrossOrigin(this.crossOrigin),at.setPath(this.path),at.load(_,function(ot){it.image=ot,it.needsUpdate=!0,tt!==void 0&&tt(it)},nt,rt),it}}class Light extends Object3D{constructor(_,tt=1){super(),this.isLight=!0,this.type="Light",this.color=new Color$1(_),this.intensity=tt}dispose(){}copy(_,tt){return super.copy(_,tt),this.color.copy(_.color),this.intensity=_.intensity,this}toJSON(_){const tt=super.toJSON(_);return tt.object.color=this.color.getHex(),tt.object.intensity=this.intensity,this.groundColor!==void 0&&(tt.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(tt.object.distance=this.distance),this.angle!==void 0&&(tt.object.angle=this.angle),this.decay!==void 0&&(tt.object.decay=this.decay),this.penumbra!==void 0&&(tt.object.penumbra=this.penumbra),this.shadow!==void 0&&(tt.object.shadow=this.shadow.toJSON()),tt}}class HemisphereLight extends Light{constructor(_,tt,nt){super(_,nt),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color$1(tt)}copy(_,tt){return super.copy(_,tt),this.groundColor.copy(_.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(_){this.camera=_,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(_){const tt=this.camera,nt=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(_.matrixWorld),tt.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(_.target.matrixWorld),tt.lookAt(_lookTarget$1),tt.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),nt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),nt.multiply(_projScreenMatrix$1)}getViewport(_){return this._viewports[_]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(_){return this.camera=_.camera.clone(),this.bias=_.bias,this.radius=_.radius,this.mapSize.copy(_.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const _={};return this.bias!==0&&(_.bias=this.bias),this.normalBias!==0&&(_.normalBias=this.normalBias),this.radius!==1&&(_.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(_.mapSize=this.mapSize.toArray()),_.camera=this.camera.toJSON(!1).object,delete _.camera.matrix,_}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(_){const tt=this.camera,nt=RAD2DEG*2*_.angle*this.focus,rt=this.mapSize.width/this.mapSize.height,it=_.distance||tt.far;(nt!==tt.fov||rt!==tt.aspect||it!==tt.far)&&(tt.fov=nt,tt.aspect=rt,tt.far=it,tt.updateProjectionMatrix()),super.updateMatrices(_)}copy(_){return super.copy(_),this.focus=_.focus,this}}class SpotLight extends Light{constructor(_,tt,nt=0,rt=Math.PI/3,it=0,at=2){super(_,tt),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=nt,this.angle=rt,this.penumbra=it,this.decay=at,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(_){this.intensity=_/Math.PI}dispose(){this.shadow.dispose()}copy(_,tt){return super.copy(_,tt),this.distance=_.distance,this.angle=_.angle,this.penumbra=_.penumbra,this.decay=_.decay,this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(_,tt=0){const nt=this.camera,rt=this.matrix,it=_.distance||nt.far;it!==nt.far&&(nt.far=it,nt.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(_.matrixWorld),nt.position.copy(_lightPositionWorld),_lookTarget.copy(nt.position),_lookTarget.add(this._cubeDirections[tt]),nt.up.copy(this._cubeUps[tt]),nt.lookAt(_lookTarget),nt.updateMatrixWorld(),rt.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(nt.projectionMatrix,nt.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(_,tt,nt=0,rt=2){super(_,tt),this.isPointLight=!0,this.type="PointLight",this.distance=nt,this.decay=rt,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(_){this.intensity=_/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(_,tt){return super.copy(_,tt),this.distance=_.distance,this.decay=_.decay,this.shadow=_.shadow.clone(),this}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(_,tt){super(_,tt),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(_){return super.copy(_),this.target=_.target.clone(),this.shadow=_.shadow.clone(),this}}class AmbientLight extends Light{constructor(_,tt){super(_,tt),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(_,tt,nt=10,rt=10){super(_,tt),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=nt,this.height=rt}get power(){return this.intensity*this.width*this.height*Math.PI}set power(_){this.intensity=_/(this.width*this.height*Math.PI)}copy(_){return super.copy(_),this.width=_.width,this.height=_.height,this}toJSON(_){const tt=super.toJSON(_);return tt.object.width=this.width,tt.object.height=this.height,tt}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let _=0;_<9;_++)this.coefficients.push(new Vector3)}set(_){for(let tt=0;tt<9;tt++)this.coefficients[tt].copy(_[tt]);return this}zero(){for(let _=0;_<9;_++)this.coefficients[_].set(0,0,0);return this}getAt(_,tt){const nt=_.x,rt=_.y,it=_.z,at=this.coefficients;return tt.copy(at[0]).multiplyScalar(.282095),tt.addScaledVector(at[1],.488603*rt),tt.addScaledVector(at[2],.488603*it),tt.addScaledVector(at[3],.488603*nt),tt.addScaledVector(at[4],1.092548*(nt*rt)),tt.addScaledVector(at[5],1.092548*(rt*it)),tt.addScaledVector(at[6],.315392*(3*it*it-1)),tt.addScaledVector(at[7],1.092548*(nt*it)),tt.addScaledVector(at[8],.546274*(nt*nt-rt*rt)),tt}getIrradianceAt(_,tt){const nt=_.x,rt=_.y,it=_.z,at=this.coefficients;return tt.copy(at[0]).multiplyScalar(.886227),tt.addScaledVector(at[1],2*.511664*rt),tt.addScaledVector(at[2],2*.511664*it),tt.addScaledVector(at[3],2*.511664*nt),tt.addScaledVector(at[4],2*.429043*nt*rt),tt.addScaledVector(at[5],2*.429043*rt*it),tt.addScaledVector(at[6],.743125*it*it-.247708),tt.addScaledVector(at[7],2*.429043*nt*it),tt.addScaledVector(at[8],.429043*(nt*nt-rt*rt)),tt}add(_){for(let tt=0;tt<9;tt++)this.coefficients[tt].add(_.coefficients[tt]);return this}addScaledSH(_,tt){for(let nt=0;nt<9;nt++)this.coefficients[nt].addScaledVector(_.coefficients[nt],tt);return this}scale(_){for(let tt=0;tt<9;tt++)this.coefficients[tt].multiplyScalar(_);return this}lerp(_,tt){for(let nt=0;nt<9;nt++)this.coefficients[nt].lerp(_.coefficients[nt],tt);return this}equals(_){for(let tt=0;tt<9;tt++)if(!this.coefficients[tt].equals(_.coefficients[tt]))return!1;return!0}copy(_){return this.set(_.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(_,tt=0){const nt=this.coefficients;for(let rt=0;rt<9;rt++)nt[rt].fromArray(_,tt+rt*3);return this}toArray(_=[],tt=0){const nt=this.coefficients;for(let rt=0;rt<9;rt++)nt[rt].toArray(_,tt+rt*3);return _}static getBasisAt(_,tt){const nt=_.x,rt=_.y,it=_.z;tt[0]=.282095,tt[1]=.488603*rt,tt[2]=.488603*it,tt[3]=.488603*nt,tt[4]=1.092548*nt*rt,tt[5]=1.092548*rt*it,tt[6]=.315392*(3*it*it-1),tt[7]=1.092548*nt*it,tt[8]=.546274*(nt*nt-rt*rt)}}class LightProbe extends Light{constructor(_=new SphericalHarmonics3,tt=1){super(void 0,tt),this.isLightProbe=!0,this.sh=_}copy(_){return super.copy(_),this.sh.copy(_.sh),this}fromJSON(_){return this.intensity=_.intensity,this.sh.fromArray(_.sh),this}toJSON(_){const tt=super.toJSON(_);return tt.object.sh=this.sh.toArray(),tt}}class MaterialLoader extends Loader$1{constructor(_){super(_),this.textures={}}load(_,tt,nt,rt){const it=this,at=new FileLoader(it.manager);at.setPath(it.path),at.setRequestHeader(it.requestHeader),at.setWithCredentials(it.withCredentials),at.load(_,function(ot){try{tt(it.parse(JSON.parse(ot)))}catch(st){rt?rt(st):console.error(st),it.manager.itemError(_)}},nt,rt)}parse(_){const tt=this.textures;function nt(it){return tt[it]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",it),tt[it]}const rt=MaterialLoader.createMaterialFromType(_.type);if(_.uuid!==void 0&&(rt.uuid=_.uuid),_.name!==void 0&&(rt.name=_.name),_.color!==void 0&&rt.color!==void 0&&rt.color.setHex(_.color),_.roughness!==void 0&&(rt.roughness=_.roughness),_.metalness!==void 0&&(rt.metalness=_.metalness),_.sheen!==void 0&&(rt.sheen=_.sheen),_.sheenColor!==void 0&&(rt.sheenColor=new Color$1().setHex(_.sheenColor)),_.sheenRoughness!==void 0&&(rt.sheenRoughness=_.sheenRoughness),_.emissive!==void 0&&rt.emissive!==void 0&&rt.emissive.setHex(_.emissive),_.specular!==void 0&&rt.specular!==void 0&&rt.specular.setHex(_.specular),_.specularIntensity!==void 0&&(rt.specularIntensity=_.specularIntensity),_.specularColor!==void 0&&rt.specularColor!==void 0&&rt.specularColor.setHex(_.specularColor),_.shininess!==void 0&&(rt.shininess=_.shininess),_.clearcoat!==void 0&&(rt.clearcoat=_.clearcoat),_.clearcoatRoughness!==void 0&&(rt.clearcoatRoughness=_.clearcoatRoughness),_.iridescence!==void 0&&(rt.iridescence=_.iridescence),_.iridescenceIOR!==void 0&&(rt.iridescenceIOR=_.iridescenceIOR),_.iridescenceThicknessRange!==void 0&&(rt.iridescenceThicknessRange=_.iridescenceThicknessRange),_.transmission!==void 0&&(rt.transmission=_.transmission),_.thickness!==void 0&&(rt.thickness=_.thickness),_.attenuationDistance!==void 0&&(rt.attenuationDistance=_.attenuationDistance),_.attenuationColor!==void 0&&rt.attenuationColor!==void 0&&rt.attenuationColor.setHex(_.attenuationColor),_.anisotropy!==void 0&&(rt.anisotropy=_.anisotropy),_.anisotropyRotation!==void 0&&(rt.anisotropyRotation=_.anisotropyRotation),_.fog!==void 0&&(rt.fog=_.fog),_.flatShading!==void 0&&(rt.flatShading=_.flatShading),_.blending!==void 0&&(rt.blending=_.blending),_.combine!==void 0&&(rt.combine=_.combine),_.side!==void 0&&(rt.side=_.side),_.shadowSide!==void 0&&(rt.shadowSide=_.shadowSide),_.opacity!==void 0&&(rt.opacity=_.opacity),_.transparent!==void 0&&(rt.transparent=_.transparent),_.alphaTest!==void 0&&(rt.alphaTest=_.alphaTest),_.alphaHash!==void 0&&(rt.alphaHash=_.alphaHash),_.depthTest!==void 0&&(rt.depthTest=_.depthTest),_.depthWrite!==void 0&&(rt.depthWrite=_.depthWrite),_.colorWrite!==void 0&&(rt.colorWrite=_.colorWrite),_.stencilWrite!==void 0&&(rt.stencilWrite=_.stencilWrite),_.stencilWriteMask!==void 0&&(rt.stencilWriteMask=_.stencilWriteMask),_.stencilFunc!==void 0&&(rt.stencilFunc=_.stencilFunc),_.stencilRef!==void 0&&(rt.stencilRef=_.stencilRef),_.stencilFuncMask!==void 0&&(rt.stencilFuncMask=_.stencilFuncMask),_.stencilFail!==void 0&&(rt.stencilFail=_.stencilFail),_.stencilZFail!==void 0&&(rt.stencilZFail=_.stencilZFail),_.stencilZPass!==void 0&&(rt.stencilZPass=_.stencilZPass),_.wireframe!==void 0&&(rt.wireframe=_.wireframe),_.wireframeLinewidth!==void 0&&(rt.wireframeLinewidth=_.wireframeLinewidth),_.wireframeLinecap!==void 0&&(rt.wireframeLinecap=_.wireframeLinecap),_.wireframeLinejoin!==void 0&&(rt.wireframeLinejoin=_.wireframeLinejoin),_.rotation!==void 0&&(rt.rotation=_.rotation),_.linewidth!==1&&(rt.linewidth=_.linewidth),_.dashSize!==void 0&&(rt.dashSize=_.dashSize),_.gapSize!==void 0&&(rt.gapSize=_.gapSize),_.scale!==void 0&&(rt.scale=_.scale),_.polygonOffset!==void 0&&(rt.polygonOffset=_.polygonOffset),_.polygonOffsetFactor!==void 0&&(rt.polygonOffsetFactor=_.polygonOffsetFactor),_.polygonOffsetUnits!==void 0&&(rt.polygonOffsetUnits=_.polygonOffsetUnits),_.dithering!==void 0&&(rt.dithering=_.dithering),_.alphaToCoverage!==void 0&&(rt.alphaToCoverage=_.alphaToCoverage),_.premultipliedAlpha!==void 0&&(rt.premultipliedAlpha=_.premultipliedAlpha),_.forceSinglePass!==void 0&&(rt.forceSinglePass=_.forceSinglePass),_.visible!==void 0&&(rt.visible=_.visible),_.toneMapped!==void 0&&(rt.toneMapped=_.toneMapped),_.userData!==void 0&&(rt.userData=_.userData),_.vertexColors!==void 0&&(typeof _.vertexColors=="number"?rt.vertexColors=_.vertexColors>0:rt.vertexColors=_.vertexColors),_.uniforms!==void 0)for(const it in _.uniforms){const at=_.uniforms[it];switch(rt.uniforms[it]={},at.type){case"t":rt.uniforms[it].value=nt(at.value);break;case"c":rt.uniforms[it].value=new Color$1().setHex(at.value);break;case"v2":rt.uniforms[it].value=new Vector2().fromArray(at.value);break;case"v3":rt.uniforms[it].value=new Vector3().fromArray(at.value);break;case"v4":rt.uniforms[it].value=new Vector4().fromArray(at.value);break;case"m3":rt.uniforms[it].value=new Matrix3().fromArray(at.value);break;case"m4":rt.uniforms[it].value=new Matrix4().fromArray(at.value);break;default:rt.uniforms[it].value=at.value}}if(_.defines!==void 0&&(rt.defines=_.defines),_.vertexShader!==void 0&&(rt.vertexShader=_.vertexShader),_.fragmentShader!==void 0&&(rt.fragmentShader=_.fragmentShader),_.glslVersion!==void 0&&(rt.glslVersion=_.glslVersion),_.extensions!==void 0)for(const it in _.extensions)rt.extensions[it]=_.extensions[it];if(_.lights!==void 0&&(rt.lights=_.lights),_.clipping!==void 0&&(rt.clipping=_.clipping),_.size!==void 0&&(rt.size=_.size),_.sizeAttenuation!==void 0&&(rt.sizeAttenuation=_.sizeAttenuation),_.map!==void 0&&(rt.map=nt(_.map)),_.matcap!==void 0&&(rt.matcap=nt(_.matcap)),_.alphaMap!==void 0&&(rt.alphaMap=nt(_.alphaMap)),_.bumpMap!==void 0&&(rt.bumpMap=nt(_.bumpMap)),_.bumpScale!==void 0&&(rt.bumpScale=_.bumpScale),_.normalMap!==void 0&&(rt.normalMap=nt(_.normalMap)),_.normalMapType!==void 0&&(rt.normalMapType=_.normalMapType),_.normalScale!==void 0){let it=_.normalScale;Array.isArray(it)===!1&&(it=[it,it]),rt.normalScale=new Vector2().fromArray(it)}return _.displacementMap!==void 0&&(rt.displacementMap=nt(_.displacementMap)),_.displacementScale!==void 0&&(rt.displacementScale=_.displacementScale),_.displacementBias!==void 0&&(rt.displacementBias=_.displacementBias),_.roughnessMap!==void 0&&(rt.roughnessMap=nt(_.roughnessMap)),_.metalnessMap!==void 0&&(rt.metalnessMap=nt(_.metalnessMap)),_.emissiveMap!==void 0&&(rt.emissiveMap=nt(_.emissiveMap)),_.emissiveIntensity!==void 0&&(rt.emissiveIntensity=_.emissiveIntensity),_.specularMap!==void 0&&(rt.specularMap=nt(_.specularMap)),_.specularIntensityMap!==void 0&&(rt.specularIntensityMap=nt(_.specularIntensityMap)),_.specularColorMap!==void 0&&(rt.specularColorMap=nt(_.specularColorMap)),_.envMap!==void 0&&(rt.envMap=nt(_.envMap)),_.envMapIntensity!==void 0&&(rt.envMapIntensity=_.envMapIntensity),_.reflectivity!==void 0&&(rt.reflectivity=_.reflectivity),_.refractionRatio!==void 0&&(rt.refractionRatio=_.refractionRatio),_.lightMap!==void 0&&(rt.lightMap=nt(_.lightMap)),_.lightMapIntensity!==void 0&&(rt.lightMapIntensity=_.lightMapIntensity),_.aoMap!==void 0&&(rt.aoMap=nt(_.aoMap)),_.aoMapIntensity!==void 0&&(rt.aoMapIntensity=_.aoMapIntensity),_.gradientMap!==void 0&&(rt.gradientMap=nt(_.gradientMap)),_.clearcoatMap!==void 0&&(rt.clearcoatMap=nt(_.clearcoatMap)),_.clearcoatRoughnessMap!==void 0&&(rt.clearcoatRoughnessMap=nt(_.clearcoatRoughnessMap)),_.clearcoatNormalMap!==void 0&&(rt.clearcoatNormalMap=nt(_.clearcoatNormalMap)),_.clearcoatNormalScale!==void 0&&(rt.clearcoatNormalScale=new Vector2().fromArray(_.clearcoatNormalScale)),_.iridescenceMap!==void 0&&(rt.iridescenceMap=nt(_.iridescenceMap)),_.iridescenceThicknessMap!==void 0&&(rt.iridescenceThicknessMap=nt(_.iridescenceThicknessMap)),_.transmissionMap!==void 0&&(rt.transmissionMap=nt(_.transmissionMap)),_.thicknessMap!==void 0&&(rt.thicknessMap=nt(_.thicknessMap)),_.anisotropyMap!==void 0&&(rt.anisotropyMap=nt(_.anisotropyMap)),_.sheenColorMap!==void 0&&(rt.sheenColorMap=nt(_.sheenColorMap)),_.sheenRoughnessMap!==void 0&&(rt.sheenRoughnessMap=nt(_.sheenRoughnessMap)),rt}setTextures(_){return this.textures=_,this}static createMaterialFromType(_){const tt={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new tt[_]}}class LoaderUtils{static decodeText(_){if(typeof TextDecoder<"u")return new TextDecoder().decode(_);let tt="";for(let nt=0,rt=_.length;nt<rt;nt++)tt+=String.fromCharCode(_[nt]);try{return decodeURIComponent(escape(tt))}catch{return tt}}static extractUrlBase(_){const tt=_.lastIndexOf("/");return tt===-1?"./":_.slice(0,tt+1)}static resolveURL(_,tt){return typeof _!="string"||_===""?"":(/^https?:\/\//i.test(tt)&&/^\//.test(_)&&(tt=tt.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(_)||/^data:.*,.*$/i.test(_)||/^blob:.*$/i.test(_)?_:tt+_)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(_){return super.copy(_),this.instanceCount=_.instanceCount,this}toJSON(){const _=super.toJSON();return _.instanceCount=this.instanceCount,_.isInstancedBufferGeometry=!0,_}}class BufferGeometryLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,at=new FileLoader(it.manager);at.setPath(it.path),at.setRequestHeader(it.requestHeader),at.setWithCredentials(it.withCredentials),at.load(_,function(ot){try{tt(it.parse(JSON.parse(ot)))}catch(st){rt?rt(st):console.error(st),it.manager.itemError(_)}},nt,rt)}parse(_){const tt={},nt={};function rt(pt,gt){if(tt[gt]!==void 0)return tt[gt];const yt=pt.interleavedBuffers[gt],mt=it(pt,yt.buffer),At=getTypedArray(yt.type,mt),vt=new InterleavedBuffer(At,yt.stride);return vt.uuid=yt.uuid,tt[gt]=vt,vt}function it(pt,gt){if(nt[gt]!==void 0)return nt[gt];const yt=pt.arrayBuffers[gt],mt=new Uint32Array(yt).buffer;return nt[gt]=mt,mt}const at=_.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,ot=_.data.index;if(ot!==void 0){const pt=getTypedArray(ot.type,ot.array);at.setIndex(new BufferAttribute(pt,1))}const st=_.data.attributes;for(const pt in st){const gt=st[pt];let xt;if(gt.isInterleavedBufferAttribute){const yt=rt(_.data,gt.data);xt=new InterleavedBufferAttribute(yt,gt.itemSize,gt.offset,gt.normalized)}else{const yt=getTypedArray(gt.type,gt.array),mt=gt.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;xt=new mt(yt,gt.itemSize,gt.normalized)}gt.name!==void 0&&(xt.name=gt.name),gt.usage!==void 0&&xt.setUsage(gt.usage),gt.updateRange!==void 0&&(xt.updateRange.offset=gt.updateRange.offset,xt.updateRange.count=gt.updateRange.count),at.setAttribute(pt,xt)}const lt=_.data.morphAttributes;if(lt)for(const pt in lt){const gt=lt[pt],xt=[];for(let yt=0,mt=gt.length;yt<mt;yt++){const At=gt[yt];let vt;if(At.isInterleavedBufferAttribute){const Et=rt(_.data,At.data);vt=new InterleavedBufferAttribute(Et,At.itemSize,At.offset,At.normalized)}else{const Et=getTypedArray(At.type,At.array);vt=new BufferAttribute(Et,At.itemSize,At.normalized)}At.name!==void 0&&(vt.name=At.name),xt.push(vt)}at.morphAttributes[pt]=xt}_.data.morphTargetsRelative&&(at.morphTargetsRelative=!0);const ut=_.data.groups||_.data.drawcalls||_.data.offsets;if(ut!==void 0)for(let pt=0,gt=ut.length;pt!==gt;++pt){const xt=ut[pt];at.addGroup(xt.start,xt.count,xt.materialIndex)}const ft=_.data.boundingSphere;if(ft!==void 0){const pt=new Vector3;ft.center!==void 0&&pt.fromArray(ft.center),at.boundingSphere=new Sphere(pt,ft.radius)}return _.name&&(at.name=_.name),_.userData&&(at.userData=_.userData),at}}class ObjectLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,at=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||at;const ot=new FileLoader(this.manager);ot.setPath(this.path),ot.setRequestHeader(this.requestHeader),ot.setWithCredentials(this.withCredentials),ot.load(_,function(st){let lt=null;try{lt=JSON.parse(st)}catch(ut){rt!==void 0&&rt(ut),console.error("THREE:ObjectLoader: Can't parse "+_+".",ut.message);return}const ct=lt.metadata;if(ct===void 0||ct.type===void 0||ct.type.toLowerCase()==="geometry"){rt!==void 0&&rt(new Error("THREE.ObjectLoader: Can't load "+_)),console.error("THREE.ObjectLoader: Can't load "+_);return}it.parse(lt,tt)},nt,rt)}async loadAsync(_,tt){const nt=this,rt=this.path===""?LoaderUtils.extractUrlBase(_):this.path;this.resourcePath=this.resourcePath||rt;const it=new FileLoader(this.manager);it.setPath(this.path),it.setRequestHeader(this.requestHeader),it.setWithCredentials(this.withCredentials);const at=await it.loadAsync(_,tt),ot=JSON.parse(at),st=ot.metadata;if(st===void 0||st.type===void 0||st.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+_);return await nt.parseAsync(ot)}parse(_,tt){const nt=this.parseAnimations(_.animations),rt=this.parseShapes(_.shapes),it=this.parseGeometries(_.geometries,rt),at=this.parseImages(_.images,function(){tt!==void 0&&tt(lt)}),ot=this.parseTextures(_.textures,at),st=this.parseMaterials(_.materials,ot),lt=this.parseObject(_.object,it,st,ot,nt),ct=this.parseSkeletons(_.skeletons,lt);if(this.bindSkeletons(lt,ct),tt!==void 0){let ut=!1;for(const ft in at)if(at[ft].data instanceof HTMLImageElement){ut=!0;break}ut===!1&&tt(lt)}return lt}async parseAsync(_){const tt=this.parseAnimations(_.animations),nt=this.parseShapes(_.shapes),rt=this.parseGeometries(_.geometries,nt),it=await this.parseImagesAsync(_.images),at=this.parseTextures(_.textures,it),ot=this.parseMaterials(_.materials,at),st=this.parseObject(_.object,rt,ot,at,tt),lt=this.parseSkeletons(_.skeletons,st);return this.bindSkeletons(st,lt),st}parseShapes(_){const tt={};if(_!==void 0)for(let nt=0,rt=_.length;nt<rt;nt++){const it=new Shape().fromJSON(_[nt]);tt[it.uuid]=it}return tt}parseSkeletons(_,tt){const nt={},rt={};if(tt.traverse(function(it){it.isBone&&(rt[it.uuid]=it)}),_!==void 0)for(let it=0,at=_.length;it<at;it++){const ot=new Skeleton().fromJSON(_[it],rt);nt[ot.uuid]=ot}return nt}parseGeometries(_,tt){const nt={};if(_!==void 0){const rt=new BufferGeometryLoader;for(let it=0,at=_.length;it<at;it++){let ot;const st=_[it];switch(st.type){case"BufferGeometry":case"InstancedBufferGeometry":ot=rt.parse(st);break;default:st.type in Geometries?ot=Geometries[st.type].fromJSON(st,tt):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${st.type}"`)}ot.uuid=st.uuid,st.name!==void 0&&(ot.name=st.name),st.userData!==void 0&&(ot.userData=st.userData),nt[st.uuid]=ot}}return nt}parseMaterials(_,tt){const nt={},rt={};if(_!==void 0){const it=new MaterialLoader;it.setTextures(tt);for(let at=0,ot=_.length;at<ot;at++){const st=_[at];nt[st.uuid]===void 0&&(nt[st.uuid]=it.parse(st)),rt[st.uuid]=nt[st.uuid]}}return rt}parseAnimations(_){const tt={};if(_!==void 0)for(let nt=0;nt<_.length;nt++){const rt=_[nt],it=AnimationClip.parse(rt);tt[it.uuid]=it}return tt}parseImages(_,tt){const nt=this,rt={};let it;function at(st){return nt.manager.itemStart(st),it.load(st,function(){nt.manager.itemEnd(st)},void 0,function(){nt.manager.itemError(st),nt.manager.itemEnd(st)})}function ot(st){if(typeof st=="string"){const lt=st,ct=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(lt)?lt:nt.resourcePath+lt;return at(ct)}else return st.data?{data:getTypedArray(st.type,st.data),width:st.width,height:st.height}:null}if(_!==void 0&&_.length>0){const st=new LoadingManager(tt);it=new ImageLoader(st),it.setCrossOrigin(this.crossOrigin);for(let lt=0,ct=_.length;lt<ct;lt++){const ut=_[lt],ft=ut.url;if(Array.isArray(ft)){const pt=[];for(let gt=0,xt=ft.length;gt<xt;gt++){const yt=ft[gt],mt=ot(yt);mt!==null&&(mt instanceof HTMLImageElement?pt.push(mt):pt.push(new DataTexture(mt.data,mt.width,mt.height)))}rt[ut.uuid]=new Source(pt)}else{const pt=ot(ut.url);rt[ut.uuid]=new Source(pt)}}}return rt}async parseImagesAsync(_){const tt=this,nt={};let rt;async function it(at){if(typeof at=="string"){const ot=at,st=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ot)?ot:tt.resourcePath+ot;return await rt.loadAsync(st)}else return at.data?{data:getTypedArray(at.type,at.data),width:at.width,height:at.height}:null}if(_!==void 0&&_.length>0){rt=new ImageLoader(this.manager),rt.setCrossOrigin(this.crossOrigin);for(let at=0,ot=_.length;at<ot;at++){const st=_[at],lt=st.url;if(Array.isArray(lt)){const ct=[];for(let ut=0,ft=lt.length;ut<ft;ut++){const pt=lt[ut],gt=await it(pt);gt!==null&&(gt instanceof HTMLImageElement?ct.push(gt):ct.push(new DataTexture(gt.data,gt.width,gt.height)))}nt[st.uuid]=new Source(ct)}else{const ct=await it(st.url);nt[st.uuid]=new Source(ct)}}}return nt}parseTextures(_,tt){function nt(it,at){return typeof it=="number"?it:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",it),at[it])}const rt={};if(_!==void 0)for(let it=0,at=_.length;it<at;it++){const ot=_[it];ot.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',ot.uuid),tt[ot.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",ot.image);const st=tt[ot.image],lt=st.data;let ct;Array.isArray(lt)?(ct=new CubeTexture,lt.length===6&&(ct.needsUpdate=!0)):(lt&&lt.data?ct=new DataTexture:ct=new Texture,lt&&(ct.needsUpdate=!0)),ct.source=st,ct.uuid=ot.uuid,ot.name!==void 0&&(ct.name=ot.name),ot.mapping!==void 0&&(ct.mapping=nt(ot.mapping,TEXTURE_MAPPING)),ot.channel!==void 0&&(ct.channel=ot.channel),ot.offset!==void 0&&ct.offset.fromArray(ot.offset),ot.repeat!==void 0&&ct.repeat.fromArray(ot.repeat),ot.center!==void 0&&ct.center.fromArray(ot.center),ot.rotation!==void 0&&(ct.rotation=ot.rotation),ot.wrap!==void 0&&(ct.wrapS=nt(ot.wrap[0],TEXTURE_WRAPPING),ct.wrapT=nt(ot.wrap[1],TEXTURE_WRAPPING)),ot.format!==void 0&&(ct.format=ot.format),ot.internalFormat!==void 0&&(ct.internalFormat=ot.internalFormat),ot.type!==void 0&&(ct.type=ot.type),ot.colorSpace!==void 0&&(ct.colorSpace=ot.colorSpace),ot.encoding!==void 0&&(ct.encoding=ot.encoding),ot.minFilter!==void 0&&(ct.minFilter=nt(ot.minFilter,TEXTURE_FILTER)),ot.magFilter!==void 0&&(ct.magFilter=nt(ot.magFilter,TEXTURE_FILTER)),ot.anisotropy!==void 0&&(ct.anisotropy=ot.anisotropy),ot.flipY!==void 0&&(ct.flipY=ot.flipY),ot.generateMipmaps!==void 0&&(ct.generateMipmaps=ot.generateMipmaps),ot.premultiplyAlpha!==void 0&&(ct.premultiplyAlpha=ot.premultiplyAlpha),ot.unpackAlignment!==void 0&&(ct.unpackAlignment=ot.unpackAlignment),ot.compareFunction!==void 0&&(ct.compareFunction=ot.compareFunction),ot.userData!==void 0&&(ct.userData=ot.userData),rt[ot.uuid]=ct}return rt}parseObject(_,tt,nt,rt,it){let at;function ot(ft){return tt[ft]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",ft),tt[ft]}function st(ft){if(ft!==void 0){if(Array.isArray(ft)){const pt=[];for(let gt=0,xt=ft.length;gt<xt;gt++){const yt=ft[gt];nt[yt]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",yt),pt.push(nt[yt])}return pt}return nt[ft]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",ft),nt[ft]}}function lt(ft){return rt[ft]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",ft),rt[ft]}let ct,ut;switch(_.type){case"Scene":at=new Scene,_.background!==void 0&&(Number.isInteger(_.background)?at.background=new Color$1(_.background):at.background=lt(_.background)),_.environment!==void 0&&(at.environment=lt(_.environment)),_.fog!==void 0&&(_.fog.type==="Fog"?at.fog=new Fog(_.fog.color,_.fog.near,_.fog.far):_.fog.type==="FogExp2"&&(at.fog=new FogExp2(_.fog.color,_.fog.density))),_.backgroundBlurriness!==void 0&&(at.backgroundBlurriness=_.backgroundBlurriness),_.backgroundIntensity!==void 0&&(at.backgroundIntensity=_.backgroundIntensity);break;case"PerspectiveCamera":at=new PerspectiveCamera(_.fov,_.aspect,_.near,_.far),_.focus!==void 0&&(at.focus=_.focus),_.zoom!==void 0&&(at.zoom=_.zoom),_.filmGauge!==void 0&&(at.filmGauge=_.filmGauge),_.filmOffset!==void 0&&(at.filmOffset=_.filmOffset),_.view!==void 0&&(at.view=Object.assign({},_.view));break;case"OrthographicCamera":at=new OrthographicCamera(_.left,_.right,_.top,_.bottom,_.near,_.far),_.zoom!==void 0&&(at.zoom=_.zoom),_.view!==void 0&&(at.view=Object.assign({},_.view));break;case"AmbientLight":at=new AmbientLight(_.color,_.intensity);break;case"DirectionalLight":at=new DirectionalLight(_.color,_.intensity);break;case"PointLight":at=new PointLight(_.color,_.intensity,_.distance,_.decay);break;case"RectAreaLight":at=new RectAreaLight(_.color,_.intensity,_.width,_.height);break;case"SpotLight":at=new SpotLight(_.color,_.intensity,_.distance,_.angle,_.penumbra,_.decay);break;case"HemisphereLight":at=new HemisphereLight(_.color,_.groundColor,_.intensity);break;case"LightProbe":at=new LightProbe().fromJSON(_);break;case"SkinnedMesh":ct=ot(_.geometry),ut=st(_.material),at=new SkinnedMesh(ct,ut),_.bindMode!==void 0&&(at.bindMode=_.bindMode),_.bindMatrix!==void 0&&at.bindMatrix.fromArray(_.bindMatrix),_.skeleton!==void 0&&(at.skeleton=_.skeleton);break;case"Mesh":ct=ot(_.geometry),ut=st(_.material),at=new Mesh(ct,ut);break;case"InstancedMesh":ct=ot(_.geometry),ut=st(_.material);const ft=_.count,pt=_.instanceMatrix,gt=_.instanceColor;at=new InstancedMesh(ct,ut,ft),at.instanceMatrix=new InstancedBufferAttribute(new Float32Array(pt.array),16),gt!==void 0&&(at.instanceColor=new InstancedBufferAttribute(new Float32Array(gt.array),gt.itemSize));break;case"LOD":at=new LOD;break;case"Line":at=new Line(ot(_.geometry),st(_.material));break;case"LineLoop":at=new LineLoop(ot(_.geometry),st(_.material));break;case"LineSegments":at=new LineSegments(ot(_.geometry),st(_.material));break;case"PointCloud":case"Points":at=new Points(ot(_.geometry),st(_.material));break;case"Sprite":at=new Sprite(st(_.material));break;case"Group":at=new Group;break;case"Bone":at=new Bone;break;default:at=new Object3D}if(at.uuid=_.uuid,_.name!==void 0&&(at.name=_.name),_.matrix!==void 0?(at.matrix.fromArray(_.matrix),_.matrixAutoUpdate!==void 0&&(at.matrixAutoUpdate=_.matrixAutoUpdate),at.matrixAutoUpdate&&at.matrix.decompose(at.position,at.quaternion,at.scale)):(_.position!==void 0&&at.position.fromArray(_.position),_.rotation!==void 0&&at.rotation.fromArray(_.rotation),_.quaternion!==void 0&&at.quaternion.fromArray(_.quaternion),_.scale!==void 0&&at.scale.fromArray(_.scale)),_.up!==void 0&&at.up.fromArray(_.up),_.castShadow!==void 0&&(at.castShadow=_.castShadow),_.receiveShadow!==void 0&&(at.receiveShadow=_.receiveShadow),_.shadow&&(_.shadow.bias!==void 0&&(at.shadow.bias=_.shadow.bias),_.shadow.normalBias!==void 0&&(at.shadow.normalBias=_.shadow.normalBias),_.shadow.radius!==void 0&&(at.shadow.radius=_.shadow.radius),_.shadow.mapSize!==void 0&&at.shadow.mapSize.fromArray(_.shadow.mapSize),_.shadow.camera!==void 0&&(at.shadow.camera=this.parseObject(_.shadow.camera))),_.visible!==void 0&&(at.visible=_.visible),_.frustumCulled!==void 0&&(at.frustumCulled=_.frustumCulled),_.renderOrder!==void 0&&(at.renderOrder=_.renderOrder),_.userData!==void 0&&(at.userData=_.userData),_.layers!==void 0&&(at.layers.mask=_.layers),_.children!==void 0){const ft=_.children;for(let pt=0;pt<ft.length;pt++)at.add(this.parseObject(ft[pt],tt,nt,rt,it))}if(_.animations!==void 0){const ft=_.animations;for(let pt=0;pt<ft.length;pt++){const gt=ft[pt];at.animations.push(it[gt])}}if(_.type==="LOD"){_.autoUpdate!==void 0&&(at.autoUpdate=_.autoUpdate);const ft=_.levels;for(let pt=0;pt<ft.length;pt++){const gt=ft[pt],xt=at.getObjectByProperty("uuid",gt.object);xt!==void 0&&at.addLevel(xt,gt.distance,gt.hysteresis)}}return at}bindSkeletons(_,tt){Object.keys(tt).length!==0&&_.traverse(function(nt){if(nt.isSkinnedMesh===!0&&nt.skeleton!==void 0){const rt=tt[nt.skeleton];rt===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",nt.skeleton):nt.bind(rt,nt.bindMatrix)}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader$1{constructor(_){super(_),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(_){return this.options=_,this}load(_,tt,nt,rt){_===void 0&&(_=""),this.path!==void 0&&(_=this.path+_),_=this.manager.resolveURL(_);const it=this,at=Cache.get(_);if(at!==void 0)return it.manager.itemStart(_),setTimeout(function(){tt&&tt(at),it.manager.itemEnd(_)},0),at;const ot={};ot.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",ot.headers=this.requestHeader,fetch(_,ot).then(function(st){return st.blob()}).then(function(st){return createImageBitmap(st,Object.assign(it.options,{colorSpaceConversion:"none"}))}).then(function(st){Cache.add(_,st),tt&&tt(st),it.manager.itemEnd(_)}).catch(function(st){rt&&rt(st),it.manager.itemError(_),it.manager.itemEnd(_)}),it.manager.itemStart(_)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(_){_context=_}}class AudioLoader extends Loader$1{constructor(_){super(_)}load(_,tt,nt,rt){const it=this,at=new FileLoader(this.manager);at.setResponseType("arraybuffer"),at.setPath(this.path),at.setRequestHeader(this.requestHeader),at.setWithCredentials(this.withCredentials),at.load(_,function(st){try{const lt=st.slice(0);AudioContext.getContext().decodeAudioData(lt,function(ut){tt(ut)},ot)}catch(lt){ot(lt)}},nt,rt);function ot(st){rt?rt(st):console.error(st),it.manager.itemError(_)}}}class HemisphereLightProbe extends LightProbe{constructor(_,tt,nt=1){super(void 0,nt),this.isHemisphereLightProbe=!0;const rt=new Color$1().set(_),it=new Color$1().set(tt),at=new Vector3(rt.r,rt.g,rt.b),ot=new Vector3(it.r,it.g,it.b),st=Math.sqrt(Math.PI),lt=st*Math.sqrt(.75);this.sh.coefficients[0].copy(at).add(ot).multiplyScalar(st),this.sh.coefficients[1].copy(at).sub(ot).multiplyScalar(lt)}}class AmbientLightProbe extends LightProbe{constructor(_,tt=1){super(void 0,tt),this.isAmbientLightProbe=!0;const nt=new Color$1().set(_);this.sh.coefficients[0].set(nt.r,nt.g,nt.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(_){const tt=this._cache;if(tt.focus!==_.focus||tt.fov!==_.fov||tt.aspect!==_.aspect*this.aspect||tt.near!==_.near||tt.far!==_.far||tt.zoom!==_.zoom||tt.eyeSep!==this.eyeSep){tt.focus=_.focus,tt.fov=_.fov,tt.aspect=_.aspect*this.aspect,tt.near=_.near,tt.far=_.far,tt.zoom=_.zoom,tt.eyeSep=this.eyeSep,_projectionMatrix.copy(_.projectionMatrix);const rt=tt.eyeSep/2,it=rt*tt.near/tt.focus,at=tt.near*Math.tan(DEG2RAD*tt.fov*.5)/tt.zoom;let ot,st;_eyeLeft.elements[12]=-rt,_eyeRight.elements[12]=rt,ot=-at*tt.aspect+it,st=at*tt.aspect+it,_projectionMatrix.elements[0]=2*tt.near/(st-ot),_projectionMatrix.elements[8]=(st+ot)/(st-ot),this.cameraL.projectionMatrix.copy(_projectionMatrix),ot=-at*tt.aspect-it,st=at*tt.aspect-it,_projectionMatrix.elements[0]=2*tt.near/(st-ot),_projectionMatrix.elements[8]=(st+ot)/(st-ot),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(_.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(_.matrixWorld).multiply(_eyeRight)}}class Clock{constructor(_=!0){this.autoStart=_,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now$2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let _=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const tt=now$2();_=(tt-this.oldTime)/1e3,this.oldTime=tt,this.elapsedTime+=_}return _}}function now$2(){return(typeof performance>"u"?Date:performance).now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(_){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=_,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}updateMatrixWorld(_){super.updateMatrixWorld(_);const tt=this.context.listener,nt=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),tt.positionX){const rt=this.context.currentTime+this.timeDelta;tt.positionX.linearRampToValueAtTime(_position$1.x,rt),tt.positionY.linearRampToValueAtTime(_position$1.y,rt),tt.positionZ.linearRampToValueAtTime(_position$1.z,rt),tt.forwardX.linearRampToValueAtTime(_orientation$1.x,rt),tt.forwardY.linearRampToValueAtTime(_orientation$1.y,rt),tt.forwardZ.linearRampToValueAtTime(_orientation$1.z,rt),tt.upX.linearRampToValueAtTime(nt.x,rt),tt.upY.linearRampToValueAtTime(nt.y,rt),tt.upZ.linearRampToValueAtTime(nt.z,rt)}else tt.setPosition(_position$1.x,_position$1.y,_position$1.z),tt.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,nt.x,nt.y,nt.z)}}class Audio extends Object3D{constructor(_){super(),this.type="Audio",this.listener=_,this.context=_.context,this.gain=this.context.createGain(),this.gain.connect(_.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(_){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=_,this.connect(),this}setMediaElementSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(_),this.connect(),this}setMediaStreamSource(_){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(_),this.connect(),this}setBuffer(_){return this.buffer=_,this.sourceType="buffer",this.autoplay&&this.play(),this}play(_=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+_;const tt=this.context.createBufferSource();return tt.buffer=this.buffer,tt.loop=this.loop,tt.loopStart=this.loopStart,tt.loopEnd=this.loopEnd,tt.onended=this.onEnded.bind(this),tt.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=tt,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let _=1,tt=this.filters.length;_<tt;_++)this.filters[_-1].connect(this.filters[_]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let _=1,tt=this.filters.length;_<tt;_++)this.filters[_-1].disconnect(this.filters[_]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(_){return _||(_=[]),this._connected===!0?(this.disconnect(),this.filters=_.slice(),this.connect()):this.filters=_.slice(),this}setDetune(_){if(this.detune=_,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(_){return this.setFilters(_?[_]:[])}setPlaybackRate(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=_,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(_){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=_,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(_){return this.loopStart=_,this}setLoopEnd(_){return this.loopEnd=_,this}getVolume(){return this.gain.gain.value}setVolume(_){return this.gain.gain.setTargetAtTime(_,this.context.currentTime,.01),this}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(_){super(_),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(_){return this.panner.refDistance=_,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(_){return this.panner.rolloffFactor=_,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(_){return this.panner.distanceModel=_,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(_){return this.panner.maxDistance=_,this}setDirectionalCone(_,tt,nt){return this.panner.coneInnerAngle=_,this.panner.coneOuterAngle=tt,this.panner.coneOuterGain=nt,this}updateMatrixWorld(_){if(super.updateMatrixWorld(_),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const tt=this.panner;if(tt.positionX){const nt=this.context.currentTime+this.listener.timeDelta;tt.positionX.linearRampToValueAtTime(_position.x,nt),tt.positionY.linearRampToValueAtTime(_position.y,nt),tt.positionZ.linearRampToValueAtTime(_position.z,nt),tt.orientationX.linearRampToValueAtTime(_orientation.x,nt),tt.orientationY.linearRampToValueAtTime(_orientation.y,nt),tt.orientationZ.linearRampToValueAtTime(_orientation.z,nt)}else tt.setPosition(_position.x,_position.y,_position.z),tt.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(_,tt=2048){this.analyser=_.context.createAnalyser(),this.analyser.fftSize=tt,this.data=new Uint8Array(this.analyser.frequencyBinCount),_.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let _=0;const tt=this.getFrequencyData();for(let nt=0;nt<tt.length;nt++)_+=tt[nt];return _/tt.length}}class PropertyMixer{constructor(_,tt,nt){this.binding=_,this.valueSize=nt;let rt,it,at;switch(tt){case"quaternion":rt=this._slerp,it=this._slerpAdditive,at=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(nt*6),this._workIndex=5;break;case"string":case"bool":rt=this._select,it=this._select,at=this._setAdditiveIdentityOther,this.buffer=new Array(nt*5);break;default:rt=this._lerp,it=this._lerpAdditive,at=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(nt*5)}this._mixBufferRegion=rt,this._mixBufferRegionAdditive=it,this._setIdentity=at,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(_,tt){const nt=this.buffer,rt=this.valueSize,it=_*rt+rt;let at=this.cumulativeWeight;if(at===0){for(let ot=0;ot!==rt;++ot)nt[it+ot]=nt[ot];at=tt}else{at+=tt;const ot=tt/at;this._mixBufferRegion(nt,it,0,ot,rt)}this.cumulativeWeight=at}accumulateAdditive(_){const tt=this.buffer,nt=this.valueSize,rt=nt*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(tt,rt,0,_,nt),this.cumulativeWeightAdditive+=_}apply(_){const tt=this.valueSize,nt=this.buffer,rt=_*tt+tt,it=this.cumulativeWeight,at=this.cumulativeWeightAdditive,ot=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,it<1){const st=tt*this._origIndex;this._mixBufferRegion(nt,rt,st,1-it,tt)}at>0&&this._mixBufferRegionAdditive(nt,rt,this._addIndex*tt,1,tt);for(let st=tt,lt=tt+tt;st!==lt;++st)if(nt[st]!==nt[st+tt]){ot.setValue(nt,rt);break}}saveOriginalState(){const _=this.binding,tt=this.buffer,nt=this.valueSize,rt=nt*this._origIndex;_.getValue(tt,rt);for(let it=nt,at=rt;it!==at;++it)tt[it]=tt[rt+it%nt];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const _=this.valueSize*3;this.binding.setValue(this.buffer,_)}_setAdditiveIdentityNumeric(){const _=this._addIndex*this.valueSize,tt=_+this.valueSize;for(let nt=_;nt<tt;nt++)this.buffer[nt]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const _=this._origIndex*this.valueSize,tt=this._addIndex*this.valueSize;for(let nt=0;nt<this.valueSize;nt++)this.buffer[tt+nt]=this.buffer[_+nt]}_select(_,tt,nt,rt,it){if(rt>=.5)for(let at=0;at!==it;++at)_[tt+at]=_[nt+at]}_slerp(_,tt,nt,rt){Quaternion.slerpFlat(_,tt,_,tt,_,nt,rt)}_slerpAdditive(_,tt,nt,rt,it){const at=this._workIndex*it;Quaternion.multiplyQuaternionsFlat(_,at,_,tt,_,nt),Quaternion.slerpFlat(_,tt,_,tt,_,at,rt)}_lerp(_,tt,nt,rt,it){const at=1-rt;for(let ot=0;ot!==it;++ot){const st=tt+ot;_[st]=_[st]*at+_[nt+ot]*rt}}_lerpAdditive(_,tt,nt,rt,it){for(let at=0;at!==it;++at){const ot=tt+at;_[ot]=_[ot]+_[nt+at]*rt}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(_,tt,nt){const rt=nt||PropertyBinding.parseTrackName(tt);this._targetGroup=_,this._bindings=_.subscribe_(tt,rt)}getValue(_,tt){this.bind();const nt=this._targetGroup.nCachedObjects_,rt=this._bindings[nt];rt!==void 0&&rt.getValue(_,tt)}setValue(_,tt){const nt=this._bindings;for(let rt=this._targetGroup.nCachedObjects_,it=nt.length;rt!==it;++rt)nt[rt].setValue(_,tt)}bind(){const _=this._bindings;for(let tt=this._targetGroup.nCachedObjects_,nt=_.length;tt!==nt;++tt)_[tt].bind()}unbind(){const _=this._bindings;for(let tt=this._targetGroup.nCachedObjects_,nt=_.length;tt!==nt;++tt)_[tt].unbind()}}class PropertyBinding{constructor(_,tt,nt){this.path=tt,this.parsedPath=nt||PropertyBinding.parseTrackName(tt),this.node=PropertyBinding.findNode(_,this.parsedPath.nodeName),this.rootNode=_,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(_,tt,nt){return _&&_.isAnimationObjectGroup?new PropertyBinding.Composite(_,tt,nt):new PropertyBinding(_,tt,nt)}static sanitizeNodeName(_){return _.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(_){const tt=_trackRe.exec(_);if(tt===null)throw new Error("PropertyBinding: Cannot parse trackName: "+_);const nt={nodeName:tt[2],objectName:tt[3],objectIndex:tt[4],propertyName:tt[5],propertyIndex:tt[6]},rt=nt.nodeName&&nt.nodeName.lastIndexOf(".");if(rt!==void 0&&rt!==-1){const it=nt.nodeName.substring(rt+1);_supportedObjectNames.indexOf(it)!==-1&&(nt.nodeName=nt.nodeName.substring(0,rt),nt.objectName=it)}if(nt.propertyName===null||nt.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+_);return nt}static findNode(_,tt){if(tt===void 0||tt===""||tt==="."||tt===-1||tt===_.name||tt===_.uuid)return _;if(_.skeleton){const nt=_.skeleton.getBoneByName(tt);if(nt!==void 0)return nt}if(_.children){const nt=function(it){for(let at=0;at<it.length;at++){const ot=it[at];if(ot.name===tt||ot.uuid===tt)return ot;const st=nt(ot.children);if(st)return st}return null},rt=nt(_.children);if(rt)return rt}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(_,tt){_[tt]=this.targetObject[this.propertyName]}_getValue_array(_,tt){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)_[tt++]=nt[rt]}_getValue_arrayElement(_,tt){_[tt]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(_,tt){this.resolvedProperty.toArray(_,tt)}_setValue_direct(_,tt){this.targetObject[this.propertyName]=_[tt]}_setValue_direct_setNeedsUpdate(_,tt){this.targetObject[this.propertyName]=_[tt],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(_,tt){this.targetObject[this.propertyName]=_[tt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(_,tt){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[tt++]}_setValue_array_setNeedsUpdate(_,tt){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[tt++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(_,tt){const nt=this.resolvedProperty;for(let rt=0,it=nt.length;rt!==it;++rt)nt[rt]=_[tt++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(_,tt){this.resolvedProperty[this.propertyIndex]=_[tt]}_setValue_arrayElement_setNeedsUpdate(_,tt){this.resolvedProperty[this.propertyIndex]=_[tt],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(_,tt){this.resolvedProperty[this.propertyIndex]=_[tt],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(_,tt){this.resolvedProperty.fromArray(_,tt)}_setValue_fromArray_setNeedsUpdate(_,tt){this.resolvedProperty.fromArray(_,tt),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(_,tt){this.resolvedProperty.fromArray(_,tt),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(_,tt){this.bind(),this.getValue(_,tt)}_setValue_unbound(_,tt){this.bind(),this.setValue(_,tt)}bind(){let _=this.node;const tt=this.parsedPath,nt=tt.objectName,rt=tt.propertyName;let it=tt.propertyIndex;if(_||(_=PropertyBinding.findNode(this.rootNode,tt.nodeName),this.node=_),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!_){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(nt){let lt=tt.objectIndex;switch(nt){case"materials":if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}_=_.material.materials;break;case"bones":if(!_.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}_=_.skeleton.bones;for(let ct=0;ct<_.length;ct++)if(_[ct].name===lt){lt=ct;break}break;case"map":if("map"in _){_=_.map;break}if(!_.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!_.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}_=_.material.map;break;default:if(_[nt]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}_=_[nt]}if(lt!==void 0){if(_[lt]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,_);return}_=_[lt]}}const at=_[rt];if(at===void 0){const lt=tt.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+lt+"."+rt+" but it wasn't found.",_);return}let ot=this.Versioning.None;this.targetObject=_,_.needsUpdate!==void 0?ot=this.Versioning.NeedsUpdate:_.matrixWorldNeedsUpdate!==void 0&&(ot=this.Versioning.MatrixWorldNeedsUpdate);let st=this.BindingType.Direct;if(it!==void 0){if(rt==="morphTargetInfluences"){if(!_.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!_.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}_.morphTargetDictionary[it]!==void 0&&(it=_.morphTargetDictionary[it])}st=this.BindingType.ArrayElement,this.resolvedProperty=at,this.propertyIndex=it}else at.fromArray!==void 0&&at.toArray!==void 0?(st=this.BindingType.HasFromToArray,this.resolvedProperty=at):Array.isArray(at)?(st=this.BindingType.EntireArray,this.resolvedProperty=at):this.propertyName=rt;this.getValue=this.GetterByBindingType[st],this.setValue=this.SetterByBindingTypeAndVersioning[st][ot]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const _={};this._indicesByUUID=_;for(let nt=0,rt=arguments.length;nt!==rt;++nt)_[arguments[nt].uuid]=nt;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const tt=this;this.stats={objects:{get total(){return tt._objects.length},get inUse(){return this.total-tt.nCachedObjects_}},get bindingsPerObject(){return tt._bindings.length}}}add(){const _=this._objects,tt=this._indicesByUUID,nt=this._paths,rt=this._parsedPaths,it=this._bindings,at=it.length;let ot,st=_.length,lt=this.nCachedObjects_;for(let ct=0,ut=arguments.length;ct!==ut;++ct){const ft=arguments[ct],pt=ft.uuid;let gt=tt[pt];if(gt===void 0){gt=st++,tt[pt]=gt,_.push(ft);for(let xt=0,yt=at;xt!==yt;++xt)it[xt].push(new PropertyBinding(ft,nt[xt],rt[xt]))}else if(gt<lt){ot=_[gt];const xt=--lt,yt=_[xt];tt[yt.uuid]=gt,_[gt]=yt,tt[pt]=xt,_[xt]=ft;for(let mt=0,At=at;mt!==At;++mt){const vt=it[mt],Et=vt[xt];let Ct=vt[gt];vt[gt]=Et,Ct===void 0&&(Ct=new PropertyBinding(ft,nt[mt],rt[mt])),vt[xt]=Ct}}else _[gt]!==ot&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=lt}remove(){const _=this._objects,tt=this._indicesByUUID,nt=this._bindings,rt=nt.length;let it=this.nCachedObjects_;for(let at=0,ot=arguments.length;at!==ot;++at){const st=arguments[at],lt=st.uuid,ct=tt[lt];if(ct!==void 0&&ct>=it){const ut=it++,ft=_[ut];tt[ft.uuid]=ct,_[ct]=ft,tt[lt]=ut,_[ut]=st;for(let pt=0,gt=rt;pt!==gt;++pt){const xt=nt[pt],yt=xt[ut],mt=xt[ct];xt[ct]=yt,xt[ut]=mt}}}this.nCachedObjects_=it}uncache(){const _=this._objects,tt=this._indicesByUUID,nt=this._bindings,rt=nt.length;let it=this.nCachedObjects_,at=_.length;for(let ot=0,st=arguments.length;ot!==st;++ot){const lt=arguments[ot],ct=lt.uuid,ut=tt[ct];if(ut!==void 0)if(delete tt[ct],ut<it){const ft=--it,pt=_[ft],gt=--at,xt=_[gt];tt[pt.uuid]=ut,_[ut]=pt,tt[xt.uuid]=ft,_[ft]=xt,_.pop();for(let yt=0,mt=rt;yt!==mt;++yt){const At=nt[yt],vt=At[ft],Et=At[gt];At[ut]=vt,At[ft]=Et,At.pop()}}else{const ft=--at,pt=_[ft];ft>0&&(tt[pt.uuid]=ut),_[ut]=pt,_.pop();for(let gt=0,xt=rt;gt!==xt;++gt){const yt=nt[gt];yt[ut]=yt[ft],yt.pop()}}}this.nCachedObjects_=it}subscribe_(_,tt){const nt=this._bindingsIndicesByPath;let rt=nt[_];const it=this._bindings;if(rt!==void 0)return it[rt];const at=this._paths,ot=this._parsedPaths,st=this._objects,lt=st.length,ct=this.nCachedObjects_,ut=new Array(lt);rt=it.length,nt[_]=rt,at.push(_),ot.push(tt),it.push(ut);for(let ft=ct,pt=st.length;ft!==pt;++ft){const gt=st[ft];ut[ft]=new PropertyBinding(gt,_,tt)}return ut}unsubscribe_(_){const tt=this._bindingsIndicesByPath,nt=tt[_];if(nt!==void 0){const rt=this._paths,it=this._parsedPaths,at=this._bindings,ot=at.length-1,st=at[ot],lt=_[ot];tt[lt]=nt,at[nt]=st,at.pop(),it[nt]=it[ot],it.pop(),rt[nt]=rt[ot],rt.pop()}}}class AnimationAction{constructor(_,tt,nt=null,rt=tt.blendMode){this._mixer=_,this._clip=tt,this._localRoot=nt,this.blendMode=rt;const it=tt.tracks,at=it.length,ot=new Array(at),st={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let lt=0;lt!==at;++lt){const ct=it[lt].createInterpolant(null);ot[lt]=ct,ct.settings=st}this._interpolantSettings=st,this._interpolants=ot,this._propertyBindings=new Array(at),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(_){return this._startTime=_,this}setLoop(_,tt){return this.loop=_,this.repetitions=tt,this}setEffectiveWeight(_){return this.weight=_,this._effectiveWeight=this.enabled?_:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(_){return this._scheduleFading(_,0,1)}fadeOut(_){return this._scheduleFading(_,1,0)}crossFadeFrom(_,tt,nt){if(_.fadeOut(tt),this.fadeIn(tt),nt){const rt=this._clip.duration,it=_._clip.duration,at=it/rt,ot=rt/it;_.warp(1,at,tt),this.warp(ot,1,tt)}return this}crossFadeTo(_,tt,nt){return _.crossFadeFrom(this,tt,nt)}stopFading(){const _=this._weightInterpolant;return _!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}setEffectiveTimeScale(_){return this.timeScale=_,this._effectiveTimeScale=this.paused?0:_,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(_){return this.timeScale=this._clip.duration/_,this.stopWarping()}syncWith(_){return this.time=_.time,this.timeScale=_.timeScale,this.stopWarping()}halt(_){return this.warp(this._effectiveTimeScale,0,_)}warp(_,tt,nt){const rt=this._mixer,it=rt.time,at=this.timeScale;let ot=this._timeScaleInterpolant;ot===null&&(ot=rt._lendControlInterpolant(),this._timeScaleInterpolant=ot);const st=ot.parameterPositions,lt=ot.sampleValues;return st[0]=it,st[1]=it+nt,lt[0]=_/at,lt[1]=tt/at,this}stopWarping(){const _=this._timeScaleInterpolant;return _!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(_)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(_,tt,nt,rt){if(!this.enabled){this._updateWeight(_);return}const it=this._startTime;if(it!==null){const st=(_-it)*nt;st<0||nt===0?tt=0:(this._startTime=null,tt=nt*st)}tt*=this._updateTimeScale(_);const at=this._updateTime(tt),ot=this._updateWeight(_);if(ot>0){const st=this._interpolants,lt=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let ct=0,ut=st.length;ct!==ut;++ct)st[ct].evaluate(at),lt[ct].accumulateAdditive(ot);break;case NormalAnimationBlendMode:default:for(let ct=0,ut=st.length;ct!==ut;++ct)st[ct].evaluate(at),lt[ct].accumulate(rt,ot)}}}_updateWeight(_){let tt=0;if(this.enabled){tt=this.weight;const nt=this._weightInterpolant;if(nt!==null){const rt=nt.evaluate(_)[0];tt*=rt,_>nt.parameterPositions[1]&&(this.stopFading(),rt===0&&(this.enabled=!1))}}return this._effectiveWeight=tt,tt}_updateTimeScale(_){let tt=0;if(!this.paused){tt=this.timeScale;const nt=this._timeScaleInterpolant;if(nt!==null){const rt=nt.evaluate(_)[0];tt*=rt,_>nt.parameterPositions[1]&&(this.stopWarping(),tt===0?this.paused=!0:this.timeScale=tt)}}return this._effectiveTimeScale=tt,tt}_updateTime(_){const tt=this._clip.duration,nt=this.loop;let rt=this.time+_,it=this._loopCount;const at=nt===LoopPingPong;if(_===0)return it===-1?rt:at&&(it&1)===1?tt-rt:rt;if(nt===LoopOnce){it===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(rt>=tt)rt=tt;else if(rt<0)rt=0;else{this.time=rt;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=rt,this._mixer.dispatchEvent({type:"finished",action:this,direction:_<0?-1:1})}}else{if(it===-1&&(_>=0?(it=0,this._setEndings(!0,this.repetitions===0,at)):this._setEndings(this.repetitions===0,!0,at)),rt>=tt||rt<0){const ot=Math.floor(rt/tt);rt-=tt*ot,it+=Math.abs(ot);const st=this.repetitions-it;if(st<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,rt=_>0?tt:0,this.time=rt,this._mixer.dispatchEvent({type:"finished",action:this,direction:_>0?1:-1});else{if(st===1){const lt=_<0;this._setEndings(lt,!lt,at)}else this._setEndings(!1,!1,at);this._loopCount=it,this.time=rt,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:ot})}}else this.time=rt;if(at&&(it&1)===1)return tt-rt}return rt}_setEndings(_,tt,nt){const rt=this._interpolantSettings;nt?(rt.endingStart=ZeroSlopeEnding,rt.endingEnd=ZeroSlopeEnding):(_?rt.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:rt.endingStart=WrapAroundEnding,tt?rt.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:rt.endingEnd=WrapAroundEnding)}_scheduleFading(_,tt,nt){const rt=this._mixer,it=rt.time;let at=this._weightInterpolant;at===null&&(at=rt._lendControlInterpolant(),this._weightInterpolant=at);const ot=at.parameterPositions,st=at.sampleValues;return ot[0]=it,st[0]=tt,ot[1]=it+_,st[1]=nt,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(_){super(),this._root=_,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(_,tt){const nt=_._localRoot||this._root,rt=_._clip.tracks,it=rt.length,at=_._propertyBindings,ot=_._interpolants,st=nt.uuid,lt=this._bindingsByRootAndName;let ct=lt[st];ct===void 0&&(ct={},lt[st]=ct);for(let ut=0;ut!==it;++ut){const ft=rt[ut],pt=ft.name;let gt=ct[pt];if(gt!==void 0)++gt.referenceCount,at[ut]=gt;else{if(gt=at[ut],gt!==void 0){gt._cacheIndex===null&&(++gt.referenceCount,this._addInactiveBinding(gt,st,pt));continue}const xt=tt&&tt._propertyBindings[ut].binding.parsedPath;gt=new PropertyMixer(PropertyBinding.create(nt,pt,xt),ft.ValueTypeName,ft.getValueSize()),++gt.referenceCount,this._addInactiveBinding(gt,st,pt),at[ut]=gt}ot[ut].resultBuffer=gt.buffer}}_activateAction(_){if(!this._isActiveAction(_)){if(_._cacheIndex===null){const nt=(_._localRoot||this._root).uuid,rt=_._clip.uuid,it=this._actionsByClip[rt];this._bindAction(_,it&&it.knownActions[0]),this._addInactiveAction(_,rt,nt)}const tt=_._propertyBindings;for(let nt=0,rt=tt.length;nt!==rt;++nt){const it=tt[nt];it.useCount++===0&&(this._lendBinding(it),it.saveOriginalState())}this._lendAction(_)}}_deactivateAction(_){if(this._isActiveAction(_)){const tt=_._propertyBindings;for(let nt=0,rt=tt.length;nt!==rt;++nt){const it=tt[nt];--it.useCount===0&&(it.restoreOriginalState(),this._takeBackBinding(it))}this._takeBackAction(_)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const _=this;this.stats={actions:{get total(){return _._actions.length},get inUse(){return _._nActiveActions}},bindings:{get total(){return _._bindings.length},get inUse(){return _._nActiveBindings}},controlInterpolants:{get total(){return _._controlInterpolants.length},get inUse(){return _._nActiveControlInterpolants}}}}_isActiveAction(_){const tt=_._cacheIndex;return tt!==null&&tt<this._nActiveActions}_addInactiveAction(_,tt,nt){const rt=this._actions,it=this._actionsByClip;let at=it[tt];if(at===void 0)at={knownActions:[_],actionByRoot:{}},_._byClipCacheIndex=0,it[tt]=at;else{const ot=at.knownActions;_._byClipCacheIndex=ot.length,ot.push(_)}_._cacheIndex=rt.length,rt.push(_),at.actionByRoot[nt]=_}_removeInactiveAction(_){const tt=this._actions,nt=tt[tt.length-1],rt=_._cacheIndex;nt._cacheIndex=rt,tt[rt]=nt,tt.pop(),_._cacheIndex=null;const it=_._clip.uuid,at=this._actionsByClip,ot=at[it],st=ot.knownActions,lt=st[st.length-1],ct=_._byClipCacheIndex;lt._byClipCacheIndex=ct,st[ct]=lt,st.pop(),_._byClipCacheIndex=null;const ut=ot.actionByRoot,ft=(_._localRoot||this._root).uuid;delete ut[ft],st.length===0&&delete at[it],this._removeInactiveBindingsForAction(_)}_removeInactiveBindingsForAction(_){const tt=_._propertyBindings;for(let nt=0,rt=tt.length;nt!==rt;++nt){const it=tt[nt];--it.referenceCount===0&&this._removeInactiveBinding(it)}}_lendAction(_){const tt=this._actions,nt=_._cacheIndex,rt=this._nActiveActions++,it=tt[rt];_._cacheIndex=rt,tt[rt]=_,it._cacheIndex=nt,tt[nt]=it}_takeBackAction(_){const tt=this._actions,nt=_._cacheIndex,rt=--this._nActiveActions,it=tt[rt];_._cacheIndex=rt,tt[rt]=_,it._cacheIndex=nt,tt[nt]=it}_addInactiveBinding(_,tt,nt){const rt=this._bindingsByRootAndName,it=this._bindings;let at=rt[tt];at===void 0&&(at={},rt[tt]=at),at[nt]=_,_._cacheIndex=it.length,it.push(_)}_removeInactiveBinding(_){const tt=this._bindings,nt=_.binding,rt=nt.rootNode.uuid,it=nt.path,at=this._bindingsByRootAndName,ot=at[rt],st=tt[tt.length-1],lt=_._cacheIndex;st._cacheIndex=lt,tt[lt]=st,tt.pop(),delete ot[it],Object.keys(ot).length===0&&delete at[rt]}_lendBinding(_){const tt=this._bindings,nt=_._cacheIndex,rt=this._nActiveBindings++,it=tt[rt];_._cacheIndex=rt,tt[rt]=_,it._cacheIndex=nt,tt[nt]=it}_takeBackBinding(_){const tt=this._bindings,nt=_._cacheIndex,rt=--this._nActiveBindings,it=tt[rt];_._cacheIndex=rt,tt[rt]=_,it._cacheIndex=nt,tt[nt]=it}_lendControlInterpolant(){const _=this._controlInterpolants,tt=this._nActiveControlInterpolants++;let nt=_[tt];return nt===void 0&&(nt=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),nt.__cacheIndex=tt,_[tt]=nt),nt}_takeBackControlInterpolant(_){const tt=this._controlInterpolants,nt=_.__cacheIndex,rt=--this._nActiveControlInterpolants,it=tt[rt];_.__cacheIndex=rt,tt[rt]=_,it.__cacheIndex=nt,tt[nt]=it}clipAction(_,tt,nt){const rt=tt||this._root,it=rt.uuid;let at=typeof _=="string"?AnimationClip.findByName(rt,_):_;const ot=at!==null?at.uuid:_,st=this._actionsByClip[ot];let lt=null;if(nt===void 0&&(at!==null?nt=at.blendMode:nt=NormalAnimationBlendMode),st!==void 0){const ut=st.actionByRoot[it];if(ut!==void 0&&ut.blendMode===nt)return ut;lt=st.knownActions[0],at===null&&(at=lt._clip)}if(at===null)return null;const ct=new AnimationAction(this,at,tt,nt);return this._bindAction(ct,lt),this._addInactiveAction(ct,ot,it),ct}existingAction(_,tt){const nt=tt||this._root,rt=nt.uuid,it=typeof _=="string"?AnimationClip.findByName(nt,_):_,at=it?it.uuid:_,ot=this._actionsByClip[at];return ot!==void 0&&ot.actionByRoot[rt]||null}stopAllAction(){const _=this._actions,tt=this._nActiveActions;for(let nt=tt-1;nt>=0;--nt)_[nt].stop();return this}update(_){_*=this.timeScale;const tt=this._actions,nt=this._nActiveActions,rt=this.time+=_,it=Math.sign(_),at=this._accuIndex^=1;for(let lt=0;lt!==nt;++lt)tt[lt]._update(rt,_,it,at);const ot=this._bindings,st=this._nActiveBindings;for(let lt=0;lt!==st;++lt)ot[lt].apply(at);return this}setTime(_){this.time=0;for(let tt=0;tt<this._actions.length;tt++)this._actions[tt].time=0;return this.update(_)}getRoot(){return this._root}uncacheClip(_){const tt=this._actions,nt=_.uuid,rt=this._actionsByClip,it=rt[nt];if(it!==void 0){const at=it.knownActions;for(let ot=0,st=at.length;ot!==st;++ot){const lt=at[ot];this._deactivateAction(lt);const ct=lt._cacheIndex,ut=tt[tt.length-1];lt._cacheIndex=null,lt._byClipCacheIndex=null,ut._cacheIndex=ct,tt[ct]=ut,tt.pop(),this._removeInactiveBindingsForAction(lt)}delete rt[nt]}}uncacheRoot(_){const tt=_.uuid,nt=this._actionsByClip;for(const at in nt){const ot=nt[at].actionByRoot,st=ot[tt];st!==void 0&&(this._deactivateAction(st),this._removeInactiveAction(st))}const rt=this._bindingsByRootAndName,it=rt[tt];if(it!==void 0)for(const at in it){const ot=it[at];ot.restoreOriginalState(),this._removeInactiveBinding(ot)}}uncacheAction(_,tt){const nt=this.existingAction(_,tt);nt!==null&&(this._deactivateAction(nt),this._removeInactiveAction(nt))}}class Uniform{constructor(_){this.value=_}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(_){return this.uniforms.push(_),this}remove(_){const tt=this.uniforms.indexOf(_);return tt!==-1&&this.uniforms.splice(tt,1),this}setName(_){return this.name=_,this}setUsage(_){return this.usage=_,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(_){this.name=_.name,this.usage=_.usage;const tt=_.uniforms;this.uniforms.length=0;for(let nt=0,rt=tt.length;nt<rt;nt++)this.uniforms.push(tt[nt].clone());return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(_,tt,nt=1){super(_,tt),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=nt}copy(_){return super.copy(_),this.meshPerAttribute=_.meshPerAttribute,this}clone(_){const tt=super.clone(_);return tt.meshPerAttribute=this.meshPerAttribute,tt}toJSON(_){const tt=super.toJSON(_);return tt.isInstancedInterleavedBuffer=!0,tt.meshPerAttribute=this.meshPerAttribute,tt}}class GLBufferAttribute{constructor(_,tt,nt,rt,it){this.isGLBufferAttribute=!0,this.name="",this.buffer=_,this.type=tt,this.itemSize=nt,this.elementSize=rt,this.count=it,this.version=0}set needsUpdate(_){_===!0&&this.version++}setBuffer(_){return this.buffer=_,this}setType(_,tt){return this.type=_,this.elementSize=tt,this}setItemSize(_){return this.itemSize=_,this}setCount(_){return this.count=_,this}}class Raycaster{constructor(_,tt,nt=0,rt=1/0){this.ray=new Ray(_,tt),this.near=nt,this.far=rt,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(_,tt){this.ray.set(_,tt)}setFromCamera(_,tt){tt.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(tt.matrixWorld),this.ray.direction.set(_.x,_.y,.5).unproject(tt).sub(this.ray.origin).normalize(),this.camera=tt):tt.isOrthographicCamera?(this.ray.origin.set(_.x,_.y,(tt.near+tt.far)/(tt.near-tt.far)).unproject(tt),this.ray.direction.set(0,0,-1).transformDirection(tt.matrixWorld),this.camera=tt):console.error("THREE.Raycaster: Unsupported camera type: "+tt.type)}intersectObject(_,tt=!0,nt=[]){return intersectObject(_,this,nt,tt),nt.sort(ascSort),nt}intersectObjects(_,tt=!0,nt=[]){for(let rt=0,it=_.length;rt<it;rt++)intersectObject(_[rt],this,nt,tt);return nt.sort(ascSort),nt}}function ascSort(_e,_){return _e.distance-_.distance}function intersectObject(_e,_,tt,nt){if(_e.layers.test(_.layers)&&_e.raycast(_,tt),nt===!0){const rt=_e.children;for(let it=0,at=rt.length;it<at;it++)intersectObject(rt[it],_,tt,!0)}}class Spherical{constructor(_=1,tt=0,nt=0){return this.radius=_,this.phi=tt,this.theta=nt,this}set(_,tt,nt){return this.radius=_,this.phi=tt,this.theta=nt,this}copy(_){return this.radius=_.radius,this.phi=_.phi,this.theta=_.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,tt,nt){return this.radius=Math.sqrt(_*_+tt*tt+nt*nt),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(_,nt),this.phi=Math.acos(clamp$4(tt/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(_=1,tt=0,nt=0){return this.radius=_,this.theta=tt,this.y=nt,this}set(_,tt,nt){return this.radius=_,this.theta=tt,this.y=nt,this}copy(_){return this.radius=_.radius,this.theta=_.theta,this.y=_.y,this}setFromVector3(_){return this.setFromCartesianCoords(_.x,_.y,_.z)}setFromCartesianCoords(_,tt,nt){return this.radius=Math.sqrt(_*_+nt*nt),this.theta=Math.atan2(_,nt),this.y=tt,this}clone(){return new this.constructor().copy(this)}}const _vector$4=new Vector2;class Box2{constructor(_=new Vector2(1/0,1/0),tt=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=_,this.max=tt}set(_,tt){return this.min.copy(_),this.max.copy(tt),this}setFromPoints(_){this.makeEmpty();for(let tt=0,nt=_.length;tt<nt;tt++)this.expandByPoint(_[tt]);return this}setFromCenterAndSize(_,tt){const nt=_vector$4.copy(tt).multiplyScalar(.5);return this.min.copy(_).sub(nt),this.max.copy(_).add(nt),this}clone(){return new this.constructor().copy(this)}copy(_){return this.min.copy(_.min),this.max.copy(_.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(_){return this.isEmpty()?_.set(0,0):_.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(_){return this.isEmpty()?_.set(0,0):_.subVectors(this.max,this.min)}expandByPoint(_){return this.min.min(_),this.max.max(_),this}expandByVector(_){return this.min.sub(_),this.max.add(_),this}expandByScalar(_){return this.min.addScalar(-_),this.max.addScalar(_),this}containsPoint(_){return!(_.x<this.min.x||_.x>this.max.x||_.y<this.min.y||_.y>this.max.y)}containsBox(_){return this.min.x<=_.min.x&&_.max.x<=this.max.x&&this.min.y<=_.min.y&&_.max.y<=this.max.y}getParameter(_,tt){return tt.set((_.x-this.min.x)/(this.max.x-this.min.x),(_.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(_){return!(_.max.x<this.min.x||_.min.x>this.max.x||_.max.y<this.min.y||_.min.y>this.max.y)}clampPoint(_,tt){return tt.copy(_).clamp(this.min,this.max)}distanceToPoint(_){return this.clampPoint(_,_vector$4).distanceTo(_)}intersect(_){return this.min.max(_.min),this.max.min(_.max),this.isEmpty()&&this.makeEmpty(),this}union(_){return this.min.min(_.min),this.max.max(_.max),this}translate(_){return this.min.add(_),this.max.add(_),this}equals(_){return _.min.equals(this.min)&&_.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(_=new Vector3,tt=new Vector3){this.start=_,this.end=tt}set(_,tt){return this.start.copy(_),this.end.copy(tt),this}copy(_){return this.start.copy(_.start),this.end.copy(_.end),this}getCenter(_){return _.addVectors(this.start,this.end).multiplyScalar(.5)}delta(_){return _.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(_,tt){return this.delta(tt).multiplyScalar(_).add(this.start)}closestPointToPointParameter(_,tt){_startP.subVectors(_,this.start),_startEnd.subVectors(this.end,this.start);const nt=_startEnd.dot(_startEnd);let it=_startEnd.dot(_startP)/nt;return tt&&(it=clamp$4(it,0,1)),it}closestPointToPoint(_,tt,nt){const rt=this.closestPointToPointParameter(_,tt);return this.delta(nt).multiplyScalar(rt).add(this.start)}applyMatrix4(_){return this.start.applyMatrix4(_),this.end.applyMatrix4(_),this}equals(_){return _.start.equals(this.start)&&_.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(_,tt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=tt,this.type="SpotLightHelper";const nt=new BufferGeometry,rt=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let at=0,ot=1,st=32;at<st;at++,ot++){const lt=at/st*Math.PI*2,ct=ot/st*Math.PI*2;rt.push(Math.cos(lt),Math.sin(lt),1,Math.cos(ct),Math.sin(ct),1)}nt.setAttribute("position",new Float32BufferAttribute(rt,3));const it=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(nt,it),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const _=this.light.distance?this.light.distance:1e3,tt=_*Math.tan(this.light.angle);this.cone.scale.set(tt,tt,_),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(_){const tt=getBoneList(_),nt=new BufferGeometry,rt=[],it=[],at=new Color$1(0,0,1),ot=new Color$1(0,1,0);for(let lt=0;lt<tt.length;lt++){const ct=tt[lt];ct.parent&&ct.parent.isBone&&(rt.push(0,0,0),rt.push(0,0,0),it.push(at.r,at.g,at.b),it.push(ot.r,ot.g,ot.b))}nt.setAttribute("position",new Float32BufferAttribute(rt,3)),nt.setAttribute("color",new Float32BufferAttribute(it,3));const st=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(nt,st),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=_,this.bones=tt,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(_){const tt=this.bones,nt=this.geometry,rt=nt.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let it=0,at=0;it<tt.length;it++){const ot=tt[it];ot.parent&&ot.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,ot.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),rt.setXYZ(at,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,ot.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),rt.setXYZ(at+1,_vector$2.x,_vector$2.y,_vector$2.z),at+=2)}nt.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(_e){const _=[];_e.isBone===!0&&_.push(_e);for(let tt=0;tt<_e.children.length;tt++)_.push.apply(_,getBoneList(_e.children[tt]));return _}class PointLightHelper extends Mesh{constructor(_,tt,nt){const rt=new SphereGeometry(tt,4,2),it=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(rt,it),this.light=_,this.color=nt,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color$1,_color2=new Color$1;class HemisphereLightHelper extends Object3D{constructor(_,tt,nt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=nt,this.type="HemisphereLightHelper";const rt=new OctahedronGeometry(tt);rt.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const it=rt.getAttribute("position"),at=new Float32Array(it.count*3);rt.setAttribute("color",new BufferAttribute(at,3)),this.add(new Mesh(rt,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const _=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const tt=_.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let nt=0,rt=tt.count;nt<rt;nt++){const it=nt<rt/2?_color1:_color2;tt.setXYZ(nt,it.r,it.g,it.b)}tt.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),_.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(_=10,tt=10,nt=4473924,rt=8947848){nt=new Color$1(nt),rt=new Color$1(rt);const it=tt/2,at=_/tt,ot=_/2,st=[],lt=[];for(let ft=0,pt=0,gt=-ot;ft<=tt;ft++,gt+=at){st.push(-ot,0,gt,ot,0,gt),st.push(gt,0,-ot,gt,0,ot);const xt=ft===it?nt:rt;xt.toArray(lt,pt),pt+=3,xt.toArray(lt,pt),pt+=3,xt.toArray(lt,pt),pt+=3,xt.toArray(lt,pt),pt+=3}const ct=new BufferGeometry;ct.setAttribute("position",new Float32BufferAttribute(st,3)),ct.setAttribute("color",new Float32BufferAttribute(lt,3));const ut=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(ct,ut),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(_=10,tt=16,nt=8,rt=64,it=4473924,at=8947848){it=new Color$1(it),at=new Color$1(at);const ot=[],st=[];if(tt>1)for(let ut=0;ut<tt;ut++){const ft=ut/tt*(Math.PI*2),pt=Math.sin(ft)*_,gt=Math.cos(ft)*_;ot.push(0,0,0),ot.push(pt,0,gt);const xt=ut&1?it:at;st.push(xt.r,xt.g,xt.b),st.push(xt.r,xt.g,xt.b)}for(let ut=0;ut<nt;ut++){const ft=ut&1?it:at,pt=_-_/nt*ut;for(let gt=0;gt<rt;gt++){let xt=gt/rt*(Math.PI*2),yt=Math.sin(xt)*pt,mt=Math.cos(xt)*pt;ot.push(yt,0,mt),st.push(ft.r,ft.g,ft.b),xt=(gt+1)/rt*(Math.PI*2),yt=Math.sin(xt)*pt,mt=Math.cos(xt)*pt,ot.push(yt,0,mt),st.push(ft.r,ft.g,ft.b)}}const lt=new BufferGeometry;lt.setAttribute("position",new Float32BufferAttribute(ot,3)),lt.setAttribute("color",new Float32BufferAttribute(st,3));const ct=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(lt,ct),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(_,tt,nt){super(),this.light=_,this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.color=nt,this.type="DirectionalLightHelper",tt===void 0&&(tt=1);let rt=new BufferGeometry;rt.setAttribute("position",new Float32BufferAttribute([-tt,tt,0,tt,tt,0,tt,-tt,0,-tt,-tt,0,-tt,tt,0],3));const it=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(rt,it),this.add(this.lightPlane),rt=new BufferGeometry,rt.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(rt,it),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(_){const tt=new BufferGeometry,nt=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),rt=[],it=[],at={};ot("n1","n2"),ot("n2","n4"),ot("n4","n3"),ot("n3","n1"),ot("f1","f2"),ot("f2","f4"),ot("f4","f3"),ot("f3","f1"),ot("n1","f1"),ot("n2","f2"),ot("n3","f3"),ot("n4","f4"),ot("p","n1"),ot("p","n2"),ot("p","n3"),ot("p","n4"),ot("u1","u2"),ot("u2","u3"),ot("u3","u1"),ot("c","t"),ot("p","c"),ot("cn1","cn2"),ot("cn3","cn4"),ot("cf1","cf2"),ot("cf3","cf4");function ot(gt,xt){st(gt),st(xt)}function st(gt){rt.push(0,0,0),it.push(0,0,0),at[gt]===void 0&&(at[gt]=[]),at[gt].push(rt.length/3-1)}tt.setAttribute("position",new Float32BufferAttribute(rt,3)),tt.setAttribute("color",new Float32BufferAttribute(it,3)),super(tt,nt),this.type="CameraHelper",this.camera=_,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=_.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=at,this.update();const lt=new Color$1(16755200),ct=new Color$1(16711680),ut=new Color$1(43775),ft=new Color$1(16777215),pt=new Color$1(3355443);this.setColors(lt,ct,ut,ft,pt)}setColors(_,tt,nt,rt,it){const ot=this.geometry.getAttribute("color");ot.setXYZ(0,_.r,_.g,_.b),ot.setXYZ(1,_.r,_.g,_.b),ot.setXYZ(2,_.r,_.g,_.b),ot.setXYZ(3,_.r,_.g,_.b),ot.setXYZ(4,_.r,_.g,_.b),ot.setXYZ(5,_.r,_.g,_.b),ot.setXYZ(6,_.r,_.g,_.b),ot.setXYZ(7,_.r,_.g,_.b),ot.setXYZ(8,_.r,_.g,_.b),ot.setXYZ(9,_.r,_.g,_.b),ot.setXYZ(10,_.r,_.g,_.b),ot.setXYZ(11,_.r,_.g,_.b),ot.setXYZ(12,_.r,_.g,_.b),ot.setXYZ(13,_.r,_.g,_.b),ot.setXYZ(14,_.r,_.g,_.b),ot.setXYZ(15,_.r,_.g,_.b),ot.setXYZ(16,_.r,_.g,_.b),ot.setXYZ(17,_.r,_.g,_.b),ot.setXYZ(18,_.r,_.g,_.b),ot.setXYZ(19,_.r,_.g,_.b),ot.setXYZ(20,_.r,_.g,_.b),ot.setXYZ(21,_.r,_.g,_.b),ot.setXYZ(22,_.r,_.g,_.b),ot.setXYZ(23,_.r,_.g,_.b),ot.setXYZ(24,tt.r,tt.g,tt.b),ot.setXYZ(25,tt.r,tt.g,tt.b),ot.setXYZ(26,tt.r,tt.g,tt.b),ot.setXYZ(27,tt.r,tt.g,tt.b),ot.setXYZ(28,tt.r,tt.g,tt.b),ot.setXYZ(29,tt.r,tt.g,tt.b),ot.setXYZ(30,tt.r,tt.g,tt.b),ot.setXYZ(31,tt.r,tt.g,tt.b),ot.setXYZ(32,nt.r,nt.g,nt.b),ot.setXYZ(33,nt.r,nt.g,nt.b),ot.setXYZ(34,nt.r,nt.g,nt.b),ot.setXYZ(35,nt.r,nt.g,nt.b),ot.setXYZ(36,nt.r,nt.g,nt.b),ot.setXYZ(37,nt.r,nt.g,nt.b),ot.setXYZ(38,rt.r,rt.g,rt.b),ot.setXYZ(39,rt.r,rt.g,rt.b),ot.setXYZ(40,it.r,it.g,it.b),ot.setXYZ(41,it.r,it.g,it.b),ot.setXYZ(42,it.r,it.g,it.b),ot.setXYZ(43,it.r,it.g,it.b),ot.setXYZ(44,it.r,it.g,it.b),ot.setXYZ(45,it.r,it.g,it.b),ot.setXYZ(46,it.r,it.g,it.b),ot.setXYZ(47,it.r,it.g,it.b),ot.setXYZ(48,it.r,it.g,it.b),ot.setXYZ(49,it.r,it.g,it.b),ot.needsUpdate=!0}update(){const _=this.geometry,tt=this.pointMap,nt=1,rt=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",tt,_,_camera,0,0,-1),setPoint("t",tt,_,_camera,0,0,1),setPoint("n1",tt,_,_camera,-nt,-rt,-1),setPoint("n2",tt,_,_camera,nt,-rt,-1),setPoint("n3",tt,_,_camera,-nt,rt,-1),setPoint("n4",tt,_,_camera,nt,rt,-1),setPoint("f1",tt,_,_camera,-nt,-rt,1),setPoint("f2",tt,_,_camera,nt,-rt,1),setPoint("f3",tt,_,_camera,-nt,rt,1),setPoint("f4",tt,_,_camera,nt,rt,1),setPoint("u1",tt,_,_camera,nt*.7,rt*1.1,-1),setPoint("u2",tt,_,_camera,-nt*.7,rt*1.1,-1),setPoint("u3",tt,_,_camera,0,rt*2,-1),setPoint("cf1",tt,_,_camera,-nt,0,1),setPoint("cf2",tt,_,_camera,nt,0,1),setPoint("cf3",tt,_,_camera,0,-rt,1),setPoint("cf4",tt,_,_camera,0,rt,1),setPoint("cn1",tt,_,_camera,-nt,0,-1),setPoint("cn2",tt,_,_camera,nt,0,-1),setPoint("cn3",tt,_,_camera,0,-rt,-1),setPoint("cn4",tt,_,_camera,0,rt,-1),_.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(_e,_,tt,nt,rt,it,at){_vector.set(rt,it,at).unproject(nt);const ot=_[_e];if(ot!==void 0){const st=tt.getAttribute("position");for(let lt=0,ct=ot.length;lt<ct;lt++)st.setXYZ(ot[lt],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(_,tt=16776960){const nt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),rt=new Float32Array(8*3),it=new BufferGeometry;it.setIndex(new BufferAttribute(nt,1)),it.setAttribute("position",new BufferAttribute(rt,3)),super(it,new LineBasicMaterial({color:tt,toneMapped:!1})),this.object=_,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(_){if(_!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const tt=_box.min,nt=_box.max,rt=this.geometry.attributes.position,it=rt.array;it[0]=nt.x,it[1]=nt.y,it[2]=nt.z,it[3]=tt.x,it[4]=nt.y,it[5]=nt.z,it[6]=tt.x,it[7]=tt.y,it[8]=nt.z,it[9]=nt.x,it[10]=tt.y,it[11]=nt.z,it[12]=nt.x,it[13]=nt.y,it[14]=tt.z,it[15]=tt.x,it[16]=nt.y,it[17]=tt.z,it[18]=tt.x,it[19]=tt.y,it[20]=tt.z,it[21]=nt.x,it[22]=tt.y,it[23]=tt.z,rt.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(_){return this.object=_,this.update(),this}copy(_,tt){return super.copy(_,tt),this.object=_.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(_,tt=16776960){const nt=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),rt=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],it=new BufferGeometry;it.setIndex(new BufferAttribute(nt,1)),it.setAttribute("position",new Float32BufferAttribute(rt,3)),super(it,new LineBasicMaterial({color:tt,toneMapped:!1})),this.box=_,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(_){const tt=this.box;tt.isEmpty()||(tt.getCenter(this.position),tt.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(_))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(_,tt=1,nt=16776960){const rt=nt,it=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],at=new BufferGeometry;at.setAttribute("position",new Float32BufferAttribute(it,3)),at.computeBoundingSphere(),super(at,new LineBasicMaterial({color:rt,toneMapped:!1})),this.type="PlaneHelper",this.plane=_,this.size=tt;const ot=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],st=new BufferGeometry;st.setAttribute("position",new Float32BufferAttribute(ot,3)),st.computeBoundingSphere(),this.add(new Mesh(st,new MeshBasicMaterial({color:rt,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(_){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(_)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(_=new Vector3(0,0,1),tt=new Vector3(0,0,0),nt=1,rt=16776960,it=nt*.2,at=it*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(tt),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:rt,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:rt,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(_),this.setLength(nt,it,at)}setDirection(_){if(_.y>.99999)this.quaternion.set(0,0,0,1);else if(_.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(_.z,0,-_.x).normalize();const tt=Math.acos(_.y);this.quaternion.setFromAxisAngle(_axis,tt)}}setLength(_,tt=_*.2,nt=tt*.2){this.line.scale.set(1,Math.max(1e-4,_-tt),1),this.line.updateMatrix(),this.cone.scale.set(nt,tt,nt),this.cone.position.y=_,this.cone.updateMatrix()}setColor(_){this.line.material.color.set(_),this.cone.material.color.set(_)}copy(_){return super.copy(_,!1),this.line.copy(_.line),this.cone.copy(_.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(_=1){const tt=[0,0,0,_,0,0,0,0,0,0,_,0,0,0,0,0,0,_],nt=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],rt=new BufferGeometry;rt.setAttribute("position",new Float32BufferAttribute(tt,3)),rt.setAttribute("color",new Float32BufferAttribute(nt,3));const it=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(rt,it),this.type="AxesHelper"}setColors(_,tt,nt){const rt=new Color$1,it=this.geometry.attributes.color.array;return rt.set(_),rt.toArray(it,0),rt.toArray(it,3),rt.set(tt),rt.toArray(it,6),rt.toArray(it,9),rt.set(nt),rt.toArray(it,12),rt.toArray(it,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color$1,this.subPaths=[],this.currentPath=null}moveTo(_,tt){return this.currentPath=new Path$1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(_,tt),this}lineTo(_,tt){return this.currentPath.lineTo(_,tt),this}quadraticCurveTo(_,tt,nt,rt){return this.currentPath.quadraticCurveTo(_,tt,nt,rt),this}bezierCurveTo(_,tt,nt,rt,it,at){return this.currentPath.bezierCurveTo(_,tt,nt,rt,it,at),this}splineThru(_){return this.currentPath.splineThru(_),this}toShapes(_){function tt(mt){const At=[];for(let vt=0,Et=mt.length;vt<Et;vt++){const Ct=mt[vt],Tt=new Shape;Tt.curves=Ct.curves,At.push(Tt)}return At}function nt(mt,At){const vt=At.length;let Et=!1;for(let Ct=vt-1,Tt=0;Tt<vt;Ct=Tt++){let bt=At[Ct],It=At[Tt],wt=It.x-bt.x,Rt=It.y-bt.y;if(Math.abs(Rt)>Number.EPSILON){if(Rt<0&&(bt=At[Tt],wt=-wt,It=At[Ct],Rt=-Rt),mt.y<bt.y||mt.y>It.y)continue;if(mt.y===bt.y){if(mt.x===bt.x)return!0}else{const Ft=Rt*(mt.x-bt.x)-wt*(mt.y-bt.y);if(Ft===0)return!0;if(Ft<0)continue;Et=!Et}}else{if(mt.y!==bt.y)continue;if(It.x<=mt.x&&mt.x<=bt.x||bt.x<=mt.x&&mt.x<=It.x)return!0}}return Et}const rt=ShapeUtils.isClockWise,it=this.subPaths;if(it.length===0)return[];let at,ot,st;const lt=[];if(it.length===1)return ot=it[0],st=new Shape,st.curves=ot.curves,lt.push(st),lt;let ct=!rt(it[0].getPoints());ct=_?!ct:ct;const ut=[],ft=[];let pt=[],gt=0,xt;ft[gt]=void 0,pt[gt]=[];for(let mt=0,At=it.length;mt<At;mt++)ot=it[mt],xt=ot.getPoints(),at=rt(xt),at=_?!at:at,at?(!ct&&ft[gt]&&gt++,ft[gt]={s:new Shape,p:xt},ft[gt].s.curves=ot.curves,ct&&gt++,pt[gt]=[]):pt[gt].push({h:ot,p:xt[0]});if(!ft[0])return tt(it);if(ft.length>1){let mt=!1,At=0;for(let vt=0,Et=ft.length;vt<Et;vt++)ut[vt]=[];for(let vt=0,Et=ft.length;vt<Et;vt++){const Ct=pt[vt];for(let Tt=0;Tt<Ct.length;Tt++){const bt=Ct[Tt];let It=!0;for(let wt=0;wt<ft.length;wt++)nt(bt.p,ft[wt].p)&&(vt!==wt&&At++,It?(It=!1,ut[wt].push(bt)):mt=!0);It&&ut[vt].push(bt)}}At>0&&mt===!1&&(pt=ut)}let yt;for(let mt=0,At=ft.length;mt<At;mt++){st=ft[mt].s,lt.push(st),yt=pt[mt];for(let vt=0,Et=yt.length;vt<Et;vt++)st.holes.push(yt[vt].h)}return lt}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AmbientLightProbe,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color:Color$1,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture:CompressedArrayTexture$1,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture:Data3DTexture$1,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DisplayP3ColorSpace,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,Float64BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,HemisphereLightProbe,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearDisplayP3ColorSpace,LinearEncoding,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,Loader:Loader$1,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path:Path$1,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,TwoPassDoubleSide,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoTexture,WebGL1Renderer,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLMultipleRenderTargets,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,_SRGBAFormat,createCanvasElement,sRGBEncoding},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production_min={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production_min.ConcurrentRoot=1;reactReconcilerConstants_production_min.ContinuousEventPriority=4;reactReconcilerConstants_production_min.DefaultEventPriority=16;reactReconcilerConstants_production_min.DiscreteEventPriority=1;reactReconcilerConstants_production_min.IdleEventPriority=536870912;reactReconcilerConstants_production_min.LegacyRoot=0;constants.exports=reactReconcilerConstants_production_min;var constantsExports=constants.exports;function createStore$1(_e){let _;const tt=new Set,nt=(lt,ct)=>{const ut=typeof lt=="function"?lt(_):lt;if(ut!==_){const ft=_;_=ct?ut:Object.assign({},_,ut),tt.forEach(pt=>pt(_,ft))}},rt=()=>_,it=(lt,ct=rt,ut=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let ft=ct(_);function pt(){const gt=ct(_);if(!ut(ft,gt)){const xt=ft;lt(ft=gt,xt)}}return tt.add(pt),()=>tt.delete(pt)},st={setState:nt,getState:rt,subscribe:(lt,ct,ut)=>ct||ut?it(lt,ct,ut):(tt.add(lt),()=>tt.delete(lt)),destroy:()=>tt.clear()};return _=_e(nt,rt,st),st}const isSSR=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),useIsomorphicLayoutEffect$2=isSSR?reactExports.useEffect:reactExports.useLayoutEffect;function create(_e){const _=typeof _e=="function"?createStore$1(_e):_e,tt=(nt=_.getState,rt=Object.is)=>{const[,it]=reactExports.useReducer(yt=>yt+1,0),at=_.getState(),ot=reactExports.useRef(at),st=reactExports.useRef(nt),lt=reactExports.useRef(rt),ct=reactExports.useRef(!1),ut=reactExports.useRef();ut.current===void 0&&(ut.current=nt(at));let ft,pt=!1;(ot.current!==at||st.current!==nt||lt.current!==rt||ct.current)&&(ft=nt(at),pt=!rt(ut.current,ft)),useIsomorphicLayoutEffect$2(()=>{pt&&(ut.current=ft),ot.current=at,st.current=nt,lt.current=rt,ct.current=!1});const gt=reactExports.useRef(at);useIsomorphicLayoutEffect$2(()=>{const yt=()=>{try{const At=_.getState(),vt=st.current(At);lt.current(ut.current,vt)||(ot.current=At,ut.current=vt,it())}catch{ct.current=!0,it()}},mt=_.subscribe(yt);return _.getState()!==gt.current&&yt(),mt},[]);const xt=pt?ft:ut.current;return reactExports.useDebugValue(xt),xt};return Object.assign(tt,_),tt[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const nt=[tt,_];return{next(){const rt=nt.length<=0;return{value:nt.shift(),done:rt}}}},tt}var reactReconciler={exports:{}},scheduler$1={exports:{}},scheduler_production_min$1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(_e){function _(Dt,zt){var $t=Dt.length;Dt.push(zt);e:for(;0<$t;){var Lt=$t-1>>>1,Vt=Dt[Lt];if(0<rt(Vt,zt))Dt[Lt]=zt,Dt[$t]=Vt,$t=Lt;else break e}}function tt(Dt){return Dt.length===0?null:Dt[0]}function nt(Dt){if(Dt.length===0)return null;var zt=Dt[0],$t=Dt.pop();if($t!==zt){Dt[0]=$t;e:for(var Lt=0,Vt=Dt.length,tn=Vt>>>1;Lt<tn;){var an=2*(Lt+1)-1,on=Dt[an],sn=an+1,ln=Dt[sn];if(0>rt(on,$t))sn<Vt&&0>rt(ln,on)?(Dt[Lt]=ln,Dt[sn]=$t,Lt=sn):(Dt[Lt]=on,Dt[an]=$t,Lt=an);else if(sn<Vt&&0>rt(ln,$t))Dt[Lt]=ln,Dt[sn]=$t,Lt=sn;else break e}}return zt}function rt(Dt,zt){var $t=Dt.sortIndex-zt.sortIndex;return $t!==0?$t:Dt.id-zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var at=Date,ot=at.now();_e.unstable_now=function(){return at.now()-ot}}var st=[],lt=[],ct=1,ut=null,ft=3,pt=!1,gt=!1,xt=!1,yt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,At=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function vt(Dt){for(var zt=tt(lt);zt!==null;){if(zt.callback===null)nt(lt);else if(zt.startTime<=Dt)nt(lt),zt.sortIndex=zt.expirationTime,_(st,zt);else break;zt=tt(lt)}}function Et(Dt){if(xt=!1,vt(Dt),!gt)if(tt(st)!==null)gt=!0,Xt(Ct);else{var zt=tt(lt);zt!==null&&Jt(Et,zt.startTime-Dt)}}function Ct(Dt,zt){gt=!1,xt&&(xt=!1,mt(It),It=-1),pt=!0;var $t=ft;try{for(vt(zt),ut=tt(st);ut!==null&&(!(ut.expirationTime>zt)||Dt&&!Ft());){var Lt=ut.callback;if(typeof Lt=="function"){ut.callback=null,ft=ut.priorityLevel;var Vt=Lt(ut.expirationTime<=zt);zt=_e.unstable_now(),typeof Vt=="function"?ut.callback=Vt:ut===tt(st)&&nt(st),vt(zt)}else nt(st);ut=tt(st)}if(ut!==null)var tn=!0;else{var an=tt(lt);an!==null&&Jt(Et,an.startTime-zt),tn=!1}return tn}finally{ut=null,ft=$t,pt=!1}}var Tt=!1,bt=null,It=-1,wt=5,Rt=-1;function Ft(){return!(_e.unstable_now()-Rt<wt)}function Ut(){if(bt!==null){var Dt=_e.unstable_now();Rt=Dt;var zt=!0;try{zt=bt(!0,Dt)}finally{zt?Gt():(Tt=!1,bt=null)}}else Tt=!1}var Gt;if(typeof At=="function")Gt=function(){At(Ut)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,jt=Ht.port2;Ht.port1.onmessage=Ut,Gt=function(){jt.postMessage(null)}}else Gt=function(){yt(Ut,0)};function Xt(Dt){bt=Dt,Tt||(Tt=!0,Gt())}function Jt(Dt,zt){It=yt(function(){Dt(_e.unstable_now())},zt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Dt){Dt.callback=null},_e.unstable_continueExecution=function(){gt||pt||(gt=!0,Xt(Ct))},_e.unstable_forceFrameRate=function(Dt){0>Dt||125<Dt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<Dt?Math.floor(1e3/Dt):5},_e.unstable_getCurrentPriorityLevel=function(){return ft},_e.unstable_getFirstCallbackNode=function(){return tt(st)},_e.unstable_next=function(Dt){switch(ft){case 1:case 2:case 3:var zt=3;break;default:zt=ft}var $t=ft;ft=zt;try{return Dt()}finally{ft=$t}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Dt,zt){switch(Dt){case 1:case 2:case 3:case 4:case 5:break;default:Dt=3}var $t=ft;ft=Dt;try{return zt()}finally{ft=$t}},_e.unstable_scheduleCallback=function(Dt,zt,$t){var Lt=_e.unstable_now();switch(typeof $t=="object"&&$t!==null?($t=$t.delay,$t=typeof $t=="number"&&0<$t?Lt+$t:Lt):$t=Lt,Dt){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=$t+Vt,Dt={id:ct++,callback:zt,priorityLevel:Dt,startTime:$t,expirationTime:Vt,sortIndex:-1},$t>Lt?(Dt.sortIndex=$t,_(lt,Dt),tt(st)===null&&Dt===tt(lt)&&(xt?(mt(It),It=-1):xt=!0,Jt(Et,$t-Lt))):(Dt.sortIndex=Vt,_(st,Dt),gt||pt||(gt=!0,Xt(Ct))),Dt},_e.unstable_shouldYield=Ft,_e.unstable_wrapCallback=function(Dt){var zt=ft;return function(){var $t=ft;ft=zt;try{return Dt.apply(this,arguments)}finally{ft=$t}}}}(scheduler_production_min$1)),scheduler_production_min$1}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler$1.exports=requireScheduler_production_min()),scheduler$1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var reactReconciler_production_min=function(_){var tt={},nt=reactExports,rt=requireScheduler(),it=Object.assign;function at(ht){for(var dt="https://reactjs.org/docs/error-decoder.html?invariant="+ht,_t=1;_t<arguments.length;_t++)dt+="&args[]="+encodeURIComponent(arguments[_t]);return"Minified React error #"+ht+"; visit "+dt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ot=nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,st=Symbol.for("react.element"),lt=Symbol.for("react.portal"),ct=Symbol.for("react.fragment"),ut=Symbol.for("react.strict_mode"),ft=Symbol.for("react.profiler"),pt=Symbol.for("react.provider"),gt=Symbol.for("react.context"),xt=Symbol.for("react.forward_ref"),yt=Symbol.for("react.suspense"),mt=Symbol.for("react.suspense_list"),At=Symbol.for("react.memo"),vt=Symbol.for("react.lazy"),Et=Symbol.for("react.offscreen"),Ct=Symbol.iterator;function Tt(ht){return ht===null||typeof ht!="object"?null:(ht=Ct&&ht[Ct]||ht["@@iterator"],typeof ht=="function"?ht:null)}function bt(ht){if(ht==null)return null;if(typeof ht=="function")return ht.displayName||ht.name||null;if(typeof ht=="string")return ht;switch(ht){case ct:return"Fragment";case lt:return"Portal";case ft:return"Profiler";case ut:return"StrictMode";case yt:return"Suspense";case mt:return"SuspenseList"}if(typeof ht=="object")switch(ht.$$typeof){case gt:return(ht.displayName||"Context")+".Consumer";case pt:return(ht._context.displayName||"Context")+".Provider";case xt:var dt=ht.render;return ht=ht.displayName,ht||(ht=dt.displayName||dt.name||"",ht=ht!==""?"ForwardRef("+ht+")":"ForwardRef"),ht;case At:return dt=ht.displayName||null,dt!==null?dt:bt(ht.type)||"Memo";case vt:dt=ht._payload,ht=ht._init;try{return bt(ht(dt))}catch{}}return null}function It(ht){var dt=ht.type;switch(ht.tag){case 24:return"Cache";case 9:return(dt.displayName||"Context")+".Consumer";case 10:return(dt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ht=dt.render,ht=ht.displayName||ht.name||"",dt.displayName||(ht!==""?"ForwardRef("+ht+")":"ForwardRef");case 7:return"Fragment";case 5:return dt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bt(dt);case 8:return dt===ut?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof dt=="function")return dt.displayName||dt.name||null;if(typeof dt=="string")return dt}return null}function wt(ht){var dt=ht,_t=ht;if(ht.alternate)for(;dt.return;)dt=dt.return;else{ht=dt;do dt=ht,dt.flags&4098&&(_t=dt.return),ht=dt.return;while(ht)}return dt.tag===3?_t:null}function Rt(ht){if(wt(ht)!==ht)throw Error(at(188))}function Ft(ht){var dt=ht.alternate;if(!dt){if(dt=wt(ht),dt===null)throw Error(at(188));return dt!==ht?null:ht}for(var _t=ht,St=dt;;){var Mt=_t.return;if(Mt===null)break;var Bt=Mt.alternate;if(Bt===null){if(St=Mt.return,St!==null){_t=St;continue}break}if(Mt.child===Bt.child){for(Bt=Mt.child;Bt;){if(Bt===_t)return Rt(Mt),ht;if(Bt===St)return Rt(Mt),dt;Bt=Bt.sibling}throw Error(at(188))}if(_t.return!==St.return)_t=Mt,St=Bt;else{for(var Zt=!1,fn=Mt.child;fn;){if(fn===_t){Zt=!0,_t=Mt,St=Bt;break}if(fn===St){Zt=!0,St=Mt,_t=Bt;break}fn=fn.sibling}if(!Zt){for(fn=Bt.child;fn;){if(fn===_t){Zt=!0,_t=Bt,St=Mt;break}if(fn===St){Zt=!0,St=Bt,_t=Mt;break}fn=fn.sibling}if(!Zt)throw Error(at(189))}}if(_t.alternate!==St)throw Error(at(190))}if(_t.tag!==3)throw Error(at(188));return _t.stateNode.current===_t?ht:dt}function Ut(ht){return ht=Ft(ht),ht!==null?Gt(ht):null}function Gt(ht){if(ht.tag===5||ht.tag===6)return ht;for(ht=ht.child;ht!==null;){var dt=Gt(ht);if(dt!==null)return dt;ht=ht.sibling}return null}function Ht(ht){if(ht.tag===5||ht.tag===6)return ht;for(ht=ht.child;ht!==null;){if(ht.tag!==4){var dt=Ht(ht);if(dt!==null)return dt}ht=ht.sibling}return null}var jt=Array.isArray,Xt=_.getPublicInstance,Jt=_.getRootHostContext,Dt=_.getChildHostContext,zt=_.prepareForCommit,$t=_.resetAfterCommit,Lt=_.createInstance,Vt=_.appendInitialChild,tn=_.finalizeInitialChildren,an=_.prepareUpdate,on=_.shouldSetTextContent,sn=_.createTextInstance,ln=_.scheduleTimeout,cn=_.cancelTimeout,In=_.noTimeout,zn=_.isPrimaryRenderer,yn=_.supportsMutation,Wt=_.supportsPersistence,_n=_.supportsHydration,gn=_.getInstanceFromNode,vn=_.preparePortalMount,mn=_.getCurrentEventPriority,Wn=_.detachDeletedInstance,xn=_.supportsMicrotasks,Dn=_.scheduleMicrotask,Fn=_.supportsTestSelectors,bn=_.findFiberRoot,jn=_.getBoundingRect,Nt=_.getTextContent,kt=_.isHiddenSubtree,rn=_.matchAccessibilityRole,Mn=_.setFocusIfFocusable,wn=_.setupIntersectionObserver,Tn=_.appendChild,Gn=_.appendChildToContainer,Un=_.commitTextUpdate,dn=_.commitMount,Vn=_.commitUpdate,Qn=_.insertBefore,Nn=_.insertInContainerBefore,kn=_.removeChild,$n=_.removeChildFromContainer,Yn=_.resetTextContent,tr=_.hideInstance,nn=_.hideTextInstance,pn=_.unhideInstance,An=_.unhideTextInstance,Hn=_.clearContainer,Jn=_.cloneInstance,Ar=_.createContainerChildSet,Er=_.appendChildToContainerChildSet,Tr=_.finalizeContainerChildren,Rr=_.replaceContainerChildren,Pr=_.cloneHiddenInstance,Mr=_.cloneHiddenTextInstance,_r=_.canHydrateInstance,ba=_.canHydrateTextInstance,_i=_.canHydrateSuspenseInstance,Ir=_.isSuspenseInstancePending,Nr=_.isSuspenseInstanceFallback,Qr=_.registerSuspenseInstanceRetry,Lr=_.getNextHydratableSibling,sr=_.getFirstHydratableChild,Xr=_.getFirstHydratableChildWithinContainer,go=_.getFirstHydratableChildWithinSuspenseInstance,Ot=_.hydrateInstance,Pt=_.hydrateTextInstance,Qt=_.hydrateSuspenseInstance,Kt=_.getNextHydratableInstanceAfterSuspenseInstance,Yt=_.commitHydratedContainer,en=_.commitHydratedSuspenseInstance,En=_.clearSuspenseBoundary,Sn=_.clearSuspenseBoundaryFromContainer,Pn=_.shouldDeleteUnhydratedTailInstances,Bn=_.didNotMatchHydratedContainerTextInstance,On=_.didNotMatchHydratedTextInstance,un;function er(ht){if(un===void 0)try{throw Error()}catch(_t){var dt=_t.stack.trim().match(/\n( *(at )?)/);un=dt&&dt[1]||""}return`
`+un+ht}var Kn=!1;function qn(ht,dt){if(!ht||Kn)return"";Kn=!0;var _t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(dt)if(dt=function(){throw Error()},Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Xn){var St=Xn}Reflect.construct(ht,[],dt)}else{try{dt.call()}catch(Xn){St=Xn}ht.call(dt.prototype)}else{try{throw Error()}catch(Xn){St=Xn}ht()}}catch(Xn){if(Xn&&St&&typeof Xn.stack=="string"){for(var Mt=Xn.stack.split(`
`),Bt=St.stack.split(`
`),Zt=Mt.length-1,fn=Bt.length-1;1<=Zt&&0<=fn&&Mt[Zt]!==Bt[fn];)fn--;for(;1<=Zt&&0<=fn;Zt--,fn--)if(Mt[Zt]!==Bt[fn]){if(Zt!==1||fn!==1)do if(Zt--,fn--,0>fn||Mt[Zt]!==Bt[fn]){var Ln=`
`+Mt[Zt].replace(" at new "," at ");return ht.displayName&&Ln.includes("<anonymous>")&&(Ln=Ln.replace("<anonymous>",ht.displayName)),Ln}while(1<=Zt&&0<=fn);break}}}finally{Kn=!1,Error.prepareStackTrace=_t}return(ht=ht?ht.displayName||ht.name:"")?er(ht):""}var or=Object.prototype.hasOwnProperty,fr=[],lr=-1;function Zn(ht){return{current:ht}}function hr(ht){0>lr||(ht.current=fr[lr],fr[lr]=null,lr--)}function ir(ht,dt){lr++,fr[lr]=ht.current,ht.current=dt}var gr={},Dr=Zn(gr),pr=Zn(!1),Fr=gr;function br(ht,dt){var _t=ht.type.contextTypes;if(!_t)return gr;var St=ht.stateNode;if(St&&St.__reactInternalMemoizedUnmaskedChildContext===dt)return St.__reactInternalMemoizedMaskedChildContext;var Mt={},Bt;for(Bt in _t)Mt[Bt]=dt[Bt];return St&&(ht=ht.stateNode,ht.__reactInternalMemoizedUnmaskedChildContext=dt,ht.__reactInternalMemoizedMaskedChildContext=Mt),Mt}function kr(ht){return ht=ht.childContextTypes,ht!=null}function $r(){hr(pr),hr(Dr)}function mr(ht,dt,_t){if(Dr.current!==gr)throw Error(at(168));ir(Dr,dt),ir(pr,_t)}function Gr(ht,dt,_t){var St=ht.stateNode;if(dt=dt.childContextTypes,typeof St.getChildContext!="function")return _t;St=St.getChildContext();for(var Mt in St)if(!(Mt in dt))throw Error(at(108,It(ht)||"Unknown",Mt));return it({},_t,St)}function Br(ht){return ht=(ht=ht.stateNode)&&ht.__reactInternalMemoizedMergedChildContext||gr,Fr=Dr.current,ir(Dr,ht),ir(pr,pr.current),!0}function vr(ht,dt,_t){var St=ht.stateNode;if(!St)throw Error(at(169));_t?(ht=Gr(ht,dt,Fr),St.__reactInternalMemoizedMergedChildContext=ht,hr(pr),hr(Dr),ir(Dr,ht)):hr(pr),ir(pr,_t)}var zr=Math.clz32?Math.clz32:_o,mo=Math.log,qr=Math.LN2;function _o(ht){return ht>>>=0,ht===0?32:31-(mo(ht)/qr|0)|0}var Qo=64,Wo=4194304;function jo(ht){switch(ht&-ht){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ht&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ht&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ht}}function hs(ht,dt){var _t=ht.pendingLanes;if(_t===0)return 0;var St=0,Mt=ht.suspendedLanes,Bt=ht.pingedLanes,Zt=_t&268435455;if(Zt!==0){var fn=Zt&~Mt;fn!==0?St=jo(fn):(Bt&=Zt,Bt!==0&&(St=jo(Bt)))}else Zt=_t&~Mt,Zt!==0?St=jo(Zt):Bt!==0&&(St=jo(Bt));if(St===0)return 0;if(dt!==0&&dt!==St&&!(dt&Mt)&&(Mt=St&-St,Bt=dt&-dt,Mt>=Bt||Mt===16&&(Bt&4194240)!==0))return dt;if(St&4&&(St|=_t&16),dt=ht.entangledLanes,dt!==0)for(ht=ht.entanglements,dt&=St;0<dt;)_t=31-zr(dt),Mt=1<<_t,St|=ht[_t],dt&=~Mt;return St}function Pl(ht,dt){switch(ht){case 1:case 2:case 4:return dt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return dt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gs(ht,dt){for(var _t=ht.suspendedLanes,St=ht.pingedLanes,Mt=ht.expirationTimes,Bt=ht.pendingLanes;0<Bt;){var Zt=31-zr(Bt),fn=1<<Zt,Ln=Mt[Zt];Ln===-1?(!(fn&_t)||fn&St)&&(Mt[Zt]=Pl(fn,dt)):Ln<=dt&&(ht.expiredLanes|=fn),Bt&=~fn}}function Xo(ht){return ht=ht.pendingLanes&-1073741825,ht!==0?ht:ht&1073741824?1073741824:0}function ws(ht){for(var dt=[],_t=0;31>_t;_t++)dt.push(ht);return dt}function No(ht,dt,_t){ht.pendingLanes|=dt,dt!==536870912&&(ht.suspendedLanes=0,ht.pingedLanes=0),ht=ht.eventTimes,dt=31-zr(dt),ht[dt]=_t}function ts(ht,dt){var _t=ht.pendingLanes&~dt;ht.pendingLanes=dt,ht.suspendedLanes=0,ht.pingedLanes=0,ht.expiredLanes&=dt,ht.mutableReadLanes&=dt,ht.entangledLanes&=dt,dt=ht.entanglements;var St=ht.eventTimes;for(ht=ht.expirationTimes;0<_t;){var Mt=31-zr(_t),Bt=1<<Mt;dt[Mt]=0,St[Mt]=-1,ht[Mt]=-1,_t&=~Bt}}function $o(ht,dt){var _t=ht.entangledLanes|=dt;for(ht=ht.entanglements;_t;){var St=31-zr(_t),Mt=1<<St;Mt&dt|ht[St]&dt&&(ht[St]|=dt),_t&=~Mt}}var wr=0;function Vs(ht){return ht&=-ht,1<ht?4<ht?ht&268435455?16:536870912:4:1}var Yo=rt.unstable_scheduleCallback,Ms=rt.unstable_cancelCallback,zs=rt.unstable_shouldYield,Bl=rt.unstable_requestPaint,Wr=rt.unstable_now,ds=rt.unstable_ImmediatePriority,Ll=rt.unstable_UserBlockingPriority,lo=rt.unstable_NormalPriority,Hs=rt.unstable_IdlePriority,ps=null,Eo=null;function Qs(ht){if(Eo&&typeof Eo.onCommitFiberRoot=="function")try{Eo.onCommitFiberRoot(ps,ht,void 0,(ht.current.flags&128)===128)}catch{}}function Dl(ht,dt){return ht===dt&&(ht!==0||1/ht===1/dt)||ht!==ht&&dt!==dt}var So=typeof Object.is=="function"?Object.is:Dl,co=null,Go=!1,Io=!1;function Ws(ht){co===null?co=[ht]:co.push(ht)}function js(ht){Go=!0,Ws(ht)}function Ao(){if(!Io&&co!==null){Io=!0;var ht=0,dt=wr;try{var _t=co;for(wr=1;ht<_t.length;ht++){var St=_t[ht];do St=St(!0);while(St!==null)}co=null,Go=!1}catch(Mt){throw co!==null&&(co=co.slice(ht+1)),Yo(ds,Ao),Mt}finally{wr=dt,Io=!1}}return null}var gs=ot.ReactCurrentBatchConfig;function ms(ht,dt){if(So(ht,dt))return!0;if(typeof ht!="object"||ht===null||typeof dt!="object"||dt===null)return!1;var _t=Object.keys(ht),St=Object.keys(dt);if(_t.length!==St.length)return!1;for(St=0;St<_t.length;St++){var Mt=_t[St];if(!or.call(dt,Mt)||!So(ht[Mt],dt[Mt]))return!1}return!0}function As(ht){switch(ht.tag){case 5:return er(ht.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 2:case 15:return ht=qn(ht.type,!1),ht;case 11:return ht=qn(ht.type.render,!1),ht;case 1:return ht=qn(ht.type,!0),ht;default:return""}}function uo(ht,dt){if(ht&&ht.defaultProps){dt=it({},dt),ht=ht.defaultProps;for(var _t in ht)dt[_t]===void 0&&(dt[_t]=ht[_t]);return dt}return dt}var $a=Zn(null),Is=null,Oo=null,ns=null;function Rs(){ns=Oo=Is=null}function Fl(ht,dt,_t){zn?(ir($a,dt._currentValue),dt._currentValue=_t):(ir($a,dt._currentValue2),dt._currentValue2=_t)}function eo(ht){var dt=$a.current;hr($a),zn?ht._currentValue=dt:ht._currentValue2=dt}function fo(ht,dt,_t){for(;ht!==null;){var St=ht.alternate;if((ht.childLanes&dt)!==dt?(ht.childLanes|=dt,St!==null&&(St.childLanes|=dt)):St!==null&&(St.childLanes&dt)!==dt&&(St.childLanes|=dt),ht===_t)break;ht=ht.return}}function Kr(ht,dt){Is=ht,ns=Oo=null,ht=ht.dependencies,ht!==null&&ht.firstContext!==null&&(ht.lanes&dt&&(wo=!0),ht.firstContext=null)}function Jr(ht){var dt=zn?ht._currentValue:ht._currentValue2;if(ns!==ht)if(ht={context:ht,memoizedValue:dt,next:null},Oo===null){if(Is===null)throw Error(at(308));Oo=ht,Is.dependencies={lanes:0,firstContext:ht}}else Oo=Oo.next=ht;return dt}var Co=null,rs=!1;function Eu(ht){ht.updateQueue={baseState:ht.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hp(ht,dt){ht=ht.updateQueue,dt.updateQueue===ht&&(dt.updateQueue={baseState:ht.baseState,firstBaseUpdate:ht.firstBaseUpdate,lastBaseUpdate:ht.lastBaseUpdate,shared:ht.shared,effects:ht.effects})}function qo(ht,dt){return{eventTime:ht,lane:dt,tag:0,payload:null,callback:null,next:null}}function as(ht,dt){var _t=ht.updateQueue;_t!==null&&(_t=_t.shared,na!==null&&ht.mode&1&&!(Cr&2)?(ht=_t.interleaved,ht===null?(dt.next=dt,Co===null?Co=[_t]:Co.push(_t)):(dt.next=ht.next,ht.next=dt),_t.interleaved=dt):(ht=_t.pending,ht===null?dt.next=dt:(dt.next=ht.next,ht.next=dt),_t.pending=dt))}function Ol(ht,dt,_t){if(dt=dt.updateQueue,dt!==null&&(dt=dt.shared,(_t&4194240)!==0)){var St=dt.lanes;St&=ht.pendingLanes,_t|=St,dt.lanes=_t,$o(ht,_t)}}function dp(ht,dt){var _t=ht.updateQueue,St=ht.alternate;if(St!==null&&(St=St.updateQueue,_t===St)){var Mt=null,Bt=null;if(_t=_t.firstBaseUpdate,_t!==null){do{var Zt={eventTime:_t.eventTime,lane:_t.lane,tag:_t.tag,payload:_t.payload,callback:_t.callback,next:null};Bt===null?Mt=Bt=Zt:Bt=Bt.next=Zt,_t=_t.next}while(_t!==null);Bt===null?Mt=Bt=dt:Bt=Bt.next=dt}else Mt=Bt=dt;_t={baseState:St.baseState,firstBaseUpdate:Mt,lastBaseUpdate:Bt,shared:St.shared,effects:St.effects},ht.updateQueue=_t;return}ht=_t.lastBaseUpdate,ht===null?_t.firstBaseUpdate=dt:ht.next=dt,_t.lastBaseUpdate=dt}function Ul(ht,dt,_t,St){var Mt=ht.updateQueue;rs=!1;var Bt=Mt.firstBaseUpdate,Zt=Mt.lastBaseUpdate,fn=Mt.shared.pending;if(fn!==null){Mt.shared.pending=null;var Ln=fn,Xn=Ln.next;Ln.next=null,Zt===null?Bt=Xn:Zt.next=Xn,Zt=Ln;var ar=ht.alternate;ar!==null&&(ar=ar.updateQueue,fn=ar.lastBaseUpdate,fn!==Zt&&(fn===null?ar.firstBaseUpdate=Xn:fn.next=Xn,ar.lastBaseUpdate=Ln))}if(Bt!==null){var yr=Mt.baseState;Zt=0,ar=Xn=Ln=null,fn=Bt;do{var dr=fn.lane,Vr=fn.eventTime;if((St&dr)===dr){ar!==null&&(ar=ar.next={eventTime:Vr,lane:0,tag:fn.tag,payload:fn.payload,callback:fn.callback,next:null});e:{var ur=ht,so=fn;switch(dr=dt,Vr=_t,so.tag){case 1:if(ur=so.payload,typeof ur=="function"){yr=ur.call(Vr,yr,dr);break e}yr=ur;break e;case 3:ur.flags=ur.flags&-65537|128;case 0:if(ur=so.payload,dr=typeof ur=="function"?ur.call(Vr,yr,dr):ur,dr==null)break e;yr=it({},yr,dr);break e;case 2:rs=!0}}fn.callback!==null&&fn.lane!==0&&(ht.flags|=64,dr=Mt.effects,dr===null?Mt.effects=[fn]:dr.push(fn))}else Vr={eventTime:Vr,lane:dr,tag:fn.tag,payload:fn.payload,callback:fn.callback,next:null},ar===null?(Xn=ar=Vr,Ln=yr):ar=ar.next=Vr,Zt|=dr;if(fn=fn.next,fn===null){if(fn=Mt.shared.pending,fn===null)break;dr=fn,fn=dr.next,dr.next=null,Mt.lastBaseUpdate=dr,Mt.shared.pending=null}}while(1);if(ar===null&&(Ln=yr),Mt.baseState=Ln,Mt.firstBaseUpdate=Xn,Mt.lastBaseUpdate=ar,dt=Mt.shared.interleaved,dt!==null){Mt=dt;do Zt|=Mt.lane,Mt=Mt.next;while(Mt!==dt)}else Bt===null&&(Mt.shared.lanes=0);Ns|=Zt,ht.lanes=Zt,ht.memoizedState=yr}}function pp(ht,dt,_t){if(ht=dt.effects,dt.effects=null,ht!==null)for(dt=0;dt<ht.length;dt++){var St=ht[dt],Mt=St.callback;if(Mt!==null){if(St.callback=null,St=_t,typeof Mt!="function")throw Error(at(191,Mt));Mt.call(St)}}}var gp=new nt.Component().refs;function Su(ht,dt,_t,St){dt=ht.memoizedState,_t=_t(St,dt),_t=_t==null?dt:it({},dt,_t),ht.memoizedState=_t,ht.lanes===0&&(ht.updateQueue.baseState=_t)}var Nl={isMounted:function(ht){return(ht=ht._reactInternals)?wt(ht)===ht:!1},enqueueSetState:function(ht,dt,_t){ht=ht._reactInternals;var St=po(),Mt=ls(ht),Bt=qo(St,Mt);Bt.payload=dt,_t!=null&&(Bt.callback=_t),as(ht,Bt),dt=Do(ht,Mt,St),dt!==null&&Ol(dt,ht,Mt)},enqueueReplaceState:function(ht,dt,_t){ht=ht._reactInternals;var St=po(),Mt=ls(ht),Bt=qo(St,Mt);Bt.tag=1,Bt.payload=dt,_t!=null&&(Bt.callback=_t),as(ht,Bt),dt=Do(ht,Mt,St),dt!==null&&Ol(dt,ht,Mt)},enqueueForceUpdate:function(ht,dt){ht=ht._reactInternals;var _t=po(),St=ls(ht),Mt=qo(_t,St);Mt.tag=2,dt!=null&&(Mt.callback=dt),as(ht,Mt),dt=Do(ht,St,_t),dt!==null&&Ol(dt,ht,St)}};function mp(ht,dt,_t,St,Mt,Bt,Zt){return ht=ht.stateNode,typeof ht.shouldComponentUpdate=="function"?ht.shouldComponentUpdate(St,Bt,Zt):dt.prototype&&dt.prototype.isPureReactComponent?!ms(_t,St)||!ms(Mt,Bt):!0}function Ap(ht,dt,_t){var St=!1,Mt=gr,Bt=dt.contextType;return typeof Bt=="object"&&Bt!==null?Bt=Jr(Bt):(Mt=kr(dt)?Fr:Dr.current,St=dt.contextTypes,Bt=(St=St!=null)?br(ht,Mt):gr),dt=new dt(_t,Bt),ht.memoizedState=dt.state!==null&&dt.state!==void 0?dt.state:null,dt.updater=Nl,ht.stateNode=dt,dt._reactInternals=ht,St&&(ht=ht.stateNode,ht.__reactInternalMemoizedUnmaskedChildContext=Mt,ht.__reactInternalMemoizedMaskedChildContext=Bt),dt}function vp(ht,dt,_t,St){ht=dt.state,typeof dt.componentWillReceiveProps=="function"&&dt.componentWillReceiveProps(_t,St),typeof dt.UNSAFE_componentWillReceiveProps=="function"&&dt.UNSAFE_componentWillReceiveProps(_t,St),dt.state!==ht&&Nl.enqueueReplaceState(dt,dt.state,null)}function Cu(ht,dt,_t,St){var Mt=ht.stateNode;Mt.props=_t,Mt.state=ht.memoizedState,Mt.refs=gp,Eu(ht);var Bt=dt.contextType;typeof Bt=="object"&&Bt!==null?Mt.context=Jr(Bt):(Bt=kr(dt)?Fr:Dr.current,Mt.context=br(ht,Bt)),Mt.state=ht.memoizedState,Bt=dt.getDerivedStateFromProps,typeof Bt=="function"&&(Su(ht,dt,Bt,_t),Mt.state=ht.memoizedState),typeof dt.getDerivedStateFromProps=="function"||typeof Mt.getSnapshotBeforeUpdate=="function"||typeof Mt.UNSAFE_componentWillMount!="function"&&typeof Mt.componentWillMount!="function"||(dt=Mt.state,typeof Mt.componentWillMount=="function"&&Mt.componentWillMount(),typeof Mt.UNSAFE_componentWillMount=="function"&&Mt.UNSAFE_componentWillMount(),dt!==Mt.state&&Nl.enqueueReplaceState(Mt,Mt.state,null),Ul(ht,_t,Mt,St),Mt.state=ht.memoizedState),typeof Mt.componentDidMount=="function"&&(ht.flags|=4194308)}var Ps=[],Bs=0,$l=null,Gl=0,Ro=[],Po=0,vs=null,Ko=1,Jo="";function ys(ht,dt){Ps[Bs++]=Gl,Ps[Bs++]=$l,$l=ht,Gl=dt}function yp(ht,dt,_t){Ro[Po++]=Ko,Ro[Po++]=Jo,Ro[Po++]=vs,vs=ht;var St=Ko;ht=Jo;var Mt=32-zr(St)-1;St&=~(1<<Mt),_t+=1;var Bt=32-zr(dt)+Mt;if(30<Bt){var Zt=Mt-Mt%5;Bt=(St&(1<<Zt)-1).toString(32),St>>=Zt,Mt-=Zt,Ko=1<<32-zr(dt)+Mt|_t<<Mt|St,Jo=Bt+ht}else Ko=1<<Bt|_t<<Mt|St,Jo=ht}function Tu(ht){ht.return!==null&&(ys(ht,1),yp(ht,1,0))}function bu(ht){for(;ht===$l;)$l=Ps[--Bs],Ps[Bs]=null,Gl=Ps[--Bs],Ps[Bs]=null;for(;ht===vs;)vs=Ro[--Po],Ro[Po]=null,Jo=Ro[--Po],Ro[Po]=null,Ko=Ro[--Po],Ro[Po]=null}var To=null,bo=null,Hr=!1,Xs=!1,Uo=null;function xp(ht,dt){var _t=Fo(5,null,null,0);_t.elementType="DELETED",_t.stateNode=dt,_t.return=ht,dt=ht.deletions,dt===null?(ht.deletions=[_t],ht.flags|=16):dt.push(_t)}function _p(ht,dt){switch(ht.tag){case 5:return dt=_r(dt,ht.type,ht.pendingProps),dt!==null?(ht.stateNode=dt,To=ht,bo=sr(dt),!0):!1;case 6:return dt=ba(dt,ht.pendingProps),dt!==null?(ht.stateNode=dt,To=ht,bo=null,!0):!1;case 13:if(dt=_i(dt),dt!==null){var _t=vs!==null?{id:Ko,overflow:Jo}:null;return ht.memoizedState={dehydrated:dt,treeContext:_t,retryLane:1073741824},_t=Fo(18,null,null,0),_t.stateNode=dt,_t.return=ht,ht.child=_t,To=ht,bo=null,!0}return!1;default:return!1}}function wu(ht){return(ht.mode&1)!==0&&(ht.flags&128)===0}function Mu(ht){if(Hr){var dt=bo;if(dt){var _t=dt;if(!_p(ht,dt)){if(wu(ht))throw Error(at(418));dt=Lr(_t);var St=To;dt&&_p(ht,dt)?xp(St,_t):(ht.flags=ht.flags&-4097|2,Hr=!1,To=ht)}}else{if(wu(ht))throw Error(at(418));ht.flags=ht.flags&-4097|2,Hr=!1,To=ht}}}function Ep(ht){for(ht=ht.return;ht!==null&&ht.tag!==5&&ht.tag!==3&&ht.tag!==13;)ht=ht.return;To=ht}function Ys(ht){if(!_n||ht!==To)return!1;if(!Hr)return Ep(ht),Hr=!0,!1;if(ht.tag!==3&&(ht.tag!==5||Pn(ht.type)&&!on(ht.type,ht.memoizedProps))){var dt=bo;if(dt){if(wu(ht)){for(ht=bo;ht;)ht=Lr(ht);throw Error(at(418))}for(;dt;)xp(ht,dt),dt=Lr(dt)}}if(Ep(ht),ht.tag===13){if(!_n)throw Error(at(316));if(ht=ht.memoizedState,ht=ht!==null?ht.dehydrated:null,!ht)throw Error(at(317));bo=Kt(ht)}else bo=To?Lr(ht.stateNode):null;return!0}function Ls(){_n&&(bo=To=null,Xs=Hr=!1)}function Iu(ht){Uo===null?Uo=[ht]:Uo.push(ht)}function qs(ht,dt,_t){if(ht=_t.ref,ht!==null&&typeof ht!="function"&&typeof ht!="object"){if(_t._owner){if(_t=_t._owner,_t){if(_t.tag!==1)throw Error(at(309));var St=_t.stateNode}if(!St)throw Error(at(147,ht));var Mt=St,Bt=""+ht;return dt!==null&&dt.ref!==null&&typeof dt.ref=="function"&&dt.ref._stringRef===Bt?dt.ref:(dt=function(Zt){var fn=Mt.refs;fn===gp&&(fn=Mt.refs={}),Zt===null?delete fn[Bt]:fn[Bt]=Zt},dt._stringRef=Bt,dt)}if(typeof ht!="string")throw Error(at(284));if(!_t._owner)throw Error(at(290,ht))}return ht}function Vl(ht,dt){throw ht=Object.prototype.toString.call(dt),Error(at(31,ht==="[object Object]"?"object with keys {"+Object.keys(dt).join(", ")+"}":ht))}function Sp(ht){var dt=ht._init;return dt(ht._payload)}function Cp(ht){function dt(Cn,hn){if(ht){var Rn=Cn.deletions;Rn===null?(Cn.deletions=[hn],Cn.flags|=16):Rn.push(hn)}}function _t(Cn,hn){if(!ht)return null;for(;hn!==null;)dt(Cn,hn),hn=hn.sibling;return null}function St(Cn,hn){for(Cn=new Map;hn!==null;)hn.key!==null?Cn.set(hn.key,hn):Cn.set(hn.index,hn),hn=hn.sibling;return Cn}function Mt(Cn,hn){return Cn=us(Cn,hn),Cn.index=0,Cn.sibling=null,Cn}function Bt(Cn,hn,Rn){return Cn.index=Rn,ht?(Rn=Cn.alternate,Rn!==null?(Rn=Rn.index,Rn<hn?(Cn.flags|=2,hn):Rn):(Cn.flags|=2,hn)):(Cn.flags|=1048576,hn)}function Zt(Cn){return ht&&Cn.alternate===null&&(Cn.flags|=2),Cn}function fn(Cn,hn,Rn,rr){return hn===null||hn.tag!==6?(hn=cp(Rn,Cn.mode,rr),hn.return=Cn,hn):(hn=Mt(hn,Rn),hn.return=Cn,hn)}function Ln(Cn,hn,Rn,rr){var cr=Rn.type;return cr===ct?ar(Cn,hn,Rn.props.children,rr,Rn.key):hn!==null&&(hn.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===vt&&Sp(cr)===hn.type)?(rr=Mt(hn,Rn.props),rr.ref=qs(Cn,hn,Rn),rr.return=Cn,rr):(rr=xu(Rn.type,Rn.key,Rn.props,null,Cn.mode,rr),rr.ref=qs(Cn,hn,Rn),rr.return=Cn,rr)}function Xn(Cn,hn,Rn,rr){return hn===null||hn.tag!==4||hn.stateNode.containerInfo!==Rn.containerInfo||hn.stateNode.implementation!==Rn.implementation?(hn=up(Rn,Cn.mode,rr),hn.return=Cn,hn):(hn=Mt(hn,Rn.children||[]),hn.return=Cn,hn)}function ar(Cn,hn,Rn,rr,cr){return hn===null||hn.tag!==7?(hn=bs(Rn,Cn.mode,rr,cr),hn.return=Cn,hn):(hn=Mt(hn,Rn),hn.return=Cn,hn)}function yr(Cn,hn,Rn){if(typeof hn=="string"&&hn!==""||typeof hn=="number")return hn=cp(""+hn,Cn.mode,Rn),hn.return=Cn,hn;if(typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case st:return Rn=xu(hn.type,hn.key,hn.props,null,Cn.mode,Rn),Rn.ref=qs(Cn,null,hn),Rn.return=Cn,Rn;case lt:return hn=up(hn,Cn.mode,Rn),hn.return=Cn,hn;case vt:var rr=hn._init;return yr(Cn,rr(hn._payload),Rn)}if(jt(hn)||Tt(hn))return hn=bs(hn,Cn.mode,Rn,null),hn.return=Cn,hn;Vl(Cn,hn)}return null}function dr(Cn,hn,Rn,rr){var cr=hn!==null?hn.key:null;if(typeof Rn=="string"&&Rn!==""||typeof Rn=="number")return cr!==null?null:fn(Cn,hn,""+Rn,rr);if(typeof Rn=="object"&&Rn!==null){switch(Rn.$$typeof){case st:return Rn.key===cr?Ln(Cn,hn,Rn,rr):null;case lt:return Rn.key===cr?Xn(Cn,hn,Rn,rr):null;case vt:return cr=Rn._init,dr(Cn,hn,cr(Rn._payload),rr)}if(jt(Rn)||Tt(Rn))return cr!==null?null:ar(Cn,hn,Rn,rr,null);Vl(Cn,Rn)}return null}function Vr(Cn,hn,Rn,rr,cr){if(typeof rr=="string"&&rr!==""||typeof rr=="number")return Cn=Cn.get(Rn)||null,fn(hn,Cn,""+rr,cr);if(typeof rr=="object"&&rr!==null){switch(rr.$$typeof){case st:return Cn=Cn.get(rr.key===null?Rn:rr.key)||null,Ln(hn,Cn,rr,cr);case lt:return Cn=Cn.get(rr.key===null?Rn:rr.key)||null,Xn(hn,Cn,rr,cr);case vt:var Sr=rr._init;return Vr(Cn,hn,Rn,Sr(rr._payload),cr)}if(jt(rr)||Tt(rr))return Cn=Cn.get(Rn)||null,ar(hn,Cn,rr,cr,null);Vl(hn,rr)}return null}function ur(Cn,hn,Rn,rr){for(var cr=null,Sr=null,xr=hn,Or=hn=0,no=null;xr!==null&&Or<Rn.length;Or++){xr.index>Or?(no=xr,xr=null):no=xr.sibling;var Ur=dr(Cn,xr,Rn[Or],rr);if(Ur===null){xr===null&&(xr=no);break}ht&&xr&&Ur.alternate===null&&dt(Cn,xr),hn=Bt(Ur,hn,Or),Sr===null?cr=Ur:Sr.sibling=Ur,Sr=Ur,xr=no}if(Or===Rn.length)return _t(Cn,xr),Hr&&ys(Cn,Or),cr;if(xr===null){for(;Or<Rn.length;Or++)xr=yr(Cn,Rn[Or],rr),xr!==null&&(hn=Bt(xr,hn,Or),Sr===null?cr=xr:Sr.sibling=xr,Sr=xr);return Hr&&ys(Cn,Or),cr}for(xr=St(Cn,xr);Or<Rn.length;Or++)no=Vr(xr,Cn,Or,Rn[Or],rr),no!==null&&(ht&&no.alternate!==null&&xr.delete(no.key===null?Or:no.key),hn=Bt(no,hn,Or),Sr===null?cr=no:Sr.sibling=no,Sr=no);return ht&&xr.forEach(function(fs){return dt(Cn,fs)}),Hr&&ys(Cn,Or),cr}function so(Cn,hn,Rn,rr){var cr=Tt(Rn);if(typeof cr!="function")throw Error(at(150));if(Rn=cr.call(Rn),Rn==null)throw Error(at(151));for(var Sr=cr=null,xr=hn,Or=hn=0,no=null,Ur=Rn.next();xr!==null&&!Ur.done;Or++,Ur=Rn.next()){xr.index>Or?(no=xr,xr=null):no=xr.sibling;var fs=dr(Cn,xr,Ur.value,rr);if(fs===null){xr===null&&(xr=no);break}ht&&xr&&fs.alternate===null&&dt(Cn,xr),hn=Bt(fs,hn,Or),Sr===null?cr=fs:Sr.sibling=fs,Sr=fs,xr=no}if(Ur.done)return _t(Cn,xr),Hr&&ys(Cn,Or),cr;if(xr===null){for(;!Ur.done;Or++,Ur=Rn.next())Ur=yr(Cn,Ur.value,rr),Ur!==null&&(hn=Bt(Ur,hn,Or),Sr===null?cr=Ur:Sr.sibling=Ur,Sr=Ur);return Hr&&ys(Cn,Or),cr}for(xr=St(Cn,xr);!Ur.done;Or++,Ur=Rn.next())Ur=Vr(xr,Cn,Or,Ur.value,rr),Ur!==null&&(ht&&Ur.alternate!==null&&xr.delete(Ur.key===null?Or:Ur.key),hn=Bt(Ur,hn,Or),Sr===null?cr=Ur:Sr.sibling=Ur,Sr=Ur);return ht&&xr.forEach(function(m3){return dt(Cn,m3)}),Hr&&ys(Cn,Or),cr}function ko(Cn,hn,Rn,rr){if(typeof Rn=="object"&&Rn!==null&&Rn.type===ct&&Rn.key===null&&(Rn=Rn.props.children),typeof Rn=="object"&&Rn!==null){switch(Rn.$$typeof){case st:e:{for(var cr=Rn.key,Sr=hn;Sr!==null;){if(Sr.key===cr){if(cr=Rn.type,cr===ct){if(Sr.tag===7){_t(Cn,Sr.sibling),hn=Mt(Sr,Rn.props.children),hn.return=Cn,Cn=hn;break e}}else if(Sr.elementType===cr||typeof cr=="object"&&cr!==null&&cr.$$typeof===vt&&Sp(cr)===Sr.type){_t(Cn,Sr.sibling),hn=Mt(Sr,Rn.props),hn.ref=qs(Cn,Sr,Rn),hn.return=Cn,Cn=hn;break e}_t(Cn,Sr);break}else dt(Cn,Sr);Sr=Sr.sibling}Rn.type===ct?(hn=bs(Rn.props.children,Cn.mode,rr,Rn.key),hn.return=Cn,Cn=hn):(rr=xu(Rn.type,Rn.key,Rn.props,null,Cn.mode,rr),rr.ref=qs(Cn,hn,Rn),rr.return=Cn,Cn=rr)}return Zt(Cn);case lt:e:{for(Sr=Rn.key;hn!==null;){if(hn.key===Sr)if(hn.tag===4&&hn.stateNode.containerInfo===Rn.containerInfo&&hn.stateNode.implementation===Rn.implementation){_t(Cn,hn.sibling),hn=Mt(hn,Rn.children||[]),hn.return=Cn,Cn=hn;break e}else{_t(Cn,hn);break}else dt(Cn,hn);hn=hn.sibling}hn=up(Rn,Cn.mode,rr),hn.return=Cn,Cn=hn}return Zt(Cn);case vt:return Sr=Rn._init,ko(Cn,hn,Sr(Rn._payload),rr)}if(jt(Rn))return ur(Cn,hn,Rn,rr);if(Tt(Rn))return so(Cn,hn,Rn,rr);Vl(Cn,Rn)}return typeof Rn=="string"&&Rn!==""||typeof Rn=="number"?(Rn=""+Rn,hn!==null&&hn.tag===6?(_t(Cn,hn.sibling),hn=Mt(hn,Rn),hn.return=Cn,Cn=hn):(_t(Cn,hn),hn=cp(Rn,Cn.mode,rr),hn.return=Cn,Cn=hn),Zt(Cn)):_t(Cn,hn)}return ko}var Ds=Cp(!0),Tp=Cp(!1),Ks={},Bo=Zn(Ks),Js=Zn(Ks),Fs=Zn(Ks);function Vo(ht){if(ht===Ks)throw Error(at(174));return ht}function Ru(ht,dt){ir(Fs,dt),ir(Js,ht),ir(Bo,Ks),ht=Jt(dt),hr(Bo),ir(Bo,ht)}function ks(){hr(Bo),hr(Js),hr(Fs)}function bp(ht){var dt=Vo(Fs.current),_t=Vo(Bo.current);dt=Dt(_t,ht.type,dt),_t!==dt&&(ir(Js,ht),ir(Bo,dt))}function Pu(ht){Js.current===ht&&(hr(Bo),hr(Js))}var jr=Zn(0);function zl(ht){for(var dt=ht;dt!==null;){if(dt.tag===13){var _t=dt.memoizedState;if(_t!==null&&(_t=_t.dehydrated,_t===null||Ir(_t)||Nr(_t)))return dt}else if(dt.tag===19&&dt.memoizedProps.revealOrder!==void 0){if(dt.flags&128)return dt}else if(dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===ht)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===ht)return null;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}return null}var Bu=[];function Lu(){for(var ht=0;ht<Bu.length;ht++){var dt=Bu[ht];zn?dt._workInProgressVersionPrimary=null:dt._workInProgressVersionSecondary=null}Bu.length=0}var Hl=ot.ReactCurrentDispatcher,Lo=ot.ReactCurrentBatchConfig,Os=0,Yr=null,io=null,to=null,Ql=!1,Zs=!1,Al=0,N0=0;function ao(){throw Error(at(321))}function Du(ht,dt){if(dt===null)return!1;for(var _t=0;_t<dt.length&&_t<ht.length;_t++)if(!So(ht[_t],dt[_t]))return!1;return!0}function Fu(ht,dt,_t,St,Mt,Bt){if(Os=Bt,Yr=dt,dt.memoizedState=null,dt.updateQueue=null,dt.lanes=0,Hl.current=ht===null||ht.memoizedState===null?z0:H0,ht=_t(St,Mt),Zs){Bt=0;do{if(Zs=!1,Al=0,25<=Bt)throw Error(at(301));Bt+=1,to=io=null,dt.updateQueue=null,Hl.current=Q0,ht=_t(St,Mt)}while(Zs)}if(Hl.current=Jl,dt=io!==null&&io.next!==null,Os=0,to=io=Yr=null,Ql=!1,dt)throw Error(at(300));return ht}function ku(){var ht=Al!==0;return Al=0,ht}function Zo(){var ht={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return to===null?Yr.memoizedState=to=ht:to=to.next=ht,to}function zo(){if(io===null){var ht=Yr.alternate;ht=ht!==null?ht.memoizedState:null}else ht=io.next;var dt=to===null?Yr.memoizedState:to.next;if(dt!==null)to=dt,io=ht;else{if(ht===null)throw Error(at(310));io=ht,ht={memoizedState:io.memoizedState,baseState:io.baseState,baseQueue:io.baseQueue,queue:io.queue,next:null},to===null?Yr.memoizedState=to=ht:to=to.next=ht}return to}function xs(ht,dt){return typeof dt=="function"?dt(ht):dt}function Wl(ht){var dt=zo(),_t=dt.queue;if(_t===null)throw Error(at(311));_t.lastRenderedReducer=ht;var St=io,Mt=St.baseQueue,Bt=_t.pending;if(Bt!==null){if(Mt!==null){var Zt=Mt.next;Mt.next=Bt.next,Bt.next=Zt}St.baseQueue=Mt=Bt,_t.pending=null}if(Mt!==null){Bt=Mt.next,St=St.baseState;var fn=Zt=null,Ln=null,Xn=Bt;do{var ar=Xn.lane;if((Os&ar)===ar)Ln!==null&&(Ln=Ln.next={lane:0,action:Xn.action,hasEagerState:Xn.hasEagerState,eagerState:Xn.eagerState,next:null}),St=Xn.hasEagerState?Xn.eagerState:ht(St,Xn.action);else{var yr={lane:ar,action:Xn.action,hasEagerState:Xn.hasEagerState,eagerState:Xn.eagerState,next:null};Ln===null?(fn=Ln=yr,Zt=St):Ln=Ln.next=yr,Yr.lanes|=ar,Ns|=ar}Xn=Xn.next}while(Xn!==null&&Xn!==Bt);Ln===null?Zt=St:Ln.next=fn,So(St,dt.memoizedState)||(wo=!0),dt.memoizedState=St,dt.baseState=Zt,dt.baseQueue=Ln,_t.lastRenderedState=St}if(ht=_t.interleaved,ht!==null){Mt=ht;do Bt=Mt.lane,Yr.lanes|=Bt,Ns|=Bt,Mt=Mt.next;while(Mt!==ht)}else Mt===null&&(_t.lanes=0);return[dt.memoizedState,_t.dispatch]}function Xl(ht){var dt=zo(),_t=dt.queue;if(_t===null)throw Error(at(311));_t.lastRenderedReducer=ht;var St=_t.dispatch,Mt=_t.pending,Bt=dt.memoizedState;if(Mt!==null){_t.pending=null;var Zt=Mt=Mt.next;do Bt=ht(Bt,Zt.action),Zt=Zt.next;while(Zt!==Mt);So(Bt,dt.memoizedState)||(wo=!0),dt.memoizedState=Bt,dt.baseQueue===null&&(dt.baseState=Bt),_t.lastRenderedState=Bt}return[Bt,St]}function wp(){}function Mp(ht,dt){var _t=Yr,St=zo(),Mt=dt(),Bt=!So(St.memoizedState,Mt);if(Bt&&(St.memoizedState=Mt,wo=!0),St=St.queue,xl(Pp.bind(null,_t,St,ht),[ht]),St.getSnapshot!==dt||Bt||to!==null&&to.memoizedState.tag&1){if(_t.flags|=2048,yl(9,Rp.bind(null,_t,St,Mt,dt),void 0,null),na===null)throw Error(at(349));Os&30||Ip(_t,dt,Mt)}return Mt}function Ip(ht,dt,_t){ht.flags|=16384,ht={getSnapshot:dt,value:_t},dt=Yr.updateQueue,dt===null?(dt={lastEffect:null,stores:null},Yr.updateQueue=dt,dt.stores=[ht]):(_t=dt.stores,_t===null?dt.stores=[ht]:_t.push(ht))}function Rp(ht,dt,_t,St){dt.value=_t,dt.getSnapshot=St,Bp(dt)&&Do(ht,1,-1)}function Pp(ht,dt,_t){return _t(function(){Bp(dt)&&Do(ht,1,-1)})}function Bp(ht){var dt=ht.getSnapshot;ht=ht.value;try{var _t=dt();return!So(ht,_t)}catch{return!0}}function Ou(ht){var dt=Zo();return typeof ht=="function"&&(ht=ht()),dt.memoizedState=dt.baseState=ht,ht={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:ht},dt.queue=ht,ht=ht.dispatch=V0.bind(null,Yr,ht),[dt.memoizedState,ht]}function yl(ht,dt,_t,St){return ht={tag:ht,create:dt,destroy:_t,deps:St,next:null},dt=Yr.updateQueue,dt===null?(dt={lastEffect:null,stores:null},Yr.updateQueue=dt,dt.lastEffect=ht.next=ht):(_t=dt.lastEffect,_t===null?dt.lastEffect=ht.next=ht:(St=_t.next,_t.next=ht,ht.next=St,dt.lastEffect=ht)),ht}function Lp(){return zo().memoizedState}function Yl(ht,dt,_t,St){var Mt=Zo();Yr.flags|=ht,Mt.memoizedState=yl(1|dt,_t,void 0,St===void 0?null:St)}function Kl(ht,dt,_t,St){var Mt=zo();St=St===void 0?null:St;var Bt=void 0;if(io!==null){var Zt=io.memoizedState;if(Bt=Zt.destroy,St!==null&&Du(St,Zt.deps)){Mt.memoizedState=yl(dt,_t,Bt,St);return}}Yr.flags|=ht,Mt.memoizedState=yl(1|dt,_t,Bt,St)}function Uu(ht,dt){return Yl(8390656,8,ht,dt)}function xl(ht,dt){return Kl(2048,8,ht,dt)}function Dp(ht,dt){return Kl(4,2,ht,dt)}function Fp(ht,dt){return Kl(4,4,ht,dt)}function kp(ht,dt){if(typeof dt=="function")return ht=ht(),dt(ht),function(){dt(null)};if(dt!=null)return ht=ht(),dt.current=ht,function(){dt.current=null}}function Op(ht,dt,_t){return _t=_t!=null?_t.concat([ht]):null,Kl(4,4,kp.bind(null,dt,ht),_t)}function Nu(){}function Up(ht,dt){var _t=zo();dt=dt===void 0?null:dt;var St=_t.memoizedState;return St!==null&&dt!==null&&Du(dt,St[1])?St[0]:(_t.memoizedState=[ht,dt],ht)}function Np(ht,dt){var _t=zo();dt=dt===void 0?null:dt;var St=_t.memoizedState;return St!==null&&dt!==null&&Du(dt,St[1])?St[0]:(ht=ht(),_t.memoizedState=[ht,dt],ht)}function $0(ht,dt){var _t=wr;wr=_t!==0&&4>_t?_t:4,ht(!0);var St=Lo.transition;Lo.transition={};try{ht(!1),dt()}finally{wr=_t,Lo.transition=St}}function $p(){return zo().memoizedState}function G0(ht,dt,_t){var St=ls(ht);_t={lane:St,action:_t,hasEagerState:!1,eagerState:null,next:null},Gp(ht)?Vp(dt,_t):(zp(ht,dt,_t),_t=po(),ht=Do(ht,St,_t),ht!==null&&Hp(ht,dt,St))}function V0(ht,dt,_t){var St=ls(ht),Mt={lane:St,action:_t,hasEagerState:!1,eagerState:null,next:null};if(Gp(ht))Vp(dt,Mt);else{zp(ht,dt,Mt);var Bt=ht.alternate;if(ht.lanes===0&&(Bt===null||Bt.lanes===0)&&(Bt=dt.lastRenderedReducer,Bt!==null))try{var Zt=dt.lastRenderedState,fn=Bt(Zt,_t);if(Mt.hasEagerState=!0,Mt.eagerState=fn,So(fn,Zt))return}catch{}finally{}_t=po(),ht=Do(ht,St,_t),ht!==null&&Hp(ht,dt,St)}}function Gp(ht){var dt=ht.alternate;return ht===Yr||dt!==null&&dt===Yr}function Vp(ht,dt){Zs=Ql=!0;var _t=ht.pending;_t===null?dt.next=dt:(dt.next=_t.next,_t.next=dt),ht.pending=dt}function zp(ht,dt,_t){na!==null&&ht.mode&1&&!(Cr&2)?(ht=dt.interleaved,ht===null?(_t.next=_t,Co===null?Co=[dt]:Co.push(dt)):(_t.next=ht.next,ht.next=_t),dt.interleaved=_t):(ht=dt.pending,ht===null?_t.next=_t:(_t.next=ht.next,ht.next=_t),dt.pending=_t)}function Hp(ht,dt,_t){if(_t&4194240){var St=dt.lanes;St&=ht.pendingLanes,_t|=St,dt.lanes=_t,$o(ht,_t)}}var Jl={readContext:Jr,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useInsertionEffect:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useSyncExternalStore:ao,useId:ao,unstable_isNewReconciler:!1},z0={readContext:Jr,useCallback:function(ht,dt){return Zo().memoizedState=[ht,dt===void 0?null:dt],ht},useContext:Jr,useEffect:Uu,useImperativeHandle:function(ht,dt,_t){return _t=_t!=null?_t.concat([ht]):null,Yl(4194308,4,kp.bind(null,dt,ht),_t)},useLayoutEffect:function(ht,dt){return Yl(4194308,4,ht,dt)},useInsertionEffect:function(ht,dt){return Yl(4,2,ht,dt)},useMemo:function(ht,dt){var _t=Zo();return dt=dt===void 0?null:dt,ht=ht(),_t.memoizedState=[ht,dt],ht},useReducer:function(ht,dt,_t){var St=Zo();return dt=_t!==void 0?_t(dt):dt,St.memoizedState=St.baseState=dt,ht={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:dt},St.queue=ht,ht=ht.dispatch=G0.bind(null,Yr,ht),[St.memoizedState,ht]},useRef:function(ht){var dt=Zo();return ht={current:ht},dt.memoizedState=ht},useState:Ou,useDebugValue:Nu,useDeferredValue:function(ht){var dt=Ou(ht),_t=dt[0],St=dt[1];return Uu(function(){var Mt=Lo.transition;Lo.transition={};try{St(ht)}finally{Lo.transition=Mt}},[ht]),_t},useTransition:function(){var ht=Ou(!1),dt=ht[0];return ht=$0.bind(null,ht[1]),Zo().memoizedState=ht,[dt,ht]},useMutableSource:function(){},useSyncExternalStore:function(ht,dt,_t){var St=Yr,Mt=Zo();if(Hr){if(_t===void 0)throw Error(at(407));_t=_t()}else{if(_t=dt(),na===null)throw Error(at(349));Os&30||Ip(St,dt,_t)}Mt.memoizedState=_t;var Bt={value:_t,getSnapshot:dt};return Mt.queue=Bt,Uu(Pp.bind(null,St,Bt,ht),[ht]),St.flags|=2048,yl(9,Rp.bind(null,St,Bt,_t,dt),void 0,null),_t},useId:function(){var ht=Zo(),dt=na.identifierPrefix;if(Hr){var _t=Jo,St=Ko;_t=(St&~(1<<32-zr(St)-1)).toString(32)+_t,dt=":"+dt+"R"+_t,_t=Al++,0<_t&&(dt+="H"+_t.toString(32)),dt+=":"}else _t=N0++,dt=":"+dt+"r"+_t.toString(32)+":";return ht.memoizedState=dt},unstable_isNewReconciler:!1},H0={readContext:Jr,useCallback:Up,useContext:Jr,useEffect:xl,useImperativeHandle:Op,useInsertionEffect:Dp,useLayoutEffect:Fp,useMemo:Np,useReducer:Wl,useRef:Lp,useState:function(){return Wl(xs)},useDebugValue:Nu,useDeferredValue:function(ht){var dt=Wl(xs),_t=dt[0],St=dt[1];return xl(function(){var Mt=Lo.transition;Lo.transition={};try{St(ht)}finally{Lo.transition=Mt}},[ht]),_t},useTransition:function(){var ht=Wl(xs)[0],dt=zo().memoizedState;return[ht,dt]},useMutableSource:wp,useSyncExternalStore:Mp,useId:$p,unstable_isNewReconciler:!1},Q0={readContext:Jr,useCallback:Up,useContext:Jr,useEffect:xl,useImperativeHandle:Op,useInsertionEffect:Dp,useLayoutEffect:Fp,useMemo:Np,useReducer:Xl,useRef:Lp,useState:function(){return Xl(xs)},useDebugValue:Nu,useDeferredValue:function(ht){var dt=Xl(xs),_t=dt[0],St=dt[1];return xl(function(){var Mt=Lo.transition;Lo.transition={};try{St(ht)}finally{Lo.transition=Mt}},[ht]),_t},useTransition:function(){var ht=Xl(xs)[0],dt=zo().memoizedState;return[ht,dt]},useMutableSource:wp,useSyncExternalStore:Mp,useId:$p,unstable_isNewReconciler:!1};function $u(ht,dt){try{var _t="",St=dt;do _t+=As(St),St=St.return;while(St);var Mt=_t}catch(Bt){Mt=`
Error generating stack: `+Bt.message+`
`+Bt.stack}return{value:ht,source:dt,stack:Mt}}function Gu(ht,dt){try{console.error(dt.value)}catch(_t){setTimeout(function(){throw _t})}}var W0=typeof WeakMap=="function"?WeakMap:Map;function Qp(ht,dt,_t){_t=qo(-1,_t),_t.tag=3,_t.payload={element:null};var St=dt.value;return _t.callback=function(){du||(du=!0,np=St),Gu(ht,dt)},_t}function Wp(ht,dt,_t){_t=qo(-1,_t),_t.tag=3;var St=ht.type.getDerivedStateFromError;if(typeof St=="function"){var Mt=dt.value;_t.payload=function(){return St(Mt)},_t.callback=function(){Gu(ht,dt)}}var Bt=ht.stateNode;return Bt!==null&&typeof Bt.componentDidCatch=="function"&&(_t.callback=function(){Gu(ht,dt),typeof St!="function"&&(os===null?os=new Set([this]):os.add(this));var Zt=dt.stack;this.componentDidCatch(dt.value,{componentStack:Zt!==null?Zt:""})}),_t}function jp(ht,dt,_t){var St=ht.pingCache;if(St===null){St=ht.pingCache=new W0;var Mt=new Set;St.set(dt,Mt)}else Mt=St.get(dt),Mt===void 0&&(Mt=new Set,St.set(dt,Mt));Mt.has(_t)||(Mt.add(_t),ht=s3.bind(null,ht,dt,_t),dt.then(ht,ht))}function Xp(ht){do{var dt;if((dt=ht.tag===13)&&(dt=ht.memoizedState,dt=dt!==null?dt.dehydrated!==null:!0),dt)return ht;ht=ht.return}while(ht!==null);return null}function Yp(ht,dt,_t,St,Mt){return ht.mode&1?(ht.flags|=65536,ht.lanes=Mt,ht):(ht===dt?ht.flags|=65536:(ht.flags|=128,_t.flags|=131072,_t.flags&=-52805,_t.tag===1&&(_t.alternate===null?_t.tag=17:(dt=qo(-1,1),dt.tag=2,as(_t,dt))),_t.lanes|=1),ht)}function Ho(ht){ht.flags|=4}function qp(ht,dt){if(ht!==null&&ht.child===dt.child)return!0;if(dt.flags&16)return!1;for(ht=dt.child;ht!==null;){if(ht.flags&12854||ht.subtreeFlags&12854)return!1;ht=ht.sibling}return!0}var _l,El,Zl,_c;if(yn)_l=function(ht,dt){for(var _t=dt.child;_t!==null;){if(_t.tag===5||_t.tag===6)Vt(ht,_t.stateNode);else if(_t.tag!==4&&_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===dt)break;for(;_t.sibling===null;){if(_t.return===null||_t.return===dt)return;_t=_t.return}_t.sibling.return=_t.return,_t=_t.sibling}},El=function(){},Zl=function(ht,dt,_t,St,Mt){if(ht=ht.memoizedProps,ht!==St){var Bt=dt.stateNode,Zt=Vo(Bo.current);_t=an(Bt,_t,ht,St,Mt,Zt),(dt.updateQueue=_t)&&Ho(dt)}},_c=function(ht,dt,_t,St){_t!==St&&Ho(dt)};else if(Wt){_l=function(ht,dt,_t,St){for(var Mt=dt.child;Mt!==null;){if(Mt.tag===5){var Bt=Mt.stateNode;_t&&St&&(Bt=Pr(Bt,Mt.type,Mt.memoizedProps,Mt)),Vt(ht,Bt)}else if(Mt.tag===6)Bt=Mt.stateNode,_t&&St&&(Bt=Mr(Bt,Mt.memoizedProps,Mt)),Vt(ht,Bt);else if(Mt.tag!==4){if(Mt.tag===22&&Mt.memoizedState!==null)Bt=Mt.child,Bt!==null&&(Bt.return=Mt),_l(ht,Mt,!0,!0);else if(Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}}if(Mt===dt)break;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===dt)return;Mt=Mt.return}Mt.sibling.return=Mt.return,Mt=Mt.sibling}};var Kp=function(ht,dt,_t,St){for(var Mt=dt.child;Mt!==null;){if(Mt.tag===5){var Bt=Mt.stateNode;_t&&St&&(Bt=Pr(Bt,Mt.type,Mt.memoizedProps,Mt)),Er(ht,Bt)}else if(Mt.tag===6)Bt=Mt.stateNode,_t&&St&&(Bt=Mr(Bt,Mt.memoizedProps,Mt)),Er(ht,Bt);else if(Mt.tag!==4){if(Mt.tag===22&&Mt.memoizedState!==null)Bt=Mt.child,Bt!==null&&(Bt.return=Mt),Kp(ht,Mt,!0,!0);else if(Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}}if(Mt===dt)break;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===dt)return;Mt=Mt.return}Mt.sibling.return=Mt.return,Mt=Mt.sibling}};El=function(ht,dt){var _t=dt.stateNode;if(!qp(ht,dt)){ht=_t.containerInfo;var St=Ar(ht);Kp(St,dt,!1,!1),_t.pendingChildren=St,Ho(dt),Tr(ht,St)}},Zl=function(ht,dt,_t,St,Mt){var Bt=ht.stateNode,Zt=ht.memoizedProps;if((ht=qp(ht,dt))&&Zt===St)dt.stateNode=Bt;else{var fn=dt.stateNode,Ln=Vo(Bo.current),Xn=null;Zt!==St&&(Xn=an(fn,_t,Zt,St,Mt,Ln)),ht&&Xn===null?dt.stateNode=Bt:(Bt=Jn(Bt,Xn,_t,Zt,St,dt,ht,fn),tn(Bt,_t,St,Mt,Ln)&&Ho(dt),dt.stateNode=Bt,ht?Ho(dt):_l(Bt,dt,!1,!1))}},_c=function(ht,dt,_t,St){_t!==St?(ht=Vo(Fs.current),_t=Vo(Bo.current),dt.stateNode=sn(St,ht,_t,dt),Ho(dt)):dt.stateNode=ht.stateNode}}else El=function(){},Zl=function(){},_c=function(){};function Sl(ht,dt){if(!Hr)switch(ht.tailMode){case"hidden":dt=ht.tail;for(var _t=null;dt!==null;)dt.alternate!==null&&(_t=dt),dt=dt.sibling;_t===null?ht.tail=null:_t.sibling=null;break;case"collapsed":_t=ht.tail;for(var St=null;_t!==null;)_t.alternate!==null&&(St=_t),_t=_t.sibling;St===null?dt||ht.tail===null?ht.tail=null:ht.tail.sibling=null:St.sibling=null}}function oo(ht){var dt=ht.alternate!==null&&ht.alternate.child===ht.child,_t=0,St=0;if(dt)for(var Mt=ht.child;Mt!==null;)_t|=Mt.lanes|Mt.childLanes,St|=Mt.subtreeFlags&14680064,St|=Mt.flags&14680064,Mt.return=ht,Mt=Mt.sibling;else for(Mt=ht.child;Mt!==null;)_t|=Mt.lanes|Mt.childLanes,St|=Mt.subtreeFlags,St|=Mt.flags,Mt.return=ht,Mt=Mt.sibling;return ht.subtreeFlags|=St,ht.childLanes=_t,dt}function j0(ht,dt,_t){var St=dt.pendingProps;switch(bu(dt),dt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oo(dt),null;case 1:return kr(dt.type)&&$r(),oo(dt),null;case 3:return St=dt.stateNode,ks(),hr(pr),hr(Dr),Lu(),St.pendingContext&&(St.context=St.pendingContext,St.pendingContext=null),(ht===null||ht.child===null)&&(Ys(dt)?Ho(dt):ht===null||ht.memoizedState.isDehydrated&&!(dt.flags&256)||(dt.flags|=1024,Uo!==null&&(ap(Uo),Uo=null))),El(ht,dt),oo(dt),null;case 5:Pu(dt),_t=Vo(Fs.current);var Mt=dt.type;if(ht!==null&&dt.stateNode!=null)Zl(ht,dt,Mt,St,_t),ht.ref!==dt.ref&&(dt.flags|=512,dt.flags|=2097152);else{if(!St){if(dt.stateNode===null)throw Error(at(166));return oo(dt),null}if(ht=Vo(Bo.current),Ys(dt)){if(!_n)throw Error(at(175));ht=Ot(dt.stateNode,dt.type,dt.memoizedProps,_t,ht,dt,!Xs),dt.updateQueue=ht,ht!==null&&Ho(dt)}else{var Bt=Lt(Mt,St,_t,ht,dt);_l(Bt,dt,!1,!1),dt.stateNode=Bt,tn(Bt,Mt,St,_t,ht)&&Ho(dt)}dt.ref!==null&&(dt.flags|=512,dt.flags|=2097152)}return oo(dt),null;case 6:if(ht&&dt.stateNode!=null)_c(ht,dt,ht.memoizedProps,St);else{if(typeof St!="string"&&dt.stateNode===null)throw Error(at(166));if(ht=Vo(Fs.current),_t=Vo(Bo.current),Ys(dt)){if(!_n)throw Error(at(176));if(ht=dt.stateNode,St=dt.memoizedProps,(_t=Pt(ht,St,dt,!Xs))&&(Mt=To,Mt!==null))switch(Bt=(Mt.mode&1)!==0,Mt.tag){case 3:Bn(Mt.stateNode.containerInfo,ht,St,Bt);break;case 5:On(Mt.type,Mt.memoizedProps,Mt.stateNode,ht,St,Bt)}_t&&Ho(dt)}else dt.stateNode=sn(St,ht,_t,dt)}return oo(dt),null;case 13:if(hr(jr),St=dt.memoizedState,Hr&&bo!==null&&dt.mode&1&&!(dt.flags&128)){for(ht=bo;ht;)ht=Lr(ht);return Ls(),dt.flags|=98560,dt}if(St!==null&&St.dehydrated!==null){if(St=Ys(dt),ht===null){if(!St)throw Error(at(318));if(!_n)throw Error(at(344));if(ht=dt.memoizedState,ht=ht!==null?ht.dehydrated:null,!ht)throw Error(at(317));Qt(ht,dt)}else Ls(),!(dt.flags&128)&&(dt.memoizedState=null),dt.flags|=4;return oo(dt),null}return Uo!==null&&(ap(Uo),Uo=null),dt.flags&128?(dt.lanes=_t,dt):(St=St!==null,_t=!1,ht===null?Ys(dt):_t=ht.memoizedState!==null,St&&!_t&&(dt.child.flags|=8192,dt.mode&1&&(ht===null||jr.current&1?xa===0&&(xa=3):sp())),dt.updateQueue!==null&&(dt.flags|=4),oo(dt),null);case 4:return ks(),El(ht,dt),ht===null&&vn(dt.stateNode.containerInfo),oo(dt),null;case 10:return eo(dt.type._context),oo(dt),null;case 17:return kr(dt.type)&&$r(),oo(dt),null;case 19:if(hr(jr),Mt=dt.memoizedState,Mt===null)return oo(dt),null;if(St=(dt.flags&128)!==0,Bt=Mt.rendering,Bt===null)if(St)Sl(Mt,!1);else{if(xa!==0||ht!==null&&ht.flags&128)for(ht=dt.child;ht!==null;){if(Bt=zl(ht),Bt!==null){for(dt.flags|=128,Sl(Mt,!1),ht=Bt.updateQueue,ht!==null&&(dt.updateQueue=ht,dt.flags|=4),dt.subtreeFlags=0,ht=_t,St=dt.child;St!==null;)_t=St,Mt=ht,_t.flags&=14680066,Bt=_t.alternate,Bt===null?(_t.childLanes=0,_t.lanes=Mt,_t.child=null,_t.subtreeFlags=0,_t.memoizedProps=null,_t.memoizedState=null,_t.updateQueue=null,_t.dependencies=null,_t.stateNode=null):(_t.childLanes=Bt.childLanes,_t.lanes=Bt.lanes,_t.child=Bt.child,_t.subtreeFlags=0,_t.deletions=null,_t.memoizedProps=Bt.memoizedProps,_t.memoizedState=Bt.memoizedState,_t.updateQueue=Bt.updateQueue,_t.type=Bt.type,Mt=Bt.dependencies,_t.dependencies=Mt===null?null:{lanes:Mt.lanes,firstContext:Mt.firstContext}),St=St.sibling;return ir(jr,jr.current&1|2),dt.child}ht=ht.sibling}Mt.tail!==null&&Wr()>tp&&(dt.flags|=128,St=!0,Sl(Mt,!1),dt.lanes=4194304)}else{if(!St)if(ht=zl(Bt),ht!==null){if(dt.flags|=128,St=!0,ht=ht.updateQueue,ht!==null&&(dt.updateQueue=ht,dt.flags|=4),Sl(Mt,!0),Mt.tail===null&&Mt.tailMode==="hidden"&&!Bt.alternate&&!Hr)return oo(dt),null}else 2*Wr()-Mt.renderingStartTime>tp&&_t!==1073741824&&(dt.flags|=128,St=!0,Sl(Mt,!1),dt.lanes=4194304);Mt.isBackwards?(Bt.sibling=dt.child,dt.child=Bt):(ht=Mt.last,ht!==null?ht.sibling=Bt:dt.child=Bt,Mt.last=Bt)}return Mt.tail!==null?(dt=Mt.tail,Mt.rendering=dt,Mt.tail=dt.sibling,Mt.renderingStartTime=Wr(),dt.sibling=null,ht=jr.current,ir(jr,St?ht&1|2:ht&1),dt):(oo(dt),null);case 22:case 23:return op(),St=dt.memoizedState!==null,ht!==null&&ht.memoizedState!==null!==St&&(dt.flags|=8192),St&&dt.mode&1?Mo&1073741824&&(oo(dt),yn&&dt.subtreeFlags&6&&(dt.flags|=8192)):oo(dt),null;case 24:return null;case 25:return null}throw Error(at(156,dt.tag))}var X0=ot.ReactCurrentOwner,wo=!1;function ho(ht,dt,_t,St){dt.child=ht===null?Tp(dt,null,_t,St):Ds(dt,ht.child,_t,St)}function Jp(ht,dt,_t,St,Mt){_t=_t.render;var Bt=dt.ref;return Kr(dt,Mt),St=Fu(ht,dt,_t,St,Bt,Mt),_t=ku(),ht!==null&&!wo?(dt.updateQueue=ht.updateQueue,dt.flags&=-2053,ht.lanes&=~Mt,es(ht,dt,Mt)):(Hr&&_t&&Tu(dt),dt.flags|=1,ho(ht,dt,St,Mt),dt.child)}function Zp(ht,dt,_t,St,Mt){if(ht===null){var Bt=_t.type;return typeof Bt=="function"&&!lp(Bt)&&Bt.defaultProps===void 0&&_t.compare===null&&_t.defaultProps===void 0?(dt.tag=15,dt.type=Bt,e0(ht,dt,Bt,St,Mt)):(ht=xu(_t.type,null,St,dt,dt.mode,Mt),ht.ref=dt.ref,ht.return=dt,dt.child=ht)}if(Bt=ht.child,!(ht.lanes&Mt)){var Zt=Bt.memoizedProps;if(_t=_t.compare,_t=_t!==null?_t:ms,_t(Zt,St)&&ht.ref===dt.ref)return es(ht,dt,Mt)}return dt.flags|=1,ht=us(Bt,St),ht.ref=dt.ref,ht.return=dt,dt.child=ht}function e0(ht,dt,_t,St,Mt){if(ht!==null&&ms(ht.memoizedProps,St)&&ht.ref===dt.ref)if(wo=!1,(ht.lanes&Mt)!==0)ht.flags&131072&&(wo=!0);else return dt.lanes=ht.lanes,es(ht,dt,Mt);return Vu(ht,dt,_t,St,Mt)}function t0(ht,dt,_t){var St=dt.pendingProps,Mt=St.children,Bt=ht!==null?ht.memoizedState:null;if(St.mode==="hidden")if(!(dt.mode&1))dt.memoizedState={baseLanes:0,cachePool:null},ir(Us,Mo),Mo|=_t;else if(_t&1073741824)dt.memoizedState={baseLanes:0,cachePool:null},St=Bt!==null?Bt.baseLanes:_t,ir(Us,Mo),Mo|=St;else return ht=Bt!==null?Bt.baseLanes|_t:_t,dt.lanes=dt.childLanes=1073741824,dt.memoizedState={baseLanes:ht,cachePool:null},dt.updateQueue=null,ir(Us,Mo),Mo|=ht,null;else Bt!==null?(St=Bt.baseLanes|_t,dt.memoizedState=null):St=_t,ir(Us,Mo),Mo|=St;return ho(ht,dt,Mt,_t),dt.child}function n0(ht,dt){var _t=dt.ref;(ht===null&&_t!==null||ht!==null&&ht.ref!==_t)&&(dt.flags|=512,dt.flags|=2097152)}function Vu(ht,dt,_t,St,Mt){var Bt=kr(_t)?Fr:Dr.current;return Bt=br(dt,Bt),Kr(dt,Mt),_t=Fu(ht,dt,_t,St,Bt,Mt),St=ku(),ht!==null&&!wo?(dt.updateQueue=ht.updateQueue,dt.flags&=-2053,ht.lanes&=~Mt,es(ht,dt,Mt)):(Hr&&St&&Tu(dt),dt.flags|=1,ho(ht,dt,_t,Mt),dt.child)}function r0(ht,dt,_t,St,Mt){if(kr(_t)){var Bt=!0;Br(dt)}else Bt=!1;if(Kr(dt,Mt),dt.stateNode===null)ht!==null&&(ht.alternate=null,dt.alternate=null,dt.flags|=2),Ap(dt,_t,St),Cu(dt,_t,St,Mt),St=!0;else if(ht===null){var Zt=dt.stateNode,fn=dt.memoizedProps;Zt.props=fn;var Ln=Zt.context,Xn=_t.contextType;typeof Xn=="object"&&Xn!==null?Xn=Jr(Xn):(Xn=kr(_t)?Fr:Dr.current,Xn=br(dt,Xn));var ar=_t.getDerivedStateFromProps,yr=typeof ar=="function"||typeof Zt.getSnapshotBeforeUpdate=="function";yr||typeof Zt.UNSAFE_componentWillReceiveProps!="function"&&typeof Zt.componentWillReceiveProps!="function"||(fn!==St||Ln!==Xn)&&vp(dt,Zt,St,Xn),rs=!1;var dr=dt.memoizedState;Zt.state=dr,Ul(dt,St,Zt,Mt),Ln=dt.memoizedState,fn!==St||dr!==Ln||pr.current||rs?(typeof ar=="function"&&(Su(dt,_t,ar,St),Ln=dt.memoizedState),(fn=rs||mp(dt,_t,fn,St,dr,Ln,Xn))?(yr||typeof Zt.UNSAFE_componentWillMount!="function"&&typeof Zt.componentWillMount!="function"||(typeof Zt.componentWillMount=="function"&&Zt.componentWillMount(),typeof Zt.UNSAFE_componentWillMount=="function"&&Zt.UNSAFE_componentWillMount()),typeof Zt.componentDidMount=="function"&&(dt.flags|=4194308)):(typeof Zt.componentDidMount=="function"&&(dt.flags|=4194308),dt.memoizedProps=St,dt.memoizedState=Ln),Zt.props=St,Zt.state=Ln,Zt.context=Xn,St=fn):(typeof Zt.componentDidMount=="function"&&(dt.flags|=4194308),St=!1)}else{Zt=dt.stateNode,hp(ht,dt),fn=dt.memoizedProps,Xn=dt.type===dt.elementType?fn:uo(dt.type,fn),Zt.props=Xn,yr=dt.pendingProps,dr=Zt.context,Ln=_t.contextType,typeof Ln=="object"&&Ln!==null?Ln=Jr(Ln):(Ln=kr(_t)?Fr:Dr.current,Ln=br(dt,Ln));var Vr=_t.getDerivedStateFromProps;(ar=typeof Vr=="function"||typeof Zt.getSnapshotBeforeUpdate=="function")||typeof Zt.UNSAFE_componentWillReceiveProps!="function"&&typeof Zt.componentWillReceiveProps!="function"||(fn!==yr||dr!==Ln)&&vp(dt,Zt,St,Ln),rs=!1,dr=dt.memoizedState,Zt.state=dr,Ul(dt,St,Zt,Mt);var ur=dt.memoizedState;fn!==yr||dr!==ur||pr.current||rs?(typeof Vr=="function"&&(Su(dt,_t,Vr,St),ur=dt.memoizedState),(Xn=rs||mp(dt,_t,Xn,St,dr,ur,Ln)||!1)?(ar||typeof Zt.UNSAFE_componentWillUpdate!="function"&&typeof Zt.componentWillUpdate!="function"||(typeof Zt.componentWillUpdate=="function"&&Zt.componentWillUpdate(St,ur,Ln),typeof Zt.UNSAFE_componentWillUpdate=="function"&&Zt.UNSAFE_componentWillUpdate(St,ur,Ln)),typeof Zt.componentDidUpdate=="function"&&(dt.flags|=4),typeof Zt.getSnapshotBeforeUpdate=="function"&&(dt.flags|=1024)):(typeof Zt.componentDidUpdate!="function"||fn===ht.memoizedProps&&dr===ht.memoizedState||(dt.flags|=4),typeof Zt.getSnapshotBeforeUpdate!="function"||fn===ht.memoizedProps&&dr===ht.memoizedState||(dt.flags|=1024),dt.memoizedProps=St,dt.memoizedState=ur),Zt.props=St,Zt.state=ur,Zt.context=Ln,St=Xn):(typeof Zt.componentDidUpdate!="function"||fn===ht.memoizedProps&&dr===ht.memoizedState||(dt.flags|=4),typeof Zt.getSnapshotBeforeUpdate!="function"||fn===ht.memoizedProps&&dr===ht.memoizedState||(dt.flags|=1024),St=!1)}return zu(ht,dt,_t,St,Bt,Mt)}function zu(ht,dt,_t,St,Mt,Bt){n0(ht,dt);var Zt=(dt.flags&128)!==0;if(!St&&!Zt)return Mt&&vr(dt,_t,!1),es(ht,dt,Bt);St=dt.stateNode,X0.current=dt;var fn=Zt&&typeof _t.getDerivedStateFromError!="function"?null:St.render();return dt.flags|=1,ht!==null&&Zt?(dt.child=Ds(dt,ht.child,null,Bt),dt.child=Ds(dt,null,fn,Bt)):ho(ht,dt,fn,Bt),dt.memoizedState=St.state,Mt&&vr(dt,_t,!0),dt.child}function i0(ht){var dt=ht.stateNode;dt.pendingContext?mr(ht,dt.pendingContext,dt.pendingContext!==dt.context):dt.context&&mr(ht,dt.context,!1),Ru(ht,dt.containerInfo)}function a0(ht,dt,_t,St,Mt){return Ls(),Iu(Mt),dt.flags|=256,ho(ht,dt,_t,St),dt.child}var eu={dehydrated:null,treeContext:null,retryLane:0};function tu(ht){return{baseLanes:ht,cachePool:null}}function o0(ht,dt,_t){var St=dt.pendingProps,Mt=jr.current,Bt=!1,Zt=(dt.flags&128)!==0,fn;if((fn=Zt)||(fn=ht!==null&&ht.memoizedState===null?!1:(Mt&2)!==0),fn?(Bt=!0,dt.flags&=-129):(ht===null||ht.memoizedState!==null)&&(Mt|=1),ir(jr,Mt&1),ht===null)return Mu(dt),ht=dt.memoizedState,ht!==null&&(ht=ht.dehydrated,ht!==null)?(dt.mode&1?Nr(ht)?dt.lanes=8:dt.lanes=1073741824:dt.lanes=1,null):(Mt=St.children,ht=St.fallback,Bt?(St=dt.mode,Bt=dt.child,Mt={mode:"hidden",children:Mt},!(St&1)&&Bt!==null?(Bt.childLanes=0,Bt.pendingProps=Mt):Bt=_u(Mt,St,0,null),ht=bs(ht,St,_t,null),Bt.return=dt,ht.return=dt,Bt.sibling=ht,dt.child=Bt,dt.child.memoizedState=tu(_t),dt.memoizedState=eu,ht):Hu(dt,Mt));if(Mt=ht.memoizedState,Mt!==null){if(fn=Mt.dehydrated,fn!==null){if(Zt)return dt.flags&256?(dt.flags&=-257,nu(ht,dt,_t,Error(at(422)))):dt.memoizedState!==null?(dt.child=ht.child,dt.flags|=128,null):(Bt=St.fallback,Mt=dt.mode,St=_u({mode:"visible",children:St.children},Mt,0,null),Bt=bs(Bt,Mt,_t,null),Bt.flags|=2,St.return=dt,Bt.return=dt,St.sibling=Bt,dt.child=St,dt.mode&1&&Ds(dt,ht.child,null,_t),dt.child.memoizedState=tu(_t),dt.memoizedState=eu,Bt);if(!(dt.mode&1))dt=nu(ht,dt,_t,null);else if(Nr(fn))dt=nu(ht,dt,_t,Error(at(419)));else if(St=(_t&ht.childLanes)!==0,wo||St){if(St=na,St!==null){switch(_t&-_t){case 4:Bt=2;break;case 16:Bt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Bt=32;break;case 536870912:Bt=268435456;break;default:Bt=0}St=Bt&(St.suspendedLanes|_t)?0:Bt,St!==0&&St!==Mt.retryLane&&(Mt.retryLane=St,Do(ht,St,-1))}sp(),dt=nu(ht,dt,_t,Error(at(421)))}else Ir(fn)?(dt.flags|=128,dt.child=ht.child,dt=l3.bind(null,ht),Qr(fn,dt),dt=null):(_t=Mt.treeContext,_n&&(bo=go(fn),To=dt,Hr=!0,Uo=null,Xs=!1,_t!==null&&(Ro[Po++]=Ko,Ro[Po++]=Jo,Ro[Po++]=vs,Ko=_t.id,Jo=_t.overflow,vs=dt)),dt=Hu(dt,dt.pendingProps.children),dt.flags|=4096);return dt}return Bt?(St=l0(ht,dt,St.children,St.fallback,_t),Bt=dt.child,Mt=ht.child.memoizedState,Bt.memoizedState=Mt===null?tu(_t):{baseLanes:Mt.baseLanes|_t,cachePool:null},Bt.childLanes=ht.childLanes&~_t,dt.memoizedState=eu,St):(_t=s0(ht,dt,St.children,_t),dt.memoizedState=null,_t)}return Bt?(St=l0(ht,dt,St.children,St.fallback,_t),Bt=dt.child,Mt=ht.child.memoizedState,Bt.memoizedState=Mt===null?tu(_t):{baseLanes:Mt.baseLanes|_t,cachePool:null},Bt.childLanes=ht.childLanes&~_t,dt.memoizedState=eu,St):(_t=s0(ht,dt,St.children,_t),dt.memoizedState=null,_t)}function Hu(ht,dt){return dt=_u({mode:"visible",children:dt},ht.mode,0,null),dt.return=ht,ht.child=dt}function s0(ht,dt,_t,St){var Mt=ht.child;return ht=Mt.sibling,_t=us(Mt,{mode:"visible",children:_t}),!(dt.mode&1)&&(_t.lanes=St),_t.return=dt,_t.sibling=null,ht!==null&&(St=dt.deletions,St===null?(dt.deletions=[ht],dt.flags|=16):St.push(ht)),dt.child=_t}function l0(ht,dt,_t,St,Mt){var Bt=dt.mode;ht=ht.child;var Zt=ht.sibling,fn={mode:"hidden",children:_t};return!(Bt&1)&&dt.child!==ht?(_t=dt.child,_t.childLanes=0,_t.pendingProps=fn,dt.deletions=null):(_t=us(ht,fn),_t.subtreeFlags=ht.subtreeFlags&14680064),Zt!==null?St=us(Zt,St):(St=bs(St,Bt,Mt,null),St.flags|=2),St.return=dt,_t.return=dt,_t.sibling=St,dt.child=_t,St}function nu(ht,dt,_t,St){return St!==null&&Iu(St),Ds(dt,ht.child,null,_t),ht=Hu(dt,dt.pendingProps.children),ht.flags|=2,dt.memoizedState=null,ht}function c0(ht,dt,_t){ht.lanes|=dt;var St=ht.alternate;St!==null&&(St.lanes|=dt),fo(ht.return,dt,_t)}function Qu(ht,dt,_t,St,Mt){var Bt=ht.memoizedState;Bt===null?ht.memoizedState={isBackwards:dt,rendering:null,renderingStartTime:0,last:St,tail:_t,tailMode:Mt}:(Bt.isBackwards=dt,Bt.rendering=null,Bt.renderingStartTime=0,Bt.last=St,Bt.tail=_t,Bt.tailMode=Mt)}function u0(ht,dt,_t){var St=dt.pendingProps,Mt=St.revealOrder,Bt=St.tail;if(ho(ht,dt,St.children,_t),St=jr.current,St&2)St=St&1|2,dt.flags|=128;else{if(ht!==null&&ht.flags&128)e:for(ht=dt.child;ht!==null;){if(ht.tag===13)ht.memoizedState!==null&&c0(ht,_t,dt);else if(ht.tag===19)c0(ht,_t,dt);else if(ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===dt)break e;for(;ht.sibling===null;){if(ht.return===null||ht.return===dt)break e;ht=ht.return}ht.sibling.return=ht.return,ht=ht.sibling}St&=1}if(ir(jr,St),!(dt.mode&1))dt.memoizedState=null;else switch(Mt){case"forwards":for(_t=dt.child,Mt=null;_t!==null;)ht=_t.alternate,ht!==null&&zl(ht)===null&&(Mt=_t),_t=_t.sibling;_t=Mt,_t===null?(Mt=dt.child,dt.child=null):(Mt=_t.sibling,_t.sibling=null),Qu(dt,!1,Mt,_t,Bt);break;case"backwards":for(_t=null,Mt=dt.child,dt.child=null;Mt!==null;){if(ht=Mt.alternate,ht!==null&&zl(ht)===null){dt.child=Mt;break}ht=Mt.sibling,Mt.sibling=_t,_t=Mt,Mt=ht}Qu(dt,!0,_t,null,Bt);break;case"together":Qu(dt,!1,null,null,void 0);break;default:dt.memoizedState=null}return dt.child}function es(ht,dt,_t){if(ht!==null&&(dt.dependencies=ht.dependencies),Ns|=dt.lanes,!(_t&dt.childLanes))return null;if(ht!==null&&dt.child!==ht.child)throw Error(at(153));if(dt.child!==null){for(ht=dt.child,_t=us(ht,ht.pendingProps),dt.child=_t,_t.return=dt;ht.sibling!==null;)ht=ht.sibling,_t=_t.sibling=us(ht,ht.pendingProps),_t.return=dt;_t.sibling=null}return dt.child}function Y0(ht,dt,_t){switch(dt.tag){case 3:i0(dt),Ls();break;case 5:bp(dt);break;case 1:kr(dt.type)&&Br(dt);break;case 4:Ru(dt,dt.stateNode.containerInfo);break;case 10:Fl(dt,dt.type._context,dt.memoizedProps.value);break;case 13:var St=dt.memoizedState;if(St!==null)return St.dehydrated!==null?(ir(jr,jr.current&1),dt.flags|=128,null):_t&dt.child.childLanes?o0(ht,dt,_t):(ir(jr,jr.current&1),ht=es(ht,dt,_t),ht!==null?ht.sibling:null);ir(jr,jr.current&1);break;case 19:if(St=(_t&dt.childLanes)!==0,ht.flags&128){if(St)return u0(ht,dt,_t);dt.flags|=128}var Mt=dt.memoizedState;if(Mt!==null&&(Mt.rendering=null,Mt.tail=null,Mt.lastEffect=null),ir(jr,jr.current),St)break;return null;case 22:case 23:return dt.lanes=0,t0(ht,dt,_t)}return es(ht,dt,_t)}function q0(ht,dt){switch(bu(dt),dt.tag){case 1:return kr(dt.type)&&$r(),ht=dt.flags,ht&65536?(dt.flags=ht&-65537|128,dt):null;case 3:return ks(),hr(pr),hr(Dr),Lu(),ht=dt.flags,ht&65536&&!(ht&128)?(dt.flags=ht&-65537|128,dt):null;case 5:return Pu(dt),null;case 13:if(hr(jr),ht=dt.memoizedState,ht!==null&&ht.dehydrated!==null){if(dt.alternate===null)throw Error(at(340));Ls()}return ht=dt.flags,ht&65536?(dt.flags=ht&-65537|128,dt):null;case 19:return hr(jr),null;case 4:return ks(),null;case 10:return eo(dt.type._context),null;case 22:case 23:return op(),null;case 24:return null;default:return null}}var ru=!1,_s=!1,K0=typeof WeakSet=="function"?WeakSet:Set,nr=null;function iu(ht,dt){var _t=ht.ref;if(_t!==null)if(typeof _t=="function")try{_t(null)}catch(St){xo(ht,dt,St)}else _t.current=null}function Wu(ht,dt,_t){try{_t()}catch(St){xo(ht,dt,St)}}var f0=!1;function J0(ht,dt){for(zt(ht.containerInfo),nr=dt;nr!==null;)if(ht=nr,dt=ht.child,(ht.subtreeFlags&1028)!==0&&dt!==null)dt.return=ht,nr=dt;else for(;nr!==null;){ht=nr;try{var _t=ht.alternate;if(ht.flags&1024)switch(ht.tag){case 0:case 11:case 15:break;case 1:if(_t!==null){var St=_t.memoizedProps,Mt=_t.memoizedState,Bt=ht.stateNode,Zt=Bt.getSnapshotBeforeUpdate(ht.elementType===ht.type?St:uo(ht.type,St),Mt);Bt.__reactInternalSnapshotBeforeUpdate=Zt}break;case 3:yn&&Hn(ht.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(at(163))}}catch(fn){xo(ht,ht.return,fn)}if(dt=ht.sibling,dt!==null){dt.return=ht.return,nr=dt;break}nr=ht.return}return _t=f0,f0=!1,_t}function Es(ht,dt,_t){var St=dt.updateQueue;if(St=St!==null?St.lastEffect:null,St!==null){var Mt=St=St.next;do{if((Mt.tag&ht)===ht){var Bt=Mt.destroy;Mt.destroy=void 0,Bt!==void 0&&Wu(dt,_t,Bt)}Mt=Mt.next}while(Mt!==St)}}function Cl(ht,dt){if(dt=dt.updateQueue,dt=dt!==null?dt.lastEffect:null,dt!==null){var _t=dt=dt.next;do{if((_t.tag&ht)===ht){var St=_t.create;_t.destroy=St()}_t=_t.next}while(_t!==dt)}}function ju(ht){var dt=ht.ref;if(dt!==null){var _t=ht.stateNode;switch(ht.tag){case 5:ht=Xt(_t);break;default:ht=_t}typeof dt=="function"?dt(ht):dt.current=ht}}function h0(ht,dt,_t){if(Eo&&typeof Eo.onCommitFiberUnmount=="function")try{Eo.onCommitFiberUnmount(ps,dt)}catch{}switch(dt.tag){case 0:case 11:case 14:case 15:if(ht=dt.updateQueue,ht!==null&&(ht=ht.lastEffect,ht!==null)){var St=ht=ht.next;do{var Mt=St,Bt=Mt.destroy;Mt=Mt.tag,Bt!==void 0&&(Mt&2||Mt&4)&&Wu(dt,_t,Bt),St=St.next}while(St!==ht)}break;case 1:if(iu(dt,_t),ht=dt.stateNode,typeof ht.componentWillUnmount=="function")try{ht.props=dt.memoizedProps,ht.state=dt.memoizedState,ht.componentWillUnmount()}catch(Zt){xo(dt,_t,Zt)}break;case 5:iu(dt,_t);break;case 4:yn?v0(ht,dt,_t):Wt&&Wt&&(dt=dt.stateNode.containerInfo,_t=Ar(dt),Rr(dt,_t))}}function d0(ht,dt,_t){for(var St=dt;;)if(h0(ht,St,_t),St.child===null||yn&&St.tag===4){if(St===dt)break;for(;St.sibling===null;){if(St.return===null||St.return===dt)return;St=St.return}St.sibling.return=St.return,St=St.sibling}else St.child.return=St,St=St.child}function p0(ht){var dt=ht.alternate;dt!==null&&(ht.alternate=null,p0(dt)),ht.child=null,ht.deletions=null,ht.sibling=null,ht.tag===5&&(dt=ht.stateNode,dt!==null&&Wn(dt)),ht.stateNode=null,ht.return=null,ht.dependencies=null,ht.memoizedProps=null,ht.memoizedState=null,ht.pendingProps=null,ht.stateNode=null,ht.updateQueue=null}function g0(ht){return ht.tag===5||ht.tag===3||ht.tag===4}function m0(ht){e:for(;;){for(;ht.sibling===null;){if(ht.return===null||g0(ht.return))return null;ht=ht.return}for(ht.sibling.return=ht.return,ht=ht.sibling;ht.tag!==5&&ht.tag!==6&&ht.tag!==18;){if(ht.flags&2||ht.child===null||ht.tag===4)continue e;ht.child.return=ht,ht=ht.child}if(!(ht.flags&2))return ht.stateNode}}function A0(ht){if(yn){e:{for(var dt=ht.return;dt!==null;){if(g0(dt))break e;dt=dt.return}throw Error(at(160))}var _t=dt;switch(_t.tag){case 5:dt=_t.stateNode,_t.flags&32&&(Yn(dt),_t.flags&=-33),_t=m0(ht),Yu(ht,_t,dt);break;case 3:case 4:dt=_t.stateNode.containerInfo,_t=m0(ht),Xu(ht,_t,dt);break;default:throw Error(at(161))}}}function Xu(ht,dt,_t){var St=ht.tag;if(St===5||St===6)ht=ht.stateNode,dt?Nn(_t,ht,dt):Gn(_t,ht);else if(St!==4&&(ht=ht.child,ht!==null))for(Xu(ht,dt,_t),ht=ht.sibling;ht!==null;)Xu(ht,dt,_t),ht=ht.sibling}function Yu(ht,dt,_t){var St=ht.tag;if(St===5||St===6)ht=ht.stateNode,dt?Qn(_t,ht,dt):Tn(_t,ht);else if(St!==4&&(ht=ht.child,ht!==null))for(Yu(ht,dt,_t),ht=ht.sibling;ht!==null;)Yu(ht,dt,_t),ht=ht.sibling}function v0(ht,dt,_t){for(var St=dt,Mt=!1,Bt,Zt;;){if(!Mt){Mt=St.return;e:for(;;){if(Mt===null)throw Error(at(160));switch(Bt=Mt.stateNode,Mt.tag){case 5:Zt=!1;break e;case 3:Bt=Bt.containerInfo,Zt=!0;break e;case 4:Bt=Bt.containerInfo,Zt=!0;break e}Mt=Mt.return}Mt=!0}if(St.tag===5||St.tag===6)d0(ht,St,_t),Zt?$n(Bt,St.stateNode):kn(Bt,St.stateNode);else if(St.tag===18)Zt?Sn(Bt,St.stateNode):En(Bt,St.stateNode);else if(St.tag===4){if(St.child!==null){Bt=St.stateNode.containerInfo,Zt=!0,St.child.return=St,St=St.child;continue}}else if(h0(ht,St,_t),St.child!==null){St.child.return=St,St=St.child;continue}if(St===dt)break;for(;St.sibling===null;){if(St.return===null||St.return===dt)return;St=St.return,St.tag===4&&(Mt=!1)}St.sibling.return=St.return,St=St.sibling}}function qu(ht,dt){if(yn){switch(dt.tag){case 0:case 11:case 14:case 15:Es(3,dt,dt.return),Cl(3,dt),Es(5,dt,dt.return);return;case 1:return;case 5:var _t=dt.stateNode;if(_t!=null){var St=dt.memoizedProps;ht=ht!==null?ht.memoizedProps:St;var Mt=dt.type,Bt=dt.updateQueue;dt.updateQueue=null,Bt!==null&&Vn(_t,Bt,Mt,ht,St,dt)}return;case 6:if(dt.stateNode===null)throw Error(at(162));_t=dt.memoizedProps,Un(dt.stateNode,ht!==null?ht.memoizedProps:_t,_t);return;case 3:_n&&ht!==null&&ht.memoizedState.isDehydrated&&Yt(dt.stateNode.containerInfo);return;case 12:return;case 13:au(dt);return;case 19:au(dt);return;case 17:return}throw Error(at(163))}switch(dt.tag){case 0:case 11:case 14:case 15:Es(3,dt,dt.return),Cl(3,dt),Es(5,dt,dt.return);return;case 12:return;case 13:au(dt);return;case 19:au(dt);return;case 3:_n&&ht!==null&&ht.memoizedState.isDehydrated&&Yt(dt.stateNode.containerInfo);break;case 22:case 23:return}e:if(Wt){switch(dt.tag){case 1:case 5:case 6:break e;case 3:case 4:dt=dt.stateNode,Rr(dt.containerInfo,dt.pendingChildren);break e}throw Error(at(163))}}function au(ht){var dt=ht.updateQueue;if(dt!==null){ht.updateQueue=null;var _t=ht.stateNode;_t===null&&(_t=ht.stateNode=new K0),dt.forEach(function(St){var Mt=u3.bind(null,ht,St);_t.has(St)||(_t.add(St),St.then(Mt,Mt))})}}function Z0(ht,dt){for(nr=dt;nr!==null;){dt=nr;var _t=dt.deletions;if(_t!==null)for(var St=0;St<_t.length;St++){var Mt=_t[St];try{var Bt=ht;yn?v0(Bt,Mt,dt):d0(Bt,Mt,dt);var Zt=Mt.alternate;Zt!==null&&(Zt.return=null),Mt.return=null}catch(cr){xo(Mt,dt,cr)}}if(_t=dt.child,dt.subtreeFlags&12854&&_t!==null)_t.return=dt,nr=_t;else for(;nr!==null;){dt=nr;try{var fn=dt.flags;if(fn&32&&yn&&Yn(dt.stateNode),fn&512){var Ln=dt.alternate;if(Ln!==null){var Xn=Ln.ref;Xn!==null&&(typeof Xn=="function"?Xn(null):Xn.current=null)}}if(fn&8192)switch(dt.tag){case 13:if(dt.memoizedState!==null){var ar=dt.alternate;(ar===null||ar.memoizedState===null)&&(ep=Wr())}break;case 22:var yr=dt.memoizedState!==null,dr=dt.alternate,Vr=dr!==null&&dr.memoizedState!==null;if(_t=dt,yn){e:if(St=_t,Mt=yr,Bt=null,yn)for(var ur=St;;){if(ur.tag===5){if(Bt===null){Bt=ur;var so=ur.stateNode;Mt?tr(so):pn(ur.stateNode,ur.memoizedProps)}}else if(ur.tag===6){if(Bt===null){var ko=ur.stateNode;Mt?nn(ko):An(ko,ur.memoizedProps)}}else if((ur.tag!==22&&ur.tag!==23||ur.memoizedState===null||ur===St)&&ur.child!==null){ur.child.return=ur,ur=ur.child;continue}if(ur===St)break;for(;ur.sibling===null;){if(ur.return===null||ur.return===St)break e;Bt===ur&&(Bt=null),ur=ur.return}Bt===ur&&(Bt=null),ur.sibling.return=ur.return,ur=ur.sibling}}if(yr&&!Vr&&_t.mode&1){nr=_t;for(var Cn=_t.child;Cn!==null;){for(_t=nr=Cn;nr!==null;){St=nr;var hn=St.child;switch(St.tag){case 0:case 11:case 14:case 15:Es(4,St,St.return);break;case 1:iu(St,St.return);var Rn=St.stateNode;if(typeof Rn.componentWillUnmount=="function"){var rr=St.return;try{Rn.props=St.memoizedProps,Rn.state=St.memoizedState,Rn.componentWillUnmount()}catch(cr){xo(St,rr,cr)}}break;case 5:iu(St,St.return);break;case 22:if(St.memoizedState!==null){_0(_t);continue}}hn!==null?(hn.return=St,nr=hn):_0(_t)}Cn=Cn.sibling}}}switch(fn&4102){case 2:A0(dt),dt.flags&=-3;break;case 6:A0(dt),dt.flags&=-3,qu(dt.alternate,dt);break;case 4096:dt.flags&=-4097;break;case 4100:dt.flags&=-4097,qu(dt.alternate,dt);break;case 4:qu(dt.alternate,dt)}}catch(cr){xo(dt,dt.return,cr)}if(_t=dt.sibling,_t!==null){_t.return=dt.return,nr=_t;break}nr=dt.return}}}function e3(ht,dt,_t){nr=ht,y0(ht)}function y0(ht,dt,_t){for(var St=(ht.mode&1)!==0;nr!==null;){var Mt=nr,Bt=Mt.child;if(Mt.tag===22&&St){var Zt=Mt.memoizedState!==null||ru;if(!Zt){var fn=Mt.alternate,Ln=fn!==null&&fn.memoizedState!==null||_s;fn=ru;var Xn=_s;if(ru=Zt,(_s=Ln)&&!Xn)for(nr=Mt;nr!==null;)Zt=nr,Ln=Zt.child,Zt.tag===22&&Zt.memoizedState!==null?E0(Mt):Ln!==null?(Ln.return=Zt,nr=Ln):E0(Mt);for(;Bt!==null;)nr=Bt,y0(Bt),Bt=Bt.sibling;nr=Mt,ru=fn,_s=Xn}x0(ht)}else Mt.subtreeFlags&8772&&Bt!==null?(Bt.return=Mt,nr=Bt):x0(ht)}}function x0(ht){for(;nr!==null;){var dt=nr;if(dt.flags&8772){var _t=dt.alternate;try{if(dt.flags&8772)switch(dt.tag){case 0:case 11:case 15:_s||Cl(5,dt);break;case 1:var St=dt.stateNode;if(dt.flags&4&&!_s)if(_t===null)St.componentDidMount();else{var Mt=dt.elementType===dt.type?_t.memoizedProps:uo(dt.type,_t.memoizedProps);St.componentDidUpdate(Mt,_t.memoizedState,St.__reactInternalSnapshotBeforeUpdate)}var Bt=dt.updateQueue;Bt!==null&&pp(dt,Bt,St);break;case 3:var Zt=dt.updateQueue;if(Zt!==null){if(_t=null,dt.child!==null)switch(dt.child.tag){case 5:_t=Xt(dt.child.stateNode);break;case 1:_t=dt.child.stateNode}pp(dt,Zt,_t)}break;case 5:var fn=dt.stateNode;_t===null&&dt.flags&4&&dn(fn,dt.type,dt.memoizedProps,dt);break;case 6:break;case 4:break;case 12:break;case 13:if(_n&&dt.memoizedState===null){var Ln=dt.alternate;if(Ln!==null){var Xn=Ln.memoizedState;if(Xn!==null){var ar=Xn.dehydrated;ar!==null&&en(ar)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(at(163))}_s||dt.flags&512&&ju(dt)}catch(yr){xo(dt,dt.return,yr)}}if(dt===ht){nr=null;break}if(_t=dt.sibling,_t!==null){_t.return=dt.return,nr=_t;break}nr=dt.return}}function _0(ht){for(;nr!==null;){var dt=nr;if(dt===ht){nr=null;break}var _t=dt.sibling;if(_t!==null){_t.return=dt.return,nr=_t;break}nr=dt.return}}function E0(ht){for(;nr!==null;){var dt=nr;try{switch(dt.tag){case 0:case 11:case 15:var _t=dt.return;try{Cl(4,dt)}catch(Ln){xo(dt,_t,Ln)}break;case 1:var St=dt.stateNode;if(typeof St.componentDidMount=="function"){var Mt=dt.return;try{St.componentDidMount()}catch(Ln){xo(dt,Mt,Ln)}}var Bt=dt.return;try{ju(dt)}catch(Ln){xo(dt,Bt,Ln)}break;case 5:var Zt=dt.return;try{ju(dt)}catch(Ln){xo(dt,Zt,Ln)}}}catch(Ln){xo(dt,dt.return,Ln)}if(dt===ht){nr=null;break}var fn=dt.sibling;if(fn!==null){fn.return=dt.return,nr=fn;break}nr=dt.return}}var ou=0,su=1,lu=2,cu=3,uu=4;if(typeof Symbol=="function"&&Symbol.for){var Tl=Symbol.for;ou=Tl("selector.component"),su=Tl("selector.has_pseudo_class"),lu=Tl("selector.role"),cu=Tl("selector.test_id"),uu=Tl("selector.text")}function Ku(ht){var dt=gn(ht);if(dt!=null){if(typeof dt.memoizedProps["data-testname"]!="string")throw Error(at(364));return dt}if(ht=bn(ht),ht===null)throw Error(at(362));return ht.stateNode.current}function Ju(ht,dt){switch(dt.$$typeof){case ou:if(ht.type===dt.value)return!0;break;case su:e:{dt=dt.value,ht=[ht,0];for(var _t=0;_t<ht.length;){var St=ht[_t++],Mt=ht[_t++],Bt=dt[Mt];if(St.tag!==5||!kt(St)){for(;Bt!=null&&Ju(St,Bt);)Mt++,Bt=dt[Mt];if(Mt===dt.length){dt=!0;break e}else for(St=St.child;St!==null;)ht.push(St,Mt),St=St.sibling}}dt=!1}return dt;case lu:if(ht.tag===5&&rn(ht.stateNode,dt.value))return!0;break;case uu:if((ht.tag===5||ht.tag===6)&&(ht=Nt(ht),ht!==null&&0<=ht.indexOf(dt.value)))return!0;break;case cu:if(ht.tag===5&&(ht=ht.memoizedProps["data-testname"],typeof ht=="string"&&ht.toLowerCase()===dt.value.toLowerCase()))return!0;break;default:throw Error(at(365))}return!1}function Zu(ht){switch(ht.$$typeof){case ou:return"<"+(bt(ht.value)||"Unknown")+">";case su:return":has("+(Zu(ht)||"")+")";case lu:return'[role="'+ht.value+'"]';case uu:return'"'+ht.value+'"';case cu:return'[data-testname="'+ht.value+'"]';default:throw Error(at(365))}}function S0(ht,dt){var _t=[];ht=[ht,0];for(var St=0;St<ht.length;){var Mt=ht[St++],Bt=ht[St++],Zt=dt[Bt];if(Mt.tag!==5||!kt(Mt)){for(;Zt!=null&&Ju(Mt,Zt);)Bt++,Zt=dt[Bt];if(Bt===dt.length)_t.push(Mt);else for(Mt=Mt.child;Mt!==null;)ht.push(Mt,Bt),Mt=Mt.sibling}}return _t}function _f(ht,dt){if(!Fn)throw Error(at(363));ht=Ku(ht),ht=S0(ht,dt),dt=[],ht=Array.from(ht);for(var _t=0;_t<ht.length;){var St=ht[_t++];if(St.tag===5)kt(St)||dt.push(St.stateNode);else for(St=St.child;St!==null;)ht.push(St),St=St.sibling}return dt}var t3=Math.ceil,fu=ot.ReactCurrentDispatcher,_h=ot.ReactCurrentOwner,Zr=ot.ReactCurrentBatchConfig,Cr=0,na=null,ga=null,ro=0,Mo=0,Us=Zn(0),xa=0,Ml=null,Ns=0,hu=0,_d=0,Il=null,vo=null,ep=0,tp=1/0;function $s(){tp=Wr()+500}var du=!1,np=null,os=null,pu=!1,ss=null,gu=0,Rl=0,rp=null,mu=-1,Au=0;function po(){return Cr&6?Wr():mu!==-1?mu:mu=Wr()}function ls(ht){return ht.mode&1?Cr&2&&ro!==0?ro&-ro:gs.transition!==null?(Au===0&&(ht=Qo,Qo<<=1,!(Qo&4194240)&&(Qo=64),Au=ht),Au):(ht=wr,ht!==0?ht:mn()):1}function Do(ht,dt,_t){if(50<Rl)throw Rl=0,rp=null,Error(at(185));var St=vu(ht,dt);return St===null?null:(No(St,dt,_t),(!(Cr&2)||St!==na)&&(St===na&&(!(Cr&2)&&(hu|=dt),xa===4&&cs(St,ro)),yo(St,_t),dt===1&&Cr===0&&!(ht.mode&1)&&($s(),Go&&Ao())),St)}function vu(ht,dt){ht.lanes|=dt;var _t=ht.alternate;for(_t!==null&&(_t.lanes|=dt),_t=ht,ht=ht.return;ht!==null;)ht.childLanes|=dt,_t=ht.alternate,_t!==null&&(_t.childLanes|=dt),_t=ht,ht=ht.return;return _t.tag===3?_t.stateNode:null}function yo(ht,dt){var _t=ht.callbackNode;Gs(ht,dt);var St=hs(ht,ht===na?ro:0);if(St===0)_t!==null&&Ms(_t),ht.callbackNode=null,ht.callbackPriority=0;else if(dt=St&-St,ht.callbackPriority!==dt){if(_t!=null&&Ms(_t),dt===1)ht.tag===0?js(T0.bind(null,ht)):Ws(T0.bind(null,ht)),xn?Dn(function(){Cr===0&&Ao()}):Yo(ds,Ao),_t=null;else{switch(Vs(St)){case 1:_t=ds;break;case 4:_t=Ll;break;case 16:_t=lo;break;case 536870912:_t=Hs;break;default:_t=lo}_t=D0(_t,C0.bind(null,ht))}ht.callbackPriority=dt,ht.callbackNode=_t}}function C0(ht,dt){if(mu=-1,Au=0,Cr&6)throw Error(at(327));var _t=ht.callbackNode;if(Ts()&&ht.callbackNode!==_t)return null;var St=hs(ht,ht===na?ro:0);if(St===0)return null;if(St&30||St&ht.expiredLanes||dt)dt=yu(ht,St);else{dt=St;var Mt=Cr;Cr|=2;var Bt=M0();(na!==ht||ro!==dt)&&($s(),Ss(ht,dt));do try{i3();break}catch(fn){w0(ht,fn)}while(1);Rs(),fu.current=Bt,Cr=Mt,ga!==null?dt=0:(na=null,ro=0,dt=xa)}if(dt!==0){if(dt===2&&(Mt=Xo(ht),Mt!==0&&(St=Mt,dt=ip(ht,Mt))),dt===1)throw _t=Ml,Ss(ht,0),cs(ht,St),yo(ht,Wr()),_t;if(dt===6)cs(ht,St);else{if(Mt=ht.current.alternate,!(St&30)&&!n3(Mt)&&(dt=yu(ht,St),dt===2&&(Bt=Xo(ht),Bt!==0&&(St=Bt,dt=ip(ht,Bt))),dt===1))throw _t=Ml,Ss(ht,0),cs(ht,St),yo(ht,Wr()),_t;switch(ht.finishedWork=Mt,ht.finishedLanes=St,dt){case 0:case 1:throw Error(at(345));case 2:Cs(ht,vo);break;case 3:if(cs(ht,St),(St&130023424)===St&&(dt=ep+500-Wr(),10<dt)){if(hs(ht,0)!==0)break;if(Mt=ht.suspendedLanes,(Mt&St)!==St){po(),ht.pingedLanes|=ht.suspendedLanes&Mt;break}ht.timeoutHandle=ln(Cs.bind(null,ht,vo),dt);break}Cs(ht,vo);break;case 4:if(cs(ht,St),(St&4194240)===St)break;for(dt=ht.eventTimes,Mt=-1;0<St;){var Zt=31-zr(St);Bt=1<<Zt,Zt=dt[Zt],Zt>Mt&&(Mt=Zt),St&=~Bt}if(St=Mt,St=Wr()-St,St=(120>St?120:480>St?480:1080>St?1080:1920>St?1920:3e3>St?3e3:4320>St?4320:1960*t3(St/1960))-St,10<St){ht.timeoutHandle=ln(Cs.bind(null,ht,vo),St);break}Cs(ht,vo);break;case 5:Cs(ht,vo);break;default:throw Error(at(329))}}}return yo(ht,Wr()),ht.callbackNode===_t?C0.bind(null,ht):null}function ip(ht,dt){var _t=Il;return ht.current.memoizedState.isDehydrated&&(Ss(ht,dt).flags|=256),ht=yu(ht,dt),ht!==2&&(dt=vo,vo=_t,dt!==null&&ap(dt)),ht}function ap(ht){vo===null?vo=ht:vo.push.apply(vo,ht)}function n3(ht){for(var dt=ht;;){if(dt.flags&16384){var _t=dt.updateQueue;if(_t!==null&&(_t=_t.stores,_t!==null))for(var St=0;St<_t.length;St++){var Mt=_t[St],Bt=Mt.getSnapshot;Mt=Mt.value;try{if(!So(Bt(),Mt))return!1}catch{return!1}}}if(_t=dt.child,dt.subtreeFlags&16384&&_t!==null)_t.return=dt,dt=_t;else{if(dt===ht)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===ht)return!0;dt=dt.return}dt.sibling.return=dt.return,dt=dt.sibling}}return!0}function cs(ht,dt){for(dt&=~_d,dt&=~hu,ht.suspendedLanes|=dt,ht.pingedLanes&=~dt,ht=ht.expirationTimes;0<dt;){var _t=31-zr(dt),St=1<<_t;ht[_t]=-1,dt&=~St}}function T0(ht){if(Cr&6)throw Error(at(327));Ts();var dt=hs(ht,0);if(!(dt&1))return yo(ht,Wr()),null;var _t=yu(ht,dt);if(ht.tag!==0&&_t===2){var St=Xo(ht);St!==0&&(dt=St,_t=ip(ht,St))}if(_t===1)throw _t=Ml,Ss(ht,0),cs(ht,dt),yo(ht,Wr()),_t;if(_t===6)throw Error(at(345));return ht.finishedWork=ht.current.alternate,ht.finishedLanes=dt,Cs(ht,vo),yo(ht,Wr()),null}function b0(ht){ss!==null&&ss.tag===0&&!(Cr&6)&&Ts();var dt=Cr;Cr|=1;var _t=Zr.transition,St=wr;try{if(Zr.transition=null,wr=1,ht)return ht()}finally{wr=St,Zr.transition=_t,Cr=dt,!(Cr&6)&&Ao()}}function op(){Mo=Us.current,hr(Us)}function Ss(ht,dt){ht.finishedWork=null,ht.finishedLanes=0;var _t=ht.timeoutHandle;if(_t!==In&&(ht.timeoutHandle=In,cn(_t)),ga!==null)for(_t=ga.return;_t!==null;){var St=_t;switch(bu(St),St.tag){case 1:St=St.type.childContextTypes,St!=null&&$r();break;case 3:ks(),hr(pr),hr(Dr),Lu();break;case 5:Pu(St);break;case 4:ks();break;case 13:hr(jr);break;case 19:hr(jr);break;case 10:eo(St.type._context);break;case 22:case 23:op()}_t=_t.return}if(na=ht,ga=ht=us(ht.current,null),ro=Mo=dt,xa=0,Ml=null,_d=hu=Ns=0,vo=Il=null,Co!==null){for(dt=0;dt<Co.length;dt++)if(_t=Co[dt],St=_t.interleaved,St!==null){_t.interleaved=null;var Mt=St.next,Bt=_t.pending;if(Bt!==null){var Zt=Bt.next;Bt.next=Mt,St.next=Zt}_t.pending=St}Co=null}return ht}function w0(ht,dt){do{var _t=ga;try{if(Rs(),Hl.current=Jl,Ql){for(var St=Yr.memoizedState;St!==null;){var Mt=St.queue;Mt!==null&&(Mt.pending=null),St=St.next}Ql=!1}if(Os=0,to=io=Yr=null,Zs=!1,Al=0,_h.current=null,_t===null||_t.return===null){xa=1,Ml=dt,ga=null;break}e:{var Bt=ht,Zt=_t.return,fn=_t,Ln=dt;if(dt=ro,fn.flags|=32768,Ln!==null&&typeof Ln=="object"&&typeof Ln.then=="function"){var Xn=Ln,ar=fn,yr=ar.tag;if(!(ar.mode&1)&&(yr===0||yr===11||yr===15)){var dr=ar.alternate;dr?(ar.updateQueue=dr.updateQueue,ar.memoizedState=dr.memoizedState,ar.lanes=dr.lanes):(ar.updateQueue=null,ar.memoizedState=null)}var Vr=Xp(Zt);if(Vr!==null){Vr.flags&=-257,Yp(Vr,Zt,fn,Bt,dt),Vr.mode&1&&jp(Bt,Xn,dt),dt=Vr,Ln=Xn;var ur=dt.updateQueue;if(ur===null){var so=new Set;so.add(Ln),dt.updateQueue=so}else ur.add(Ln);break e}else{if(!(dt&1)){jp(Bt,Xn,dt),sp();break e}Ln=Error(at(426))}}else if(Hr&&fn.mode&1){var ko=Xp(Zt);if(ko!==null){!(ko.flags&65536)&&(ko.flags|=256),Yp(ko,Zt,fn,Bt,dt),Iu(Ln);break e}}Bt=Ln,xa!==4&&(xa=2),Il===null?Il=[Bt]:Il.push(Bt),Ln=$u(Ln,fn),fn=Zt;do{switch(fn.tag){case 3:fn.flags|=65536,dt&=-dt,fn.lanes|=dt;var Cn=Qp(fn,Ln,dt);dp(fn,Cn);break e;case 1:Bt=Ln;var hn=fn.type,Rn=fn.stateNode;if(!(fn.flags&128)&&(typeof hn.getDerivedStateFromError=="function"||Rn!==null&&typeof Rn.componentDidCatch=="function"&&(os===null||!os.has(Rn)))){fn.flags|=65536,dt&=-dt,fn.lanes|=dt;var rr=Wp(fn,Bt,dt);dp(fn,rr);break e}}fn=fn.return}while(fn!==null)}R0(_t)}catch(cr){dt=cr,ga===_t&&_t!==null&&(ga=_t=_t.return);continue}break}while(1)}function M0(){var ht=fu.current;return fu.current=Jl,ht===null?Jl:ht}function sp(){(xa===0||xa===3||xa===2)&&(xa=4),na===null||!(Ns&268435455)&&!(hu&268435455)||cs(na,ro)}function yu(ht,dt){var _t=Cr;Cr|=2;var St=M0();na===ht&&ro===dt||Ss(ht,dt);do try{r3();break}catch(Mt){w0(ht,Mt)}while(1);if(Rs(),Cr=_t,fu.current=St,ga!==null)throw Error(at(261));return na=null,ro=0,xa}function r3(){for(;ga!==null;)I0(ga)}function i3(){for(;ga!==null&&!zs();)I0(ga)}function I0(ht){var dt=L0(ht.alternate,ht,Mo);ht.memoizedProps=ht.pendingProps,dt===null?R0(ht):ga=dt,_h.current=null}function R0(ht){var dt=ht;do{var _t=dt.alternate;if(ht=dt.return,dt.flags&32768){if(_t=q0(_t,dt),_t!==null){_t.flags&=32767,ga=_t;return}if(ht!==null)ht.flags|=32768,ht.subtreeFlags=0,ht.deletions=null;else{xa=6,ga=null;return}}else if(_t=j0(_t,dt,Mo),_t!==null){ga=_t;return}if(dt=dt.sibling,dt!==null){ga=dt;return}ga=dt=ht}while(dt!==null);xa===0&&(xa=5)}function Cs(ht,dt){var _t=wr,St=Zr.transition;try{Zr.transition=null,wr=1,o3(ht,dt,_t)}finally{Zr.transition=St,wr=_t}return null}function o3(ht,dt,_t){do Ts();while(ss!==null);if(Cr&6)throw Error(at(327));var St=ht.finishedWork,Mt=ht.finishedLanes;if(St===null)return null;if(ht.finishedWork=null,ht.finishedLanes=0,St===ht.current)throw Error(at(177));ht.callbackNode=null,ht.callbackPriority=0;var Bt=St.lanes|St.childLanes;if(ts(ht,Bt),ht===na&&(ga=na=null,ro=0),!(St.subtreeFlags&2064)&&!(St.flags&2064)||pu||(pu=!0,D0(lo,function(){return Ts(),null})),Bt=(St.flags&15990)!==0,St.subtreeFlags&15990||Bt){Bt=Zr.transition,Zr.transition=null;var Zt=wr;wr=1;var fn=Cr;Cr|=4,_h.current=null,J0(ht,St),Z0(ht,St),$t(ht.containerInfo),ht.current=St,e3(St),Bl(),Cr=fn,wr=Zt,Zr.transition=Bt}else ht.current=St;if(pu&&(pu=!1,ss=ht,gu=Mt),Bt=ht.pendingLanes,Bt===0&&(os=null),Qs(St.stateNode),yo(ht,Wr()),dt!==null)for(_t=ht.onRecoverableError,St=0;St<dt.length;St++)_t(dt[St]);if(du)throw du=!1,ht=np,np=null,ht;return gu&1&&ht.tag!==0&&Ts(),Bt=ht.pendingLanes,Bt&1?ht===rp?Rl++:(Rl=0,rp=ht):Rl=0,Ao(),null}function Ts(){if(ss!==null){var ht=Vs(gu),dt=Zr.transition,_t=wr;try{if(Zr.transition=null,wr=16>ht?16:ht,ss===null)var St=!1;else{if(ht=ss,ss=null,gu=0,Cr&6)throw Error(at(331));var Mt=Cr;for(Cr|=4,nr=ht.current;nr!==null;){var Bt=nr,Zt=Bt.child;if(nr.flags&16){var fn=Bt.deletions;if(fn!==null){for(var Ln=0;Ln<fn.length;Ln++){var Xn=fn[Ln];for(nr=Xn;nr!==null;){var ar=nr;switch(ar.tag){case 0:case 11:case 15:Es(8,ar,Bt)}var yr=ar.child;if(yr!==null)yr.return=ar,nr=yr;else for(;nr!==null;){ar=nr;var dr=ar.sibling,Vr=ar.return;if(p0(ar),ar===Xn){nr=null;break}if(dr!==null){dr.return=Vr,nr=dr;break}nr=Vr}}}var ur=Bt.alternate;if(ur!==null){var so=ur.child;if(so!==null){ur.child=null;do{var ko=so.sibling;so.sibling=null,so=ko}while(so!==null)}}nr=Bt}}if(Bt.subtreeFlags&2064&&Zt!==null)Zt.return=Bt,nr=Zt;else e:for(;nr!==null;){if(Bt=nr,Bt.flags&2048)switch(Bt.tag){case 0:case 11:case 15:Es(9,Bt,Bt.return)}var Cn=Bt.sibling;if(Cn!==null){Cn.return=Bt.return,nr=Cn;break e}nr=Bt.return}}var hn=ht.current;for(nr=hn;nr!==null;){Zt=nr;var Rn=Zt.child;if(Zt.subtreeFlags&2064&&Rn!==null)Rn.return=Zt,nr=Rn;else e:for(Zt=hn;nr!==null;){if(fn=nr,fn.flags&2048)try{switch(fn.tag){case 0:case 11:case 15:Cl(9,fn)}}catch(cr){xo(fn,fn.return,cr)}if(fn===Zt){nr=null;break e}var rr=fn.sibling;if(rr!==null){rr.return=fn.return,nr=rr;break e}nr=fn.return}}if(Cr=Mt,Ao(),Eo&&typeof Eo.onPostCommitFiberRoot=="function")try{Eo.onPostCommitFiberRoot(ps,ht)}catch{}St=!0}return St}finally{wr=_t,Zr.transition=dt}}return!1}function P0(ht,dt,_t){dt=$u(_t,dt),dt=Qp(ht,dt,1),as(ht,dt),dt=po(),ht=vu(ht,1),ht!==null&&(No(ht,1,dt),yo(ht,dt))}function xo(ht,dt,_t){if(ht.tag===3)P0(ht,ht,_t);else for(;dt!==null;){if(dt.tag===3){P0(dt,ht,_t);break}else if(dt.tag===1){var St=dt.stateNode;if(typeof dt.type.getDerivedStateFromError=="function"||typeof St.componentDidCatch=="function"&&(os===null||!os.has(St))){ht=$u(_t,ht),ht=Wp(dt,ht,1),as(dt,ht),ht=po(),dt=vu(dt,1),dt!==null&&(No(dt,1,ht),yo(dt,ht));break}}dt=dt.return}}function s3(ht,dt,_t){var St=ht.pingCache;St!==null&&St.delete(dt),dt=po(),ht.pingedLanes|=ht.suspendedLanes&_t,na===ht&&(ro&_t)===_t&&(xa===4||xa===3&&(ro&130023424)===ro&&500>Wr()-ep?Ss(ht,0):_d|=_t),yo(ht,dt)}function B0(ht,dt){dt===0&&(ht.mode&1?(dt=Wo,Wo<<=1,!(Wo&130023424)&&(Wo=4194304)):dt=1);var _t=po();ht=vu(ht,dt),ht!==null&&(No(ht,dt,_t),yo(ht,_t))}function l3(ht){var dt=ht.memoizedState,_t=0;dt!==null&&(_t=dt.retryLane),B0(ht,_t)}function u3(ht,dt){var _t=0;switch(ht.tag){case 13:var St=ht.stateNode,Mt=ht.memoizedState;Mt!==null&&(_t=Mt.retryLane);break;case 19:St=ht.stateNode;break;default:throw Error(at(314))}St!==null&&St.delete(dt),B0(ht,_t)}var L0;L0=function(ht,dt,_t){if(ht!==null)if(ht.memoizedProps!==dt.pendingProps||pr.current)wo=!0;else{if(!(ht.lanes&_t)&&!(dt.flags&128))return wo=!1,Y0(ht,dt,_t);wo=!!(ht.flags&131072)}else wo=!1,Hr&&dt.flags&1048576&&yp(dt,Gl,dt.index);switch(dt.lanes=0,dt.tag){case 2:var St=dt.type;ht!==null&&(ht.alternate=null,dt.alternate=null,dt.flags|=2),ht=dt.pendingProps;var Mt=br(dt,Dr.current);Kr(dt,_t),Mt=Fu(null,dt,St,ht,Mt,_t);var Bt=ku();return dt.flags|=1,typeof Mt=="object"&&Mt!==null&&typeof Mt.render=="function"&&Mt.$$typeof===void 0?(dt.tag=1,dt.memoizedState=null,dt.updateQueue=null,kr(St)?(Bt=!0,Br(dt)):Bt=!1,dt.memoizedState=Mt.state!==null&&Mt.state!==void 0?Mt.state:null,Eu(dt),Mt.updater=Nl,dt.stateNode=Mt,Mt._reactInternals=dt,Cu(dt,St,ht,_t),dt=zu(null,dt,St,!0,Bt,_t)):(dt.tag=0,Hr&&Bt&&Tu(dt),ho(null,dt,Mt,_t),dt=dt.child),dt;case 16:St=dt.elementType;e:{switch(ht!==null&&(ht.alternate=null,dt.alternate=null,dt.flags|=2),ht=dt.pendingProps,Mt=St._init,St=Mt(St._payload),dt.type=St,Mt=dt.tag=h3(St),ht=uo(St,ht),Mt){case 0:dt=Vu(null,dt,St,ht,_t);break e;case 1:dt=r0(null,dt,St,ht,_t);break e;case 11:dt=Jp(null,dt,St,ht,_t);break e;case 14:dt=Zp(null,dt,St,uo(St.type,ht),_t);break e}throw Error(at(306,St,""))}return dt;case 0:return St=dt.type,Mt=dt.pendingProps,Mt=dt.elementType===St?Mt:uo(St,Mt),Vu(ht,dt,St,Mt,_t);case 1:return St=dt.type,Mt=dt.pendingProps,Mt=dt.elementType===St?Mt:uo(St,Mt),r0(ht,dt,St,Mt,_t);case 3:e:{if(i0(dt),ht===null)throw Error(at(387));St=dt.pendingProps,Bt=dt.memoizedState,Mt=Bt.element,hp(ht,dt),Ul(dt,St,null,_t);var Zt=dt.memoizedState;if(St=Zt.element,_n&&Bt.isDehydrated)if(Bt={element:St,isDehydrated:!1,cache:Zt.cache,transitions:Zt.transitions},dt.updateQueue.baseState=Bt,dt.memoizedState=Bt,dt.flags&256){Mt=Error(at(423)),dt=a0(ht,dt,St,_t,Mt);break e}else if(St!==Mt){Mt=Error(at(424)),dt=a0(ht,dt,St,_t,Mt);break e}else for(_n&&(bo=Xr(dt.stateNode.containerInfo),To=dt,Hr=!0,Uo=null,Xs=!1),_t=Tp(dt,null,St,_t),dt.child=_t;_t;)_t.flags=_t.flags&-3|4096,_t=_t.sibling;else{if(Ls(),St===Mt){dt=es(ht,dt,_t);break e}ho(ht,dt,St,_t)}dt=dt.child}return dt;case 5:return bp(dt),ht===null&&Mu(dt),St=dt.type,Mt=dt.pendingProps,Bt=ht!==null?ht.memoizedProps:null,Zt=Mt.children,on(St,Mt)?Zt=null:Bt!==null&&on(St,Bt)&&(dt.flags|=32),n0(ht,dt),ho(ht,dt,Zt,_t),dt.child;case 6:return ht===null&&Mu(dt),null;case 13:return o0(ht,dt,_t);case 4:return Ru(dt,dt.stateNode.containerInfo),St=dt.pendingProps,ht===null?dt.child=Ds(dt,null,St,_t):ho(ht,dt,St,_t),dt.child;case 11:return St=dt.type,Mt=dt.pendingProps,Mt=dt.elementType===St?Mt:uo(St,Mt),Jp(ht,dt,St,Mt,_t);case 7:return ho(ht,dt,dt.pendingProps,_t),dt.child;case 8:return ho(ht,dt,dt.pendingProps.children,_t),dt.child;case 12:return ho(ht,dt,dt.pendingProps.children,_t),dt.child;case 10:e:{if(St=dt.type._context,Mt=dt.pendingProps,Bt=dt.memoizedProps,Zt=Mt.value,Fl(dt,St,Zt),Bt!==null)if(So(Bt.value,Zt)){if(Bt.children===Mt.children&&!pr.current){dt=es(ht,dt,_t);break e}}else for(Bt=dt.child,Bt!==null&&(Bt.return=dt);Bt!==null;){var fn=Bt.dependencies;if(fn!==null){Zt=Bt.child;for(var Ln=fn.firstContext;Ln!==null;){if(Ln.context===St){if(Bt.tag===1){Ln=qo(-1,_t&-_t),Ln.tag=2;var Xn=Bt.updateQueue;if(Xn!==null){Xn=Xn.shared;var ar=Xn.pending;ar===null?Ln.next=Ln:(Ln.next=ar.next,ar.next=Ln),Xn.pending=Ln}}Bt.lanes|=_t,Ln=Bt.alternate,Ln!==null&&(Ln.lanes|=_t),fo(Bt.return,_t,dt),fn.lanes|=_t;break}Ln=Ln.next}}else if(Bt.tag===10)Zt=Bt.type===dt.type?null:Bt.child;else if(Bt.tag===18){if(Zt=Bt.return,Zt===null)throw Error(at(341));Zt.lanes|=_t,fn=Zt.alternate,fn!==null&&(fn.lanes|=_t),fo(Zt,_t,dt),Zt=Bt.sibling}else Zt=Bt.child;if(Zt!==null)Zt.return=Bt;else for(Zt=Bt;Zt!==null;){if(Zt===dt){Zt=null;break}if(Bt=Zt.sibling,Bt!==null){Bt.return=Zt.return,Zt=Bt;break}Zt=Zt.return}Bt=Zt}ho(ht,dt,Mt.children,_t),dt=dt.child}return dt;case 9:return Mt=dt.type,St=dt.pendingProps.children,Kr(dt,_t),Mt=Jr(Mt),St=St(Mt),dt.flags|=1,ho(ht,dt,St,_t),dt.child;case 14:return St=dt.type,Mt=uo(St,dt.pendingProps),Mt=uo(St.type,Mt),Zp(ht,dt,St,Mt,_t);case 15:return e0(ht,dt,dt.type,dt.pendingProps,_t);case 17:return St=dt.type,Mt=dt.pendingProps,Mt=dt.elementType===St?Mt:uo(St,Mt),ht!==null&&(ht.alternate=null,dt.alternate=null,dt.flags|=2),dt.tag=1,kr(St)?(ht=!0,Br(dt)):ht=!1,Kr(dt,_t),Ap(dt,St,Mt),Cu(dt,St,Mt,_t),zu(null,dt,St,!0,ht,_t);case 19:return u0(ht,dt,_t);case 22:return t0(ht,dt,_t)}throw Error(at(156,dt.tag))};function D0(ht,dt){return Yo(ht,dt)}function f3(ht,dt,_t,St){this.tag=ht,this.key=_t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=dt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=St,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fo(ht,dt,_t,St){return new f3(ht,dt,_t,St)}function lp(ht){return ht=ht.prototype,!(!ht||!ht.isReactComponent)}function h3(ht){if(typeof ht=="function")return lp(ht)?1:0;if(ht!=null){if(ht=ht.$$typeof,ht===xt)return 11;if(ht===At)return 14}return 2}function us(ht,dt){var _t=ht.alternate;return _t===null?(_t=Fo(ht.tag,dt,ht.key,ht.mode),_t.elementType=ht.elementType,_t.type=ht.type,_t.stateNode=ht.stateNode,_t.alternate=ht,ht.alternate=_t):(_t.pendingProps=dt,_t.type=ht.type,_t.flags=0,_t.subtreeFlags=0,_t.deletions=null),_t.flags=ht.flags&14680064,_t.childLanes=ht.childLanes,_t.lanes=ht.lanes,_t.child=ht.child,_t.memoizedProps=ht.memoizedProps,_t.memoizedState=ht.memoizedState,_t.updateQueue=ht.updateQueue,dt=ht.dependencies,_t.dependencies=dt===null?null:{lanes:dt.lanes,firstContext:dt.firstContext},_t.sibling=ht.sibling,_t.index=ht.index,_t.ref=ht.ref,_t}function xu(ht,dt,_t,St,Mt,Bt){var Zt=2;if(St=ht,typeof ht=="function")lp(ht)&&(Zt=1);else if(typeof ht=="string")Zt=5;else e:switch(ht){case ct:return bs(_t.children,Mt,Bt,dt);case ut:Zt=8,Mt|=8;break;case ft:return ht=Fo(12,_t,dt,Mt|2),ht.elementType=ft,ht.lanes=Bt,ht;case yt:return ht=Fo(13,_t,dt,Mt),ht.elementType=yt,ht.lanes=Bt,ht;case mt:return ht=Fo(19,_t,dt,Mt),ht.elementType=mt,ht.lanes=Bt,ht;case Et:return _u(_t,Mt,Bt,dt);default:if(typeof ht=="object"&&ht!==null)switch(ht.$$typeof){case pt:Zt=10;break e;case gt:Zt=9;break e;case xt:Zt=11;break e;case At:Zt=14;break e;case vt:Zt=16,St=null;break e}throw Error(at(130,ht==null?ht:typeof ht,""))}return dt=Fo(Zt,_t,dt,Mt),dt.elementType=ht,dt.type=St,dt.lanes=Bt,dt}function bs(ht,dt,_t,St){return ht=Fo(7,ht,St,dt),ht.lanes=_t,ht}function _u(ht,dt,_t,St){return ht=Fo(22,ht,St,dt),ht.elementType=Et,ht.lanes=_t,ht.stateNode={},ht}function cp(ht,dt,_t){return ht=Fo(6,ht,null,dt),ht.lanes=_t,ht}function up(ht,dt,_t){return dt=Fo(4,ht.children!==null?ht.children:[],ht.key,dt),dt.lanes=_t,dt.stateNode={containerInfo:ht.containerInfo,pendingChildren:null,implementation:ht.implementation},dt}function d3(ht,dt,_t,St,Mt){this.tag=dt,this.containerInfo=ht,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=In,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ws(0),this.expirationTimes=ws(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.identifierPrefix=St,this.onRecoverableError=Mt,_n&&(this.mutableSourceEagerHydrationData=null)}function F0(ht,dt,_t,St,Mt,Bt,Zt,fn,Ln){return ht=new d3(ht,dt,_t,fn,Ln),dt===1?(dt=1,Bt===!0&&(dt|=8)):dt=0,Bt=Fo(3,null,null,dt),ht.current=Bt,Bt.stateNode=ht,Bt.memoizedState={element:St,isDehydrated:_t,cache:null,transitions:null},Eu(Bt),ht}function k0(ht){if(!ht)return gr;ht=ht._reactInternals;e:{if(wt(ht)!==ht||ht.tag!==1)throw Error(at(170));var dt=ht;do{switch(dt.tag){case 3:dt=dt.stateNode.context;break e;case 1:if(kr(dt.type)){dt=dt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}dt=dt.return}while(dt!==null);throw Error(at(171))}if(ht.tag===1){var _t=ht.type;if(kr(_t))return Gr(ht,_t,dt)}return dt}function O0(ht){var dt=ht._reactInternals;if(dt===void 0)throw typeof ht.render=="function"?Error(at(188)):(ht=Object.keys(ht).join(","),Error(at(268,ht)));return ht=Ut(dt),ht===null?null:ht.stateNode}function U0(ht,dt){if(ht=ht.memoizedState,ht!==null&&ht.dehydrated!==null){var _t=ht.retryLane;ht.retryLane=_t!==0&&_t<dt?_t:dt}}function fp(ht,dt){U0(ht,dt),(ht=ht.alternate)&&U0(ht,dt)}function p3(ht){return ht=Ut(ht),ht===null?null:ht.stateNode}function g3(){return null}return tt.attemptContinuousHydration=function(ht){if(ht.tag===13){var dt=po();Do(ht,134217728,dt),fp(ht,134217728)}},tt.attemptHydrationAtCurrentPriority=function(ht){if(ht.tag===13){var dt=po(),_t=ls(ht);Do(ht,_t,dt),fp(ht,_t)}},tt.attemptSynchronousHydration=function(ht){switch(ht.tag){case 3:var dt=ht.stateNode;if(dt.current.memoizedState.isDehydrated){var _t=jo(dt.pendingLanes);_t!==0&&($o(dt,_t|1),yo(dt,Wr()),!(Cr&6)&&($s(),Ao()))}break;case 13:var St=po();b0(function(){return Do(ht,1,St)}),fp(ht,1)}},tt.batchedUpdates=function(ht,dt){var _t=Cr;Cr|=1;try{return ht(dt)}finally{Cr=_t,Cr===0&&($s(),Go&&Ao())}},tt.createComponentSelector=function(ht){return{$$typeof:ou,value:ht}},tt.createContainer=function(ht,dt,_t,St,Mt,Bt,Zt){return F0(ht,dt,!1,null,_t,St,Mt,Bt,Zt)},tt.createHasPseudoClassSelector=function(ht){return{$$typeof:su,value:ht}},tt.createHydrationContainer=function(ht,dt,_t,St,Mt,Bt,Zt,fn,Ln){return ht=F0(_t,St,!0,ht,Mt,Bt,Zt,fn,Ln),ht.context=k0(null),_t=ht.current,St=po(),Mt=ls(_t),Bt=qo(St,Mt),Bt.callback=dt??null,as(_t,Bt),ht.current.lanes=Mt,No(ht,Mt,St),yo(ht,St),ht},tt.createPortal=function(ht,dt,_t){var St=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lt,key:St==null?null:""+St,children:ht,containerInfo:dt,implementation:_t}},tt.createRoleSelector=function(ht){return{$$typeof:lu,value:ht}},tt.createTestNameSelector=function(ht){return{$$typeof:cu,value:ht}},tt.createTextSelector=function(ht){return{$$typeof:uu,value:ht}},tt.deferredUpdates=function(ht){var dt=wr,_t=Zr.transition;try{return Zr.transition=null,wr=16,ht()}finally{wr=dt,Zr.transition=_t}},tt.discreteUpdates=function(ht,dt,_t,St,Mt){var Bt=wr,Zt=Zr.transition;try{return Zr.transition=null,wr=1,ht(dt,_t,St,Mt)}finally{wr=Bt,Zr.transition=Zt,Cr===0&&$s()}},tt.findAllNodes=_f,tt.findBoundingRects=function(ht,dt){if(!Fn)throw Error(at(363));dt=_f(ht,dt),ht=[];for(var _t=0;_t<dt.length;_t++)ht.push(jn(dt[_t]));for(dt=ht.length-1;0<dt;dt--){_t=ht[dt];for(var St=_t.x,Mt=St+_t.width,Bt=_t.y,Zt=Bt+_t.height,fn=dt-1;0<=fn;fn--)if(dt!==fn){var Ln=ht[fn],Xn=Ln.x,ar=Xn+Ln.width,yr=Ln.y,dr=yr+Ln.height;if(St>=Xn&&Bt>=yr&&Mt<=ar&&Zt<=dr){ht.splice(dt,1);break}else if(St!==Xn||_t.width!==Ln.width||dr<Bt||yr>Zt){if(!(Bt!==yr||_t.height!==Ln.height||ar<St||Xn>Mt)){Xn>St&&(Ln.width+=Xn-St,Ln.x=St),ar<Mt&&(Ln.width=Mt-Xn),ht.splice(dt,1);break}}else{yr>Bt&&(Ln.height+=yr-Bt,Ln.y=Bt),dr<Zt&&(Ln.height=Zt-yr),ht.splice(dt,1);break}}}return ht},tt.findHostInstance=O0,tt.findHostInstanceWithNoPortals=function(ht){return ht=Ft(ht),ht=ht!==null?Ht(ht):null,ht===null?null:ht.stateNode},tt.findHostInstanceWithWarning=function(ht){return O0(ht)},tt.flushControlled=function(ht){var dt=Cr;Cr|=1;var _t=Zr.transition,St=wr;try{Zr.transition=null,wr=1,ht()}finally{wr=St,Zr.transition=_t,Cr=dt,Cr===0&&($s(),Ao())}},tt.flushPassiveEffects=Ts,tt.flushSync=b0,tt.focusWithin=function(ht,dt){if(!Fn)throw Error(at(363));for(ht=Ku(ht),dt=S0(ht,dt),dt=Array.from(dt),ht=0;ht<dt.length;){var _t=dt[ht++];if(!kt(_t)){if(_t.tag===5&&Mn(_t.stateNode))return!0;for(_t=_t.child;_t!==null;)dt.push(_t),_t=_t.sibling}}return!1},tt.getCurrentUpdatePriority=function(){return wr},tt.getFindAllNodesFailureDescription=function(ht,dt){if(!Fn)throw Error(at(363));var _t=0,St=[];ht=[Ku(ht),0];for(var Mt=0;Mt<ht.length;){var Bt=ht[Mt++],Zt=ht[Mt++],fn=dt[Zt];if((Bt.tag!==5||!kt(Bt))&&(Ju(Bt,fn)&&(St.push(Zu(fn)),Zt++,Zt>_t&&(_t=Zt)),Zt<dt.length))for(Bt=Bt.child;Bt!==null;)ht.push(Bt,Zt),Bt=Bt.sibling}if(_t<dt.length){for(ht=[];_t<dt.length;_t++)ht.push(Zu(dt[_t]));return`findAllNodes was able to match part of the selector:
  `+(St.join(" > ")+`

No matching component was found for:
  `)+ht.join(" > ")}return null},tt.getPublicRootInstance=function(ht){if(ht=ht.current,!ht.child)return null;switch(ht.child.tag){case 5:return Xt(ht.child.stateNode);default:return ht.child.stateNode}},tt.injectIntoDevTools=function(ht){if(ht={bundleType:ht.bundleType,version:ht.version,rendererPackageName:ht.rendererPackageName,rendererConfig:ht.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ot.ReactCurrentDispatcher,findHostInstanceByFiber:p3,findFiberByHostInstance:ht.findFiberByHostInstance||g3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")ht=!1;else{var dt=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(dt.isDisabled||!dt.supportsFiber)ht=!0;else{try{ps=dt.inject(ht),Eo=dt}catch{}ht=!!dt.checkDCE}}return ht},tt.isAlreadyRendering=function(){return!1},tt.observeVisibleRects=function(ht,dt,_t,St){if(!Fn)throw Error(at(363));ht=_f(ht,dt);var Mt=wn(ht,_t,St).disconnect;return{disconnect:function(){Mt()}}},tt.registerMutableSourceForHydration=function(ht,dt){var _t=dt._getVersion;_t=_t(dt._source),ht.mutableSourceEagerHydrationData==null?ht.mutableSourceEagerHydrationData=[dt,_t]:ht.mutableSourceEagerHydrationData.push(dt,_t)},tt.runWithPriority=function(ht,dt){var _t=wr;try{return wr=ht,dt()}finally{wr=_t}},tt.shouldError=function(){return null},tt.shouldSuspend=function(){return!1},tt.updateContainer=function(ht,dt,_t,St){var Mt=dt.current,Bt=po(),Zt=ls(Mt);return _t=k0(_t),dt.context===null?dt.context=_t:dt.pendingContext=_t,dt=qo(Bt,Zt),dt.payload={element:ht},St=St===void 0?null:St,St!==null&&(dt.callback=St),as(Mt,dt),ht=Do(Mt,Zt,Bt),ht!==null&&Ol(ht,Mt,Zt),Zt},tt};reactReconciler.exports=reactReconciler_production_min;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function _(Dt,zt){var $t=Dt.length;Dt.push(zt);e:for(;0<$t;){var Lt=$t-1>>>1,Vt=Dt[Lt];if(0<rt(Vt,zt))Dt[Lt]=zt,Dt[$t]=Vt,$t=Lt;else break e}}function tt(Dt){return Dt.length===0?null:Dt[0]}function nt(Dt){if(Dt.length===0)return null;var zt=Dt[0],$t=Dt.pop();if($t!==zt){Dt[0]=$t;e:for(var Lt=0,Vt=Dt.length,tn=Vt>>>1;Lt<tn;){var an=2*(Lt+1)-1,on=Dt[an],sn=an+1,ln=Dt[sn];if(0>rt(on,$t))sn<Vt&&0>rt(ln,on)?(Dt[Lt]=ln,Dt[sn]=$t,Lt=sn):(Dt[Lt]=on,Dt[an]=$t,Lt=an);else if(sn<Vt&&0>rt(ln,$t))Dt[Lt]=ln,Dt[sn]=$t,Lt=sn;else break e}}return zt}function rt(Dt,zt){var $t=Dt.sortIndex-zt.sortIndex;return $t!==0?$t:Dt.id-zt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var it=performance;_e.unstable_now=function(){return it.now()}}else{var at=Date,ot=at.now();_e.unstable_now=function(){return at.now()-ot}}var st=[],lt=[],ct=1,ut=null,ft=3,pt=!1,gt=!1,xt=!1,yt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,At=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function vt(Dt){for(var zt=tt(lt);zt!==null;){if(zt.callback===null)nt(lt);else if(zt.startTime<=Dt)nt(lt),zt.sortIndex=zt.expirationTime,_(st,zt);else break;zt=tt(lt)}}function Et(Dt){if(xt=!1,vt(Dt),!gt)if(tt(st)!==null)gt=!0,Xt(Ct);else{var zt=tt(lt);zt!==null&&Jt(Et,zt.startTime-Dt)}}function Ct(Dt,zt){gt=!1,xt&&(xt=!1,mt(It),It=-1),pt=!0;var $t=ft;try{for(vt(zt),ut=tt(st);ut!==null&&(!(ut.expirationTime>zt)||Dt&&!Ft());){var Lt=ut.callback;if(typeof Lt=="function"){ut.callback=null,ft=ut.priorityLevel;var Vt=Lt(ut.expirationTime<=zt);zt=_e.unstable_now(),typeof Vt=="function"?ut.callback=Vt:ut===tt(st)&&nt(st),vt(zt)}else nt(st);ut=tt(st)}if(ut!==null)var tn=!0;else{var an=tt(lt);an!==null&&Jt(Et,an.startTime-zt),tn=!1}return tn}finally{ut=null,ft=$t,pt=!1}}var Tt=!1,bt=null,It=-1,wt=5,Rt=-1;function Ft(){return!(_e.unstable_now()-Rt<wt)}function Ut(){if(bt!==null){var Dt=_e.unstable_now();Rt=Dt;var zt=!0;try{zt=bt(!0,Dt)}finally{zt?Gt():(Tt=!1,bt=null)}}else Tt=!1}var Gt;if(typeof At=="function")Gt=function(){At(Ut)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,jt=Ht.port2;Ht.port1.onmessage=Ut,Gt=function(){jt.postMessage(null)}}else Gt=function(){yt(Ut,0)};function Xt(Dt){bt=Dt,Tt||(Tt=!0,Gt())}function Jt(Dt,zt){It=yt(function(){Dt(_e.unstable_now())},zt)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Dt){Dt.callback=null},_e.unstable_continueExecution=function(){gt||pt||(gt=!0,Xt(Ct))},_e.unstable_forceFrameRate=function(Dt){0>Dt||125<Dt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<Dt?Math.floor(1e3/Dt):5},_e.unstable_getCurrentPriorityLevel=function(){return ft},_e.unstable_getFirstCallbackNode=function(){return tt(st)},_e.unstable_next=function(Dt){switch(ft){case 1:case 2:case 3:var zt=3;break;default:zt=ft}var $t=ft;ft=zt;try{return Dt()}finally{ft=$t}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Dt,zt){switch(Dt){case 1:case 2:case 3:case 4:case 5:break;default:Dt=3}var $t=ft;ft=Dt;try{return zt()}finally{ft=$t}},_e.unstable_scheduleCallback=function(Dt,zt,$t){var Lt=_e.unstable_now();switch(typeof $t=="object"&&$t!==null?($t=$t.delay,$t=typeof $t=="number"&&0<$t?Lt+$t:Lt):$t=Lt,Dt){case 1:var Vt=-1;break;case 2:Vt=250;break;case 5:Vt=1073741823;break;case 4:Vt=1e4;break;default:Vt=5e3}return Vt=$t+Vt,Dt={id:ct++,callback:zt,priorityLevel:Dt,startTime:$t,expirationTime:Vt,sortIndex:-1},$t>Lt?(Dt.sortIndex=$t,_(lt,Dt),tt(st)===null&&Dt===tt(lt)&&(xt?(mt(It),It=-1):xt=!0,Jt(Et,$t-Lt))):(Dt.sortIndex=Vt,_(st,Dt),gt||pt||(gt=!0,Xt(Ct))),Dt},_e.unstable_shouldYield=Ft,_e.unstable_wrapCallback=function(Dt){var zt=ft;return function(){var $t=ft;ft=zt;try{return Dt.apply(this,arguments)}finally{ft=$t}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;const isPromise=_e=>typeof _e=="object"&&typeof _e.then=="function",globalCache=[];function shallowEqualArrays(_e,_,tt=(nt,rt)=>nt===rt){if(_e===_)return!0;if(!_e||!_)return!1;const nt=_e.length;if(_.length!==nt)return!1;for(let rt=0;rt<nt;rt++)if(!tt(_e[rt],_[rt]))return!1;return!0}function query(_e,_=null,tt=!1,nt={}){_===null&&(_=[_e]);for(const it of globalCache)if(shallowEqualArrays(_,it.keys,it.equal)){if(tt)return;if(Object.prototype.hasOwnProperty.call(it,"error"))throw it.error;if(Object.prototype.hasOwnProperty.call(it,"response"))return nt.lifespan&&nt.lifespan>0&&(it.timeout&&clearTimeout(it.timeout),it.timeout=setTimeout(it.remove,nt.lifespan)),it.response;if(!tt)throw it.promise}const rt={keys:_,equal:nt.equal,remove:()=>{const it=globalCache.indexOf(rt);it!==-1&&globalCache.splice(it,1)},promise:(isPromise(_e)?_e:_e(..._)).then(it=>{rt.response=it,nt.lifespan&&nt.lifespan>0&&(rt.timeout=setTimeout(rt.remove,nt.lifespan))}).catch(it=>rt.error=it)};if(globalCache.push(rt),!tt)throw rt.promise}const suspend=(_e,_,tt)=>query(_e,_,!1,tt),preload=(_e,_,tt)=>void query(_e,_,!0,tt),clear=_e=>{if(_e===void 0||_e.length===0)globalCache.splice(0,globalCache.length);else{const _=globalCache.find(tt=>shallowEqualArrays(_e,tt.keys,tt.equal));_&&_.remove()}},catalogue={},extend$2=_e=>void Object.assign(catalogue,_e);function createRenderer(_e,_){function tt(ct,{args:ut=[],attach:ft,...pt},gt){let xt=`${ct[0].toUpperCase()}${ct.slice(1)}`,yt;if(ct==="primitive"){if(pt.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const mt=pt.object;yt=prepare(mt,{type:ct,root:gt,attach:ft,primitive:!0})}else{const mt=catalogue[xt];if(!mt)throw new Error(`R3F: ${xt} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(ut))throw new Error("R3F: The args prop must be an array!");yt=prepare(new mt(...ut),{type:ct,root:gt,attach:ft,memoizedProps:{args:ut}})}return yt.__r3f.attach===void 0&&(yt instanceof BufferGeometry?yt.__r3f.attach="geometry":yt instanceof Material&&(yt.__r3f.attach="material")),xt!=="inject"&&applyProps$1(yt,pt),yt}function nt(ct,ut){let ft=!1;if(ut){var pt,gt;(pt=ut.__r3f)!=null&&pt.attach?attach(ct,ut,ut.__r3f.attach):ut.isObject3D&&ct.isObject3D&&(ct.add(ut),ft=!0),ft||(gt=ct.__r3f)==null||gt.objects.push(ut),ut.__r3f||prepare(ut,{}),ut.__r3f.parent=ct,updateInstance(ut),invalidateInstance(ut)}}function rt(ct,ut,ft){let pt=!1;if(ut){var gt,xt;if((gt=ut.__r3f)!=null&&gt.attach)attach(ct,ut,ut.__r3f.attach);else if(ut.isObject3D&&ct.isObject3D){ut.parent=ct,ut.dispatchEvent({type:"added"});const yt=ct.children.filter(At=>At!==ut),mt=yt.indexOf(ft);ct.children=[...yt.slice(0,mt),ut,...yt.slice(mt)],pt=!0}pt||(xt=ct.__r3f)==null||xt.objects.push(ut),ut.__r3f||prepare(ut,{}),ut.__r3f.parent=ct,updateInstance(ut),invalidateInstance(ut)}}function it(ct,ut,ft=!1){ct&&[...ct].forEach(pt=>at(ut,pt,ft))}function at(ct,ut,ft){if(ut){var pt,gt,xt;if(ut.__r3f&&(ut.__r3f.parent=null),(pt=ct.__r3f)!=null&&pt.objects&&(ct.__r3f.objects=ct.__r3f.objects.filter(Et=>Et!==ut)),(gt=ut.__r3f)!=null&&gt.attach)detach(ct,ut,ut.__r3f.attach);else if(ut.isObject3D&&ct.isObject3D){var yt;ct.remove(ut),(yt=ut.__r3f)!=null&&yt.root&&removeInteractivity(ut.__r3f.root,ut)}const At=(xt=ut.__r3f)==null?void 0:xt.primitive,vt=ft===void 0?ut.dispose!==null&&!At:ft;if(!At){var mt;it((mt=ut.__r3f)==null?void 0:mt.objects,ut,vt),it(ut.children,ut,vt)}delete ut.__r3f,vt&&ut.dispose&&ut.type!=="Scene"&&schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,()=>{try{ut.dispose()}catch{}}),invalidateInstance(ct)}}function ot(ct,ut,ft,pt){var gt;const xt=(gt=ct.__r3f)==null?void 0:gt.parent;if(!xt)return;const yt=tt(ut,ft,ct.__r3f.root);if(ct.children){for(const mt of ct.children)mt.__r3f&&nt(yt,mt);ct.children=ct.children.filter(mt=>!mt.__r3f)}ct.__r3f.objects.forEach(mt=>nt(yt,mt)),ct.__r3f.objects=[],ct.__r3f.autoRemovedBeforeAppend||at(xt,ct),yt.parent&&(yt.__r3f.autoRemovedBeforeAppend=!0),nt(xt,yt),yt.raycast&&yt.__r3f.eventCount&&yt.__r3f.root.getState().internal.interaction.push(yt),[pt,pt.alternate].forEach(mt=>{mt!==null&&(mt.stateNode=yt,mt.ref&&(typeof mt.ref=="function"?mt.ref(yt):mt.ref.current=yt))})}const st=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Reconciler({createInstance:tt,removeChild:at,appendChild:nt,appendInitialChild:nt,insertBefore:rt,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(ct,ut)=>{if(!ut)return;const ft=ct.getState().scene;ft.__r3f&&(ft.__r3f.root=ct,nt(ft,ut))},removeChildFromContainer:(ct,ut)=>{ut&&at(ct.getState().scene,ut)},insertInContainerBefore:(ct,ut,ft)=>{if(!ut||!ft)return;const pt=ct.getState().scene;pt.__r3f&&rt(pt,ut,ft)},getRootHostContext:()=>null,getChildHostContext:ct=>ct,finalizeInitialChildren(ct){var ut;return!!((ut=ct==null?void 0:ct.__r3f)!=null?ut:{}).handlers},prepareUpdate(ct,ut,ft,pt){var gt;if(((gt=ct==null?void 0:ct.__r3f)!=null?gt:{}).primitive&&pt.object&&pt.object!==ct)return[!0];{const{args:yt=[],children:mt,...At}=pt,{args:vt=[],children:Et,...Ct}=ft;if(!Array.isArray(yt))throw new Error("R3F: the args prop must be an array!");if(yt.some((bt,It)=>bt!==vt[It]))return[!0];const Tt=diffProps(ct,At,Ct,!0);return Tt.changes.length?[!1,Tt]:null}},commitUpdate(ct,[ut,ft],pt,gt,xt,yt){ut?ot(ct,pt,xt,yt):applyProps$1(ct,ft)},commitMount(ct,ut,ft,pt){var gt;const xt=(gt=ct.__r3f)!=null?gt:{};ct.raycast&&xt.handlers&&xt.eventCount&&ct.__r3f.root.getState().internal.interaction.push(ct)},getPublicInstance:ct=>ct,prepareForCommit:()=>null,preparePortalMount:ct=>prepare(ct.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(ct){var ut;const{attach:ft,parent:pt}=(ut=ct.__r3f)!=null?ut:{};ft&&pt&&detach(pt,ct,ft),ct.isObject3D&&(ct.visible=!1),invalidateInstance(ct)},unhideInstance(ct,ut){var ft;const{attach:pt,parent:gt}=(ft=ct.__r3f)!=null?ft:{};pt&&gt&&attach(gt,ct,pt),(ct.isObject3D&&ut.visible==null||ut.visible)&&(ct.visible=!0),invalidateInstance(ct)},createTextInstance:st,hideTextInstance:st,unhideTextInstance:st,getCurrentEventPriority:()=>_?_():constantsExports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&is.fun(performance.now)?performance.now:is.fun(Date.now)?Date.now:()=>0,scheduleTimeout:is.fun(setTimeout)?setTimeout:void 0,cancelTimeout:is.fun(clearTimeout)?clearTimeout:void 0}),applyProps:applyProps$1}}var _window$document,_window$navigator;const hasColorSpace$1=_e=>"colorSpace"in _e||"outputColorSpace"in _e,getColorManagement=()=>{var _e;return(_e=catalogue.ColorManagement)!=null?_e:null},isOrthographicCamera=_e=>_e&&_e.isOrthographicCamera,isRef$1=_e=>_e&&_e.hasOwnProperty("current"),useIsomorphicLayoutEffect$1=typeof window<"u"&&((_window$document=window.document)!=null&&_window$document.createElement||((_window$navigator=window.navigator)==null?void 0:_window$navigator.product)==="ReactNative")?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(_e){const _=reactExports.useRef(_e);return useIsomorphicLayoutEffect$1(()=>void(_.current=_e),[_e]),_}function Block({set:_e}){return useIsomorphicLayoutEffect$1(()=>(_e(new Promise(()=>null)),()=>_e(!1)),[_e]),null}class ErrorBoundary extends reactExports.Component{constructor(..._){super(..._),this.state={error:!1}}componentDidCatch(_){this.props.set(_)}render(){return this.state.error?null:this.props.children}}ErrorBoundary.getDerivedStateFromError=()=>({error:!0});const DEFAULT="__default",DEFAULTS=new Map,isDiffSet=_e=>_e&&!!_e.memoized&&!!_e.changes;function calculateDpr(_e){var _;const tt=typeof window<"u"?(_=window.devicePixelRatio)!=null?_:2:1;return Array.isArray(_e)?Math.min(Math.max(_e[0],tt),_e[1]):_e}const getRootState=_e=>{var _;return(_=_e.__r3f)==null?void 0:_.root.getState()},is={obj:_e=>_e===Object(_e)&&!is.arr(_e)&&typeof _e!="function",fun:_e=>typeof _e=="function",str:_e=>typeof _e=="string",num:_e=>typeof _e=="number",boo:_e=>typeof _e=="boolean",und:_e=>_e===void 0,arr:_e=>Array.isArray(_e),equ(_e,_,{arrays:tt="shallow",objects:nt="reference",strict:rt=!0}={}){if(typeof _e!=typeof _||!!_e!=!!_)return!1;if(is.str(_e)||is.num(_e))return _e===_;const it=is.obj(_e);if(it&&nt==="reference")return _e===_;const at=is.arr(_e);if(at&&tt==="reference")return _e===_;if((at||it)&&_e===_)return!0;let ot;for(ot in _e)if(!(ot in _))return!1;if(it&&tt==="shallow"&&nt==="shallow"){for(ot in rt?_:_e)if(!is.equ(_e[ot],_[ot],{strict:rt,objects:"reference"}))return!1}else for(ot in rt?_:_e)if(_e[ot]!==_[ot])return!1;if(is.und(ot)){if(at&&_e.length===0&&_.length===0||it&&Object.keys(_e).length===0&&Object.keys(_).length===0)return!0;if(_e!==_)return!1}return!0}};function buildGraph(_e){const _={nodes:{},materials:{}};return _e&&_e.traverse(tt=>{tt.name&&(_.nodes[tt.name]=tt),tt.material&&!_.materials[tt.material.name]&&(_.materials[tt.material.name]=tt.material)}),_}function dispose(_e){_e.dispose&&_e.type!=="Scene"&&_e.dispose();for(const _ in _e)_.dispose==null||_.dispose(),delete _e[_]}function prepare(_e,_){const tt=_e;return tt.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,..._},_e}function resolve(_e,_){let tt=_e;if(_.includes("-")){const nt=_.split("-"),rt=nt.pop();return tt=nt.reduce((it,at)=>it[at],_e),{target:tt,key:rt}}else return{target:tt,key:_}}const INDEX_REGEX=/-\d+$/;function attach(_e,_,tt){if(is.str(tt)){if(INDEX_REGEX.test(tt)){const it=tt.replace(INDEX_REGEX,""),{target:at,key:ot}=resolve(_e,it);Array.isArray(at[ot])||(at[ot]=[])}const{target:nt,key:rt}=resolve(_e,tt);_.__r3f.previousAttach=nt[rt],nt[rt]=_}else _.__r3f.previousAttach=tt(_e,_)}function detach(_e,_,tt){var nt,rt;if(is.str(tt)){const{target:it,key:at}=resolve(_e,tt),ot=_.__r3f.previousAttach;ot===void 0?delete it[at]:it[at]=ot}else(nt=_.__r3f)==null||nt.previousAttach==null||nt.previousAttach(_e,_);(rt=_.__r3f)==null||delete rt.previousAttach}function diffProps(_e,{children:_,key:tt,ref:nt,...rt},{children:it,key:at,ref:ot,...st}={},lt=!1){var ct;const ut=(ct=_e==null?void 0:_e.__r3f)!=null?ct:{},ft=Object.entries(rt),pt=[];if(lt){const xt=Object.keys(st);for(let yt=0;yt<xt.length;yt++)rt.hasOwnProperty(xt[yt])||ft.unshift([xt[yt],DEFAULT+"remove"])}ft.forEach(([xt,yt])=>{var mt;if((mt=_e.__r3f)!=null&&mt.primitive&&xt==="object"||is.equ(yt,st[xt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(xt))return pt.push([xt,yt,!0,[]]);let At=[];xt.includes("-")&&(At=xt.split("-")),pt.push([xt,yt,!1,At]);for(const vt in rt){const Et=rt[vt];vt.startsWith(`${xt}-`)&&pt.push([vt,Et,!1,vt.split("-")])}});const gt={...rt};return ut.memoizedProps&&ut.memoizedProps.args&&(gt.args=ut.memoizedProps.args),ut.memoizedProps&&ut.memoizedProps.attach&&(gt.attach=ut.memoizedProps.attach),{memoized:gt,changes:pt}}function applyProps$1(_e,_){var tt,nt,rt;const it=(tt=_e.__r3f)!=null?tt:{},at=it.root,ot=(nt=at==null||at.getState==null?void 0:at.getState())!=null?nt:{},{memoized:st,changes:lt}=isDiffSet(_)?_:diffProps(_e,_),ct=it.eventCount;_e.__r3f&&(_e.__r3f.memoizedProps=st);for(let ft=0;ft<lt.length;ft++){let[pt,gt,xt,yt]=lt[ft];if(hasColorSpace$1(_e)){const Et="srgb",Ct="srgb-linear";pt==="encoding"?(pt="colorSpace",gt=gt===3001?Et:Ct):pt==="outputEncoding"&&(pt="outputColorSpace",gt=gt===3001?Et:Ct)}let mt=_e,At=mt[pt];if(yt.length&&(At=yt.reduce((vt,Et)=>vt[Et],_e),!(At&&At.set))){const[vt,...Et]=yt.reverse();mt=Et.reverse().reduce((Ct,Tt)=>Ct[Tt],_e),pt=vt}if(gt===DEFAULT+"remove")if(mt.constructor){let vt=DEFAULTS.get(mt.constructor);vt||(vt=new mt.constructor,DEFAULTS.set(mt.constructor,vt)),gt=vt[pt]}else gt=0;if(xt)gt?it.handlers[pt]=gt:delete it.handlers[pt],it.eventCount=Object.keys(it.handlers).length;else if(At&&At.set&&(At.copy||At instanceof Layers)){if(Array.isArray(gt))At.fromArray?At.fromArray(gt):At.set(...gt);else if(At.copy&&gt&&gt.constructor&&At.constructor===gt.constructor)At.copy(gt);else if(gt!==void 0){const vt=At instanceof Color$1;!vt&&At.setScalar?At.setScalar(gt):At instanceof Layers&&gt instanceof Layers?At.mask=gt.mask:At.set(gt),!getColorManagement()&&!ot.linear&&vt&&At.convertSRGBToLinear()}}else if(mt[pt]=gt,mt[pt]instanceof Texture&&mt[pt].format===RGBAFormat&&mt[pt].type===UnsignedByteType){const vt=mt[pt];hasColorSpace$1(vt)&&hasColorSpace$1(ot.gl)?vt.colorSpace=ot.gl.outputColorSpace:vt.encoding=ot.gl.outputEncoding}invalidateInstance(_e)}if(it.parent&&ot.internal&&_e.raycast&&ct!==it.eventCount){const ft=ot.internal.interaction.indexOf(_e);ft>-1&&ot.internal.interaction.splice(ft,1),it.eventCount&&ot.internal.interaction.push(_e)}return!(lt.length===1&&lt[0][0]==="onUpdate")&&lt.length&&(rt=_e.__r3f)!=null&&rt.parent&&updateInstance(_e),_e}function invalidateInstance(_e){var _,tt;const nt=(_=_e.__r3f)==null||(tt=_.root)==null||tt.getState==null?void 0:tt.getState();nt&&nt.internal.frames===0&&nt.invalidate()}function updateInstance(_e){_e.onUpdate==null||_e.onUpdate(_e)}function updateCamera(_e,_){_e.manual||(isOrthographicCamera(_e)?(_e.left=_.width/-2,_e.right=_.width/2,_e.top=_.height/2,_e.bottom=_.height/-2):_e.aspect=_.width/_.height,_e.updateProjectionMatrix(),_e.updateMatrixWorld())}function makeId(_e){return(_e.eventObject||_e.object).uuid+"/"+_e.index+_e.instanceId}function getEventPriority(){var _e;const _=typeof self<"u"&&self||typeof window<"u"&&window;if(!_)return constantsExports.DefaultEventPriority;switch((_e=_.event)==null?void 0:_e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}}function releaseInternalPointerCapture(_e,_,tt,nt){const rt=tt.get(_);rt&&(tt.delete(_),tt.size===0&&(_e.delete(nt),rt.target.releasePointerCapture(nt)))}function removeInteractivity(_e,_){const{internal:tt}=_e.getState();tt.interaction=tt.interaction.filter(nt=>nt!==_),tt.initialHits=tt.initialHits.filter(nt=>nt!==_),tt.hovered.forEach((nt,rt)=>{(nt.eventObject===_||nt.object===_)&&tt.hovered.delete(rt)}),tt.capturedMap.forEach((nt,rt)=>{releaseInternalPointerCapture(tt.capturedMap,_,nt,rt)})}function createEvents(_e){function _(st){const{internal:lt}=_e.getState(),ct=st.offsetX-lt.initialClick[0],ut=st.offsetY-lt.initialClick[1];return Math.round(Math.sqrt(ct*ct+ut*ut))}function tt(st){return st.filter(lt=>["Move","Over","Enter","Out","Leave"].some(ct=>{var ut;return(ut=lt.__r3f)==null?void 0:ut.handlers["onPointer"+ct]}))}function nt(st,lt){const ct=_e.getState(),ut=new Set,ft=[],pt=lt?lt(ct.internal.interaction):ct.internal.interaction;for(let mt=0;mt<pt.length;mt++){const At=getRootState(pt[mt]);At&&(At.raycaster.camera=void 0)}ct.previousRoot||ct.events.compute==null||ct.events.compute(st,ct);function gt(mt){const At=getRootState(mt);if(!At||!At.events.enabled||At.raycaster.camera===null)return[];if(At.raycaster.camera===void 0){var vt;At.events.compute==null||At.events.compute(st,At,(vt=At.previousRoot)==null?void 0:vt.getState()),At.raycaster.camera===void 0&&(At.raycaster.camera=null)}return At.raycaster.camera?At.raycaster.intersectObject(mt,!0):[]}let xt=pt.flatMap(gt).sort((mt,At)=>{const vt=getRootState(mt.object),Et=getRootState(At.object);return!vt||!Et?mt.distance-At.distance:Et.events.priority-vt.events.priority||mt.distance-At.distance}).filter(mt=>{const At=makeId(mt);return ut.has(At)?!1:(ut.add(At),!0)});ct.events.filter&&(xt=ct.events.filter(xt,ct));for(const mt of xt){let At=mt.object;for(;At;){var yt;(yt=At.__r3f)!=null&&yt.eventCount&&ft.push({...mt,eventObject:At}),At=At.parent}}if("pointerId"in st&&ct.internal.capturedMap.has(st.pointerId))for(let mt of ct.internal.capturedMap.get(st.pointerId).values())ut.has(makeId(mt.intersection))||ft.push(mt.intersection);return ft}function rt(st,lt,ct,ut){const ft=_e.getState();if(st.length){const pt={stopped:!1};for(const gt of st){const xt=getRootState(gt.object)||ft,{raycaster:yt,pointer:mt,camera:At,internal:vt}=xt,Et=new Vector3(mt.x,mt.y,0).unproject(At),Ct=Rt=>{var Ft,Ut;return(Ft=(Ut=vt.capturedMap.get(Rt))==null?void 0:Ut.has(gt.eventObject))!=null?Ft:!1},Tt=Rt=>{const Ft={intersection:gt,target:lt.target};vt.capturedMap.has(Rt)?vt.capturedMap.get(Rt).set(gt.eventObject,Ft):vt.capturedMap.set(Rt,new Map([[gt.eventObject,Ft]])),lt.target.setPointerCapture(Rt)},bt=Rt=>{const Ft=vt.capturedMap.get(Rt);Ft&&releaseInternalPointerCapture(vt.capturedMap,gt.eventObject,Ft,Rt)};let It={};for(let Rt in lt){let Ft=lt[Rt];typeof Ft!="function"&&(It[Rt]=Ft)}let wt={...gt,...It,pointer:mt,intersections:st,stopped:pt.stopped,delta:ct,unprojectedPoint:Et,ray:yt.ray,camera:At,stopPropagation(){const Rt="pointerId"in lt&&vt.capturedMap.get(lt.pointerId);if((!Rt||Rt.has(gt.eventObject))&&(wt.stopped=pt.stopped=!0,vt.hovered.size&&Array.from(vt.hovered.values()).find(Ft=>Ft.eventObject===gt.eventObject))){const Ft=st.slice(0,st.indexOf(gt));it([...Ft,gt])}},target:{hasPointerCapture:Ct,setPointerCapture:Tt,releasePointerCapture:bt},currentTarget:{hasPointerCapture:Ct,setPointerCapture:Tt,releasePointerCapture:bt},nativeEvent:lt};if(ut(wt),pt.stopped===!0)break}}return st}function it(st){const{internal:lt}=_e.getState();for(const ct of lt.hovered.values())if(!st.length||!st.find(ut=>ut.object===ct.object&&ut.index===ct.index&&ut.instanceId===ct.instanceId)){const ft=ct.eventObject.__r3f,pt=ft==null?void 0:ft.handlers;if(lt.hovered.delete(makeId(ct)),ft!=null&&ft.eventCount){const gt={...ct,intersections:st};pt.onPointerOut==null||pt.onPointerOut(gt),pt.onPointerLeave==null||pt.onPointerLeave(gt)}}}function at(st,lt){for(let ct=0;ct<lt.length;ct++){const ut=lt[ct].__r3f;ut==null||ut.handlers.onPointerMissed==null||ut.handlers.onPointerMissed(st)}}function ot(st){switch(st){case"onPointerLeave":case"onPointerCancel":return()=>it([]);case"onLostPointerCapture":return lt=>{const{internal:ct}=_e.getState();"pointerId"in lt&&ct.capturedMap.has(lt.pointerId)&&requestAnimationFrame(()=>{ct.capturedMap.has(lt.pointerId)&&(ct.capturedMap.delete(lt.pointerId),it([]))})}}return function(ct){const{onPointerMissed:ut,internal:ft}=_e.getState();ft.lastEvent.current=ct;const pt=st==="onPointerMove",gt=st==="onClick"||st==="onContextMenu"||st==="onDoubleClick",yt=nt(ct,pt?tt:void 0),mt=gt?_(ct):0;st==="onPointerDown"&&(ft.initialClick=[ct.offsetX,ct.offsetY],ft.initialHits=yt.map(vt=>vt.eventObject)),gt&&!yt.length&&mt<=2&&(at(ct,ft.interaction),ut&&ut(ct)),pt&&it(yt);function At(vt){const Et=vt.eventObject,Ct=Et.__r3f,Tt=Ct==null?void 0:Ct.handlers;if(Ct!=null&&Ct.eventCount)if(pt){if(Tt.onPointerOver||Tt.onPointerEnter||Tt.onPointerOut||Tt.onPointerLeave){const bt=makeId(vt),It=ft.hovered.get(bt);It?It.stopped&&vt.stopPropagation():(ft.hovered.set(bt,vt),Tt.onPointerOver==null||Tt.onPointerOver(vt),Tt.onPointerEnter==null||Tt.onPointerEnter(vt))}Tt.onPointerMove==null||Tt.onPointerMove(vt)}else{const bt=Tt[st];bt?(!gt||ft.initialHits.includes(Et))&&(at(ct,ft.interaction.filter(It=>!ft.initialHits.includes(It))),bt(vt)):gt&&ft.initialHits.includes(Et)&&at(ct,ft.interaction.filter(It=>!ft.initialHits.includes(It)))}}rt(yt,ct,mt,At)}}return{handlePointer:ot}}const privateKeys=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],isRenderer=_e=>!!(_e!=null&&_e.render),context=reactExports.createContext(null),createStore=(_e,_)=>{const tt=create((ot,st)=>{const lt=new Vector3,ct=new Vector3,ut=new Vector3;function ft(mt=st().camera,At=ct,vt=st().size){const{width:Et,height:Ct,top:Tt,left:bt}=vt,It=Et/Ct;At instanceof Vector3?ut.copy(At):ut.set(...At);const wt=mt.getWorldPosition(lt).distanceTo(ut);if(isOrthographicCamera(mt))return{width:Et/mt.zoom,height:Ct/mt.zoom,top:Tt,left:bt,factor:1,distance:wt,aspect:It};{const Rt=mt.fov*Math.PI/180,Ft=2*Math.tan(Rt/2)*wt,Ut=Ft*(Et/Ct);return{width:Ut,height:Ft,top:Tt,left:bt,factor:Et/Ut,distance:wt,aspect:It}}}let pt;const gt=mt=>ot(At=>({performance:{...At.performance,current:mt}})),xt=new Vector2;return{set:ot,get:st,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(mt=1)=>_e(st(),mt),advance:(mt,At)=>_(mt,At,st()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:xt,mouse:xt,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const mt=st();pt&&clearTimeout(pt),mt.performance.current!==mt.performance.min&&gt(mt.performance.min),pt=setTimeout(()=>gt(st().performance.max),mt.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:ft},setEvents:mt=>ot(At=>({...At,events:{...At.events,...mt}})),setSize:(mt,At,vt,Et,Ct)=>{const Tt=st().camera,bt={width:mt,height:At,top:Et||0,left:Ct||0,updateStyle:vt};ot(It=>({size:bt,viewport:{...It.viewport,...ft(Tt,ct,bt)}}))},setDpr:mt=>ot(At=>{const vt=calculateDpr(mt);return{viewport:{...At.viewport,dpr:vt,initialDpr:At.viewport.initialDpr||vt}}}),setFrameloop:(mt="always")=>{const At=st().clock;At.stop(),At.elapsedTime=0,mt!=="never"&&(At.start(),At.elapsedTime=0),ot(()=>({frameloop:mt}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:reactExports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(mt,At,vt)=>{const Et=st().internal;return Et.priority=Et.priority+(At>0?1:0),Et.subscribers.push({ref:mt,priority:At,store:vt}),Et.subscribers=Et.subscribers.sort((Ct,Tt)=>Ct.priority-Tt.priority),()=>{const Ct=st().internal;Ct!=null&&Ct.subscribers&&(Ct.priority=Ct.priority-(At>0?1:0),Ct.subscribers=Ct.subscribers.filter(Tt=>Tt.ref!==mt))}}}}}),nt=tt.getState();let rt=nt.size,it=nt.viewport.dpr,at=nt.camera;return tt.subscribe(()=>{const{camera:ot,size:st,viewport:lt,gl:ct,set:ut}=tt.getState();if(st!==rt||lt.dpr!==it){var ft;rt=st,it=lt.dpr,updateCamera(ot,st),ct.setPixelRatio(lt.dpr);const pt=(ft=st.updateStyle)!=null?ft:typeof HTMLCanvasElement<"u"&&ct.domElement instanceof HTMLCanvasElement;ct.setSize(st.width,st.height,pt)}ot!==at&&(at=ot,ut(pt=>({viewport:{...pt.viewport,...pt.viewport.getCurrentViewport(ot)}})))}),tt.subscribe(ot=>_e(ot)),tt};let i$4,globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(_e,_){if(_e.size)for(const{callback:tt}of _e.values())tt(_)}function flushGlobalEffects(_e,_){switch(_e){case"before":return run(globalEffects,_);case"after":return run(globalAfterEffects,_);case"tail":return run(globalTailEffects,_)}}let subscribers,subscription;function render$1(_e,_,tt){let nt=_.clock.getDelta();for(_.frameloop==="never"&&typeof _e=="number"&&(nt=_e-_.clock.elapsedTime,_.clock.oldTime=_.clock.elapsedTime,_.clock.elapsedTime=_e),subscribers=_.internal.subscribers,i$4=0;i$4<subscribers.length;i$4++)subscription=subscribers[i$4],subscription.ref.current(subscription.store.getState(),nt,tt);return!_.internal.priority&&_.gl.render&&_.gl.render(_.scene,_.camera),_.internal.frames=Math.max(0,_.internal.frames-1),_.frameloop==="always"?1:_.internal.frames}function createLoop(_e){let _=!1,tt,nt,rt;function it(st){nt=requestAnimationFrame(it),_=!0,tt=0,flushGlobalEffects("before",st);for(const ct of _e.values()){var lt;rt=ct.store.getState(),rt.internal.active&&(rt.frameloop==="always"||rt.internal.frames>0)&&!((lt=rt.gl.xr)!=null&&lt.isPresenting)&&(tt+=render$1(st,rt))}if(flushGlobalEffects("after",st),tt===0)return flushGlobalEffects("tail",st),_=!1,cancelAnimationFrame(nt)}function at(st,lt=1){var ct;if(!st)return _e.forEach(ut=>at(ut.store.getState()),lt);(ct=st.gl.xr)!=null&&ct.isPresenting||!st.internal.active||st.frameloop==="never"||(st.internal.frames=Math.min(60,st.internal.frames+lt),_||(_=!0,requestAnimationFrame(it)))}function ot(st,lt=!0,ct,ut){if(lt&&flushGlobalEffects("before",st),ct)render$1(st,ct,ut);else for(const ft of _e.values())render$1(st,ft.store.getState());lt&&flushGlobalEffects("after",st)}return{loop:it,invalidate:at,advance:ot}}function useStore(){const _e=reactExports.useContext(context);if(!_e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return _e}function useThree(_e=tt=>tt,_){return useStore()(_e,_)}function useFrame(_e,_=0){const tt=useStore(),nt=tt.getState().internal.subscribe,rt=useMutableCallback(_e);return useIsomorphicLayoutEffect$1(()=>nt(rt,_,tt),[_,nt,tt]),null}const memoizedLoaders=new WeakMap;function loadingFn(_e,_){return function(tt,...nt){let rt=memoizedLoaders.get(tt);return rt||(rt=new tt,memoizedLoaders.set(tt,rt)),_e&&_e(rt),Promise.all(nt.map(it=>new Promise((at,ot)=>rt.load(it,st=>{st.scene&&Object.assign(st,buildGraph(st.scene)),at(st)},_,st=>ot(new Error(`Could not load ${it}: ${st.message}`)))))).finally(()=>rt.dispose==null?void 0:rt.dispose())}}function useLoader(_e,_,tt,nt){const rt=Array.isArray(_)?_:[_],it=suspend(loadingFn(tt,nt),[_e,...rt],{equal:is.equ});return Array.isArray(_)?it:it[0]}useLoader.preload=function(_e,_,tt){const nt=Array.isArray(_)?_:[_];return preload(loadingFn(tt),[_e,...nt])};useLoader.clear=function(_e,_){const tt=Array.isArray(_)?_:[_];return clear([_e,...tt])};const roots=new Map,{invalidate,advance}=createLoop(roots),{reconciler,applyProps}=createRenderer(roots,getEventPriority),shallowLoose={objects:"shallow",strict:!1},createRendererInstance=(_e,_)=>{const tt=typeof _e=="function"?_e(_):_e;return isRenderer(tt)?tt:new WebGLRenderer({powerPreference:"high-performance",canvas:_,antialias:!0,alpha:!0,..._e})};function computeInitialSize(_e,_){if(_)return _;if(typeof HTMLCanvasElement<"u"&&_e instanceof HTMLCanvasElement&&_e.parentElement){const{width:tt,height:nt,top:rt,left:it}=_e.parentElement.getBoundingClientRect();return{width:tt,height:nt,top:rt,left:it}}else if(typeof OffscreenCanvas<"u"&&_e instanceof OffscreenCanvas)return{width:_e.width,height:_e.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function createRoot(_e){const _=roots.get(_e),tt=_==null?void 0:_.fiber,nt=_==null?void 0:_.store;_&&console.warn("R3F.createRoot should only be called once!");const rt=typeof reportError=="function"?reportError:console.error,it=nt||createStore(invalidate,advance),at=tt||reconciler.createContainer(it,constantsExports.ConcurrentRoot,null,!1,null,"",rt,null);_||roots.set(_e,{fiber:at,store:it});let ot,st=!1,lt;return{configure(ct={}){let{gl:ut,size:ft,scene:pt,events:gt,onCreated:xt,shadows:yt=!1,linear:mt=!1,flat:At=!1,legacy:vt=!1,orthographic:Et=!1,frameloop:Ct="always",dpr:Tt=[1,2],performance:bt,raycaster:It,camera:wt,onPointerMissed:Rt}=ct,Ft=it.getState(),Ut=Ft.gl;Ft.gl||Ft.set({gl:Ut=createRendererInstance(ut,_e)});let Gt=Ft.raycaster;Gt||Ft.set({raycaster:Gt=new Raycaster});const{params:Ht,...jt}=It||{};if(is.equ(jt,Gt,shallowLoose)||applyProps(Gt,{...jt}),is.equ(Ht,Gt.params,shallowLoose)||applyProps(Gt,{params:{...Gt.params,...Ht}}),!Ft.camera||Ft.camera===lt&&!is.equ(lt,wt,shallowLoose)){lt=wt;const Vt=wt instanceof Camera,tn=Vt?wt:Et?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Vt||(tn.position.z=5,wt&&applyProps(tn,wt),!Ft.camera&&!(wt!=null&&wt.rotation)&&tn.lookAt(0,0,0)),Ft.set({camera:tn})}if(!Ft.scene){let Vt;pt instanceof Scene?Vt=pt:(Vt=new Scene,pt&&applyProps(Vt,pt)),Ft.set({scene:prepare(Vt)})}if(!Ft.xr){var Xt;const Vt=(on,sn)=>{const ln=it.getState();ln.frameloop!=="never"&&advance(on,!0,ln,sn)},tn=()=>{const on=it.getState();on.gl.xr.enabled=on.gl.xr.isPresenting,on.gl.xr.setAnimationLoop(on.gl.xr.isPresenting?Vt:null),on.gl.xr.isPresenting||invalidate(on)},an={connect(){const on=it.getState().gl;on.xr.addEventListener("sessionstart",tn),on.xr.addEventListener("sessionend",tn)},disconnect(){const on=it.getState().gl;on.xr.removeEventListener("sessionstart",tn),on.xr.removeEventListener("sessionend",tn)}};typeof((Xt=Ut.xr)==null?void 0:Xt.addEventListener)=="function"&&an.connect(),Ft.set({xr:an})}if(Ut.shadowMap){const Vt=Ut.shadowMap.enabled,tn=Ut.shadowMap.type;if(Ut.shadowMap.enabled=!!yt,is.boo(yt))Ut.shadowMap.type=PCFSoftShadowMap;else if(is.str(yt)){var Jt;const an={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ut.shadowMap.type=(Jt=an[yt])!=null?Jt:PCFSoftShadowMap}else is.obj(yt)&&Object.assign(Ut.shadowMap,yt);(Vt!==Ut.shadowMap.enabled||tn!==Ut.shadowMap.type)&&(Ut.shadowMap.needsUpdate=!0)}const Dt=getColorManagement();Dt&&("enabled"in Dt?Dt.enabled=!vt:"legacyMode"in Dt&&(Dt.legacyMode=vt)),applyProps(Ut,{outputEncoding:mt?3e3:3001,toneMapping:At?NoToneMapping:ACESFilmicToneMapping}),Ft.legacy!==vt&&Ft.set(()=>({legacy:vt})),Ft.linear!==mt&&Ft.set(()=>({linear:mt})),Ft.flat!==At&&Ft.set(()=>({flat:At})),ut&&!is.fun(ut)&&!isRenderer(ut)&&!is.equ(ut,Ut,shallowLoose)&&applyProps(Ut,ut),gt&&!Ft.events.handlers&&Ft.set({events:gt(it)});const Lt=computeInitialSize(_e,ft);return is.equ(Lt,Ft.size,shallowLoose)||Ft.setSize(Lt.width,Lt.height,Lt.updateStyle,Lt.top,Lt.left),Tt&&Ft.viewport.dpr!==calculateDpr(Tt)&&Ft.setDpr(Tt),Ft.frameloop!==Ct&&Ft.setFrameloop(Ct),Ft.onPointerMissed||Ft.set({onPointerMissed:Rt}),bt&&!is.equ(bt,Ft.performance,shallowLoose)&&Ft.set(Vt=>({performance:{...Vt.performance,...bt}})),ot=xt,st=!0,this},render(ct){return st||this.configure(),reconciler.updateContainer(reactExports.createElement(Provider,{store:it,children:ct,onCreated:ot,rootElement:_e}),at,null,()=>{}),it},unmount(){unmountComponentAtNode(_e)}}}function Provider({store:_e,children:_,onCreated:tt,rootElement:nt}){return useIsomorphicLayoutEffect$1(()=>{const rt=_e.getState();rt.set(it=>({internal:{...it.internal,active:!0}})),tt&&tt(rt),_e.getState().events.connected||rt.events.connect==null||rt.events.connect(nt)},[]),reactExports.createElement(context.Provider,{value:_e},_)}function unmountComponentAtNode(_e,_){const tt=roots.get(_e),nt=tt==null?void 0:tt.fiber;if(nt){const rt=tt==null?void 0:tt.store.getState();rt&&(rt.internal.active=!1),reconciler.updateContainer(null,nt,null,()=>{rt&&setTimeout(()=>{try{var it,at,ot,st;rt.events.disconnect==null||rt.events.disconnect(),(it=rt.gl)==null||(at=it.renderLists)==null||at.dispose==null||at.dispose(),(ot=rt.gl)==null||ot.forceContextLoss==null||ot.forceContextLoss(),(st=rt.gl)!=null&&st.xr&&rt.xr.disconnect(),dispose(rt),roots.delete(_e),_&&_(_e)}catch{}},500)})}}function createPortal(_e,_,tt){return reactExports.createElement(Portal$1,{key:_.uuid,children:_e,container:_,state:tt})}function Portal$1({state:_e={},children:_,container:tt}){const{events:nt,size:rt,...it}=_e,at=useStore(),[ot]=reactExports.useState(()=>new Raycaster),[st]=reactExports.useState(()=>new Vector2),lt=reactExports.useCallback((ut,ft)=>{const pt={...ut};Object.keys(ut).forEach(xt=>{(privateKeys.includes(xt)||ut[xt]!==ft[xt]&&ft[xt])&&delete pt[xt]});let gt;if(ft&&rt){const xt=ft.camera;gt=ut.viewport.getCurrentViewport(xt,new Vector3,rt),xt!==ut.camera&&updateCamera(xt,rt)}return{...pt,scene:tt,raycaster:ot,pointer:st,mouse:st,previousRoot:at,events:{...ut.events,...ft==null?void 0:ft.events,...nt},size:{...ut.size,...rt},viewport:{...ut.viewport,...gt},...it}},[_e]),[ct]=reactExports.useState(()=>{const ut=at.getState();return create((pt,gt)=>({...ut,scene:tt,raycaster:ot,pointer:st,mouse:st,previousRoot:at,events:{...ut.events,...nt},size:{...ut.size,...rt},...it,set:pt,get:gt,setEvents:xt=>pt(yt=>({...yt,events:{...yt.events,...xt}}))}))});return reactExports.useEffect(()=>{const ut=at.subscribe(ft=>ct.setState(pt=>lt(ft,pt)));return()=>{ut(),ct.destroy()}},[]),reactExports.useEffect(()=>{ct.setState(ut=>lt(at.getState(),ut))},[lt]),reactExports.createElement(reactExports.Fragment,null,reconciler.createPortal(reactExports.createElement(context.Provider,{value:ct},_),ct,null))}reconciler.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version});function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e},_extends$1.apply(this,arguments)}function debounce$1(_e,_,tt){var nt,rt,it,at,ot;_==null&&(_=100);function st(){var ct=Date.now()-at;ct<_&&ct>=0?nt=setTimeout(st,_-ct):(nt=null,tt||(ot=_e.apply(it,rt),it=rt=null))}var lt=function(){it=this,rt=arguments,at=Date.now();var ct=tt&&!nt;return nt||(nt=setTimeout(st,_)),ct&&(ot=_e.apply(it,rt),it=rt=null),ot};return lt.clear=function(){nt&&(clearTimeout(nt),nt=null)},lt.flush=function(){nt&&(ot=_e.apply(it,rt),it=rt=null,clearTimeout(nt),nt=null)},lt}debounce$1.debounce=debounce$1;var debounce_1=debounce$1;const createDebounce=getDefaultExportFromCjs(debounce_1);function useMeasure(_e){let{debounce:_,scroll:tt,polyfill:nt,offsetSize:rt}=_e===void 0?{debounce:0,scroll:!1,offsetSize:!1}:_e;const it=nt||(typeof window>"u"?class{}:window.ResizeObserver);if(!it)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[at,ot]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),st=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:at}),lt=_?typeof _=="number"?_:_.scroll:null,ct=_?typeof _=="number"?_:_.resize:null,ut=reactExports.useRef(!1);reactExports.useEffect(()=>(ut.current=!0,()=>void(ut.current=!1)));const[ft,pt,gt]=reactExports.useMemo(()=>{const At=()=>{if(!st.current.element)return;const{left:vt,top:Et,width:Ct,height:Tt,bottom:bt,right:It,x:wt,y:Rt}=st.current.element.getBoundingClientRect(),Ft={left:vt,top:Et,width:Ct,height:Tt,bottom:bt,right:It,x:wt,y:Rt};st.current.element instanceof HTMLElement&&rt&&(Ft.height=st.current.element.offsetHeight,Ft.width=st.current.element.offsetWidth),Object.freeze(Ft),ut.current&&!areBoundsEqual(st.current.lastBounds,Ft)&&ot(st.current.lastBounds=Ft)};return[At,ct?createDebounce(At,ct):At,lt?createDebounce(At,lt):At]},[ot,rt,lt,ct]);function xt(){st.current.scrollContainers&&(st.current.scrollContainers.forEach(At=>At.removeEventListener("scroll",gt,!0)),st.current.scrollContainers=null),st.current.resizeObserver&&(st.current.resizeObserver.disconnect(),st.current.resizeObserver=null)}function yt(){st.current.element&&(st.current.resizeObserver=new it(gt),st.current.resizeObserver.observe(st.current.element),tt&&st.current.scrollContainers&&st.current.scrollContainers.forEach(At=>At.addEventListener("scroll",gt,{capture:!0,passive:!0})))}const mt=At=>{!At||At===st.current.element||(xt(),st.current.element=At,st.current.scrollContainers=findScrollContainers(At),yt())};return useOnWindowScroll(gt,!!tt),useOnWindowResize(pt),reactExports.useEffect(()=>{xt(),yt()},[tt,gt,pt]),reactExports.useEffect(()=>xt,[]),[mt,at,ft]}function useOnWindowResize(_e){reactExports.useEffect(()=>{const _=_e;return window.addEventListener("resize",_),()=>void window.removeEventListener("resize",_)},[_e])}function useOnWindowScroll(_e,_){reactExports.useEffect(()=>{if(_){const tt=_e;return window.addEventListener("scroll",tt,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",tt,!0)}},[_e,_])}function findScrollContainers(_e){const _=[];if(!_e||_e===document.body)return _;const{overflow:tt,overflowX:nt,overflowY:rt}=window.getComputedStyle(_e);return[tt,nt,rt].some(it=>it==="auto"||it==="scroll")&&_.push(_e),[..._,...findScrollContainers(_e.parentElement)]}const keys$1=["x","y","top","bottom","left","right","width","height"],areBoundsEqual=(_e,_)=>keys$1.every(tt=>_e[tt]===_[tt]);var __defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(_e,_,tt)=>_ in _e?__defProp$1(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:tt}):_e[_]=tt,__spreadValues=(_e,_)=>{for(var tt in _||(_={}))__hasOwnProp.call(_,tt)&&__defNormalProp$1(_e,tt,_[tt]);if(__getOwnPropSymbols)for(var tt of __getOwnPropSymbols(_))__propIsEnum.call(_,tt)&&__defNormalProp$1(_e,tt,_[tt]);return _e},__spreadProps=(_e,_)=>__defProps(_e,__getOwnPropDescs(_));function traverseFiber(_e,_,tt){if(!_e)return;if(tt(_e)===!0)return _e;let nt=_?_e.return:_e.child;for(;nt;){const rt=traverseFiber(nt,_,tt);if(rt)return rt;nt=_?null:nt.sibling}}function wrapContext(_e){try{return Object.defineProperties(_e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return _e}}const FiberContext=wrapContext(reactExports.createContext(null));class FiberProvider extends reactExports.Component{render(){return reactExports.createElement(FiberContext.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner,ReactCurrentDispatcher}=reactExports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function useFiber(){const _e=reactExports.useContext(FiberContext);if(_e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const _=reactExports.useId();return reactExports.useMemo(()=>{for(const nt of[ReactCurrentOwner==null?void 0:ReactCurrentOwner.current,_e,_e==null?void 0:_e.alternate]){if(!nt)continue;const rt=traverseFiber(nt,!1,it=>{let at=it.memoizedState;for(;at;){if(at.memoizedState===_)return!0;at=at.next}});if(rt)return rt}},[_e,_])}function useContextMap(){var _e,_;const tt=useFiber(),[nt]=reactExports.useState(()=>new Map);nt.clear();let rt=tt;for(;rt;){const it=(_e=rt.type)==null?void 0:_e._context;it&&it!==FiberContext&&!nt.has(it)&&nt.set(it,(_=ReactCurrentDispatcher==null?void 0:ReactCurrentDispatcher.current)==null?void 0:_.readContext(wrapContext(it))),rt=rt.return}return nt}function useContextBridge(){const _e=useContextMap();return reactExports.useMemo(()=>Array.from(_e.keys()).reduce((_,tt)=>nt=>reactExports.createElement(_,null,reactExports.createElement(tt.Provider,__spreadProps(__spreadValues({},nt),{value:_e.get(tt)}))),_=>reactExports.createElement(FiberProvider,__spreadValues({},_))),[_e])}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(_e){const{handlePointer:_}=createEvents(_e);return{priority:1,enabled:!0,compute(tt,nt,rt){nt.pointer.set(tt.offsetX/nt.size.width*2-1,-(tt.offsetY/nt.size.height)*2+1),nt.raycaster.setFromCamera(nt.pointer,nt.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((tt,nt)=>({...tt,[nt]:_(nt)}),{}),update:()=>{var tt;const{events:nt,internal:rt}=_e.getState();(tt=rt.lastEvent)!=null&&tt.current&&nt.handlers&&nt.handlers.onPointerMove(rt.lastEvent.current)},connect:tt=>{var nt;const{set:rt,events:it}=_e.getState();it.disconnect==null||it.disconnect(),rt(at=>({events:{...at.events,connected:tt}})),Object.entries((nt=it.handlers)!=null?nt:[]).forEach(([at,ot])=>{const[st,lt]=DOM_EVENTS[at];tt.addEventListener(st,ot,{passive:lt})})},disconnect:()=>{const{set:tt,events:nt}=_e.getState();if(nt.connected){var rt;Object.entries((rt=nt.handlers)!=null?rt:[]).forEach(([it,at])=>{if(nt&&nt.connected instanceof HTMLElement){const[ot]=DOM_EVENTS[it];nt.connected.removeEventListener(ot,at)}}),tt(it=>({events:{...it.events,connected:void 0}}))}}}}const CanvasImpl=reactExports.forwardRef(function({children:_,fallback:tt,resize:nt,style:rt,gl:it,events:at=createPointerEvents,eventSource:ot,eventPrefix:st,shadows:lt,linear:ct,flat:ut,legacy:ft,orthographic:pt,frameloop:gt,dpr:xt,performance:yt,raycaster:mt,camera:At,scene:vt,onPointerMissed:Et,onCreated:Ct,...Tt},bt){reactExports.useMemo(()=>extend$2(THREE),[]);const It=useContextBridge(),[wt,Rt]=useMeasure({scroll:!0,debounce:{scroll:50,resize:0},...nt}),Ft=reactExports.useRef(null),Ut=reactExports.useRef(null);reactExports.useImperativeHandle(bt,()=>Ft.current);const Gt=useMutableCallback(Et),[Ht,jt]=reactExports.useState(!1),[Xt,Jt]=reactExports.useState(!1);if(Ht)throw Ht;if(Xt)throw Xt;const Dt=reactExports.useRef(null);useIsomorphicLayoutEffect$1(()=>{const $t=Ft.current;Rt.width>0&&Rt.height>0&&$t&&(Dt.current||(Dt.current=createRoot($t)),Dt.current.configure({gl:it,events:at,shadows:lt,linear:ct,flat:ut,legacy:ft,orthographic:pt,frameloop:gt,dpr:xt,performance:yt,raycaster:mt,camera:At,scene:vt,size:Rt,onPointerMissed:(...Lt)=>Gt.current==null?void 0:Gt.current(...Lt),onCreated:Lt=>{Lt.events.connect==null||Lt.events.connect(ot?isRef$1(ot)?ot.current:ot:Ut.current),st&&Lt.setEvents({compute:(Vt,tn)=>{const an=Vt[st+"X"],on=Vt[st+"Y"];tn.pointer.set(an/tn.size.width*2-1,-(on/tn.size.height)*2+1),tn.raycaster.setFromCamera(tn.pointer,tn.camera)}}),Ct==null||Ct(Lt)}}),Dt.current.render(reactExports.createElement(It,null,reactExports.createElement(ErrorBoundary,{set:Jt},reactExports.createElement(reactExports.Suspense,{fallback:reactExports.createElement(Block,{set:jt})},_)))))}),reactExports.useEffect(()=>{const $t=Ft.current;if($t)return()=>unmountComponentAtNode($t)},[]);const zt=ot?"none":"auto";return reactExports.createElement("div",_extends$1({ref:Ut,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:zt,...rt}},Tt),reactExports.createElement("div",{ref:wt,style:{width:"100%",height:"100%"}},reactExports.createElement("canvas",{ref:Ft,style:{display:"block"}},tt)))}),Canvas$1=reactExports.forwardRef(function(_,tt){return reactExports.createElement(FiberProvider,null,reactExports.createElement(CanvasImpl,_extends$1({},_,{ref:tt})))});function useCursor(_e,_="pointer",tt="auto",nt=document.body){reactExports.useEffect(()=>{if(_e)return nt.style.cursor=_,()=>void(nt.style.cursor=tt)},[_e])}let saveLastTotalLoaded=0;const useProgress=create(_e=>(DefaultLoadingManager.onStart=(_,tt,nt)=>{_e({active:!0,item:_,loaded:tt,total:nt,progress:(tt-saveLastTotalLoaded)/(nt-saveLastTotalLoaded)*100})},DefaultLoadingManager.onLoad=()=>{_e({active:!1})},DefaultLoadingManager.onError=_=>_e(tt=>({errors:[...tt.errors,_]})),DefaultLoadingManager.onProgress=(_,tt,nt)=>{tt===nt&&(saveLastTotalLoaded=nt),_e({active:!0,item:_,loaded:tt,total:nt,progress:(tt-saveLastTotalLoaded)/(nt-saveLastTotalLoaded)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),defaultDataInterpolation=_e=>`Loading ${_e.toFixed(2)}%`;function Loader({containerStyles:_e,innerStyles:_,barStyles:tt,dataStyles:nt,dataInterpolation:rt=defaultDataInterpolation,initialState:it=at=>at}){const{active:at,progress:ot}=useProgress(),st=reactExports.useRef(0),lt=reactExports.useRef(0),ct=reactExports.useRef(null),[ut,ft]=reactExports.useState(it(at));reactExports.useEffect(()=>{let gt;return at!==ut&&(gt=setTimeout(()=>ft(at),300)),()=>clearTimeout(gt)},[ut,at]);const pt=reactExports.useCallback(()=>{ct.current&&(st.current+=(ot-st.current)/2,(st.current>.95*ot||ot===100)&&(st.current=ot),ct.current.innerText=rt(st.current),st.current<ot&&(lt.current=requestAnimationFrame(pt)))},[rt,ot]);return reactExports.useEffect(()=>(pt(),()=>cancelAnimationFrame(lt.current)),[pt]),ut?reactExports.createElement("div",{style:{...styles.container,opacity:at?1:0,..._e}},reactExports.createElement("div",null,reactExports.createElement("div",{style:{...styles.inner,..._}},reactExports.createElement("div",{style:{...styles.bar,transform:`scaleX(${ot/100})`,...tt}}),reactExports.createElement("span",{ref:ct,style:{...styles.data,...nt}})))):null}const styles={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function mergeRefs(_e){return function(_){_e.forEach(function(tt){typeof tt=="function"?tt(_):tt!=null&&(tt.current=_)})}}function clamp$3(_e,_,tt){return Math.max(_,Math.min(_e,tt))}const V$2={toVector(_e,_){return _e===void 0&&(_e=_),Array.isArray(_e)?_e:[_e,_e]},add(_e,_){return[_e[0]+_[0],_e[1]+_[1]]},sub(_e,_){return[_e[0]-_[0],_e[1]-_[1]]},addTo(_e,_){_e[0]+=_[0],_e[1]+=_[1]},subTo(_e,_){_e[0]-=_[0],_e[1]-=_[1]}};function rubberband(_e,_,tt){return _===0||Math.abs(_)===1/0?Math.pow(_e,tt*5):_e*_*tt/(_+tt*_e)}function rubberbandIfOutOfBounds(_e,_,tt,nt=.15){return nt===0?clamp$3(_e,_,tt):_e<_?-rubberband(_-_e,tt-_,nt)+_:_e>tt?+rubberband(_e-tt,tt-_,nt)+tt:_e}function computeRubberband(_e,[_,tt],[nt,rt]){const[[it,at],[ot,st]]=_e;return[rubberbandIfOutOfBounds(_,it,at,nt),rubberbandIfOutOfBounds(tt,ot,st,rt)]}function _toPrimitive(_e,_){if(typeof _e!="object"||_e===null)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var nt=tt.call(_e,_||"default");if(typeof nt!="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(_e)}function _toPropertyKey(_e){var _=_toPrimitive(_e,"string");return typeof _=="symbol"?_:String(_)}function _defineProperty$4(_e,_,tt){return _=_toPropertyKey(_),_ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function ownKeys$3(_e,_){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread2$1(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$3(Object(tt),!0).forEach(function(nt){_defineProperty$4(_e,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$3(Object(tt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return _e}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(_e){return _e?_e[0].toUpperCase()+_e.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(_e=!1,_){return _e&&!actionsWithoutCaptureSupported.includes(_)}function toHandlerProp(_e,_="",tt=!1){const nt=EVENT_TYPE_MAP[_e],rt=nt&&nt[_]||_;return"on"+capitalize(_e)+capitalize(rt)+(hasCapture(tt,rt)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(_e){let _=_e.substring(2).toLowerCase();const tt=!!~_.indexOf("passive");tt&&(_=_.replace("passive",""));const nt=pointerCaptureEvents.includes(_)?"capturecapture":"capture",rt=!!~_.indexOf(nt);return rt&&(_=_.replace("capture","")),{device:_,capture:rt,passive:tt}}function toDomEventType(_e,_=""){const tt=EVENT_TYPE_MAP[_e],nt=tt&&tt[_]||_;return _e+nt}function isTouch(_e){return"touches"in _e}function getPointerType(_e){return isTouch(_e)?"touch":"pointerType"in _e?_e.pointerType:"mouse"}function getCurrentTargetTouchList(_e){return Array.from(_e.touches).filter(_=>{var tt,nt;return _.target===_e.currentTarget||((tt=_e.currentTarget)===null||tt===void 0||(nt=tt.contains)===null||nt===void 0?void 0:nt.call(tt,_.target))})}function getTouchList(_e){return _e.type==="touchend"||_e.type==="touchcancel"?_e.changedTouches:_e.targetTouches}function getValueEvent(_e){return isTouch(_e)?getTouchList(_e)[0]:_e}function touchIds(_e){return getCurrentTargetTouchList(_e).map(_=>_.identifier)}function pointerId(_e){const _=getValueEvent(_e);return isTouch(_e)?_.identifier:_.pointerId}function pointerValues(_e){const _=getValueEvent(_e);return[_.clientX,_.clientY]}function getEventDetails(_e){const _={};if("buttons"in _e&&(_.buttons=_e.buttons),"shiftKey"in _e){const{shiftKey:tt,altKey:nt,metaKey:rt,ctrlKey:it}=_e;Object.assign(_,{shiftKey:tt,altKey:nt,metaKey:rt,ctrlKey:it})}return _}function call(_e,..._){return typeof _e=="function"?_e(..._):_e}function noop$2(){}function chain(..._e){return _e.length===0?noop$2:_e.length===1?_e[0]:function(){let _;for(const tt of _e)_=tt.apply(this,arguments)||_;return _}}function assignDefault(_e,_){return Object.assign({},_,_e||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(_,tt,nt){this.ctrl=_,this.args=tt,this.key=nt,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(_){this.ctrl.state[this.key]=_}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:_,shared:tt,ingKey:nt,args:rt}=this;tt[nt]=_._active=_.active=_._blocked=_._force=!1,_._step=[!1,!1],_.intentional=!1,_._movement=[0,0],_._distance=[0,0],_._direction=[0,0],_._delta=[0,0],_._bounds=[[-1/0,1/0],[-1/0,1/0]],_.args=rt,_.axis=void 0,_.memo=void 0,_.elapsedTime=_.timeDelta=0,_.direction=[0,0],_.distance=[0,0],_.overflow=[0,0],_._movementBound=[!1,!1],_.velocity=[0,0],_.movement=[0,0],_.delta=[0,0],_.timeStamp=0}start(_){const tt=this.state,nt=this.config;tt._active||(this.reset(),this.computeInitial(),tt._active=!0,tt.target=_.target,tt.currentTarget=_.currentTarget,tt.lastOffset=nt.from?call(nt.from,tt):tt.offset,tt.offset=tt.lastOffset,tt.startTime=tt.timeStamp=_.timeStamp)}computeValues(_){const tt=this.state;tt._values=_,tt.values=this.config.transform(_)}computeInitial(){const _=this.state;_._initial=_._values,_.initial=_.values}compute(_){const{state:tt,config:nt,shared:rt}=this;tt.args=this.args;let it=0;if(_&&(tt.event=_,nt.preventDefault&&_.cancelable&&tt.event.preventDefault(),tt.type=_.type,rt.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,rt.locked=!!document.pointerLockElement,Object.assign(rt,getEventDetails(_)),rt.down=rt.pressed=rt.buttons%2===1||rt.touches>0,it=_.timeStamp-tt.timeStamp,tt.timeStamp=_.timeStamp,tt.elapsedTime=tt.timeStamp-tt.startTime),tt._active){const Tt=tt._delta.map(Math.abs);V$2.addTo(tt._distance,Tt)}this.axisIntent&&this.axisIntent(_);const[at,ot]=tt._movement,[st,lt]=nt.threshold,{_step:ct,values:ut}=tt;if(nt.hasCustomTransform?(ct[0]===!1&&(ct[0]=Math.abs(at)>=st&&ut[0]),ct[1]===!1&&(ct[1]=Math.abs(ot)>=lt&&ut[1])):(ct[0]===!1&&(ct[0]=Math.abs(at)>=st&&Math.sign(at)*st),ct[1]===!1&&(ct[1]=Math.abs(ot)>=lt&&Math.sign(ot)*lt)),tt.intentional=ct[0]!==!1||ct[1]!==!1,!tt.intentional)return;const ft=[0,0];if(nt.hasCustomTransform){const[Tt,bt]=ut;ft[0]=ct[0]!==!1?Tt-ct[0]:0,ft[1]=ct[1]!==!1?bt-ct[1]:0}else ft[0]=ct[0]!==!1?at-ct[0]:0,ft[1]=ct[1]!==!1?ot-ct[1]:0;this.restrictToAxis&&!tt._blocked&&this.restrictToAxis(ft);const pt=tt.offset,gt=tt._active&&!tt._blocked||tt.active;gt&&(tt.first=tt._active&&!tt.active,tt.last=!tt._active&&tt.active,tt.active=rt[this.ingKey]=tt._active,_&&(tt.first&&("bounds"in nt&&(tt._bounds=call(nt.bounds,tt)),this.setup&&this.setup()),tt.movement=ft,this.computeOffset()));const[xt,yt]=tt.offset,[[mt,At],[vt,Et]]=tt._bounds;tt.overflow=[xt<mt?-1:xt>At?1:0,yt<vt?-1:yt>Et?1:0],tt._movementBound[0]=tt.overflow[0]?tt._movementBound[0]===!1?tt._movement[0]:tt._movementBound[0]:!1,tt._movementBound[1]=tt.overflow[1]?tt._movementBound[1]===!1?tt._movement[1]:tt._movementBound[1]:!1;const Ct=tt._active?nt.rubberband||[0,0]:[0,0];if(tt.offset=computeRubberband(tt._bounds,tt.offset,Ct),tt.delta=V$2.sub(tt.offset,pt),this.computeMovement(),gt&&(!tt.last||it>BEFORE_LAST_KINEMATICS_DELAY)){tt.delta=V$2.sub(tt.offset,pt);const Tt=tt.delta.map(Math.abs);V$2.addTo(tt.distance,Tt),tt.direction=tt.delta.map(Math.sign),tt._direction=tt._delta.map(Math.sign),!tt.first&&it>0&&(tt.velocity=[Tt[0]/it,Tt[1]/it],tt.timeDelta=it)}}emit(){const _=this.state,tt=this.shared,nt=this.config;if(_._active||this.clean(),(_._blocked||!_.intentional)&&!_._force&&!nt.triggerAllEvents)return;const rt=this.handler(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},tt),_),{},{[this.aliasKey]:_.values}));rt!==void 0&&(_.memo=rt)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([_e,_],tt){const nt=Math.abs(_e),rt=Math.abs(_);if(nt>rt&&nt>tt)return"x";if(rt>nt&&rt>tt)return"y"}class CoordinatesEngine extends Engine{constructor(..._){super(..._),_defineProperty$4(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$2.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$2.sub(this.state.offset,this.state.lastOffset)}axisIntent(_){const tt=this.state,nt=this.config;if(!tt.axis&&_){const rt=typeof nt.axisThreshold=="object"?nt.axisThreshold[getPointerType(_)]:nt.axisThreshold;tt.axis=selectAxis(tt._movement,rt)}tt._blocked=(nt.lockDirection||!!nt.axis)&&!tt.axis||!!nt.axis&&nt.axis!==tt.axis}restrictToAxis(_){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":_[1]=0;break;case"y":_[0]=0;break}}}const identity$1=_e=>_e,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(_e=!0){return _e},eventOptions(_e,_,tt){return _objectSpread2$1(_objectSpread2$1({},tt.shared.eventOptions),_e)},preventDefault(_e=!1){return _e},triggerAllEvents(_e=!1){return _e},rubberband(_e=0){switch(_e){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$2.toVector(_e)}},from(_e){if(typeof _e=="function")return _e;if(_e!=null)return V$2.toVector(_e)},transform(_e,_,tt){const nt=_e||tt.shared.transform;return this.hasCustomTransform=!!nt,nt||identity$1},threshold(_e){return V$2.toVector(_e,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{axis(_e,_,{axis:tt}){if(this.lockDirection=tt==="lock",!this.lockDirection)return tt},axisThreshold(_e=DEFAULT_AXIS_THRESHOLD){return _e},bounds(_e={}){if(typeof _e=="function")return it=>coordinatesConfigResolver.bounds(_e(it));if("current"in _e)return()=>_e.current;if(typeof HTMLElement=="function"&&_e instanceof HTMLElement)return _e;const{left:_=-1/0,right:tt=1/0,top:nt=-1/0,bottom:rt=1/0}=_e;return[[_,tt],[nt,rt]]}}),KEYS_DELTA_MAP={ArrowRight:(_e,_=1)=>[_e*_,0],ArrowLeft:(_e,_=1)=>[-1*_e*_,0],ArrowUp:(_e,_=1)=>[0,-1*_e*_],ArrowDown:(_e,_=1)=>[0,_e*_]};class DragEngine extends CoordinatesEngine{constructor(..._){super(..._),_defineProperty$4(this,"ingKey","dragging")}reset(){super.reset();const _=this.state;_._pointerId=void 0,_._pointerActive=!1,_._keyboardActive=!1,_._preventScroll=!1,_._delayed=!1,_.swipe=[0,0],_.tap=!1,_.canceled=!1,_.cancel=this.cancel.bind(this)}setup(){const _=this.state;if(_._bounds instanceof HTMLElement){const tt=_._bounds.getBoundingClientRect(),nt=_.currentTarget.getBoundingClientRect(),rt={left:tt.left-nt.left+_.offset[0],right:tt.right-nt.right+_.offset[0],top:tt.top-nt.top+_.offset[1],bottom:tt.bottom-nt.bottom+_.offset[1]};_._bounds=coordinatesConfigResolver.bounds(rt)}}cancel(){const _=this.state;_.canceled||(_.canceled=!0,_._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(_){const tt=this.config,nt=this.state;if(_.buttons!=null&&(Array.isArray(tt.pointerButtons)?!tt.pointerButtons.includes(_.buttons):tt.pointerButtons!==-1&&tt.pointerButtons!==_.buttons))return;const rt=this.ctrl.setEventIds(_);tt.pointerCapture&&_.target.setPointerCapture(_.pointerId),!(rt&&rt.size>1&&nt._pointerActive)&&(this.start(_),this.setupPointer(_),nt._pointerId=pointerId(_),nt._pointerActive=!0,this.computeValues(pointerValues(_)),this.computeInitial(),tt.preventScrollAxis&&getPointerType(_)!=="mouse"?(nt._active=!1,this.setupScrollPrevention(_)):tt.delay>0?(this.setupDelayTrigger(_),tt.triggerAllEvents&&(this.compute(_),this.emit())):this.startPointerDrag(_))}startPointerDrag(_){const tt=this.state;tt._active=!0,tt._preventScroll=!0,tt._delayed=!1,this.compute(_),this.emit()}pointerMove(_){const tt=this.state,nt=this.config;if(!tt._pointerActive)return;const rt=pointerId(_);if(tt._pointerId!==void 0&&rt!==tt._pointerId)return;const it=pointerValues(_);if(document.pointerLockElement===_.target?tt._delta=[_.movementX,_.movementY]:(tt._delta=V$2.sub(it,tt._values),this.computeValues(it)),V$2.addTo(tt._movement,tt._delta),this.compute(_),tt._delayed&&tt.intentional){this.timeoutStore.remove("dragDelay"),tt.active=!1,this.startPointerDrag(_);return}if(nt.preventScrollAxis&&!tt._preventScroll)if(tt.axis)if(tt.axis===nt.preventScrollAxis||nt.preventScrollAxis==="xy"){tt._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(_);return}else return;this.emit()}pointerUp(_){this.ctrl.setEventIds(_);try{this.config.pointerCapture&&_.target.hasPointerCapture(_.pointerId)&&_.target.releasePointerCapture(_.pointerId)}catch{}const tt=this.state,nt=this.config;if(!tt._active||!tt._pointerActive)return;const rt=pointerId(_);if(tt._pointerId!==void 0&&rt!==tt._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(_);const[it,at]=tt._distance;if(tt.tap=it<=nt.tapsThreshold&&at<=nt.tapsThreshold,tt.tap&&nt.filterTaps)tt._force=!0;else{const[ot,st]=tt._delta,[lt,ct]=tt._movement,[ut,ft]=nt.swipe.velocity,[pt,gt]=nt.swipe.distance,xt=nt.swipe.duration;if(tt.elapsedTime<xt){const yt=Math.abs(ot/tt.timeDelta),mt=Math.abs(st/tt.timeDelta);yt>ut&&Math.abs(lt)>pt&&(tt.swipe[0]=Math.sign(ot)),mt>ft&&Math.abs(ct)>gt&&(tt.swipe[1]=Math.sign(st))}}this.emit()}pointerClick(_){!this.state.tap&&_.detail>0&&(_.preventDefault(),_.stopPropagation())}setupPointer(_){const tt=this.config,nt=tt.device;tt.pointerLock&&_.currentTarget.requestPointerLock(),tt.pointerCapture||(this.eventStore.add(this.sharedConfig.window,nt,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,nt,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,nt,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(_){this.state._preventScroll&&_.cancelable&&_.preventDefault()}setupScrollPrevention(_){this.state._preventScroll=!1,persistEvent(_);const tt=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",tt),this.eventStore.add(this.sharedConfig.window,"touch","cancel",tt),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,_)}setupDelayTrigger(_){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(_)},this.config.delay)}keyDown(_){const tt=KEYS_DELTA_MAP[_.key];if(tt){const nt=this.state,rt=_.shiftKey?10:_.altKey?.1:1;this.start(_),nt._delta=tt(this.config.keyboardDisplacement,rt),nt._keyboardActive=!0,V$2.addTo(nt._movement,nt._delta),this.compute(_),this.emit()}}keyUp(_){_.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(_),this.emit())}bind(_){const tt=this.config.device;_(tt,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(_(tt,"change",this.pointerMove.bind(this)),_(tt,"end",this.pointerUp.bind(this)),_(tt,"cancel",this.pointerUp.bind(this)),_("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(_("key","down",this.keyDown.bind(this)),_("key","up",this.keyUp.bind(this))),this.config.filterTaps&&_("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(_e){"persist"in _e&&typeof _e.persist=="function"&&_e.persist()}const isBrowser$1=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser$1&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser$1&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser$1&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser$1&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser:isBrowser$1,gesture:supportsGestureEvents(),touch:isTouchScreen(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{device(_e,_,{pointer:{touch:tt=!1,lock:nt=!1,mouse:rt=!1}={}}){return this.pointerLock=nt&&SUPPORT.pointerLock,SUPPORT.touch&&tt?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!rt?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(_e,_,{preventScroll:tt}){if(this.preventScrollDelay=typeof tt=="number"?tt:tt||tt===void 0&&_e?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||tt===!1))return _e||(tt!==void 0?"y":void 0)},pointerCapture(_e,_,{pointer:{capture:tt=!0,buttons:nt=1,keys:rt=!0}={}}){return this.pointerButtons=nt,this.keys=rt,!this.pointerLock&&this.device==="pointer"&&tt},threshold(_e,_,{filterTaps:tt=!1,tapsThreshold:nt=3,axis:rt=void 0}){const it=V$2.toVector(_e,tt?nt:rt?1:0);return this.filterTaps=tt,this.tapsThreshold=nt,it},swipe({velocity:_e=DEFAULT_SWIPE_VELOCITY,distance:_=DEFAULT_SWIPE_DISTANCE,duration:tt=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$2.toVector(_e)),distance:this.transform(V$2.toVector(_)),duration:tt}},delay(_e=0){switch(_e){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return _e}},axisThreshold(_e){return _e?_objectSpread2$1(_objectSpread2$1({},DEFAULT_DRAG_AXIS_THRESHOLD),_e):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(_e=DEFAULT_KEYBOARD_DISPLACEMENT){return _e}});_objectSpread2$1(_objectSpread2$1({},commonConfigResolver),{},{device(_e,_,{shared:tt,pointer:{touch:nt=!1}={}}){if(tt.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&nt)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(_e,_,{scaleBounds:tt={},angleBounds:nt={}}){const rt=at=>{const ot=assignDefault(call(tt,at),{min:-1/0,max:1/0});return[ot.min,ot.max]},it=at=>{const ot=assignDefault(call(nt,at),{min:-1/0,max:1/0});return[ot.min,ot.max]};return typeof tt!="function"&&typeof nt!="function"?[rt(),it()]:at=>[rt(at),it(at)]},threshold(_e,_,tt){return this.lockDirection=tt.axis==="lock",V$2.toVector(_e,this.lockDirection?[.1,3]:0)},modifierKey(_e){return _e===void 0?"ctrlKey":_e},pinchOnWheel(_e=!0){return _e}});_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(_e=!0)=>_e});_objectSpread2$1(_objectSpread2$1({},coordinatesConfigResolver),{},{mouseOnly:(_e=!0)=>_e});const EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(_e){EngineMap.set(_e.key,_e.engine),ConfigResolverMap.set(_e.key,_e.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver};function _objectWithoutPropertiesLoose$2(_e,_){if(_e==null)return{};var tt={},nt=Object.keys(_e),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(tt[rt]=_e[rt]);return tt}function _objectWithoutProperties$2(_e,_){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$2(_e,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,nt)&&(tt[nt]=_e[nt])}return tt}const sharedConfigResolver={target(_e){if(_e)return()=>"current"in _e?_e.current:_e},enabled(_e=!0){return _e},window(_e=SUPPORT.isBrowser?window:void 0){return _e},eventOptions({passive:_e=!0,capture:_=!1}={}){return{passive:_e,capture:_}},transform(_e){return _e}},_excluded$c=["target","eventOptions","window","enabled","transform"];function resolveWith(_e={},_){const tt={};for(const[nt,rt]of Object.entries(_))switch(typeof rt){case"function":tt[nt]=rt.call(tt,_e[nt],nt,_e);break;case"object":tt[nt]=resolveWith(_e[nt],rt);break;case"boolean":rt&&(tt[nt]=_e[nt]);break}return tt}function parse$2(_e,_,tt={}){const nt=_e,{target:rt,eventOptions:it,window:at,enabled:ot,transform:st}=nt,lt=_objectWithoutProperties$2(nt,_excluded$c);if(tt.shared=resolveWith({target:rt,eventOptions:it,window:at,enabled:ot,transform:st},sharedConfigResolver),_){const ct=ConfigResolverMap.get(_);tt[_]=resolveWith(_objectSpread2$1({shared:tt.shared},lt),ct)}else for(const ct in lt){const ut=ConfigResolverMap.get(ct);ut&&(tt[ct]=resolveWith(_objectSpread2$1({shared:tt.shared},lt[ct]),ut))}return tt}class EventStore{constructor(_,tt){_defineProperty$4(this,"_listeners",new Set),this._ctrl=_,this._gestureKey=tt}add(_,tt,nt,rt,it){const at=this._listeners,ot=toDomEventType(tt,nt),st=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},lt=_objectSpread2$1(_objectSpread2$1({},st),it);_.addEventListener(ot,rt,lt);const ct=()=>{_.removeEventListener(ot,rt,lt),at.delete(ct)};return at.add(ct),ct}clean(){this._listeners.forEach(_=>_()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$4(this,"_timeouts",new Map)}add(_,tt,nt=140,...rt){this.remove(_),this._timeouts.set(_,window.setTimeout(tt,nt,...rt))}remove(_){const tt=this._timeouts.get(_);tt&&window.clearTimeout(tt)}clean(){this._timeouts.forEach(_=>void window.clearTimeout(_)),this._timeouts.clear()}}class Controller{constructor(_){_defineProperty$4(this,"gestures",new Set),_defineProperty$4(this,"_targetEventStore",new EventStore(this)),_defineProperty$4(this,"gestureEventStores",{}),_defineProperty$4(this,"gestureTimeoutStores",{}),_defineProperty$4(this,"handlers",{}),_defineProperty$4(this,"config",{}),_defineProperty$4(this,"pointerIds",new Set),_defineProperty$4(this,"touchIds",new Set),_defineProperty$4(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,_)}setEventIds(_){if(isTouch(_))return this.touchIds=new Set(touchIds(_)),this.touchIds;if("pointerId"in _)return _.type==="pointerup"||_.type==="pointercancel"?this.pointerIds.delete(_.pointerId):_.type==="pointerdown"&&this.pointerIds.add(_.pointerId),this.pointerIds}applyHandlers(_,tt){this.handlers=_,this.nativeHandlers=tt}applyConfig(_,tt){this.config=parse$2(_,tt,this.config)}clean(){this._targetEventStore.clean();for(const _ of this.gestures)this.gestureEventStores[_].clean(),this.gestureTimeoutStores[_].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(..._){const tt=this.config.shared,nt={};let rt;if(!(tt.target&&(rt=tt.target(),!rt))){if(tt.enabled){for(const at of this.gestures){const ot=this.config[at],st=bindToProps(nt,ot.eventOptions,!!rt);if(ot.enabled){const lt=EngineMap.get(at);new lt(this,_,at).bind(st)}}const it=bindToProps(nt,tt.eventOptions,!!rt);for(const at in this.nativeHandlers)it(at,"",ot=>this.nativeHandlers[at](_objectSpread2$1(_objectSpread2$1({},this.state.shared),{},{event:ot,args:_})),void 0,!0)}for(const it in nt)nt[it]=chain(...nt[it]);if(!rt)return nt;for(const it in nt){const{device:at,capture:ot,passive:st}=parseProp(it);this._targetEventStore.add(rt,at,"",nt[it],{capture:ot,passive:st})}}}}function setupGesture(_e,_){_e.gestures.add(_),_e.gestureEventStores[_]=new EventStore(_e,_),_e.gestureTimeoutStores[_]=new TimeoutStore}function resolveGestures(_e,_){_.drag&&setupGesture(_e,"drag"),_.wheel&&setupGesture(_e,"wheel"),_.scroll&&setupGesture(_e,"scroll"),_.move&&setupGesture(_e,"move"),_.pinch&&setupGesture(_e,"pinch"),_.hover&&setupGesture(_e,"hover")}const bindToProps=(_e,_,tt)=>(nt,rt,it,at={},ot=!1)=>{var st,lt;const ct=(st=at.capture)!==null&&st!==void 0?st:_.capture,ut=(lt=at.passive)!==null&&lt!==void 0?lt:_.passive;let ft=ot?nt:toHandlerProp(nt,rt,ct);tt&&ut&&(ft+="Passive"),_e[ft]=_e[ft]||[],_e[ft].push(it)};function useRecognizers(_e,_={},tt,nt){const rt=React.useMemo(()=>new Controller(_e),[]);if(rt.applyHandlers(_e,nt),rt.applyConfig(_,tt),React.useEffect(rt.effect.bind(rt)),React.useEffect(()=>rt.clean.bind(rt),[]),_.target===void 0)return rt.bind.bind(rt)}function useDrag$1(_e,_){return registerAction(dragAction),useRecognizers({drag:_e},_||{},"drag")}const subscribeWithSelector=_e=>(_,tt,nt)=>{const rt=nt.subscribe;return nt.subscribe=(at,ot,st)=>{let lt=at;if(ot){const ct=(st==null?void 0:st.equalityFn)||Object.is;let ut=at(nt.getState());lt=ft=>{const pt=at(ft);if(!ct(ut,pt)){const gt=ut;ot(ut=pt,gt)}},st!=null&&st.fireImmediately&&ot(ut,ut)}return rt(lt)},_e(_,tt,nt)};var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(_e,_){for(var tt=new u16(31),nt=0;nt<31;++nt)tt[nt]=_+=1<<_e[nt-1];for(var rt=new u32(tt[30]),nt=1;nt<30;++nt)for(var it=tt[nt];it<tt[nt+1];++it)rt[it]=it-tt[nt]<<5|nt;return[tt,rt]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i$3=0;i$3<32768;++i$3){var x$2=(i$3&43690)>>>1|(i$3&21845)<<1;x$2=(x$2&52428)>>>2|(x$2&13107)<<2,x$2=(x$2&61680)>>>4|(x$2&3855)<<4,rev[i$3]=((x$2&65280)>>>8|(x$2&255)<<8)>>>1}var hMap=function(_e,_,tt){for(var nt=_e.length,rt=0,it=new u16(_);rt<nt;++rt)++it[_e[rt]-1];var at=new u16(_);for(rt=0;rt<_;++rt)at[rt]=at[rt-1]+it[rt-1]<<1;var ot;if(tt){ot=new u16(1<<_);var st=15-_;for(rt=0;rt<nt;++rt)if(_e[rt])for(var lt=rt<<4|_e[rt],ct=_-_e[rt],ut=at[_e[rt]-1]++<<ct,ft=ut|(1<<ct)-1;ut<=ft;++ut)ot[rev[ut]>>>st]=lt}else for(ot=new u16(nt),rt=0;rt<nt;++rt)_e[rt]&&(ot[rt]=rev[at[_e[rt]-1]++]>>>15-_e[rt]);return ot},flt=new u8(288);for(var i$3=0;i$3<144;++i$3)flt[i$3]=8;for(var i$3=144;i$3<256;++i$3)flt[i$3]=9;for(var i$3=256;i$3<280;++i$3)flt[i$3]=7;for(var i$3=280;i$3<288;++i$3)flt[i$3]=8;var fdt=new u8(32);for(var i$3=0;i$3<32;++i$3)fdt[i$3]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max$1=function(_e){for(var _=_e[0],tt=1;tt<_e.length;++tt)_e[tt]>_&&(_=_e[tt]);return _},bits=function(_e,_,tt){var nt=_/8|0;return(_e[nt]|_e[nt+1]<<8)>>(_&7)&tt},bits16=function(_e,_){var tt=_/8|0;return(_e[tt]|_e[tt+1]<<8|_e[tt+2]<<16)>>(_&7)},shft=function(_e){return(_e/8|0)+(_e&7&&1)},slc=function(_e,_,tt){(_==null||_<0)&&(_=0),(tt==null||tt>_e.length)&&(tt=_e.length);var nt=new(_e instanceof u16?u16:_e instanceof u32?u32:u8)(tt-_);return nt.set(_e.subarray(_,tt)),nt},inflt=function(_e,_,tt){var nt=_e.length;if(!nt||tt&&!tt.l&&nt<5)return _||new u8(0);var rt=!_||tt,it=!tt||tt.i;tt||(tt={}),_||(_=new u8(nt*3));var at=function(sn){var ln=_.length;if(sn>ln){var cn=new u8(Math.max(ln*2,sn));cn.set(_),_=cn}},ot=tt.f||0,st=tt.p||0,lt=tt.b||0,ct=tt.l,ut=tt.d,ft=tt.m,pt=tt.n,gt=nt*8;do{if(!ct){tt.f=ot=bits(_e,st,1);var xt=bits(_e,st+1,3);if(st+=3,xt)if(xt==1)ct=flrm,ut=fdrm,ft=9,pt=5;else if(xt==2){var vt=bits(_e,st,31)+257,Et=bits(_e,st+10,15)+4,Ct=vt+bits(_e,st+5,31)+1;st+=14;for(var Tt=new u8(Ct),bt=new u8(19),It=0;It<Et;++It)bt[clim[It]]=bits(_e,st+It*3,7);st+=Et*3;for(var wt=max$1(bt),Rt=(1<<wt)-1,Ft=hMap(bt,wt,1),It=0;It<Ct;){var Ut=Ft[bits(_e,st,Rt)];st+=Ut&15;var yt=Ut>>>4;if(yt<16)Tt[It++]=yt;else{var Gt=0,Ht=0;for(yt==16?(Ht=3+bits(_e,st,3),st+=2,Gt=Tt[It-1]):yt==17?(Ht=3+bits(_e,st,7),st+=3):yt==18&&(Ht=11+bits(_e,st,127),st+=7);Ht--;)Tt[It++]=Gt}}var jt=Tt.subarray(0,vt),Xt=Tt.subarray(vt);ft=max$1(jt),pt=max$1(Xt),ct=hMap(jt,ft,1),ut=hMap(Xt,pt,1)}else throw"invalid block type";else{var yt=shft(st)+4,mt=_e[yt-4]|_e[yt-3]<<8,At=yt+mt;if(At>nt){if(it)throw"unexpected EOF";break}rt&&at(lt+mt),_.set(_e.subarray(yt,At),lt),tt.b=lt+=mt,tt.p=st=At*8;continue}if(st>gt){if(it)throw"unexpected EOF";break}}rt&&at(lt+131072);for(var Jt=(1<<ft)-1,Dt=(1<<pt)-1,zt=st;;zt=st){var Gt=ct[bits16(_e,st)&Jt],$t=Gt>>>4;if(st+=Gt&15,st>gt){if(it)throw"unexpected EOF";break}if(!Gt)throw"invalid length/literal";if($t<256)_[lt++]=$t;else if($t==256){zt=st,ct=null;break}else{var Lt=$t-254;if($t>264){var It=$t-257,Vt=fleb[It];Lt=bits(_e,st,(1<<Vt)-1)+fl[It],st+=Vt}var tn=ut[bits16(_e,st)&Dt],an=tn>>>4;if(!tn)throw"invalid distance";st+=tn&15;var Xt=fd[an];if(an>3){var Vt=fdeb[an];Xt+=bits16(_e,st)&(1<<Vt)-1,st+=Vt}if(st>gt){if(it)throw"unexpected EOF";break}rt&&at(lt+131072);for(var on=lt+Lt;lt<on;lt+=4)_[lt]=_[lt-Xt],_[lt+1]=_[lt+1-Xt],_[lt+2]=_[lt+2-Xt],_[lt+3]=_[lt+3-Xt];lt=on}}tt.l=ct,tt.p=zt,tt.b=lt,ct&&(ot=1,tt.m=ft,tt.d=ut,tt.n=pt)}while(!ot);return lt==_.length?_:slc(_,0,lt)},et=new u8(0),zlv=function(_e){if((_e[0]&15)!=8||_e[0]>>>4>7||(_e[0]<<8|_e[1])%31)throw"invalid zlib data";if(_e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync(_e,_){return inflt((zlv(_e),_e.subarray(2,-4)),_)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}function CharsetEncoder(){}CharsetEncoder.prototype.s2u=function(_e){for(var _=this.s2uTable,tt="",nt=0;nt<_e.length;){var rt=_e[nt++];if(!(rt>=0&&rt<=126||rt>=161&&rt<=223)&&nt<_e.length&&(rt=rt<<8|_e[nt++]),_[rt]===void 0)return console.error("unknown char code "+rt+"."),tt;tt+=String.fromCharCode(_[rt])}return tt};CharsetEncoder.prototype.s2uTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:65340,33120:65374,33121:8741,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:65293,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:65504,33170:65505,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:65506,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34624:9312,34625:9313,34626:9314,34627:9315,34628:9316,34629:9317,34630:9318,34631:9319,34632:9320,34633:9321,34634:9322,34635:9323,34636:9324,34637:9325,34638:9326,34639:9327,34640:9328,34641:9329,34642:9330,34643:9331,34644:8544,34645:8545,34646:8546,34647:8547,34648:8548,34649:8549,34650:8550,34651:8551,34652:8552,34653:8553,34655:13129,34656:13076,34657:13090,34658:13133,34659:13080,34660:13095,34661:13059,34662:13110,34663:13137,34664:13143,34665:13069,34666:13094,34667:13091,34668:13099,34669:13130,34670:13115,34671:13212,34672:13213,34673:13214,34674:13198,34675:13199,34676:13252,34677:13217,34686:13179,34688:12317,34689:12319,34690:8470,34691:13261,34692:8481,34693:12964,34694:12965,34695:12966,34696:12967,34697:12968,34698:12849,34699:12850,34700:12857,34701:13182,34702:13181,34703:13180,34704:8786,34705:8801,34706:8747,34707:8750,34708:8721,34709:8730,34710:8869,34711:8736,34712:8735,34713:8895,34714:8757,34715:8745,34716:8746,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081,60736:32394,60737:35100,60738:37704,60739:37512,60740:34012,60741:20425,60742:28859,60743:26161,60744:26824,60745:37625,60746:26363,60747:24389,60748:20008,60749:20193,60750:20220,60751:20224,60752:20227,60753:20281,60754:20310,60755:20370,60756:20362,60757:20378,60758:20372,60759:20429,60760:20544,60761:20514,60762:20479,60763:20510,60764:20550,60765:20592,60766:20546,60767:20628,60768:20724,60769:20696,60770:20810,60771:20836,60772:20893,60773:20926,60774:20972,60775:21013,60776:21148,60777:21158,60778:21184,60779:21211,60780:21248,60781:21255,60782:21284,60783:21362,60784:21395,60785:21426,60786:21469,60787:64014,60788:21660,60789:21642,60790:21673,60791:21759,60792:21894,60793:22361,60794:22373,60795:22444,60796:22472,60797:22471,60798:64015,60800:64016,60801:22686,60802:22706,60803:22795,60804:22867,60805:22875,60806:22877,60807:22883,60808:22948,60809:22970,60810:23382,60811:23488,60812:29999,60813:23512,60814:23532,60815:23582,60816:23718,60817:23738,60818:23797,60819:23847,60820:23891,60821:64017,60822:23874,60823:23917,60824:23992,60825:23993,60826:24016,60827:24353,60828:24372,60829:24423,60830:24503,60831:24542,60832:24669,60833:24709,60834:24714,60835:24798,60836:24789,60837:24864,60838:24818,60839:24849,60840:24887,60841:24880,60842:24984,60843:25107,60844:25254,60845:25589,60846:25696,60847:25757,60848:25806,60849:25934,60850:26112,60851:26133,60852:26171,60853:26121,60854:26158,60855:26142,60856:26148,60857:26213,60858:26199,60859:26201,60860:64018,60861:26227,60862:26265,60863:26272,60864:26290,60865:26303,60866:26362,60867:26382,60868:63785,60869:26470,60870:26555,60871:26706,60872:26560,60873:26625,60874:26692,60875:26831,60876:64019,60877:26984,60878:64020,60879:27032,60880:27106,60881:27184,60882:27243,60883:27206,60884:27251,60885:27262,60886:27362,60887:27364,60888:27606,60889:27711,60890:27740,60891:27782,60892:27759,60893:27866,60894:27908,60895:28039,60896:28015,60897:28054,60898:28076,60899:28111,60900:28152,60901:28146,60902:28156,60903:28217,60904:28252,60905:28199,60906:28220,60907:28351,60908:28552,60909:28597,60910:28661,60911:28677,60912:28679,60913:28712,60914:28805,60915:28843,60916:28943,60917:28932,60918:29020,60919:28998,60920:28999,60921:64021,60922:29121,60923:29182,60924:29361,60992:29374,60993:29476,60994:64022,60995:29559,60996:29629,60997:29641,60998:29654,60999:29667,61e3:29650,61001:29703,61002:29685,61003:29734,61004:29738,61005:29737,61006:29742,61007:29794,61008:29833,61009:29855,61010:29953,61011:30063,61012:30338,61013:30364,61014:30366,61015:30363,61016:30374,61017:64023,61018:30534,61019:21167,61020:30753,61021:30798,61022:30820,61023:30842,61024:31024,61025:64024,61026:64025,61027:64026,61028:31124,61029:64027,61030:31131,61031:31441,61032:31463,61033:64028,61034:31467,61035:31646,61036:64029,61037:32072,61038:32092,61039:32183,61040:32160,61041:32214,61042:32338,61043:32583,61044:32673,61045:64030,61046:33537,61047:33634,61048:33663,61049:33735,61050:33782,61051:33864,61052:33972,61053:34131,61054:34137,61056:34155,61057:64031,61058:34224,61059:64032,61060:64033,61061:34823,61062:35061,61063:35346,61064:35383,61065:35449,61066:35495,61067:35518,61068:35551,61069:64034,61070:35574,61071:35667,61072:35711,61073:36080,61074:36084,61075:36114,61076:36214,61077:64035,61078:36559,61079:64036,61080:64037,61081:36967,61082:37086,61083:64038,61084:37141,61085:37159,61086:37338,61087:37335,61088:37342,61089:37357,61090:37358,61091:37348,61092:37349,61093:37382,61094:37392,61095:37386,61096:37434,61097:37440,61098:37436,61099:37454,61100:37465,61101:37457,61102:37433,61103:37479,61104:37543,61105:37495,61106:37496,61107:37607,61108:37591,61109:37593,61110:37584,61111:64039,61112:37589,61113:37600,61114:37587,61115:37669,61116:37665,61117:37627,61118:64040,61119:37662,61120:37631,61121:37661,61122:37634,61123:37744,61124:37719,61125:37796,61126:37830,61127:37854,61128:37880,61129:37937,61130:37957,61131:37960,61132:38290,61133:63964,61134:64041,61135:38557,61136:38575,61137:38707,61138:38715,61139:38723,61140:38733,61141:38735,61142:38737,61143:38741,61144:38999,61145:39013,61146:64042,61147:64043,61148:39207,61149:64044,61150:39326,61151:39502,61152:39641,61153:39644,61154:39797,61155:39794,61156:39823,61157:39857,61158:39867,61159:39936,61160:40304,61161:40299,61162:64045,61163:40473,61164:40657,61167:8560,61168:8561,61169:8562,61170:8563,61171:8564,61172:8565,61173:8566,61174:8567,61175:8568,61176:8569,61177:65506,61178:65508,61179:65287,61180:65282,61504:57344,61505:57345,61506:57346,61507:57347,61508:57348,61509:57349,61510:57350,61511:57351,61512:57352,61513:57353,61514:57354,61515:57355,61516:57356,61517:57357,61518:57358,61519:57359,61520:57360,61521:57361,61522:57362,61523:57363,61524:57364,61525:57365,61526:57366,61527:57367,61528:57368,61529:57369,61530:57370,61531:57371,61532:57372,61533:57373,61534:57374,61535:57375,61536:57376,61537:57377,61538:57378,61539:57379,61540:57380,61541:57381,61542:57382,61543:57383,61544:57384,61545:57385,61546:57386,61547:57387,61548:57388,61549:57389,61550:57390,61551:57391,61552:57392,61553:57393,61554:57394,61555:57395,61556:57396,61557:57397,61558:57398,61559:57399,61560:57400,61561:57401,61562:57402,61563:57403,61564:57404,61565:57405,61566:57406,61568:57407,61569:57408,61570:57409,61571:57410,61572:57411,61573:57412,61574:57413,61575:57414,61576:57415,61577:57416,61578:57417,61579:57418,61580:57419,61581:57420,61582:57421,61583:57422,61584:57423,61585:57424,61586:57425,61587:57426,61588:57427,61589:57428,61590:57429,61591:57430,61592:57431,61593:57432,61594:57433,61595:57434,61596:57435,61597:57436,61598:57437,61599:57438,61600:57439,61601:57440,61602:57441,61603:57442,61604:57443,61605:57444,61606:57445,61607:57446,61608:57447,61609:57448,61610:57449,61611:57450,61612:57451,61613:57452,61614:57453,61615:57454,61616:57455,61617:57456,61618:57457,61619:57458,61620:57459,61621:57460,61622:57461,61623:57462,61624:57463,61625:57464,61626:57465,61627:57466,61628:57467,61629:57468,61630:57469,61631:57470,61632:57471,61633:57472,61634:57473,61635:57474,61636:57475,61637:57476,61638:57477,61639:57478,61640:57479,61641:57480,61642:57481,61643:57482,61644:57483,61645:57484,61646:57485,61647:57486,61648:57487,61649:57488,61650:57489,61651:57490,61652:57491,61653:57492,61654:57493,61655:57494,61656:57495,61657:57496,61658:57497,61659:57498,61660:57499,61661:57500,61662:57501,61663:57502,61664:57503,61665:57504,61666:57505,61667:57506,61668:57507,61669:57508,61670:57509,61671:57510,61672:57511,61673:57512,61674:57513,61675:57514,61676:57515,61677:57516,61678:57517,61679:57518,61680:57519,61681:57520,61682:57521,61683:57522,61684:57523,61685:57524,61686:57525,61687:57526,61688:57527,61689:57528,61690:57529,61691:57530,61692:57531,61760:57532,61761:57533,61762:57534,61763:57535,61764:57536,61765:57537,61766:57538,61767:57539,61768:57540,61769:57541,61770:57542,61771:57543,61772:57544,61773:57545,61774:57546,61775:57547,61776:57548,61777:57549,61778:57550,61779:57551,61780:57552,61781:57553,61782:57554,61783:57555,61784:57556,61785:57557,61786:57558,61787:57559,61788:57560,61789:57561,61790:57562,61791:57563,61792:57564,61793:57565,61794:57566,61795:57567,61796:57568,61797:57569,61798:57570,61799:57571,61800:57572,61801:57573,61802:57574,61803:57575,61804:57576,61805:57577,61806:57578,61807:57579,61808:57580,61809:57581,61810:57582,61811:57583,61812:57584,61813:57585,61814:57586,61815:57587,61816:57588,61817:57589,61818:57590,61819:57591,61820:57592,61821:57593,61822:57594,61824:57595,61825:57596,61826:57597,61827:57598,61828:57599,61829:57600,61830:57601,61831:57602,61832:57603,61833:57604,61834:57605,61835:57606,61836:57607,61837:57608,61838:57609,61839:57610,61840:57611,61841:57612,61842:57613,61843:57614,61844:57615,61845:57616,61846:57617,61847:57618,61848:57619,61849:57620,61850:57621,61851:57622,61852:57623,61853:57624,61854:57625,61855:57626,61856:57627,61857:57628,61858:57629,61859:57630,61860:57631,61861:57632,61862:57633,61863:57634,61864:57635,61865:57636,61866:57637,61867:57638,61868:57639,61869:57640,61870:57641,61871:57642,61872:57643,61873:57644,61874:57645,61875:57646,61876:57647,61877:57648,61878:57649,61879:57650,61880:57651,61881:57652,61882:57653,61883:57654,61884:57655,61885:57656,61886:57657,61887:57658,61888:57659,61889:57660,61890:57661,61891:57662,61892:57663,61893:57664,61894:57665,61895:57666,61896:57667,61897:57668,61898:57669,61899:57670,61900:57671,61901:57672,61902:57673,61903:57674,61904:57675,61905:57676,61906:57677,61907:57678,61908:57679,61909:57680,61910:57681,61911:57682,61912:57683,61913:57684,61914:57685,61915:57686,61916:57687,61917:57688,61918:57689,61919:57690,61920:57691,61921:57692,61922:57693,61923:57694,61924:57695,61925:57696,61926:57697,61927:57698,61928:57699,61929:57700,61930:57701,61931:57702,61932:57703,61933:57704,61934:57705,61935:57706,61936:57707,61937:57708,61938:57709,61939:57710,61940:57711,61941:57712,61942:57713,61943:57714,61944:57715,61945:57716,61946:57717,61947:57718,61948:57719,62016:57720,62017:57721,62018:57722,62019:57723,62020:57724,62021:57725,62022:57726,62023:57727,62024:57728,62025:57729,62026:57730,62027:57731,62028:57732,62029:57733,62030:57734,62031:57735,62032:57736,62033:57737,62034:57738,62035:57739,62036:57740,62037:57741,62038:57742,62039:57743,62040:57744,62041:57745,62042:57746,62043:57747,62044:57748,62045:57749,62046:57750,62047:57751,62048:57752,62049:57753,62050:57754,62051:57755,62052:57756,62053:57757,62054:57758,62055:57759,62056:57760,62057:57761,62058:57762,62059:57763,62060:57764,62061:57765,62062:57766,62063:57767,62064:57768,62065:57769,62066:57770,62067:57771,62068:57772,62069:57773,62070:57774,62071:57775,62072:57776,62073:57777,62074:57778,62075:57779,62076:57780,62077:57781,62078:57782,62080:57783,62081:57784,62082:57785,62083:57786,62084:57787,62085:57788,62086:57789,62087:57790,62088:57791,62089:57792,62090:57793,62091:57794,62092:57795,62093:57796,62094:57797,62095:57798,62096:57799,62097:57800,62098:57801,62099:57802,62100:57803,62101:57804,62102:57805,62103:57806,62104:57807,62105:57808,62106:57809,62107:57810,62108:57811,62109:57812,62110:57813,62111:57814,62112:57815,62113:57816,62114:57817,62115:57818,62116:57819,62117:57820,62118:57821,62119:57822,62120:57823,62121:57824,62122:57825,62123:57826,62124:57827,62125:57828,62126:57829,62127:57830,62128:57831,62129:57832,62130:57833,62131:57834,62132:57835,62133:57836,62134:57837,62135:57838,62136:57839,62137:57840,62138:57841,62139:57842,62140:57843,62141:57844,62142:57845,62143:57846,62144:57847,62145:57848,62146:57849,62147:57850,62148:57851,62149:57852,62150:57853,62151:57854,62152:57855,62153:57856,62154:57857,62155:57858,62156:57859,62157:57860,62158:57861,62159:57862,62160:57863,62161:57864,62162:57865,62163:57866,62164:57867,62165:57868,62166:57869,62167:57870,62168:57871,62169:57872,62170:57873,62171:57874,62172:57875,62173:57876,62174:57877,62175:57878,62176:57879,62177:57880,62178:57881,62179:57882,62180:57883,62181:57884,62182:57885,62183:57886,62184:57887,62185:57888,62186:57889,62187:57890,62188:57891,62189:57892,62190:57893,62191:57894,62192:57895,62193:57896,62194:57897,62195:57898,62196:57899,62197:57900,62198:57901,62199:57902,62200:57903,62201:57904,62202:57905,62203:57906,62204:57907,62272:57908,62273:57909,62274:57910,62275:57911,62276:57912,62277:57913,62278:57914,62279:57915,62280:57916,62281:57917,62282:57918,62283:57919,62284:57920,62285:57921,62286:57922,62287:57923,62288:57924,62289:57925,62290:57926,62291:57927,62292:57928,62293:57929,62294:57930,62295:57931,62296:57932,62297:57933,62298:57934,62299:57935,62300:57936,62301:57937,62302:57938,62303:57939,62304:57940,62305:57941,62306:57942,62307:57943,62308:57944,62309:57945,62310:57946,62311:57947,62312:57948,62313:57949,62314:57950,62315:57951,62316:57952,62317:57953,62318:57954,62319:57955,62320:57956,62321:57957,62322:57958,62323:57959,62324:57960,62325:57961,62326:57962,62327:57963,62328:57964,62329:57965,62330:57966,62331:57967,62332:57968,62333:57969,62334:57970,62336:57971,62337:57972,62338:57973,62339:57974,62340:57975,62341:57976,62342:57977,62343:57978,62344:57979,62345:57980,62346:57981,62347:57982,62348:57983,62349:57984,62350:57985,62351:57986,62352:57987,62353:57988,62354:57989,62355:57990,62356:57991,62357:57992,62358:57993,62359:57994,62360:57995,62361:57996,62362:57997,62363:57998,62364:57999,62365:58e3,62366:58001,62367:58002,62368:58003,62369:58004,62370:58005,62371:58006,62372:58007,62373:58008,62374:58009,62375:58010,62376:58011,62377:58012,62378:58013,62379:58014,62380:58015,62381:58016,62382:58017,62383:58018,62384:58019,62385:58020,62386:58021,62387:58022,62388:58023,62389:58024,62390:58025,62391:58026,62392:58027,62393:58028,62394:58029,62395:58030,62396:58031,62397:58032,62398:58033,62399:58034,62400:58035,62401:58036,62402:58037,62403:58038,62404:58039,62405:58040,62406:58041,62407:58042,62408:58043,62409:58044,62410:58045,62411:58046,62412:58047,62413:58048,62414:58049,62415:58050,62416:58051,62417:58052,62418:58053,62419:58054,62420:58055,62421:58056,62422:58057,62423:58058,62424:58059,62425:58060,62426:58061,62427:58062,62428:58063,62429:58064,62430:58065,62431:58066,62432:58067,62433:58068,62434:58069,62435:58070,62436:58071,62437:58072,62438:58073,62439:58074,62440:58075,62441:58076,62442:58077,62443:58078,62444:58079,62445:58080,62446:58081,62447:58082,62448:58083,62449:58084,62450:58085,62451:58086,62452:58087,62453:58088,62454:58089,62455:58090,62456:58091,62457:58092,62458:58093,62459:58094,62460:58095,62528:58096,62529:58097,62530:58098,62531:58099,62532:58100,62533:58101,62534:58102,62535:58103,62536:58104,62537:58105,62538:58106,62539:58107,62540:58108,62541:58109,62542:58110,62543:58111,62544:58112,62545:58113,62546:58114,62547:58115,62548:58116,62549:58117,62550:58118,62551:58119,62552:58120,62553:58121,62554:58122,62555:58123,62556:58124,62557:58125,62558:58126,62559:58127,62560:58128,62561:58129,62562:58130,62563:58131,62564:58132,62565:58133,62566:58134,62567:58135,62568:58136,62569:58137,62570:58138,62571:58139,62572:58140,62573:58141,62574:58142,62575:58143,62576:58144,62577:58145,62578:58146,62579:58147,62580:58148,62581:58149,62582:58150,62583:58151,62584:58152,62585:58153,62586:58154,62587:58155,62588:58156,62589:58157,62590:58158,62592:58159,62593:58160,62594:58161,62595:58162,62596:58163,62597:58164,62598:58165,62599:58166,62600:58167,62601:58168,62602:58169,62603:58170,62604:58171,62605:58172,62606:58173,62607:58174,62608:58175,62609:58176,62610:58177,62611:58178,62612:58179,62613:58180,62614:58181,62615:58182,62616:58183,62617:58184,62618:58185,62619:58186,62620:58187,62621:58188,62622:58189,62623:58190,62624:58191,62625:58192,62626:58193,62627:58194,62628:58195,62629:58196,62630:58197,62631:58198,62632:58199,62633:58200,62634:58201,62635:58202,62636:58203,62637:58204,62638:58205,62639:58206,62640:58207,62641:58208,62642:58209,62643:58210,62644:58211,62645:58212,62646:58213,62647:58214,62648:58215,62649:58216,62650:58217,62651:58218,62652:58219,62653:58220,62654:58221,62655:58222,62656:58223,62657:58224,62658:58225,62659:58226,62660:58227,62661:58228,62662:58229,62663:58230,62664:58231,62665:58232,62666:58233,62667:58234,62668:58235,62669:58236,62670:58237,62671:58238,62672:58239,62673:58240,62674:58241,62675:58242,62676:58243,62677:58244,62678:58245,62679:58246,62680:58247,62681:58248,62682:58249,62683:58250,62684:58251,62685:58252,62686:58253,62687:58254,62688:58255,62689:58256,62690:58257,62691:58258,62692:58259,62693:58260,62694:58261,62695:58262,62696:58263,62697:58264,62698:58265,62699:58266,62700:58267,62701:58268,62702:58269,62703:58270,62704:58271,62705:58272,62706:58273,62707:58274,62708:58275,62709:58276,62710:58277,62711:58278,62712:58279,62713:58280,62714:58281,62715:58282,62716:58283,62784:58284,62785:58285,62786:58286,62787:58287,62788:58288,62789:58289,62790:58290,62791:58291,62792:58292,62793:58293,62794:58294,62795:58295,62796:58296,62797:58297,62798:58298,62799:58299,62800:58300,62801:58301,62802:58302,62803:58303,62804:58304,62805:58305,62806:58306,62807:58307,62808:58308,62809:58309,62810:58310,62811:58311,62812:58312,62813:58313,62814:58314,62815:58315,62816:58316,62817:58317,62818:58318,62819:58319,62820:58320,62821:58321,62822:58322,62823:58323,62824:58324,62825:58325,62826:58326,62827:58327,62828:58328,62829:58329,62830:58330,62831:58331,62832:58332,62833:58333,62834:58334,62835:58335,62836:58336,62837:58337,62838:58338,62839:58339,62840:58340,62841:58341,62842:58342,62843:58343,62844:58344,62845:58345,62846:58346,62848:58347,62849:58348,62850:58349,62851:58350,62852:58351,62853:58352,62854:58353,62855:58354,62856:58355,62857:58356,62858:58357,62859:58358,62860:58359,62861:58360,62862:58361,62863:58362,62864:58363,62865:58364,62866:58365,62867:58366,62868:58367,62869:58368,62870:58369,62871:58370,62872:58371,62873:58372,62874:58373,62875:58374,62876:58375,62877:58376,62878:58377,62879:58378,62880:58379,62881:58380,62882:58381,62883:58382,62884:58383,62885:58384,62886:58385,62887:58386,62888:58387,62889:58388,62890:58389,62891:58390,62892:58391,62893:58392,62894:58393,62895:58394,62896:58395,62897:58396,62898:58397,62899:58398,62900:58399,62901:58400,62902:58401,62903:58402,62904:58403,62905:58404,62906:58405,62907:58406,62908:58407,62909:58408,62910:58409,62911:58410,62912:58411,62913:58412,62914:58413,62915:58414,62916:58415,62917:58416,62918:58417,62919:58418,62920:58419,62921:58420,62922:58421,62923:58422,62924:58423,62925:58424,62926:58425,62927:58426,62928:58427,62929:58428,62930:58429,62931:58430,62932:58431,62933:58432,62934:58433,62935:58434,62936:58435,62937:58436,62938:58437,62939:58438,62940:58439,62941:58440,62942:58441,62943:58442,62944:58443,62945:58444,62946:58445,62947:58446,62948:58447,62949:58448,62950:58449,62951:58450,62952:58451,62953:58452,62954:58453,62955:58454,62956:58455,62957:58456,62958:58457,62959:58458,62960:58459,62961:58460,62962:58461,62963:58462,62964:58463,62965:58464,62966:58465,62967:58466,62968:58467,62969:58468,62970:58469,62971:58470,62972:58471,63040:58472,63041:58473,63042:58474,63043:58475,63044:58476,63045:58477,63046:58478,63047:58479,63048:58480,63049:58481,63050:58482,63051:58483,63052:58484,63053:58485,63054:58486,63055:58487,63056:58488,63057:58489,63058:58490,63059:58491,63060:58492,63061:58493,63062:58494,63063:58495,63064:58496,63065:58497,63066:58498,63067:58499,63068:58500,63069:58501,63070:58502,63071:58503,63072:58504,63073:58505,63074:58506,63075:58507,63076:58508,63077:58509,63078:58510,63079:58511,63080:58512,63081:58513,63082:58514,63083:58515,63084:58516,63085:58517,63086:58518,63087:58519,63088:58520,63089:58521,63090:58522,63091:58523,63092:58524,63093:58525,63094:58526,63095:58527,63096:58528,63097:58529,63098:58530,63099:58531,63100:58532,63101:58533,63102:58534,63104:58535,63105:58536,63106:58537,63107:58538,63108:58539,63109:58540,63110:58541,63111:58542,63112:58543,63113:58544,63114:58545,63115:58546,63116:58547,63117:58548,63118:58549,63119:58550,63120:58551,63121:58552,63122:58553,63123:58554,63124:58555,63125:58556,63126:58557,63127:58558,63128:58559,63129:58560,63130:58561,63131:58562,63132:58563,63133:58564,63134:58565,63135:58566,63136:58567,63137:58568,63138:58569,63139:58570,63140:58571,63141:58572,63142:58573,63143:58574,63144:58575,63145:58576,63146:58577,63147:58578,63148:58579,63149:58580,63150:58581,63151:58582,63152:58583,63153:58584,63154:58585,63155:58586,63156:58587,63157:58588,63158:58589,63159:58590,63160:58591,63161:58592,63162:58593,63163:58594,63164:58595,63165:58596,63166:58597,63167:58598,63168:58599,63169:58600,63170:58601,63171:58602,63172:58603,63173:58604,63174:58605,63175:58606,63176:58607,63177:58608,63178:58609,63179:58610,63180:58611,63181:58612,63182:58613,63183:58614,63184:58615,63185:58616,63186:58617,63187:58618,63188:58619,63189:58620,63190:58621,63191:58622,63192:58623,63193:58624,63194:58625,63195:58626,63196:58627,63197:58628,63198:58629,63199:58630,63200:58631,63201:58632,63202:58633,63203:58634,63204:58635,63205:58636,63206:58637,63207:58638,63208:58639,63209:58640,63210:58641,63211:58642,63212:58643,63213:58644,63214:58645,63215:58646,63216:58647,63217:58648,63218:58649,63219:58650,63220:58651,63221:58652,63222:58653,63223:58654,63224:58655,63225:58656,63226:58657,63227:58658,63228:58659,63296:58660,63297:58661,63298:58662,63299:58663,63300:58664,63301:58665,63302:58666,63303:58667,63304:58668,63305:58669,63306:58670,63307:58671,63308:58672,63309:58673,63310:58674,63311:58675,63312:58676,63313:58677,63314:58678,63315:58679,63316:58680,63317:58681,63318:58682,63319:58683,63320:58684,63321:58685,63322:58686,63323:58687,63324:58688,63325:58689,63326:58690,63327:58691,63328:58692,63329:58693,63330:58694,63331:58695,63332:58696,63333:58697,63334:58698,63335:58699,63336:58700,63337:58701,63338:58702,63339:58703,63340:58704,63341:58705,63342:58706,63343:58707,63344:58708,63345:58709,63346:58710,63347:58711,63348:58712,63349:58713,63350:58714,63351:58715,63352:58716,63353:58717,63354:58718,63355:58719,63356:58720,63357:58721,63358:58722,63360:58723,63361:58724,63362:58725,63363:58726,63364:58727,63365:58728,63366:58729,63367:58730,63368:58731,63369:58732,63370:58733,63371:58734,63372:58735,63373:58736,63374:58737,63375:58738,63376:58739,63377:58740,63378:58741,63379:58742,63380:58743,63381:58744,63382:58745,63383:58746,63384:58747,63385:58748,63386:58749,63387:58750,63388:58751,63389:58752,63390:58753,63391:58754,63392:58755,63393:58756,63394:58757,63395:58758,63396:58759,63397:58760,63398:58761,63399:58762,63400:58763,63401:58764,63402:58765,63403:58766,63404:58767,63405:58768,63406:58769,63407:58770,63408:58771,63409:58772,63410:58773,63411:58774,63412:58775,63413:58776,63414:58777,63415:58778,63416:58779,63417:58780,63418:58781,63419:58782,63420:58783,63421:58784,63422:58785,63423:58786,63424:58787,63425:58788,63426:58789,63427:58790,63428:58791,63429:58792,63430:58793,63431:58794,63432:58795,63433:58796,63434:58797,63435:58798,63436:58799,63437:58800,63438:58801,63439:58802,63440:58803,63441:58804,63442:58805,63443:58806,63444:58807,63445:58808,63446:58809,63447:58810,63448:58811,63449:58812,63450:58813,63451:58814,63452:58815,63453:58816,63454:58817,63455:58818,63456:58819,63457:58820,63458:58821,63459:58822,63460:58823,63461:58824,63462:58825,63463:58826,63464:58827,63465:58828,63466:58829,63467:58830,63468:58831,63469:58832,63470:58833,63471:58834,63472:58835,63473:58836,63474:58837,63475:58838,63476:58839,63477:58840,63478:58841,63479:58842,63480:58843,63481:58844,63482:58845,63483:58846,63484:58847,63552:58848,63553:58849,63554:58850,63555:58851,63556:58852,63557:58853,63558:58854,63559:58855,63560:58856,63561:58857,63562:58858,63563:58859,63564:58860,63565:58861,63566:58862,63567:58863,63568:58864,63569:58865,63570:58866,63571:58867,63572:58868,63573:58869,63574:58870,63575:58871,63576:58872,63577:58873,63578:58874,63579:58875,63580:58876,63581:58877,63582:58878,63583:58879,63584:58880,63585:58881,63586:58882,63587:58883,63588:58884,63589:58885,63590:58886,63591:58887,63592:58888,63593:58889,63594:58890,63595:58891,63596:58892,63597:58893,63598:58894,63599:58895,63600:58896,63601:58897,63602:58898,63603:58899,63604:58900,63605:58901,63606:58902,63607:58903,63608:58904,63609:58905,63610:58906,63611:58907,63612:58908,63613:58909,63614:58910,63616:58911,63617:58912,63618:58913,63619:58914,63620:58915,63621:58916,63622:58917,63623:58918,63624:58919,63625:58920,63626:58921,63627:58922,63628:58923,63629:58924,63630:58925,63631:58926,63632:58927,63633:58928,63634:58929,63635:58930,63636:58931,63637:58932,63638:58933,63639:58934,63640:58935,63641:58936,63642:58937,63643:58938,63644:58939,63645:58940,63646:58941,63647:58942,63648:58943,63649:58944,63650:58945,63651:58946,63652:58947,63653:58948,63654:58949,63655:58950,63656:58951,63657:58952,63658:58953,63659:58954,63660:58955,63661:58956,63662:58957,63663:58958,63664:58959,63665:58960,63666:58961,63667:58962,63668:58963,63669:58964,63670:58965,63671:58966,63672:58967,63673:58968,63674:58969,63675:58970,63676:58971,63677:58972,63678:58973,63679:58974,63680:58975,63681:58976,63682:58977,63683:58978,63684:58979,63685:58980,63686:58981,63687:58982,63688:58983,63689:58984,63690:58985,63691:58986,63692:58987,63693:58988,63694:58989,63695:58990,63696:58991,63697:58992,63698:58993,63699:58994,63700:58995,63701:58996,63702:58997,63703:58998,63704:58999,63705:59e3,63706:59001,63707:59002,63708:59003,63709:59004,63710:59005,63711:59006,63712:59007,63713:59008,63714:59009,63715:59010,63716:59011,63717:59012,63718:59013,63719:59014,63720:59015,63721:59016,63722:59017,63723:59018,63724:59019,63725:59020,63726:59021,63727:59022,63728:59023,63729:59024,63730:59025,63731:59026,63732:59027,63733:59028,63734:59029,63735:59030,63736:59031,63737:59032,63738:59033,63739:59034,63740:59035,64064:8560,64065:8561,64066:8562,64067:8563,64068:8564,64069:8565,64070:8566,64071:8567,64072:8568,64073:8569,64074:8544,64075:8545,64076:8546,64077:8547,64078:8548,64079:8549,64080:8550,64081:8551,64082:8552,64083:8553,64084:65506,64085:65508,64086:65287,64087:65282,64088:12849,64089:8470,64090:8481,64091:8757,64092:32394,64093:35100,64094:37704,64095:37512,64096:34012,64097:20425,64098:28859,64099:26161,64100:26824,64101:37625,64102:26363,64103:24389,64104:20008,64105:20193,64106:20220,64107:20224,64108:20227,64109:20281,64110:20310,64111:20370,64112:20362,64113:20378,64114:20372,64115:20429,64116:20544,64117:20514,64118:20479,64119:20510,64120:20550,64121:20592,64122:20546,64123:20628,64124:20724,64125:20696,64126:20810,64128:20836,64129:20893,64130:20926,64131:20972,64132:21013,64133:21148,64134:21158,64135:21184,64136:21211,64137:21248,64138:21255,64139:21284,64140:21362,64141:21395,64142:21426,64143:21469,64144:64014,64145:21660,64146:21642,64147:21673,64148:21759,64149:21894,64150:22361,64151:22373,64152:22444,64153:22472,64154:22471,64155:64015,64156:64016,64157:22686,64158:22706,64159:22795,64160:22867,64161:22875,64162:22877,64163:22883,64164:22948,64165:22970,64166:23382,64167:23488,64168:29999,64169:23512,64170:23532,64171:23582,64172:23718,64173:23738,64174:23797,64175:23847,64176:23891,64177:64017,64178:23874,64179:23917,64180:23992,64181:23993,64182:24016,64183:24353,64184:24372,64185:24423,64186:24503,64187:24542,64188:24669,64189:24709,64190:24714,64191:24798,64192:24789,64193:24864,64194:24818,64195:24849,64196:24887,64197:24880,64198:24984,64199:25107,64200:25254,64201:25589,64202:25696,64203:25757,64204:25806,64205:25934,64206:26112,64207:26133,64208:26171,64209:26121,64210:26158,64211:26142,64212:26148,64213:26213,64214:26199,64215:26201,64216:64018,64217:26227,64218:26265,64219:26272,64220:26290,64221:26303,64222:26362,64223:26382,64224:63785,64225:26470,64226:26555,64227:26706,64228:26560,64229:26625,64230:26692,64231:26831,64232:64019,64233:26984,64234:64020,64235:27032,64236:27106,64237:27184,64238:27243,64239:27206,64240:27251,64241:27262,64242:27362,64243:27364,64244:27606,64245:27711,64246:27740,64247:27782,64248:27759,64249:27866,64250:27908,64251:28039,64252:28015,64320:28054,64321:28076,64322:28111,64323:28152,64324:28146,64325:28156,64326:28217,64327:28252,64328:28199,64329:28220,64330:28351,64331:28552,64332:28597,64333:28661,64334:28677,64335:28679,64336:28712,64337:28805,64338:28843,64339:28943,64340:28932,64341:29020,64342:28998,64343:28999,64344:64021,64345:29121,64346:29182,64347:29361,64348:29374,64349:29476,64350:64022,64351:29559,64352:29629,64353:29641,64354:29654,64355:29667,64356:29650,64357:29703,64358:29685,64359:29734,64360:29738,64361:29737,64362:29742,64363:29794,64364:29833,64365:29855,64366:29953,64367:30063,64368:30338,64369:30364,64370:30366,64371:30363,64372:30374,64373:64023,64374:30534,64375:21167,64376:30753,64377:30798,64378:30820,64379:30842,64380:31024,64381:64024,64382:64025,64384:64026,64385:31124,64386:64027,64387:31131,64388:31441,64389:31463,64390:64028,64391:31467,64392:31646,64393:64029,64394:32072,64395:32092,64396:32183,64397:32160,64398:32214,64399:32338,64400:32583,64401:32673,64402:64030,64403:33537,64404:33634,64405:33663,64406:33735,64407:33782,64408:33864,64409:33972,64410:34131,64411:34137,64412:34155,64413:64031,64414:34224,64415:64032,64416:64033,64417:34823,64418:35061,64419:35346,64420:35383,64421:35449,64422:35495,64423:35518,64424:35551,64425:64034,64426:35574,64427:35667,64428:35711,64429:36080,64430:36084,64431:36114,64432:36214,64433:64035,64434:36559,64435:64036,64436:64037,64437:36967,64438:37086,64439:64038,64440:37141,64441:37159,64442:37338,64443:37335,64444:37342,64445:37357,64446:37358,64447:37348,64448:37349,64449:37382,64450:37392,64451:37386,64452:37434,64453:37440,64454:37436,64455:37454,64456:37465,64457:37457,64458:37433,64459:37479,64460:37543,64461:37495,64462:37496,64463:37607,64464:37591,64465:37593,64466:37584,64467:64039,64468:37589,64469:37600,64470:37587,64471:37669,64472:37665,64473:37627,64474:64040,64475:37662,64476:37631,64477:37661,64478:37634,64479:37744,64480:37719,64481:37796,64482:37830,64483:37854,64484:37880,64485:37937,64486:37957,64487:37960,64488:38290,64489:63964,64490:64041,64491:38557,64492:38575,64493:38707,64494:38715,64495:38723,64496:38733,64497:38735,64498:38737,64499:38741,64500:38999,64501:39013,64502:64042,64503:64043,64504:39207,64505:64044,64506:39326,64507:39502,64508:39641,64576:39644,64577:39797,64578:39794,64579:39823,64580:39857,64581:39867,64582:39936,64583:40304,64584:40299,64585:64045,64586:40473,64587:40657};function DataViewEx(_e,_){this.dv=new DataView(_e),this.offset=0,this.littleEndian=_!==void 0?_:!0,this.encoder=new CharsetEncoder}DataViewEx.prototype={constructor:DataViewEx,getInt8:function(){var _e=this.dv.getInt8(this.offset);return this.offset+=1,_e},getInt8Array:function(_e){for(var _=[],tt=0;tt<_e;tt++)_.push(this.getInt8());return _},getUint8:function(){var _e=this.dv.getUint8(this.offset);return this.offset+=1,_e},getUint8Array:function(_e){for(var _=[],tt=0;tt<_e;tt++)_.push(this.getUint8());return _},getInt16:function(){var _e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,_e},getInt16Array:function(_e){for(var _=[],tt=0;tt<_e;tt++)_.push(this.getInt16());return _},getUint16:function(){var _e=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,_e},getUint16Array:function(_e){for(var _=[],tt=0;tt<_e;tt++)_.push(this.getUint16());return _},getInt32:function(){var _e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,_e},getInt32Array:function(_e){for(var _=[],tt=0;tt<_e;tt++)_.push(this.getInt32());return _},getUint32:function(){var _e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,_e},getUint32Array:function(_e){for(var _=[],tt=0;tt<_e;tt++)_.push(this.getUint32());return _},getFloat32:function(){var _e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,_e},getFloat32Array:function(_e){for(var _=[],tt=0;tt<_e;tt++)_.push(this.getFloat32());return _},getFloat64:function(){var _e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,_e},getFloat64Array:function(_e){for(var _=[],tt=0;tt<_e;tt++)_.push(this.getFloat64());return _},getIndex:function(_e,_){switch(_e){case 1:return _===!0?this.getUint8():this.getInt8();case 2:return _===!0?this.getUint16():this.getInt16();case 4:return this.getInt32();default:throw"unknown number type "+_e+" exception."}},getIndexArray:function(_e,_,tt){for(var nt=[],rt=0;rt<_;rt++)nt.push(this.getIndex(_e,tt));return nt},getChars:function(_e){for(var _="";_e>0;){var tt=this.getUint8();if(_e--,tt===0)break;_+=String.fromCharCode(tt)}for(;_e>0;)this.getUint8(),_e--;return _},getSjisStringsAsUnicode:function(_e){for(var _=[];_e>0;){var tt=this.getUint8();if(_e--,tt===0)break;_.push(tt)}for(;_e>0;)this.getUint8(),_e--;return this.encoder.s2u(new Uint8Array(_))},getUnicodeStrings:function(_e){for(var _="";_e>0;){var tt=this.getUint16();if(_e-=2,tt===0)break;_+=String.fromCharCode(tt)}for(;_e>0;)this.getUint8(),_e--;return _},getTextBuffer:function(){var _e=this.getUint32();return this.getUnicodeStrings(_e)}};function DataCreationHelper(){}DataCreationHelper.prototype={constructor:DataCreationHelper,leftToRightVector3:function(_e){_e[2]=-_e[2]},leftToRightQuaternion:function(_e){_e[0]=-_e[0],_e[1]=-_e[1]},leftToRightEuler:function(_e){_e[0]=-_e[0],_e[1]=-_e[1]},leftToRightIndexOrder:function(_e){var _=_e[2];_e[2]=_e[0],_e[0]=_},leftToRightVector3Range:function(_e,_){var tt=-_[2];_[2]=-_e[2],_e[2]=tt},leftToRightEulerRange:function(_e,_){var tt=-_[0],nt=-_[1];_[0]=-_e[0],_[1]=-_e[1],_e[0]=tt,_e[1]=nt}};const KHR_SUPERCOMPRESSION_NONE=0,KHR_SUPERCOMPRESSION_ZSTD=2,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT=0,KHR_DF_VENDORID_KHRONOS=0,KHR_DF_VERSION=2,KHR_DF_MODEL_UNSPECIFIED=0,KHR_DF_FLAG_ALPHA_STRAIGHT=0,KHR_DF_FLAG_ALPHA_PREMULTIPLIED=1,KHR_DF_TRANSFER_SRGB=2,KHR_DF_PRIMARIES_BT709=1,KHR_DF_SAMPLE_DATATYPE_SIGNED=64,VK_FORMAT_UNDEFINED=0,VK_FORMAT_R8_UNORM=9,VK_FORMAT_R8_SRGB=15,VK_FORMAT_R8G8_UNORM=16,VK_FORMAT_R8G8_SRGB=22,VK_FORMAT_R8G8B8A8_UNORM=37,VK_FORMAT_R8G8B8A8_SRGB=43,VK_FORMAT_R16_SFLOAT=76,VK_FORMAT_R16G16_SFLOAT=83,VK_FORMAT_R16G16B16A16_SFLOAT=97,VK_FORMAT_R32_SFLOAT=100,VK_FORMAT_R32G32_SFLOAT=103,VK_FORMAT_R32G32B32A32_SFLOAT=109;class KTX2Container{constructor(){this.vkFormat=VK_FORMAT_UNDEFINED,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=KHR_SUPERCOMPRESSION_NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:KHR_DF_VENDORID_KHRONOS,descriptorType:KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,descriptorBlockSize:0,versionNumber:KHR_DF_VERSION,colorModel:KHR_DF_MODEL_UNSPECIFIED,colorPrimaries:KHR_DF_PRIMARIES_BT709,transferFunction:KHR_DF_TRANSFER_SRGB,flags:KHR_DF_FLAG_ALPHA_STRAIGHT,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class BufferReader{constructor(_,tt,nt,rt){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(_.buffer,_.byteOffset+tt,nt),this._littleEndian=rt,this._offset=0}_nextUint8(){const _=this._dataView.getUint8(this._offset);return this._offset+=1,_}_nextUint16(){const _=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,_}_nextUint32(){const _=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,_}_nextUint64(){const _=this._dataView.getUint32(this._offset,this._littleEndian),tt=this._dataView.getUint32(this._offset+4,this._littleEndian),nt=_+2**32*tt;return this._offset+=8,nt}_nextInt32(){const _=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,_}_skip(_){return this._offset+=_,this}_scan(_,tt=0){const nt=this._offset;let rt=0;for(;this._dataView.getUint8(this._offset)!==tt&&rt<_;)rt++,this._offset++;return rt<_&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+nt,rt)}}const KTX2_ID=[171,75,84,88,32,50,48,187,13,10,26,10];function decodeText(_e){return typeof TextDecoder<"u"?new TextDecoder().decode(_e):Buffer.from(_e).toString("utf8")}function read(_e){const _=new Uint8Array(_e.buffer,_e.byteOffset,KTX2_ID.length);if(_[0]!==KTX2_ID[0]||_[1]!==KTX2_ID[1]||_[2]!==KTX2_ID[2]||_[3]!==KTX2_ID[3]||_[4]!==KTX2_ID[4]||_[5]!==KTX2_ID[5]||_[6]!==KTX2_ID[6]||_[7]!==KTX2_ID[7]||_[8]!==KTX2_ID[8]||_[9]!==KTX2_ID[9]||_[10]!==KTX2_ID[10]||_[11]!==KTX2_ID[11])throw new Error("Missing KTX 2.0 identifier.");const tt=new KTX2Container,nt=17*Uint32Array.BYTES_PER_ELEMENT,rt=new BufferReader(_e,KTX2_ID.length,nt,!0);tt.vkFormat=rt._nextUint32(),tt.typeSize=rt._nextUint32(),tt.pixelWidth=rt._nextUint32(),tt.pixelHeight=rt._nextUint32(),tt.pixelDepth=rt._nextUint32(),tt.layerCount=rt._nextUint32(),tt.faceCount=rt._nextUint32();const it=rt._nextUint32();tt.supercompressionScheme=rt._nextUint32();const at=rt._nextUint32(),ot=rt._nextUint32(),st=rt._nextUint32(),lt=rt._nextUint32(),ct=rt._nextUint64(),ut=rt._nextUint64(),ft=it*3*8,pt=new BufferReader(_e,KTX2_ID.length+nt,ft,!0);for(let $t=0;$t<it;$t++)tt.levels.push({levelData:new Uint8Array(_e.buffer,_e.byteOffset+pt._nextUint64(),pt._nextUint64()),uncompressedByteLength:pt._nextUint64()});const gt=new BufferReader(_e,at,ot,!0),xt={vendorId:gt._skip(4)._nextUint16(),descriptorType:gt._nextUint16(),versionNumber:gt._nextUint16(),descriptorBlockSize:gt._nextUint16(),colorModel:gt._nextUint8(),colorPrimaries:gt._nextUint8(),transferFunction:gt._nextUint8(),flags:gt._nextUint8(),texelBlockDimension:[gt._nextUint8(),gt._nextUint8(),gt._nextUint8(),gt._nextUint8()],bytesPlane:[gt._nextUint8(),gt._nextUint8(),gt._nextUint8(),gt._nextUint8(),gt._nextUint8(),gt._nextUint8(),gt._nextUint8(),gt._nextUint8()],samples:[]},yt=6,mt=4,At=(xt.descriptorBlockSize/4-yt)/mt;for(let $t=0;$t<At;$t++){const Lt={bitOffset:gt._nextUint16(),bitLength:gt._nextUint8(),channelType:gt._nextUint8(),samplePosition:[gt._nextUint8(),gt._nextUint8(),gt._nextUint8(),gt._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Lt.channelType&KHR_DF_SAMPLE_DATATYPE_SIGNED?(Lt.sampleLower=gt._nextInt32(),Lt.sampleUpper=gt._nextInt32()):(Lt.sampleLower=gt._nextUint32(),Lt.sampleUpper=gt._nextUint32()),xt.samples[$t]=Lt}tt.dataFormatDescriptor.length=0,tt.dataFormatDescriptor.push(xt);const vt=new BufferReader(_e,st,lt,!0);for(;vt._offset<lt;){const $t=vt._nextUint32(),Lt=vt._scan($t),Vt=decodeText(Lt),tn=vt._scan($t-Lt.byteLength);tt.keyValue[Vt]=Vt.match(/^ktx/i)?decodeText(tn):tn,vt._offset%4&&vt._skip(4-vt._offset%4)}if(ut<=0)return tt;const Et=new BufferReader(_e,ct,ut,!0),Ct=Et._nextUint16(),Tt=Et._nextUint16(),bt=Et._nextUint32(),It=Et._nextUint32(),wt=Et._nextUint32(),Rt=Et._nextUint32(),Ft=[];for(let $t=0;$t<it;$t++)Ft.push({imageFlags:Et._nextUint32(),rgbSliceByteOffset:Et._nextUint32(),rgbSliceByteLength:Et._nextUint32(),alphaSliceByteOffset:Et._nextUint32(),alphaSliceByteLength:Et._nextUint32()});const Ut=ct+Et._offset,Gt=Ut+bt,Ht=Gt+It,jt=Ht+wt,Xt=new Uint8Array(_e.buffer,_e.byteOffset+Ut,bt),Jt=new Uint8Array(_e.buffer,_e.byteOffset+Gt,It),Dt=new Uint8Array(_e.buffer,_e.byteOffset+Ht,wt),zt=new Uint8Array(_e.buffer,_e.byteOffset+jt,Rt);return tt.globalData={endpointCount:Ct,selectorCount:Tt,imageDescs:Ft,endpointsData:Xt,selectorsData:Jt,tablesData:Dt,extendedData:zt},tt}let A$1,I$3,B$1;const g$3={env:{emscripten_notify_memory_growth:function(_e){B$1=new Uint8Array(I$3.exports.memory.buffer)}}};let Q$1=class{init(){return A$1||(A$1=typeof fetch<"u"?fetch("data:application/wasm;base64,"+C$1).then(_=>_.arrayBuffer()).then(_=>WebAssembly.instantiate(_,g$3)).then(this._init):WebAssembly.instantiate(Buffer.from(C$1,"base64"),g$3).then(this._init),A$1)}_init(_){I$3=_.instance,g$3.env.emscripten_notify_memory_growth(0)}decode(_,tt=0){if(!I$3)throw new Error("ZSTDDecoder: Await .init() before decoding.");const nt=_.byteLength,rt=I$3.exports.malloc(nt);B$1.set(_,rt),tt=tt||Number(I$3.exports.ZSTD_findDecompressedSize(rt,nt));const it=I$3.exports.malloc(tt),at=I$3.exports.ZSTD_decompress(it,tt,rt,nt),ot=B$1.slice(it,it+at);return I$3.exports.free(rt),I$3.exports.free(it),ot}};const C$1="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var _e=function(){try{var tt={},nt=Object.defineProperty,rt=nt(tt,tt,tt)&&nt}catch{}return rt}(),_=function(tt){if(this==null)throw TypeError();var nt=String(this),rt=nt.length,it=tt?Number(tt):0;if(it!=it&&(it=0),!(it<0||it>=rt)){var at=nt.charCodeAt(it),ot;return at>=55296&&at<=56319&&rt>it+1&&(ot=nt.charCodeAt(it+1),ot>=56320&&ot<=57343)?(at-55296)*1024+ot-56320+65536:at}};_e?_e(String.prototype,"codePointAt",{value:_,configurable:!0,writable:!0}):String.prototype.codePointAt=_}();function Tree(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var sltree=new Tree,sdtree=new Tree,length_bits=new Uint8Array(30),length_base=new Uint16Array(30),dist_bits=new Uint8Array(30),dist_base=new Uint16Array(30);function tinf_build_bits_base(_e,_,tt,nt){var rt,it;for(rt=0;rt<tt;++rt)_e[rt]=0;for(rt=0;rt<30-tt;++rt)_e[rt+tt]=rt/tt|0;for(it=nt,rt=0;rt<30;++rt)_[rt]=it,it+=1<<_e[rt]}function tinf_build_fixed_trees(_e,_){var tt;for(tt=0;tt<7;++tt)_e.table[tt]=0;for(_e.table[7]=24,_e.table[8]=152,_e.table[9]=112,tt=0;tt<24;++tt)_e.trans[tt]=256+tt;for(tt=0;tt<144;++tt)_e.trans[24+tt]=tt;for(tt=0;tt<8;++tt)_e.trans[24+144+tt]=280+tt;for(tt=0;tt<112;++tt)_e.trans[24+144+8+tt]=144+tt;for(tt=0;tt<5;++tt)_.table[tt]=0;for(_.table[5]=32,tt=0;tt<32;++tt)_.trans[tt]=tt}tinf_build_fixed_trees(sltree,sdtree);tinf_build_bits_base(length_bits,length_base,4,3);tinf_build_bits_base(dist_bits,dist_base,2,1);length_bits[28]=0;length_base[28]=258;function derive(_e,_,tt,nt,rt){return Math.pow(1-rt,3)*_e+3*Math.pow(1-rt,2)*rt*_+3*(1-rt)*Math.pow(rt,2)*tt+Math.pow(rt,3)*nt}function BoundingBox(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}BoundingBox.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};BoundingBox.prototype.addPoint=function(_e,_){typeof _e=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=_e,this.x2=_e),_e<this.x1&&(this.x1=_e),_e>this.x2&&(this.x2=_e)),typeof _=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=_,this.y2=_),_<this.y1&&(this.y1=_),_>this.y2&&(this.y2=_))};BoundingBox.prototype.addX=function(_e){this.addPoint(_e,null)};BoundingBox.prototype.addY=function(_e){this.addPoint(null,_e)};BoundingBox.prototype.addBezier=function(_e,_,tt,nt,rt,it,at,ot){var st=[_e,_],lt=[tt,nt],ct=[rt,it],ut=[at,ot];this.addPoint(_e,_),this.addPoint(at,ot);for(var ft=0;ft<=1;ft++){var pt=6*st[ft]-12*lt[ft]+6*ct[ft],gt=-3*st[ft]+9*lt[ft]-9*ct[ft]+3*ut[ft],xt=3*lt[ft]-3*st[ft];if(gt===0){if(pt===0)continue;var yt=-xt/pt;0<yt&&yt<1&&(ft===0&&this.addX(derive(st[ft],lt[ft],ct[ft],ut[ft],yt)),ft===1&&this.addY(derive(st[ft],lt[ft],ct[ft],ut[ft],yt)));continue}var mt=Math.pow(pt,2)-4*xt*gt;if(!(mt<0)){var At=(-pt+Math.sqrt(mt))/(2*gt);0<At&&At<1&&(ft===0&&this.addX(derive(st[ft],lt[ft],ct[ft],ut[ft],At)),ft===1&&this.addY(derive(st[ft],lt[ft],ct[ft],ut[ft],At)));var vt=(-pt-Math.sqrt(mt))/(2*gt);0<vt&&vt<1&&(ft===0&&this.addX(derive(st[ft],lt[ft],ct[ft],ut[ft],vt)),ft===1&&this.addY(derive(st[ft],lt[ft],ct[ft],ut[ft],vt)))}}};BoundingBox.prototype.addQuad=function(_e,_,tt,nt,rt,it){var at=_e+.6666666666666666*(tt-_e),ot=_+2/3*(nt-_),st=at+1/3*(rt-_e),lt=ot+1/3*(it-_);this.addBezier(_e,_,at,ot,st,lt,rt,it)};function Path(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Path.prototype.moveTo=function(_e,_){this.commands.push({type:"M",x:_e,y:_})};Path.prototype.lineTo=function(_e,_){this.commands.push({type:"L",x:_e,y:_})};Path.prototype.curveTo=Path.prototype.bezierCurveTo=function(_e,_,tt,nt,rt,it){this.commands.push({type:"C",x1:_e,y1:_,x2:tt,y2:nt,x:rt,y:it})};Path.prototype.quadTo=Path.prototype.quadraticCurveTo=function(_e,_,tt,nt){this.commands.push({type:"Q",x1:_e,y1:_,x:tt,y:nt})};Path.prototype.close=Path.prototype.closePath=function(){this.commands.push({type:"Z"})};Path.prototype.extend=function(_e){if(_e.commands)_e=_e.commands;else if(_e instanceof BoundingBox){var _=_e;this.moveTo(_.x1,_.y1),this.lineTo(_.x2,_.y1),this.lineTo(_.x2,_.y2),this.lineTo(_.x1,_.y2),this.close();return}Array.prototype.push.apply(this.commands,_e)};Path.prototype.getBoundingBox=function(){for(var _e=new BoundingBox,_=0,tt=0,nt=0,rt=0,it=0;it<this.commands.length;it++){var at=this.commands[it];switch(at.type){case"M":_e.addPoint(at.x,at.y),_=nt=at.x,tt=rt=at.y;break;case"L":_e.addPoint(at.x,at.y),nt=at.x,rt=at.y;break;case"Q":_e.addQuad(nt,rt,at.x1,at.y1,at.x,at.y),nt=at.x,rt=at.y;break;case"C":_e.addBezier(nt,rt,at.x1,at.y1,at.x2,at.y2,at.x,at.y),nt=at.x,rt=at.y;break;case"Z":nt=_,rt=tt;break;default:throw new Error("Unexpected path command "+at.type)}}return _e.isEmpty()&&_e.addPoint(0,0),_e};Path.prototype.draw=function(_e){_e.beginPath();for(var _=0;_<this.commands.length;_+=1){var tt=this.commands[_];tt.type==="M"?_e.moveTo(tt.x,tt.y):tt.type==="L"?_e.lineTo(tt.x,tt.y):tt.type==="C"?_e.bezierCurveTo(tt.x1,tt.y1,tt.x2,tt.y2,tt.x,tt.y):tt.type==="Q"?_e.quadraticCurveTo(tt.x1,tt.y1,tt.x,tt.y):tt.type==="Z"&&_e.closePath()}this.fill&&(_e.fillStyle=this.fill,_e.fill()),this.stroke&&(_e.strokeStyle=this.stroke,_e.lineWidth=this.strokeWidth,_e.stroke())};Path.prototype.toPathData=function(_e){_e=_e!==void 0?_e:2;function _(at){return Math.round(at)===at?""+Math.round(at):at.toFixed(_e)}function tt(){for(var at=arguments,ot="",st=0;st<arguments.length;st+=1){var lt=at[st];lt>=0&&st>0&&(ot+=" "),ot+=_(lt)}return ot}for(var nt="",rt=0;rt<this.commands.length;rt+=1){var it=this.commands[rt];it.type==="M"?nt+="M"+tt(it.x,it.y):it.type==="L"?nt+="L"+tt(it.x,it.y):it.type==="C"?nt+="C"+tt(it.x1,it.y1,it.x2,it.y2,it.x,it.y):it.type==="Q"?nt+="Q"+tt(it.x1,it.y1,it.x,it.y):it.type==="Z"&&(nt+="Z")}return nt};Path.prototype.toSVG=function(_e){var _='<path d="';return _+=this.toPathData(_e),_+='"',this.fill&&this.fill!=="black"&&(this.fill===null?_+=' fill="none"':_+=' fill="'+this.fill+'"'),this.stroke&&(_+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),_+="/>",_};Path.prototype.toDOMElement=function(_e){var _=this.toPathData(_e),tt=document.createElementNS("http://www.w3.org/2000/svg","path");return tt.setAttribute("d",_),tt};function fail(_e){throw new Error(_e)}function argument(_e,_){_e||fail(_)}var check={fail,argument,assert:argument},LIMIT16=32768,LIMIT32=2147483648,decode={},encode={},sizeOf={};function constant$1(_e){return function(){return _e}}encode.BYTE=function(_e){return check.argument(_e>=0&&_e<=255,"Byte value should be between 0 and 255."),[_e]};sizeOf.BYTE=constant$1(1);encode.CHAR=function(_e){return[_e.charCodeAt(0)]};sizeOf.CHAR=constant$1(1);encode.CHARARRAY=function(_e){typeof _e>"u"&&(_e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var _=[],tt=0;tt<_e.length;tt+=1)_[tt]=_e.charCodeAt(tt);return _};sizeOf.CHARARRAY=function(_e){return typeof _e>"u"?0:_e.length};encode.USHORT=function(_e){return[_e>>8&255,_e&255]};sizeOf.USHORT=constant$1(2);encode.SHORT=function(_e){return _e>=LIMIT16&&(_e=-(2*LIMIT16-_e)),[_e>>8&255,_e&255]};sizeOf.SHORT=constant$1(2);encode.UINT24=function(_e){return[_e>>16&255,_e>>8&255,_e&255]};sizeOf.UINT24=constant$1(3);encode.ULONG=function(_e){return[_e>>24&255,_e>>16&255,_e>>8&255,_e&255]};sizeOf.ULONG=constant$1(4);encode.LONG=function(_e){return _e>=LIMIT32&&(_e=-(2*LIMIT32-_e)),[_e>>24&255,_e>>16&255,_e>>8&255,_e&255]};sizeOf.LONG=constant$1(4);encode.FIXED=encode.ULONG;sizeOf.FIXED=sizeOf.ULONG;encode.FWORD=encode.SHORT;sizeOf.FWORD=sizeOf.SHORT;encode.UFWORD=encode.USHORT;sizeOf.UFWORD=sizeOf.USHORT;encode.LONGDATETIME=function(_e){return[0,0,0,0,_e>>24&255,_e>>16&255,_e>>8&255,_e&255]};sizeOf.LONGDATETIME=constant$1(8);encode.TAG=function(_e){return check.argument(_e.length===4,"Tag should be exactly 4 ASCII characters."),[_e.charCodeAt(0),_e.charCodeAt(1),_e.charCodeAt(2),_e.charCodeAt(3)]};sizeOf.TAG=constant$1(4);encode.Card8=encode.BYTE;sizeOf.Card8=sizeOf.BYTE;encode.Card16=encode.USHORT;sizeOf.Card16=sizeOf.USHORT;encode.OffSize=encode.BYTE;sizeOf.OffSize=sizeOf.BYTE;encode.SID=encode.USHORT;sizeOf.SID=sizeOf.USHORT;encode.NUMBER=function(_e){return _e>=-107&&_e<=107?[_e+139]:_e>=108&&_e<=1131?(_e=_e-108,[(_e>>8)+247,_e&255]):_e>=-1131&&_e<=-108?(_e=-_e-108,[(_e>>8)+251,_e&255]):_e>=-32768&&_e<=32767?encode.NUMBER16(_e):encode.NUMBER32(_e)};sizeOf.NUMBER=function(_e){return encode.NUMBER(_e).length};encode.NUMBER16=function(_e){return[28,_e>>8&255,_e&255]};sizeOf.NUMBER16=constant$1(3);encode.NUMBER32=function(_e){return[29,_e>>24&255,_e>>16&255,_e>>8&255,_e&255]};sizeOf.NUMBER32=constant$1(5);encode.REAL=function(_e){var _=_e.toString(),tt=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(_);if(tt){var nt=parseFloat("1e"+((tt[2]?+tt[2]:0)+tt[1].length));_=(Math.round(_e*nt)/nt).toString()}for(var rt="",it=0,at=_.length;it<at;it+=1){var ot=_[it];ot==="e"?rt+=_[++it]==="-"?"c":"b":ot==="."?rt+="a":ot==="-"?rt+="e":rt+=ot}rt+=rt.length&1?"f":"ff";for(var st=[30],lt=0,ct=rt.length;lt<ct;lt+=2)st.push(parseInt(rt.substr(lt,2),16));return st};sizeOf.REAL=function(_e){return encode.REAL(_e).length};encode.NAME=encode.CHARARRAY;sizeOf.NAME=sizeOf.CHARARRAY;encode.STRING=encode.CHARARRAY;sizeOf.STRING=sizeOf.CHARARRAY;decode.UTF8=function(_e,_,tt){for(var nt=[],rt=tt,it=0;it<rt;it++,_+=1)nt[it]=_e.getUint8(_);return String.fromCharCode.apply(null,nt)};decode.UTF16=function(_e,_,tt){for(var nt=[],rt=tt/2,it=0;it<rt;it++,_+=2)nt[it]=_e.getUint16(_);return String.fromCharCode.apply(null,nt)};encode.UTF16=function(_e){for(var _=[],tt=0;tt<_e.length;tt+=1){var nt=_e.charCodeAt(tt);_[_.length]=nt>>8&255,_[_.length]=nt&255}return _};sizeOf.UTF16=function(_e){return _e.length*2};var eightBitMacEncodings={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};decode.MACSTRING=function(_e,_,tt,nt){var rt=eightBitMacEncodings[nt];if(rt!==void 0){for(var it="",at=0;at<tt;at++){var ot=_e.getUint8(_+at);ot<=127?it+=String.fromCharCode(ot):it+=rt[ot&127]}return it}};var macEncodingTableCache=typeof WeakMap=="function"&&new WeakMap,macEncodingCacheKeys,getMacEncodingTable=function(_e){if(!macEncodingCacheKeys){macEncodingCacheKeys={};for(var _ in eightBitMacEncodings)macEncodingCacheKeys[_]=new String(_)}var tt=macEncodingCacheKeys[_e];if(tt!==void 0){if(macEncodingTableCache){var nt=macEncodingTableCache.get(tt);if(nt!==void 0)return nt}var rt=eightBitMacEncodings[_e];if(rt!==void 0){for(var it={},at=0;at<rt.length;at++)it[rt.charCodeAt(at)]=at+128;return macEncodingTableCache&&macEncodingTableCache.set(tt,it),it}}};encode.MACSTRING=function(_e,_){var tt=getMacEncodingTable(_);if(tt!==void 0){for(var nt=[],rt=0;rt<_e.length;rt++){var it=_e.charCodeAt(rt);if(it>=128&&(it=tt[it],it===void 0))return;nt[rt]=it}return nt}};sizeOf.MACSTRING=function(_e,_){var tt=encode.MACSTRING(_e,_);return tt!==void 0?tt.length:0};function isByteEncodable(_e){return _e>=-128&&_e<=127}function encodeVarDeltaRunAsZeroes(_e,_,tt){for(var nt=0,rt=_e.length;_<rt&&nt<64&&_e[_]===0;)++_,++nt;return tt.push(128|nt-1),_}function encodeVarDeltaRunAsBytes(_e,_,tt){for(var nt=0,rt=_e.length,it=_;it<rt&&nt<64;){var at=_e[it];if(!isByteEncodable(at)||at===0&&it+1<rt&&_e[it+1]===0)break;++it,++nt}tt.push(nt-1);for(var ot=_;ot<it;++ot)tt.push(_e[ot]+256&255);return it}function encodeVarDeltaRunAsWords(_e,_,tt){for(var nt=0,rt=_e.length,it=_;it<rt&&nt<64;){var at=_e[it];if(at===0||isByteEncodable(at)&&it+1<rt&&isByteEncodable(_e[it+1]))break;++it,++nt}tt.push(64|nt-1);for(var ot=_;ot<it;++ot){var st=_e[ot];tt.push(st+65536>>8&255,st+256&255)}return it}encode.VARDELTAS=function(_e){for(var _=0,tt=[];_<_e.length;){var nt=_e[_];nt===0?_=encodeVarDeltaRunAsZeroes(_e,_,tt):nt>=-128&&nt<=127?_=encodeVarDeltaRunAsBytes(_e,_,tt):_=encodeVarDeltaRunAsWords(_e,_,tt)}return tt};encode.INDEX=function(_e){for(var _=1,tt=[_],nt=[],rt=0;rt<_e.length;rt+=1){var it=encode.OBJECT(_e[rt]);Array.prototype.push.apply(nt,it),_+=it.length,tt.push(_)}if(nt.length===0)return[0,0];for(var at=[],ot=1+Math.floor(Math.log(_)/Math.log(2))/8|0,st=[void 0,encode.BYTE,encode.USHORT,encode.UINT24,encode.ULONG][ot],lt=0;lt<tt.length;lt+=1){var ct=st(tt[lt]);Array.prototype.push.apply(at,ct)}return Array.prototype.concat(encode.Card16(_e.length),encode.OffSize(ot),at,nt)};sizeOf.INDEX=function(_e){return encode.INDEX(_e).length};encode.DICT=function(_e){for(var _=[],tt=Object.keys(_e),nt=tt.length,rt=0;rt<nt;rt+=1){var it=parseInt(tt[rt],0),at=_e[it];_=_.concat(encode.OPERAND(at.value,at.type)),_=_.concat(encode.OPERATOR(it))}return _};sizeOf.DICT=function(_e){return encode.DICT(_e).length};encode.OPERATOR=function(_e){return _e<1200?[_e]:[12,_e-1200]};encode.OPERAND=function(_e,_){var tt=[];if(Array.isArray(_))for(var nt=0;nt<_.length;nt+=1)check.argument(_e.length===_.length,"Not enough arguments given for type"+_),tt=tt.concat(encode.OPERAND(_e[nt],_[nt]));else if(_==="SID")tt=tt.concat(encode.NUMBER(_e));else if(_==="offset")tt=tt.concat(encode.NUMBER32(_e));else if(_==="number")tt=tt.concat(encode.NUMBER(_e));else if(_==="real")tt=tt.concat(encode.REAL(_e));else throw new Error("Unknown operand type "+_);return tt};encode.OP=encode.BYTE;sizeOf.OP=sizeOf.BYTE;var wmm=typeof WeakMap=="function"&&new WeakMap;encode.CHARSTRING=function(_e){if(wmm){var _=wmm.get(_e);if(_!==void 0)return _}for(var tt=[],nt=_e.length,rt=0;rt<nt;rt+=1){var it=_e[rt];tt=tt.concat(encode[it.type](it.value))}return wmm&&wmm.set(_e,tt),tt};sizeOf.CHARSTRING=function(_e){return encode.CHARSTRING(_e).length};encode.OBJECT=function(_e){var _=encode[_e.type];return check.argument(_!==void 0,"No encoding function for type "+_e.type),_(_e.value)};sizeOf.OBJECT=function(_e){var _=sizeOf[_e.type];return check.argument(_!==void 0,"No sizeOf function for type "+_e.type),_(_e.value)};encode.TABLE=function(_e){for(var _=[],tt=_e.fields.length,nt=[],rt=[],it=0;it<tt;it+=1){var at=_e.fields[it],ot=encode[at.type];check.argument(ot!==void 0,"No encoding function for field type "+at.type+" ("+at.name+")");var st=_e[at.name];st===void 0&&(st=at.value);var lt=ot(st);at.type==="TABLE"?(rt.push(_.length),_=_.concat([0,0]),nt.push(lt)):_=_.concat(lt)}for(var ct=0;ct<nt.length;ct+=1){var ut=rt[ct],ft=_.length;check.argument(ft<65536,"Table "+_e.tableName+" too big."),_[ut]=ft>>8,_[ut+1]=ft&255,_=_.concat(nt[ct])}return _};sizeOf.TABLE=function(_e){for(var _=0,tt=_e.fields.length,nt=0;nt<tt;nt+=1){var rt=_e.fields[nt],it=sizeOf[rt.type];check.argument(it!==void 0,"No sizeOf function for field type "+rt.type+" ("+rt.name+")");var at=_e[rt.name];at===void 0&&(at=rt.value),_+=it(at),rt.type==="TABLE"&&(_+=2)}return _};encode.RECORD=encode.TABLE;sizeOf.RECORD=sizeOf.TABLE;encode.LITERAL=function(_e){return _e};sizeOf.LITERAL=function(_e){return _e.length};function Table(_e,_,tt){if(_.length&&(_[0].name!=="coverageFormat"||_[0].value===1))for(var nt=0;nt<_.length;nt+=1){var rt=_[nt];this[rt.name]=rt.value}if(this.tableName=_e,this.fields=_,tt)for(var it=Object.keys(tt),at=0;at<it.length;at+=1){var ot=it[at],st=tt[ot];this[ot]!==void 0&&(this[ot]=st)}}Table.prototype.encode=function(){return encode.TABLE(this)};Table.prototype.sizeOf=function(){return sizeOf.TABLE(this)};function ushortList(_e,_,tt){tt===void 0&&(tt=_.length);var nt=new Array(_.length+1);nt[0]={name:_e+"Count",type:"USHORT",value:tt};for(var rt=0;rt<_.length;rt++)nt[rt+1]={name:_e+rt,type:"USHORT",value:_[rt]};return nt}function tableList(_e,_,tt){var nt=_.length,rt=new Array(nt+1);rt[0]={name:_e+"Count",type:"USHORT",value:nt};for(var it=0;it<nt;it++)rt[it+1]={name:_e+it,type:"TABLE",value:tt(_[it],it)};return rt}function recordList(_e,_,tt){var nt=_.length,rt=[];rt[0]={name:_e+"Count",type:"USHORT",value:nt};for(var it=0;it<nt;it++)rt=rt.concat(tt(_[it],it));return rt}function Coverage(_e){_e.format===1?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ushortList("glyph",_e.glyphs))):_e.format===2?Table.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(recordList("rangeRecord",_e.ranges,function(_){return[{name:"startGlyphID",type:"USHORT",value:_.start},{name:"endGlyphID",type:"USHORT",value:_.end},{name:"startCoverageIndex",type:"USHORT",value:_.index}]}))):check.assert(!1,"Coverage format must be 1 or 2.")}Coverage.prototype=Object.create(Table.prototype);Coverage.prototype.constructor=Coverage;function ScriptList(_e){Table.call(this,"scriptListTable",recordList("scriptRecord",_e,function(_,tt){var nt=_.script,rt=nt.defaultLangSys;return check.assert(!!rt,"Unable to write GSUB: script "+_.tag+" has no default language system."),[{name:"scriptTag"+tt,type:"TAG",value:_.tag},{name:"script"+tt,type:"TABLE",value:new Table("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Table("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:rt.reqFeatureIndex}].concat(ushortList("featureIndex",rt.featureIndexes)))}].concat(recordList("langSys",nt.langSysRecords,function(it,at){var ot=it.langSys;return[{name:"langSysTag"+at,type:"TAG",value:it.tag},{name:"langSys"+at,type:"TABLE",value:new Table("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:ot.reqFeatureIndex}].concat(ushortList("featureIndex",ot.featureIndexes)))}]})))}]}))}ScriptList.prototype=Object.create(Table.prototype);ScriptList.prototype.constructor=ScriptList;function FeatureList(_e){Table.call(this,"featureListTable",recordList("featureRecord",_e,function(_,tt){var nt=_.feature;return[{name:"featureTag"+tt,type:"TAG",value:_.tag},{name:"feature"+tt,type:"TABLE",value:new Table("featureTable",[{name:"featureParams",type:"USHORT",value:nt.featureParams}].concat(ushortList("lookupListIndex",nt.lookupListIndexes)))}]}))}FeatureList.prototype=Object.create(Table.prototype);FeatureList.prototype.constructor=FeatureList;function LookupList(_e,_){Table.call(this,"lookupListTable",tableList("lookup",_e,function(tt){var nt=_[tt.lookupType];return check.assert(!!nt,"Unable to write GSUB lookup type "+tt.lookupType+" tables."),new Table("lookupTable",[{name:"lookupType",type:"USHORT",value:tt.lookupType},{name:"lookupFlag",type:"USHORT",value:tt.lookupFlag}].concat(tableList("subtable",tt.subtables,nt)))}))}LookupList.prototype=Object.create(Table.prototype);LookupList.prototype.constructor=LookupList;var table={Table,Record:Table,Coverage,ScriptList,FeatureList,LookupList,ushortList,tableList,recordList};function getByte(_e,_){return _e.getUint8(_)}function getUShort(_e,_){return _e.getUint16(_,!1)}function getShort(_e,_){return _e.getInt16(_,!1)}function getULong(_e,_){return _e.getUint32(_,!1)}function getFixed(_e,_){var tt=_e.getInt16(_,!1),nt=_e.getUint16(_+2,!1);return tt+nt/65535}function getTag$2(_e,_){for(var tt="",nt=_;nt<_+4;nt+=1)tt+=String.fromCharCode(_e.getInt8(nt));return tt}function getOffset(_e,_,tt){for(var nt=0,rt=0;rt<tt;rt+=1)nt<<=8,nt+=_e.getUint8(_+rt);return nt}function getBytes(_e,_,tt){for(var nt=[],rt=_;rt<tt;rt+=1)nt.push(_e.getUint8(rt));return nt}function bytesToString(_e){for(var _="",tt=0;tt<_e.length;tt+=1)_+=String.fromCharCode(_e[tt]);return _}var typeOffsets={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Parser$1(_e,_){this.data=_e,this.offset=_,this.relativeOffset=0}Parser$1.prototype.parseByte=function(){var _e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,_e};Parser$1.prototype.parseChar=function(){var _e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,_e};Parser$1.prototype.parseCard8=Parser$1.prototype.parseByte;Parser$1.prototype.parseUShort=function(){var _e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,_e};Parser$1.prototype.parseCard16=Parser$1.prototype.parseUShort;Parser$1.prototype.parseSID=Parser$1.prototype.parseUShort;Parser$1.prototype.parseOffset16=Parser$1.prototype.parseUShort;Parser$1.prototype.parseShort=function(){var _e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,_e};Parser$1.prototype.parseF2Dot14=function(){var _e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,_e};Parser$1.prototype.parseULong=function(){var _e=getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,_e};Parser$1.prototype.parseOffset32=Parser$1.prototype.parseULong;Parser$1.prototype.parseFixed=function(){var _e=getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,_e};Parser$1.prototype.parseString=function(_e){var _=this.data,tt=this.offset+this.relativeOffset,nt="";this.relativeOffset+=_e;for(var rt=0;rt<_e;rt++)nt+=String.fromCharCode(_.getUint8(tt+rt));return nt};Parser$1.prototype.parseTag=function(){return this.parseString(4)};Parser$1.prototype.parseLongDateTime=function(){var _e=getULong(this.data,this.offset+this.relativeOffset+4);return _e-=2082844800,this.relativeOffset+=8,_e};Parser$1.prototype.parseVersion=function(_e){var _=getUShort(this.data,this.offset+this.relativeOffset),tt=getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,_e===void 0&&(_e=4096),_+tt/_e/10};Parser$1.prototype.skip=function(_e,_){_===void 0&&(_=1),this.relativeOffset+=typeOffsets[_e]*_};Parser$1.prototype.parseULongList=function(_e){_e===void 0&&(_e=this.parseULong());for(var _=new Array(_e),tt=this.data,nt=this.offset+this.relativeOffset,rt=0;rt<_e;rt++)_[rt]=tt.getUint32(nt),nt+=4;return this.relativeOffset+=_e*4,_};Parser$1.prototype.parseOffset16List=Parser$1.prototype.parseUShortList=function(_e){_e===void 0&&(_e=this.parseUShort());for(var _=new Array(_e),tt=this.data,nt=this.offset+this.relativeOffset,rt=0;rt<_e;rt++)_[rt]=tt.getUint16(nt),nt+=2;return this.relativeOffset+=_e*2,_};Parser$1.prototype.parseShortList=function(_e){for(var _=new Array(_e),tt=this.data,nt=this.offset+this.relativeOffset,rt=0;rt<_e;rt++)_[rt]=tt.getInt16(nt),nt+=2;return this.relativeOffset+=_e*2,_};Parser$1.prototype.parseByteList=function(_e){for(var _=new Array(_e),tt=this.data,nt=this.offset+this.relativeOffset,rt=0;rt<_e;rt++)_[rt]=tt.getUint8(nt++);return this.relativeOffset+=_e,_};Parser$1.prototype.parseList=function(_e,_){_||(_=_e,_e=this.parseUShort());for(var tt=new Array(_e),nt=0;nt<_e;nt++)tt[nt]=_.call(this);return tt};Parser$1.prototype.parseList32=function(_e,_){_||(_=_e,_e=this.parseULong());for(var tt=new Array(_e),nt=0;nt<_e;nt++)tt[nt]=_.call(this);return tt};Parser$1.prototype.parseRecordList=function(_e,_){_||(_=_e,_e=this.parseUShort());for(var tt=new Array(_e),nt=Object.keys(_),rt=0;rt<_e;rt++){for(var it={},at=0;at<nt.length;at++){var ot=nt[at],st=_[ot];it[ot]=st.call(this)}tt[rt]=it}return tt};Parser$1.prototype.parseRecordList32=function(_e,_){_||(_=_e,_e=this.parseULong());for(var tt=new Array(_e),nt=Object.keys(_),rt=0;rt<_e;rt++){for(var it={},at=0;at<nt.length;at++){var ot=nt[at],st=_[ot];it[ot]=st.call(this)}tt[rt]=it}return tt};Parser$1.prototype.parseStruct=function(_e){if(typeof _e=="function")return _e.call(this);for(var _=Object.keys(_e),tt={},nt=0;nt<_.length;nt++){var rt=_[nt],it=_e[rt];tt[rt]=it.call(this)}return tt};Parser$1.prototype.parseValueRecord=function(_e){if(_e===void 0&&(_e=this.parseUShort()),_e!==0){var _={};return _e&1&&(_.xPlacement=this.parseShort()),_e&2&&(_.yPlacement=this.parseShort()),_e&4&&(_.xAdvance=this.parseShort()),_e&8&&(_.yAdvance=this.parseShort()),_e&16&&(_.xPlaDevice=void 0,this.parseShort()),_e&32&&(_.yPlaDevice=void 0,this.parseShort()),_e&64&&(_.xAdvDevice=void 0,this.parseShort()),_e&128&&(_.yAdvDevice=void 0,this.parseShort()),_}};Parser$1.prototype.parseValueRecordList=function(){for(var _e=this.parseUShort(),_=this.parseUShort(),tt=new Array(_),nt=0;nt<_;nt++)tt[nt]=this.parseValueRecord(_e);return tt};Parser$1.prototype.parsePointer=function(_e){var _=this.parseOffset16();if(_>0)return new Parser$1(this.data,this.offset+_).parseStruct(_e)};Parser$1.prototype.parsePointer32=function(_e){var _=this.parseOffset32();if(_>0)return new Parser$1(this.data,this.offset+_).parseStruct(_e)};Parser$1.prototype.parseListOfLists=function(_e){for(var _=this.parseOffset16List(),tt=_.length,nt=this.relativeOffset,rt=new Array(tt),it=0;it<tt;it++){var at=_[it];if(at===0){rt[it]=void 0;continue}if(this.relativeOffset=at,_e){for(var ot=this.parseOffset16List(),st=new Array(ot.length),lt=0;lt<ot.length;lt++)this.relativeOffset=at+ot[lt],st[lt]=_e.call(this);rt[it]=st}else rt[it]=this.parseUShortList()}return this.relativeOffset=nt,rt};Parser$1.prototype.parseCoverage=function(){var _e=this.offset+this.relativeOffset,_=this.parseUShort(),tt=this.parseUShort();if(_===1)return{format:1,glyphs:this.parseUShortList(tt)};if(_===2){for(var nt=new Array(tt),rt=0;rt<tt;rt++)nt[rt]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:nt}}throw new Error("0x"+_e.toString(16)+": Coverage format must be 1 or 2.")};Parser$1.prototype.parseClassDef=function(){var _e=this.offset+this.relativeOffset,_=this.parseUShort();if(_===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(_===2)return{format:2,ranges:this.parseRecordList({start:Parser$1.uShort,end:Parser$1.uShort,classId:Parser$1.uShort})};throw new Error("0x"+_e.toString(16)+": ClassDef format must be 1 or 2.")};Parser$1.list=function(_e,_){return function(){return this.parseList(_e,_)}};Parser$1.list32=function(_e,_){return function(){return this.parseList32(_e,_)}};Parser$1.recordList=function(_e,_){return function(){return this.parseRecordList(_e,_)}};Parser$1.recordList32=function(_e,_){return function(){return this.parseRecordList32(_e,_)}};Parser$1.pointer=function(_e){return function(){return this.parsePointer(_e)}};Parser$1.pointer32=function(_e){return function(){return this.parsePointer32(_e)}};Parser$1.tag=Parser$1.prototype.parseTag;Parser$1.byte=Parser$1.prototype.parseByte;Parser$1.uShort=Parser$1.offset16=Parser$1.prototype.parseUShort;Parser$1.uShortList=Parser$1.prototype.parseUShortList;Parser$1.uLong=Parser$1.offset32=Parser$1.prototype.parseULong;Parser$1.uLongList=Parser$1.prototype.parseULongList;Parser$1.struct=Parser$1.prototype.parseStruct;Parser$1.coverage=Parser$1.prototype.parseCoverage;Parser$1.classDef=Parser$1.prototype.parseClassDef;var langSysTable={reserved:Parser$1.uShort,reqFeatureIndex:Parser$1.uShort,featureIndexes:Parser$1.uShortList};Parser$1.prototype.parseScriptList=function(){return this.parsePointer(Parser$1.recordList({tag:Parser$1.tag,script:Parser$1.pointer({defaultLangSys:Parser$1.pointer(langSysTable),langSysRecords:Parser$1.recordList({tag:Parser$1.tag,langSys:Parser$1.pointer(langSysTable)})})}))||[]};Parser$1.prototype.parseFeatureList=function(){return this.parsePointer(Parser$1.recordList({tag:Parser$1.tag,feature:Parser$1.pointer({featureParams:Parser$1.offset16,lookupListIndexes:Parser$1.uShortList})}))||[]};Parser$1.prototype.parseLookupList=function(_e){return this.parsePointer(Parser$1.list(Parser$1.pointer(function(){var _=this.parseUShort();check.argument(1<=_&&_<=9,"GPOS/GSUB lookup type "+_+" unknown.");var tt=this.parseUShort(),nt=tt&16;return{lookupType:_,lookupFlag:tt,subtables:this.parseList(Parser$1.pointer(_e[_])),markFilteringSet:nt?this.parseUShort():void 0}})))||[]};Parser$1.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var _e=this.parseUShort(),_=this.parseUShort();check.argument(_e===1&&_<1,"GPOS/GSUB feature variations table unknown.");var tt=this.parseRecordList32({conditionSetOffset:Parser$1.offset32,featureTableSubstitutionOffset:Parser$1.offset32});return tt})||[]};var parse$1={getByte,getCard8:getByte,getUShort,getCard16:getUShort,getShort,getULong,getFixed,getTag:getTag$2,getOffset,getBytes,bytesToString,Parser:Parser$1};function parseCmapTableFormat12(_e,_){_.parseUShort(),_e.length=_.parseULong(),_e.language=_.parseULong();var tt;_e.groupCount=tt=_.parseULong(),_e.glyphIndexMap={};for(var nt=0;nt<tt;nt+=1)for(var rt=_.parseULong(),it=_.parseULong(),at=_.parseULong(),ot=rt;ot<=it;ot+=1)_e.glyphIndexMap[ot]=at,at++}function parseCmapTableFormat4(_e,_,tt,nt,rt){_e.length=_.parseUShort(),_e.language=_.parseUShort();var it;_e.segCount=it=_.parseUShort()>>1,_.skip("uShort",3),_e.glyphIndexMap={};for(var at=new parse$1.Parser(tt,nt+rt+14),ot=new parse$1.Parser(tt,nt+rt+16+it*2),st=new parse$1.Parser(tt,nt+rt+16+it*4),lt=new parse$1.Parser(tt,nt+rt+16+it*6),ct=nt+rt+16+it*8,ut=0;ut<it-1;ut+=1)for(var ft=void 0,pt=at.parseUShort(),gt=ot.parseUShort(),xt=st.parseShort(),yt=lt.parseUShort(),mt=gt;mt<=pt;mt+=1)yt!==0?(ct=lt.offset+lt.relativeOffset-2,ct+=yt,ct+=(mt-gt)*2,ft=parse$1.getUShort(tt,ct),ft!==0&&(ft=ft+xt&65535)):ft=mt+xt&65535,_e.glyphIndexMap[mt]=ft}function parseCmapTable(_e,_){var tt={};tt.version=parse$1.getUShort(_e,_),check.argument(tt.version===0,"cmap table version should be 0."),tt.numTables=parse$1.getUShort(_e,_+2);for(var nt=-1,rt=tt.numTables-1;rt>=0;rt-=1){var it=parse$1.getUShort(_e,_+4+rt*8),at=parse$1.getUShort(_e,_+4+rt*8+2);if(it===3&&(at===0||at===1||at===10)||it===0&&(at===0||at===1||at===2||at===3||at===4)){nt=parse$1.getULong(_e,_+4+rt*8+4);break}}if(nt===-1)throw new Error("No valid cmap sub-tables found.");var ot=new parse$1.Parser(_e,_+nt);if(tt.format=ot.parseUShort(),tt.format===12)parseCmapTableFormat12(tt,ot);else if(tt.format===4)parseCmapTableFormat4(tt,ot,_e,_,nt);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+tt.format+").");return tt}function addSegment(_e,_,tt){_e.segments.push({end:_,start:_,delta:-(_-tt),offset:0,glyphIndex:tt})}function addTerminatorSegment(_e){_e.segments.push({end:65535,start:65535,delta:1,offset:0})}function makeCmapTable(_e){var _=!0,tt;for(tt=_e.length-1;tt>0;tt-=1){var nt=_e.get(tt);if(nt.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),_=!1;break}}var rt=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:_?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:_?12:12+8}];_||(rt=rt.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),rt=rt.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var it=new table.Table("cmap",rt);for(it.segments=[],tt=0;tt<_e.length;tt+=1){for(var at=_e.get(tt),ot=0;ot<at.unicodes.length;ot+=1)addSegment(it,at.unicodes[ot],tt);it.segments=it.segments.sort(function(At,vt){return At.start-vt.start})}addTerminatorSegment(it);var st=it.segments.length,lt=0,ct=[],ut=[],ft=[],pt=[],gt=[],xt=[];for(tt=0;tt<st;tt+=1){var yt=it.segments[tt];yt.end<=65535&&yt.start<=65535?(ct=ct.concat({name:"end_"+tt,type:"USHORT",value:yt.end}),ut=ut.concat({name:"start_"+tt,type:"USHORT",value:yt.start}),ft=ft.concat({name:"idDelta_"+tt,type:"SHORT",value:yt.delta}),pt=pt.concat({name:"idRangeOffset_"+tt,type:"USHORT",value:yt.offset}),yt.glyphId!==void 0&&(gt=gt.concat({name:"glyph_"+tt,type:"USHORT",value:yt.glyphId}))):lt+=1,!_&&yt.glyphIndex!==void 0&&(xt=xt.concat({name:"cmap12Start_"+tt,type:"ULONG",value:yt.start}),xt=xt.concat({name:"cmap12End_"+tt,type:"ULONG",value:yt.end}),xt=xt.concat({name:"cmap12Glyph_"+tt,type:"ULONG",value:yt.glyphIndex}))}if(it.segCountX2=(st-lt)*2,it.searchRange=Math.pow(2,Math.floor(Math.log(st-lt)/Math.log(2)))*2,it.entrySelector=Math.log(it.searchRange/2)/Math.log(2),it.rangeShift=it.segCountX2-it.searchRange,it.fields=it.fields.concat(ct),it.fields.push({name:"reservedPad",type:"USHORT",value:0}),it.fields=it.fields.concat(ut),it.fields=it.fields.concat(ft),it.fields=it.fields.concat(pt),it.fields=it.fields.concat(gt),it.cmap4Length=14+ct.length*2+2+ut.length*2+ft.length*2+pt.length*2+gt.length*2,!_){var mt=16+xt.length*4;it.cmap12Offset=12+2*2+4+it.cmap4Length,it.fields=it.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:mt},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:xt.length/3}]),it.fields=it.fields.concat(xt)}return it}var cmap={parse:parseCmapTable,make:makeCmapTable},cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function DefaultEncoding(_e){this.font=_e}DefaultEncoding.prototype.charToGlyphIndex=function(_e){var _=_e.codePointAt(0),tt=this.font.glyphs;if(tt){for(var nt=0;nt<tt.length;nt+=1)for(var rt=tt.get(nt),it=0;it<rt.unicodes.length;it+=1)if(rt.unicodes[it]===_)return nt}return null};function CffEncoding(_e,_){this.encoding=_e,this.charset=_}CffEncoding.prototype.charToGlyphIndex=function(_e){var _=_e.codePointAt(0),tt=this.encoding[_];return this.charset.indexOf(tt)};function line(_e,_,tt,nt,rt){_e.beginPath(),_e.moveTo(_,tt),_e.lineTo(nt,rt),_e.stroke()}var draw={line};function getPathDefinition(_e,_){var tt=_||new Path;return{configurable:!0,get:function(){return typeof tt=="function"&&(tt=tt()),tt},set:function(nt){tt=nt}}}function Glyph(_e){this.bindConstructorValues(_e)}Glyph.prototype.bindConstructorValues=function(_e){this.index=_e.index||0,this.name=_e.name||null,this.unicode=_e.unicode||void 0,this.unicodes=_e.unicodes||_e.unicode!==void 0?[_e.unicode]:[],"xMin"in _e&&(this.xMin=_e.xMin),"yMin"in _e&&(this.yMin=_e.yMin),"xMax"in _e&&(this.xMax=_e.xMax),"yMax"in _e&&(this.yMax=_e.yMax),"advanceWidth"in _e&&(this.advanceWidth=_e.advanceWidth),Object.defineProperty(this,"path",getPathDefinition(this,_e.path))};Glyph.prototype.addUnicode=function(_e){this.unicodes.length===0&&(this.unicode=_e),this.unicodes.push(_e)};Glyph.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Glyph.prototype.getPath=function(_e,_,tt,nt,rt){_e=_e!==void 0?_e:0,_=_!==void 0?_:0,tt=tt!==void 0?tt:72;var it,at;nt||(nt={});var ot=nt.xScale,st=nt.yScale;if(nt.hinting&&rt&&rt.hinting&&(at=this.path&&rt.hinting.exec(this,tt)),at)it=rt.hinting.getCommands(at),_e=Math.round(_e),_=Math.round(_),ot=st=1;else{it=this.path.commands;var lt=1/(this.path.unitsPerEm||1e3)*tt;ot===void 0&&(ot=lt),st===void 0&&(st=lt)}for(var ct=new Path,ut=0;ut<it.length;ut+=1){var ft=it[ut];ft.type==="M"?ct.moveTo(_e+ft.x*ot,_+-ft.y*st):ft.type==="L"?ct.lineTo(_e+ft.x*ot,_+-ft.y*st):ft.type==="Q"?ct.quadraticCurveTo(_e+ft.x1*ot,_+-ft.y1*st,_e+ft.x*ot,_+-ft.y*st):ft.type==="C"?ct.curveTo(_e+ft.x1*ot,_+-ft.y1*st,_e+ft.x2*ot,_+-ft.y2*st,_e+ft.x*ot,_+-ft.y*st):ft.type==="Z"&&ct.closePath()}return ct};Glyph.prototype.getContours=function(){if(this.points===void 0)return[];for(var _e=[],_=[],tt=0;tt<this.points.length;tt+=1){var nt=this.points[tt];_.push(nt),nt.lastPointOfContour&&(_e.push(_),_=[])}return check.argument(_.length===0,"There are still points left in the current contour."),_e};Glyph.prototype.getMetrics=function(){for(var _e=this.path.commands,_=[],tt=[],nt=0;nt<_e.length;nt+=1){var rt=_e[nt];rt.type!=="Z"&&(_.push(rt.x),tt.push(rt.y)),(rt.type==="Q"||rt.type==="C")&&(_.push(rt.x1),tt.push(rt.y1)),rt.type==="C"&&(_.push(rt.x2),tt.push(rt.y2))}var it={xMin:Math.min.apply(null,_),yMin:Math.min.apply(null,tt),xMax:Math.max.apply(null,_),yMax:Math.max.apply(null,tt),leftSideBearing:this.leftSideBearing};return isFinite(it.xMin)||(it.xMin=0),isFinite(it.xMax)||(it.xMax=this.advanceWidth),isFinite(it.yMin)||(it.yMin=0),isFinite(it.yMax)||(it.yMax=0),it.rightSideBearing=this.advanceWidth-it.leftSideBearing-(it.xMax-it.xMin),it};Glyph.prototype.draw=function(_e,_,tt,nt,rt){this.getPath(_,tt,nt,rt).draw(_e)};Glyph.prototype.drawPoints=function(_e,_,tt,nt){function rt(ut,ft,pt,gt){_e.beginPath();for(var xt=0;xt<ut.length;xt+=1)_e.moveTo(ft+ut[xt].x*gt,pt+ut[xt].y*gt),_e.arc(ft+ut[xt].x*gt,pt+ut[xt].y*gt,2,0,Math.PI*2,!1);_e.closePath(),_e.fill()}_=_!==void 0?_:0,tt=tt!==void 0?tt:0,nt=nt!==void 0?nt:24;for(var it=1/this.path.unitsPerEm*nt,at=[],ot=[],st=this.path,lt=0;lt<st.commands.length;lt+=1){var ct=st.commands[lt];ct.x!==void 0&&at.push({x:ct.x,y:-ct.y}),ct.x1!==void 0&&ot.push({x:ct.x1,y:-ct.y1}),ct.x2!==void 0&&ot.push({x:ct.x2,y:-ct.y2})}_e.fillStyle="blue",rt(at,_,tt,it),_e.fillStyle="red",rt(ot,_,tt,it)};Glyph.prototype.drawMetrics=function(_e,_,tt,nt){var rt;_=_!==void 0?_:0,tt=tt!==void 0?tt:0,nt=nt!==void 0?nt:24,rt=1/this.path.unitsPerEm*nt,_e.lineWidth=1,_e.strokeStyle="black",draw.line(_e,_,-1e4,_,1e4),draw.line(_e,-1e4,tt,1e4,tt);var it=this.xMin||0,at=this.yMin||0,ot=this.xMax||0,st=this.yMax||0,lt=this.advanceWidth||0;_e.strokeStyle="blue",draw.line(_e,_+it*rt,-1e4,_+it*rt,1e4),draw.line(_e,_+ot*rt,-1e4,_+ot*rt,1e4),draw.line(_e,-1e4,tt+-at*rt,1e4,tt+-at*rt),draw.line(_e,-1e4,tt+-st*rt,1e4,tt+-st*rt),_e.strokeStyle="green",draw.line(_e,_+lt*rt,-1e4,_+lt*rt,1e4)};function defineDependentProperty(_e,_,tt){Object.defineProperty(_e,_,{get:function(){return _e.path,_e[tt]},set:function(nt){_e[tt]=nt},enumerable:!0,configurable:!0})}function GlyphSet(_e,_){if(this.font=_e,this.glyphs={},Array.isArray(_))for(var tt=0;tt<_.length;tt++){var nt=_[tt];nt.path.unitsPerEm=_e.unitsPerEm,this.glyphs[tt]=nt}this.length=_&&_.length||0}GlyphSet.prototype.get=function(_e){if(this.glyphs[_e]===void 0){this.font._push(_e),typeof this.glyphs[_e]=="function"&&(this.glyphs[_e]=this.glyphs[_e]());var _=this.glyphs[_e],tt=this.font._IndexToUnicodeMap[_e];if(tt)for(var nt=0;nt<tt.unicodes.length;nt++)_.addUnicode(tt.unicodes[nt]);this.font.cffEncoding?this.font.isCIDFont?_.name="gid"+_e:_.name=this.font.cffEncoding.charset[_e]:this.font.glyphNames.names&&(_.name=this.font.glyphNames.glyphIndexToName(_e)),this.glyphs[_e].advanceWidth=this.font._hmtxTableData[_e].advanceWidth,this.glyphs[_e].leftSideBearing=this.font._hmtxTableData[_e].leftSideBearing}else typeof this.glyphs[_e]=="function"&&(this.glyphs[_e]=this.glyphs[_e]());return this.glyphs[_e]};GlyphSet.prototype.push=function(_e,_){this.glyphs[_e]=_,this.length++};function glyphLoader(_e,_){return new Glyph({index:_,font:_e})}function ttfGlyphLoader(_e,_,tt,nt,rt,it){return function(){var at=new Glyph({index:_,font:_e});return at.path=function(){tt(at,nt,rt);var ot=it(_e.glyphs,at);return ot.unitsPerEm=_e.unitsPerEm,ot},defineDependentProperty(at,"xMin","_xMin"),defineDependentProperty(at,"xMax","_xMax"),defineDependentProperty(at,"yMin","_yMin"),defineDependentProperty(at,"yMax","_yMax"),at}}function cffGlyphLoader(_e,_,tt,nt){return function(){var rt=new Glyph({index:_,font:_e});return rt.path=function(){var it=tt(_e,rt,nt);return it.unitsPerEm=_e.unitsPerEm,it},rt}}var glyphset={GlyphSet,glyphLoader,ttfGlyphLoader,cffGlyphLoader};function equals(_e,_){if(_e===_)return!0;if(Array.isArray(_e)&&Array.isArray(_)){if(_e.length!==_.length)return!1;for(var tt=0;tt<_e.length;tt+=1)if(!equals(_e[tt],_[tt]))return!1;return!0}else return!1}function calcCFFSubroutineBias(_e){var _;return _e.length<1240?_=107:_e.length<33900?_=1131:_=32768,_}function parseCFFIndex(_e,_,tt){var nt=[],rt=[],it=parse$1.getCard16(_e,_),at,ot;if(it!==0){var st=parse$1.getByte(_e,_+2);at=_+(it+1)*st+2;for(var lt=_+3,ct=0;ct<it+1;ct+=1)nt.push(parse$1.getOffset(_e,lt,st)),lt+=st;ot=at+nt[it]}else ot=_+2;for(var ut=0;ut<nt.length-1;ut+=1){var ft=parse$1.getBytes(_e,at+nt[ut],at+nt[ut+1]);tt&&(ft=tt(ft)),rt.push(ft)}return{objects:rt,startOffset:_,endOffset:ot}}function parseCFFIndexLowMemory(_e,_){var tt=[],nt=parse$1.getCard16(_e,_),rt,it;if(nt!==0){var at=parse$1.getByte(_e,_+2);rt=_+(nt+1)*at+2;for(var ot=_+3,st=0;st<nt+1;st+=1)tt.push(parse$1.getOffset(_e,ot,at)),ot+=at;it=rt+tt[nt]}else it=_+2;return{offsets:tt,startOffset:_,endOffset:it}}function getCffIndexObject(_e,_,tt,nt,rt){var it=parse$1.getCard16(tt,nt),at=0;if(it!==0){var ot=parse$1.getByte(tt,nt+2);at=nt+(it+1)*ot+2}var st=parse$1.getBytes(tt,at+_[_e],at+_[_e+1]);return rt&&(st=rt(st)),st}function parseFloatOperand(_e){for(var _="",tt=15,nt=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var rt=_e.parseByte(),it=rt>>4,at=rt&15;if(it===tt||(_+=nt[it],at===tt))break;_+=nt[at]}return parseFloat(_)}function parseOperand(_e,_){var tt,nt,rt,it;if(_===28)return tt=_e.parseByte(),nt=_e.parseByte(),tt<<8|nt;if(_===29)return tt=_e.parseByte(),nt=_e.parseByte(),rt=_e.parseByte(),it=_e.parseByte(),tt<<24|nt<<16|rt<<8|it;if(_===30)return parseFloatOperand(_e);if(_>=32&&_<=246)return _-139;if(_>=247&&_<=250)return tt=_e.parseByte(),(_-247)*256+tt+108;if(_>=251&&_<=254)return tt=_e.parseByte(),-(_-251)*256-tt-108;throw new Error("Invalid b0 "+_)}function entriesToObject(_e){for(var _={},tt=0;tt<_e.length;tt+=1){var nt=_e[tt][0],rt=_e[tt][1],it=void 0;if(rt.length===1?it=rt[0]:it=rt,_.hasOwnProperty(nt)&&!isNaN(_[nt]))throw new Error("Object "+_+" already has key "+nt);_[nt]=it}return _}function parseCFFDict(_e,_,tt){_=_!==void 0?_:0;var nt=new parse$1.Parser(_e,_),rt=[],it=[];for(tt=tt!==void 0?tt:_e.length;nt.relativeOffset<tt;){var at=nt.parseByte();at<=21?(at===12&&(at=1200+nt.parseByte()),rt.push([at,it]),it=[]):it.push(parseOperand(nt,at))}return entriesToObject(rt)}function getCFFString(_e,_){return _<=390?_=cffStandardStrings[_]:_=_e[_-391],_}function interpretDict(_e,_,tt){for(var nt={},rt,it=0;it<_.length;it+=1){var at=_[it];if(Array.isArray(at.type)){var ot=[];ot.length=at.type.length;for(var st=0;st<at.type.length;st++)rt=_e[at.op]!==void 0?_e[at.op][st]:void 0,rt===void 0&&(rt=at.value!==void 0&&at.value[st]!==void 0?at.value[st]:null),at.type[st]==="SID"&&(rt=getCFFString(tt,rt)),ot[st]=rt;nt[at.name]=ot}else rt=_e[at.op],rt===void 0&&(rt=at.value!==void 0?at.value:null),at.type==="SID"&&(rt=getCFFString(tt,rt)),nt[at.name]=rt}return nt}function parseCFFHeader(_e,_){var tt={};return tt.formatMajor=parse$1.getCard8(_e,_),tt.formatMinor=parse$1.getCard8(_e,_+1),tt.size=parse$1.getCard8(_e,_+2),tt.offsetSize=parse$1.getCard8(_e,_+3),tt.startOffset=_,tt.endOffset=_+4,tt}var TOP_DICT_META=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],PRIVATE_DICT_META=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function parseCFFTopDict(_e,_){var tt=parseCFFDict(_e,0,_e.byteLength);return interpretDict(tt,TOP_DICT_META,_)}function parseCFFPrivateDict(_e,_,tt,nt){var rt=parseCFFDict(_e,_,tt);return interpretDict(rt,PRIVATE_DICT_META,nt)}function gatherCFFTopDicts(_e,_,tt,nt){for(var rt=[],it=0;it<tt.length;it+=1){var at=new DataView(new Uint8Array(tt[it]).buffer),ot=parseCFFTopDict(at,nt);ot._subrs=[],ot._subrsBias=0,ot._defaultWidthX=0,ot._nominalWidthX=0;var st=ot.private[0],lt=ot.private[1];if(st!==0&&lt!==0){var ct=parseCFFPrivateDict(_e,lt+_,st,nt);if(ot._defaultWidthX=ct.defaultWidthX,ot._nominalWidthX=ct.nominalWidthX,ct.subrs!==0){var ut=lt+ct.subrs,ft=parseCFFIndex(_e,ut+_);ot._subrs=ft.objects,ot._subrsBias=calcCFFSubroutineBias(ot._subrs)}ot._privateDict=ct}rt.push(ot)}return rt}function parseCFFCharset(_e,_,tt,nt){var rt,it,at=new parse$1.Parser(_e,_);tt-=1;var ot=[".notdef"],st=at.parseCard8();if(st===0)for(var lt=0;lt<tt;lt+=1)rt=at.parseSID(),ot.push(getCFFString(nt,rt));else if(st===1)for(;ot.length<=tt;){rt=at.parseSID(),it=at.parseCard8();for(var ct=0;ct<=it;ct+=1)ot.push(getCFFString(nt,rt)),rt+=1}else if(st===2)for(;ot.length<=tt;){rt=at.parseSID(),it=at.parseCard16();for(var ut=0;ut<=it;ut+=1)ot.push(getCFFString(nt,rt)),rt+=1}else throw new Error("Unknown charset format "+st);return ot}function parseCFFEncoding(_e,_,tt){var nt,rt={},it=new parse$1.Parser(_e,_),at=it.parseCard8();if(at===0)for(var ot=it.parseCard8(),st=0;st<ot;st+=1)nt=it.parseCard8(),rt[nt]=st;else if(at===1){var lt=it.parseCard8();nt=1;for(var ct=0;ct<lt;ct+=1)for(var ut=it.parseCard8(),ft=it.parseCard8(),pt=ut;pt<=ut+ft;pt+=1)rt[pt]=nt,nt+=1}else throw new Error("Unknown encoding format "+at);return new CffEncoding(rt,tt)}function parseCFFCharstring(_e,_,tt){var nt,rt,it,at,ot=new Path,st=[],lt=0,ct=!1,ut=!1,ft=0,pt=0,gt,xt,yt,mt;if(_e.isCIDFont){var At=_e.tables.cff.topDict._fdSelect[_.index],vt=_e.tables.cff.topDict._fdArray[At];gt=vt._subrs,xt=vt._subrsBias,yt=vt._defaultWidthX,mt=vt._nominalWidthX}else gt=_e.tables.cff.topDict._subrs,xt=_e.tables.cff.topDict._subrsBias,yt=_e.tables.cff.topDict._defaultWidthX,mt=_e.tables.cff.topDict._nominalWidthX;var Et=yt;function Ct(It,wt){ut&&ot.closePath(),ot.moveTo(It,wt),ut=!0}function Tt(){var It;It=st.length%2!==0,It&&!ct&&(Et=st.shift()+mt),lt+=st.length>>1,st.length=0,ct=!0}function bt(It){for(var wt,Rt,Ft,Ut,Gt,Ht,jt,Xt,Jt,Dt,zt,$t,Lt=0;Lt<It.length;){var Vt=It[Lt];switch(Lt+=1,Vt){case 1:Tt();break;case 3:Tt();break;case 4:st.length>1&&!ct&&(Et=st.shift()+mt,ct=!0),pt+=st.pop(),Ct(ft,pt);break;case 5:for(;st.length>0;)ft+=st.shift(),pt+=st.shift(),ot.lineTo(ft,pt);break;case 6:for(;st.length>0&&(ft+=st.shift(),ot.lineTo(ft,pt),st.length!==0);)pt+=st.shift(),ot.lineTo(ft,pt);break;case 7:for(;st.length>0&&(pt+=st.shift(),ot.lineTo(ft,pt),st.length!==0);)ft+=st.shift(),ot.lineTo(ft,pt);break;case 8:for(;st.length>0;)nt=ft+st.shift(),rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),ft=it+st.shift(),pt=at+st.shift(),ot.curveTo(nt,rt,it,at,ft,pt);break;case 10:Gt=st.pop()+xt,Ht=gt[Gt],Ht&&bt(Ht);break;case 11:return;case 12:switch(Vt=It[Lt],Lt+=1,Vt){case 35:nt=ft+st.shift(),rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),jt=it+st.shift(),Xt=at+st.shift(),Jt=jt+st.shift(),Dt=Xt+st.shift(),zt=Jt+st.shift(),$t=Dt+st.shift(),ft=zt+st.shift(),pt=$t+st.shift(),st.shift(),ot.curveTo(nt,rt,it,at,jt,Xt),ot.curveTo(Jt,Dt,zt,$t,ft,pt);break;case 34:nt=ft+st.shift(),rt=pt,it=nt+st.shift(),at=rt+st.shift(),jt=it+st.shift(),Xt=at,Jt=jt+st.shift(),Dt=at,zt=Jt+st.shift(),$t=pt,ft=zt+st.shift(),ot.curveTo(nt,rt,it,at,jt,Xt),ot.curveTo(Jt,Dt,zt,$t,ft,pt);break;case 36:nt=ft+st.shift(),rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),jt=it+st.shift(),Xt=at,Jt=jt+st.shift(),Dt=at,zt=Jt+st.shift(),$t=Dt+st.shift(),ft=zt+st.shift(),ot.curveTo(nt,rt,it,at,jt,Xt),ot.curveTo(Jt,Dt,zt,$t,ft,pt);break;case 37:nt=ft+st.shift(),rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),jt=it+st.shift(),Xt=at+st.shift(),Jt=jt+st.shift(),Dt=Xt+st.shift(),zt=Jt+st.shift(),$t=Dt+st.shift(),Math.abs(zt-ft)>Math.abs($t-pt)?ft=zt+st.shift():pt=$t+st.shift(),ot.curveTo(nt,rt,it,at,jt,Xt),ot.curveTo(Jt,Dt,zt,$t,ft,pt);break;default:console.log("Glyph "+_.index+": unknown operator 1200"+Vt),st.length=0}break;case 14:st.length>0&&!ct&&(Et=st.shift()+mt,ct=!0),ut&&(ot.closePath(),ut=!1);break;case 18:Tt();break;case 19:case 20:Tt(),Lt+=lt+7>>3;break;case 21:st.length>2&&!ct&&(Et=st.shift()+mt,ct=!0),pt+=st.pop(),ft+=st.pop(),Ct(ft,pt);break;case 22:st.length>1&&!ct&&(Et=st.shift()+mt,ct=!0),ft+=st.pop(),Ct(ft,pt);break;case 23:Tt();break;case 24:for(;st.length>2;)nt=ft+st.shift(),rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),ft=it+st.shift(),pt=at+st.shift(),ot.curveTo(nt,rt,it,at,ft,pt);ft+=st.shift(),pt+=st.shift(),ot.lineTo(ft,pt);break;case 25:for(;st.length>6;)ft+=st.shift(),pt+=st.shift(),ot.lineTo(ft,pt);nt=ft+st.shift(),rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),ft=it+st.shift(),pt=at+st.shift(),ot.curveTo(nt,rt,it,at,ft,pt);break;case 26:for(st.length%2&&(ft+=st.shift());st.length>0;)nt=ft,rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),ft=it,pt=at+st.shift(),ot.curveTo(nt,rt,it,at,ft,pt);break;case 27:for(st.length%2&&(pt+=st.shift());st.length>0;)nt=ft+st.shift(),rt=pt,it=nt+st.shift(),at=rt+st.shift(),ft=it+st.shift(),pt=at,ot.curveTo(nt,rt,it,at,ft,pt);break;case 28:wt=It[Lt],Rt=It[Lt+1],st.push((wt<<24|Rt<<16)>>16),Lt+=2;break;case 29:Gt=st.pop()+_e.gsubrsBias,Ht=_e.gsubrs[Gt],Ht&&bt(Ht);break;case 30:for(;st.length>0&&(nt=ft,rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),ft=it+st.shift(),pt=at+(st.length===1?st.shift():0),ot.curveTo(nt,rt,it,at,ft,pt),st.length!==0);)nt=ft+st.shift(),rt=pt,it=nt+st.shift(),at=rt+st.shift(),pt=at+st.shift(),ft=it+(st.length===1?st.shift():0),ot.curveTo(nt,rt,it,at,ft,pt);break;case 31:for(;st.length>0&&(nt=ft+st.shift(),rt=pt,it=nt+st.shift(),at=rt+st.shift(),pt=at+st.shift(),ft=it+(st.length===1?st.shift():0),ot.curveTo(nt,rt,it,at,ft,pt),st.length!==0);)nt=ft,rt=pt+st.shift(),it=nt+st.shift(),at=rt+st.shift(),ft=it+st.shift(),pt=at+(st.length===1?st.shift():0),ot.curveTo(nt,rt,it,at,ft,pt);break;default:Vt<32?console.log("Glyph "+_.index+": unknown operator "+Vt):Vt<247?st.push(Vt-139):Vt<251?(wt=It[Lt],Lt+=1,st.push((Vt-247)*256+wt+108)):Vt<255?(wt=It[Lt],Lt+=1,st.push(-(Vt-251)*256-wt-108)):(wt=It[Lt],Rt=It[Lt+1],Ft=It[Lt+2],Ut=It[Lt+3],Lt+=4,st.push((wt<<24|Rt<<16|Ft<<8|Ut)/65536))}}}return bt(tt),_.advanceWidth=Et,ot}function parseCFFFDSelect(_e,_,tt,nt){var rt=[],it,at=new parse$1.Parser(_e,_),ot=at.parseCard8();if(ot===0)for(var st=0;st<tt;st++){if(it=at.parseCard8(),it>=nt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+it+" (FD count "+nt+")");rt.push(it)}else if(ot===3){var lt=at.parseCard16(),ct=at.parseCard16();if(ct!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+ct);for(var ut,ft=0;ft<lt;ft++){if(it=at.parseCard8(),ut=at.parseCard16(),it>=nt)throw new Error("CFF table CID Font FDSelect has bad FD index value "+it+" (FD count "+nt+")");if(ut>tt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+ut);for(;ct<ut;ct++)rt.push(it);ct=ut}if(ut!==tt)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+ut)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+ot);return rt}function parseCFFTable(_e,_,tt,nt){tt.tables.cff={};var rt=parseCFFHeader(_e,_),it=parseCFFIndex(_e,rt.endOffset,parse$1.bytesToString),at=parseCFFIndex(_e,it.endOffset),ot=parseCFFIndex(_e,at.endOffset,parse$1.bytesToString),st=parseCFFIndex(_e,ot.endOffset);tt.gsubrs=st.objects,tt.gsubrsBias=calcCFFSubroutineBias(tt.gsubrs);var lt=gatherCFFTopDicts(_e,_,at.objects,ot.objects);if(lt.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+lt.length);var ct=lt[0];if(tt.tables.cff.topDict=ct,ct._privateDict&&(tt.defaultWidthX=ct._privateDict.defaultWidthX,tt.nominalWidthX=ct._privateDict.nominalWidthX),ct.ros[0]!==void 0&&ct.ros[1]!==void 0&&(tt.isCIDFont=!0),tt.isCIDFont){var ut=ct.fdArray,ft=ct.fdSelect;if(ut===0||ft===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");ut+=_;var pt=parseCFFIndex(_e,ut),gt=gatherCFFTopDicts(_e,_,pt.objects,ot.objects);ct._fdArray=gt,ft+=_,ct._fdSelect=parseCFFFDSelect(_e,ft,tt.numGlyphs,gt.length)}var xt=_+ct.private[1],yt=parseCFFPrivateDict(_e,xt,ct.private[0],ot.objects);if(tt.defaultWidthX=yt.defaultWidthX,tt.nominalWidthX=yt.nominalWidthX,yt.subrs!==0){var mt=xt+yt.subrs,At=parseCFFIndex(_e,mt);tt.subrs=At.objects,tt.subrsBias=calcCFFSubroutineBias(tt.subrs)}else tt.subrs=[],tt.subrsBias=0;var vt;nt.lowMemory?(vt=parseCFFIndexLowMemory(_e,_+ct.charStrings),tt.nGlyphs=vt.offsets.length):(vt=parseCFFIndex(_e,_+ct.charStrings),tt.nGlyphs=vt.objects.length);var Et=parseCFFCharset(_e,_+ct.charset,tt.nGlyphs,ot.objects);if(ct.encoding===0?tt.cffEncoding=new CffEncoding(cffStandardEncoding,Et):ct.encoding===1?tt.cffEncoding=new CffEncoding(cffExpertEncoding,Et):tt.cffEncoding=parseCFFEncoding(_e,_+ct.encoding,Et),tt.encoding=tt.encoding||tt.cffEncoding,tt.glyphs=new glyphset.GlyphSet(tt),nt.lowMemory)tt._push=function(bt){var It=getCffIndexObject(bt,vt.offsets,_e,_+ct.charStrings);tt.glyphs.push(bt,glyphset.cffGlyphLoader(tt,bt,parseCFFCharstring,It))};else for(var Ct=0;Ct<tt.nGlyphs;Ct+=1){var Tt=vt.objects[Ct];tt.glyphs.push(Ct,glyphset.cffGlyphLoader(tt,Ct,parseCFFCharstring,Tt))}}function encodeString(_e,_){var tt,nt=cffStandardStrings.indexOf(_e);return nt>=0&&(tt=nt),nt=_.indexOf(_e),nt>=0?tt=nt+cffStandardStrings.length:(tt=cffStandardStrings.length+_.length,_.push(_e)),tt}function makeHeader(){return new table.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function makeNameIndex(_e){var _=new table.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);_.names=[];for(var tt=0;tt<_e.length;tt+=1)_.names.push({name:"name_"+tt,type:"NAME",value:_e[tt]});return _}function makeDict(_e,_,tt){for(var nt={},rt=0;rt<_e.length;rt+=1){var it=_e[rt],at=_[it.name];at!==void 0&&!equals(at,it.value)&&(it.type==="SID"&&(at=encodeString(at,tt)),nt[it.op]={name:it.name,type:it.type,value:at})}return nt}function makeTopDict(_e,_){var tt=new table.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return tt.dict=makeDict(TOP_DICT_META,_e,_),tt}function makeTopDictIndex(_e){var _=new table.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return _.topDicts=[{name:"topDict_0",type:"TABLE",value:_e}],_}function makeStringIndex(_e){var _=new table.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);_.strings=[];for(var tt=0;tt<_e.length;tt+=1)_.strings.push({name:"string_"+tt,type:"STRING",value:_e[tt]});return _}function makeGlobalSubrIndex(){return new table.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function makeCharsets(_e,_){for(var tt=new table.Record("Charsets",[{name:"format",type:"Card8",value:0}]),nt=0;nt<_e.length;nt+=1){var rt=_e[nt],it=encodeString(rt,_);tt.fields.push({name:"glyph_"+nt,type:"SID",value:it})}return tt}function glyphToOps(_e){var _=[],tt=_e.path;_.push({name:"width",type:"NUMBER",value:_e.advanceWidth});for(var nt=0,rt=0,it=0;it<tt.commands.length;it+=1){var at=void 0,ot=void 0,st=tt.commands[it];if(st.type==="Q"){var lt=.3333333333333333,ct=2/3;st={type:"C",x:st.x,y:st.y,x1:Math.round(lt*nt+ct*st.x1),y1:Math.round(lt*rt+ct*st.y1),x2:Math.round(lt*st.x+ct*st.x1),y2:Math.round(lt*st.y+ct*st.y1)}}if(st.type==="M")at=Math.round(st.x-nt),ot=Math.round(st.y-rt),_.push({name:"dx",type:"NUMBER",value:at}),_.push({name:"dy",type:"NUMBER",value:ot}),_.push({name:"rmoveto",type:"OP",value:21}),nt=Math.round(st.x),rt=Math.round(st.y);else if(st.type==="L")at=Math.round(st.x-nt),ot=Math.round(st.y-rt),_.push({name:"dx",type:"NUMBER",value:at}),_.push({name:"dy",type:"NUMBER",value:ot}),_.push({name:"rlineto",type:"OP",value:5}),nt=Math.round(st.x),rt=Math.round(st.y);else if(st.type==="C"){var ut=Math.round(st.x1-nt),ft=Math.round(st.y1-rt),pt=Math.round(st.x2-st.x1),gt=Math.round(st.y2-st.y1);at=Math.round(st.x-st.x2),ot=Math.round(st.y-st.y2),_.push({name:"dx1",type:"NUMBER",value:ut}),_.push({name:"dy1",type:"NUMBER",value:ft}),_.push({name:"dx2",type:"NUMBER",value:pt}),_.push({name:"dy2",type:"NUMBER",value:gt}),_.push({name:"dx",type:"NUMBER",value:at}),_.push({name:"dy",type:"NUMBER",value:ot}),_.push({name:"rrcurveto",type:"OP",value:8}),nt=Math.round(st.x),rt=Math.round(st.y)}}return _.push({name:"endchar",type:"OP",value:14}),_}function makeCharStringsIndex(_e){for(var _=new table.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),tt=0;tt<_e.length;tt+=1){var nt=_e.get(tt),rt=glyphToOps(nt);_.charStrings.push({name:nt.name,type:"CHARSTRING",value:rt})}return _}function makePrivateDict(_e,_){var tt=new table.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return tt.dict=makeDict(PRIVATE_DICT_META,_e,_),tt}function makeCFFTable(_e,_){for(var tt=new table.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),nt=1/_.unitsPerEm,rt={version:_.version,fullName:_.fullName,familyName:_.familyName,weight:_.weightName,fontBBox:_.fontBBox||[0,0,0,0],fontMatrix:[nt,0,0,nt,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},it={},at=[],ot,st=1;st<_e.length;st+=1)ot=_e.get(st),at.push(ot.name);var lt=[];tt.header=makeHeader(),tt.nameIndex=makeNameIndex([_.postScriptName]);var ct=makeTopDict(rt,lt);tt.topDictIndex=makeTopDictIndex(ct),tt.globalSubrIndex=makeGlobalSubrIndex(),tt.charsets=makeCharsets(at,lt),tt.charStringsIndex=makeCharStringsIndex(_e),tt.privateDict=makePrivateDict(it,lt),tt.stringIndex=makeStringIndex(lt);var ut=tt.header.sizeOf()+tt.nameIndex.sizeOf()+tt.topDictIndex.sizeOf()+tt.stringIndex.sizeOf()+tt.globalSubrIndex.sizeOf();return rt.charset=ut,rt.encoding=0,rt.charStrings=rt.charset+tt.charsets.sizeOf(),rt.private[1]=rt.charStrings+tt.charStringsIndex.sizeOf(),ct=makeTopDict(rt,lt),tt.topDictIndex=makeTopDictIndex(ct),tt}var cff={parse:parseCFFTable,make:makeCFFTable};function parseHeadTable(_e,_){var tt={},nt=new parse$1.Parser(_e,_);return tt.version=nt.parseVersion(),tt.fontRevision=Math.round(nt.parseFixed()*1e3)/1e3,tt.checkSumAdjustment=nt.parseULong(),tt.magicNumber=nt.parseULong(),check.argument(tt.magicNumber===1594834165,"Font header has wrong magic number."),tt.flags=nt.parseUShort(),tt.unitsPerEm=nt.parseUShort(),tt.created=nt.parseLongDateTime(),tt.modified=nt.parseLongDateTime(),tt.xMin=nt.parseShort(),tt.yMin=nt.parseShort(),tt.xMax=nt.parseShort(),tt.yMax=nt.parseShort(),tt.macStyle=nt.parseUShort(),tt.lowestRecPPEM=nt.parseUShort(),tt.fontDirectionHint=nt.parseShort(),tt.indexToLocFormat=nt.parseShort(),tt.glyphDataFormat=nt.parseShort(),tt}function makeHeadTable(_e){var _=Math.round(new Date().getTime()/1e3)+2082844800,tt=_;return _e.createdTimestamp&&(tt=_e.createdTimestamp+2082844800),new table.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:tt},{name:"modified",type:"LONGDATETIME",value:_},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],_e)}var head$1={parse:parseHeadTable,make:makeHeadTable};function parseHheaTable(_e,_){var tt={},nt=new parse$1.Parser(_e,_);return tt.version=nt.parseVersion(),tt.ascender=nt.parseShort(),tt.descender=nt.parseShort(),tt.lineGap=nt.parseShort(),tt.advanceWidthMax=nt.parseUShort(),tt.minLeftSideBearing=nt.parseShort(),tt.minRightSideBearing=nt.parseShort(),tt.xMaxExtent=nt.parseShort(),tt.caretSlopeRise=nt.parseShort(),tt.caretSlopeRun=nt.parseShort(),tt.caretOffset=nt.parseShort(),nt.relativeOffset+=8,tt.metricDataFormat=nt.parseShort(),tt.numberOfHMetrics=nt.parseUShort(),tt}function makeHheaTable(_e){return new table.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],_e)}var hhea={parse:parseHheaTable,make:makeHheaTable};function parseHmtxTableAll(_e,_,tt,nt,rt){for(var it,at,ot=new parse$1.Parser(_e,_),st=0;st<nt;st+=1){st<tt&&(it=ot.parseUShort(),at=ot.parseShort());var lt=rt.get(st);lt.advanceWidth=it,lt.leftSideBearing=at}}function parseHmtxTableOnLowMemory(_e,_,tt,nt,rt){_e._hmtxTableData={};for(var it,at,ot=new parse$1.Parser(_,tt),st=0;st<rt;st+=1)st<nt&&(it=ot.parseUShort(),at=ot.parseShort()),_e._hmtxTableData[st]={advanceWidth:it,leftSideBearing:at}}function parseHmtxTable(_e,_,tt,nt,rt,it,at){at.lowMemory?parseHmtxTableOnLowMemory(_e,_,tt,nt,rt):parseHmtxTableAll(_,tt,nt,rt,it)}function makeHmtxTable(_e){for(var _=new table.Table("hmtx",[]),tt=0;tt<_e.length;tt+=1){var nt=_e.get(tt),rt=nt.advanceWidth||0,it=nt.leftSideBearing||0;_.fields.push({name:"advanceWidth_"+tt,type:"USHORT",value:rt}),_.fields.push({name:"leftSideBearing_"+tt,type:"SHORT",value:it})}return _}var hmtx={parse:parseHmtxTable,make:makeHmtxTable};function makeLtagTable(_e){for(var _=new table.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:_e.length}]),tt="",nt=12+_e.length*4,rt=0;rt<_e.length;++rt){var it=tt.indexOf(_e[rt]);it<0&&(it=tt.length,tt+=_e[rt]),_.fields.push({name:"offset "+rt,type:"USHORT",value:nt+it}),_.fields.push({name:"length "+rt,type:"USHORT",value:_e[rt].length})}return _.fields.push({name:"stringPool",type:"CHARARRAY",value:tt}),_}function parseLtagTable(_e,_){var tt=new parse$1.Parser(_e,_),nt=tt.parseULong();check.argument(nt===1,"Unsupported ltag table version."),tt.skip("uLong",1);for(var rt=tt.parseULong(),it=[],at=0;at<rt;at++){for(var ot="",st=_+tt.parseUShort(),lt=tt.parseUShort(),ct=st;ct<st+lt;++ct)ot+=String.fromCharCode(_e.getInt8(ct));it.push(ot)}return it}var ltag={make:makeLtagTable,parse:parseLtagTable};function parseMaxpTable(_e,_){var tt={},nt=new parse$1.Parser(_e,_);return tt.version=nt.parseVersion(),tt.numGlyphs=nt.parseUShort(),tt.version===1&&(tt.maxPoints=nt.parseUShort(),tt.maxContours=nt.parseUShort(),tt.maxCompositePoints=nt.parseUShort(),tt.maxCompositeContours=nt.parseUShort(),tt.maxZones=nt.parseUShort(),tt.maxTwilightPoints=nt.parseUShort(),tt.maxStorage=nt.parseUShort(),tt.maxFunctionDefs=nt.parseUShort(),tt.maxInstructionDefs=nt.parseUShort(),tt.maxStackElements=nt.parseUShort(),tt.maxSizeOfInstructions=nt.parseUShort(),tt.maxComponentElements=nt.parseUShort(),tt.maxComponentDepth=nt.parseUShort()),tt}function makeMaxpTable(_e){return new table.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:_e}])}var maxp={parse:parseMaxpTable,make:makeMaxpTable},nameTableNames=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],macLanguages={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},macLanguageToScript={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},windowsLanguages={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function getLanguageCode(_e,_,tt){switch(_e){case 0:if(_===65535)return"und";if(tt)return tt[_];break;case 1:return macLanguages[_];case 3:return windowsLanguages[_]}}var utf16="utf-16",macScriptEncodings={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},macLanguageEncodings={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function getEncoding(_e,_,tt){switch(_e){case 0:return utf16;case 1:return macLanguageEncodings[tt]||macScriptEncodings[_];case 3:if(_===1||_===10)return utf16;break}}function parseNameTable(_e,_,tt){for(var nt={},rt=new parse$1.Parser(_e,_),it=rt.parseUShort(),at=rt.parseUShort(),ot=rt.offset+rt.parseUShort(),st=0;st<at;st++){var lt=rt.parseUShort(),ct=rt.parseUShort(),ut=rt.parseUShort(),ft=rt.parseUShort(),pt=nameTableNames[ft]||ft,gt=rt.parseUShort(),xt=rt.parseUShort(),yt=getLanguageCode(lt,ut,tt),mt=getEncoding(lt,ct,ut);if(mt!==void 0&&yt!==void 0){var At=void 0;if(mt===utf16?At=decode.UTF16(_e,ot+xt,gt):At=decode.MACSTRING(_e,ot+xt,gt,mt),At){var vt=nt[pt];vt===void 0&&(vt=nt[pt]={}),vt[yt]=At}}}return it===1&&rt.parseUShort(),nt}function reverseDict(_e){var _={};for(var tt in _e)_[_e[tt]]=parseInt(tt);return _}function makeNameRecord(_e,_,tt,nt,rt,it){return new table.Record("NameRecord",[{name:"platformID",type:"USHORT",value:_e},{name:"encodingID",type:"USHORT",value:_},{name:"languageID",type:"USHORT",value:tt},{name:"nameID",type:"USHORT",value:nt},{name:"length",type:"USHORT",value:rt},{name:"offset",type:"USHORT",value:it}])}function findSubArray(_e,_){var tt=_e.length,nt=_.length-tt+1;e:for(var rt=0;rt<nt;rt++)for(;rt<nt;rt++){for(var it=0;it<tt;it++)if(_[rt+it]!==_e[it])continue e;return rt}return-1}function addStringToPool(_e,_){var tt=findSubArray(_e,_);if(tt<0){tt=_.length;for(var nt=0,rt=_e.length;nt<rt;++nt)_.push(_e[nt])}return tt}function makeNameTable(_e,_){var tt,nt=[],rt={},it=reverseDict(nameTableNames);for(var at in _e){var ot=it[at];if(ot===void 0&&(ot=at),tt=parseInt(ot),isNaN(tt))throw new Error('Name table entry "'+at+'" does not exist, see nameTableNames for complete list.');rt[tt]=_e[at],nt.push(tt)}for(var st=reverseDict(macLanguages),lt=reverseDict(windowsLanguages),ct=[],ut=[],ft=0;ft<nt.length;ft++){tt=nt[ft];var pt=rt[tt];for(var gt in pt){var xt=pt[gt],yt=1,mt=st[gt],At=macLanguageToScript[mt],vt=getEncoding(yt,At,mt),Et=encode.MACSTRING(xt,vt);Et===void 0&&(yt=0,mt=_.indexOf(gt),mt<0&&(mt=_.length,_.push(gt)),At=4,Et=encode.UTF16(xt));var Ct=addStringToPool(Et,ut);ct.push(makeNameRecord(yt,At,mt,tt,Et.length,Ct));var Tt=lt[gt];if(Tt!==void 0){var bt=encode.UTF16(xt),It=addStringToPool(bt,ut);ct.push(makeNameRecord(3,1,Tt,tt,bt.length,It))}}}ct.sort(function(Ft,Ut){return Ft.platformID-Ut.platformID||Ft.encodingID-Ut.encodingID||Ft.languageID-Ut.languageID||Ft.nameID-Ut.nameID});for(var wt=new table.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:ct.length},{name:"stringOffset",type:"USHORT",value:6+ct.length*12}]),Rt=0;Rt<ct.length;Rt++)wt.fields.push({name:"record_"+Rt,type:"RECORD",value:ct[Rt]});return wt.fields.push({name:"strings",type:"LITERAL",value:ut}),wt}var _name={parse:parseNameTable,make:makeNameTable},unicodeRanges=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function getUnicodeRange(_e){for(var _=0;_<unicodeRanges.length;_+=1){var tt=unicodeRanges[_];if(_e>=tt.begin&&_e<tt.end)return _}return-1}function parseOS2Table(_e,_){var tt={},nt=new parse$1.Parser(_e,_);tt.version=nt.parseUShort(),tt.xAvgCharWidth=nt.parseShort(),tt.usWeightClass=nt.parseUShort(),tt.usWidthClass=nt.parseUShort(),tt.fsType=nt.parseUShort(),tt.ySubscriptXSize=nt.parseShort(),tt.ySubscriptYSize=nt.parseShort(),tt.ySubscriptXOffset=nt.parseShort(),tt.ySubscriptYOffset=nt.parseShort(),tt.ySuperscriptXSize=nt.parseShort(),tt.ySuperscriptYSize=nt.parseShort(),tt.ySuperscriptXOffset=nt.parseShort(),tt.ySuperscriptYOffset=nt.parseShort(),tt.yStrikeoutSize=nt.parseShort(),tt.yStrikeoutPosition=nt.parseShort(),tt.sFamilyClass=nt.parseShort(),tt.panose=[];for(var rt=0;rt<10;rt++)tt.panose[rt]=nt.parseByte();return tt.ulUnicodeRange1=nt.parseULong(),tt.ulUnicodeRange2=nt.parseULong(),tt.ulUnicodeRange3=nt.parseULong(),tt.ulUnicodeRange4=nt.parseULong(),tt.achVendID=String.fromCharCode(nt.parseByte(),nt.parseByte(),nt.parseByte(),nt.parseByte()),tt.fsSelection=nt.parseUShort(),tt.usFirstCharIndex=nt.parseUShort(),tt.usLastCharIndex=nt.parseUShort(),tt.sTypoAscender=nt.parseShort(),tt.sTypoDescender=nt.parseShort(),tt.sTypoLineGap=nt.parseShort(),tt.usWinAscent=nt.parseUShort(),tt.usWinDescent=nt.parseUShort(),tt.version>=1&&(tt.ulCodePageRange1=nt.parseULong(),tt.ulCodePageRange2=nt.parseULong()),tt.version>=2&&(tt.sxHeight=nt.parseShort(),tt.sCapHeight=nt.parseShort(),tt.usDefaultChar=nt.parseUShort(),tt.usBreakChar=nt.parseUShort(),tt.usMaxContent=nt.parseUShort()),tt}function makeOS2Table(_e){return new table.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],_e)}var os2={parse:parseOS2Table,make:makeOS2Table,unicodeRanges,getUnicodeRange};function parsePostTable(_e,_){var tt={},nt=new parse$1.Parser(_e,_);switch(tt.version=nt.parseVersion(),tt.italicAngle=nt.parseFixed(),tt.underlinePosition=nt.parseShort(),tt.underlineThickness=nt.parseShort(),tt.isFixedPitch=nt.parseULong(),tt.minMemType42=nt.parseULong(),tt.maxMemType42=nt.parseULong(),tt.minMemType1=nt.parseULong(),tt.maxMemType1=nt.parseULong(),tt.version){case 1:tt.names=standardNames.slice();break;case 2:tt.numberOfGlyphs=nt.parseUShort(),tt.glyphNameIndex=new Array(tt.numberOfGlyphs);for(var rt=0;rt<tt.numberOfGlyphs;rt++)tt.glyphNameIndex[rt]=nt.parseUShort();tt.names=[];for(var it=0;it<tt.numberOfGlyphs;it++)if(tt.glyphNameIndex[it]>=standardNames.length){var at=nt.parseChar();tt.names.push(nt.parseString(at))}break;case 2.5:tt.numberOfGlyphs=nt.parseUShort(),tt.offset=new Array(tt.numberOfGlyphs);for(var ot=0;ot<tt.numberOfGlyphs;ot++)tt.offset[ot]=nt.parseChar();break}return tt}function makePostTable(){return new table.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var post={parse:parsePostTable,make:makePostTable},subtableParsers=new Array(9);subtableParsers[1]=function(){var _=this.offset+this.relativeOffset,tt=this.parseUShort();if(tt===1)return{substFormat:1,coverage:this.parsePointer(Parser$1.coverage),deltaGlyphId:this.parseUShort()};if(tt===2)return{substFormat:2,coverage:this.parsePointer(Parser$1.coverage),substitute:this.parseOffset16List()};check.assert(!1,"0x"+_.toString(16)+": lookup type 1 format must be 1 or 2.")};subtableParsers[2]=function(){var _=this.parseUShort();return check.argument(_===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(Parser$1.coverage),sequences:this.parseListOfLists()}};subtableParsers[3]=function(){var _=this.parseUShort();return check.argument(_===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(Parser$1.coverage),alternateSets:this.parseListOfLists()}};subtableParsers[4]=function(){var _=this.parseUShort();return check.argument(_===1,"GSUB ligature table identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(Parser$1.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var lookupRecordDesc={sequenceIndex:Parser$1.uShort,lookupListIndex:Parser$1.uShort};subtableParsers[5]=function(){var _=this.offset+this.relativeOffset,tt=this.parseUShort();if(tt===1)return{substFormat:tt,coverage:this.parsePointer(Parser$1.coverage),ruleSets:this.parseListOfLists(function(){var it=this.parseUShort(),at=this.parseUShort();return{input:this.parseUShortList(it-1),lookupRecords:this.parseRecordList(at,lookupRecordDesc)}})};if(tt===2)return{substFormat:tt,coverage:this.parsePointer(Parser$1.coverage),classDef:this.parsePointer(Parser$1.classDef),classSets:this.parseListOfLists(function(){var it=this.parseUShort(),at=this.parseUShort();return{classes:this.parseUShortList(it-1),lookupRecords:this.parseRecordList(at,lookupRecordDesc)}})};if(tt===3){var nt=this.parseUShort(),rt=this.parseUShort();return{substFormat:tt,coverages:this.parseList(nt,Parser$1.pointer(Parser$1.coverage)),lookupRecords:this.parseRecordList(rt,lookupRecordDesc)}}check.assert(!1,"0x"+_.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};subtableParsers[6]=function(){var _=this.offset+this.relativeOffset,tt=this.parseUShort();if(tt===1)return{substFormat:1,coverage:this.parsePointer(Parser$1.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(tt===2)return{substFormat:2,coverage:this.parsePointer(Parser$1.coverage),backtrackClassDef:this.parsePointer(Parser$1.classDef),inputClassDef:this.parsePointer(Parser$1.classDef),lookaheadClassDef:this.parsePointer(Parser$1.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(lookupRecordDesc)}})};if(tt===3)return{substFormat:3,backtrackCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),inputCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookaheadCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookupRecords:this.parseRecordList(lookupRecordDesc)};check.assert(!1,"0x"+_.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};subtableParsers[7]=function(){var _=this.parseUShort();check.argument(_===1,"GSUB Extension Substitution subtable identifier-format must be 1");var tt=this.parseUShort(),nt=new Parser$1(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:tt,extension:subtableParsers[tt].call(nt)}};subtableParsers[8]=function(){var _=this.parseUShort();return check.argument(_===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:_,coverage:this.parsePointer(Parser$1.coverage),backtrackCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),lookaheadCoverage:this.parseList(Parser$1.pointer(Parser$1.coverage)),substitutes:this.parseUShortList()}};function parseGsubTable(_e,_){_=_||0;var tt=new Parser$1(_e,_),nt=tt.parseVersion(1);return check.argument(nt===1||nt===1.1,"Unsupported GSUB table version."),nt===1?{version:nt,scripts:tt.parseScriptList(),features:tt.parseFeatureList(),lookups:tt.parseLookupList(subtableParsers)}:{version:nt,scripts:tt.parseScriptList(),features:tt.parseFeatureList(),lookups:tt.parseLookupList(subtableParsers),variations:tt.parseFeatureVariationsList()}}var subtableMakers=new Array(9);subtableMakers[1]=function(_){return _.substFormat===1?new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(_.coverage)},{name:"deltaGlyphID",type:"USHORT",value:_.deltaGlyphId}]):new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new table.Coverage(_.coverage)}].concat(table.ushortList("substitute",_.substitute)))};subtableMakers[2]=function(_){return check.assert(_.substFormat===1,"Lookup type 2 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(_.coverage)}].concat(table.tableList("seqSet",_.sequences,function(tt){return new table.Table("sequenceSetTable",table.ushortList("sequence",tt))})))};subtableMakers[3]=function(_){return check.assert(_.substFormat===1,"Lookup type 3 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(_.coverage)}].concat(table.tableList("altSet",_.alternateSets,function(tt){return new table.Table("alternateSetTable",table.ushortList("alternate",tt))})))};subtableMakers[4]=function(_){return check.assert(_.substFormat===1,"Lookup type 4 substFormat must be 1."),new table.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new table.Coverage(_.coverage)}].concat(table.tableList("ligSet",_.ligatureSets,function(tt){return new table.Table("ligatureSetTable",table.tableList("ligature",tt,function(nt){return new table.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:nt.ligGlyph}].concat(table.ushortList("component",nt.components,nt.components.length+1)))}))})))};subtableMakers[6]=function(_){if(_.substFormat===1){var tt=new table.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:_.substFormat},{name:"coverage",type:"TABLE",value:new table.Coverage(_.coverage)}].concat(table.tableList("chainRuleSet",_.chainRuleSets,function(it){return new table.Table("chainRuleSetTable",table.tableList("chainRule",it,function(at){var ot=table.ushortList("backtrackGlyph",at.backtrack,at.backtrack.length).concat(table.ushortList("inputGlyph",at.input,at.input.length+1)).concat(table.ushortList("lookaheadGlyph",at.lookahead,at.lookahead.length)).concat(table.ushortList("substitution",[],at.lookupRecords.length));return at.lookupRecords.forEach(function(st,lt){ot=ot.concat({name:"sequenceIndex"+lt,type:"USHORT",value:st.sequenceIndex}).concat({name:"lookupListIndex"+lt,type:"USHORT",value:st.lookupListIndex})}),new table.Table("chainRuleTable",ot)}))})));return tt}else if(_.substFormat===2)check.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(_.substFormat===3){var nt=[{name:"substFormat",type:"USHORT",value:_.substFormat}];nt.push({name:"backtrackGlyphCount",type:"USHORT",value:_.backtrackCoverage.length}),_.backtrackCoverage.forEach(function(it,at){nt.push({name:"backtrackCoverage"+at,type:"TABLE",value:new table.Coverage(it)})}),nt.push({name:"inputGlyphCount",type:"USHORT",value:_.inputCoverage.length}),_.inputCoverage.forEach(function(it,at){nt.push({name:"inputCoverage"+at,type:"TABLE",value:new table.Coverage(it)})}),nt.push({name:"lookaheadGlyphCount",type:"USHORT",value:_.lookaheadCoverage.length}),_.lookaheadCoverage.forEach(function(it,at){nt.push({name:"lookaheadCoverage"+at,type:"TABLE",value:new table.Coverage(it)})}),nt.push({name:"substitutionCount",type:"USHORT",value:_.lookupRecords.length}),_.lookupRecords.forEach(function(it,at){nt=nt.concat({name:"sequenceIndex"+at,type:"USHORT",value:it.sequenceIndex}).concat({name:"lookupListIndex"+at,type:"USHORT",value:it.lookupListIndex})});var rt=new table.Table("chainContextTable",nt);return rt}check.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function makeGsubTable(_e){return new table.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new table.ScriptList(_e.scripts)},{name:"features",type:"TABLE",value:new table.FeatureList(_e.features)},{name:"lookups",type:"TABLE",value:new table.LookupList(_e.lookups,subtableMakers)}])}var gsub={parse:parseGsubTable,make:makeGsubTable};function parseMetaTable(_e,_){var tt=new parse$1.Parser(_e,_),nt=tt.parseULong();check.argument(nt===1,"Unsupported META table version."),tt.parseULong(),tt.parseULong();for(var rt=tt.parseULong(),it={},at=0;at<rt;at++){var ot=tt.parseTag(),st=tt.parseULong(),lt=tt.parseULong(),ct=decode.UTF8(_e,_+st,lt);it[ot]=ct}return it}function makeMetaTable(_e){var _=Object.keys(_e).length,tt="",nt=16+_*12,rt=new table.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:nt},{name:"numTags",type:"ULONG",value:_}]);for(var it in _e){var at=tt.length;tt+=_e[it],rt.fields.push({name:"tag "+it,type:"TAG",value:it}),rt.fields.push({name:"offset "+it,type:"ULONG",value:nt+at}),rt.fields.push({name:"length "+it,type:"ULONG",value:_e[it].length})}return rt.fields.push({name:"stringPool",type:"CHARARRAY",value:tt}),rt}var meta={parse:parseMetaTable,make:makeMetaTable};function log2(_e){return Math.log(_e)/Math.log(2)|0}function computeCheckSum(_e){for(;_e.length%4!==0;)_e.push(0);for(var _=0,tt=0;tt<_e.length;tt+=4)_+=(_e[tt]<<24)+(_e[tt+1]<<16)+(_e[tt+2]<<8)+_e[tt+3];return _%=Math.pow(2,32),_}function makeTableRecord(_e,_,tt,nt){return new table.Record("Table Record",[{name:"tag",type:"TAG",value:_e!==void 0?_e:""},{name:"checkSum",type:"ULONG",value:_!==void 0?_:0},{name:"offset",type:"ULONG",value:tt!==void 0?tt:0},{name:"length",type:"ULONG",value:nt!==void 0?nt:0}])}function makeSfntTable(_e){var _=new table.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);_.tables=_e,_.numTables=_e.length;var tt=Math.pow(2,log2(_.numTables));_.searchRange=16*tt,_.entrySelector=log2(tt),_.rangeShift=_.numTables*16-_.searchRange;for(var nt=[],rt=[],it=_.sizeOf()+makeTableRecord().sizeOf()*_.numTables;it%4!==0;)it+=1,rt.push({name:"padding",type:"BYTE",value:0});for(var at=0;at<_e.length;at+=1){var ot=_e[at];check.argument(ot.tableName.length===4,"Table name"+ot.tableName+" is invalid.");var st=ot.sizeOf(),lt=makeTableRecord(ot.tableName,computeCheckSum(ot.encode()),it,st);for(nt.push({name:lt.tag+" Table Record",type:"RECORD",value:lt}),rt.push({name:ot.tableName+" table",type:"RECORD",value:ot}),it+=st,check.argument(!isNaN(it),"Something went wrong calculating the offset.");it%4!==0;)it+=1,rt.push({name:"padding",type:"BYTE",value:0})}return nt.sort(function(ct,ut){return ct.value.tag>ut.value.tag?1:-1}),_.fields=_.fields.concat(nt),_.fields=_.fields.concat(rt),_}function metricsForChar(_e,_,tt){for(var nt=0;nt<_.length;nt+=1){var rt=_e.charToGlyphIndex(_[nt]);if(rt>0){var it=_e.glyphs.get(rt);return it.getMetrics()}}return tt}function average(_e){for(var _=0,tt=0;tt<_e.length;tt+=1)_+=_e[tt];return _/_e.length}function fontToSfntTable(_e){for(var _=[],tt=[],nt=[],rt=[],it=[],at=[],ot=[],st,lt=0,ct=0,ut=0,ft=0,pt=0,gt=0;gt<_e.glyphs.length;gt+=1){var xt=_e.glyphs.get(gt),yt=xt.unicode|0;if(isNaN(xt.advanceWidth))throw new Error("Glyph "+xt.name+" ("+gt+"): advanceWidth is not a number.");(st>yt||st===void 0)&&yt>0&&(st=yt),lt<yt&&(lt=yt);var mt=os2.getUnicodeRange(yt);if(mt<32)ct|=1<<mt;else if(mt<64)ut|=1<<mt-32;else if(mt<96)ft|=1<<mt-64;else if(mt<123)pt|=1<<mt-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(xt.name!==".notdef"){var At=xt.getMetrics();_.push(At.xMin),tt.push(At.yMin),nt.push(At.xMax),rt.push(At.yMax),at.push(At.leftSideBearing),ot.push(At.rightSideBearing),it.push(xt.advanceWidth)}}var vt={xMin:Math.min.apply(null,_),yMin:Math.min.apply(null,tt),xMax:Math.max.apply(null,nt),yMax:Math.max.apply(null,rt),advanceWidthMax:Math.max.apply(null,it),advanceWidthAvg:average(it),minLeftSideBearing:Math.min.apply(null,at),maxLeftSideBearing:Math.max.apply(null,at),minRightSideBearing:Math.min.apply(null,ot)};vt.ascender=_e.ascender,vt.descender=_e.descender;var Et=head$1.make({flags:3,unitsPerEm:_e.unitsPerEm,xMin:vt.xMin,yMin:vt.yMin,xMax:vt.xMax,yMax:vt.yMax,lowestRecPPEM:3,createdTimestamp:_e.createdTimestamp}),Ct=hhea.make({ascender:vt.ascender,descender:vt.descender,advanceWidthMax:vt.advanceWidthMax,minLeftSideBearing:vt.minLeftSideBearing,minRightSideBearing:vt.minRightSideBearing,xMaxExtent:vt.maxLeftSideBearing+(vt.xMax-vt.xMin),numberOfHMetrics:_e.glyphs.length}),Tt=maxp.make(_e.glyphs.length),bt=os2.make(Object.assign({xAvgCharWidth:Math.round(vt.advanceWidthAvg),usFirstCharIndex:st,usLastCharIndex:lt,ulUnicodeRange1:ct,ulUnicodeRange2:ut,ulUnicodeRange3:ft,ulUnicodeRange4:pt,sTypoAscender:vt.ascender,sTypoDescender:vt.descender,sTypoLineGap:0,usWinAscent:vt.yMax,usWinDescent:Math.abs(vt.yMin),ulCodePageRange1:1,sxHeight:metricsForChar(_e,"xyvw",{yMax:Math.round(vt.ascender/2)}).yMax,sCapHeight:metricsForChar(_e,"HIKLEFJMNTZBDPRAGOQSUVWXY",vt).yMax,usDefaultChar:_e.hasChar(" ")?32:0,usBreakChar:_e.hasChar(" ")?32:0},_e.tables.os2)),It=hmtx.make(_e.glyphs),wt=cmap.make(_e.glyphs),Rt=_e.getEnglishName("fontFamily"),Ft=_e.getEnglishName("fontSubfamily"),Ut=Rt+" "+Ft,Gt=_e.getEnglishName("postScriptName");Gt||(Gt=Rt.replace(/\s/g,"")+"-"+Ft);var Ht={};for(var jt in _e.names)Ht[jt]=_e.names[jt];Ht.uniqueID||(Ht.uniqueID={en:_e.getEnglishName("manufacturer")+":"+Ut}),Ht.postScriptName||(Ht.postScriptName={en:Gt}),Ht.preferredFamily||(Ht.preferredFamily=_e.names.fontFamily),Ht.preferredSubfamily||(Ht.preferredSubfamily=_e.names.fontSubfamily);var Xt=[],Jt=_name.make(Ht,Xt),Dt=Xt.length>0?ltag.make(Xt):void 0,zt=post.make(),$t=cff.make(_e.glyphs,{version:_e.getEnglishName("version"),fullName:Ut,familyName:Rt,weightName:Ft,postScriptName:Gt,unitsPerEm:_e.unitsPerEm,fontBBox:[0,vt.yMin,vt.ascender,vt.advanceWidthMax]}),Lt=_e.metas&&Object.keys(_e.metas).length>0?meta.make(_e.metas):void 0,Vt=[Et,Ct,Tt,bt,Jt,wt,zt,$t,It];Dt&&Vt.push(Dt),_e.tables.gsub&&Vt.push(gsub.make(_e.tables.gsub)),Lt&&Vt.push(Lt);for(var tn=makeSfntTable(Vt),an=tn.encode(),on=computeCheckSum(an),sn=tn.fields,ln=!1,cn=0;cn<sn.length;cn+=1)if(sn[cn].name==="head table"){sn[cn].value.checkSumAdjustment=2981146554-on,ln=!0;break}if(!ln)throw new Error("Could not find head table with checkSum to adjust.");return tn}var sfnt={make:makeSfntTable,fontToTable:fontToSfntTable,computeCheckSum};function searchTag(_e,_){for(var tt=0,nt=_e.length-1;tt<=nt;){var rt=tt+nt>>>1,it=_e[rt].tag;if(it===_)return rt;it<_?tt=rt+1:nt=rt-1}return-tt-1}function binSearch(_e,_){for(var tt=0,nt=_e.length-1;tt<=nt;){var rt=tt+nt>>>1,it=_e[rt];if(it===_)return rt;it<_?tt=rt+1:nt=rt-1}return-tt-1}function searchRange(_e,_){for(var tt,nt=0,rt=_e.length-1;nt<=rt;){var it=nt+rt>>>1;tt=_e[it];var at=tt.start;if(at===_)return tt;at<_?nt=it+1:rt=it-1}if(nt>0)return tt=_e[nt-1],_>tt.end?0:tt}function Layout(_e,_){this.font=_e,this.tableName=_}Layout.prototype={searchTag,binSearch,getTable:function(_e){var _=this.font.tables[this.tableName];return!_&&_e&&(_=this.font.tables[this.tableName]=this.createDefaultTable()),_},getScriptNames:function(){var _e=this.getTable();return _e?_e.scripts.map(function(_){return _.tag}):[]},getDefaultScriptName:function(){var _e=this.getTable();if(_e){for(var _=!1,tt=0;tt<_e.scripts.length;tt++){var nt=_e.scripts[tt].tag;if(nt==="DFLT")return nt;nt==="latn"&&(_=!0)}if(_)return"latn"}},getScriptTable:function(_e,_){var tt=this.getTable(_);if(tt){_e=_e||"DFLT";var nt=tt.scripts,rt=searchTag(tt.scripts,_e);if(rt>=0)return nt[rt].script;if(_){var it={tag:_e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return nt.splice(-1-rt,0,it),it.script}}},getLangSysTable:function(_e,_,tt){var nt=this.getScriptTable(_e,tt);if(nt){if(!_||_==="dflt"||_==="DFLT")return nt.defaultLangSys;var rt=searchTag(nt.langSysRecords,_);if(rt>=0)return nt.langSysRecords[rt].langSys;if(tt){var it={tag:_,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return nt.langSysRecords.splice(-1-rt,0,it),it.langSys}}},getFeatureTable:function(_e,_,tt,nt){var rt=this.getLangSysTable(_e,_,nt);if(rt){for(var it,at=rt.featureIndexes,ot=this.font.tables[this.tableName].features,st=0;st<at.length;st++)if(it=ot[at[st]],it.tag===tt)return it.feature;if(nt){var lt=ot.length;return check.assert(lt===0||tt>=ot[lt-1].tag,"Features must be added in alphabetical order."),it={tag:tt,feature:{params:0,lookupListIndexes:[]}},ot.push(it),at.push(lt),it.feature}}},getLookupTables:function(_e,_,tt,nt,rt){var it=this.getFeatureTable(_e,_,tt,rt),at=[];if(it){for(var ot,st=it.lookupListIndexes,lt=this.font.tables[this.tableName].lookups,ct=0;ct<st.length;ct++)ot=lt[st[ct]],ot.lookupType===nt&&at.push(ot);if(at.length===0&&rt){ot={lookupType:nt,lookupFlag:0,subtables:[],markFilteringSet:void 0};var ut=lt.length;return lt.push(ot),st.push(ut),[ot]}}return at},getGlyphClass:function(_e,_){switch(_e.format){case 1:return _e.startGlyph<=_&&_<_e.startGlyph+_e.classes.length?_e.classes[_-_e.startGlyph]:0;case 2:var tt=searchRange(_e.ranges,_);return tt?tt.classId:0}},getCoverageIndex:function(_e,_){switch(_e.format){case 1:var tt=binSearch(_e.glyphs,_);return tt>=0?tt:-1;case 2:var nt=searchRange(_e.ranges,_);return nt?nt.index+_-nt.start:-1}},expandCoverage:function(_e){if(_e.format===1)return _e.glyphs;for(var _=[],tt=_e.ranges,nt=0;nt<tt.length;nt++)for(var rt=tt[nt],it=rt.start,at=rt.end,ot=it;ot<=at;ot++)_.push(ot);return _}};function Position(_e){Layout.call(this,_e,"gpos")}Position.prototype=Layout.prototype;Position.prototype.init=function(){var _e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(_e)};Position.prototype.getKerningValue=function(_e,_,tt){for(var nt=0;nt<_e.length;nt++)for(var rt=_e[nt].subtables,it=0;it<rt.length;it++){var at=rt[it],ot=this.getCoverageIndex(at.coverage,_);if(!(ot<0))switch(at.posFormat){case 1:for(var st=at.pairSets[ot],lt=0;lt<st.length;lt++){var ct=st[lt];if(ct.secondGlyph===tt)return ct.value1&&ct.value1.xAdvance||0}break;case 2:var ut=this.getGlyphClass(at.classDef1,_),ft=this.getGlyphClass(at.classDef2,tt),pt=at.classRecords[ut][ft];return pt.value1&&pt.value1.xAdvance||0}}return 0};Position.prototype.getKerningTables=function(_e,_){if(this.font.tables.gpos)return this.getLookupTables(_e,_,"kern",2)};function Substitution(_e){Layout.call(this,_e,"gsub")}function arraysEqual(_e,_){var tt=_e.length;if(tt!==_.length)return!1;for(var nt=0;nt<tt;nt++)if(_e[nt]!==_[nt])return!1;return!0}function getSubstFormat(_e,_,tt){for(var nt=_e.subtables,rt=0;rt<nt.length;rt++){var it=nt[rt];if(it.substFormat===_)return it}if(tt)return nt.push(tt),tt}Substitution.prototype=Layout.prototype;Substitution.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Substitution.prototype.getSingle=function(_e,_,tt){for(var nt=[],rt=this.getLookupTables(_,tt,_e,1),it=0;it<rt.length;it++)for(var at=rt[it].subtables,ot=0;ot<at.length;ot++){var st=at[ot],lt=this.expandCoverage(st.coverage),ct=void 0;if(st.substFormat===1){var ut=st.deltaGlyphId;for(ct=0;ct<lt.length;ct++){var ft=lt[ct];nt.push({sub:ft,by:ft+ut})}}else{var pt=st.substitute;for(ct=0;ct<lt.length;ct++)nt.push({sub:lt[ct],by:pt[ct]})}}return nt};Substitution.prototype.getMultiple=function(_e,_,tt){for(var nt=[],rt=this.getLookupTables(_,tt,_e,2),it=0;it<rt.length;it++)for(var at=rt[it].subtables,ot=0;ot<at.length;ot++){var st=at[ot],lt=this.expandCoverage(st.coverage),ct=void 0;for(ct=0;ct<lt.length;ct++){var ut=lt[ct],ft=st.sequences[ct];nt.push({sub:ut,by:ft})}}return nt};Substitution.prototype.getAlternates=function(_e,_,tt){for(var nt=[],rt=this.getLookupTables(_,tt,_e,3),it=0;it<rt.length;it++)for(var at=rt[it].subtables,ot=0;ot<at.length;ot++)for(var st=at[ot],lt=this.expandCoverage(st.coverage),ct=st.alternateSets,ut=0;ut<lt.length;ut++)nt.push({sub:lt[ut],by:ct[ut]});return nt};Substitution.prototype.getLigatures=function(_e,_,tt){for(var nt=[],rt=this.getLookupTables(_,tt,_e,4),it=0;it<rt.length;it++)for(var at=rt[it].subtables,ot=0;ot<at.length;ot++)for(var st=at[ot],lt=this.expandCoverage(st.coverage),ct=st.ligatureSets,ut=0;ut<lt.length;ut++)for(var ft=lt[ut],pt=ct[ut],gt=0;gt<pt.length;gt++){var xt=pt[gt];nt.push({sub:[ft].concat(xt.components),by:xt.ligGlyph})}return nt};Substitution.prototype.addSingle=function(_e,_,tt,nt){var rt=this.getLookupTables(tt,nt,_e,1,!0)[0],it=getSubstFormat(rt,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});check.assert(it.coverage.format===1,"Single: unable to modify coverage table format "+it.coverage.format);var at=_.sub,ot=this.binSearch(it.coverage.glyphs,at);ot<0&&(ot=-1-ot,it.coverage.glyphs.splice(ot,0,at),it.substitute.splice(ot,0,0)),it.substitute[ot]=_.by};Substitution.prototype.addMultiple=function(_e,_,tt,nt){check.assert(_.by instanceof Array&&_.by.length>1,'Multiple: "by" must be an array of two or more ids');var rt=this.getLookupTables(tt,nt,_e,2,!0)[0],it=getSubstFormat(rt,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});check.assert(it.coverage.format===1,"Multiple: unable to modify coverage table format "+it.coverage.format);var at=_.sub,ot=this.binSearch(it.coverage.glyphs,at);ot<0&&(ot=-1-ot,it.coverage.glyphs.splice(ot,0,at),it.sequences.splice(ot,0,0)),it.sequences[ot]=_.by};Substitution.prototype.addAlternate=function(_e,_,tt,nt){var rt=this.getLookupTables(tt,nt,_e,3,!0)[0],it=getSubstFormat(rt,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});check.assert(it.coverage.format===1,"Alternate: unable to modify coverage table format "+it.coverage.format);var at=_.sub,ot=this.binSearch(it.coverage.glyphs,at);ot<0&&(ot=-1-ot,it.coverage.glyphs.splice(ot,0,at),it.alternateSets.splice(ot,0,0)),it.alternateSets[ot]=_.by};Substitution.prototype.addLigature=function(_e,_,tt,nt){var rt=this.getLookupTables(tt,nt,_e,4,!0)[0],it=rt.subtables[0];it||(it={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},rt.subtables[0]=it),check.assert(it.coverage.format===1,"Ligature: unable to modify coverage table format "+it.coverage.format);var at=_.sub[0],ot=_.sub.slice(1),st={ligGlyph:_.by,components:ot},lt=this.binSearch(it.coverage.glyphs,at);if(lt>=0){for(var ct=it.ligatureSets[lt],ut=0;ut<ct.length;ut++)if(arraysEqual(ct[ut].components,ot))return;ct.push(st)}else lt=-1-lt,it.coverage.glyphs.splice(lt,0,at),it.ligatureSets.splice(lt,0,[st])};Substitution.prototype.getFeature=function(_e,_,tt){if(/ss\d\d/.test(_e))return this.getSingle(_e,_,tt);switch(_e){case"aalt":case"salt":return this.getSingle(_e,_,tt).concat(this.getAlternates(_e,_,tt));case"dlig":case"liga":case"rlig":return this.getLigatures(_e,_,tt);case"ccmp":return this.getMultiple(_e,_,tt).concat(this.getLigatures(_e,_,tt));case"stch":return this.getMultiple(_e,_,tt)}};Substitution.prototype.add=function(_e,_,tt,nt){if(/ss\d\d/.test(_e))return this.addSingle(_e,_,tt,nt);switch(_e){case"aalt":case"salt":return typeof _.by=="number"?this.addSingle(_e,_,tt,nt):this.addAlternate(_e,_,tt,nt);case"dlig":case"liga":case"rlig":return this.addLigature(_e,_,tt,nt);case"ccmp":return _.by instanceof Array?this.addMultiple(_e,_,tt,nt):this.addLigature(_e,_,tt,nt)}};function isBrowser(){return typeof window<"u"}function arrayBufferToNodeBuffer(_e){for(var _=new Buffer(_e.byteLength),tt=new Uint8Array(_e),nt=0;nt<_.length;++nt)_[nt]=tt[nt];return _}function checkArgument(_e,_){if(!_e)throw _}function parseGlyphCoordinate(_e,_,tt,nt,rt){var it;return(_&nt)>0?(it=_e.parseByte(),_&rt||(it=-it),it=tt+it):(_&rt)>0?it=tt:it=tt+_e.parseShort(),it}function parseGlyph(_e,_,tt){var nt=new parse$1.Parser(_,tt);_e.numberOfContours=nt.parseShort(),_e._xMin=nt.parseShort(),_e._yMin=nt.parseShort(),_e._xMax=nt.parseShort(),_e._yMax=nt.parseShort();var rt,it;if(_e.numberOfContours>0){for(var at=_e.endPointIndices=[],ot=0;ot<_e.numberOfContours;ot+=1)at.push(nt.parseUShort());_e.instructionLength=nt.parseUShort(),_e.instructions=[];for(var st=0;st<_e.instructionLength;st+=1)_e.instructions.push(nt.parseByte());var lt=at[at.length-1]+1;rt=[];for(var ct=0;ct<lt;ct+=1)if(it=nt.parseByte(),rt.push(it),(it&8)>0)for(var ut=nt.parseByte(),ft=0;ft<ut;ft+=1)rt.push(it),ct+=1;if(check.argument(rt.length===lt,"Bad flags."),at.length>0){var pt=[],gt;if(lt>0){for(var xt=0;xt<lt;xt+=1)it=rt[xt],gt={},gt.onCurve=!!(it&1),gt.lastPointOfContour=at.indexOf(xt)>=0,pt.push(gt);for(var yt=0,mt=0;mt<lt;mt+=1)it=rt[mt],gt=pt[mt],gt.x=parseGlyphCoordinate(nt,it,yt,2,16),yt=gt.x;for(var At=0,vt=0;vt<lt;vt+=1)it=rt[vt],gt=pt[vt],gt.y=parseGlyphCoordinate(nt,it,At,4,32),At=gt.y}_e.points=pt}else _e.points=[]}else if(_e.numberOfContours===0)_e.points=[];else{_e.isComposite=!0,_e.points=[],_e.components=[];for(var Et=!0;Et;){rt=nt.parseUShort();var Ct={glyphIndex:nt.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(rt&1)>0?(rt&2)>0?(Ct.dx=nt.parseShort(),Ct.dy=nt.parseShort()):Ct.matchedPoints=[nt.parseUShort(),nt.parseUShort()]:(rt&2)>0?(Ct.dx=nt.parseChar(),Ct.dy=nt.parseChar()):Ct.matchedPoints=[nt.parseByte(),nt.parseByte()],(rt&8)>0?Ct.xScale=Ct.yScale=nt.parseF2Dot14():(rt&64)>0?(Ct.xScale=nt.parseF2Dot14(),Ct.yScale=nt.parseF2Dot14()):(rt&128)>0&&(Ct.xScale=nt.parseF2Dot14(),Ct.scale01=nt.parseF2Dot14(),Ct.scale10=nt.parseF2Dot14(),Ct.yScale=nt.parseF2Dot14()),_e.components.push(Ct),Et=!!(rt&32)}if(rt&256){_e.instructionLength=nt.parseUShort(),_e.instructions=[];for(var Tt=0;Tt<_e.instructionLength;Tt+=1)_e.instructions.push(nt.parseByte())}}}function transformPoints(_e,_){for(var tt=[],nt=0;nt<_e.length;nt+=1){var rt=_e[nt],it={x:_.xScale*rt.x+_.scale01*rt.y+_.dx,y:_.scale10*rt.x+_.yScale*rt.y+_.dy,onCurve:rt.onCurve,lastPointOfContour:rt.lastPointOfContour};tt.push(it)}return tt}function getContours(_e){for(var _=[],tt=[],nt=0;nt<_e.length;nt+=1){var rt=_e[nt];tt.push(rt),rt.lastPointOfContour&&(_.push(tt),tt=[])}return check.argument(tt.length===0,"There are still points left in the current contour."),_}function getPath(_e){var _=new Path;if(!_e)return _;for(var tt=getContours(_e),nt=0;nt<tt.length;++nt){var rt=tt[nt],it=null,at=rt[rt.length-1],ot=rt[0];if(at.onCurve)_.moveTo(at.x,at.y);else if(ot.onCurve)_.moveTo(ot.x,ot.y);else{var st={x:(at.x+ot.x)*.5,y:(at.y+ot.y)*.5};_.moveTo(st.x,st.y)}for(var lt=0;lt<rt.length;++lt)if(it=at,at=ot,ot=rt[(lt+1)%rt.length],at.onCurve)_.lineTo(at.x,at.y);else{var ct=ot;it.onCurve||((at.x+it.x)*.5,(at.y+it.y)*.5),ot.onCurve||(ct={x:(at.x+ot.x)*.5,y:(at.y+ot.y)*.5}),_.quadraticCurveTo(at.x,at.y,ct.x,ct.y)}_.closePath()}return _}function buildPath(_e,_){if(_.isComposite)for(var tt=0;tt<_.components.length;tt+=1){var nt=_.components[tt],rt=_e.get(nt.glyphIndex);if(rt.getPath(),rt.points){var it=void 0;if(nt.matchedPoints===void 0)it=transformPoints(rt.points,nt);else{if(nt.matchedPoints[0]>_.points.length-1||nt.matchedPoints[1]>rt.points.length-1)throw Error("Matched points out of range in "+_.name);var at=_.points[nt.matchedPoints[0]],ot=rt.points[nt.matchedPoints[1]],st={xScale:nt.xScale,scale01:nt.scale01,scale10:nt.scale10,yScale:nt.yScale,dx:0,dy:0};ot=transformPoints([ot],st)[0],st.dx=at.x-ot.x,st.dy=at.y-ot.y,it=transformPoints(rt.points,st)}_.points=_.points.concat(it)}}return getPath(_.points)}function parseGlyfTableAll(_e,_,tt,nt){for(var rt=new glyphset.GlyphSet(nt),it=0;it<tt.length-1;it+=1){var at=tt[it],ot=tt[it+1];at!==ot?rt.push(it,glyphset.ttfGlyphLoader(nt,it,parseGlyph,_e,_+at,buildPath)):rt.push(it,glyphset.glyphLoader(nt,it))}return rt}function parseGlyfTableOnLowMemory(_e,_,tt,nt){var rt=new glyphset.GlyphSet(nt);return nt._push=function(it){var at=tt[it],ot=tt[it+1];at!==ot?rt.push(it,glyphset.ttfGlyphLoader(nt,it,parseGlyph,_e,_+at,buildPath)):rt.push(it,glyphset.glyphLoader(nt,it))},rt}function parseGlyfTable(_e,_,tt,nt,rt){return rt.lowMemory?parseGlyfTableOnLowMemory(_e,_,tt,nt):parseGlyfTableAll(_e,_,tt,nt)}var glyf={getPath,parse:parseGlyfTable},instructionTable,exec,execGlyph,execComponent;function Hinting(_e){this.font=_e,this.getCommands=function(_){return glyf.getPath(_).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function roundOff(_e){return _e}function roundToGrid(_e){return Math.sign(_e)*Math.round(Math.abs(_e))}function roundToDoubleGrid(_e){return Math.sign(_e)*Math.round(Math.abs(_e*2))/2}function roundToHalfGrid(_e){return Math.sign(_e)*(Math.round(Math.abs(_e)+.5)-.5)}function roundUpToGrid(_e){return Math.sign(_e)*Math.ceil(Math.abs(_e))}function roundDownToGrid(_e){return Math.sign(_e)*Math.floor(Math.abs(_e))}var roundSuper=function(_e){var _=this.srPeriod,tt=this.srPhase,nt=this.srThreshold,rt=1;return _e<0&&(_e=-_e,rt=-1),_e+=nt-tt,_e=Math.trunc(_e/_)*_,_e+=tt,_e<0?tt*rt:_e*rt},xUnitVector={x:1,y:0,axis:"x",distance:function(_e,_,tt,nt){return(tt?_e.xo:_e.x)-(nt?_.xo:_.x)},interpolate:function(_e,_,tt,nt){var rt,it,at,ot,st,lt,ct;if(!nt||nt===this){if(rt=_e.xo-_.xo,it=_e.xo-tt.xo,st=_.x-_.xo,lt=tt.x-tt.xo,at=Math.abs(rt),ot=Math.abs(it),ct=at+ot,ct===0){_e.x=_e.xo+(st+lt)/2;return}_e.x=_e.xo+(st*ot+lt*at)/ct;return}if(rt=nt.distance(_e,_,!0,!0),it=nt.distance(_e,tt,!0,!0),st=nt.distance(_,_,!1,!0),lt=nt.distance(tt,tt,!1,!0),at=Math.abs(rt),ot=Math.abs(it),ct=at+ot,ct===0){xUnitVector.setRelative(_e,_e,(st+lt)/2,nt,!0);return}xUnitVector.setRelative(_e,_e,(st*ot+lt*at)/ct,nt,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(_e,_,tt,nt,rt){if(!nt||nt===this){_e.x=(rt?_.xo:_.x)+tt;return}var it=rt?_.xo:_.x,at=rt?_.yo:_.y,ot=it+tt*nt.x,st=at+tt*nt.y;_e.x=ot+(_e.y-st)/nt.normalSlope},slope:0,touch:function(_e){_e.xTouched=!0},touched:function(_e){return _e.xTouched},untouch:function(_e){_e.xTouched=!1}},yUnitVector={x:0,y:1,axis:"y",distance:function(_e,_,tt,nt){return(tt?_e.yo:_e.y)-(nt?_.yo:_.y)},interpolate:function(_e,_,tt,nt){var rt,it,at,ot,st,lt,ct;if(!nt||nt===this){if(rt=_e.yo-_.yo,it=_e.yo-tt.yo,st=_.y-_.yo,lt=tt.y-tt.yo,at=Math.abs(rt),ot=Math.abs(it),ct=at+ot,ct===0){_e.y=_e.yo+(st+lt)/2;return}_e.y=_e.yo+(st*ot+lt*at)/ct;return}if(rt=nt.distance(_e,_,!0,!0),it=nt.distance(_e,tt,!0,!0),st=nt.distance(_,_,!1,!0),lt=nt.distance(tt,tt,!1,!0),at=Math.abs(rt),ot=Math.abs(it),ct=at+ot,ct===0){yUnitVector.setRelative(_e,_e,(st+lt)/2,nt,!0);return}yUnitVector.setRelative(_e,_e,(st*ot+lt*at)/ct,nt,!0)},normalSlope:0,setRelative:function(_e,_,tt,nt,rt){if(!nt||nt===this){_e.y=(rt?_.yo:_.y)+tt;return}var it=rt?_.xo:_.x,at=rt?_.yo:_.y,ot=it+tt*nt.x,st=at+tt*nt.y;_e.y=st+nt.normalSlope*(_e.x-ot)},slope:Number.POSITIVE_INFINITY,touch:function(_e){_e.yTouched=!0},touched:function(_e){return _e.yTouched},untouch:function(_e){_e.yTouched=!1}};Object.freeze(xUnitVector);Object.freeze(yUnitVector);function UnitVector(_e,_){this.x=_e,this.y=_,this.axis=void 0,this.slope=_/_e,this.normalSlope=-_e/_,Object.freeze(this)}UnitVector.prototype.distance=function(_e,_,tt,nt){return this.x*xUnitVector.distance(_e,_,tt,nt)+this.y*yUnitVector.distance(_e,_,tt,nt)};UnitVector.prototype.interpolate=function(_e,_,tt,nt){var rt,it,at,ot,st,lt,ct;if(at=nt.distance(_e,_,!0,!0),ot=nt.distance(_e,tt,!0,!0),rt=nt.distance(_,_,!1,!0),it=nt.distance(tt,tt,!1,!0),st=Math.abs(at),lt=Math.abs(ot),ct=st+lt,ct===0){this.setRelative(_e,_e,(rt+it)/2,nt,!0);return}this.setRelative(_e,_e,(rt*lt+it*st)/ct,nt,!0)};UnitVector.prototype.setRelative=function(_e,_,tt,nt,rt){nt=nt||this;var it=rt?_.xo:_.x,at=rt?_.yo:_.y,ot=it+tt*nt.x,st=at+tt*nt.y,lt=nt.normalSlope,ct=this.slope,ut=_e.x,ft=_e.y;_e.x=(ct*ut-lt*ot+st-ft)/(ct-lt),_e.y=ct*(_e.x-ut)+ft};UnitVector.prototype.touch=function(_e){_e.xTouched=!0,_e.yTouched=!0};function getUnitVector(_e,_){var tt=Math.sqrt(_e*_e+_*_);return _e/=tt,_/=tt,_e===1&&_===0?xUnitVector:_e===0&&_===1?yUnitVector:new UnitVector(_e,_)}function HPoint(_e,_,tt,nt){this.x=this.xo=Math.round(_e*64)/64,this.y=this.yo=Math.round(_*64)/64,this.lastPointOfContour=tt,this.onCurve=nt,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}HPoint.prototype.nextTouched=function(_e){for(var _=this.nextPointOnContour;!_e.touched(_)&&_!==this;)_=_.nextPointOnContour;return _};HPoint.prototype.prevTouched=function(_e){for(var _=this.prevPointOnContour;!_e.touched(_)&&_!==this;)_=_.prevPointOnContour;return _};var HPZero=Object.freeze(new HPoint(0,0)),defaultState={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function State(_e,_){switch(this.env=_e,this.stack=[],this.prog=_,_e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xUnitVector,this.round=roundToGrid}}Hinting.prototype.exec=function(_e,_){if(typeof _!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var tt=this.font,nt=this._prepState;if(!nt||nt.ppem!==_){var rt=this._fpgmState;if(!rt){State.prototype=defaultState,rt=this._fpgmState=new State("fpgm",tt.tables.fpgm),rt.funcs=[],rt.font=tt,exports.DEBUG&&(console.log("---EXEC FPGM---"),rt.step=-1);try{exec(rt)}catch(lt){console.log("Hinting error in FPGM:"+lt),this._errorState=3;return}}State.prototype=rt,nt=this._prepState=new State("prep",tt.tables.prep),nt.ppem=_;var it=tt.tables.cvt;if(it)for(var at=nt.cvt=new Array(it.length),ot=_/tt.unitsPerEm,st=0;st<it.length;st++)at[st]=it[st]*ot;else nt.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),nt.step=-1);try{exec(nt)}catch(lt){this._errorState<2&&console.log("Hinting error in PREP:"+lt),this._errorState=2}}if(!(this._errorState>1))try{return execGlyph(_e,nt)}catch(lt){this._errorState<1&&(console.log("Hinting error:"+lt),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};execGlyph=function(_e,_){var tt=_.ppem/_.font.unitsPerEm,nt=tt,rt=_e.components,it,at,ot;if(State.prototype=_,!rt)ot=new State("glyf",_e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),ot.step=-1),execComponent(_e,ot,tt,nt),at=ot.gZone;else{var st=_.font;at=[],it=[];for(var lt=0;lt<rt.length;lt++){var ct=rt[lt],ut=st.glyphs.get(ct.glyphIndex);ot=new State("glyf",ut.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+lt+"---"),ot.step=-1),execComponent(ut,ot,tt,nt);for(var ft=Math.round(ct.dx*tt),pt=Math.round(ct.dy*nt),gt=ot.gZone,xt=ot.contours,yt=0;yt<gt.length;yt++){var mt=gt[yt];mt.xTouched=mt.yTouched=!1,mt.xo=mt.x=mt.x+ft,mt.yo=mt.y=mt.y+pt}var At=at.length;at.push.apply(at,gt);for(var vt=0;vt<xt.length;vt++)it.push(xt[vt]+At)}_e.instructions&&!ot.inhibitGridFit&&(ot=new State("glyf",_e.instructions),ot.gZone=ot.z0=ot.z1=ot.z2=at,ot.contours=it,at.push(new HPoint(0,0),new HPoint(Math.round(_e.advanceWidth*tt),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),ot.step=-1),exec(ot),at.length-=2)}return at};execComponent=function(_e,_,tt,nt){for(var rt=_e.points||[],it=rt.length,at=_.gZone=_.z0=_.z1=_.z2=[],ot=_.contours=[],st,lt=0;lt<it;lt++)st=rt[lt],at[lt]=new HPoint(st.x*tt,st.y*nt,st.lastPointOfContour,st.onCurve);for(var ct,ut,ft=0;ft<it;ft++)st=at[ft],ct||(ct=st,ot.push(ft)),st.lastPointOfContour?(st.nextPointOnContour=ct,ct.prevPointOnContour=st,ct=void 0):(ut=at[ft+1],st.nextPointOnContour=ut,ut.prevPointOnContour=st);if(!_.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",_.stack);for(var pt=0;pt<it;pt++)console.log(pt,at[pt].x,at[pt].y)}if(at.push(new HPoint(0,0),new HPoint(Math.round(_e.advanceWidth*tt),0)),exec(_),at.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",_.stack);for(var gt=0;gt<it;gt++)console.log(gt,at[gt].x,at[gt].y)}}};exec=function(_e){var _=_e.prog;if(_){var tt=_.length,nt;for(_e.ip=0;_e.ip<tt;_e.ip++){if(exports.DEBUG&&_e.step++,nt=instructionTable[_[_e.ip]],!nt)throw new Error("unknown instruction: 0x"+Number(_[_e.ip]).toString(16));nt(_e)}}};function initTZone(_e){for(var _=_e.tZone=new Array(_e.gZone.length),tt=0;tt<_.length;tt++)_[tt]=new HPoint(0,0)}function skip(_e,_){var tt=_e.prog,nt=_e.ip,rt=1,it;do if(it=tt[++nt],it===88)rt++;else if(it===89)rt--;else if(it===64)nt+=tt[nt+1]+1;else if(it===65)nt+=2*tt[nt+1]+1;else if(it>=176&&it<=183)nt+=it-176+1;else if(it>=184&&it<=191)nt+=(it-184+1)*2;else if(_&&rt===1&&it===27)break;while(rt>0);_e.ip=nt}function SVTCA(_e,_){exports.DEBUG&&console.log(_.step,"SVTCA["+_e.axis+"]"),_.fv=_.pv=_.dpv=_e}function SPVTCA(_e,_){exports.DEBUG&&console.log(_.step,"SPVTCA["+_e.axis+"]"),_.pv=_.dpv=_e}function SFVTCA(_e,_){exports.DEBUG&&console.log(_.step,"SFVTCA["+_e.axis+"]"),_.fv=_e}function SPVTL(_e,_){var tt=_.stack,nt=tt.pop(),rt=tt.pop(),it=_.z2[nt],at=_.z1[rt];exports.DEBUG&&console.log("SPVTL["+_e+"]",nt,rt);var ot,st;_e?(ot=it.y-at.y,st=at.x-it.x):(ot=at.x-it.x,st=at.y-it.y),_.pv=_.dpv=getUnitVector(ot,st)}function SFVTL(_e,_){var tt=_.stack,nt=tt.pop(),rt=tt.pop(),it=_.z2[nt],at=_.z1[rt];exports.DEBUG&&console.log("SFVTL["+_e+"]",nt,rt);var ot,st;_e?(ot=it.y-at.y,st=at.x-it.x):(ot=at.x-it.x,st=at.y-it.y),_.fv=getUnitVector(ot,st)}function SPVFS(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"SPVFS[]",tt,nt),_e.pv=_e.dpv=getUnitVector(nt,tt)}function SFVFS(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"SPVFS[]",tt,nt),_e.fv=getUnitVector(nt,tt)}function GPV(_e){var _=_e.stack,tt=_e.pv;exports.DEBUG&&console.log(_e.step,"GPV[]"),_.push(tt.x*16384),_.push(tt.y*16384)}function GFV(_e){var _=_e.stack,tt=_e.fv;exports.DEBUG&&console.log(_e.step,"GFV[]"),_.push(tt.x*16384),_.push(tt.y*16384)}function SFVTPV(_e){_e.fv=_e.pv,exports.DEBUG&&console.log(_e.step,"SFVTPV[]")}function ISECT(_e){var _=_e.stack,tt=_.pop(),nt=_.pop(),rt=_.pop(),it=_.pop(),at=_.pop(),ot=_e.z0,st=_e.z1,lt=ot[tt],ct=ot[nt],ut=st[rt],ft=st[it],pt=_e.z2[at];exports.DEBUG&&console.log("ISECT[], ",tt,nt,rt,it,at);var gt=lt.x,xt=lt.y,yt=ct.x,mt=ct.y,At=ut.x,vt=ut.y,Et=ft.x,Ct=ft.y,Tt=(gt-yt)*(vt-Ct)-(xt-mt)*(At-Et),bt=gt*mt-xt*yt,It=At*Ct-vt*Et;pt.x=(bt*(At-Et)-It*(gt-yt))/Tt,pt.y=(bt*(vt-Ct)-It*(xt-mt))/Tt}function SRP0(_e){_e.rp0=_e.stack.pop(),exports.DEBUG&&console.log(_e.step,"SRP0[]",_e.rp0)}function SRP1(_e){_e.rp1=_e.stack.pop(),exports.DEBUG&&console.log(_e.step,"SRP1[]",_e.rp1)}function SRP2(_e){_e.rp2=_e.stack.pop(),exports.DEBUG&&console.log(_e.step,"SRP2[]",_e.rp2)}function SZP0(_e){var _=_e.stack.pop();switch(exports.DEBUG&&console.log(_e.step,"SZP0[]",_),_e.zp0=_,_){case 0:_e.tZone||initTZone(_e),_e.z0=_e.tZone;break;case 1:_e.z0=_e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP1(_e){var _=_e.stack.pop();switch(exports.DEBUG&&console.log(_e.step,"SZP1[]",_),_e.zp1=_,_){case 0:_e.tZone||initTZone(_e),_e.z1=_e.tZone;break;case 1:_e.z1=_e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZP2(_e){var _=_e.stack.pop();switch(exports.DEBUG&&console.log(_e.step,"SZP2[]",_),_e.zp2=_,_){case 0:_e.tZone||initTZone(_e),_e.z2=_e.tZone;break;case 1:_e.z2=_e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SZPS(_e){var _=_e.stack.pop();switch(exports.DEBUG&&console.log(_e.step,"SZPS[]",_),_e.zp0=_e.zp1=_e.zp2=_,_){case 0:_e.tZone||initTZone(_e),_e.z0=_e.z1=_e.z2=_e.tZone;break;case 1:_e.z0=_e.z1=_e.z2=_e.gZone;break;default:throw new Error("Invalid zone pointer")}}function SLOOP(_e){_e.loop=_e.stack.pop(),exports.DEBUG&&console.log(_e.step,"SLOOP[]",_e.loop)}function RTG(_e){exports.DEBUG&&console.log(_e.step,"RTG[]"),_e.round=roundToGrid}function RTHG(_e){exports.DEBUG&&console.log(_e.step,"RTHG[]"),_e.round=roundToHalfGrid}function SMD(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"SMD[]",_),_e.minDis=_/64}function ELSE(_e){exports.DEBUG&&console.log(_e.step,"ELSE[]"),skip(_e,!1)}function JMPR(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"JMPR[]",_),_e.ip+=_-1}function SCVTCI(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"SCVTCI[]",_),_e.cvCutIn=_/64}function DUP(_e){var _=_e.stack;exports.DEBUG&&console.log(_e.step,"DUP[]"),_.push(_[_.length-1])}function POP(_e){exports.DEBUG&&console.log(_e.step,"POP[]"),_e.stack.pop()}function CLEAR(_e){exports.DEBUG&&console.log(_e.step,"CLEAR[]"),_e.stack.length=0}function SWAP(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"SWAP[]"),_.push(tt),_.push(nt)}function DEPTH(_e){var _=_e.stack;exports.DEBUG&&console.log(_e.step,"DEPTH[]"),_.push(_.length)}function LOOPCALL(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"LOOPCALL[]",tt,nt);var rt=_e.ip,it=_e.prog;_e.prog=_e.funcs[tt];for(var at=0;at<nt;at++)exec(_e),exports.DEBUG&&console.log(++_e.step,at+1<nt?"next loopcall":"done loopcall",at);_e.ip=rt,_e.prog=it}function CALL(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"CALL[]",_);var tt=_e.ip,nt=_e.prog;_e.prog=_e.funcs[_],exec(_e),_e.ip=tt,_e.prog=nt,exports.DEBUG&&console.log(++_e.step,"returning from",_)}function CINDEX(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"CINDEX[]",tt),_.push(_[_.length-tt])}function MINDEX(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"MINDEX[]",tt),_.push(_.splice(_.length-tt,1)[0])}function FDEF(_e){if(_e.env!=="fpgm")throw new Error("FDEF not allowed here");var _=_e.stack,tt=_e.prog,nt=_e.ip,rt=_.pop(),it=nt;for(exports.DEBUG&&console.log(_e.step,"FDEF[]",rt);tt[++nt]!==45;);_e.ip=nt,_e.funcs[rt]=tt.slice(it+1,nt)}function MDAP(_e,_){var tt=_.stack.pop(),nt=_.z0[tt],rt=_.fv,it=_.pv;exports.DEBUG&&console.log(_.step,"MDAP["+_e+"]",tt);var at=it.distance(nt,HPZero);_e&&(at=_.round(at)),rt.setRelative(nt,HPZero,at,it),rt.touch(nt),_.rp0=_.rp1=tt}function IUP(_e,_){var tt=_.z2,nt=tt.length-2,rt,it,at;exports.DEBUG&&console.log(_.step,"IUP["+_e.axis+"]");for(var ot=0;ot<nt;ot++)rt=tt[ot],!_e.touched(rt)&&(it=rt.prevTouched(_e),it!==rt&&(at=rt.nextTouched(_e),it===at&&_e.setRelative(rt,rt,_e.distance(it,it,!1,!0),_e,!0),_e.interpolate(rt,it,at,_e)))}function SHP(_e,_){for(var tt=_.stack,nt=_e?_.rp1:_.rp2,rt=(_e?_.z0:_.z1)[nt],it=_.fv,at=_.pv,ot=_.loop,st=_.z2;ot--;){var lt=tt.pop(),ct=st[lt],ut=at.distance(rt,rt,!1,!0);it.setRelative(ct,ct,ut,at),it.touch(ct),exports.DEBUG&&console.log(_.step,(_.loop>1?"loop "+(_.loop-ot)+": ":"")+"SHP["+(_e?"rp1":"rp2")+"]",lt)}_.loop=1}function SHC(_e,_){var tt=_.stack,nt=_e?_.rp1:_.rp2,rt=(_e?_.z0:_.z1)[nt],it=_.fv,at=_.pv,ot=tt.pop(),st=_.z2[_.contours[ot]],lt=st;exports.DEBUG&&console.log(_.step,"SHC["+_e+"]",ot);var ct=at.distance(rt,rt,!1,!0);do lt!==rt&&it.setRelative(lt,lt,ct,at),lt=lt.nextPointOnContour;while(lt!==st)}function SHZ(_e,_){var tt=_.stack,nt=_e?_.rp1:_.rp2,rt=(_e?_.z0:_.z1)[nt],it=_.fv,at=_.pv,ot=tt.pop();exports.DEBUG&&console.log(_.step,"SHZ["+_e+"]",ot);var st;switch(ot){case 0:st=_.tZone;break;case 1:st=_.gZone;break;default:throw new Error("Invalid zone")}for(var lt,ct=at.distance(rt,rt,!1,!0),ut=st.length-2,ft=0;ft<ut;ft++)lt=st[ft],it.setRelative(lt,lt,ct,at)}function SHPIX(_e){for(var _=_e.stack,tt=_e.loop,nt=_e.fv,rt=_.pop()/64,it=_e.z2;tt--;){var at=_.pop(),ot=it[at];exports.DEBUG&&console.log(_e.step,(_e.loop>1?"loop "+(_e.loop-tt)+": ":"")+"SHPIX[]",at,rt),nt.setRelative(ot,ot,rt),nt.touch(ot)}_e.loop=1}function IP(_e){for(var _=_e.stack,tt=_e.rp1,nt=_e.rp2,rt=_e.loop,it=_e.z0[tt],at=_e.z1[nt],ot=_e.fv,st=_e.dpv,lt=_e.z2;rt--;){var ct=_.pop(),ut=lt[ct];exports.DEBUG&&console.log(_e.step,(_e.loop>1?"loop "+(_e.loop-rt)+": ":"")+"IP[]",ct,tt,"<->",nt),ot.interpolate(ut,it,at,st),ot.touch(ut)}_e.loop=1}function MSIRP(_e,_){var tt=_.stack,nt=tt.pop()/64,rt=tt.pop(),it=_.z1[rt],at=_.z0[_.rp0],ot=_.fv,st=_.pv;ot.setRelative(it,at,nt,st),ot.touch(it),exports.DEBUG&&console.log(_.step,"MSIRP["+_e+"]",nt,rt),_.rp1=_.rp0,_.rp2=rt,_e&&(_.rp0=rt)}function ALIGNRP(_e){for(var _=_e.stack,tt=_e.rp0,nt=_e.z0[tt],rt=_e.loop,it=_e.fv,at=_e.pv,ot=_e.z1;rt--;){var st=_.pop(),lt=ot[st];exports.DEBUG&&console.log(_e.step,(_e.loop>1?"loop "+(_e.loop-rt)+": ":"")+"ALIGNRP[]",st),it.setRelative(lt,nt,0,at),it.touch(lt)}_e.loop=1}function RTDG(_e){exports.DEBUG&&console.log(_e.step,"RTDG[]"),_e.round=roundToDoubleGrid}function MIAP(_e,_){var tt=_.stack,nt=tt.pop(),rt=tt.pop(),it=_.z0[rt],at=_.fv,ot=_.pv,st=_.cvt[nt];exports.DEBUG&&console.log(_.step,"MIAP["+_e+"]",nt,"(",st,")",rt);var lt=ot.distance(it,HPZero);_e&&(Math.abs(lt-st)<_.cvCutIn&&(lt=st),lt=_.round(lt)),at.setRelative(it,HPZero,lt,ot),_.zp0===0&&(it.xo=it.x,it.yo=it.y),at.touch(it),_.rp0=_.rp1=rt}function NPUSHB(_e){var _=_e.prog,tt=_e.ip,nt=_e.stack,rt=_[++tt];exports.DEBUG&&console.log(_e.step,"NPUSHB[]",rt);for(var it=0;it<rt;it++)nt.push(_[++tt]);_e.ip=tt}function NPUSHW(_e){var _=_e.ip,tt=_e.prog,nt=_e.stack,rt=tt[++_];exports.DEBUG&&console.log(_e.step,"NPUSHW[]",rt);for(var it=0;it<rt;it++){var at=tt[++_]<<8|tt[++_];at&32768&&(at=-((at^65535)+1)),nt.push(at)}_e.ip=_}function WS(_e){var _=_e.stack,tt=_e.store;tt||(tt=_e.store=[]);var nt=_.pop(),rt=_.pop();exports.DEBUG&&console.log(_e.step,"WS",nt,rt),tt[rt]=nt}function RS(_e){var _=_e.stack,tt=_e.store,nt=_.pop();exports.DEBUG&&console.log(_e.step,"RS",nt);var rt=tt&&tt[nt]||0;_.push(rt)}function WCVTP(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"WCVTP",tt,nt),_e.cvt[nt]=tt/64}function RCVT(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"RCVT",tt),_.push(_e.cvt[tt]*64)}function GC(_e,_){var tt=_.stack,nt=tt.pop(),rt=_.z2[nt];exports.DEBUG&&console.log(_.step,"GC["+_e+"]",nt),tt.push(_.dpv.distance(rt,HPZero,_e,!1)*64)}function MD(_e,_){var tt=_.stack,nt=tt.pop(),rt=tt.pop(),it=_.z1[nt],at=_.z0[rt],ot=_.dpv.distance(at,it,_e,_e);exports.DEBUG&&console.log(_.step,"MD["+_e+"]",nt,rt,"->",ot),_.stack.push(Math.round(ot*64))}function MPPEM(_e){exports.DEBUG&&console.log(_e.step,"MPPEM[]"),_e.stack.push(_e.ppem)}function FLIPON(_e){exports.DEBUG&&console.log(_e.step,"FLIPON[]"),_e.autoFlip=!0}function LT(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"LT[]",tt,nt),_.push(nt<tt?1:0)}function LTEQ(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"LTEQ[]",tt,nt),_.push(nt<=tt?1:0)}function GT(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"GT[]",tt,nt),_.push(nt>tt?1:0)}function GTEQ(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"GTEQ[]",tt,nt),_.push(nt>=tt?1:0)}function EQ(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"EQ[]",tt,nt),_.push(tt===nt?1:0)}function NEQ(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"NEQ[]",tt,nt),_.push(tt!==nt?1:0)}function ODD(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"ODD[]",tt),_.push(Math.trunc(tt)%2?1:0)}function EVEN(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"EVEN[]",tt),_.push(Math.trunc(tt)%2?0:1)}function IF(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"IF[]",_),_||(skip(_e,!0),exports.DEBUG&&console.log(_e.step,"EIF[]"))}function EIF(_e){exports.DEBUG&&console.log(_e.step,"EIF[]")}function AND(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"AND[]",tt,nt),_.push(tt&&nt?1:0)}function OR(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"OR[]",tt,nt),_.push(tt||nt?1:0)}function NOT(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"NOT[]",tt),_.push(tt?0:1)}function DELTAP123(_e,_){var tt=_.stack,nt=tt.pop(),rt=_.fv,it=_.pv,at=_.ppem,ot=_.deltaBase+(_e-1)*16,st=_.deltaShift,lt=_.z0;exports.DEBUG&&console.log(_.step,"DELTAP["+_e+"]",nt,tt);for(var ct=0;ct<nt;ct++){var ut=tt.pop(),ft=tt.pop(),pt=ot+((ft&240)>>4);if(pt===at){var gt=(ft&15)-8;gt>=0&&gt++,exports.DEBUG&&console.log(_.step,"DELTAPFIX",ut,"by",gt*st);var xt=lt[ut];rt.setRelative(xt,xt,gt*st,it)}}}function SDB(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"SDB[]",tt),_e.deltaBase=tt}function SDS(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"SDS[]",tt),_e.deltaShift=Math.pow(.5,tt)}function ADD(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"ADD[]",tt,nt),_.push(nt+tt)}function SUB(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"SUB[]",tt,nt),_.push(nt-tt)}function DIV(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"DIV[]",tt,nt),_.push(nt*64/tt)}function MUL(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"MUL[]",tt,nt),_.push(nt*tt/64)}function ABS(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"ABS[]",tt),_.push(Math.abs(tt))}function NEG(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"NEG[]",tt),_.push(-tt)}function FLOOR(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"FLOOR[]",tt),_.push(Math.floor(tt/64)*64)}function CEILING(_e){var _=_e.stack,tt=_.pop();exports.DEBUG&&console.log(_e.step,"CEILING[]",tt),_.push(Math.ceil(tt/64)*64)}function ROUND(_e,_){var tt=_.stack,nt=tt.pop();exports.DEBUG&&console.log(_.step,"ROUND[]"),tt.push(_.round(nt/64)*64)}function WCVTF(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"WCVTF[]",tt,nt),_e.cvt[nt]=tt*_e.ppem/_e.font.unitsPerEm}function DELTAC123(_e,_){var tt=_.stack,nt=tt.pop(),rt=_.ppem,it=_.deltaBase+(_e-1)*16,at=_.deltaShift;exports.DEBUG&&console.log(_.step,"DELTAC["+_e+"]",nt,tt);for(var ot=0;ot<nt;ot++){var st=tt.pop(),lt=tt.pop(),ct=it+((lt&240)>>4);if(ct===rt){var ut=(lt&15)-8;ut>=0&&ut++;var ft=ut*at;exports.DEBUG&&console.log(_.step,"DELTACFIX",st,"by",ft),_.cvt[st]+=ft}}}function SROUND(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"SROUND[]",_),_e.round=roundSuper;var tt;switch(_&192){case 0:tt=.5;break;case 64:tt=1;break;case 128:tt=2;break;default:throw new Error("invalid SROUND value")}switch(_e.srPeriod=tt,_&48){case 0:_e.srPhase=0;break;case 16:_e.srPhase=.25*tt;break;case 32:_e.srPhase=.5*tt;break;case 48:_e.srPhase=.75*tt;break;default:throw new Error("invalid SROUND value")}_&=15,_===0?_e.srThreshold=0:_e.srThreshold=(_/8-.5)*tt}function S45ROUND(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"S45ROUND[]",_),_e.round=roundSuper;var tt;switch(_&192){case 0:tt=Math.sqrt(2)/2;break;case 64:tt=Math.sqrt(2);break;case 128:tt=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(_e.srPeriod=tt,_&48){case 0:_e.srPhase=0;break;case 16:_e.srPhase=.25*tt;break;case 32:_e.srPhase=.5*tt;break;case 48:_e.srPhase=.75*tt;break;default:throw new Error("invalid S45ROUND value")}_&=15,_===0?_e.srThreshold=0:_e.srThreshold=(_/8-.5)*tt}function ROFF(_e){exports.DEBUG&&console.log(_e.step,"ROFF[]"),_e.round=roundOff}function RUTG(_e){exports.DEBUG&&console.log(_e.step,"RUTG[]"),_e.round=roundUpToGrid}function RDTG(_e){exports.DEBUG&&console.log(_e.step,"RDTG[]"),_e.round=roundDownToGrid}function SCANCTRL(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"SCANCTRL[]",_)}function SDPVTL(_e,_){var tt=_.stack,nt=tt.pop(),rt=tt.pop(),it=_.z2[nt],at=_.z1[rt];exports.DEBUG&&console.log(_.step,"SDPVTL["+_e+"]",nt,rt);var ot,st;_e?(ot=it.y-at.y,st=at.x-it.x):(ot=at.x-it.x,st=at.y-it.y),_.dpv=getUnitVector(ot,st)}function GETINFO(_e){var _=_e.stack,tt=_.pop(),nt=0;exports.DEBUG&&console.log(_e.step,"GETINFO[]",tt),tt&1&&(nt=35),tt&32&&(nt|=4096),_.push(nt)}function ROLL(_e){var _=_e.stack,tt=_.pop(),nt=_.pop(),rt=_.pop();exports.DEBUG&&console.log(_e.step,"ROLL[]"),_.push(nt),_.push(tt),_.push(rt)}function MAX(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"MAX[]",tt,nt),_.push(Math.max(nt,tt))}function MIN(_e){var _=_e.stack,tt=_.pop(),nt=_.pop();exports.DEBUG&&console.log(_e.step,"MIN[]",tt,nt),_.push(Math.min(nt,tt))}function SCANTYPE(_e){var _=_e.stack.pop();exports.DEBUG&&console.log(_e.step,"SCANTYPE[]",_)}function INSTCTRL(_e){var _=_e.stack.pop(),tt=_e.stack.pop();switch(exports.DEBUG&&console.log(_e.step,"INSTCTRL[]",_,tt),_){case 1:_e.inhibitGridFit=!!tt;return;case 2:_e.ignoreCvt=!!tt;return;default:throw new Error("invalid INSTCTRL[] selector")}}function PUSHB(_e,_){var tt=_.stack,nt=_.prog,rt=_.ip;exports.DEBUG&&console.log(_.step,"PUSHB["+_e+"]");for(var it=0;it<_e;it++)tt.push(nt[++rt]);_.ip=rt}function PUSHW(_e,_){var tt=_.ip,nt=_.prog,rt=_.stack;exports.DEBUG&&console.log(_.ip,"PUSHW["+_e+"]");for(var it=0;it<_e;it++){var at=nt[++tt]<<8|nt[++tt];at&32768&&(at=-((at^65535)+1)),rt.push(at)}_.ip=tt}function MDRP_MIRP(_e,_,tt,nt,rt,it){var at=it.stack,ot=_e&&at.pop(),st=at.pop(),lt=it.rp0,ct=it.z0[lt],ut=it.z1[st],ft=it.minDis,pt=it.fv,gt=it.dpv,xt,yt,mt,At;yt=xt=gt.distance(ut,ct,!0,!0),mt=yt>=0?1:-1,yt=Math.abs(yt),_e&&(At=it.cvt[ot],nt&&Math.abs(yt-At)<it.cvCutIn&&(yt=At)),tt&&yt<ft&&(yt=ft),nt&&(yt=it.round(yt)),pt.setRelative(ut,ct,mt*yt,gt),pt.touch(ut),exports.DEBUG&&console.log(it.step,(_e?"MIRP[":"MDRP[")+(_?"M":"m")+(tt?">":"_")+(nt?"R":"_")+(rt===0?"Gr":rt===1?"Bl":rt===2?"Wh":"")+"]",_e?ot+"("+it.cvt[ot]+","+At+")":"",st,"(d =",xt,"->",mt*yt,")"),it.rp1=it.rp0,it.rp2=st,_&&(it.rp0=st)}instructionTable=[SVTCA.bind(void 0,yUnitVector),SVTCA.bind(void 0,xUnitVector),SPVTCA.bind(void 0,yUnitVector),SPVTCA.bind(void 0,xUnitVector),SFVTCA.bind(void 0,yUnitVector),SFVTCA.bind(void 0,xUnitVector),SPVTL.bind(void 0,0),SPVTL.bind(void 0,1),SFVTL.bind(void 0,0),SFVTL.bind(void 0,1),SPVFS,SFVFS,GPV,GFV,SFVTPV,ISECT,SRP0,SRP1,SRP2,SZP0,SZP1,SZP2,SZPS,SLOOP,RTG,RTHG,SMD,ELSE,JMPR,SCVTCI,void 0,void 0,DUP,POP,CLEAR,SWAP,DEPTH,CINDEX,MINDEX,void 0,void 0,void 0,LOOPCALL,CALL,FDEF,void 0,MDAP.bind(void 0,0),MDAP.bind(void 0,1),IUP.bind(void 0,yUnitVector),IUP.bind(void 0,xUnitVector),SHP.bind(void 0,0),SHP.bind(void 0,1),SHC.bind(void 0,0),SHC.bind(void 0,1),SHZ.bind(void 0,0),SHZ.bind(void 0,1),SHPIX,IP,MSIRP.bind(void 0,0),MSIRP.bind(void 0,1),ALIGNRP,RTDG,MIAP.bind(void 0,0),MIAP.bind(void 0,1),NPUSHB,NPUSHW,WS,RS,WCVTP,RCVT,GC.bind(void 0,0),GC.bind(void 0,1),void 0,MD.bind(void 0,0),MD.bind(void 0,1),MPPEM,void 0,FLIPON,void 0,void 0,LT,LTEQ,GT,GTEQ,EQ,NEQ,ODD,EVEN,IF,EIF,AND,OR,NOT,DELTAP123.bind(void 0,1),SDB,SDS,ADD,SUB,DIV,MUL,ABS,NEG,FLOOR,CEILING,ROUND.bind(void 0,0),ROUND.bind(void 0,1),ROUND.bind(void 0,2),ROUND.bind(void 0,3),void 0,void 0,void 0,void 0,WCVTF,DELTAP123.bind(void 0,2),DELTAP123.bind(void 0,3),DELTAC123.bind(void 0,1),DELTAC123.bind(void 0,2),DELTAC123.bind(void 0,3),SROUND,S45ROUND,void 0,void 0,ROFF,void 0,RUTG,RDTG,POP,POP,void 0,void 0,void 0,void 0,void 0,SCANCTRL,SDPVTL.bind(void 0,0),SDPVTL.bind(void 0,1),GETINFO,void 0,ROLL,MAX,MIN,SCANTYPE,INSTCTRL,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,PUSHB.bind(void 0,1),PUSHB.bind(void 0,2),PUSHB.bind(void 0,3),PUSHB.bind(void 0,4),PUSHB.bind(void 0,5),PUSHB.bind(void 0,6),PUSHB.bind(void 0,7),PUSHB.bind(void 0,8),PUSHW.bind(void 0,1),PUSHW.bind(void 0,2),PUSHW.bind(void 0,3),PUSHW.bind(void 0,4),PUSHW.bind(void 0,5),PUSHW.bind(void 0,6),PUSHW.bind(void 0,7),PUSHW.bind(void 0,8),MDRP_MIRP.bind(void 0,0,0,0,0,0),MDRP_MIRP.bind(void 0,0,0,0,0,1),MDRP_MIRP.bind(void 0,0,0,0,0,2),MDRP_MIRP.bind(void 0,0,0,0,0,3),MDRP_MIRP.bind(void 0,0,0,0,1,0),MDRP_MIRP.bind(void 0,0,0,0,1,1),MDRP_MIRP.bind(void 0,0,0,0,1,2),MDRP_MIRP.bind(void 0,0,0,0,1,3),MDRP_MIRP.bind(void 0,0,0,1,0,0),MDRP_MIRP.bind(void 0,0,0,1,0,1),MDRP_MIRP.bind(void 0,0,0,1,0,2),MDRP_MIRP.bind(void 0,0,0,1,0,3),MDRP_MIRP.bind(void 0,0,0,1,1,0),MDRP_MIRP.bind(void 0,0,0,1,1,1),MDRP_MIRP.bind(void 0,0,0,1,1,2),MDRP_MIRP.bind(void 0,0,0,1,1,3),MDRP_MIRP.bind(void 0,0,1,0,0,0),MDRP_MIRP.bind(void 0,0,1,0,0,1),MDRP_MIRP.bind(void 0,0,1,0,0,2),MDRP_MIRP.bind(void 0,0,1,0,0,3),MDRP_MIRP.bind(void 0,0,1,0,1,0),MDRP_MIRP.bind(void 0,0,1,0,1,1),MDRP_MIRP.bind(void 0,0,1,0,1,2),MDRP_MIRP.bind(void 0,0,1,0,1,3),MDRP_MIRP.bind(void 0,0,1,1,0,0),MDRP_MIRP.bind(void 0,0,1,1,0,1),MDRP_MIRP.bind(void 0,0,1,1,0,2),MDRP_MIRP.bind(void 0,0,1,1,0,3),MDRP_MIRP.bind(void 0,0,1,1,1,0),MDRP_MIRP.bind(void 0,0,1,1,1,1),MDRP_MIRP.bind(void 0,0,1,1,1,2),MDRP_MIRP.bind(void 0,0,1,1,1,3),MDRP_MIRP.bind(void 0,1,0,0,0,0),MDRP_MIRP.bind(void 0,1,0,0,0,1),MDRP_MIRP.bind(void 0,1,0,0,0,2),MDRP_MIRP.bind(void 0,1,0,0,0,3),MDRP_MIRP.bind(void 0,1,0,0,1,0),MDRP_MIRP.bind(void 0,1,0,0,1,1),MDRP_MIRP.bind(void 0,1,0,0,1,2),MDRP_MIRP.bind(void 0,1,0,0,1,3),MDRP_MIRP.bind(void 0,1,0,1,0,0),MDRP_MIRP.bind(void 0,1,0,1,0,1),MDRP_MIRP.bind(void 0,1,0,1,0,2),MDRP_MIRP.bind(void 0,1,0,1,0,3),MDRP_MIRP.bind(void 0,1,0,1,1,0),MDRP_MIRP.bind(void 0,1,0,1,1,1),MDRP_MIRP.bind(void 0,1,0,1,1,2),MDRP_MIRP.bind(void 0,1,0,1,1,3),MDRP_MIRP.bind(void 0,1,1,0,0,0),MDRP_MIRP.bind(void 0,1,1,0,0,1),MDRP_MIRP.bind(void 0,1,1,0,0,2),MDRP_MIRP.bind(void 0,1,1,0,0,3),MDRP_MIRP.bind(void 0,1,1,0,1,0),MDRP_MIRP.bind(void 0,1,1,0,1,1),MDRP_MIRP.bind(void 0,1,1,0,1,2),MDRP_MIRP.bind(void 0,1,1,0,1,3),MDRP_MIRP.bind(void 0,1,1,1,0,0),MDRP_MIRP.bind(void 0,1,1,1,0,1),MDRP_MIRP.bind(void 0,1,1,1,0,2),MDRP_MIRP.bind(void 0,1,1,1,0,3),MDRP_MIRP.bind(void 0,1,1,1,1,0),MDRP_MIRP.bind(void 0,1,1,1,1,1),MDRP_MIRP.bind(void 0,1,1,1,1,2),MDRP_MIRP.bind(void 0,1,1,1,1,3)];function Token(_e){this.char=_e,this.state={},this.activeState=null}function ContextRange(_e,_,tt){this.contextName=tt,this.startIndex=_e,this.endOffset=_}function ContextChecker(_e,_,tt){this.contextName=_e,this.openRange=null,this.ranges=[],this.checkStart=_,this.checkEnd=tt}function ContextParams(_e,_){this.context=_e,this.index=_,this.length=_e.length,this.current=_e[_],this.backtrack=_e.slice(0,_),this.lookahead=_e.slice(_+1)}function Event$1(_e){this.eventId=_e,this.subscribers=[]}function initializeCoreEvents(_e){var _=this,tt=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];tt.forEach(function(rt){Object.defineProperty(_.events,rt,{value:new Event$1(rt)})}),_e&&tt.forEach(function(rt){var it=_e[rt];typeof it=="function"&&_.events[rt].subscribe(it)});var nt=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];nt.forEach(function(rt){_.events[rt].subscribe(_.updateContextsRanges)})}function Tokenizer(_e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],initializeCoreEvents.call(this,_e)}Token.prototype.setState=function(_e,_){return this.state[_e]=_,this.activeState={key:_e,value:this.state[_e]},this.activeState};Token.prototype.getState=function(_e){return this.state[_e]||null};Tokenizer.prototype.inboundIndex=function(_e){return _e>=0&&_e<this.tokens.length};Tokenizer.prototype.composeRUD=function(_e){var _=this,tt=!0,nt=_e.map(function(it){return _[it[0]].apply(_,it.slice(1).concat(tt))}),rt=function(it){return typeof it=="object"&&it.hasOwnProperty("FAIL")};if(nt.every(rt))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:nt.filter(rt)};this.dispatch("composeRUD",[nt.filter(function(it){return!rt(it)})])};Tokenizer.prototype.replaceRange=function(_e,_,tt,nt){_=_!==null?_:this.tokens.length;var rt=tt.every(function(at){return at instanceof Token});if(!isNaN(_e)&&this.inboundIndex(_e)&&rt){var it=this.tokens.splice.apply(this.tokens,[_e,_].concat(tt));return nt||this.dispatch("replaceToken",[_e,_,tt]),[it,tt]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Tokenizer.prototype.replaceToken=function(_e,_,tt){if(!isNaN(_e)&&this.inboundIndex(_e)&&_ instanceof Token){var nt=this.tokens.splice(_e,1,_);return tt||this.dispatch("replaceToken",[_e,_]),[nt[0],_]}else return{FAIL:"replaceToken: invalid token or index."}};Tokenizer.prototype.removeRange=function(_e,_,tt){_=isNaN(_)?this.tokens.length:_;var nt=this.tokens.splice(_e,_);return tt||this.dispatch("removeRange",[nt,_e,_]),nt};Tokenizer.prototype.removeToken=function(_e,_){if(!isNaN(_e)&&this.inboundIndex(_e)){var tt=this.tokens.splice(_e,1);return _||this.dispatch("removeToken",[tt,_e]),tt}else return{FAIL:"removeToken: invalid token index."}};Tokenizer.prototype.insertToken=function(_e,_,tt){var nt=_e.every(function(rt){return rt instanceof Token});return nt?(this.tokens.splice.apply(this.tokens,[_,0].concat(_e)),tt||this.dispatch("insertToken",[_e,_]),_e):{FAIL:"insertToken: invalid token(s)."}};Tokenizer.prototype.registerModifier=function(_e,_,tt){this.events.newToken.subscribe(function(nt,rt){var it=[nt,rt],at=_===null||_.apply(this,it)===!0,ot=[nt,rt];if(at){var st=tt.apply(this,ot);nt.setState(_e,st)}}),this.registeredModifiers.push(_e)};Event$1.prototype.subscribe=function(_e){return typeof _e=="function"?this.subscribers.push(_e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};Event$1.prototype.unsubscribe=function(_e){this.subscribers.splice(_e,1)};ContextParams.prototype.setCurrentIndex=function(_e){this.index=_e,this.current=this.context[_e],this.backtrack=this.context.slice(0,_e),this.lookahead=this.context.slice(_e+1)};ContextParams.prototype.get=function(_e){switch(!0){case _e===0:return this.current;case(_e<0&&Math.abs(_e)<=this.backtrack.length):return this.backtrack.slice(_e)[0];case(_e>0&&_e<=this.lookahead.length):return this.lookahead[_e-1];default:return null}};Tokenizer.prototype.rangeToText=function(_e){if(_e instanceof ContextRange)return this.getRangeTokens(_e).map(function(_){return _.char}).join("")};Tokenizer.prototype.getText=function(){return this.tokens.map(function(_e){return _e.char}).join("")};Tokenizer.prototype.getContext=function(_e){var _=this.registeredContexts[_e];return _||null};Tokenizer.prototype.on=function(_e,_){var tt=this.events[_e];return tt?tt.subscribe(_):null};Tokenizer.prototype.dispatch=function(_e,_){var tt=this,nt=this.events[_e];nt instanceof Event$1&&nt.subscribers.forEach(function(rt){rt.apply(tt,_||[])})};Tokenizer.prototype.registerContextChecker=function(_e,_,tt){if(this.getContext(_e))return{FAIL:"context name '"+_e+"' is already registered."};if(typeof _!="function")return{FAIL:"missing context start check."};if(typeof tt!="function")return{FAIL:"missing context end check."};var nt=new ContextChecker(_e,_,tt);return this.registeredContexts[_e]=nt,this.contextCheckers.push(nt),nt};Tokenizer.prototype.getRangeTokens=function(_e){var _=_e.startIndex+_e.endOffset;return[].concat(this.tokens.slice(_e.startIndex,_))};Tokenizer.prototype.getContextRanges=function(_e){var _=this.getContext(_e);return _?_.ranges:{FAIL:"context checker '"+_e+"' is not registered."}};Tokenizer.prototype.resetContextsRanges=function(){var _e=this.registeredContexts;for(var _ in _e)if(_e.hasOwnProperty(_)){var tt=_e[_];tt.ranges=[]}};Tokenizer.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var _e=this.tokens.map(function(nt){return nt.char}),_=0;_<_e.length;_++){var tt=new ContextParams(_e,_);this.runContextCheck(tt)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Tokenizer.prototype.setEndOffset=function(_e,_){var tt=this.getContext(_).openRange.startIndex,nt=new ContextRange(tt,_e,_),rt=this.getContext(_).ranges;return nt.rangeId=_+"."+rt.length,rt.push(nt),this.getContext(_).openRange=null,nt};Tokenizer.prototype.runContextCheck=function(_e){var _=this,tt=_e.index;this.contextCheckers.forEach(function(nt){var rt=nt.contextName,it=_.getContext(rt).openRange;if(!it&&nt.checkStart(_e)&&(it=new ContextRange(tt,null,rt),_.getContext(rt).openRange=it,_.dispatch("contextStart",[rt,tt])),it&&nt.checkEnd(_e)){var at=tt-it.startIndex+1,ot=_.setEndOffset(at,rt);_.dispatch("contextEnd",[rt,ot])}})};Tokenizer.prototype.tokenize=function(_e){this.tokens=[],this.resetContextsRanges();var _=Array.from(_e);this.dispatch("start");for(var tt=0;tt<_.length;tt++){var nt=_[tt],rt=new ContextParams(_,tt);this.dispatch("next",[rt]),this.runContextCheck(rt);var it=new Token(nt);this.tokens.push(it),this.dispatch("newToken",[it,rt])}return this.dispatch("end",[this.tokens]),this.tokens};function isArabicChar(_e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(_e)}function isIsolatedArabicChar(_e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(_e)}function isTashkeelArabicChar(_e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(_e)}function isLatinChar(_e){return/[A-z]/.test(_e)}function isWhiteSpace(_e){return/\s/.test(_e)}function FeatureQuery(_e){this.font=_e,this.features={}}function SubstitutionAction(_e){this.id=_e.id,this.tag=_e.tag,this.substitution=_e.substitution}function lookupCoverage(_e,_){if(!_e)return-1;switch(_.format){case 1:return _.glyphs.indexOf(_e);case 2:for(var tt=_.ranges,nt=0;nt<tt.length;nt++){var rt=tt[nt];if(_e>=rt.start&&_e<=rt.end){var it=_e-rt.start;return rt.index+it}}break;default:return-1}return-1}function singleSubstitutionFormat1(_e,_){var tt=lookupCoverage(_e,_.coverage);return tt===-1?null:_e+_.deltaGlyphId}function singleSubstitutionFormat2(_e,_){var tt=lookupCoverage(_e,_.coverage);return tt===-1?null:_.substitute[tt]}function lookupCoverageList(_e,_){for(var tt=[],nt=0;nt<_e.length;nt++){var rt=_e[nt],it=_.current;it=Array.isArray(it)?it[0]:it;var at=lookupCoverage(it,rt);at!==-1&&tt.push(at)}return tt.length!==_e.length?-1:tt}function chainingSubstitutionFormat3(_e,_){var tt=_.inputCoverage.length+_.lookaheadCoverage.length+_.backtrackCoverage.length;if(_e.context.length<tt)return[];var nt=lookupCoverageList(_.inputCoverage,_e);if(nt===-1)return[];var rt=_.inputCoverage.length-1;if(_e.lookahead.length<_.lookaheadCoverage.length)return[];for(var it=_e.lookahead.slice(rt);it.length&&isTashkeelArabicChar(it[0].char);)it.shift();var at=new ContextParams(it,0),ot=lookupCoverageList(_.lookaheadCoverage,at),st=[].concat(_e.backtrack);for(st.reverse();st.length&&isTashkeelArabicChar(st[0].char);)st.shift();if(st.length<_.backtrackCoverage.length)return[];var lt=new ContextParams(st,0),ct=lookupCoverageList(_.backtrackCoverage,lt),ut=nt.length===_.inputCoverage.length&&ot.length===_.lookaheadCoverage.length&&ct.length===_.backtrackCoverage.length,ft=[];if(ut)for(var pt=0;pt<_.lookupRecords.length;pt++)for(var gt=_.lookupRecords[pt],xt=gt.lookupListIndex,yt=this.getLookupByIndex(xt),mt=0;mt<yt.subtables.length;mt++){var At=yt.subtables[mt],vt=this.getLookupMethod(yt,At),Et=this.getSubstitutionType(yt,At);if(Et==="12")for(var Ct=0;Ct<nt.length;Ct++){var Tt=_e.get(Ct),bt=vt(Tt);bt&&ft.push(bt)}}return ft}function ligatureSubstitutionFormat1(_e,_){var tt=_e.current,nt=lookupCoverage(tt,_.coverage);if(nt===-1)return null;for(var rt,it=_.ligatureSets[nt],at=0;at<it.length;at++){rt=it[at];for(var ot=0;ot<rt.components.length;ot++){var st=_e.lookahead[ot],lt=rt.components[ot];if(st!==lt)break;if(ot===rt.components.length-1)return rt}}return null}function decompositionSubstitutionFormat1(_e,_){var tt=lookupCoverage(_e,_.coverage);return tt===-1?null:_.sequences[tt]}FeatureQuery.prototype.getDefaultScriptFeaturesIndexes=function(){for(var _e=this.font.tables.gsub.scripts,_=0;_<_e.length;_++){var tt=_e[_];if(tt.tag==="DFLT")return tt.script.defaultLangSys.featureIndexes}return[]};FeatureQuery.prototype.getScriptFeaturesIndexes=function(_e){var _=this.font.tables;if(!_.gsub)return[];if(!_e)return this.getDefaultScriptFeaturesIndexes();for(var tt=this.font.tables.gsub.scripts,nt=0;nt<tt.length;nt++){var rt=tt[nt];if(rt.tag===_e&&rt.script.defaultLangSys)return rt.script.defaultLangSys.featureIndexes;var it=rt.langSysRecords;if(it)for(var at=0;at<it.length;at++){var ot=it[at];if(ot.tag===_e){var st=ot.langSys;return st.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};FeatureQuery.prototype.mapTagsToFeatures=function(_e,_){for(var tt={},nt=0;nt<_e.length;nt++){var rt=_e[nt].tag,it=_e[nt].feature;tt[rt]=it}this.features[_].tags=tt};FeatureQuery.prototype.getScriptFeatures=function(_e){var _=this.features[_e];if(this.features.hasOwnProperty(_e))return _;var tt=this.getScriptFeaturesIndexes(_e);if(!tt)return null;var nt=this.font.tables.gsub;return _=tt.map(function(rt){return nt.features[rt]}),this.features[_e]=_,this.mapTagsToFeatures(_,_e),_};FeatureQuery.prototype.getSubstitutionType=function(_e,_){var tt=_e.lookupType.toString(),nt=_.substFormat.toString();return tt+nt};FeatureQuery.prototype.getLookupMethod=function(_e,_){var tt=this,nt=this.getSubstitutionType(_e,_);switch(nt){case"11":return function(rt){return singleSubstitutionFormat1.apply(tt,[rt,_])};case"12":return function(rt){return singleSubstitutionFormat2.apply(tt,[rt,_])};case"63":return function(rt){return chainingSubstitutionFormat3.apply(tt,[rt,_])};case"41":return function(rt){return ligatureSubstitutionFormat1.apply(tt,[rt,_])};case"21":return function(rt){return decompositionSubstitutionFormat1.apply(tt,[rt,_])};default:throw new Error("lookupType: "+_e.lookupType+" - substFormat: "+_.substFormat+" is not yet supported")}};FeatureQuery.prototype.lookupFeature=function(_e){var _=_e.contextParams,tt=_.index,nt=this.getFeature({tag:_e.tag,script:_e.script});if(!nt)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+_e.tag+"' for script '"+_e.script+"'.");for(var rt=this.getFeatureLookups(nt),it=[].concat(_.context),at=0;at<rt.length;at++)for(var ot=rt[at],st=this.getLookupSubtables(ot),lt=0;lt<st.length;lt++){var ct=st[lt],ut=this.getSubstitutionType(ot,ct),ft=this.getLookupMethod(ot,ct),pt=void 0;switch(ut){case"11":pt=ft(_.current),pt&&it.splice(tt,1,new SubstitutionAction({id:11,tag:_e.tag,substitution:pt}));break;case"12":pt=ft(_.current),pt&&it.splice(tt,1,new SubstitutionAction({id:12,tag:_e.tag,substitution:pt}));break;case"63":pt=ft(_),Array.isArray(pt)&&pt.length&&it.splice(tt,1,new SubstitutionAction({id:63,tag:_e.tag,substitution:pt}));break;case"41":pt=ft(_),pt&&it.splice(tt,1,new SubstitutionAction({id:41,tag:_e.tag,substitution:pt}));break;case"21":pt=ft(_.current),pt&&it.splice(tt,1,new SubstitutionAction({id:21,tag:_e.tag,substitution:pt}));break}_=new ContextParams(it,tt),!(Array.isArray(pt)&&!pt.length)&&(pt=null)}return it.length?it:null};FeatureQuery.prototype.supports=function(_e){if(!_e.script)return!1;this.getScriptFeatures(_e.script);var _=this.features.hasOwnProperty(_e.script);if(!_e.tag)return _;var tt=this.features[_e.script].some(function(nt){return nt.tag===_e.tag});return _&&tt};FeatureQuery.prototype.getLookupSubtables=function(_e){return _e.subtables||null};FeatureQuery.prototype.getLookupByIndex=function(_e){var _=this.font.tables.gsub.lookups;return _[_e]||null};FeatureQuery.prototype.getFeatureLookups=function(_e){return _e.lookupListIndexes.map(this.getLookupByIndex.bind(this))};FeatureQuery.prototype.getFeature=function(_){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(_.script)||this.getScriptFeatures(_.script);var tt=this.features[_.script];return tt?tt.tags[_.tag]?this.features[_.script].tags[_.tag]:null:{FAIL:"No feature for script "+_.script}};function arabicWordStartCheck(_e){var _=_e.current,tt=_e.get(-1);return tt===null&&isArabicChar(_)||!isArabicChar(tt)&&isArabicChar(_)}function arabicWordEndCheck(_e){var _=_e.get(1);return _===null||!isArabicChar(_)}var arabicWordCheck={startCheck:arabicWordStartCheck,endCheck:arabicWordEndCheck};function arabicSentenceStartCheck(_e){var _=_e.current,tt=_e.get(-1);return(isArabicChar(_)||isTashkeelArabicChar(_))&&!isArabicChar(tt)}function arabicSentenceEndCheck(_e){var _=_e.get(1);switch(!0){case _===null:return!0;case(!isArabicChar(_)&&!isTashkeelArabicChar(_)):var tt=isWhiteSpace(_);if(!tt)return!0;if(tt){var nt=!1;if(nt=_e.lookahead.some(function(rt){return isArabicChar(rt)||isTashkeelArabicChar(rt)}),!nt)return!0}break;default:return!1}}var arabicSentenceCheck={startCheck:arabicSentenceStartCheck,endCheck:arabicSentenceEndCheck};function singleSubstitutionFormat1$1(_e,_,tt){_[tt].setState(_e.tag,_e.substitution)}function singleSubstitutionFormat2$1(_e,_,tt){_[tt].setState(_e.tag,_e.substitution)}function chainingSubstitutionFormat3$1(_e,_,tt){_e.substitution.forEach(function(nt,rt){var it=_[tt+rt];it.setState(_e.tag,nt)})}function ligatureSubstitutionFormat1$1(_e,_,tt){var nt=_[tt];nt.setState(_e.tag,_e.substitution.ligGlyph);for(var rt=_e.substitution.components.length,it=0;it<rt;it++)nt=_[tt+it+1],nt.setState("deleted",!0)}var SUBSTITUTIONS={11:singleSubstitutionFormat1$1,12:singleSubstitutionFormat2$1,63:chainingSubstitutionFormat3$1,41:ligatureSubstitutionFormat1$1};function applySubstitution(_e,_,tt){_e instanceof SubstitutionAction&&SUBSTITUTIONS[_e.id]&&SUBSTITUTIONS[_e.id](_e,_,tt)}function willConnectPrev(_e){for(var _=[].concat(_e.backtrack),tt=_.length-1;tt>=0;tt--){var nt=_[tt],rt=isIsolatedArabicChar(nt),it=isTashkeelArabicChar(nt);if(!rt&&!it)return!0;if(rt)return!1}return!1}function willConnectNext(_e){if(isIsolatedArabicChar(_e.current))return!1;for(var _=0;_<_e.lookahead.length;_++){var tt=_e.lookahead[_],nt=isTashkeelArabicChar(tt);if(!nt)return!0}return!1}function arabicPresentationForms(_e){var _=this,tt="arab",nt=this.featuresTags[tt],rt=this.tokenizer.getRangeTokens(_e);if(rt.length!==1){var it=new ContextParams(rt.map(function(ot){return ot.getState("glyphIndex")}),0),at=new ContextParams(rt.map(function(ot){return ot.char}),0);rt.forEach(function(ot,st){if(!isTashkeelArabicChar(ot.char)){it.setCurrentIndex(st),at.setCurrentIndex(st);var lt=0;willConnectPrev(at)&&(lt|=1),willConnectNext(at)&&(lt|=2);var ct;switch(lt){case 1:ct="fina";break;case 2:ct="init";break;case 3:ct="medi";break}if(nt.indexOf(ct)!==-1){var ut=_.query.lookupFeature({tag:ct,script:tt,contextParams:it});if(ut instanceof Error)return console.info(ut.message);ut.forEach(function(ft,pt){ft instanceof SubstitutionAction&&(applySubstitution(ft,rt,pt),it.context[pt]=ft.substitution)})}}})}}function getContextParams(_e,_){var tt=_e.map(function(nt){return nt.activeState.value});return new ContextParams(tt,_||0)}function arabicRequiredLigatures(_e){var _=this,tt="arab",nt=this.tokenizer.getRangeTokens(_e),rt=getContextParams(nt);rt.context.forEach(function(it,at){rt.setCurrentIndex(at);var ot=_.query.lookupFeature({tag:"rlig",script:tt,contextParams:rt});ot.length&&(ot.forEach(function(st){return applySubstitution(st,nt,at)}),rt=getContextParams(nt))})}function latinWordStartCheck(_e){var _=_e.current,tt=_e.get(-1);return tt===null&&isLatinChar(_)||!isLatinChar(tt)&&isLatinChar(_)}function latinWordEndCheck(_e){var _=_e.get(1);return _===null||!isLatinChar(_)}var latinWordCheck={startCheck:latinWordStartCheck,endCheck:latinWordEndCheck};function getContextParams$1(_e,_){var tt=_e.map(function(nt){return nt.activeState.value});return new ContextParams(tt,_||0)}function latinLigature(_e){var _=this,tt="latn",nt=this.tokenizer.getRangeTokens(_e),rt=getContextParams$1(nt);rt.context.forEach(function(it,at){rt.setCurrentIndex(at);var ot=_.query.lookupFeature({tag:"liga",script:tt,contextParams:rt});ot.length&&(ot.forEach(function(st){return applySubstitution(st,nt,at)}),rt=getContextParams$1(nt))})}function Bidi(_e){this.baseDir=_e||"ltr",this.tokenizer=new Tokenizer,this.featuresTags={}}Bidi.prototype.setText=function(_e){this.text=_e};Bidi.prototype.contextChecks={latinWordCheck,arabicWordCheck,arabicSentenceCheck};function registerContextChecker(_e){var _=this.contextChecks[_e+"Check"];return this.tokenizer.registerContextChecker(_e,_.startCheck,_.endCheck)}function tokenizeText(){return registerContextChecker.call(this,"latinWord"),registerContextChecker.call(this,"arabicWord"),registerContextChecker.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function reverseArabicSentences(){var _e=this,_=this.tokenizer.getContextRanges("arabicSentence");_.forEach(function(tt){var nt=_e.tokenizer.getRangeTokens(tt);_e.tokenizer.replaceRange(tt.startIndex,tt.endOffset,nt.reverse())})}Bidi.prototype.registerFeatures=function(_e,_){var tt=this,nt=_.filter(function(rt){return tt.query.supports({script:_e,tag:rt})});this.featuresTags.hasOwnProperty(_e)?this.featuresTags[_e]=this.featuresTags[_e].concat(nt):this.featuresTags[_e]=nt};Bidi.prototype.applyFeatures=function(_e,_){if(!_e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new FeatureQuery(_e));for(var tt=0;tt<_.length;tt++){var nt=_[tt];this.query.supports({script:nt.script})&&this.registerFeatures(nt.script,nt.tags)}};Bidi.prototype.registerModifier=function(_e,_,tt){this.tokenizer.registerModifier(_e,_,tt)};function checkGlyphIndexStatus(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function applyArabicPresentationForms(){var _e=this,_="arab";if(this.featuresTags.hasOwnProperty(_)){checkGlyphIndexStatus.call(this);var tt=this.tokenizer.getContextRanges("arabicWord");tt.forEach(function(nt){arabicPresentationForms.call(_e,nt)})}}function applyArabicRequireLigatures(){var _e=this,_="arab";if(this.featuresTags.hasOwnProperty(_)){var tt=this.featuresTags[_];if(tt.indexOf("rlig")!==-1){checkGlyphIndexStatus.call(this);var nt=this.tokenizer.getContextRanges("arabicWord");nt.forEach(function(rt){arabicRequiredLigatures.call(_e,rt)})}}}function applyLatinLigatures(){var _e=this,_="latn";if(this.featuresTags.hasOwnProperty(_)){var tt=this.featuresTags[_];if(tt.indexOf("liga")!==-1){checkGlyphIndexStatus.call(this);var nt=this.tokenizer.getContextRanges("latinWord");nt.forEach(function(rt){latinLigature.call(_e,rt)})}}}Bidi.prototype.checkContextReady=function(_e){return!!this.tokenizer.getContext(_e)};Bidi.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(applyArabicPresentationForms.call(this),applyArabicRequireLigatures.call(this)),this.checkContextReady("latinWord")&&applyLatinLigatures.call(this),this.checkContextReady("arabicSentence")&&reverseArabicSentences.call(this)};Bidi.prototype.processText=function(_e){(!this.text||this.text!==_e)&&(this.setText(_e),tokenizeText.call(this),this.applyFeaturesToContexts())};Bidi.prototype.getBidiText=function(_e){return this.processText(_e),this.tokenizer.getText()};Bidi.prototype.getTextGlyphs=function(_e){this.processText(_e);for(var _=[],tt=0;tt<this.tokenizer.tokens.length;tt++){var nt=this.tokenizer.tokens[tt];if(!nt.state.deleted){var rt=nt.activeState.value;_.push(Array.isArray(rt)?rt[0]:rt)}}return _};function Font$1(_e){_e=_e||{},_e.tables=_e.tables||{},_e.empty||(checkArgument(_e.familyName,"When creating a new Font object, familyName is required."),checkArgument(_e.styleName,"When creating a new Font object, styleName is required."),checkArgument(_e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),checkArgument(_e.ascender,"When creating a new Font object, ascender is required."),checkArgument(_e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:_e.familyName||" "},fontSubfamily:{en:_e.styleName||" "},fullName:{en:_e.fullName||_e.familyName+" "+_e.styleName},postScriptName:{en:_e.postScriptName||(_e.familyName+_e.styleName).replace(/\s/g,"")},designer:{en:_e.designer||" "},designerURL:{en:_e.designerURL||" "},manufacturer:{en:_e.manufacturer||" "},manufacturerURL:{en:_e.manufacturerURL||" "},license:{en:_e.license||" "},licenseURL:{en:_e.licenseURL||" "},version:{en:_e.version||"Version 0.1"},description:{en:_e.description||" "},copyright:{en:_e.copyright||" "},trademark:{en:_e.trademark||" "}},this.unitsPerEm=_e.unitsPerEm||1e3,this.ascender=_e.ascender,this.descender=_e.descender,this.createdTimestamp=_e.createdTimestamp,this.tables=Object.assign(_e.tables,{os2:Object.assign({usWeightClass:_e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:_e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:_e.fsSelection||this.fsSelectionValues.REGULAR},_e.tables.os2)})),this.supported=!0,this.glyphs=new glyphset.GlyphSet(this,_e.glyphs||[]),this.encoding=new DefaultEncoding(this),this.position=new Position(this),this.substitution=new Substitution(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new Hinting(this)}})}Font$1.prototype.hasChar=function(_e){return this.encoding.charToGlyphIndex(_e)!==null};Font$1.prototype.charToGlyphIndex=function(_e){return this.encoding.charToGlyphIndex(_e)};Font$1.prototype.charToGlyph=function(_e){var _=this.charToGlyphIndex(_e),tt=this.glyphs.get(_);return tt||(tt=this.glyphs.get(0)),tt};Font$1.prototype.updateFeatures=function(_e){return this.defaultRenderOptions.features.map(function(_){return _.script==="latn"?{script:"latn",tags:_.tags.filter(function(tt){return _e[tt]})}:_})};Font$1.prototype.stringToGlyphs=function(_e,_){var tt=this,nt=new Bidi,rt=function(ut){return tt.charToGlyphIndex(ut.char)};nt.registerModifier("glyphIndex",null,rt);var it=_?this.updateFeatures(_.features):this.defaultRenderOptions.features;nt.applyFeatures(this,it);for(var at=nt.getTextGlyphs(_e),ot=at.length,st=new Array(ot),lt=this.glyphs.get(0),ct=0;ct<ot;ct+=1)st[ct]=this.glyphs.get(at[ct])||lt;return st};Font$1.prototype.nameToGlyphIndex=function(_e){return this.glyphNames.nameToGlyphIndex(_e)};Font$1.prototype.nameToGlyph=function(_e){var _=this.nameToGlyphIndex(_e),tt=this.glyphs.get(_);return tt||(tt=this.glyphs.get(0)),tt};Font$1.prototype.glyphIndexToName=function(_e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(_e):""};Font$1.prototype.getKerningValue=function(_e,_){_e=_e.index||_e,_=_.index||_;var tt=this.position.defaultKerningTables;return tt?this.position.getKerningValue(tt,_e,_):this.kerningPairs[_e+","+_]||0};Font$1.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Font$1.prototype.forEachGlyph=function(_e,_,tt,nt,rt,it){_=_!==void 0?_:0,tt=tt!==void 0?tt:0,nt=nt!==void 0?nt:72,rt=Object.assign({},this.defaultRenderOptions,rt);var at=1/this.unitsPerEm*nt,ot=this.stringToGlyphs(_e,rt),st;if(rt.kerning){var lt=rt.script||this.position.getDefaultScriptName();st=this.position.getKerningTables(lt,rt.language)}for(var ct=0;ct<ot.length;ct+=1){var ut=ot[ct];if(it.call(this,ut,_,tt,nt,rt),ut.advanceWidth&&(_+=ut.advanceWidth*at),rt.kerning&&ct<ot.length-1){var ft=st?this.position.getKerningValue(st,ut.index,ot[ct+1].index):this.getKerningValue(ut,ot[ct+1]);_+=ft*at}rt.letterSpacing?_+=rt.letterSpacing*nt:rt.tracking&&(_+=rt.tracking/1e3*nt)}return _};Font$1.prototype.getPath=function(_e,_,tt,nt,rt){var it=new Path;return this.forEachGlyph(_e,_,tt,nt,rt,function(at,ot,st,lt){var ct=at.getPath(ot,st,lt,rt,this);it.extend(ct)}),it};Font$1.prototype.getPaths=function(_e,_,tt,nt,rt){var it=[];return this.forEachGlyph(_e,_,tt,nt,rt,function(at,ot,st,lt){var ct=at.getPath(ot,st,lt,rt,this);it.push(ct)}),it};Font$1.prototype.getAdvanceWidth=function(_e,_,tt){return this.forEachGlyph(_e,0,0,_,tt,function(){})};Font$1.prototype.draw=function(_e,_,tt,nt,rt,it){this.getPath(_,tt,nt,rt,it).draw(_e)};Font$1.prototype.drawPoints=function(_e,_,tt,nt,rt,it){this.forEachGlyph(_,tt,nt,rt,it,function(at,ot,st,lt){at.drawPoints(_e,ot,st,lt)})};Font$1.prototype.drawMetrics=function(_e,_,tt,nt,rt,it){this.forEachGlyph(_,tt,nt,rt,it,function(at,ot,st,lt){at.drawMetrics(_e,ot,st,lt)})};Font$1.prototype.getEnglishName=function(_e){var _=this.names[_e];if(_)return _.en};Font$1.prototype.validate=function(){var _e=this;function _(nt,rt){}function tt(nt){var rt=_e.getEnglishName(nt);rt&&rt.trim().length>0}tt("fontFamily"),tt("weightName"),tt("manufacturer"),tt("copyright"),tt("version"),this.unitsPerEm>0};Font$1.prototype.toTables=function(){return sfnt.fontToTable(this)};Font$1.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Font$1.prototype.toArrayBuffer=function(){for(var _e=this.toTables(),_=_e.encode(),tt=new ArrayBuffer(_.length),nt=new Uint8Array(tt),rt=0;rt<_.length;rt++)nt[rt]=_[rt];return tt};Font$1.prototype.download=function(_e){var _=this.getEnglishName("fontFamily"),tt=this.getEnglishName("fontSubfamily");_e=_e||_.replace(/\s/g,"")+"-"+tt+".otf";var nt=this.toArrayBuffer();if(isBrowser())if(window.URL=window.URL||window.webkitURL,window.URL){var rt=new DataView(nt),it=new Blob([rt],{type:"font/opentype"}),at=document.createElement("a");at.href=window.URL.createObjectURL(it),at.download=_e;var ot=document.createEvent("MouseEvents");ot.initEvent("click",!0,!1),at.dispatchEvent(ot)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var st=require("fs"),lt=arrayBufferToNodeBuffer(nt);st.writeFileSync(_e,lt)}};Font$1.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Font$1.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Font$1.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var subtableParsers$1=new Array(10);subtableParsers$1[1]=function(){var _=this.offset+this.relativeOffset,tt=this.parseUShort();if(tt===1)return{posFormat:1,coverage:this.parsePointer(Parser$1.coverage),value:this.parseValueRecord()};if(tt===2)return{posFormat:2,coverage:this.parsePointer(Parser$1.coverage),values:this.parseValueRecordList()};check.assert(!1,"0x"+_.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};subtableParsers$1[2]=function(){var _=this.offset+this.relativeOffset,tt=this.parseUShort();check.assert(tt===1||tt===2,"0x"+_.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var nt=this.parsePointer(Parser$1.coverage),rt=this.parseUShort(),it=this.parseUShort();if(tt===1)return{posFormat:tt,coverage:nt,valueFormat1:rt,valueFormat2:it,pairSets:this.parseList(Parser$1.pointer(Parser$1.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(rt),value2:this.parseValueRecord(it)}})))};if(tt===2){var at=this.parsePointer(Parser$1.classDef),ot=this.parsePointer(Parser$1.classDef),st=this.parseUShort(),lt=this.parseUShort();return{posFormat:tt,coverage:nt,valueFormat1:rt,valueFormat2:it,classDef1:at,classDef2:ot,class1Count:st,class2Count:lt,classRecords:this.parseList(st,Parser$1.list(lt,function(){return{value1:this.parseValueRecord(rt),value2:this.parseValueRecord(it)}}))}}};subtableParsers$1[3]=function(){return{error:"GPOS Lookup 3 not supported"}};subtableParsers$1[4]=function(){return{error:"GPOS Lookup 4 not supported"}};subtableParsers$1[5]=function(){return{error:"GPOS Lookup 5 not supported"}};subtableParsers$1[6]=function(){return{error:"GPOS Lookup 6 not supported"}};subtableParsers$1[7]=function(){return{error:"GPOS Lookup 7 not supported"}};subtableParsers$1[8]=function(){return{error:"GPOS Lookup 8 not supported"}};subtableParsers$1[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);var __defProp=Object.defineProperty,__defNormalProp=(_e,_,tt)=>_ in _e?__defProp(_e,_,{enumerable:!0,configurable:!0,writable:!0,value:tt}):_e[_]=tt,__publicField=(_e,_,tt)=>(__defNormalProp(_e,typeof _!="symbol"?_+"":_,tt),tt);new Color$1;const _DRACOExporter=class{parse(_e,_={decodeSpeed:5,encodeSpeed:5,encoderMethod:_DRACOExporter.MESH_EDGEBREAKER_ENCODING,quantization:[16,8,8,8,8],exportUvs:!0,exportNormals:!0,exportColor:!1}){if(_e instanceof BufferGeometry&&_e.isBufferGeometry)throw new Error("DRACOExporter: The first parameter of parse() is now an instance of Mesh or Points.");if(DracoEncoderModule===void 0)throw new Error("THREE.DRACOExporter: required the draco_encoder to work.");const tt=_e.geometry,nt=DracoEncoderModule(),rt=new nt.Encoder;let it,at;if(!tt.isBufferGeometry)throw new Error("THREE.DRACOExporter.parse(geometry, options): geometry is not a THREE.BufferGeometry instance.");if(_e instanceof Mesh&&_e.isMesh){it=new nt.MeshBuilder,at=new nt.Mesh;const ft=tt.getAttribute("position");it.AddFloatAttributeToMesh(at,nt.POSITION,ft.count,ft.itemSize,ft.array);const pt=tt.getIndex();if(pt!==null)it.AddFacesToMesh(at,pt.count/3,pt.array);else{const gt=new(ft.count>65535?Uint32Array:Uint16Array)(ft.count);for(let xt=0;xt<gt.length;xt++)gt[xt]=xt;it.AddFacesToMesh(at,ft.count,gt)}if(_.exportNormals){const gt=tt.getAttribute("normal");gt!==void 0&&it.AddFloatAttributeToMesh(at,nt.NORMAL,gt.count,gt.itemSize,gt.array)}if(_.exportUvs){const gt=tt.getAttribute("uv");gt!==void 0&&it.AddFloatAttributeToMesh(at,nt.TEX_COORD,gt.count,gt.itemSize,gt.array)}if(_.exportColor){const gt=tt.getAttribute("color");gt!==void 0&&it.AddFloatAttributeToMesh(at,nt.COLOR,gt.count,gt.itemSize,gt.array)}}else if(_e instanceof Points&&_e.isPoints){it=new nt.PointCloudBuilder,at=new nt.PointCloud;const ft=tt.getAttribute("position");if(it.AddFloatAttribute(at,nt.POSITION,ft.count,ft.itemSize,ft.array),_.exportColor){const pt=tt.getAttribute("color");pt!==void 0&&it.AddFloatAttribute(at,nt.COLOR,pt.count,pt.itemSize,pt.array)}}else throw new Error("DRACOExporter: Unsupported object type.");const ot=new nt.DracoInt8Array,st=_.encodeSpeed!==void 0?_.encodeSpeed:5,lt=_.decodeSpeed!==void 0?_.decodeSpeed:5;if(rt.SetSpeedOptions(st,lt),_.encoderMethod!==void 0&&rt.SetEncodingMethod(_.encoderMethod),_.quantization!==void 0)for(let ft=0;ft<5;ft++)_.quantization[ft]!==void 0&&rt.SetAttributeQuantization(ft,_.quantization[ft]);let ct;if(_e instanceof Mesh&&_e.isMesh?ct=rt.EncodeMeshToDracoBuffer(at,ot):ct=rt.EncodePointCloudToDracoBuffer(at,!0,ot),nt.destroy(at),ct===0)throw new Error("THREE.DRACOExporter: Draco encoding failed.");const ut=new Int8Array(new ArrayBuffer(ct));for(let ft=0;ft<ct;ft++)ut[ft]=ot.GetValue(ft);return nt.destroy(ot),nt.destroy(rt),nt.destroy(it),ut}};let DRACOExporter=_DRACOExporter;__publicField(DRACOExporter,"MESH_EDGEBREAKER_ENCODING",1);__publicField(DRACOExporter,"MESH_SEQUENTIAL_ENCODING",0);__publicField(DRACOExporter,"POINT_CLOUD",0);__publicField(DRACOExporter,"TRIANGULAR_MESH",1);__publicField(DRACOExporter,"INVALID",-1);__publicField(DRACOExporter,"POSITION",0);__publicField(DRACOExporter,"NORMAL",1);__publicField(DRACOExporter,"COLOR",2);__publicField(DRACOExporter,"TEX_COORD",3);__publicField(DRACOExporter,"GENERIC",4);const _Reflector=class extends Mesh{constructor(_e,_={}){super(_e),this.isReflector=!0,this.type="Reflector",this.camera=new PerspectiveCamera;const tt=this,nt=_.color!==void 0?new Color$1(_.color):new Color$1(8355711),rt=_.textureWidth||512,it=_.textureHeight||512,at=_.clipBias||0,ot=_.shader||_Reflector.ReflectorShader,st=_.multisample!==void 0?_.multisample:4,lt=new Plane,ct=new Vector3,ut=new Vector3,ft=new Vector3,pt=new Matrix4,gt=new Vector3(0,0,-1),xt=new Vector4,yt=new Vector3,mt=new Vector3,At=new Vector4,vt=new Matrix4,Et=this.camera,Ct=new WebGLRenderTarget(rt,it,{samples:st,type:HalfFloatType}),Tt=new ShaderMaterial({uniforms:UniformsUtils.clone(ot.uniforms),fragmentShader:ot.fragmentShader,vertexShader:ot.vertexShader});Tt.uniforms.tDiffuse.value=Ct.texture,Tt.uniforms.color.value=nt,Tt.uniforms.textureMatrix.value=vt,this.material=Tt,this.onBeforeRender=function(bt,It,wt){if(ut.setFromMatrixPosition(tt.matrixWorld),ft.setFromMatrixPosition(wt.matrixWorld),pt.extractRotation(tt.matrixWorld),ct.set(0,0,1),ct.applyMatrix4(pt),yt.subVectors(ut,ft),yt.dot(ct)>0)return;yt.reflect(ct).negate(),yt.add(ut),pt.extractRotation(wt.matrixWorld),gt.set(0,0,-1),gt.applyMatrix4(pt),gt.add(ft),mt.subVectors(ut,gt),mt.reflect(ct).negate(),mt.add(ut),Et.position.copy(yt),Et.up.set(0,1,0),Et.up.applyMatrix4(pt),Et.up.reflect(ct),Et.lookAt(mt),Et.far=wt.far,Et.updateMatrixWorld(),Et.projectionMatrix.copy(wt.projectionMatrix),vt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),vt.multiply(Et.projectionMatrix),vt.multiply(Et.matrixWorldInverse),vt.multiply(tt.matrixWorld),lt.setFromNormalAndCoplanarPoint(ct,ut),lt.applyMatrix4(Et.matrixWorldInverse),xt.set(lt.normal.x,lt.normal.y,lt.normal.z,lt.constant);const Rt=Et.projectionMatrix;At.x=(Math.sign(xt.x)+Rt.elements[8])/Rt.elements[0],At.y=(Math.sign(xt.y)+Rt.elements[9])/Rt.elements[5],At.z=-1,At.w=(1+Rt.elements[10])/Rt.elements[14],xt.multiplyScalar(2/xt.dot(At)),Rt.elements[2]=xt.x,Rt.elements[6]=xt.y,Rt.elements[10]=xt.z+1-at,Rt.elements[14]=xt.w,tt.visible=!1;const Ft=bt.getRenderTarget(),Ut=bt.xr.enabled,Gt=bt.shadowMap.autoUpdate,Ht=bt.toneMapping;let jt=!1;"outputColorSpace"in bt?jt=bt.outputColorSpace==="srgb":jt=bt.outputEncoding===3001,bt.xr.enabled=!1,bt.shadowMap.autoUpdate=!1,"outputColorSpace"in bt?bt.outputColorSpace="linear-srgb":bt.outputEncoding=3e3,bt.toneMapping=NoToneMapping,bt.setRenderTarget(Ct),bt.state.buffers.depth.setMask(!0),bt.autoClear===!1&&bt.clear(),bt.render(It,Et),bt.xr.enabled=Ut,bt.shadowMap.autoUpdate=Gt,bt.toneMapping=Ht,"outputColorSpace"in bt?bt.outputColorSpace=jt?"srgb":"srgb-linear":bt.outputEncoding=jt?3001:3e3,bt.setRenderTarget(Ft);const Xt=wt.viewport;Xt!==void 0&&bt.state.viewport(Xt),tt.visible=!0},this.getRenderTarget=function(){return Ct},this.dispose=function(){Ct.dispose(),tt.material.dispose()}}};let Reflector=_Reflector;__publicField(Reflector,"ReflectorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

		}`});const _Refractor=class extends Mesh{constructor(_e,_={}){super(_e),this.isRefractor=!0,this.type="Refractor",this.camera=new PerspectiveCamera;const tt=this,nt=_.color!==void 0?new Color$1(_.color):new Color$1(8355711),rt=_.textureWidth||512,it=_.textureHeight||512,at=_.clipBias||0,ot=_.shader||_Refractor.RefractorShader,st=_.multisample!==void 0?_.multisample:4,lt=this.camera;lt.matrixAutoUpdate=!1,lt.userData.refractor=!0;const ct=new Plane,ut=new Matrix4,ft=new WebGLRenderTarget(rt,it,{samples:st,type:HalfFloatType});this.material=new ShaderMaterial({uniforms:UniformsUtils.clone(ot.uniforms),vertexShader:ot.vertexShader,fragmentShader:ot.fragmentShader,transparent:!0}),this.material.uniforms.color.value=nt,this.material.uniforms.tDiffuse.value=ft.texture,this.material.uniforms.textureMatrix.value=ut;const pt=function(){const At=new Vector3,vt=new Vector3,Et=new Matrix4,Ct=new Vector3,Tt=new Vector3;return function(It){return At.setFromMatrixPosition(tt.matrixWorld),vt.setFromMatrixPosition(It.matrixWorld),Ct.subVectors(At,vt),Et.extractRotation(tt.matrixWorld),Tt.set(0,0,1),Tt.applyMatrix4(Et),Ct.dot(Tt)<0}}(),gt=function(){const At=new Vector3,vt=new Vector3,Et=new Quaternion,Ct=new Vector3;return function(){tt.matrixWorld.decompose(vt,Et,Ct),At.set(0,0,1).applyQuaternion(Et).normalize(),At.negate(),ct.setFromNormalAndCoplanarPoint(At,vt)}}(),xt=function(){const At=new Plane,vt=new Vector4,Et=new Vector4;return function(Tt){lt.matrixWorld.copy(Tt.matrixWorld),lt.matrixWorldInverse.copy(lt.matrixWorld).invert(),lt.projectionMatrix.copy(Tt.projectionMatrix),lt.far=Tt.far,At.copy(ct),At.applyMatrix4(lt.matrixWorldInverse),vt.set(At.normal.x,At.normal.y,At.normal.z,At.constant);const bt=lt.projectionMatrix;Et.x=(Math.sign(vt.x)+bt.elements[8])/bt.elements[0],Et.y=(Math.sign(vt.y)+bt.elements[9])/bt.elements[5],Et.z=-1,Et.w=(1+bt.elements[10])/bt.elements[14],vt.multiplyScalar(2/vt.dot(Et)),bt.elements[2]=vt.x,bt.elements[6]=vt.y,bt.elements[10]=vt.z+1-at,bt.elements[14]=vt.w}}();function yt(At){ut.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ut.multiply(At.projectionMatrix),ut.multiply(At.matrixWorldInverse),ut.multiply(tt.matrixWorld)}function mt(At,vt,Et){tt.visible=!1;const Ct=At.getRenderTarget(),Tt=At.xr.enabled,bt=At.shadowMap.autoUpdate,It=At.toneMapping;let wt=!1;"outputColorSpace"in At?wt=At.outputColorSpace==="srgb":wt=At.outputEncoding===3001,At.xr.enabled=!1,At.shadowMap.autoUpdate=!1,"outputColorSpace"in At?At.outputColorSpace="linear-srgb":At.outputEncoding=3e3,At.toneMapping=NoToneMapping,At.setRenderTarget(ft),At.autoClear===!1&&At.clear(),At.render(vt,lt),At.xr.enabled=Tt,At.shadowMap.autoUpdate=bt,At.toneMapping=It,At.setRenderTarget(Ct),"outputColorSpace"in At?At.outputColorSpace=wt?"srgb":"srgb-linear":At.outputEncoding=wt?3001:3e3;const Rt=Et.viewport;Rt!==void 0&&At.state.viewport(Rt),tt.visible=!0}this.onBeforeRender=function(At,vt,Et){Et.userData.refractor!==!0&&pt(Et)&&(gt(),yt(Et),xt(Et),mt(At,vt,Et))},this.getRenderTarget=function(){return ft},this.dispose=function(){ft.dispose(),tt.material.dispose()}}};let Refractor=_Refractor;__publicField(Refractor,"RefractorShader",{uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec4 vUv;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

		}`});const geometry=new BufferGeometry,_Lensflare=class extends Mesh{constructor(){super(_Lensflare.Geometry,new MeshBasicMaterial({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const _e=new Vector3,_=new Vector3,tt=new DataTexture(new Uint8Array(16*16*3),16,16,RGBAFormat);tt.minFilter=NearestFilter,tt.magFilter=NearestFilter,tt.wrapS=ClampToEdgeWrapping,tt.wrapT=ClampToEdgeWrapping;const nt=new DataTexture(new Uint8Array(16*16*3),16,16,RGBAFormat);nt.minFilter=NearestFilter,nt.magFilter=NearestFilter,nt.wrapS=ClampToEdgeWrapping,nt.wrapT=ClampToEdgeWrapping;const rt=_Lensflare.Geometry,it=new RawShaderMaterial({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),at=new RawShaderMaterial({uniforms:{map:{value:tt},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),ot=new Mesh(rt,it),st=[],lt=LensflareElement.Shader,ct=new RawShaderMaterial({uniforms:{map:{value:null},occlusionMap:{value:nt},color:{value:new Color$1(16777215)},scale:{value:new Vector2},screenPosition:{value:new Vector3}},vertexShader:lt.vertexShader,fragmentShader:lt.fragmentShader,blending:AdditiveBlending,transparent:!0,depthWrite:!1}),ut=new Mesh(rt,ct);this.addElement=function(yt){st.push(yt)};const ft=new Vector2,pt=new Vector2,gt=new Box2,xt=new Vector4;this.onBeforeRender=function(yt,mt,At){yt.getCurrentViewport(xt);const vt=xt.w/xt.z,Et=xt.z/2,Ct=xt.w/2;let Tt=16/xt.w;if(ft.set(Tt*vt,Tt),gt.min.set(xt.x,xt.y),gt.max.set(xt.x+(xt.z-16),xt.y+(xt.w-16)),_.setFromMatrixPosition(this.matrixWorld),_.applyMatrix4(At.matrixWorldInverse),!(_.z>0)&&(_e.copy(_).applyMatrix4(At.projectionMatrix),pt.x=xt.x+_e.x*Et+Et-8,pt.y=xt.y+_e.y*Ct+Ct-8,gt.containsPoint(pt))){yt.copyFramebufferToTexture(pt,tt);let bt=it.uniforms;bt.scale.value=ft,bt.screenPosition.value=_e,yt.renderBufferDirect(At,null,rt,it,ot,null),yt.copyFramebufferToTexture(pt,nt),bt=at.uniforms,bt.scale.value=ft,bt.screenPosition.value=_e,yt.renderBufferDirect(At,null,rt,at,ot,null);const It=-_e.x*2,wt=-_e.y*2;for(let Rt=0,Ft=st.length;Rt<Ft;Rt++){const Ut=st[Rt],Gt=ct.uniforms;Gt.color.value.copy(Ut.color),Gt.map.value=Ut.texture,Gt.screenPosition.value.x=_e.x+It*Ut.distance,Gt.screenPosition.value.y=_e.y+wt*Ut.distance,Tt=Ut.size/xt.w;const Ht=xt.w/xt.z;Gt.scale.value.set(Tt*Ht,Tt),ct.uniformsNeedUpdate=!0,yt.renderBufferDirect(At,null,rt,ct,ut,null)}}},this.dispose=function(){it.dispose(),at.dispose(),ct.dispose(),tt.dispose(),nt.dispose();for(let yt=0,mt=st.length;yt<mt;yt++)st[yt].texture.dispose()}}};let Lensflare=_Lensflare;__publicField(Lensflare,"Geometry",geometry);class LensflareElement{constructor(_,tt=1,nt=0,rt=new Color$1(16777215)){this.texture=_,this.size=tt,this.distance=nt,this.color=rt}}__publicField(LensflareElement,"Shader",{uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`});class SimplexNoise{constructor(_=Math){__publicField(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),__publicField(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),__publicField(this,"p",[]),__publicField(this,"perm",[]),__publicField(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),__publicField(this,"dot",(tt,nt,rt)=>tt[0]*nt+tt[1]*rt),__publicField(this,"dot3",(tt,nt,rt,it)=>tt[0]*nt+tt[1]*rt+tt[2]*it),__publicField(this,"dot4",(tt,nt,rt,it,at)=>tt[0]*nt+tt[1]*rt+tt[2]*it+tt[3]*at),__publicField(this,"noise",(tt,nt)=>{let rt,it,at;const ot=.5*(Math.sqrt(3)-1),st=(tt+nt)*ot,lt=Math.floor(tt+st),ct=Math.floor(nt+st),ut=(3-Math.sqrt(3))/6,ft=(lt+ct)*ut,pt=lt-ft,gt=ct-ft,xt=tt-pt,yt=nt-gt;let mt=0,At=1;xt>yt&&(mt=1,At=0);const vt=xt-mt+ut,Et=yt-At+ut,Ct=xt-1+2*ut,Tt=yt-1+2*ut,bt=lt&255,It=ct&255,wt=this.perm[bt+this.perm[It]]%12,Rt=this.perm[bt+mt+this.perm[It+At]]%12,Ft=this.perm[bt+1+this.perm[It+1]]%12;let Ut=.5-xt*xt-yt*yt;Ut<0?rt=0:(Ut*=Ut,rt=Ut*Ut*this.dot(this.grad3[wt],xt,yt));let Gt=.5-vt*vt-Et*Et;Gt<0?it=0:(Gt*=Gt,it=Gt*Gt*this.dot(this.grad3[Rt],vt,Et));let Ht=.5-Ct*Ct-Tt*Tt;return Ht<0?at=0:(Ht*=Ht,at=Ht*Ht*this.dot(this.grad3[Ft],Ct,Tt)),70*(rt+it+at)}),__publicField(this,"noise3d",(tt,nt,rt)=>{let it,at,ot,st;const lt=.3333333333333333,ct=(tt+nt+rt)*lt,ut=Math.floor(tt+ct),ft=Math.floor(nt+ct),pt=Math.floor(rt+ct),gt=1/6,xt=(ut+ft+pt)*gt,yt=ut-xt,mt=ft-xt,At=pt-xt,vt=tt-yt,Et=nt-mt,Ct=rt-At;let Tt,bt,It,wt,Rt,Ft;vt>=Et?Et>=Ct?(Tt=1,bt=0,It=0,wt=1,Rt=1,Ft=0):vt>=Ct?(Tt=1,bt=0,It=0,wt=1,Rt=0,Ft=1):(Tt=0,bt=0,It=1,wt=1,Rt=0,Ft=1):Et<Ct?(Tt=0,bt=0,It=1,wt=0,Rt=1,Ft=1):vt<Ct?(Tt=0,bt=1,It=0,wt=0,Rt=1,Ft=1):(Tt=0,bt=1,It=0,wt=1,Rt=1,Ft=0);const Ut=vt-Tt+gt,Gt=Et-bt+gt,Ht=Ct-It+gt,jt=vt-wt+2*gt,Xt=Et-Rt+2*gt,Jt=Ct-Ft+2*gt,Dt=vt-1+3*gt,zt=Et-1+3*gt,$t=Ct-1+3*gt,Lt=ut&255,Vt=ft&255,tn=pt&255,an=this.perm[Lt+this.perm[Vt+this.perm[tn]]]%12,on=this.perm[Lt+Tt+this.perm[Vt+bt+this.perm[tn+It]]]%12,sn=this.perm[Lt+wt+this.perm[Vt+Rt+this.perm[tn+Ft]]]%12,ln=this.perm[Lt+1+this.perm[Vt+1+this.perm[tn+1]]]%12;let cn=.6-vt*vt-Et*Et-Ct*Ct;cn<0?it=0:(cn*=cn,it=cn*cn*this.dot3(this.grad3[an],vt,Et,Ct));let In=.6-Ut*Ut-Gt*Gt-Ht*Ht;In<0?at=0:(In*=In,at=In*In*this.dot3(this.grad3[on],Ut,Gt,Ht));let zn=.6-jt*jt-Xt*Xt-Jt*Jt;zn<0?ot=0:(zn*=zn,ot=zn*zn*this.dot3(this.grad3[sn],jt,Xt,Jt));let yn=.6-Dt*Dt-zt*zt-$t*$t;return yn<0?st=0:(yn*=yn,st=yn*yn*this.dot3(this.grad3[ln],Dt,zt,$t)),32*(it+at+ot+st)}),__publicField(this,"noise4d",(tt,nt,rt,it)=>{const at=this.grad4,ot=this.simplex,st=this.perm,lt=(Math.sqrt(5)-1)/4,ct=(5-Math.sqrt(5))/20;let ut,ft,pt,gt,xt;const yt=(tt+nt+rt+it)*lt,mt=Math.floor(tt+yt),At=Math.floor(nt+yt),vt=Math.floor(rt+yt),Et=Math.floor(it+yt),Ct=(mt+At+vt+Et)*ct,Tt=mt-Ct,bt=At-Ct,It=vt-Ct,wt=Et-Ct,Rt=tt-Tt,Ft=nt-bt,Ut=rt-It,Gt=it-wt,Ht=Rt>Ft?32:0,jt=Rt>Ut?16:0,Xt=Ft>Ut?8:0,Jt=Rt>Gt?4:0,Dt=Ft>Gt?2:0,zt=Ut>Gt?1:0,$t=Ht+jt+Xt+Jt+Dt+zt;let Lt,Vt,tn,an,on,sn,ln,cn,In,zn,yn,Wt;Lt=ot[$t][0]>=3?1:0,Vt=ot[$t][1]>=3?1:0,tn=ot[$t][2]>=3?1:0,an=ot[$t][3]>=3?1:0,on=ot[$t][0]>=2?1:0,sn=ot[$t][1]>=2?1:0,ln=ot[$t][2]>=2?1:0,cn=ot[$t][3]>=2?1:0,In=ot[$t][0]>=1?1:0,zn=ot[$t][1]>=1?1:0,yn=ot[$t][2]>=1?1:0,Wt=ot[$t][3]>=1?1:0;const _n=Rt-Lt+ct,gn=Ft-Vt+ct,vn=Ut-tn+ct,mn=Gt-an+ct,Wn=Rt-on+2*ct,xn=Ft-sn+2*ct,Dn=Ut-ln+2*ct,Fn=Gt-cn+2*ct,bn=Rt-In+3*ct,jn=Ft-zn+3*ct,Nt=Ut-yn+3*ct,kt=Gt-Wt+3*ct,rn=Rt-1+4*ct,Mn=Ft-1+4*ct,wn=Ut-1+4*ct,Tn=Gt-1+4*ct,Gn=mt&255,Un=At&255,dn=vt&255,Vn=Et&255,Qn=st[Gn+st[Un+st[dn+st[Vn]]]]%32,Nn=st[Gn+Lt+st[Un+Vt+st[dn+tn+st[Vn+an]]]]%32,kn=st[Gn+on+st[Un+sn+st[dn+ln+st[Vn+cn]]]]%32,$n=st[Gn+In+st[Un+zn+st[dn+yn+st[Vn+Wt]]]]%32,Yn=st[Gn+1+st[Un+1+st[dn+1+st[Vn+1]]]]%32;let tr=.6-Rt*Rt-Ft*Ft-Ut*Ut-Gt*Gt;tr<0?ut=0:(tr*=tr,ut=tr*tr*this.dot4(at[Qn],Rt,Ft,Ut,Gt));let nn=.6-_n*_n-gn*gn-vn*vn-mn*mn;nn<0?ft=0:(nn*=nn,ft=nn*nn*this.dot4(at[Nn],_n,gn,vn,mn));let pn=.6-Wn*Wn-xn*xn-Dn*Dn-Fn*Fn;pn<0?pt=0:(pn*=pn,pt=pn*pn*this.dot4(at[kn],Wn,xn,Dn,Fn));let An=.6-bn*bn-jn*jn-Nt*Nt-kt*kt;An<0?gt=0:(An*=An,gt=An*An*this.dot4(at[$n],bn,jn,Nt,kt));let Hn=.6-rn*rn-Mn*Mn-wn*wn-Tn*Tn;return Hn<0?xt=0:(Hn*=Hn,xt=Hn*Hn*this.dot4(at[Yn],rn,Mn,wn,Tn)),27*(ut+ft+pt+gt+xt)});for(let tt=0;tt<256;tt++)this.p[tt]=Math.floor(_.random()*256);for(let tt=0;tt<512;tt++)this.perm[tt]=this.p[tt&255]}}const _LightningStrike=class extends BufferGeometry{constructor(_e={}){super(),this.isLightningStrike=!0,this.type="LightningStrike",this.init(_LightningStrike.copyParameters(_e,_e)),this.createMesh()}static createRandomGenerator(){const _=[];for(let nt=0;nt<2053;nt++)_.push(Math.random());const tt={currentSeed:0,random:function(){const nt=_[tt.currentSeed];return tt.currentSeed=(tt.currentSeed+1)%2053,nt},getSeed:function(){return tt.currentSeed/2053},setSeed:function(nt){tt.currentSeed=Math.floor(nt*2053)%2053}};return tt}static copyParameters(_e={},_={}){const tt=function(nt){return _===_e?nt:nt.clone()};return _e.sourceOffset=_.sourceOffset!==void 0?tt(_.sourceOffset):new Vector3(0,100,0),_e.destOffset=_.destOffset!==void 0?tt(_.destOffset):new Vector3(0,0,0),_e.timeScale=_.timeScale!==void 0?_.timeScale:1,_e.roughness=_.roughness!==void 0?_.roughness:.9,_e.straightness=_.straightness!==void 0?_.straightness:.7,_e.up0=_.up0!==void 0?tt(_.up0):new Vector3(0,0,1),_e.up1=_.up1!==void 0?tt(_.up1):new Vector3(0,0,1),_e.radius0=_.radius0!==void 0?_.radius0:1,_e.radius1=_.radius1!==void 0?_.radius1:1,_e.radius0Factor=_.radius0Factor!==void 0?_.radius0Factor:.5,_e.radius1Factor=_.radius1Factor!==void 0?_.radius1Factor:.2,_e.minRadius=_.minRadius!==void 0?_.minRadius:.2,_e.isEternal=_.isEternal!==void 0?_.isEternal:_.birthTime===void 0||_.deathTime===void 0,_e.birthTime=_.birthTime,_e.deathTime=_.deathTime,_e.propagationTimeFactor=_.propagationTimeFactor!==void 0?_.propagationTimeFactor:.1,_e.vanishingTimeFactor=_.vanishingTimeFactor!==void 0?_.vanishingTimeFactor:.9,_e.subrayPeriod=_.subrayPeriod!==void 0?_.subrayPeriod:4,_e.subrayDutyCycle=_.subrayDutyCycle!==void 0?_.subrayDutyCycle:.6,_e.maxIterations=_.maxIterations!==void 0?_.maxIterations:9,_e.isStatic=_.isStatic!==void 0?_.isStatic:!1,_e.ramification=_.ramification!==void 0?_.ramification:5,_e.maxSubrayRecursion=_.maxSubrayRecursion!==void 0?_.maxSubrayRecursion:3,_e.recursionProbability=_.recursionProbability!==void 0?_.recursionProbability:.6,_e.generateUVs=_.generateUVs!==void 0?_.generateUVs:!1,_e.randomGenerator=_.randomGenerator,_e.noiseSeed=_.noiseSeed,_e.onDecideSubrayCreation=_.onDecideSubrayCreation,_e.onSubrayCreation=_.onSubrayCreation,_e}update(_e){this.isStatic||(this.rayParameters.isEternal||this.rayParameters.birthTime<=_e&&_e<=this.rayParameters.deathTime?(this.updateMesh(_e),_e<this.subrays[0].endPropagationTime?this.state=_LightningStrike.RAY_PROPAGATING:_e>this.subrays[0].beginVanishingTime?this.state=_LightningStrike.RAY_VANISHING:this.state=_LightningStrike.RAY_STEADY,this.visible=!0):(this.visible=!1,_e<this.rayParameters.birthTime?this.state=_LightningStrike.RAY_UNBORN:this.state=_LightningStrike.RAY_EXTINGUISHED))}init(_e){this.rayParameters=_e,this.maxIterations=_e.maxIterations!==void 0?Math.floor(_e.maxIterations):9,_e.maxIterations=this.maxIterations,this.isStatic=_e.isStatic!==void 0?_e.isStatic:!1,_e.isStatic=this.isStatic,this.ramification=_e.ramification!==void 0?Math.floor(_e.ramification):5,_e.ramification=this.ramification,this.maxSubrayRecursion=_e.maxSubrayRecursion!==void 0?Math.floor(_e.maxSubrayRecursion):3,_e.maxSubrayRecursion=this.maxSubrayRecursion,this.recursionProbability=_e.recursionProbability!==void 0?_e.recursionProbability:.6,_e.recursionProbability=this.recursionProbability,this.generateUVs=_e.generateUVs!==void 0?_e.generateUVs:!1,_e.generateUVs=this.generateUVs,_e.randomGenerator!==void 0?(this.randomGenerator=_e.randomGenerator,this.seedGenerator=_e.randomGenerator,_e.noiseSeed!==void 0&&this.seedGenerator.setSeed(_e.noiseSeed)):(this.randomGenerator=_LightningStrike.createRandomGenerator(),this.seedGenerator=Math),_e.onDecideSubrayCreation!==void 0?this.onDecideSubrayCreation=_e.onDecideSubrayCreation:(this.createDefaultSubrayCreationCallbacks(),_e.onSubrayCreation!==void 0&&(this.onSubrayCreation=_e.onSubrayCreation)),this.state=_LightningStrike.RAY_INITIALIZED,this.maxSubrays=Math.ceil(1+Math.pow(this.ramification,Math.max(0,this.maxSubrayRecursion-1))),_e.maxSubrays=this.maxSubrays,this.maxRaySegments=2*(1<<this.maxIterations),this.subrays=[];for(let _=0;_<this.maxSubrays;_++)this.subrays.push(this.createSubray());this.raySegments=[];for(let _=0;_<this.maxRaySegments;_++)this.raySegments.push(this.createSegment());this.time=0,this.timeFraction=0,this.currentSegmentCallback=null,this.currentCreateTriangleVertices=this.generateUVs?this.createTriangleVerticesWithUVs:this.createTriangleVerticesWithoutUVs,this.numSubrays=0,this.currentSubray=null,this.currentSegmentIndex=0,this.isInitialSegment=!1,this.subrayProbability=0,this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.vertices=null,this.uvs=null,this.indices=null,this.positionAttribute=null,this.uvsAttribute=null,this.simplexX=new SimplexNoise(this.seedGenerator),this.simplexY=new SimplexNoise(this.seedGenerator),this.simplexZ=new SimplexNoise(this.seedGenerator),this.forwards=new Vector3,this.forwardsFill=new Vector3,this.side=new Vector3,this.down=new Vector3,this.middlePos=new Vector3,this.middleLinPos=new Vector3,this.newPos=new Vector3,this.vPos=new Vector3,this.cross1=new Vector3}createMesh(){const _e=1<<this.maxIterations,_=3*(_e+1)*this.maxSubrays,tt=18*_e*this.maxSubrays;this.vertices=new Float32Array(_*3),this.indices=new Uint32Array(tt),this.generateUVs&&(this.uvs=new Float32Array(_*2)),this.fillMesh(0),this.setIndex(new Uint32BufferAttribute(this.indices,1)),this.positionAttribute=new Float32BufferAttribute(this.vertices,3),this.setAttribute("position",this.positionAttribute),this.generateUVs&&(this.uvsAttribute=new Float32BufferAttribute(new Float32Array(this.uvs),2),this.setAttribute("uv",this.uvsAttribute)),this.isStatic||(this.index.usage=DynamicDrawUsage,this.positionAttribute.usage=DynamicDrawUsage,this.generateUVs&&(this.uvsAttribute.usage=DynamicDrawUsage)),this.vertices=this.positionAttribute.array,this.indices=this.index.array,this.generateUVs&&(this.uvs=this.uvsAttribute.array)}updateMesh(_e){this.fillMesh(_e),this.drawRange.count=this.currentIndex,this.index.needsUpdate=!0,this.positionAttribute.needsUpdate=!0,this.generateUVs&&(this.uvsAttribute.needsUpdate=!0)}fillMesh(_e){const _=this;this.currentVertex=0,this.currentIndex=0,this.currentCoordinate=0,this.currentUVCoordinate=0,this.fractalRay(_e,function(nt){const rt=_.currentSubray;_e<rt.birthTime||(this.rayParameters.isEternal&&_.currentSubray.recursion==0?(_.createPrism(nt),_.onDecideSubrayCreation(nt,_)):_e<rt.endPropagationTime?_.timeFraction>=nt.fraction0*rt.propagationTimeFactor&&(_.createPrism(nt),_.onDecideSubrayCreation(nt,_)):_e<rt.beginVanishingTime?(_.createPrism(nt),_.onDecideSubrayCreation(nt,_)):(_.timeFraction<=rt.vanishingTimeFactor+nt.fraction1*(1-rt.vanishingTimeFactor)&&_.createPrism(nt),_.onDecideSubrayCreation(nt,_)))})}addNewSubray(){return this.subrays[this.numSubrays++]}initSubray(_e,_){_e.pos0.copy(_.sourceOffset),_e.pos1.copy(_.destOffset),_e.up0.copy(_.up0),_e.up1.copy(_.up1),_e.radius0=_.radius0,_e.radius1=_.radius1,_e.birthTime=_.birthTime,_e.deathTime=_.deathTime,_e.timeScale=_.timeScale,_e.roughness=_.roughness,_e.straightness=_.straightness,_e.propagationTimeFactor=_.propagationTimeFactor,_e.vanishingTimeFactor=_.vanishingTimeFactor,_e.maxIterations=this.maxIterations,_e.seed=_.noiseSeed!==void 0?_.noiseSeed:0,_e.recursion=0}fractalRay(_e,_){this.time=_e,this.currentSegmentCallback=_,this.numSubrays=0,this.initSubray(this.addNewSubray(),this.rayParameters);for(let tt=0;tt<this.numSubrays;tt++){const nt=this.subrays[tt];this.currentSubray=nt,this.randomGenerator.setSeed(nt.seed),nt.endPropagationTime=MathUtils.lerp(nt.birthTime,nt.deathTime,nt.propagationTimeFactor),nt.beginVanishingTime=MathUtils.lerp(nt.deathTime,nt.birthTime,1-nt.vanishingTimeFactor);const rt=this.randomGenerator.random;nt.linPos0.set(rt(),rt(),rt()).multiplyScalar(1e3),nt.linPos1.set(rt(),rt(),rt()).multiplyScalar(1e3),this.timeFraction=(_e-nt.birthTime)/(nt.deathTime-nt.birthTime),this.currentSegmentIndex=0,this.isInitialSegment=!0;const it=this.getNewSegment();it.iteration=0,it.pos0.copy(nt.pos0),it.pos1.copy(nt.pos1),it.linPos0.copy(nt.linPos0),it.linPos1.copy(nt.linPos1),it.up0.copy(nt.up0),it.up1.copy(nt.up1),it.radius0=nt.radius0,it.radius1=nt.radius1,it.fraction0=0,it.fraction1=1,it.positionVariationFactor=1-nt.straightness,this.subrayProbability=this.ramification*Math.pow(this.recursionProbability,nt.recursion)/(1<<nt.maxIterations),this.fractalRayRecursive(it)}this.currentSegmentCallback=null,this.currentSubray=null}fractalRayRecursive(_e){if(_e.iteration>=this.currentSubray.maxIterations){this.currentSegmentCallback(_e);return}this.forwards.subVectors(_e.pos1,_e.pos0);let _=this.forwards.length();_<1e-6&&(this.forwards.set(0,0,.01),_=this.forwards.length());const tt=(_e.radius0+_e.radius1)*.5,nt=(_e.fraction0+_e.fraction1)*.5,rt=this.time*this.currentSubray.timeScale*Math.pow(2,_e.iteration);this.middlePos.lerpVectors(_e.pos0,_e.pos1,.5),this.middleLinPos.lerpVectors(_e.linPos0,_e.linPos1,.5);const it=this.middleLinPos;this.newPos.set(this.simplexX.noise4d(it.x,it.y,it.z,rt),this.simplexY.noise4d(it.x,it.y,it.z,rt),this.simplexZ.noise4d(it.x,it.y,it.z,rt)),this.newPos.multiplyScalar(_e.positionVariationFactor*_),this.newPos.add(this.middlePos);const at=this.getNewSegment();at.pos0.copy(_e.pos0),at.pos1.copy(this.newPos),at.linPos0.copy(_e.linPos0),at.linPos1.copy(this.middleLinPos),at.up0.copy(_e.up0),at.up1.copy(_e.up1),at.radius0=_e.radius0,at.radius1=tt,at.fraction0=_e.fraction0,at.fraction1=nt,at.positionVariationFactor=_e.positionVariationFactor*this.currentSubray.roughness,at.iteration=_e.iteration+1;const ot=this.getNewSegment();ot.pos0.copy(this.newPos),ot.pos1.copy(_e.pos1),ot.linPos0.copy(this.middleLinPos),ot.linPos1.copy(_e.linPos1),this.cross1.crossVectors(_e.up0,this.forwards.normalize()),ot.up0.crossVectors(this.forwards,this.cross1).normalize(),ot.up1.copy(_e.up1),ot.radius0=tt,ot.radius1=_e.radius1,ot.fraction0=nt,ot.fraction1=_e.fraction1,ot.positionVariationFactor=_e.positionVariationFactor*this.currentSubray.roughness,ot.iteration=_e.iteration+1,this.fractalRayRecursive(at),this.fractalRayRecursive(ot)}createPrism(_e){this.forwardsFill.subVectors(_e.pos1,_e.pos0).normalize(),this.isInitialSegment&&(this.currentCreateTriangleVertices(_e.pos0,_e.up0,this.forwardsFill,_e.radius0,0),this.isInitialSegment=!1),this.currentCreateTriangleVertices(_e.pos1,_e.up0,this.forwardsFill,_e.radius1,_e.fraction1),this.createPrismFaces()}createTriangleVerticesWithoutUVs(_e,_,tt,nt){this.side.crossVectors(_,tt).multiplyScalar(nt*_LightningStrike.COS30DEG),this.down.copy(_).multiplyScalar(-nt*_LightningStrike.SIN30DEG);const rt=this.vPos,it=this.vertices;rt.copy(_e).sub(this.side).add(this.down),it[this.currentCoordinate++]=rt.x,it[this.currentCoordinate++]=rt.y,it[this.currentCoordinate++]=rt.z,rt.copy(_e).add(this.side).add(this.down),it[this.currentCoordinate++]=rt.x,it[this.currentCoordinate++]=rt.y,it[this.currentCoordinate++]=rt.z,rt.copy(_).multiplyScalar(nt).add(_e),it[this.currentCoordinate++]=rt.x,it[this.currentCoordinate++]=rt.y,it[this.currentCoordinate++]=rt.z,this.currentVertex+=3}createTriangleVerticesWithUVs(_e,_,tt,nt,rt){this.side.crossVectors(_,tt).multiplyScalar(nt*_LightningStrike.COS30DEG),this.down.copy(_).multiplyScalar(-nt*_LightningStrike.SIN30DEG);const it=this.vPos,at=this.vertices,ot=this.uvs;it.copy(_e).sub(this.side).add(this.down),at[this.currentCoordinate++]=it.x,at[this.currentCoordinate++]=it.y,at[this.currentCoordinate++]=it.z,ot[this.currentUVCoordinate++]=rt,ot[this.currentUVCoordinate++]=0,it.copy(_e).add(this.side).add(this.down),at[this.currentCoordinate++]=it.x,at[this.currentCoordinate++]=it.y,at[this.currentCoordinate++]=it.z,ot[this.currentUVCoordinate++]=rt,ot[this.currentUVCoordinate++]=.5,it.copy(_).multiplyScalar(nt).add(_e),at[this.currentCoordinate++]=it.x,at[this.currentCoordinate++]=it.y,at[this.currentCoordinate++]=it.z,ot[this.currentUVCoordinate++]=rt,ot[this.currentUVCoordinate++]=1,this.currentVertex+=3}createPrismFaces(_e){const _=this.indices;_e=this.currentVertex-6,_[this.currentIndex++]=_e+1,_[this.currentIndex++]=_e+2,_[this.currentIndex++]=_e+5,_[this.currentIndex++]=_e+1,_[this.currentIndex++]=_e+5,_[this.currentIndex++]=_e+4,_[this.currentIndex++]=_e+0,_[this.currentIndex++]=_e+1,_[this.currentIndex++]=_e+4,_[this.currentIndex++]=_e+0,_[this.currentIndex++]=_e+4,_[this.currentIndex++]=_e+3,_[this.currentIndex++]=_e+2,_[this.currentIndex++]=_e+0,_[this.currentIndex++]=_e+3,_[this.currentIndex++]=_e+2,_[this.currentIndex++]=_e+3,_[this.currentIndex++]=_e+5}createDefaultSubrayCreationCallbacks(){const _e=this.randomGenerator.random;this.onDecideSubrayCreation=function(it,at){const ot=at.currentSubray,st=at.rayParameters.subrayPeriod,lt=at.rayParameters.subrayDutyCycle,ct=at.rayParameters.isEternal&&ot.recursion==0?-_e()*st:MathUtils.lerp(ot.birthTime,ot.endPropagationTime,it.fraction0)-_e()*st,ut=at.time-ct,ft=Math.floor(ut/st),pt=_e()*(ft+1),gt=ut%st<=lt*st;let xt=0;if(gt&&(xt=at.subrayProbability),ot.recursion<at.maxSubrayRecursion&&at.numSubrays<at.maxSubrays&&_e()<xt){const yt=at.addNewSubray(),mt=at.randomGenerator.getSeed();yt.seed=pt,at.randomGenerator.setSeed(pt),yt.recursion=ot.recursion+1,yt.maxIterations=Math.max(1,ot.maxIterations-1),yt.linPos0.set(_e(),_e(),_e()).multiplyScalar(1e3),yt.linPos1.set(_e(),_e(),_e()).multiplyScalar(1e3),yt.up0.copy(ot.up0),yt.up1.copy(ot.up1),yt.radius0=it.radius0*at.rayParameters.radius0Factor,yt.radius1=Math.min(at.rayParameters.minRadius,it.radius1*at.rayParameters.radius1Factor),yt.birthTime=ct+ft*st,yt.deathTime=yt.birthTime+st*lt,!at.rayParameters.isEternal&&ot.recursion==0&&(yt.birthTime=Math.max(yt.birthTime,ot.birthTime),yt.deathTime=Math.min(yt.deathTime,ot.deathTime)),yt.timeScale=ot.timeScale*2,yt.roughness=ot.roughness,yt.straightness=ot.straightness,yt.propagationTimeFactor=ot.propagationTimeFactor,yt.vanishingTimeFactor=ot.vanishingTimeFactor,at.onSubrayCreation(it,ot,yt,at),at.randomGenerator.setSeed(mt)}};const _=new Vector3,tt=new Vector3,nt=new Vector3,rt=new Vector3;this.onSubrayCreation=function(it,at,ot,st){st.subrayCylinderPosition(it,at,ot,.5,.6,.2)},this.subrayConePosition=function(it,at,ot,st,lt,ct){ot.pos0.copy(it.pos0),_.subVectors(at.pos1,at.pos0),tt.copy(_).normalize(),_.multiplyScalar(it.fraction0+(1-it.fraction0)*(_e()*st));const ut=_.length();nt.crossVectors(at.up0,tt);const ft=2*Math.PI*_e();nt.multiplyScalar(Math.cos(ft)),rt.copy(at.up0).multiplyScalar(Math.sin(ft)),ot.pos1.copy(nt).add(rt).multiplyScalar(ut*lt*(ct+_e()*(1-ct))).add(_).add(at.pos0)},this.subrayCylinderPosition=function(it,at,ot,st,lt,ct){ot.pos0.copy(it.pos0),_.subVectors(at.pos1,at.pos0),tt.copy(_).normalize(),_.multiplyScalar(it.fraction0+(1-it.fraction0)*((2*_e()-1)*st));const ut=_.length();nt.crossVectors(at.up0,tt);const ft=2*Math.PI*_e();nt.multiplyScalar(Math.cos(ft)),rt.copy(at.up0).multiplyScalar(Math.sin(ft)),ot.pos1.copy(nt).add(rt).multiplyScalar(ut*lt*(ct+_e()*(1-ct))).add(_).add(at.pos0)}}createSubray(){return{seed:0,maxIterations:0,recursion:0,pos0:new Vector3,pos1:new Vector3,linPos0:new Vector3,linPos1:new Vector3,up0:new Vector3,up1:new Vector3,radius0:0,radius1:0,birthTime:0,deathTime:0,timeScale:0,roughness:0,straightness:0,propagationTimeFactor:0,vanishingTimeFactor:0,endPropagationTime:0,beginVanishingTime:0}}createSegment(){return{iteration:0,pos0:new Vector3,pos1:new Vector3,linPos0:new Vector3,linPos1:new Vector3,up0:new Vector3,up1:new Vector3,radius0:0,radius1:0,fraction0:0,fraction1:0,positionVariationFactor:0}}getNewSegment(){return this.raySegments[this.currentSegmentIndex++]}copy(_e){return super.copy(_e),this.init(_LightningStrike.copyParameters({},_e.rayParameters)),this}clone(){return new this.constructor(_LightningStrike.copyParameters({},this.rayParameters))}};let LightningStrike=_LightningStrike;__publicField(LightningStrike,"RAY_INITIALIZED",0);__publicField(LightningStrike,"RAY_UNBORN",1);__publicField(LightningStrike,"RAY_PROPAGATING",2);__publicField(LightningStrike,"RAY_STEADY",3);__publicField(LightningStrike,"RAY_VANISHING",4);__publicField(LightningStrike,"RAY_EXTINGUISHED",5);__publicField(LightningStrike,"COS30DEG",Math.cos(30*Math.PI/180));__publicField(LightningStrike,"SIN30DEG",Math.sin(30*Math.PI/180));const _ReflectorForSSRPass=class extends Mesh{constructor(_e,_={}){super(_e),this.isReflectorForSSRPass=!0,this.type="ReflectorForSSRPass";const tt=this,nt=_.color!==void 0?new Color$1(_.color):new Color$1(8355711),rt=_.textureWidth||512,it=_.textureHeight||512,at=_.clipBias||0,ot=_.shader||_ReflectorForSSRPass.ReflectorShader,st=_.useDepthTexture===!0,lt=new Vector3(0,1,0),ct=new Vector3,ut=new Vector3;tt.needsUpdate=!1,tt.maxDistance=_ReflectorForSSRPass.ReflectorShader.uniforms.maxDistance.value,tt.opacity=_ReflectorForSSRPass.ReflectorShader.uniforms.opacity.value,tt.color=nt,tt.resolution=_.resolution||new Vector2(window.innerWidth,window.innerHeight),tt._distanceAttenuation=_ReflectorForSSRPass.ReflectorShader.defines.DISTANCE_ATTENUATION,Object.defineProperty(tt,"distanceAttenuation",{get(){return tt._distanceAttenuation},set(Ft){tt._distanceAttenuation!==Ft&&(tt._distanceAttenuation=Ft,tt.material.defines.DISTANCE_ATTENUATION=Ft,tt.material.needsUpdate=!0)}}),tt._fresnel=_ReflectorForSSRPass.ReflectorShader.defines.FRESNEL,Object.defineProperty(tt,"fresnel",{get(){return tt._fresnel},set(Ft){tt._fresnel!==Ft&&(tt._fresnel=Ft,tt.material.defines.FRESNEL=Ft,tt.material.needsUpdate=!0)}});const ft=new Vector3,pt=new Vector3,gt=new Vector3,xt=new Matrix4,yt=new Vector3(0,0,-1),mt=new Vector3,At=new Vector3,vt=new Matrix4,Et=new PerspectiveCamera;let Ct;st&&(Ct=new DepthTexture,Ct.type=UnsignedShortType,Ct.minFilter=NearestFilter,Ct.magFilter=NearestFilter);const Tt={depthTexture:st?Ct:null,type:HalfFloatType},bt=new WebGLRenderTarget(rt,it,Tt),It=new ShaderMaterial({transparent:st,defines:Object.assign({},_ReflectorForSSRPass.ReflectorShader.defines,{useDepthTexture:st}),uniforms:UniformsUtils.clone(ot.uniforms),fragmentShader:ot.fragmentShader,vertexShader:ot.vertexShader});It.uniforms.tDiffuse.value=bt.texture,It.uniforms.color.value=tt.color,It.uniforms.textureMatrix.value=vt,st&&(It.uniforms.tDepth.value=bt.depthTexture),this.material=It;const Rt=[new Plane(new Vector3(0,1,0),at)];this.doRender=function(Ft,Ut,Gt){if(It.uniforms.maxDistance.value=tt.maxDistance,It.uniforms.color.value=tt.color,It.uniforms.opacity.value=tt.opacity,ct.copy(Gt.position).normalize(),ut.copy(ct).reflect(lt),It.uniforms.fresnelCoe.value=(ct.dot(ut)+1)/2,pt.setFromMatrixPosition(tt.matrixWorld),gt.setFromMatrixPosition(Gt.matrixWorld),xt.extractRotation(tt.matrixWorld),ft.set(0,0,1),ft.applyMatrix4(xt),mt.subVectors(pt,gt),mt.dot(ft)>0)return;mt.reflect(ft).negate(),mt.add(pt),xt.extractRotation(Gt.matrixWorld),yt.set(0,0,-1),yt.applyMatrix4(xt),yt.add(gt),At.subVectors(pt,yt),At.reflect(ft).negate(),At.add(pt),Et.position.copy(mt),Et.up.set(0,1,0),Et.up.applyMatrix4(xt),Et.up.reflect(ft),Et.lookAt(At),Et.far=Gt.far,Et.updateMatrixWorld(),Et.projectionMatrix.copy(Gt.projectionMatrix),It.uniforms.virtualCameraNear.value=Gt.near,It.uniforms.virtualCameraFar.value=Gt.far,It.uniforms.virtualCameraMatrixWorld.value=Et.matrixWorld,It.uniforms.virtualCameraProjectionMatrix.value=Gt.projectionMatrix,It.uniforms.virtualCameraProjectionMatrixInverse.value=Gt.projectionMatrixInverse,It.uniforms.resolution.value=tt.resolution,vt.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),vt.multiply(Et.projectionMatrix),vt.multiply(Et.matrixWorldInverse),vt.multiply(tt.matrixWorld);const Ht=Ft.getRenderTarget(),jt=Ft.xr.enabled,Xt=Ft.shadowMap.autoUpdate,Jt=Ft.clippingPlanes;Ft.xr.enabled=!1,Ft.shadowMap.autoUpdate=!1,Ft.clippingPlanes=Rt,Ft.setRenderTarget(bt),Ft.state.buffers.depth.setMask(!0),Ft.autoClear===!1&&Ft.clear(),Ft.render(Ut,Et),Ft.xr.enabled=jt,Ft.shadowMap.autoUpdate=Xt,Ft.clippingPlanes=Jt,Ft.setRenderTarget(Ht);const Dt=Gt.viewport;Dt!==void 0&&Ft.state.viewport(Dt)},this.getRenderTarget=function(){return bt}}};let ReflectorForSSRPass=_ReflectorForSSRPass;__publicField(ReflectorForSSRPass,"ReflectorShader",{defines:{DISTANCE_ATTENUATION:!0,FRESNEL:!0},uniforms:{color:{value:null},tDiffuse:{value:null},tDepth:{value:null},textureMatrix:{value:new Matrix4},maxDistance:{value:180},opacity:{value:.5},fresnelCoe:{value:null},virtualCameraNear:{value:null},virtualCameraFar:{value:null},virtualCameraProjectionMatrix:{value:new Matrix4},virtualCameraMatrixWorld:{value:new Matrix4},virtualCameraProjectionMatrixInverse:{value:new Matrix4},resolution:{value:new Vector2}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		uniform sampler2D tDepth;
		uniform float maxDistance;
		uniform float opacity;
		uniform float fresnelCoe;
		uniform float virtualCameraNear;
		uniform float virtualCameraFar;
		uniform mat4 virtualCameraProjectionMatrix;
		uniform mat4 virtualCameraProjectionMatrixInverse;
		uniform mat4 virtualCameraMatrixWorld;
		uniform vec2 resolution;
		varying vec4 vUv;
		#include <packing>
		float blendOverlay( float base, float blend ) {
			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );
		}
		vec3 blendOverlay( vec3 base, vec3 blend ) {
			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			return perspectiveDepthToViewZ( depth, virtualCameraNear, virtualCameraFar );
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( virtualCameraProjectionMatrixInverse * clipPosition ).xyz;//view
		}
		void main() {
			vec4 base = texture2DProj( tDiffuse, vUv );
			#ifdef useDepthTexture
				vec2 uv=(gl_FragCoord.xy-.5)/resolution.xy;
				uv.x=1.-uv.x;
				float depth = texture2DProj( tDepth, vUv ).r;
				float viewZ = getViewZ( depth );
				float clipW = virtualCameraProjectionMatrix[2][3] * viewZ+virtualCameraProjectionMatrix[3][3];
				vec3 viewPosition=getViewPosition( uv, depth, clipW );
				vec3 worldPosition=(virtualCameraMatrixWorld*vec4(viewPosition,1)).xyz;
				if(worldPosition.y>maxDistance) discard;
				float op=opacity;
				#ifdef DISTANCE_ATTENUATION
					float ratio=1.-(worldPosition.y/maxDistance);
					float attenuation=ratio*ratio;
					op=opacity*attenuation;
				#endif
				#ifdef FRESNEL
					op*=fresnelCoe;
				#endif
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), op );
			#else
				gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );
			#endif
		}
	`});const SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3},up:{value:new Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},material=new ShaderMaterial({name:"SkyShader",fragmentShader:SkyShader.fragmentShader,vertexShader:SkyShader.vertexShader,uniforms:UniformsUtils.clone(SkyShader.uniforms),side:BackSide,depthWrite:!1});class Sky extends Mesh{constructor(){super(new BoxGeometry(1,1,1),material)}}__publicField(Sky,"SkyShader",SkyShader);__publicField(Sky,"material",material);const _Water2=class extends Mesh{constructor(_e,_={}){super(_e),this.isWater=!0,this.type="Water";const tt=this,nt=_.color!==void 0?new Color$1(_.color):new Color$1(16777215),rt=_.textureWidth||512,it=_.textureHeight||512,at=_.clipBias||0,ot=_.flowDirection||new Vector2(1,0),st=_.flowSpeed||.03,lt=_.reflectivity||.02,ct=_.scale||1,ut=_.shader||_Water2.WaterShader,ft=_.encoding!==void 0?_.encoding:3e3,pt=_.flowMap||void 0,gt=_.normalMap0,xt=_.normalMap1,yt=.15,mt=yt*.5,At=new Matrix4,vt=new Clock;if(Reflector===void 0){console.error("THREE.Water: Required component Reflector not found.");return}if(Refractor===void 0){console.error("THREE.Water: Required component Refractor not found.");return}const Et=new Reflector(_e,{textureWidth:rt,textureHeight:it,clipBias:at,encoding:ft}),Ct=new Refractor(_e,{textureWidth:rt,textureHeight:it,clipBias:at,encoding:ft});Et.matrixAutoUpdate=!1,Ct.matrixAutoUpdate=!1,this.material=new ShaderMaterial({uniforms:UniformsUtils.merge([UniformsLib.fog,ut.uniforms]),vertexShader:ut.vertexShader,fragmentShader:ut.fragmentShader,transparent:!0,fog:!0}),pt!==void 0?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:pt}):this.material.uniforms.flowDirection={type:"v2",value:ot},gt.wrapS=gt.wrapT=RepeatWrapping,xt.wrapS=xt.wrapT=RepeatWrapping,this.material.uniforms.tReflectionMap.value=Et.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=Ct.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=gt,this.material.uniforms.tNormalMap1.value=xt,this.material.uniforms.color.value=nt,this.material.uniforms.reflectivity.value=lt,this.material.uniforms.textureMatrix.value=At,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=mt,this.material.uniforms.config.value.z=mt,this.material.uniforms.config.value.w=ct;function Tt(It){At.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),At.multiply(It.projectionMatrix),At.multiply(It.matrixWorldInverse),At.multiply(tt.matrixWorld)}function bt(){const It=vt.getDelta(),wt=tt.material.uniforms.config;wt.value.x+=st*It,wt.value.y=wt.value.x+mt,wt.value.x>=yt?(wt.value.x=0,wt.value.y=mt):wt.value.y>=yt&&(wt.value.y=wt.value.y-yt)}this.onBeforeRender=function(It,wt,Rt){Tt(Rt),bt(),tt.visible=!1,Et.matrixWorld.copy(tt.matrixWorld),Ct.matrixWorld.copy(tt.matrixWorld),Et.onBeforeRender(It,wt,Rt),Ct.onBeforeRender(It,wt,Rt),tt.visible=!0}}};let Water2=_Water2;__publicField(Water2,"WaterShader",{uniforms:{color:{value:null},reflectivity:{value:0},tReflectionMap:{value:null},tRefractionMap:{value:null},tNormalMap0:{value:null},tNormalMap1:{value:null},textureMatrix:{value:null},config:{value:new Vector4}},vertexShader:`

		#include <common>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>

		uniform mat4 textureMatrix;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			vUv = uv;
			vCoord = textureMatrix * vec4( position, 1.0 );

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vToEye = cameraPosition - worldPosition.xyz;

			vec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex
			gl_Position = projectionMatrix * mvPosition;

			#include <logdepthbuf_vertex>
			#include <fog_vertex>

		}`,fragmentShader:`

		#include <common>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>

		uniform sampler2D tReflectionMap;
		uniform sampler2D tRefractionMap;
		uniform sampler2D tNormalMap0;
		uniform sampler2D tNormalMap1;

		#ifdef USE_FLOWMAP
			uniform sampler2D tFlowMap;
		#else
			uniform vec2 flowDirection;
		#endif

		uniform vec3 color;
		uniform float reflectivity;
		uniform vec4 config;

		varying vec4 vCoord;
		varying vec2 vUv;
		varying vec3 vToEye;

		void main() {

			#include <logdepthbuf_fragment>

			float flowMapOffset0 = config.x;
			float flowMapOffset1 = config.y;
			float halfCycle = config.z;
			float scale = config.w;

			vec3 toEye = normalize( vToEye );

			// determine flow direction
			vec2 flow;
			#ifdef USE_FLOWMAP
				flow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;
			#else
				flow = flowDirection;
			#endif
			flow.x *= - 1.0;

			// sample normal maps (distort uvs with flowdata)
			vec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );
			vec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );

			// linear interpolate to get the final normal color
			float flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;
			vec4 normalColor = mix( normalColor0, normalColor1, flowLerp );

			// calculate normal vector
			vec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );

			// calculate the fresnel term to blend reflection and refraction maps
			float theta = max( dot( toEye, normal ), 0.0 );
			float reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );

			// calculate final uv coords
			vec3 coord = vCoord.xyz / vCoord.w;
			vec2 uv = coord.xy + coord.z * normal.xz * 0.05;

			vec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );
			vec4 refractColor = texture2D( tRefractionMap, uv );

			// multiply water color with the mix of both textures
			gl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );

			#include <tonemapping_fragment>
			#include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
			#include <fog_fragment>

		}`});const isCubeTexture=_e=>_e&&_e.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor(_,tt){var nt,rt;const it=isCubeTexture(_),ot=((rt=it?(nt=_.image[0])==null?void 0:nt.width:_.image.width)!=null?rt:1024)/4,st=Math.floor(Math.log2(ot)),lt=Math.pow(2,st),ct=3*Math.max(lt,16*7),ut=4*lt,ft=[it?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/ct}`,`#define CUBEUV_TEXEL_HEIGHT ${1/ut}`,`#define CUBEUV_MAX_MIP ${st}.0`],pt=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,gt=ft.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,xt={map:{value:_},height:{value:(tt==null?void 0:tt.height)||15},radius:{value:(tt==null?void 0:tt.radius)||100}},yt=new IcosahedronGeometry(1,16),mt=new ShaderMaterial({uniforms:xt,fragmentShader:gt,vertexShader:pt,side:DoubleSide});super(yt,mt)}set radius(_){this.material.uniforms.radius.value=_}get radius(){return this.material.uniforms.radius.value}set height(_){this.material.uniforms.height.value=_}get height(){return this.material.uniforms.height.value}}const UnpackDepthRGBAShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","#include <packing>","void main() {","	float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );","	gl_FragColor = vec4( vec3( depth ), opacity );","}"].join(`
`)};class Pass{constructor(){__publicField(this,"enabled",!0),__publicField(this,"needsSwap",!0),__publicField(this,"clear",!1),__publicField(this,"renderToScreen",!1)}setSize(_,tt){}render(_,tt,nt,rt,it){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class FullScreenQuad{constructor(_){__publicField(this,"camera",new OrthographicCamera(-1,1,1,-1,0,1)),__publicField(this,"geometry",new PlaneGeometry(2,2)),__publicField(this,"mesh"),this.mesh=new Mesh(this.geometry,_)}get material(){return this.mesh.material}set material(_){this.mesh.material=_}dispose(){this.mesh.geometry.dispose()}render(_){_.render(this.mesh,this.camera)}}const CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)},SSAOShader={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new Vector2},cameraProjectionMatrix:{value:new Matrix4},cameraInverseProjectionMatrix:{value:new Matrix4},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tDepth;","uniform sampler2D tNoise;","uniform vec3 kernel[ KERNEL_SIZE ];","uniform vec2 resolution;","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float kernelRadius;","uniform float minDistance;","uniform float maxDistance;","varying vec2 vUv;","#include <packing>","float getDepth( const in vec2 screenPosition ) {","	return texture2D( tDepth, screenPosition ).x;","}","float getLinearDepth( const in vec2 screenPosition ) {","	#if PERSPECTIVE_CAMERA == 1","		float fragCoordZ = texture2D( tDepth, screenPosition ).x;","		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","	#else","		return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","		return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","		return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","	clipPosition *= clipW; // unprojection.","	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec2 screenPosition ) {","	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","}","void main() {","	float depth = getDepth( vUv );","	float viewZ = getViewZ( depth );","	vec3 viewPosition = getViewPosition( vUv, depth, viewZ );","	vec3 viewNormal = getViewNormal( vUv );"," vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );","	vec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;","	vec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );","	vec3 bitangent = cross( viewNormal, tangent );","	mat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );"," float occlusion = 0.0;"," for ( int i = 0; i < KERNEL_SIZE; i ++ ) {","		vec3 sampleVector = kernelMatrix * kernel[ i ];","		vec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );","		vec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 );","		samplePointNDC /= samplePointNDC.w;","		vec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;","		float realDepth = getLinearDepth( samplePointUv );","		float sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );","		float delta = sampleDepth - realDepth;","		if ( delta > minDistance && delta < maxDistance ) {","			occlusion += 1.0;","		}","	}","	occlusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );","	gl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );","}"].join(`
`)},SSAODepthShader={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","varying vec2 vUv;","#include <packing>","float getLinearDepth( const in vec2 screenPosition ) {","	#if PERSPECTIVE_CAMERA == 1","		float fragCoordZ = texture2D( tDepth, screenPosition ).x;","		float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","		return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","	#else","		return texture2D( tDepth, screenPosition ).x;","	#endif","}","void main() {","	float depth = getLinearDepth( vUv );","	gl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );","}"].join(`
`)},SSAOBlurShader={uniforms:{tDiffuse:{value:null},resolution:{value:new Vector2}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","	vec2 texelSize = ( 1.0 / resolution );","	float result = 0.0;","	for ( int i = - 2; i <= 2; i ++ ) {","		for ( int j = - 2; j <= 2; j ++ ) {","			vec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;","			result += texture2D( tDiffuse, vUv + offset ).r;","		}","	}","	gl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );","}"].join(`
`)},_SSAOPass=class extends Pass{constructor(_e,_,tt,nt){super(),this.width=tt!==void 0?tt:512,this.height=nt!==void 0?nt:512,this.clear=!0,this.camera=_,this.scene=_e,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const rt=new DepthTexture;rt.format=DepthStencilFormat,rt.type=UnsignedInt248Type,this.beautyRenderTarget=new WebGLRenderTarget(this.width,this.height),this.normalRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter,depthTexture:rt}),this.ssaoRenderTarget=new WebGLRenderTarget(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),SSAOShader===void 0&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new ShaderMaterial({defines:Object.assign({},SSAOShader.defines),uniforms:UniformsUtils.clone(SSAOShader.uniforms),vertexShader:SSAOShader.vertexShader,fragmentShader:SSAOShader.fragmentShader,blending:NoBlending}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new MeshNormalMaterial,this.normalMaterial.blending=NoBlending,this.blurMaterial=new ShaderMaterial({defines:Object.assign({},SSAOBlurShader.defines),uniforms:UniformsUtils.clone(SSAOBlurShader.uniforms),vertexShader:SSAOBlurShader.vertexShader,fragmentShader:SSAOBlurShader.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new ShaderMaterial({defines:Object.assign({},SSAODepthShader.defines),uniforms:UniformsUtils.clone(SSAODepthShader.uniforms),vertexShader:SSAODepthShader.vertexShader,fragmentShader:SSAODepthShader.fragmentShader,blending:NoBlending}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new ShaderMaterial({uniforms:UniformsUtils.clone(CopyShader.uniforms),vertexShader:CopyShader.vertexShader,fragmentShader:CopyShader.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:DstColorFactor,blendDst:ZeroFactor,blendEquation:AddEquation,blendSrcAlpha:DstAlphaFactor,blendDstAlpha:ZeroFactor,blendEquationAlpha:AddEquation}),this.fsQuad=new FullScreenQuad(null),this.originalClearColor=new Color$1}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(_e,_){switch(_e.capabilities.isWebGL2===!1&&(this.noiseTexture.format=LuminanceFormat),_e.setRenderTarget(this.beautyRenderTarget),_e.clear(),_e.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(_e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(_e,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(_e,this.blurMaterial,this.blurRenderTarget),this.output){case _SSAOPass.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_);break;case _SSAOPass.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_);break;case _SSAOPass.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_);break;case _SSAOPass.OUTPUT.Depth:this.renderPass(_e,this.depthRenderMaterial,this.renderToScreen?null:_);break;case _SSAOPass.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_);break;case _SSAOPass.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=CustomBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(_e,_,tt,nt,rt){_e.getClearColor(this.originalClearColor);const it=_e.getClearAlpha(),at=_e.autoClear;_e.setRenderTarget(tt),_e.autoClear=!1,nt!=null&&(_e.setClearColor(nt),_e.setClearAlpha(rt||0),_e.clear()),this.fsQuad.material=_,this.fsQuad.render(_e),_e.autoClear=at,_e.setClearColor(this.originalClearColor),_e.setClearAlpha(it)}renderOverride(_e,_,tt,nt,rt){_e.getClearColor(this.originalClearColor);const it=_e.getClearAlpha(),at=_e.autoClear;_e.setRenderTarget(tt),_e.autoClear=!1,nt=_.clearColor||nt,rt=_.clearAlpha||rt,nt!=null&&(_e.setClearColor(nt),_e.setClearAlpha(rt||0),_e.clear()),this.scene.overrideMaterial=_,_e.render(this.scene,this.camera),this.scene.overrideMaterial=null,_e.autoClear=at,_e.setClearColor(this.originalClearColor),_e.setClearAlpha(it)}setSize(_e,_){this.width=_e,this.height=_,this.beautyRenderTarget.setSize(_e,_),this.ssaoRenderTarget.setSize(_e,_),this.normalRenderTarget.setSize(_e,_),this.blurRenderTarget.setSize(_e,_),this.ssaoMaterial.uniforms.resolution.value.set(_e,_),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(_e,_)}generateSampleKernel(){const _e=this.kernelSize,_=this.kernel;for(let tt=0;tt<_e;tt++){const nt=new Vector3;nt.x=Math.random()*2-1,nt.y=Math.random()*2-1,nt.z=Math.random(),nt.normalize();let rt=tt/_e;rt=MathUtils.lerp(.1,1,rt*rt),nt.multiplyScalar(rt),_.push(nt)}}generateRandomKernelRotations(){SimplexNoise===void 0&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const tt=new SimplexNoise,nt=4*4,rt=new Float32Array(nt);for(let it=0;it<nt;it++){const at=Math.random()*2-1,ot=Math.random()*2-1,st=0;rt[it]=tt.noise3d(at,ot,st)}this.noiseTexture=new DataTexture(rt,4,4,RedFormat,FloatType),this.noiseTexture.wrapS=RepeatWrapping,this.noiseTexture.wrapT=RepeatWrapping,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const _e=this.scene,_=this._visibilityCache;_e.traverse(function(tt){_.set(tt,tt.visible),(tt.isPoints||tt.isLine)&&(tt.visible=!1)})}restoreVisibility(){const _e=this.scene,_=this._visibilityCache;_e.traverse(function(tt){const nt=_.get(tt);tt.visible=nt}),_.clear()}};let SSAOPass=_SSAOPass;__publicField(SSAOPass,"OUTPUT",{Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5});const LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Color$1(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	vec3 luma = vec3( 0.299, 0.587, 0.114 );","	float v = dot( texel.xyz, luma );","	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","	gl_FragColor = mix( outputColor, texel, alpha );","}"].join(`
`)},_UnrealBloomPass=class extends Pass{constructor(_e,_,tt,nt){super(),this.strength=_!==void 0?_:1,this.radius=tt,this.threshold=nt,this.resolution=_e!==void 0?new Vector2(_e.x,_e.y):new Vector2(256,256),this.clearColor=new Color$1(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let rt=Math.round(this.resolution.x/2),it=Math.round(this.resolution.y/2);this.renderTargetBright=new WebGLRenderTarget(rt,it,{type:HalfFloatType}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let ct=0;ct<this.nMips;ct++){const ut=new WebGLRenderTarget(rt,it,{type:HalfFloatType});ut.texture.name="UnrealBloomPass.h"+ct,ut.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(ut);const ft=new WebGLRenderTarget(rt,it,{type:HalfFloatType});ft.texture.name="UnrealBloomPass.v"+ct,ft.texture.generateMipmaps=!1,this.renderTargetsVertical.push(ft),rt=Math.round(rt/2),it=Math.round(it/2)}const at=LuminosityHighPassShader;this.highPassUniforms=UniformsUtils.clone(at.uniforms),this.highPassUniforms.luminosityThreshold.value=nt,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:at.vertexShader,fragmentShader:at.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const ot=[3,5,7,9,11];rt=Math.round(this.resolution.x/2),it=Math.round(this.resolution.y/2);for(let ct=0;ct<this.nMips;ct++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(ot[ct])),this.separableBlurMaterials[ct].uniforms.texSize.value=new Vector2(rt,it),rt=Math.round(rt/2),it=Math.round(it/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=_,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const st=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=st,this.bloomTintColors=[new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1),new Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const lt=CopyShader;this.copyUniforms=UniformsUtils.clone(lt.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new ShaderMaterial({uniforms:this.copyUniforms,vertexShader:lt.vertexShader,fragmentShader:lt.fragmentShader,blending:AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Color$1,this.oldClearAlpha=1,this.basic=new MeshBasicMaterial,this.fsQuad=new FullScreenQuad(null)}dispose(){for(let _e=0;_e<this.renderTargetsHorizontal.length;_e++)this.renderTargetsHorizontal[_e].dispose();for(let _e=0;_e<this.renderTargetsVertical.length;_e++)this.renderTargetsVertical[_e].dispose();this.renderTargetBright.dispose();for(let _e=0;_e<this.separableBlurMaterials.length;_e++)this.separableBlurMaterials[_e].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(_e,_){let tt=Math.round(_e/2),nt=Math.round(_/2);this.renderTargetBright.setSize(tt,nt);for(let rt=0;rt<this.nMips;rt++)this.renderTargetsHorizontal[rt].setSize(tt,nt),this.renderTargetsVertical[rt].setSize(tt,nt),this.separableBlurMaterials[rt].uniforms.texSize.value=new Vector2(tt,nt),tt=Math.round(tt/2),nt=Math.round(nt/2)}render(_e,_,tt,nt,rt){_e.getClearColor(this._oldClearColor),this.oldClearAlpha=_e.getClearAlpha();const it=_e.autoClear;_e.autoClear=!1,_e.setClearColor(this.clearColor,0),rt&&_e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=tt.texture,_e.setRenderTarget(null),_e.clear(),this.fsQuad.render(_e)),this.highPassUniforms.tDiffuse.value=tt.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,_e.setRenderTarget(this.renderTargetBright),_e.clear(),this.fsQuad.render(_e);let at=this.renderTargetBright;for(let ot=0;ot<this.nMips;ot++)this.fsQuad.material=this.separableBlurMaterials[ot],this.separableBlurMaterials[ot].uniforms.colorTexture.value=at.texture,this.separableBlurMaterials[ot].uniforms.direction.value=_UnrealBloomPass.BlurDirectionX,_e.setRenderTarget(this.renderTargetsHorizontal[ot]),_e.clear(),this.fsQuad.render(_e),this.separableBlurMaterials[ot].uniforms.colorTexture.value=this.renderTargetsHorizontal[ot].texture,this.separableBlurMaterials[ot].uniforms.direction.value=_UnrealBloomPass.BlurDirectionY,_e.setRenderTarget(this.renderTargetsVertical[ot]),_e.clear(),this.fsQuad.render(_e),at=this.renderTargetsVertical[ot];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,_e.setRenderTarget(this.renderTargetsHorizontal[0]),_e.clear(),this.fsQuad.render(_e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,rt&&_e.state.buffers.stencil.setTest(!0),this.renderToScreen?(_e.setRenderTarget(null),this.fsQuad.render(_e)):(_e.setRenderTarget(tt),this.fsQuad.render(_e)),_e.setClearColor(this._oldClearColor,this.oldClearAlpha),_e.autoClear=it}getSeperableBlurMaterial(_e){return new ShaderMaterial({defines:{KERNEL_RADIUS:_e,SIGMA:_e},uniforms:{colorTexture:{value:null},texSize:{value:new Vector2(.5,.5)},direction:{value:new Vector2(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(_e){return new ShaderMaterial({defines:{NUM_MIPS:_e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}};let UnrealBloomPass=_UnrealBloomPass;__publicField(UnrealBloomPass,"BlurDirectionX",new Vector2(1,0));__publicField(UnrealBloomPass,"BlurDirectionY",new Vector2(0,1));const SAOShader={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new Vector2(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new Matrix4},cameraInverseProjectionMatrix:{value:new Matrix4},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","uniform sampler2D tDepth;","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float scale;","uniform float intensity;","uniform float bias;","uniform float kernelRadius;","uniform float minResolution;","uniform vec2 size;","uniform float randomSeed;","// RGBA depth","#include <packing>","vec4 getDefaultColor( const in vec2 screenPosition ) {","	#if DIFFUSE_TEXTURE == 1","	return texture2D( tDiffuse, vUv );","	#else","	return vec4( 1.0 );","	#endif","}","float getDepth( const in vec2 screenPosition ) {","	#if DEPTH_PACKING == 1","	return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","	#else","	return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","	return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","	return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","	float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","	vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","	clipPosition *= clipW; // unprojection.","	return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","	#if NORMAL_TEXTURE == 1","	return unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","	#else","	return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","	#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","	vec3 viewDelta = sampleViewPosition - centerViewPosition;","	float viewDistance = length( viewDelta );","	float scaledScreenDistance = scaleDividedByCameraFar * viewDistance;","	return max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );","}","// moving costly divides into consts","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","	// precompute some variables require in getOcclusion.","	scaleDividedByCameraFar = scale / cameraFar;","	minResolutionMultipliedByCameraFar = minResolution * cameraFar;","	vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","	// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/","	float angle = rand( vUv + randomSeed ) * PI2;","	vec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;","	vec2 radiusStep = radius;","	float occlusionSum = 0.0;","	float weightSum = 0.0;","	for( int i = 0; i < NUM_SAMPLES; i ++ ) {","		vec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;","		radius += radiusStep;","		angle += ANGLE_STEP;","		float sampleDepth = getDepth( sampleUv );","		if( sampleDepth >= ( 1.0 - EPSILON ) ) {","			continue;","		}","		float sampleViewZ = getViewZ( sampleDepth );","		vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","		occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","		weightSum += 1.0;","	}","	if( weightSum == 0.0 ) discard;","	return occlusionSum * ( intensity / weightSum );","}","void main() {","	float centerDepth = getDepth( vUv );","	if( centerDepth >= ( 1.0 - EPSILON ) ) {","		discard;","	}","	float centerViewZ = getViewZ( centerDepth );","	vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","	float ambientOcclusion = getAmbientOcclusion( viewPosition );","	gl_FragColor = getDefaultColor( vUv );","	gl_FragColor.xyz *=  1.0 - ambientOcclusion;","}"].join(`
`)},DepthLimitedBlurShader={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{value:null},size:{value:new Vector2(512,512)},sampleUvOffsets:{value:[new Vector2(0,0)]},sampleWeights:{value:[1]},tDepth:{value:null},cameraNear:{value:10},cameraFar:{value:1e3},depthCutoff:{value:10}},vertexShader:["#include <common>","uniform vec2 size;","varying vec2 vUv;","varying vec2 vInvSize;","void main() {","	vUv = uv;","	vInvSize = 1.0 / size;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["#include <common>","#include <packing>","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","uniform float depthCutoff;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","varying vec2 vInvSize;","float getDepth( const in vec2 screenPosition ) {","	#if DEPTH_PACKING == 1","	return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","	#else","	return texture2D( tDepth, screenPosition ).x;","	#endif","}","float getViewZ( const in float depth ) {","	#if PERSPECTIVE_CAMERA == 1","	return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","	#else","	return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","	#endif","}","void main() {","	float depth = getDepth( vUv );","	if( depth >= ( 1.0 - EPSILON ) ) {","		discard;","	}","	float centerViewZ = -getViewZ( depth );","	bool rBreak = false, lBreak = false;","	float weightSum = sampleWeights[0];","	vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","	for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","		float sampleWeight = sampleWeights[i];","		vec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;","		vec2 sampleUv = vUv + sampleUvOffset;","		float viewZ = -getViewZ( getDepth( sampleUv ) );","		if( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;","		if( ! rBreak ) {","			diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","			weightSum += sampleWeight;","		}","		sampleUv = vUv - sampleUvOffset;","		viewZ = -getViewZ( getDepth( sampleUv ) );","		if( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;","		if( ! lBreak ) {","			diffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","			weightSum += sampleWeight;","		}","	}","	gl_FragColor = diffuseSum / weightSum;","}"].join(`
`)},BlurShaderUtils={createSampleWeights:(_e,_)=>{const tt=(rt,it)=>Math.exp(-(rt*rt)/(2*(it*it)))/(Math.sqrt(2*Math.PI)*it),nt=[];for(let rt=0;rt<=_e;rt++)nt.push(tt(rt,_));return nt},createSampleOffsets:(_e,_)=>{const tt=[];for(let nt=0;nt<=_e;nt++)tt.push(_.clone().multiplyScalar(nt));return tt},configure:(_e,_,tt,nt)=>{_e.defines.KERNEL_RADIUS=_,_e.uniforms.sampleUvOffsets.value=BlurShaderUtils.createSampleOffsets(_,nt),_e.uniforms.sampleWeights.value=BlurShaderUtils.createSampleWeights(_,tt),_e.needsUpdate=!0}};class SAOPass extends Pass{constructor(_,tt,nt=!1,rt=!1,it=new Vector2(256,256)){super(),this.scene=_,this.camera=tt,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=nt,this.supportsNormalTexture=rt,this.originalClearColor=new Color$1,this._oldClearColor=new Color$1,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=new Vector2(it.x,it.y),this.saoRenderTarget=new WebGLRenderTarget(this.resolution.x,this.resolution.y,{type:HalfFloatType}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new WebGLRenderTarget(this.resolution.x,this.resolution.y,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType}),this.depthRenderTarget=this.normalRenderTarget.clone();let at;this.supportsDepthTextureExtension&&(at=new DepthTexture,at.type=UnsignedShortType,this.beautyRenderTarget.depthTexture=at,this.beautyRenderTarget.depthBuffer=!0),this.depthMaterial=new MeshDepthMaterial,this.depthMaterial.depthPacking=RGBADepthPacking,this.depthMaterial.blending=NoBlending,this.normalMaterial=new MeshNormalMaterial,this.normalMaterial.blending=NoBlending,this.saoMaterial=new ShaderMaterial({defines:Object.assign({},SAOShader.defines),fragmentShader:SAOShader.fragmentShader,vertexShader:SAOShader.vertexShader,uniforms:UniformsUtils.clone(SAOShader.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?at:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=NoBlending,this.vBlurMaterial=new ShaderMaterial({uniforms:UniformsUtils.clone(DepthLimitedBlurShader.uniforms),defines:Object.assign({},DepthLimitedBlurShader.defines),vertexShader:DepthLimitedBlurShader.vertexShader,fragmentShader:DepthLimitedBlurShader.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?at:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=NoBlending,this.hBlurMaterial=new ShaderMaterial({uniforms:UniformsUtils.clone(DepthLimitedBlurShader.uniforms),defines:Object.assign({},DepthLimitedBlurShader.defines),vertexShader:DepthLimitedBlurShader.vertexShader,fragmentShader:DepthLimitedBlurShader.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?at:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=NoBlending,this.materialCopy=new ShaderMaterial({uniforms:UniformsUtils.clone(CopyShader.uniforms),vertexShader:CopyShader.vertexShader,fragmentShader:CopyShader.fragmentShader,blending:NoBlending}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=CustomBlending,this.materialCopy.blendSrc=DstColorFactor,this.materialCopy.blendDst=ZeroFactor,this.materialCopy.blendEquation=AddEquation,this.materialCopy.blendSrcAlpha=DstAlphaFactor,this.materialCopy.blendDstAlpha=ZeroFactor,this.materialCopy.blendEquationAlpha=AddEquation,this.depthCopy=new ShaderMaterial({uniforms:UniformsUtils.clone(UnpackDepthRGBAShader.uniforms),vertexShader:UnpackDepthRGBAShader.vertexShader,fragmentShader:UnpackDepthRGBAShader.fragmentShader,blending:NoBlending}),this.fsQuad=new FullScreenQuad(null)}render(_,tt,nt){if(this.renderToScreen&&(this.materialCopy.blending=NoBlending,this.materialCopy.uniforms.tDiffuse.value=nt.texture,this.materialCopy.needsUpdate=!0,this.renderPass(_,this.materialCopy,null)),this.params.output===1)return;_.getClearColor(this._oldClearColor),this.oldClearAlpha=_.getClearAlpha();const rt=_.autoClear;_.autoClear=!1,_.setRenderTarget(this.depthRenderTarget),_.clear(),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;const it=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=it,this.hBlurMaterial.uniforms.depthCutoff.value=it,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),(this.prevStdDev!==this.params.saoBlurStdDev||this.prevNumSamples!==this.params.saoBlurRadius)&&(BlurShaderUtils.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new Vector2(0,1)),BlurShaderUtils.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new Vector2(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),_.setClearColor(0),_.setRenderTarget(this.beautyRenderTarget),_.clear(),_.render(this.scene,this.camera),this.supportsDepthTextureExtension||this.renderOverride(_,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(_,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(_,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(_,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(_,this.hBlurMaterial,this.saoRenderTarget,16777215,1));let at=this.materialCopy;this.params.output===3?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,at=this.depthCopy):this.params.output===4?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),this.params.output===0?at.blending=CustomBlending:at.blending=NoBlending,this.renderPass(_,at,this.renderToScreen?null:nt),_.setClearColor(this._oldClearColor,this.oldClearAlpha),_.autoClear=rt}renderPass(_,tt,nt,rt,it){_.getClearColor(this.originalClearColor);const at=_.getClearAlpha(),ot=_.autoClear;_.setRenderTarget(nt),_.autoClear=!1,rt!=null&&(_.setClearColor(rt),_.setClearAlpha(it||0),_.clear()),this.fsQuad.material=tt,this.fsQuad.render(_),_.autoClear=ot,_.setClearColor(this.originalClearColor),_.setClearAlpha(at)}renderOverride(_,tt,nt,rt,it){_.getClearColor(this.originalClearColor);const at=_.getClearAlpha(),ot=_.autoClear;_.setRenderTarget(nt),_.autoClear=!1,rt=tt.clearColor||rt,it=tt.clearAlpha||it,rt!=null&&(_.setClearColor(rt),_.setClearAlpha(it||0),_.clear()),this.scene.overrideMaterial=tt,_.render(this.scene,this.camera),this.scene.overrideMaterial=null,_.autoClear=ot,_.setClearColor(this.originalClearColor),_.setClearAlpha(at)}setSize(_,tt){this.beautyRenderTarget.setSize(_,tt),this.saoRenderTarget.setSize(_,tt),this.blurIntermediateRenderTarget.setSize(_,tt),this.normalRenderTarget.setSize(_,tt),this.depthRenderTarget.setSize(_,tt),this.saoMaterial.uniforms.size.value.set(_,tt),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(_,tt),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(_,tt),this.hBlurMaterial.needsUpdate=!0}dispose(){this.saoRenderTarget.dispose(),this.blurIntermediateRenderTarget.dispose(),this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.depthRenderTarget.dispose(),this.depthMaterial.dispose(),this.normalMaterial.dispose(),this.saoMaterial.dispose(),this.vBlurMaterial.dispose(),this.hBlurMaterial.dispose(),this.materialCopy.dispose(),this.depthCopy.dispose(),this.fsQuad.dispose()}}__publicField(SAOPass,"OUTPUT",{Beauty:1,Default:0,SAO:2,Depth:3,Normal:4});const SSRShader={defines:{MAX_STEP:0,isPerspectiveCamera:!0,isDistanceAttenuation:!0,isFresnel:!0,isInfiniteThick:!1,isSelective:!1},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tMetalness:{value:null},tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new Vector2},cameraProjectionMatrix:{value:new Matrix4},cameraInverseProjectionMatrix:{value:new Matrix4},opacity:{value:.5},maxDistance:{value:180},cameraRange:{value:0},surfDist:{value:.007},thickTolerance:{value:.03}},vertexShader:`

    varying vec2 vUv;

    void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`
		// precision highp float;
		precision highp sampler2D;
		varying vec2 vUv;
		uniform sampler2D tDepth;
		uniform sampler2D tNormal;
		uniform sampler2D tMetalness;
		uniform sampler2D tDiffuse;
		uniform float cameraRange;
		uniform vec2 resolution;
		uniform float opacity;
		uniform float cameraNear;
		uniform float cameraFar;
		uniform float maxDistance;
		uniform float surfDist;
		uniform mat4 cameraProjectionMatrix;
		uniform mat4 cameraInverseProjectionMatrix;
		uniform float thickTolerance;
		#include <packing>
		float pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {
			//x0: point, x1: linePointA, x2: linePointB
			//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html
			return length(cross(x0-x1,x0-x2))/length(x2-x1);
		}
		float pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){
			// https://mathworld.wolfram.com/Point-PlaneDistance.html
			//// https://en.wikipedia.org/wiki/Plane_(geometry)
			//// http://paulbourke.net/geometry/pointlineplane/
			float a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;
			float x0=point.x,y0=point.y,z0=point.z;
			float x=planePoint.x,y=planePoint.y,z=planePoint.z;
			float d=-(a*x+b*y+c*z);
			float distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);
			return distance;
		}
		float getDepth( const in vec2 uv ) {
			return texture2D( tDepth, uv ).x;
		}
		float getViewZ( const in float depth ) {
			#ifdef isPerspectiveCamera
				return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );
			#else
				return orthographicDepthToViewZ( depth, cameraNear, cameraFar );
			#endif
		}
		vec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {
			vec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc
			clipPosition *= clipW; //clip
			return ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view
		}
		vec3 getViewNormal( const in vec2 uv ) {
			return unpackRGBToNormal( texture2D( tNormal, uv ).xyz );
		}
		vec2 viewPositionToXY(vec3 viewPosition){
			vec2 xy;
			vec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);
			xy=clip.xy;//clip
			float clipW=clip.w;
			xy/=clipW;//NDC
			xy=(xy+1.)/2.;//uv
			xy*=resolution;//screen
			return xy;
		}
		void main(){
			#ifdef isSelective
				float metalness=texture2D(tMetalness,vUv).r;
				if(metalness==0.) return;
			#endif

			float depth = getDepth( vUv );
			float viewZ = getViewZ( depth );
			if(-viewZ>=cameraFar) return;

			float clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];
			vec3 viewPosition=getViewPosition( vUv, depth, clipW );

			vec2 d0=gl_FragCoord.xy;
			vec2 d1;

			vec3 viewNormal=getViewNormal( vUv );

			#ifdef isPerspectiveCamera
				vec3 viewIncidenceDir=normalize(viewPosition);
				vec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);
			#else
				vec3 viewIncidenceDir=vec3(0,0,-1);
				vec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);
			#endif

			float maxReflectRayLen=maxDistance/dot(-viewIncidenceDir,viewNormal);
			// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html
			// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)
			// maxDistance/maxReflectRayLen=cos(theta)
			// maxDistance/maxReflectRayLen==dot(a,b)
			// maxReflectRayLen==maxDistance/dot(a,b)

			vec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;
			#ifdef isPerspectiveCamera
				if(d1viewPosition.z>-cameraNear){
					//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx
					float t=(-cameraNear-viewPosition.z)/viewReflectDir.z;
					d1viewPosition=viewPosition+viewReflectDir*t;
				}
			#endif
			d1=viewPositionToXY(d1viewPosition);

			float totalLen=length(d1-d0);
			float xLen=d1.x-d0.x;
			float yLen=d1.y-d0.y;
			float totalStep=max(abs(xLen),abs(yLen));
			float xSpan=xLen/totalStep;
			float ySpan=yLen/totalStep;
			for(float i=0.;i<MAX_STEP;i++){
				if(i>=totalStep) break;
				vec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);
				if(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;
				float s=length(xy-d0)/totalLen;
				vec2 uv=xy/resolution;

				float d = getDepth(uv);
				float vZ = getViewZ( d );
				if(-vZ>=cameraFar) continue;
				float cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];
				vec3 vP=getViewPosition( uv, d, cW );

				#ifdef isPerspectiveCamera
					// https://www.comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf
					float recipVPZ=1./viewPosition.z;
					float viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));
					float sD=surfDist*cW;
				#else
					float viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);
					float sD=surfDist;
				#endif
				if(viewReflectRayZ-sD>vZ) continue;

				#ifdef isInfiniteThick
					if(viewReflectRayZ+thickTolerance*clipW<vP.z) break;
				#endif
				float away=pointToLineDistance(vP,viewPosition,d1viewPosition);

				float op=opacity;

				if(away<sD){
					vec3 vN=getViewNormal( uv );
					if(dot(viewReflectDir,vN)>=0.) continue;
					float distance=pointPlaneDistance(vP,viewPosition,viewNormal);
					if(distance>maxDistance) break;
					#ifdef isDistanceAttenuation
						float ratio=1.-(distance/maxDistance);
						float attenuation=ratio*ratio;
						op=opacity*attenuation;
					#endif
					#ifdef isFresnel
						float fresnel=(dot(viewIncidenceDir,viewReflectDir)+1.)/2.;
						op*=fresnel;
					#endif
					vec4 reflectColor=texture2D(tDiffuse,uv);
					gl_FragColor.xyz=reflectColor.xyz;
					gl_FragColor.a=op;
					break;
				}
			}
		}
	`},SSRDepthShader={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:`

    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`

    uniform sampler2D tDepth;

    uniform float cameraNear;
    uniform float cameraFar;

    varying vec2 vUv;

    #include <packing>

		float getLinearDepth( const in vec2 uv ) {

			#if PERSPECTIVE_CAMERA == 1

				float fragCoordZ = texture2D( tDepth, uv ).x;
				float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );
				return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );

			#else

				return texture2D( tDepth, uv ).x;

			#endif

		}

    void main() {

    	float depth = getLinearDepth( vUv );
			float d = 1.0 - depth;
			// d=(d-.999)*1000.;
    	gl_FragColor = vec4( vec3( d ), 1.0 );

    }

  `},SSRBlurShader={uniforms:{tDiffuse:{value:null},resolution:{value:new Vector2},opacity:{value:.5}},vertexShader:`

    varying vec2 vUv;

    void main() {

    	vUv = uv;
    	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }

  `,fragmentShader:`

    uniform sampler2D tDiffuse;
    uniform vec2 resolution;
    varying vec2 vUv;
    void main() {
			//reverse engineering from PhotoShop blur filter, then change coefficient

    	vec2 texelSize = ( 1.0 / resolution );

			vec4 c=texture2D(tDiffuse,vUv);

			vec2 offset;

			offset=(vec2(-1,0))*texelSize;
			vec4 cl=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(1,0))*texelSize;
			vec4 cr=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,-1))*texelSize;
			vec4 cb=texture2D(tDiffuse,vUv+offset);

			offset=(vec2(0,1))*texelSize;
			vec4 ct=texture2D(tDiffuse,vUv+offset);

			// float coeCenter=.5;
			// float coeSide=.125;
			float coeCenter=.2;
			float coeSide=.2;
			float a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;
			vec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;
			gl_FragColor=vec4(rgb,a);

		}
	`},_SSRPass=class extends Pass{constructor({renderer:_e,scene:_,camera:tt,width:nt,height:rt,selects:it,bouncing:at=!1,groundReflector:ot}){super(),this.width=nt!==void 0?nt:512,this.height=rt!==void 0?rt:512,this.clear=!0,this.renderer=_e,this.scene=_,this.camera=tt,this.groundReflector=ot,this.opacity=SSRShader.uniforms.opacity.value,this.output=0,this.maxDistance=SSRShader.uniforms.maxDistance.value,this.thickness=SSRShader.uniforms.thickness.value,this.tempColor=new Color$1,this._selects=it,this.selective=Array.isArray(this._selects),Object.defineProperty(this,"selects",{get(){return this._selects},set(lt){this._selects!==lt&&(this._selects=lt,Array.isArray(lt)?(this.selective=!0,this.ssrMaterial.defines.SELECTIVE=!0,this.ssrMaterial.needsUpdate=!0):(this.selective=!1,this.ssrMaterial.defines.SELECTIVE=!1,this.ssrMaterial.needsUpdate=!0))}}),this._bouncing=at,Object.defineProperty(this,"bouncing",{get(){return this._bouncing},set(lt){this._bouncing!==lt&&(this._bouncing=lt,lt?this.ssrMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture:this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture)}}),this.blur=!0,this._distanceAttenuation=SSRShader.defines.DISTANCE_ATTENUATION,Object.defineProperty(this,"distanceAttenuation",{get(){return this._distanceAttenuation},set(lt){this._distanceAttenuation!==lt&&(this._distanceAttenuation=lt,this.ssrMaterial.defines.DISTANCE_ATTENUATION=lt,this.ssrMaterial.needsUpdate=!0)}}),this._fresnel=SSRShader.defines.FRESNEL,Object.defineProperty(this,"fresnel",{get(){return this._fresnel},set(lt){this._fresnel!==lt&&(this._fresnel=lt,this.ssrMaterial.defines.FRESNEL=lt,this.ssrMaterial.needsUpdate=!0)}}),this._infiniteThick=SSRShader.defines.INFINITE_THICK,Object.defineProperty(this,"infiniteThick",{get(){return this._infiniteThick},set(lt){this._infiniteThick!==lt&&(this._infiniteThick=lt,this.ssrMaterial.defines.INFINITE_THICK=lt,this.ssrMaterial.needsUpdate=!0)}});const st=new DepthTexture;st.type=UnsignedShortType,st.minFilter=NearestFilter,st.magFilter=NearestFilter,this.beautyRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType,depthTexture:st,depthBuffer:!0}),this.prevRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter}),this.normalRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType}),this.metalnessRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter,type:HalfFloatType}),this.ssrRenderTarget=new WebGLRenderTarget(this.width,this.height,{minFilter:NearestFilter,magFilter:NearestFilter}),this.blurRenderTarget=this.ssrRenderTarget.clone(),this.blurRenderTarget2=this.ssrRenderTarget.clone(),this.ssrMaterial=new ShaderMaterial({defines:Object.assign({},SSRShader.defines,{MAX_STEP:Math.sqrt(this.width*this.width+this.height*this.height)}),uniforms:UniformsUtils.clone(SSRShader.uniforms),vertexShader:SSRShader.vertexShader,fragmentShader:SSRShader.fragmentShader,blending:NoBlending}),this.ssrMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssrMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssrMaterial.defines.SELECTIVE=this.selective,this.ssrMaterial.needsUpdate=!0,this.ssrMaterial.uniforms.tMetalness.value=this.metalnessRenderTarget.texture,this.ssrMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.ssrMaterial.uniforms.cameraNear.value=this.camera.near,this.ssrMaterial.uniforms.cameraFar.value=this.camera.far,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.ssrMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new MeshNormalMaterial,this.normalMaterial.blending=NoBlending,this.metalnessOnMaterial=new MeshBasicMaterial({color:"white"}),this.metalnessOffMaterial=new MeshBasicMaterial({color:"black"}),this.blurMaterial=new ShaderMaterial({defines:Object.assign({},SSRBlurShader.defines),uniforms:UniformsUtils.clone(SSRBlurShader.uniforms),vertexShader:SSRBlurShader.vertexShader,fragmentShader:SSRBlurShader.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.blurMaterial2=new ShaderMaterial({defines:Object.assign({},SSRBlurShader.defines),uniforms:UniformsUtils.clone(SSRBlurShader.uniforms),vertexShader:SSRBlurShader.vertexShader,fragmentShader:SSRBlurShader.fragmentShader}),this.blurMaterial2.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.blurMaterial2.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new ShaderMaterial({defines:Object.assign({},SSRDepthShader.defines),uniforms:UniformsUtils.clone(SSRDepthShader.uniforms),vertexShader:SSRDepthShader.vertexShader,fragmentShader:SSRDepthShader.fragmentShader,blending:NoBlending}),this.depthRenderMaterial.uniforms.tDepth.value=this.beautyRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new ShaderMaterial({uniforms:UniformsUtils.clone(CopyShader.uniforms),vertexShader:CopyShader.vertexShader,fragmentShader:CopyShader.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:SrcAlphaFactor,blendDst:OneMinusSrcAlphaFactor,blendEquation:AddEquation,blendSrcAlpha:SrcAlphaFactor,blendDstAlpha:OneMinusSrcAlphaFactor,blendEquationAlpha:AddEquation}),this.fsQuad=new FullScreenQuad(null),this.originalClearColor=new Color$1}dispose(){this.beautyRenderTarget.dispose(),this.prevRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.metalnessRenderTarget.dispose(),this.ssrRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.blurRenderTarget2.dispose(),this.normalMaterial.dispose(),this.metalnessOnMaterial.dispose(),this.metalnessOffMaterial.dispose(),this.blurMaterial.dispose(),this.blurMaterial2.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(_e,_){switch(_e.setRenderTarget(this.beautyRenderTarget),_e.clear(),this.groundReflector&&(this.groundReflector.visible=!1,this.groundReflector.doRender(this.renderer,this.scene,this.camera),this.groundReflector.visible=!0),_e.render(this.scene,this.camera),this.groundReflector&&(this.groundReflector.visible=!1),this.renderOverride(_e,this.normalMaterial,this.normalRenderTarget,0,0),this.selective&&this.renderMetalness(_e,this.metalnessOnMaterial,this.metalnessRenderTarget,0,0),this.ssrMaterial.uniforms.opacity.value=this.opacity,this.ssrMaterial.uniforms.maxDistance.value=this.maxDistance,this.ssrMaterial.uniforms.thickness.value=this.thickness,this.renderPass(_e,this.ssrMaterial,this.ssrRenderTarget),this.blur&&(this.renderPass(_e,this.blurMaterial,this.blurRenderTarget),this.renderPass(_e,this.blurMaterial2,this.blurRenderTarget2)),this.output){case _SSRPass.OUTPUT.Default:this.bouncing?(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.prevRenderTarget),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=NormalBlending,this.renderPass(_e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.prevRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_)):(this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_),this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=NormalBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_));break;case _SSRPass.OUTPUT.SSR:this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_),this.bouncing&&(this.blur?this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget2.texture:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.prevRenderTarget),this.copyMaterial.uniforms.tDiffuse.value=this.ssrRenderTarget.texture,this.copyMaterial.blending=NormalBlending,this.renderPass(_e,this.copyMaterial,this.prevRenderTarget));break;case _SSRPass.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_);break;case _SSRPass.OUTPUT.Depth:this.renderPass(_e,this.depthRenderMaterial,this.renderToScreen?null:_);break;case _SSRPass.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_);break;case _SSRPass.OUTPUT.Metalness:this.copyMaterial.uniforms.tDiffuse.value=this.metalnessRenderTarget.texture,this.copyMaterial.blending=NoBlending,this.renderPass(_e,this.copyMaterial,this.renderToScreen?null:_);break;default:console.warn("THREE.SSRPass: Unknown output type.")}}renderPass(_e,_,tt,nt,rt){this.originalClearColor.copy(_e.getClearColor(this.tempColor));const it=_e.getClearAlpha(this.tempColor),at=_e.autoClear;_e.setRenderTarget(tt),_e.autoClear=!1,nt!=null&&(_e.setClearColor(nt),_e.setClearAlpha(rt||0),_e.clear()),this.fsQuad.material=_,this.fsQuad.render(_e),_e.autoClear=at,_e.setClearColor(this.originalClearColor),_e.setClearAlpha(it)}renderOverride(_e,_,tt,nt,rt){this.originalClearColor.copy(_e.getClearColor(this.tempColor));const it=_e.getClearAlpha(this.tempColor),at=_e.autoClear;_e.setRenderTarget(tt),_e.autoClear=!1,nt=_.clearColor||nt,rt=_.clearAlpha||rt,nt!=null&&(_e.setClearColor(nt),_e.setClearAlpha(rt||0),_e.clear()),this.scene.overrideMaterial=_,_e.render(this.scene,this.camera),this.scene.overrideMaterial=null,_e.autoClear=at,_e.setClearColor(this.originalClearColor),_e.setClearAlpha(it)}renderMetalness(_e,_,tt,nt,rt){this.originalClearColor.copy(_e.getClearColor(this.tempColor));const it=_e.getClearAlpha(this.tempColor),at=_e.autoClear;_e.setRenderTarget(tt),_e.autoClear=!1,nt=_.clearColor||nt,rt=_.clearAlpha||rt,nt!=null&&(_e.setClearColor(nt),_e.setClearAlpha(rt||0),_e.clear()),this.scene.traverseVisible(ot=>{ot._SSRPassBackupMaterial=ot.material,this._selects.includes(ot)?ot.material=this.metalnessOnMaterial:ot.material=this.metalnessOffMaterial}),_e.render(this.scene,this.camera),this.scene.traverseVisible(ot=>{ot.material=ot._SSRPassBackupMaterial}),_e.autoClear=at,_e.setClearColor(this.originalClearColor),_e.setClearAlpha(it)}setSize(_e,_){this.width=_e,this.height=_,this.ssrMaterial.defines.MAX_STEP=Math.sqrt(_e*_e+_*_),this.ssrMaterial.needsUpdate=!0,this.beautyRenderTarget.setSize(_e,_),this.prevRenderTarget.setSize(_e,_),this.ssrRenderTarget.setSize(_e,_),this.normalRenderTarget.setSize(_e,_),this.metalnessRenderTarget.setSize(_e,_),this.blurRenderTarget.setSize(_e,_),this.blurRenderTarget2.setSize(_e,_),this.ssrMaterial.uniforms.resolution.value.set(_e,_),this.ssrMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssrMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(_e,_),this.blurMaterial2.uniforms.resolution.value.set(_e,_)}};let SSRPass=_SSRPass;__publicField(SSRPass,"OUTPUT",{Default:0,SSR:1,Beauty:3,Depth:4,Normal:5,Metalness:7});const _VRButton=class{static createButton(_e,_={}){const tt=document.createElement("button");function nt(){let ot=null;async function st(ct){ct.addEventListener("end",lt),await _e.xr.setSession(ct),tt.textContent="EXIT VR",ot=ct}function lt(){ot.removeEventListener("end",lt),tt.textContent="ENTER VR",ot=null}tt.style.display="",tt.style.cursor="pointer",tt.style.left="calc(50% - 50px)",tt.style.width="100px",tt.textContent="ENTER VR",tt.onmouseenter=()=>{tt.style.opacity="1.0"},tt.onmouseleave=()=>{tt.style.opacity="0.5"},tt.onclick=()=>{var ct;if(ot===null){const ut=[_.optionalFeatures,"local-floor","bounded-floor","hand-tracking"].flat().filter(Boolean);(ct=navigator.xr)==null||ct.requestSession("immersive-vr",{..._,optionalFeatures:ut}).then(st)}else ot.end()}}function rt(){tt.style.display="",tt.style.cursor="auto",tt.style.left="calc(50% - 75px)",tt.style.width="150px",tt.onmouseenter=null,tt.onmouseleave=null,tt.onclick=null}function it(){rt(),tt.textContent="VR NOT SUPPORTED"}function at(ot){ot.style.position="absolute",ot.style.bottom="20px",ot.style.padding="12px 6px",ot.style.border="1px solid #fff",ot.style.borderRadius="4px",ot.style.background="rgba(0,0,0,0.1)",ot.style.color="#fff",ot.style.font="normal 13px sans-serif",ot.style.textAlign="center",ot.style.opacity="0.5",ot.style.outline="none",ot.style.zIndex="999"}if("xr"in navigator)return at(tt),tt.id="VRButton",tt.style.display="none",navigator.xr.isSessionSupported("immersive-vr").then(ot=>{ot?nt():it(),ot&&_VRButton.xrSessionIsGranted&&tt.click()}),tt;{const ot=document.createElement("a");return window.isSecureContext===!1?(ot.href=document.location.href.replace(/^http:/,"https:"),ot.innerHTML="WEBXR NEEDS HTTPS"):(ot.href="https://immersiveweb.dev/",ot.innerHTML="WEBXR NOT AVAILABLE"),ot.style.left="calc(50% - 90px)",ot.style.width="180px",ot.style.textDecoration="none",at(ot),ot}}static registerSessionGrantedListener(){"xr"in navigator&&navigator.xr.addEventListener("sessiongranted",()=>{_VRButton.xrSessionIsGranted=!0})}};let VRButton=_VRButton;__publicField(VRButton,"xrSessionIsGranted",!1);class Font{constructor(_){__publicField(this,"data"),this.data=_}generateShapes(_,tt=100,nt){const rt=[],it={letterSpacing:0,lineHeight:1,...nt},at=createPaths(_,tt,this.data,it);for(let ot=0,st=at.length;ot<st;ot++)Array.prototype.push.apply(rt,at[ot].toShapes(!1));return rt}}__publicField(Font,"isFont");__publicField(Font,"type");function createPaths(_e,_,tt,nt){const rt=Array.from(_e),it=_/tt.resolution,at=(tt.boundingBox.yMax-tt.boundingBox.yMin+tt.underlineThickness)*it,ot=[];let st=0,lt=0;for(let ct=0;ct<rt.length;ct++){const ut=rt[ct];if(ut===`
`)st=0,lt-=at*nt.lineHeight;else{const ft=createPath(ut,it,st,lt,tt);ft&&(st+=ft.offsetX+nt.letterSpacing,ot.push(ft.path))}}return ot}function createPath(_e,_,tt,nt,rt){const it=rt.glyphs[_e]||rt.glyphs["?"];if(!it){console.error('THREE.Font: character "'+_e+'" does not exists in font family '+rt.familyName+".");return}const at=new ShapePath;let ot,st,lt,ct,ut,ft,pt,gt;if(it.o){const xt=it._cachedOutline||(it._cachedOutline=it.o.split(" "));for(let yt=0,mt=xt.length;yt<mt;)switch(xt[yt++]){case"m":ot=parseInt(xt[yt++])*_+tt,st=parseInt(xt[yt++])*_+nt,at.moveTo(ot,st);break;case"l":ot=parseInt(xt[yt++])*_+tt,st=parseInt(xt[yt++])*_+nt,at.lineTo(ot,st);break;case"q":lt=parseInt(xt[yt++])*_+tt,ct=parseInt(xt[yt++])*_+nt,ut=parseInt(xt[yt++])*_+tt,ft=parseInt(xt[yt++])*_+nt,at.quadraticCurveTo(ut,ft,lt,ct);break;case"b":lt=parseInt(xt[yt++])*_+tt,ct=parseInt(xt[yt++])*_+nt,ut=parseInt(xt[yt++])*_+tt,ft=parseInt(xt[yt++])*_+nt,pt=parseInt(xt[yt++])*_+tt,gt=parseInt(xt[yt++])*_+nt,at.bezierCurveTo(ut,ft,pt,gt,lt,ct);break}}return{offsetX:it.ha*_,path:at}}class Data3DTexture extends Texture{constructor(_=null,tt=1,nt=1,rt=1){super(null),this.isData3DTexture=!0,this.image={data:_,width:tt,height:nt,depth:rt},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$1=root$1.Symbol;const Symbol$2=Symbol$1;var objectProto$j=Object.prototype,hasOwnProperty$g=objectProto$j.hasOwnProperty,nativeObjectToString$1=objectProto$j.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(_e){var _=hasOwnProperty$g.call(_e,symToStringTag$1),tt=_e[symToStringTag$1];try{_e[symToStringTag$1]=void 0;var nt=!0}catch{}var rt=nativeObjectToString$1.call(_e);return nt&&(_?_e[symToStringTag$1]=tt:delete _e[symToStringTag$1]),rt}var objectProto$i=Object.prototype,nativeObjectToString=objectProto$i.toString;function objectToString(_e){return nativeObjectToString.call(_e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(_e){return _e==null?_e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(_e)?getRawTag(_e):objectToString(_e)}function isObjectLike(_e){return _e!=null&&typeof _e=="object"}var symbolTag$3="[object Symbol]";function isSymbol(_e){return typeof _e=="symbol"||isObjectLike(_e)&&baseGetTag(_e)==symbolTag$3}function arrayMap(_e,_){for(var tt=-1,nt=_e==null?0:_e.length,rt=Array(nt);++tt<nt;)rt[tt]=_(_e[tt],tt,_e);return rt}var isArray$1=Array.isArray;const isArray$1$1=isArray$1;var INFINITY$3=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(_e){if(typeof _e=="string")return _e;if(isArray$1$1(_e))return arrayMap(_e,baseToString)+"";if(isSymbol(_e))return symbolToString?symbolToString.call(_e):"";var _=_e+"";return _=="0"&&1/_e==-INFINITY$3?"-0":_}var reWhitespace=/\s/;function trimmedEndIndex(_e){for(var _=_e.length;_--&&reWhitespace.test(_e.charAt(_)););return _}var reTrimStart=/^\s+/;function baseTrim(_e){return _e&&_e.slice(0,trimmedEndIndex(_e)+1).replace(reTrimStart,"")}function isObject$9(_e){var _=typeof _e;return _e!=null&&(_=="object"||_=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(_e){if(typeof _e=="number")return _e;if(isSymbol(_e))return NAN;if(isObject$9(_e)){var _=typeof _e.valueOf=="function"?_e.valueOf():_e;_e=isObject$9(_)?_+"":_}if(typeof _e!="string")return _e===0?_e:+_e;_e=baseTrim(_e);var tt=reIsBinary.test(_e);return tt||reIsOctal.test(_e)?freeParseInt(_e.slice(2),tt?2:8):reIsBadHex.test(_e)?NAN:+_e}var INFINITY$2=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(_e){if(!_e)return _e===0?_e:0;if(_e=toNumber(_e),_e===INFINITY$2||_e===-INFINITY$2){var _=_e<0?-1:1;return _*MAX_INTEGER}return _e===_e?_e:0}function toInteger(_e){var _=toFinite(_e),tt=_%1;return _===_?tt?_-tt:_:0}function identity(_e){return _e}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(_e){if(!isObject$9(_e))return!1;var _=baseGetTag(_e);return _==funcTag$2||_==genTag$1||_==asyncTag||_==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var _e=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return _e?"Symbol(src)_1."+_e:""}();function isMasked(_e){return!!maskSrcKey&&maskSrcKey in _e}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(_e){if(_e!=null){try{return funcToString$1.call(_e)}catch{}try{return _e+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$h=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$f=objectProto$h.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$f).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(_e){if(!isObject$9(_e)||isMasked(_e))return!1;var _=isFunction(_e)?reIsNative:reIsHostCtor;return _.test(toSource(_e))}function getValue$2(_e,_){return _e==null?void 0:_e[_]}function getNative(_e,_){var tt=getValue$2(_e,_);return baseIsNative(tt)?tt:void 0}var WeakMap$1=getNative(root$1,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function _e(){}return function(_){if(!isObject$9(_))return{};if(objectCreate)return objectCreate(_);_e.prototype=_;var tt=new _e;return _e.prototype=void 0,tt}}();const baseCreate$1=baseCreate;function apply(_e,_,tt){switch(tt.length){case 0:return _e.call(_);case 1:return _e.call(_,tt[0]);case 2:return _e.call(_,tt[0],tt[1]);case 3:return _e.call(_,tt[0],tt[1],tt[2])}return _e.apply(_,tt)}function noop$1(){}function copyArray(_e,_){var tt=-1,nt=_e.length;for(_||(_=Array(nt));++tt<nt;)_[tt]=_e[tt];return _}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(_e){var _=0,tt=0;return function(){var nt=nativeNow(),rt=HOT_SPAN-(nt-tt);if(tt=nt,rt>0){if(++_>=HOT_COUNT)return arguments[0]}else _=0;return _e.apply(void 0,arguments)}}function constant(_e){return function(){return _e}}var defineProperty=function(){try{var _e=getNative(Object,"defineProperty");return _e({},"",{}),_e}catch{}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(_e,_){return defineProperty$1(_e,"toString",{configurable:!0,enumerable:!1,value:constant(_),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(_e,_){for(var tt=-1,nt=_e==null?0:_e.length;++tt<nt&&_(_e[tt],tt,_e)!==!1;);return _e}function baseFindIndex(_e,_,tt,nt){for(var rt=_e.length,it=tt+(nt?1:-1);nt?it--:++it<rt;)if(_(_e[it],it,_e))return it;return-1}function baseIsNaN(_e){return _e!==_e}function strictIndexOf(_e,_,tt){for(var nt=tt-1,rt=_e.length;++nt<rt;)if(_e[nt]===_)return nt;return-1}function baseIndexOf(_e,_,tt){return _===_?strictIndexOf(_e,_,tt):baseFindIndex(_e,baseIsNaN,tt)}function arrayIncludes(_e,_){var tt=_e==null?0:_e.length;return!!tt&&baseIndexOf(_e,_,0)>-1}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(_e,_){var tt=typeof _e;return _=_??MAX_SAFE_INTEGER$1,!!_&&(tt=="number"||tt!="symbol"&&reIsUint.test(_e))&&_e>-1&&_e%1==0&&_e<_}function baseAssignValue(_e,_,tt){_=="__proto__"&&defineProperty$1?defineProperty$1(_e,_,{configurable:!0,enumerable:!0,value:tt,writable:!0}):_e[_]=tt}function eq(_e,_){return _e===_||_e!==_e&&_!==_}var objectProto$g=Object.prototype,hasOwnProperty$e=objectProto$g.hasOwnProperty;function assignValue(_e,_,tt){var nt=_e[_];(!(hasOwnProperty$e.call(_e,_)&&eq(nt,tt))||tt===void 0&&!(_ in _e))&&baseAssignValue(_e,_,tt)}function copyObject(_e,_,tt,nt){var rt=!tt;tt||(tt={});for(var it=-1,at=_.length;++it<at;){var ot=_[it],st=nt?nt(tt[ot],_e[ot],ot,tt,_e):void 0;st===void 0&&(st=_e[ot]),rt?baseAssignValue(tt,ot,st):assignValue(tt,ot,st)}return tt}var nativeMax$3=Math.max;function overRest(_e,_,tt){return _=nativeMax$3(_===void 0?_e.length-1:_,0),function(){for(var nt=arguments,rt=-1,it=nativeMax$3(nt.length-_,0),at=Array(it);++rt<it;)at[rt]=nt[_+rt];rt=-1;for(var ot=Array(_+1);++rt<_;)ot[rt]=nt[rt];return ot[_]=tt(at),apply(_e,this,ot)}}function baseRest(_e,_){return setToString$1(overRest(_e,_,identity),_e+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(_e){return typeof _e=="number"&&_e>-1&&_e%1==0&&_e<=MAX_SAFE_INTEGER}function isArrayLike(_e){return _e!=null&&isLength(_e.length)&&!isFunction(_e)}function isIterateeCall(_e,_,tt){if(!isObject$9(tt))return!1;var nt=typeof _;return(nt=="number"?isArrayLike(tt)&&isIndex(_,tt.length):nt=="string"&&_ in tt)?eq(tt[_],_e):!1}function createAssigner(_e){return baseRest(function(_,tt){var nt=-1,rt=tt.length,it=rt>1?tt[rt-1]:void 0,at=rt>2?tt[2]:void 0;for(it=_e.length>3&&typeof it=="function"?(rt--,it):void 0,at&&isIterateeCall(tt[0],tt[1],at)&&(it=rt<3?void 0:it,rt=1),_=Object(_);++nt<rt;){var ot=tt[nt];ot&&_e(_,ot,nt,it)}return _})}var objectProto$f=Object.prototype;function isPrototype(_e){var _=_e&&_e.constructor,tt=typeof _=="function"&&_.prototype||objectProto$f;return _e===tt}function baseTimes(_e,_){for(var tt=-1,nt=Array(_e);++tt<_e;)nt[tt]=_(tt);return nt}var argsTag$3="[object Arguments]";function baseIsArguments(_e){return isObjectLike(_e)&&baseGetTag(_e)==argsTag$3}var objectProto$e=Object.prototype,hasOwnProperty$d=objectProto$e.hasOwnProperty,propertyIsEnumerable$1=objectProto$e.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(_e){return isObjectLike(_e)&&hasOwnProperty$d.call(_e,"callee")&&!propertyIsEnumerable$1.call(_e,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$3="[object Object]",regexpTag$4="[object RegExp]",setTag$6="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$4]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(_e){return isObjectLike(_e)&&isLength(_e.length)&&!!typedArrayTags[baseGetTag(_e)]}function baseUnary(_e){return function(_){return _e(_)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var _e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return _e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$d=Object.prototype,hasOwnProperty$c=objectProto$d.hasOwnProperty;function arrayLikeKeys(_e,_){var tt=isArray$1$1(_e),nt=!tt&&isArguments$1(_e),rt=!tt&&!nt&&isBuffer$1(_e),it=!tt&&!nt&&!rt&&isTypedArray$1(_e),at=tt||nt||rt||it,ot=at?baseTimes(_e.length,String):[],st=ot.length;for(var lt in _e)(_||hasOwnProperty$c.call(_e,lt))&&!(at&&(lt=="length"||rt&&(lt=="offset"||lt=="parent")||it&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||isIndex(lt,st)))&&ot.push(lt);return ot}function overArg(_e,_){return function(tt){return _e(_(tt))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function baseKeys(_e){if(!isPrototype(_e))return nativeKeys$1(_e);var _=[];for(var tt in Object(_e))hasOwnProperty$b.call(_e,tt)&&tt!="constructor"&&_.push(tt);return _}function keys(_e){return isArrayLike(_e)?arrayLikeKeys(_e):baseKeys(_e)}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty,assign$4=createAssigner(function(_e,_){if(isPrototype(_)||isArrayLike(_)){copyObject(_,keys(_),_e);return}for(var tt in _)hasOwnProperty$a.call(_,tt)&&assignValue(_e,tt,_[tt])});const assign$1$1=assign$4;function nativeKeysIn(_e){var _=[];if(_e!=null)for(var tt in Object(_e))_.push(tt);return _}var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function baseKeysIn(_e){if(!isObject$9(_e))return nativeKeysIn(_e);var _=isPrototype(_e),tt=[];for(var nt in _e)nt=="constructor"&&(_||!hasOwnProperty$9.call(_e,nt))||tt.push(nt);return tt}function keysIn(_e){return isArrayLike(_e)?arrayLikeKeys(_e,!0):baseKeysIn(_e)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(_e,_){if(isArray$1$1(_e))return!1;var tt=typeof _e;return tt=="number"||tt=="symbol"||tt=="boolean"||_e==null||isSymbol(_e)?!0:reIsPlainProp.test(_e)||!reIsDeepProp.test(_e)||_!=null&&_e in Object(_)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(_e){var _=this.has(_e)&&delete this.__data__[_e];return this.size-=_?1:0,_}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet(_e){var _=this.__data__;if(nativeCreate$1){var tt=_[_e];return tt===HASH_UNDEFINED$2?void 0:tt}return hasOwnProperty$8.call(_,_e)?_[_e]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas(_e){var _=this.__data__;return nativeCreate$1?_[_e]!==void 0:hasOwnProperty$7.call(_,_e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(_e,_){var tt=this.__data__;return this.size+=this.has(_e)?0:1,tt[_e]=nativeCreate$1&&_===void 0?HASH_UNDEFINED$1:_,this}function Hash(_e){var _=-1,tt=_e==null?0:_e.length;for(this.clear();++_<tt;){var nt=_e[_];this.set(nt[0],nt[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(_e,_){for(var tt=_e.length;tt--;)if(eq(_e[tt][0],_))return tt;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(_e){var _=this.__data__,tt=assocIndexOf(_,_e);if(tt<0)return!1;var nt=_.length-1;return tt==nt?_.pop():splice.call(_,tt,1),--this.size,!0}function listCacheGet(_e){var _=this.__data__,tt=assocIndexOf(_,_e);return tt<0?void 0:_[tt][1]}function listCacheHas(_e){return assocIndexOf(this.__data__,_e)>-1}function listCacheSet(_e,_){var tt=this.__data__,nt=assocIndexOf(tt,_e);return nt<0?(++this.size,tt.push([_e,_])):tt[nt][1]=_,this}function ListCache(_e){var _=-1,tt=_e==null?0:_e.length;for(this.clear();++_<tt;){var nt=_e[_];this.set(nt[0],nt[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(_e){var _=typeof _e;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?_e!=="__proto__":_e===null}function getMapData(_e,_){var tt=_e.__data__;return isKeyable(_)?tt[typeof _=="string"?"string":"hash"]:tt.map}function mapCacheDelete(_e){var _=getMapData(this,_e).delete(_e);return this.size-=_?1:0,_}function mapCacheGet(_e){return getMapData(this,_e).get(_e)}function mapCacheHas(_e){return getMapData(this,_e).has(_e)}function mapCacheSet(_e,_){var tt=getMapData(this,_e),nt=tt.size;return tt.set(_e,_),this.size+=tt.size==nt?0:1,this}function MapCache(_e){var _=-1,tt=_e==null?0:_e.length;for(this.clear();++_<tt;){var nt=_e[_];this.set(nt[0],nt[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(_e,_){if(typeof _e!="function"||_!=null&&typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var tt=function(){var nt=arguments,rt=_?_.apply(this,nt):nt[0],it=tt.cache;if(it.has(rt))return it.get(rt);var at=_e.apply(this,nt);return tt.cache=it.set(rt,at)||it,at};return tt.cache=new(memoize.Cache||MapCache),tt}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(_e){var _=memoize(_e,function(nt){return tt.size===MAX_MEMOIZE_SIZE&&tt.clear(),nt}),tt=_.cache;return _}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(_e){var _=[];return _e.charCodeAt(0)===46&&_.push(""),_e.replace(rePropName,function(tt,nt,rt,it){_.push(rt?it.replace(reEscapeChar,"$1"):nt||tt)}),_});const stringToPath$1=stringToPath;function toString$1(_e){return _e==null?"":baseToString(_e)}function castPath(_e,_){return isArray$1$1(_e)?_e:isKey(_e,_)?[_e]:stringToPath$1(toString$1(_e))}var INFINITY$1=1/0;function toKey(_e){if(typeof _e=="string"||isSymbol(_e))return _e;var _=_e+"";return _=="0"&&1/_e==-INFINITY$1?"-0":_}function baseGet(_e,_){_=castPath(_,_e);for(var tt=0,nt=_.length;_e!=null&&tt<nt;)_e=_e[toKey(_[tt++])];return tt&&tt==nt?_e:void 0}function get$1(_e,_,tt){var nt=_e==null?void 0:baseGet(_e,_);return nt===void 0?tt:nt}function arrayPush(_e,_){for(var tt=-1,nt=_.length,rt=_e.length;++tt<nt;)_e[rt+tt]=_[tt];return _e}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(_e){return isArray$1$1(_e)||isArguments$1(_e)||!!(spreadableSymbol&&_e&&_e[spreadableSymbol])}function baseFlatten(_e,_,tt,nt,rt){var it=-1,at=_e.length;for(tt||(tt=isFlattenable),rt||(rt=[]);++it<at;){var ot=_e[it];_>0&&tt(ot)?_>1?baseFlatten(ot,_-1,tt,nt,rt):arrayPush(rt,ot):nt||(rt[rt.length]=ot)}return rt}function flatten$1(_e){var _=_e==null?0:_e.length;return _?baseFlatten(_e,1):[]}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;function baseSlice(_e,_,tt){var nt=-1,rt=_e.length;_<0&&(_=-_>rt?0:rt+_),tt=tt>rt?rt:tt,tt<0&&(tt+=rt),rt=_>tt?0:tt-_>>>0,_>>>=0;for(var it=Array(rt);++nt<rt;)it[nt]=_e[nt+_];return it}function arrayReduce(_e,_,tt,nt){var rt=-1,it=_e==null?0:_e.length;for(nt&&it&&(tt=_e[++rt]);++rt<it;)tt=_(tt,_e[rt],rt,_e);return tt}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(_e){var _=this.__data__,tt=_.delete(_e);return this.size=_.size,tt}function stackGet(_e){return this.__data__.get(_e)}function stackHas(_e){return this.__data__.has(_e)}var LARGE_ARRAY_SIZE$2=200;function stackSet(_e,_){var tt=this.__data__;if(tt instanceof ListCache){var nt=tt.__data__;if(!Map$2||nt.length<LARGE_ARRAY_SIZE$2-1)return nt.push([_e,_]),this.size=++tt.size,this;tt=this.__data__=new MapCache(nt)}return tt.set(_e,_),this.size=tt.size,this}function Stack(_e){var _=this.__data__=new ListCache(_e);this.size=_.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(_e,_){return _e&&copyObject(_,keys(_),_e)}function baseAssignIn(_e,_){return _e&&copyObject(_,keysIn(_),_e)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer2=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer2?Buffer2.allocUnsafe:void 0;function cloneBuffer(_e,_){if(_)return _e.slice();var tt=_e.length,nt=allocUnsafe?allocUnsafe(tt):new _e.constructor(tt);return _e.copy(nt),nt}function arrayFilter(_e,_){for(var tt=-1,nt=_e==null?0:_e.length,rt=0,it=[];++tt<nt;){var at=_e[tt];_(at,tt,_e)&&(it[rt++]=at)}return it}function stubArray(){return[]}var objectProto$7=Object.prototype,propertyIsEnumerable=objectProto$7.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(_e){return _e==null?[]:(_e=Object(_e),arrayFilter(nativeGetSymbols$1(_e),function(_){return propertyIsEnumerable.call(_e,_)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(_e,_){return copyObject(_e,getSymbols$1(_e),_)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(_e){for(var _=[];_e;)arrayPush(_,getSymbols$1(_e)),_e=getPrototype$1(_e);return _}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(_e,_){return copyObject(_e,getSymbolsIn$1(_e),_)}function baseGetAllKeys(_e,_,tt){var nt=_(_e);return isArray$1$1(_e)?nt:arrayPush(nt,tt(_e))}function getAllKeys(_e){return baseGetAllKeys(_e,keys,getSymbols$1)}function getAllKeysIn(_e){return baseGetAllKeys(_e,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$1,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$5||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(_e){var _=baseGetTag(_e),tt=_==objectTag$2?_e.constructor:void 0,nt=tt?toSource(tt):"";if(nt)switch(nt){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}return _});const getTag$1=getTag;var objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function initCloneArray(_e){var _=_e.length,tt=new _e.constructor(_);return _&&typeof _e[0]=="string"&&hasOwnProperty$6.call(_e,"index")&&(tt.index=_e.index,tt.input=_e.input),tt}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(_e){var _=new _e.constructor(_e.byteLength);return new Uint8Array$2(_).set(new Uint8Array$2(_e)),_}function cloneDataView(_e,_){var tt=_?cloneArrayBuffer(_e.buffer):_e.buffer;return new _e.constructor(tt,_e.byteOffset,_e.byteLength)}var reFlags=/\w*$/;function cloneRegExp(_e){var _=new _e.constructor(_e.source,reFlags.exec(_e));return _.lastIndex=_e.lastIndex,_}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(_e){return symbolValueOf$1?Object(symbolValueOf$1.call(_e)):{}}function cloneTypedArray(_e,_){var tt=_?cloneArrayBuffer(_e.buffer):_e.buffer;return new _e.constructor(tt,_e.byteOffset,_e.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$3="[object RegExp]",setTag$4="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(_e,_,tt){var nt=_e.constructor;switch(_){case arrayBufferTag$2:return cloneArrayBuffer(_e);case boolTag$2:case dateTag$2:return new nt(+_e);case dataViewTag$2:return cloneDataView(_e,tt);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(_e,tt);case mapTag$4:return new nt;case numberTag$2:case stringTag$3:return new nt(_e);case regexpTag$3:return cloneRegExp(_e);case setTag$4:return new nt;case symbolTag$2:return cloneSymbol(_e)}}function initCloneObject(_e){return typeof _e.constructor=="function"&&!isPrototype(_e)?baseCreate$1(getPrototype$1(_e)):{}}var mapTag$3="[object Map]";function baseIsMap(_e){return isObjectLike(_e)&&getTag$1(_e)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet(_e){return isObjectLike(_e)&&getTag$1(_e)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$1=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$2="[object RegExp]",setTag$2="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$2]=cloneableTags[setTag$2]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(_e,_,tt,nt,rt,it){var at,ot=_&CLONE_DEEP_FLAG,st=_&CLONE_FLAT_FLAG,lt=_&CLONE_SYMBOLS_FLAG$1;if(tt&&(at=rt?tt(_e,nt,rt,it):tt(_e)),at!==void 0)return at;if(!isObject$9(_e))return _e;var ct=isArray$1$1(_e);if(ct){if(at=initCloneArray(_e),!ot)return copyArray(_e,at)}else{var ut=getTag$1(_e),ft=ut==funcTag||ut==genTag;if(isBuffer$1(_e))return cloneBuffer(_e,ot);if(ut==objectTag$1||ut==argsTag$1||ft&&!rt){if(at=st||ft?{}:initCloneObject(_e),!ot)return st?copySymbolsIn(_e,baseAssignIn(at,_e)):copySymbols(_e,baseAssign(at,_e))}else{if(!cloneableTags[ut])return rt?_e:{};at=initCloneByTag(_e,ut,ot)}}it||(it=new Stack);var pt=it.get(_e);if(pt)return pt;it.set(_e,at),isSet$1(_e)?_e.forEach(function(yt){at.add(baseClone(yt,_,tt,yt,_e,it))}):isMap$1(_e)&&_e.forEach(function(yt,mt){at.set(mt,baseClone(yt,_,tt,mt,_e,it))});var gt=lt?st?getAllKeysIn:getAllKeys:st?keysIn:keys,xt=ct?void 0:gt(_e);return arrayEach(xt||_e,function(yt,mt){xt&&(mt=yt,yt=_e[mt]),assignValue(at,mt,baseClone(yt,_,tt,mt,_e,it))}),at}var CLONE_SYMBOLS_FLAG=4;function clone(_e){return baseClone(_e,CLONE_SYMBOLS_FLAG)}function compact(_e){for(var _=-1,tt=_e==null?0:_e.length,nt=0,rt=[];++_<tt;){var it=_e[_];it&&(rt[nt++]=it)}return rt}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(_e){return this.__data__.set(_e,HASH_UNDEFINED),this}function setCacheHas(_e){return this.__data__.has(_e)}function SetCache(_e){var _=-1,tt=_e==null?0:_e.length;for(this.__data__=new MapCache;++_<tt;)this.add(_e[_])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(_e,_){for(var tt=-1,nt=_e==null?0:_e.length;++tt<nt;)if(_(_e[tt],tt,_e))return!0;return!1}function cacheHas(_e,_){return _e.has(_)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(_e,_,tt,nt,rt,it){var at=tt&COMPARE_PARTIAL_FLAG$5,ot=_e.length,st=_.length;if(ot!=st&&!(at&&st>ot))return!1;var lt=it.get(_e),ct=it.get(_);if(lt&&ct)return lt==_&&ct==_e;var ut=-1,ft=!0,pt=tt&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(it.set(_e,_),it.set(_,_e);++ut<ot;){var gt=_e[ut],xt=_[ut];if(nt)var yt=at?nt(xt,gt,ut,_,_e,it):nt(gt,xt,ut,_e,_,it);if(yt!==void 0){if(yt)continue;ft=!1;break}if(pt){if(!arraySome(_,function(mt,At){if(!cacheHas(pt,At)&&(gt===mt||rt(gt,mt,tt,nt,it)))return pt.push(At)})){ft=!1;break}}else if(!(gt===xt||rt(gt,xt,tt,nt,it))){ft=!1;break}}return it.delete(_e),it.delete(_),ft}function mapToArray(_e){var _=-1,tt=Array(_e.size);return _e.forEach(function(nt,rt){tt[++_]=[rt,nt]}),tt}function setToArray(_e){var _=-1,tt=Array(_e.size);return _e.forEach(function(nt){tt[++_]=nt}),tt}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(_e,_,tt,nt,rt,it,at){switch(tt){case dataViewTag:if(_e.byteLength!=_.byteLength||_e.byteOffset!=_.byteOffset)return!1;_e=_e.buffer,_=_.buffer;case arrayBufferTag:return!(_e.byteLength!=_.byteLength||!it(new Uint8Array$2(_e),new Uint8Array$2(_)));case boolTag:case dateTag:case numberTag:return eq(+_e,+_);case errorTag:return _e.name==_.name&&_e.message==_.message;case regexpTag$1:case stringTag$1:return _e==_+"";case mapTag$1:var ot=mapToArray;case setTag$1:var st=nt&COMPARE_PARTIAL_FLAG$4;if(ot||(ot=setToArray),_e.size!=_.size&&!st)return!1;var lt=at.get(_e);if(lt)return lt==_;nt|=COMPARE_UNORDERED_FLAG$2,at.set(_e,_);var ct=equalArrays(ot(_e),ot(_),nt,rt,it,at);return at.delete(_e),ct;case symbolTag:if(symbolValueOf)return symbolValueOf.call(_e)==symbolValueOf.call(_)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function equalObjects(_e,_,tt,nt,rt,it){var at=tt&COMPARE_PARTIAL_FLAG$3,ot=getAllKeys(_e),st=ot.length,lt=getAllKeys(_),ct=lt.length;if(st!=ct&&!at)return!1;for(var ut=st;ut--;){var ft=ot[ut];if(!(at?ft in _:hasOwnProperty$5.call(_,ft)))return!1}var pt=it.get(_e),gt=it.get(_);if(pt&&gt)return pt==_&&gt==_e;var xt=!0;it.set(_e,_),it.set(_,_e);for(var yt=at;++ut<st;){ft=ot[ut];var mt=_e[ft],At=_[ft];if(nt)var vt=at?nt(At,mt,ft,_,_e,it):nt(mt,At,ft,_e,_,it);if(!(vt===void 0?mt===At||rt(mt,At,tt,nt,it):vt)){xt=!1;break}yt||(yt=ft=="constructor")}if(xt&&!yt){var Et=_e.constructor,Ct=_.constructor;Et!=Ct&&"constructor"in _e&&"constructor"in _&&!(typeof Et=="function"&&Et instanceof Et&&typeof Ct=="function"&&Ct instanceof Ct)&&(xt=!1)}return it.delete(_e),it.delete(_),xt}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function baseIsEqualDeep(_e,_,tt,nt,rt,it){var at=isArray$1$1(_e),ot=isArray$1$1(_),st=at?arrayTag:getTag$1(_e),lt=ot?arrayTag:getTag$1(_);st=st==argsTag?objectTag:st,lt=lt==argsTag?objectTag:lt;var ct=st==objectTag,ut=lt==objectTag,ft=st==lt;if(ft&&isBuffer$1(_e)){if(!isBuffer$1(_))return!1;at=!0,ct=!1}if(ft&&!ct)return it||(it=new Stack),at||isTypedArray$1(_e)?equalArrays(_e,_,tt,nt,rt,it):equalByTag(_e,_,st,tt,nt,rt,it);if(!(tt&COMPARE_PARTIAL_FLAG$2)){var pt=ct&&hasOwnProperty$4.call(_e,"__wrapped__"),gt=ut&&hasOwnProperty$4.call(_,"__wrapped__");if(pt||gt){var xt=pt?_e.value():_e,yt=gt?_.value():_;return it||(it=new Stack),rt(xt,yt,tt,nt,it)}}return ft?(it||(it=new Stack),equalObjects(_e,_,tt,nt,rt,it)):!1}function baseIsEqual(_e,_,tt,nt,rt){return _e===_?!0:_e==null||_==null||!isObjectLike(_e)&&!isObjectLike(_)?_e!==_e&&_!==_:baseIsEqualDeep(_e,_,tt,nt,baseIsEqual,rt)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(_e,_,tt,nt){var rt=tt.length,it=rt,at=!nt;if(_e==null)return!it;for(_e=Object(_e);rt--;){var ot=tt[rt];if(at&&ot[2]?ot[1]!==_e[ot[0]]:!(ot[0]in _e))return!1}for(;++rt<it;){ot=tt[rt];var st=ot[0],lt=_e[st],ct=ot[1];if(at&&ot[2]){if(lt===void 0&&!(st in _e))return!1}else{var ut=new Stack;if(nt)var ft=nt(lt,ct,st,_e,_,ut);if(!(ft===void 0?baseIsEqual(ct,lt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,nt,ut):ft))return!1}}return!0}function isStrictComparable(_e){return _e===_e&&!isObject$9(_e)}function getMatchData(_e){for(var _=keys(_e),tt=_.length;tt--;){var nt=_[tt],rt=_e[nt];_[tt]=[nt,rt,isStrictComparable(rt)]}return _}function matchesStrictComparable(_e,_){return function(tt){return tt==null?!1:tt[_e]===_&&(_!==void 0||_e in Object(tt))}}function baseMatches(_e){var _=getMatchData(_e);return _.length==1&&_[0][2]?matchesStrictComparable(_[0][0],_[0][1]):function(tt){return tt===_e||baseIsMatch(tt,_e,_)}}function baseHasIn(_e,_){return _e!=null&&_ in Object(_e)}function hasPath(_e,_,tt){_=castPath(_,_e);for(var nt=-1,rt=_.length,it=!1;++nt<rt;){var at=toKey(_[nt]);if(!(it=_e!=null&&tt(_e,at)))break;_e=_e[at]}return it||++nt!=rt?it:(rt=_e==null?0:_e.length,!!rt&&isLength(rt)&&isIndex(at,rt)&&(isArray$1$1(_e)||isArguments$1(_e)))}function hasIn(_e,_){return _e!=null&&hasPath(_e,_,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(_e,_){return isKey(_e)&&isStrictComparable(_)?matchesStrictComparable(toKey(_e),_):function(tt){var nt=get$1(tt,_e);return nt===void 0&&nt===_?hasIn(tt,_e):baseIsEqual(_,nt,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(_e){return function(_){return _==null?void 0:_[_e]}}function basePropertyDeep(_e){return function(_){return baseGet(_,_e)}}function property(_e){return isKey(_e)?baseProperty(toKey(_e)):basePropertyDeep(_e)}function baseIteratee(_e){return typeof _e=="function"?_e:_e==null?identity:typeof _e=="object"?isArray$1$1(_e)?baseMatchesProperty(_e[0],_e[1]):baseMatches(_e):property(_e)}function arrayAggregator(_e,_,tt,nt){for(var rt=-1,it=_e==null?0:_e.length;++rt<it;){var at=_e[rt];_(nt,at,tt(at),_e)}return nt}function createBaseFor(_e){return function(_,tt,nt){for(var rt=-1,it=Object(_),at=nt(_),ot=at.length;ot--;){var st=at[_e?ot:++rt];if(tt(it[st],st,it)===!1)break}return _}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(_e,_){return _e&&baseFor$1(_e,_,keys)}function createBaseEach(_e,_){return function(tt,nt){if(tt==null)return tt;if(!isArrayLike(tt))return _e(tt,nt);for(var rt=tt.length,it=_?rt:-1,at=Object(tt);(_?it--:++it<rt)&&nt(at[it],it,at)!==!1;);return tt}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;function baseAggregator(_e,_,tt,nt){return baseEach$1(_e,function(rt,it,at){_(nt,rt,tt(rt),at)}),nt}function createAggregator(_e,_){return function(tt,nt){var rt=isArray$1$1(tt)?arrayAggregator:baseAggregator,it=_?_():{};return rt(tt,_e,baseIteratee(nt),it)}}var objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty,defaults=baseRest(function(_e,_){_e=Object(_e);var tt=-1,nt=_.length,rt=nt>2?_[2]:void 0;for(rt&&isIterateeCall(_[0],_[1],rt)&&(nt=1);++tt<nt;)for(var it=_[tt],at=keysIn(it),ot=-1,st=at.length;++ot<st;){var lt=at[ot],ct=_e[lt];(ct===void 0||eq(ct,objectProto$3[lt])&&!hasOwnProperty$3.call(_e,lt))&&(_e[lt]=it[lt])}return _e});const defaults$1=defaults;function isArrayLikeObject(_e){return isObjectLike(_e)&&isArrayLike(_e)}function arrayIncludesWith(_e,_,tt){for(var nt=-1,rt=_e==null?0:_e.length;++nt<rt;)if(tt(_,_e[nt]))return!0;return!1}var LARGE_ARRAY_SIZE$1=200;function baseDifference(_e,_,tt,nt){var rt=-1,it=arrayIncludes,at=!0,ot=_e.length,st=[],lt=_.length;if(!ot)return st;tt&&(_=arrayMap(_,baseUnary(tt))),nt?(it=arrayIncludesWith,at=!1):_.length>=LARGE_ARRAY_SIZE$1&&(it=cacheHas,at=!1,_=new SetCache(_));e:for(;++rt<ot;){var ct=_e[rt],ut=tt==null?ct:tt(ct);if(ct=nt||ct!==0?ct:0,at&&ut===ut){for(var ft=lt;ft--;)if(_[ft]===ut)continue e;st.push(ct)}else it(_,ut,nt)||st.push(ct)}return st}var difference=baseRest(function(_e,_){return isArrayLikeObject(_e)?baseDifference(_e,baseFlatten(_,1,isArrayLikeObject,!0)):[]});const difference$1=difference;function last(_e){var _=_e==null?0:_e.length;return _?_e[_-1]:void 0}function drop(_e,_,tt){var nt=_e==null?0:_e.length;return nt?(_=tt||_===void 0?1:toInteger(_),baseSlice(_e,_<0?0:_,nt)):[]}function dropRight(_e,_,tt){var nt=_e==null?0:_e.length;return nt?(_=tt||_===void 0?1:toInteger(_),_=nt-_,baseSlice(_e,0,_<0?0:_)):[]}function castFunction(_e){return typeof _e=="function"?_e:identity}function forEach(_e,_){var tt=isArray$1$1(_e)?arrayEach:baseEach$1;return tt(_e,castFunction(_))}function arrayEvery(_e,_){for(var tt=-1,nt=_e==null?0:_e.length;++tt<nt;)if(!_(_e[tt],tt,_e))return!1;return!0}function baseEvery(_e,_){var tt=!0;return baseEach$1(_e,function(nt,rt,it){return tt=!!_(nt,rt,it),tt}),tt}function every(_e,_,tt){var nt=isArray$1$1(_e)?arrayEvery:baseEvery;return tt&&isIterateeCall(_e,_,tt)&&(_=void 0),nt(_e,baseIteratee(_))}function baseFilter(_e,_){var tt=[];return baseEach$1(_e,function(nt,rt,it){_(nt,rt,it)&&tt.push(nt)}),tt}function filter(_e,_){var tt=isArray$1$1(_e)?arrayFilter:baseFilter;return tt(_e,baseIteratee(_))}function createFind(_e){return function(_,tt,nt){var rt=Object(_);if(!isArrayLike(_)){var it=baseIteratee(tt);_=keys(_),tt=function(ot){return it(rt[ot],ot,rt)}}var at=_e(_,tt,nt);return at>-1?rt[it?_[at]:at]:void 0}}var nativeMax$2=Math.max;function findIndex(_e,_,tt){var nt=_e==null?0:_e.length;if(!nt)return-1;var rt=tt==null?0:toInteger(tt);return rt<0&&(rt=nativeMax$2(nt+rt,0)),baseFindIndex(_e,baseIteratee(_),rt)}var find=createFind(findIndex);const find$1=find;function head(_e){return _e&&_e.length?_e[0]:void 0}function baseMap(_e,_){var tt=-1,nt=isArrayLike(_e)?Array(_e.length):[];return baseEach$1(_e,function(rt,it,at){nt[++tt]=_(rt,it,at)}),nt}function map(_e,_){var tt=isArray$1$1(_e)?arrayMap:baseMap;return tt(_e,baseIteratee(_))}function flatMap(_e,_){return baseFlatten(map(_e,_),1)}var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty,groupBy=createAggregator(function(_e,_,tt){hasOwnProperty$2.call(_e,tt)?_e[tt].push(_):baseAssignValue(_e,tt,[_])});const groupBy$1=groupBy;var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseHas(_e,_){return _e!=null&&hasOwnProperty$1.call(_e,_)}function has$1(_e,_){return _e!=null&&hasPath(_e,_,baseHas)}var stringTag="[object String]";function isString$1(_e){return typeof _e=="string"||!isArray$1$1(_e)&&isObjectLike(_e)&&baseGetTag(_e)==stringTag}function baseValues(_e,_){return arrayMap(_,function(tt){return _e[tt]})}function values(_e){return _e==null?[]:baseValues(_e,keys(_e))}var nativeMax$1=Math.max;function includes(_e,_,tt,nt){_e=isArrayLike(_e)?_e:values(_e),tt=tt&&!nt?toInteger(tt):0;var rt=_e.length;return tt<0&&(tt=nativeMax$1(rt+tt,0)),isString$1(_e)?tt<=rt&&_e.indexOf(_,tt)>-1:!!rt&&baseIndexOf(_e,_,tt)>-1}var nativeMax=Math.max;function indexOf(_e,_,tt){var nt=_e==null?0:_e.length;if(!nt)return-1;var rt=tt==null?0:toInteger(tt);return rt<0&&(rt=nativeMax(nt+rt,0)),baseIndexOf(_e,_,rt)}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty(_e){if(_e==null)return!0;if(isArrayLike(_e)&&(isArray$1$1(_e)||typeof _e=="string"||typeof _e.splice=="function"||isBuffer$1(_e)||isTypedArray$1(_e)||isArguments$1(_e)))return!_e.length;var _=getTag$1(_e);if(_==mapTag||_==setTag)return!_e.size;if(isPrototype(_e))return!baseKeys(_e).length;for(var tt in _e)if(hasOwnProperty.call(_e,tt))return!1;return!0}var regexpTag="[object RegExp]";function baseIsRegExp(_e){return isObjectLike(_e)&&baseGetTag(_e)==regexpTag}var nodeIsRegExp=nodeUtil$1&&nodeUtil$1.isRegExp,isRegExp=nodeIsRegExp?baseUnary(nodeIsRegExp):baseIsRegExp;const isRegExp$1=isRegExp;function isUndefined(_e){return _e===void 0}var FUNC_ERROR_TEXT="Expected a function";function negate(_e){if(typeof _e!="function")throw new TypeError(FUNC_ERROR_TEXT);return function(){var _=arguments;switch(_.length){case 0:return!_e.call(this);case 1:return!_e.call(this,_[0]);case 2:return!_e.call(this,_[0],_[1]);case 3:return!_e.call(this,_[0],_[1],_[2])}return!_e.apply(this,_)}}function baseSet(_e,_,tt,nt){if(!isObject$9(_e))return _e;_=castPath(_,_e);for(var rt=-1,it=_.length,at=it-1,ot=_e;ot!=null&&++rt<it;){var st=toKey(_[rt]),lt=tt;if(st==="__proto__"||st==="constructor"||st==="prototype")return _e;if(rt!=at){var ct=ot[st];lt=nt?nt(ct,st,ot):void 0,lt===void 0&&(lt=isObject$9(ct)?ct:isIndex(_[rt+1])?[]:{})}assignValue(ot,st,lt),ot=ot[st]}return _e}function basePickBy(_e,_,tt){for(var nt=-1,rt=_.length,it={};++nt<rt;){var at=_[nt],ot=baseGet(_e,at);tt(ot,at)&&baseSet(it,castPath(at,_e),ot)}return it}function pickBy(_e,_){if(_e==null)return{};var tt=arrayMap(getAllKeysIn(_e),function(nt){return[nt]});return _=baseIteratee(_),basePickBy(_e,tt,function(nt,rt){return _(nt,rt[0])})}function baseReduce(_e,_,tt,nt,rt){return rt(_e,function(it,at,ot){tt=nt?(nt=!1,it):_(tt,it,at,ot)}),tt}function reduce(_e,_,tt){var nt=isArray$1$1(_e)?arrayReduce:baseReduce,rt=arguments.length<3;return nt(_e,baseIteratee(_),tt,rt,baseEach$1)}function reject(_e,_){var tt=isArray$1$1(_e)?arrayFilter:baseFilter;return tt(_e,negate(baseIteratee(_)))}function baseSome(_e,_){var tt;return baseEach$1(_e,function(nt,rt,it){return tt=_(nt,rt,it),!tt}),!!tt}function some(_e,_,tt){var nt=isArray$1$1(_e)?arraySome:baseSome;return tt&&isIterateeCall(_e,_,tt)&&(_=void 0),nt(_e,baseIteratee(_))}var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function(_e){return new Set$2(_e)}:noop$1;const createSet$1=createSet;var LARGE_ARRAY_SIZE=200;function baseUniq(_e,_,tt){var nt=-1,rt=arrayIncludes,it=_e.length,at=!0,ot=[],st=ot;if(tt)at=!1,rt=arrayIncludesWith;else if(it>=LARGE_ARRAY_SIZE){var lt=_?null:createSet$1(_e);if(lt)return setToArray(lt);at=!1,rt=cacheHas,st=new SetCache}else st=_?[]:ot;e:for(;++nt<it;){var ct=_e[nt],ut=_?_(ct):ct;if(ct=tt||ct!==0?ct:0,at&&ut===ut){for(var ft=st.length;ft--;)if(st[ft]===ut)continue e;_&&st.push(ut),ot.push(ct)}else rt(st,ut,tt)||(st!==ot&&st.push(ut),ot.push(ct))}return ot}function uniq(_e){return _e&&_e.length?baseUniq(_e):[]}function PRINT_ERROR(_e){console&&console.error&&console.error(`Error: ${_e}`)}function PRINT_WARNING(_e){console&&console.warn&&console.warn(`Warning: ${_e}`)}function timer$1(_e){const _=new Date().getTime(),tt=_e();return{time:new Date().getTime()-_,value:tt}}function toFastProperties(_e){function _(){}_.prototype=_e;const tt=new _;function nt(){return typeof tt.bar}return nt(),nt(),_e}function tokenLabel$1(_e){return hasTokenLabel$1(_e)?_e.LABEL:_e.name}function hasTokenLabel$1(_e){return isString$1(_e.LABEL)&&_e.LABEL!==""}class AbstractProduction{get definition(){return this._definition}set definition(_){this._definition=_}constructor(_){this._definition=_}accept(_){_.visit(this),forEach(this.definition,tt=>{tt.accept(_)})}}class NonTerminal extends AbstractProduction{constructor(_){super([]),this.idx=1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}set definition(_){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(_){_.visit(this)}}let Rule$1=class extends AbstractProduction{constructor(_){super(_.definition),this.orgText="",assign$1$1(this,pickBy(_,tt=>tt!==void 0))}};class Alternative extends AbstractProduction{constructor(_){super(_.definition),this.ignoreAmbiguities=!1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}}class Option extends AbstractProduction{constructor(_){super(_.definition),this.idx=1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}}class RepetitionMandatory extends AbstractProduction{constructor(_){super(_.definition),this.idx=1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}}class RepetitionMandatoryWithSeparator extends AbstractProduction{constructor(_){super(_.definition),this.idx=1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}}class Repetition extends AbstractProduction{constructor(_){super(_.definition),this.idx=1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}}class RepetitionWithSeparator extends AbstractProduction{constructor(_){super(_.definition),this.idx=1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}}class Alternation extends AbstractProduction{get definition(){return this._definition}set definition(_){this._definition=_}constructor(_){super(_.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}}class Terminal{constructor(_){this.idx=1,assign$1$1(this,pickBy(_,tt=>tt!==void 0))}accept(_){_.visit(this)}}function serializeGrammar(_e){return map(_e,serializeProduction)}function serializeProduction(_e){function _(tt){return map(tt,serializeProduction)}if(_e instanceof NonTerminal){const tt={type:"NonTerminal",name:_e.nonTerminalName,idx:_e.idx};return isString$1(_e.label)&&(tt.label=_e.label),tt}else{if(_e instanceof Alternative)return{type:"Alternative",definition:_(_e.definition)};if(_e instanceof Option)return{type:"Option",idx:_e.idx,definition:_(_e.definition)};if(_e instanceof RepetitionMandatory)return{type:"RepetitionMandatory",idx:_e.idx,definition:_(_e.definition)};if(_e instanceof RepetitionMandatoryWithSeparator)return{type:"RepetitionMandatoryWithSeparator",idx:_e.idx,separator:serializeProduction(new Terminal({terminalType:_e.separator})),definition:_(_e.definition)};if(_e instanceof RepetitionWithSeparator)return{type:"RepetitionWithSeparator",idx:_e.idx,separator:serializeProduction(new Terminal({terminalType:_e.separator})),definition:_(_e.definition)};if(_e instanceof Repetition)return{type:"Repetition",idx:_e.idx,definition:_(_e.definition)};if(_e instanceof Alternation)return{type:"Alternation",idx:_e.idx,definition:_(_e.definition)};if(_e instanceof Terminal){const tt={type:"Terminal",name:_e.terminalType.name,label:tokenLabel$1(_e.terminalType),idx:_e.idx};isString$1(_e.label)&&(tt.terminalLabel=_e.label);const nt=_e.terminalType.PATTERN;return _e.terminalType.PATTERN&&(tt.pattern=isRegExp$1(nt)?nt.source:nt),tt}else{if(_e instanceof Rule$1)return{type:"Rule",name:_e.name,orgText:_e.orgText,definition:_(_e.definition)};throw Error("non exhaustive match")}}}class GAstVisitor{visit(_){const tt=_;switch(tt.constructor){case NonTerminal:return this.visitNonTerminal(tt);case Alternative:return this.visitAlternative(tt);case Option:return this.visitOption(tt);case RepetitionMandatory:return this.visitRepetitionMandatory(tt);case RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(tt);case RepetitionWithSeparator:return this.visitRepetitionWithSeparator(tt);case Repetition:return this.visitRepetition(tt);case Alternation:return this.visitAlternation(tt);case Terminal:return this.visitTerminal(tt);case Rule$1:return this.visitRule(tt);default:throw Error("non exhaustive match")}}visitNonTerminal(_){}visitAlternative(_){}visitOption(_){}visitRepetition(_){}visitRepetitionMandatory(_){}visitRepetitionMandatoryWithSeparator(_){}visitRepetitionWithSeparator(_){}visitAlternation(_){}visitTerminal(_){}visitRule(_){}}function isSequenceProd(_e){return _e instanceof Alternative||_e instanceof Option||_e instanceof Repetition||_e instanceof RepetitionMandatory||_e instanceof RepetitionMandatoryWithSeparator||_e instanceof RepetitionWithSeparator||_e instanceof Terminal||_e instanceof Rule$1}function isOptionalProd(_e,_=[]){return _e instanceof Option||_e instanceof Repetition||_e instanceof RepetitionWithSeparator?!0:_e instanceof Alternation?some(_e.definition,nt=>isOptionalProd(nt,_)):_e instanceof NonTerminal&&includes(_,_e)?!1:_e instanceof AbstractProduction?(_e instanceof NonTerminal&&_.push(_e),every(_e.definition,nt=>isOptionalProd(nt,_))):!1}function isBranchingProd(_e){return _e instanceof Alternation}function getProductionDslName(_e){if(_e instanceof NonTerminal)return"SUBRULE";if(_e instanceof Option)return"OPTION";if(_e instanceof Alternation)return"OR";if(_e instanceof RepetitionMandatory)return"AT_LEAST_ONE";if(_e instanceof RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(_e instanceof RepetitionWithSeparator)return"MANY_SEP";if(_e instanceof Repetition)return"MANY";if(_e instanceof Terminal)return"CONSUME";throw Error("non exhaustive match")}class RestWalker{walk(_,tt=[]){forEach(_.definition,(nt,rt)=>{const it=drop(_.definition,rt+1);if(nt instanceof NonTerminal)this.walkProdRef(nt,it,tt);else if(nt instanceof Terminal)this.walkTerminal(nt,it,tt);else if(nt instanceof Alternative)this.walkFlat(nt,it,tt);else if(nt instanceof Option)this.walkOption(nt,it,tt);else if(nt instanceof RepetitionMandatory)this.walkAtLeastOne(nt,it,tt);else if(nt instanceof RepetitionMandatoryWithSeparator)this.walkAtLeastOneSep(nt,it,tt);else if(nt instanceof RepetitionWithSeparator)this.walkManySep(nt,it,tt);else if(nt instanceof Repetition)this.walkMany(nt,it,tt);else if(nt instanceof Alternation)this.walkOr(nt,it,tt);else throw Error("non exhaustive match")})}walkTerminal(_,tt,nt){}walkProdRef(_,tt,nt){}walkFlat(_,tt,nt){const rt=tt.concat(nt);this.walk(_,rt)}walkOption(_,tt,nt){const rt=tt.concat(nt);this.walk(_,rt)}walkAtLeastOne(_,tt,nt){const rt=[new Option({definition:_.definition})].concat(tt,nt);this.walk(_,rt)}walkAtLeastOneSep(_,tt,nt){const rt=restForRepetitionWithSeparator(_,tt,nt);this.walk(_,rt)}walkMany(_,tt,nt){const rt=[new Option({definition:_.definition})].concat(tt,nt);this.walk(_,rt)}walkManySep(_,tt,nt){const rt=restForRepetitionWithSeparator(_,tt,nt);this.walk(_,rt)}walkOr(_,tt,nt){const rt=tt.concat(nt);forEach(_.definition,it=>{const at=new Alternative({definition:[it]});this.walk(at,rt)})}}function restForRepetitionWithSeparator(_e,_,tt){return[new Option({definition:[new Terminal({terminalType:_e.separator})].concat(_e.definition)})].concat(_,tt)}function first$1(_e){if(_e instanceof NonTerminal)return first$1(_e.referencedRule);if(_e instanceof Terminal)return firstForTerminal(_e);if(isSequenceProd(_e))return firstForSequence(_e);if(isBranchingProd(_e))return firstForBranching(_e);throw Error("non exhaustive match")}function firstForSequence(_e){let _=[];const tt=_e.definition;let nt=0,rt=tt.length>nt,it,at=!0;for(;rt&&at;)it=tt[nt],at=isOptionalProd(it),_=_.concat(first$1(it)),nt=nt+1,rt=tt.length>nt;return uniq(_)}function firstForBranching(_e){const _=map(_e.definition,tt=>first$1(tt));return uniq(flatten$1(_))}function firstForTerminal(_e){return[_e.terminalType]}const IN="_~IN~_";class ResyncFollowsWalker extends RestWalker{constructor(_){super(),this.topProd=_,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(_,tt,nt){}walkProdRef(_,tt,nt){const rt=buildBetweenProdsFollowPrefix(_.referencedRule,_.idx)+this.topProd.name,it=tt.concat(nt),at=new Alternative({definition:it}),ot=first$1(at);this.follows[rt]=ot}}function computeAllProdsFollows(_e){const _={};return forEach(_e,tt=>{const nt=new ResyncFollowsWalker(tt).startWalking();assign$1$1(_,nt)}),_}function buildBetweenProdsFollowPrefix(_e,_){return _e.name+_+IN}function cc(_e){return _e.charCodeAt(0)}function insertToSet(_e,_){Array.isArray(_e)?_e.forEach(function(tt){_.push(tt)}):_.push(_e)}function addFlag(_e,_){if(_e[_]===!0)throw"duplicate flag "+_;_e[_],_e[_]=!0}function ASSERT_EXISTS(_e){if(_e===void 0)throw Error("Internal Error - Should never get here!");return!0}function ASSERT_NEVER_REACH_HERE(){throw Error("Internal Error - Should never get here!")}function isCharacter(_e){return _e.type==="Character"}const digitsCharCodes=[];for(let _e=cc("0");_e<=cc("9");_e++)digitsCharCodes.push(_e);const wordCharCodes=[cc("_")].concat(digitsCharCodes);for(let _e=cc("a");_e<=cc("z");_e++)wordCharCodes.push(_e);for(let _e=cc("A");_e<=cc("Z");_e++)wordCharCodes.push(_e);const whitespaceCodes=[cc(" "),cc("\f"),cc(`
`),cc("\r"),cc("	"),cc("\v"),cc("	"),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc(""),cc("\u2028"),cc("\u2029"),cc(""),cc(""),cc(""),cc("\uFEFF")],hexDigitPattern=/[0-9a-fA-F]/,decimalPattern=/[0-9]/,decimalPatternNoZero=/[1-9]/;class RegExpParser{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(_){this.idx=_.idx,this.input=_.input,this.groupIdx=_.groupIdx}pattern(_){this.idx=0,this.input=_,this.groupIdx=0,this.consumeChar("/");const tt=this.disjunction();this.consumeChar("/");const nt={type:"Flags",loc:{begin:this.idx,end:_.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":addFlag(nt,"global");break;case"i":addFlag(nt,"ignoreCase");break;case"m":addFlag(nt,"multiLine");break;case"u":addFlag(nt,"unicode");break;case"y":addFlag(nt,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:nt,value:tt,loc:this.loc(0)}}disjunction(){const _=[],tt=this.idx;for(_.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),_.push(this.alternative());return{type:"Disjunction",value:_,loc:this.loc(tt)}}alternative(){const _=[],tt=this.idx;for(;this.isTerm();)_.push(this.term());return{type:"Alternative",value:_,loc:this.loc(tt)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const _=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(_)};case"$":return{type:"EndAnchor",loc:this.loc(_)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(_)};case"B":return{type:"NonWordBoundary",loc:this.loc(_)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let tt;switch(this.popChar()){case"=":tt="Lookahead";break;case"!":tt="NegativeLookahead";break}ASSERT_EXISTS(tt);const nt=this.disjunction();return this.consumeChar(")"),{type:tt,value:nt,loc:this.loc(_)}}return ASSERT_NEVER_REACH_HERE()}quantifier(_=!1){let tt;const nt=this.idx;switch(this.popChar()){case"*":tt={atLeast:0,atMost:1/0};break;case"+":tt={atLeast:1,atMost:1/0};break;case"?":tt={atLeast:0,atMost:1};break;case"{":const rt=this.integerIncludingZero();switch(this.popChar()){case"}":tt={atLeast:rt,atMost:rt};break;case",":let it;this.isDigit()?(it=this.integerIncludingZero(),tt={atLeast:rt,atMost:it}):tt={atLeast:rt,atMost:1/0},this.consumeChar("}");break}if(_===!0&&tt===void 0)return;ASSERT_EXISTS(tt);break}if(!(_===!0&&tt===void 0)&&ASSERT_EXISTS(tt))return this.peekChar(0)==="?"?(this.consumeChar("?"),tt.greedy=!1):tt.greedy=!0,tt.type="Quantifier",tt.loc=this.loc(nt),tt}atom(){let _;const tt=this.idx;switch(this.peekChar()){case".":_=this.dotAll();break;case"\\":_=this.atomEscape();break;case"[":_=this.characterClass();break;case"(":_=this.group();break}if(_===void 0&&this.isPatternCharacter()&&(_=this.patternCharacter()),ASSERT_EXISTS(_))return _.loc=this.loc(tt),this.isQuantifier()&&(_.quantifier=this.quantifier()),_}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[cc(`
`),cc("\r"),cc("\u2028"),cc("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let _,tt=!1;switch(this.popChar()){case"d":_=digitsCharCodes;break;case"D":_=digitsCharCodes,tt=!0;break;case"s":_=whitespaceCodes;break;case"S":_=whitespaceCodes,tt=!0;break;case"w":_=wordCharCodes;break;case"W":_=wordCharCodes,tt=!0;break}if(ASSERT_EXISTS(_))return{type:"Set",value:_,complement:tt}}controlEscapeAtom(){let _;switch(this.popChar()){case"f":_=cc("\f");break;case"n":_=cc(`
`);break;case"r":_=cc("\r");break;case"t":_=cc("	");break;case"v":_=cc("\v");break}if(ASSERT_EXISTS(_))return{type:"Character",value:_}}controlLetterEscapeAtom(){this.consumeChar("c");const _=this.popChar();if(/[a-zA-Z]/.test(_)===!1)throw Error("Invalid ");return{type:"Character",value:_.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:cc("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const _=this.popChar();return{type:"Character",value:cc(_)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const _=this.popChar();return{type:"Character",value:cc(_)}}}characterClass(){const _=[];let tt=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),tt=!0);this.isClassAtom();){const nt=this.classAtom();if(nt.type,isCharacter(nt)&&this.isRangeDash()){this.consumeChar("-");const rt=this.classAtom();if(rt.type,isCharacter(rt)){if(rt.value<nt.value)throw Error("Range out of order in character class");_.push({from:nt.value,to:rt.value})}else insertToSet(nt.value,_),_.push(cc("-")),insertToSet(rt.value,_)}else insertToSet(nt.value,_)}return this.consumeChar("]"),{type:"Set",complement:tt,value:_}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:cc("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let _=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),_=!1;break;default:this.groupIdx++;break}const tt=this.disjunction();this.consumeChar(")");const nt={type:"Group",capturing:_,value:tt};return _&&(nt.idx=this.groupIdx),nt}positiveInteger(){let _=this.popChar();if(decimalPatternNoZero.test(_)===!1)throw Error("Expecting a positive integer");for(;decimalPattern.test(this.peekChar(0));)_+=this.popChar();return parseInt(_,10)}integerIncludingZero(){let _=this.popChar();if(decimalPattern.test(_)===!1)throw Error("Expecting an integer");for(;decimalPattern.test(this.peekChar(0));)_+=this.popChar();return parseInt(_,10)}patternCharacter(){const _=this.popChar();switch(_){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:cc(_)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return decimalPattern.test(this.peekChar(0))}isClassAtom(_=0){switch(this.peekChar(_)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const _=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(_)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(_){let tt="";for(let rt=0;rt<_;rt++){const it=this.popChar();if(hexDigitPattern.test(it)===!1)throw Error("Expecting a HexDecimal digits");tt+=it}return{type:"Character",value:parseInt(tt,16)}}peekChar(_=0){return this.input[this.idx+_]}popChar(){const _=this.peekChar(0);return this.consumeChar(void 0),_}consumeChar(_){if(_!==void 0&&this.input[this.idx]!==_)throw Error("Expected: '"+_+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(_){return{begin:_,end:this.idx}}}class BaseRegExpVisitor{visitChildren(_){for(const tt in _){const nt=_[tt];_.hasOwnProperty(tt)&&(nt.type!==void 0?this.visit(nt):Array.isArray(nt)&&nt.forEach(rt=>{this.visit(rt)},this))}}visit(_){switch(_.type){case"Pattern":this.visitPattern(_);break;case"Flags":this.visitFlags(_);break;case"Disjunction":this.visitDisjunction(_);break;case"Alternative":this.visitAlternative(_);break;case"StartAnchor":this.visitStartAnchor(_);break;case"EndAnchor":this.visitEndAnchor(_);break;case"WordBoundary":this.visitWordBoundary(_);break;case"NonWordBoundary":this.visitNonWordBoundary(_);break;case"Lookahead":this.visitLookahead(_);break;case"NegativeLookahead":this.visitNegativeLookahead(_);break;case"Character":this.visitCharacter(_);break;case"Set":this.visitSet(_);break;case"Group":this.visitGroup(_);break;case"GroupBackReference":this.visitGroupBackReference(_);break;case"Quantifier":this.visitQuantifier(_);break}this.visitChildren(_)}visitPattern(_){}visitFlags(_){}visitDisjunction(_){}visitAlternative(_){}visitStartAnchor(_){}visitEndAnchor(_){}visitWordBoundary(_){}visitNonWordBoundary(_){}visitLookahead(_){}visitNegativeLookahead(_){}visitCharacter(_){}visitSet(_){}visitGroup(_){}visitGroupBackReference(_){}visitQuantifier(_){}}let regExpAstCache={};const regExpParser=new RegExpParser;function getRegExpAst(_e){const _=_e.toString();if(regExpAstCache.hasOwnProperty(_))return regExpAstCache[_];{const tt=regExpParser.pattern(_);return regExpAstCache[_]=tt,tt}}function clearRegExpParserCache(){regExpAstCache={}}const complementErrorMessage="Complement Sets are not supported for first char optimization",failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function getOptimizedStartCodesIndices(_e,_=!1){try{const tt=getRegExpAst(_e);return firstCharOptimizedIndices(tt.value,{},tt.flags.ignoreCase)}catch(tt){if(tt.message===complementErrorMessage)_&&PRINT_WARNING(`${failedOptimizationPrefixMsg}	Unable to optimize: < ${_e.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let nt="";_&&(nt=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),PRINT_ERROR(`${failedOptimizationPrefixMsg}
	Failed parsing: < ${_e.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+nt)}}return[]}function firstCharOptimizedIndices(_e,_,tt){switch(_e.type){case"Disjunction":for(let rt=0;rt<_e.value.length;rt++)firstCharOptimizedIndices(_e.value[rt],_,tt);break;case"Alternative":const nt=_e.value;for(let rt=0;rt<nt.length;rt++){const it=nt[rt];switch(it.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const at=it;switch(at.type){case"Character":addOptimizedIdxToResult(at.value,_,tt);break;case"Set":if(at.complement===!0)throw Error(complementErrorMessage);forEach(at.value,st=>{if(typeof st=="number")addOptimizedIdxToResult(st,_,tt);else{const lt=st;if(tt===!0)for(let ct=lt.from;ct<=lt.to;ct++)addOptimizedIdxToResult(ct,_,tt);else{for(let ct=lt.from;ct<=lt.to&&ct<minOptimizationVal;ct++)addOptimizedIdxToResult(ct,_,tt);if(lt.to>=minOptimizationVal){const ct=lt.from>=minOptimizationVal?lt.from:minOptimizationVal,ut=lt.to,ft=charCodeToOptimizedIndex(ct),pt=charCodeToOptimizedIndex(ut);for(let gt=ft;gt<=pt;gt++)_[gt]=gt}}}});break;case"Group":firstCharOptimizedIndices(at.value,_,tt);break;default:throw Error("Non Exhaustive Match")}const ot=at.quantifier!==void 0&&at.quantifier.atLeast===0;if(at.type==="Group"&&isWholeOptional(at)===!1||at.type!=="Group"&&ot===!1)break}break;default:throw Error("non exhaustive match!")}return values(_)}function addOptimizedIdxToResult(_e,_,tt){const nt=charCodeToOptimizedIndex(_e);_[nt]=nt,tt===!0&&handleIgnoreCase(_e,_)}function handleIgnoreCase(_e,_){const tt=String.fromCharCode(_e),nt=tt.toUpperCase();if(nt!==tt){const rt=charCodeToOptimizedIndex(nt.charCodeAt(0));_[rt]=rt}else{const rt=tt.toLowerCase();if(rt!==tt){const it=charCodeToOptimizedIndex(rt.charCodeAt(0));_[it]=it}}}function findCode(_e,_){return find$1(_e.value,tt=>{if(typeof tt=="number")return includes(_,tt);{const nt=tt;return find$1(_,rt=>nt.from<=rt&&rt<=nt.to)!==void 0}})}function isWholeOptional(_e){const _=_e.quantifier;return _&&_.atLeast===0?!0:_e.value?isArray$1$1(_e.value)?every(_e.value,isWholeOptional):isWholeOptional(_e.value):!1}class CharCodeFinder extends BaseRegExpVisitor{constructor(_){super(),this.targetCharCodes=_,this.found=!1}visitChildren(_){if(this.found!==!0){switch(_.type){case"Lookahead":this.visitLookahead(_);return;case"NegativeLookahead":this.visitNegativeLookahead(_);return}super.visitChildren(_)}}visitCharacter(_){includes(this.targetCharCodes,_.value)&&(this.found=!0)}visitSet(_){_.complement?findCode(_,this.targetCharCodes)===void 0&&(this.found=!0):findCode(_,this.targetCharCodes)!==void 0&&(this.found=!0)}}function canMatchCharCode(_e,_){if(_ instanceof RegExp){const tt=getRegExpAst(_),nt=new CharCodeFinder(_e);return nt.visit(tt),nt.found}else return find$1(_,tt=>includes(_e,tt.charCodeAt(0)))!==void 0}const PATTERN="PATTERN",DEFAULT_MODE="defaultMode",MODES="modes";let SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function analyzeTokenTypes(_e,_){_=defaults$1(_,{useSticky:SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(At,vt)=>vt()});const tt=_.tracer;tt("initCharCodeToOptimizedIndexMap",()=>{initCharCodeToOptimizedIndexMap()});let nt;tt("Reject Lexer.NA",()=>{nt=reject(_e,At=>At[PATTERN]===Lexer.NA)});let rt=!1,it;tt("Transform Patterns",()=>{rt=!1,it=map(nt,At=>{const vt=At[PATTERN];if(isRegExp$1(vt)){const Et=vt.source;return Et.length===1&&Et!=="^"&&Et!=="$"&&Et!=="."&&!vt.ignoreCase?Et:Et.length===2&&Et[0]==="\\"&&!includes(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],Et[1])?Et[1]:_.useSticky?addStickyFlag(vt):addStartOfInput(vt)}else{if(isFunction(vt))return rt=!0,{exec:vt};if(typeof vt=="object")return rt=!0,vt;if(typeof vt=="string"){if(vt.length===1)return vt;{const Et=vt.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),Ct=new RegExp(Et);return _.useSticky?addStickyFlag(Ct):addStartOfInput(Ct)}}else throw Error("non exhaustive match")}})});let at,ot,st,lt,ct;tt("misc mapping",()=>{at=map(nt,At=>At.tokenTypeIdx),ot=map(nt,At=>{const vt=At.GROUP;if(vt!==Lexer.SKIPPED){if(isString$1(vt))return vt;if(isUndefined(vt))return!1;throw Error("non exhaustive match")}}),st=map(nt,At=>{const vt=At.LONGER_ALT;if(vt)return isArray$1$1(vt)?map(vt,Ct=>indexOf(nt,Ct)):[indexOf(nt,vt)]}),lt=map(nt,At=>At.PUSH_MODE),ct=map(nt,At=>has$1(At,"POP_MODE"))});let ut;tt("Line Terminator Handling",()=>{const At=getCharCodes(_.lineTerminatorCharacters);ut=map(nt,vt=>!1),_.positionTracking!=="onlyOffset"&&(ut=map(nt,vt=>has$1(vt,"LINE_BREAKS")?!!vt.LINE_BREAKS:checkLineBreaksIssues(vt,At)===!1&&canMatchCharCode(At,vt.PATTERN)))});let ft,pt,gt,xt;tt("Misc Mapping #2",()=>{ft=map(nt,isCustomPattern),pt=map(it,isShortPattern),gt=reduce(nt,(At,vt)=>{const Et=vt.GROUP;return isString$1(Et)&&Et!==Lexer.SKIPPED&&(At[Et]=[]),At},{}),xt=map(it,(At,vt)=>({pattern:it[vt],longerAlt:st[vt],canLineTerminator:ut[vt],isCustom:ft[vt],short:pt[vt],group:ot[vt],push:lt[vt],pop:ct[vt],tokenTypeIdx:at[vt],tokenType:nt[vt]}))});let yt=!0,mt=[];return _.safeMode||tt("First Char Optimization",()=>{mt=reduce(nt,(At,vt,Et)=>{if(typeof vt.PATTERN=="string"){const Ct=vt.PATTERN.charCodeAt(0),Tt=charCodeToOptimizedIndex(Ct);addToMapOfArrays(At,Tt,xt[Et])}else if(isArray$1$1(vt.START_CHARS_HINT)){let Ct;forEach(vt.START_CHARS_HINT,Tt=>{const bt=typeof Tt=="string"?Tt.charCodeAt(0):Tt,It=charCodeToOptimizedIndex(bt);Ct!==It&&(Ct=It,addToMapOfArrays(At,It,xt[Et]))})}else if(isRegExp$1(vt.PATTERN))if(vt.PATTERN.unicode)yt=!1,_.ensureOptimizations&&PRINT_ERROR(`${failedOptimizationPrefixMsg}	Unable to analyze < ${vt.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const Ct=getOptimizedStartCodesIndices(vt.PATTERN,_.ensureOptimizations);isEmpty(Ct)&&(yt=!1),forEach(Ct,Tt=>{addToMapOfArrays(At,Tt,xt[Et])})}else _.ensureOptimizations&&PRINT_ERROR(`${failedOptimizationPrefixMsg}	TokenType: <${vt.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),yt=!1;return At},[])}),{emptyGroups:gt,patternIdxToConfig:xt,charCodeToPatternIdxToConfig:mt,hasCustom:rt,canBeOptimized:yt}}function validatePatterns(_e,_){let tt=[];const nt=findMissingPatterns(_e);tt=tt.concat(nt.errors);const rt=findInvalidPatterns(nt.valid),it=rt.valid;return tt=tt.concat(rt.errors),tt=tt.concat(validateRegExpPattern(it)),tt=tt.concat(findInvalidGroupType(it)),tt=tt.concat(findModesThatDoNotExist(it,_)),tt=tt.concat(findUnreachablePatterns(it)),tt}function validateRegExpPattern(_e){let _=[];const tt=filter(_e,nt=>isRegExp$1(nt[PATTERN]));return _=_.concat(findEndOfInputAnchor(tt)),_=_.concat(findStartOfInputAnchor(tt)),_=_.concat(findUnsupportedFlags(tt)),_=_.concat(findDuplicatePatterns(tt)),_=_.concat(findEmptyMatchRegExps(tt)),_}function findMissingPatterns(_e){const _=filter(_e,rt=>!has$1(rt,PATTERN)),tt=map(_,rt=>({message:"Token Type: ->"+rt.name+"<- missing static 'PATTERN' property",type:LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[rt]})),nt=difference$1(_e,_);return{errors:tt,valid:nt}}function findInvalidPatterns(_e){const _=filter(_e,rt=>{const it=rt[PATTERN];return!isRegExp$1(it)&&!isFunction(it)&&!has$1(it,"exec")&&!isString$1(it)}),tt=map(_,rt=>({message:"Token Type: ->"+rt.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[rt]})),nt=difference$1(_e,_);return{errors:tt,valid:nt}}const end_of_input=/[^\\][$]/;function findEndOfInputAnchor(_e){class _ extends BaseRegExpVisitor{constructor(){super(...arguments),this.found=!1}visitEndAnchor(it){this.found=!0}}const tt=filter(_e,rt=>{const it=rt.PATTERN;try{const at=getRegExpAst(it),ot=new _;return ot.visit(at),ot.found}catch{return end_of_input.test(it.source)}});return map(tt,rt=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+rt.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[rt]}))}function findEmptyMatchRegExps(_e){const _=filter(_e,nt=>nt.PATTERN.test(""));return map(_,nt=>({message:"Token Type: ->"+nt.name+"<- static 'PATTERN' must not match an empty string",type:LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[nt]}))}const start_of_input=/[^\\[][\^]|^\^/;function findStartOfInputAnchor(_e){class _ extends BaseRegExpVisitor{constructor(){super(...arguments),this.found=!1}visitStartAnchor(it){this.found=!0}}const tt=filter(_e,rt=>{const it=rt.PATTERN;try{const at=getRegExpAst(it),ot=new _;return ot.visit(at),ot.found}catch{return start_of_input.test(it.source)}});return map(tt,rt=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+rt.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[rt]}))}function findUnsupportedFlags(_e){const _=filter(_e,nt=>{const rt=nt[PATTERN];return rt instanceof RegExp&&(rt.multiline||rt.global)});return map(_,nt=>({message:"Token Type: ->"+nt.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[nt]}))}function findDuplicatePatterns(_e){const _=[];let tt=map(_e,it=>reduce(_e,(at,ot)=>(it.PATTERN.source===ot.PATTERN.source&&!includes(_,ot)&&ot.PATTERN!==Lexer.NA&&(_.push(ot),at.push(ot)),at),[]));tt=compact(tt);const nt=filter(tt,it=>it.length>1);return map(nt,it=>{const at=map(it,st=>st.name);return{message:`The same RegExp pattern ->${head(it).PATTERN}<-has been used in all of the following Token Types: ${at.join(", ")} <-`,type:LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:it}})}function findInvalidGroupType(_e){const _=filter(_e,nt=>{if(!has$1(nt,"GROUP"))return!1;const rt=nt.GROUP;return rt!==Lexer.SKIPPED&&rt!==Lexer.NA&&!isString$1(rt)});return map(_,nt=>({message:"Token Type: ->"+nt.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[nt]}))}function findModesThatDoNotExist(_e,_){const tt=filter(_e,rt=>rt.PUSH_MODE!==void 0&&!includes(_,rt.PUSH_MODE));return map(tt,rt=>({message:`Token Type: ->${rt.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${rt.PUSH_MODE}<-which does not exist`,type:LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[rt]}))}function findUnreachablePatterns(_e){const _=[],tt=reduce(_e,(nt,rt,it)=>{const at=rt.PATTERN;return at===Lexer.NA||(isString$1(at)?nt.push({str:at,idx:it,tokenType:rt}):isRegExp$1(at)&&noMetaChar(at)&&nt.push({str:at.source,idx:it,tokenType:rt})),nt},[]);return forEach(_e,(nt,rt)=>{forEach(tt,({str:it,idx:at,tokenType:ot})=>{if(rt<at&&testTokenType(it,nt.PATTERN)){const st=`Token: ->${ot.name}<- can never be matched.
Because it appears AFTER the Token Type ->${nt.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;_.push({message:st,type:LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[nt,ot]})}})}),_}function testTokenType(_e,_){if(isRegExp$1(_)){const tt=_.exec(_e);return tt!==null&&tt.index===0}else{if(isFunction(_))return _(_e,0,[],{});if(has$1(_,"exec"))return _.exec(_e,0,[],{});if(typeof _=="string")return _===_e;throw Error("non exhaustive match")}}function noMetaChar(_e){return find$1([".","\\","[","]","|","^","$","(",")","?","*","+","{"],tt=>_e.source.indexOf(tt)!==-1)===void 0}function addStartOfInput(_e){const _=_e.ignoreCase?"i":"";return new RegExp(`^(?:${_e.source})`,_)}function addStickyFlag(_e){const _=_e.ignoreCase?"iy":"y";return new RegExp(`${_e.source}`,_)}function performRuntimeChecks(_e,_,tt){const nt=[];return has$1(_e,DEFAULT_MODE)||nt.push({message:"A MultiMode Lexer cannot be initialized without a <"+DEFAULT_MODE+`> property in its definition
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),has$1(_e,MODES)||nt.push({message:"A MultiMode Lexer cannot be initialized without a <"+MODES+`> property in its definition
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),has$1(_e,MODES)&&has$1(_e,DEFAULT_MODE)&&!has$1(_e.modes,_e.defaultMode)&&nt.push({message:`A MultiMode Lexer cannot be initialized with a ${DEFAULT_MODE}: <${_e.defaultMode}>which does not exist
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),has$1(_e,MODES)&&forEach(_e.modes,(rt,it)=>{forEach(rt,(at,ot)=>{if(isUndefined(at))nt.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${it}> at index: <${ot}>
`,type:LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(has$1(at,"LONGER_ALT")){const st=isArray$1$1(at.LONGER_ALT)?at.LONGER_ALT:[at.LONGER_ALT];forEach(st,lt=>{!isUndefined(lt)&&!includes(rt,lt)&&nt.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${lt.name}> on token <${at.name}> outside of mode <${it}>
`,type:LexerDefinitionErrorType.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),nt}function performWarningRuntimeChecks(_e,_,tt){const nt=[];let rt=!1;const it=compact(flatten$1(values(_e.modes))),at=reject(it,st=>st[PATTERN]===Lexer.NA),ot=getCharCodes(tt);return _&&forEach(at,st=>{const lt=checkLineBreaksIssues(st,ot);if(lt!==!1){const ut={message:buildLineBreakIssueMessage(st,lt),type:lt.issue,tokenType:st};nt.push(ut)}else has$1(st,"LINE_BREAKS")?st.LINE_BREAKS===!0&&(rt=!0):canMatchCharCode(ot,st.PATTERN)&&(rt=!0)}),_&&!rt&&nt.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),nt}function cloneEmptyGroups(_e){const _={},tt=keys(_e);return forEach(tt,nt=>{const rt=_e[nt];if(isArray$1$1(rt))_[nt]=[];else throw Error("non exhaustive match")}),_}function isCustomPattern(_e){const _=_e.PATTERN;if(isRegExp$1(_))return!1;if(isFunction(_))return!0;if(has$1(_,"exec"))return!0;if(isString$1(_))return!1;throw Error("non exhaustive match")}function isShortPattern(_e){return isString$1(_e)&&_e.length===1?_e.charCodeAt(0):!1}const LineTerminatorOptimizedTester={test:function(_e){const _=_e.length;for(let tt=this.lastIndex;tt<_;tt++){const nt=_e.charCodeAt(tt);if(nt===10)return this.lastIndex=tt+1,!0;if(nt===13)return _e.charCodeAt(tt+1)===10?this.lastIndex=tt+2:this.lastIndex=tt+1,!0}return!1},lastIndex:0};function checkLineBreaksIssues(_e,_){if(has$1(_e,"LINE_BREAKS"))return!1;if(isRegExp$1(_e.PATTERN)){try{canMatchCharCode(_,_e.PATTERN)}catch(tt){return{issue:LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:tt.message}}return!1}else{if(isString$1(_e.PATTERN))return!1;if(isCustomPattern(_e))return{issue:LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function buildLineBreakIssueMessage(_e,_){if(_.issue===LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${_e.name}> Token Type
	 Root cause: ${_.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(_.issue===LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${_e.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function getCharCodes(_e){return map(_e,tt=>isString$1(tt)?tt.charCodeAt(0):tt)}function addToMapOfArrays(_e,_,tt){_e[_]===void 0?_e[_]=[tt]:_e[_].push(tt)}const minOptimizationVal=256;let charCodeToOptimizedIdxMap=[];function charCodeToOptimizedIndex(_e){return _e<minOptimizationVal?_e:charCodeToOptimizedIdxMap[_e]}function initCharCodeToOptimizedIndexMap(){if(isEmpty(charCodeToOptimizedIdxMap)){charCodeToOptimizedIdxMap=new Array(65536);for(let _e=0;_e<65536;_e++)charCodeToOptimizedIdxMap[_e]=_e>255?255+~~(_e/255):_e}}function tokenStructuredMatcher(_e,_){const tt=_e.tokenTypeIdx;return tt===_.tokenTypeIdx?!0:_.isParent===!0&&_.categoryMatchesMap[tt]===!0}function tokenStructuredMatcherNoCategories(_e,_){return _e.tokenTypeIdx===_.tokenTypeIdx}let tokenShortNameIdx=1;const tokenIdxToClass={};function augmentTokenTypes(_e){const _=expandCategories(_e);assignTokenDefaultProps(_),assignCategoriesMapProp(_),assignCategoriesTokensProp(_),forEach(_,tt=>{tt.isParent=tt.categoryMatches.length>0})}function expandCategories(_e){let _=clone(_e),tt=_e,nt=!0;for(;nt;){tt=compact(flatten$1(map(tt,it=>it.CATEGORIES)));const rt=difference$1(tt,_);_=_.concat(rt),isEmpty(rt)?nt=!1:tt=rt}return _}function assignTokenDefaultProps(_e){forEach(_e,_=>{hasShortKeyProperty(_)||(tokenIdxToClass[tokenShortNameIdx]=_,_.tokenTypeIdx=tokenShortNameIdx++),hasCategoriesProperty(_)&&!isArray$1$1(_.CATEGORIES)&&(_.CATEGORIES=[_.CATEGORIES]),hasCategoriesProperty(_)||(_.CATEGORIES=[]),hasExtendingTokensTypesProperty(_)||(_.categoryMatches=[]),hasExtendingTokensTypesMapProperty(_)||(_.categoryMatchesMap={})})}function assignCategoriesTokensProp(_e){forEach(_e,_=>{_.categoryMatches=[],forEach(_.categoryMatchesMap,(tt,nt)=>{_.categoryMatches.push(tokenIdxToClass[nt].tokenTypeIdx)})})}function assignCategoriesMapProp(_e){forEach(_e,_=>{singleAssignCategoriesToksMap([],_)})}function singleAssignCategoriesToksMap(_e,_){forEach(_e,tt=>{_.categoryMatchesMap[tt.tokenTypeIdx]=!0}),forEach(_.CATEGORIES,tt=>{const nt=_e.concat(_);includes(nt,tt)||singleAssignCategoriesToksMap(nt,tt)})}function hasShortKeyProperty(_e){return has$1(_e,"tokenTypeIdx")}function hasCategoriesProperty(_e){return has$1(_e,"CATEGORIES")}function hasExtendingTokensTypesProperty(_e){return has$1(_e,"categoryMatches")}function hasExtendingTokensTypesMapProperty(_e){return has$1(_e,"categoryMatchesMap")}function isTokenType(_e){return has$1(_e,"tokenTypeIdx")}const defaultLexerErrorProvider={buildUnableToPopLexerModeMessage(_e){return`Unable to pop Lexer Mode after encountering Token ->${_e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(_e,_,tt,nt,rt){return`unexpected character: ->${_e.charAt(_)}<- at offset: ${_}, skipped ${tt} characters.`}};var LexerDefinitionErrorType;(function(_e){_e[_e.MISSING_PATTERN=0]="MISSING_PATTERN",_e[_e.INVALID_PATTERN=1]="INVALID_PATTERN",_e[_e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",_e[_e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",_e[_e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",_e[_e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",_e[_e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",_e[_e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",_e[_e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",_e[_e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",_e[_e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",_e[_e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",_e[_e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",_e[_e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",_e[_e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",_e[_e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",_e[_e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",_e[_e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(LexerDefinitionErrorType||(LexerDefinitionErrorType={}));const DEFAULT_LEXER_CONFIG={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(DEFAULT_LEXER_CONFIG);class Lexer{constructor(_,tt=DEFAULT_LEXER_CONFIG){if(this.lexerDefinition=_,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(rt,it)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const at=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${at}--> <${rt}>`);const{time:ot,value:st}=timer$1(it),lt=ot>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&lt(`${at}<-- <${rt}> time: ${ot}ms`),this.traceInitIndent--,st}else return it()},typeof tt=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=assign$1$1({},DEFAULT_LEXER_CONFIG,tt);const nt=this.config.traceInitPerf;nt===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof nt=="number"&&(this.traceInitMaxIdent=nt,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let rt,it=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===DEFAULT_LEXER_CONFIG.lineTerminatorsPattern)this.config.lineTerminatorsPattern=LineTerminatorOptimizedTester;else if(this.config.lineTerminatorCharacters===DEFAULT_LEXER_CONFIG.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(tt.safeMode&&tt.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),isArray$1$1(_)?rt={modes:{defaultMode:clone(_)},defaultMode:DEFAULT_MODE}:(it=!1,rt=clone(_))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(performRuntimeChecks(rt,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(performWarningRuntimeChecks(rt,this.trackStartLines,this.config.lineTerminatorCharacters))})),rt.modes=rt.modes?rt.modes:{},forEach(rt.modes,(ot,st)=>{rt.modes[st]=reject(ot,lt=>isUndefined(lt))});const at=keys(rt.modes);if(forEach(rt.modes,(ot,st)=>{this.TRACE_INIT(`Mode: <${st}> processing`,()=>{if(this.modes.push(st),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(validatePatterns(ot,at))}),isEmpty(this.lexerDefinitionErrors)){augmentTokenTypes(ot);let lt;this.TRACE_INIT("analyzeTokenTypes",()=>{lt=analyzeTokenTypes(ot,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:tt.positionTracking,ensureOptimizations:tt.ensureOptimizations,safeMode:tt.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[st]=lt.patternIdxToConfig,this.charCodeToPatternIdxToConfig[st]=lt.charCodeToPatternIdxToConfig,this.emptyGroups=assign$1$1({},this.emptyGroups,lt.emptyGroups),this.hasCustom=lt.hasCustom||this.hasCustom,this.canModeBeOptimized[st]=lt.canBeOptimized}})}),this.defaultMode=rt.defaultMode,!isEmpty(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const st=map(this.lexerDefinitionErrors,lt=>lt.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+st)}forEach(this.lexerDefinitionWarning,ot=>{PRINT_WARNING(ot.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(SUPPORT_STICKY?(this.chopInput=identity,this.match=this.matchWithTest):(this.updateLastIndex=noop$1,this.match=this.matchWithExec),it&&(this.handleModes=noop$1),this.trackStartLines===!1&&(this.computeNewColumn=identity),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=noop$1),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const ot=reduce(this.canModeBeOptimized,(st,lt,ct)=>(lt===!1&&st.push(ct),st),[]);if(tt.ensureOptimizations&&!isEmpty(ot))throw Error(`Lexer Modes: < ${ot.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{clearRegExpParserCache()}),this.TRACE_INIT("toFastProperties",()=>{toFastProperties(this)})})}tokenize(_,tt=this.defaultMode){if(!isEmpty(this.lexerDefinitionErrors)){const rt=map(this.lexerDefinitionErrors,it=>it.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+rt)}return this.tokenizeInternal(_,tt)}tokenizeInternal(_,tt){let nt,rt,it,at,ot,st,lt,ct,ut,ft,pt,gt,xt,yt,mt;const At=_,vt=At.length;let Et=0,Ct=0;const Tt=this.hasCustom?0:Math.floor(_.length/10),bt=new Array(Tt),It=[];let wt=this.trackStartLines?1:void 0,Rt=this.trackStartLines?1:void 0;const Ft=cloneEmptyGroups(this.emptyGroups),Ut=this.trackStartLines,Gt=this.config.lineTerminatorsPattern;let Ht=0,jt=[],Xt=[];const Jt=[],Dt=[];Object.freeze(Dt);let zt;function $t(){return jt}function Lt(sn){const ln=charCodeToOptimizedIndex(sn),cn=Xt[ln];return cn===void 0?Dt:cn}const Vt=sn=>{if(Jt.length===1&&sn.tokenType.PUSH_MODE===void 0){const ln=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(sn);It.push({offset:sn.startOffset,line:sn.startLine,column:sn.startColumn,length:sn.image.length,message:ln})}else{Jt.pop();const ln=last(Jt);jt=this.patternIdxToConfig[ln],Xt=this.charCodeToPatternIdxToConfig[ln],Ht=jt.length;const cn=this.canModeBeOptimized[ln]&&this.config.safeMode===!1;Xt&&cn?zt=Lt:zt=$t}};function tn(sn){Jt.push(sn),Xt=this.charCodeToPatternIdxToConfig[sn],jt=this.patternIdxToConfig[sn],Ht=jt.length,Ht=jt.length;const ln=this.canModeBeOptimized[sn]&&this.config.safeMode===!1;Xt&&ln?zt=Lt:zt=$t}tn.call(this,tt);let an;const on=this.config.recoveryEnabled;for(;Et<vt;){st=null;const sn=At.charCodeAt(Et),ln=zt(sn),cn=ln.length;for(nt=0;nt<cn;nt++){an=ln[nt];const In=an.pattern;lt=null;const zn=an.short;if(zn!==!1?sn===zn&&(st=In):an.isCustom===!0?(mt=In.exec(At,Et,bt,Ft),mt!==null?(st=mt[0],mt.payload!==void 0&&(lt=mt.payload)):st=null):(this.updateLastIndex(In,Et),st=this.match(In,_,Et)),st!==null){if(ot=an.longerAlt,ot!==void 0){const yn=ot.length;for(it=0;it<yn;it++){const Wt=jt[ot[it]],_n=Wt.pattern;if(ct=null,Wt.isCustom===!0?(mt=_n.exec(At,Et,bt,Ft),mt!==null?(at=mt[0],mt.payload!==void 0&&(ct=mt.payload)):at=null):(this.updateLastIndex(_n,Et),at=this.match(_n,_,Et)),at&&at.length>st.length){st=at,lt=ct,an=Wt;break}}}break}}if(st!==null){if(ut=st.length,ft=an.group,ft!==void 0&&(pt=an.tokenTypeIdx,gt=this.createTokenInstance(st,Et,pt,an.tokenType,wt,Rt,ut),this.handlePayload(gt,lt),ft===!1?Ct=this.addToken(bt,Ct,gt):Ft[ft].push(gt)),_=this.chopInput(_,ut),Et=Et+ut,Rt=this.computeNewColumn(Rt,ut),Ut===!0&&an.canLineTerminator===!0){let In=0,zn,yn;Gt.lastIndex=0;do zn=Gt.test(st),zn===!0&&(yn=Gt.lastIndex-1,In++);while(zn===!0);In!==0&&(wt=wt+In,Rt=ut-yn,this.updateTokenEndLineColumnLocation(gt,ft,yn,In,wt,Rt,ut))}this.handleModes(an,Vt,tn,gt)}else{const In=Et,zn=wt,yn=Rt;let Wt=on===!1;for(;Wt===!1&&Et<vt;)for(_=this.chopInput(_,1),Et++,rt=0;rt<Ht;rt++){const _n=jt[rt],gn=_n.pattern,vn=_n.short;if(vn!==!1?At.charCodeAt(Et)===vn&&(Wt=!0):_n.isCustom===!0?Wt=gn.exec(At,Et,bt,Ft)!==null:(this.updateLastIndex(gn,Et),Wt=gn.exec(_)!==null),Wt===!0)break}if(xt=Et-In,Rt=this.computeNewColumn(Rt,xt),yt=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(At,In,xt,zn,yn),It.push({offset:In,line:zn,column:yn,length:xt,message:yt}),on===!1)break}}return this.hasCustom||(bt.length=Ct),{tokens:bt,groups:Ft,errors:It}}handleModes(_,tt,nt,rt){if(_.pop===!0){const it=_.push;tt(rt),it!==void 0&&nt.call(this,it)}else _.push!==void 0&&nt.call(this,_.push)}chopInput(_,tt){return _.substring(tt)}updateLastIndex(_,tt){_.lastIndex=tt}updateTokenEndLineColumnLocation(_,tt,nt,rt,it,at,ot){let st,lt;tt!==void 0&&(st=nt===ot-1,lt=st?-1:0,rt===1&&st===!0||(_.endLine=it+lt,_.endColumn=at-1+-lt))}computeNewColumn(_,tt){return _+tt}createOffsetOnlyToken(_,tt,nt,rt){return{image:_,startOffset:tt,tokenTypeIdx:nt,tokenType:rt}}createStartOnlyToken(_,tt,nt,rt,it,at){return{image:_,startOffset:tt,startLine:it,startColumn:at,tokenTypeIdx:nt,tokenType:rt}}createFullToken(_,tt,nt,rt,it,at,ot){return{image:_,startOffset:tt,endOffset:tt+ot-1,startLine:it,endLine:it,startColumn:at,endColumn:at+ot-1,tokenTypeIdx:nt,tokenType:rt}}addTokenUsingPush(_,tt,nt){return _.push(nt),tt}addTokenUsingMemberAccess(_,tt,nt){return _[tt]=nt,tt++,tt}handlePayloadNoCustom(_,tt){}handlePayloadWithCustom(_,tt){tt!==null&&(_.payload=tt)}matchWithTest(_,tt,nt){return _.test(tt)===!0?tt.substring(nt,_.lastIndex):null}matchWithExec(_,tt){const nt=_.exec(tt);return nt!==null?nt[0]:null}}Lexer.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Lexer.NA=/NOT_APPLICABLE/;function tokenLabel(_e){return hasTokenLabel(_e)?_e.LABEL:_e.name}function hasTokenLabel(_e){return isString$1(_e.LABEL)&&_e.LABEL!==""}const PARENT="parent",CATEGORIES="categories",LABEL="label",GROUP="group",PUSH_MODE="push_mode",POP_MODE="pop_mode",LONGER_ALT="longer_alt",LINE_BREAKS="line_breaks",START_CHARS_HINT="start_chars_hint";function createToken(_e){return createTokenInternal(_e)}function createTokenInternal(_e){const _=_e.pattern,tt={};if(tt.name=_e.name,isUndefined(_)||(tt.PATTERN=_),has$1(_e,PARENT))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return has$1(_e,CATEGORIES)&&(tt.CATEGORIES=_e[CATEGORIES]),augmentTokenTypes([tt]),has$1(_e,LABEL)&&(tt.LABEL=_e[LABEL]),has$1(_e,GROUP)&&(tt.GROUP=_e[GROUP]),has$1(_e,POP_MODE)&&(tt.POP_MODE=_e[POP_MODE]),has$1(_e,PUSH_MODE)&&(tt.PUSH_MODE=_e[PUSH_MODE]),has$1(_e,LONGER_ALT)&&(tt.LONGER_ALT=_e[LONGER_ALT]),has$1(_e,LINE_BREAKS)&&(tt.LINE_BREAKS=_e[LINE_BREAKS]),has$1(_e,START_CHARS_HINT)&&(tt.START_CHARS_HINT=_e[START_CHARS_HINT]),tt}const EOF=createToken({name:"EOF",pattern:Lexer.NA});augmentTokenTypes([EOF]);function createTokenInstance(_e,_,tt,nt,rt,it,at,ot){return{image:_,startOffset:tt,endOffset:nt,startLine:rt,endLine:it,startColumn:at,endColumn:ot,tokenTypeIdx:_e.tokenTypeIdx,tokenType:_e}}function tokenMatcher(_e,_){return tokenStructuredMatcher(_e,_)}const defaultParserErrorProvider={buildMismatchTokenMessage({expected:_e,actual:_,previous:tt,ruleName:nt}){return`Expecting ${hasTokenLabel(_e)?`--> ${tokenLabel(_e)} <--`:`token of type --> ${_e.name} <--`} but found --> '${_.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:_e,ruleName:_}){return"Redundant input, expecting EOF but found: "+_e.image},buildNoViableAltMessage({expectedPathsPerAlt:_e,actual:_,previous:tt,customUserDescription:nt,ruleName:rt}){const it="Expecting: ",ot=`
but found: '`+head(_).image+"'";if(nt)return it+nt+ot;{const st=reduce(_e,(ft,pt)=>ft.concat(pt),[]),lt=map(st,ft=>`[${map(ft,pt=>tokenLabel(pt)).join(", ")}]`),ut=`one of these possible Token sequences:
${map(lt,(ft,pt)=>`  ${pt+1}. ${ft}`).join(`
`)}`;return it+ut+ot}},buildEarlyExitMessage({expectedIterationPaths:_e,actual:_,customUserDescription:tt,ruleName:nt}){const rt="Expecting: ",at=`
but found: '`+head(_).image+"'";if(tt)return rt+tt+at;{const st=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${map(_e,lt=>`[${map(lt,ct=>tokenLabel(ct)).join(",")}]`).join(" ,")}>`;return rt+st+at}}};Object.freeze(defaultParserErrorProvider);const defaultGrammarResolverErrorProvider={buildRuleNotFoundError(_e,_){return"Invalid grammar, reference to a rule which is not defined: ->"+_.nonTerminalName+`<-
inside top level rule: ->`+_e.name+"<-"}},defaultGrammarValidatorErrorProvider={buildDuplicateFoundError(_e,_){function tt(ct){return ct instanceof Terminal?ct.terminalType.name:ct instanceof NonTerminal?ct.nonTerminalName:""}const nt=_e.name,rt=head(_),it=rt.idx,at=getProductionDslName(rt),ot=tt(rt),st=it>0;let lt=`->${at}${st?it:""}<- ${ot?`with argument: ->${ot}<-`:""}
                  appears more than once (${_.length} times) in the top level rule: ->${nt}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return lt=lt.replace(/[ \t]+/g," "),lt=lt.replace(/\s\s+/g,`
`),lt},buildNamespaceConflictError(_e){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${_e.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(_e){const _=map(_e.prefixPath,rt=>tokenLabel(rt)).join(", "),tt=_e.alternation.idx===0?"":_e.alternation.idx;return`Ambiguous alternatives: <${_e.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${tt}> inside <${_e.topLevelRule.name}> Rule,
<${_}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(_e){const _=map(_e.prefixPath,rt=>tokenLabel(rt)).join(", "),tt=_e.alternation.idx===0?"":_e.alternation.idx;let nt=`Ambiguous Alternatives Detected: <${_e.ambiguityIndices.join(" ,")}> in <OR${tt}> inside <${_e.topLevelRule.name}> Rule,
<${_}> may appears as a prefix path in all these alternatives.
`;return nt=nt+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,nt},buildEmptyRepetitionError(_e){let _=getProductionDslName(_e.repetition);return _e.repetition.idx!==0&&(_+=_e.repetition.idx),`The repetition <${_}> within Rule <${_e.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(_e){return"deprecated"},buildEmptyAlternationError(_e){return`Ambiguous empty alternative: <${_e.emptyChoiceIdx+1}> in <OR${_e.alternation.idx}> inside <${_e.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(_e){return`An Alternation cannot have more than 256 alternatives:
<OR${_e.alternation.idx}> inside <${_e.topLevelRule.name}> Rule.
 has ${_e.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(_e){const _=_e.topLevelRule.name,tt=map(_e.leftRecursionPath,it=>it.name),nt=`${_} --> ${tt.concat([_]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${_}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${nt}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(_e){return"deprecated"},buildDuplicateRuleNameError(_e){let _;return _e.topLevelRule instanceof Rule$1?_=_e.topLevelRule.name:_=_e.topLevelRule,`Duplicate definition, rule: ->${_}<- is already defined in the grammar: ->${_e.grammarName}<-`}};function resolveGrammar$1(_e,_){const tt=new GastRefResolverVisitor(_e,_);return tt.resolveRefs(),tt.errors}class GastRefResolverVisitor extends GAstVisitor{constructor(_,tt){super(),this.nameToTopRule=_,this.errMsgProvider=tt,this.errors=[]}resolveRefs(){forEach(values(this.nameToTopRule),_=>{this.currTopLevel=_,_.accept(this)})}visitNonTerminal(_){const tt=this.nameToTopRule[_.nonTerminalName];if(tt)_.referencedRule=tt;else{const nt=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,_);this.errors.push({message:nt,type:ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:_.nonTerminalName})}}}class AbstractNextPossibleTokensWalker extends RestWalker{constructor(_,tt){super(),this.topProd=_,this.path=tt,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=clone(this.path.ruleStack).reverse(),this.occurrenceStack=clone(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(_,tt=[]){this.found||super.walk(_,tt)}walkProdRef(_,tt,nt){if(_.referencedRule.name===this.nextProductionName&&_.idx===this.nextProductionOccurrence){const rt=tt.concat(nt);this.updateExpectedNext(),this.walk(_.referencedRule,rt)}}updateExpectedNext(){isEmpty(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class NextAfterTokenWalker extends AbstractNextPossibleTokensWalker{constructor(_,tt){super(_,tt),this.path=tt,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(_,tt,nt){if(this.isAtEndOfPath&&_.terminalType.name===this.nextTerminalName&&_.idx===this.nextTerminalOccurrence&&!this.found){const rt=tt.concat(nt),it=new Alternative({definition:rt});this.possibleTokTypes=first$1(it),this.found=!0}}}class AbstractNextTerminalAfterProductionWalker extends RestWalker{constructor(_,tt){super(),this.topRule=_,this.occurrence=tt,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class NextTerminalAfterManyWalker extends AbstractNextTerminalAfterProductionWalker{walkMany(_,tt,nt){if(_.idx===this.occurrence){const rt=head(tt.concat(nt));this.result.isEndOfRule=rt===void 0,rt instanceof Terminal&&(this.result.token=rt.terminalType,this.result.occurrence=rt.idx)}else super.walkMany(_,tt,nt)}}class NextTerminalAfterManySepWalker extends AbstractNextTerminalAfterProductionWalker{walkManySep(_,tt,nt){if(_.idx===this.occurrence){const rt=head(tt.concat(nt));this.result.isEndOfRule=rt===void 0,rt instanceof Terminal&&(this.result.token=rt.terminalType,this.result.occurrence=rt.idx)}else super.walkManySep(_,tt,nt)}}class NextTerminalAfterAtLeastOneWalker extends AbstractNextTerminalAfterProductionWalker{walkAtLeastOne(_,tt,nt){if(_.idx===this.occurrence){const rt=head(tt.concat(nt));this.result.isEndOfRule=rt===void 0,rt instanceof Terminal&&(this.result.token=rt.terminalType,this.result.occurrence=rt.idx)}else super.walkAtLeastOne(_,tt,nt)}}class NextTerminalAfterAtLeastOneSepWalker extends AbstractNextTerminalAfterProductionWalker{walkAtLeastOneSep(_,tt,nt){if(_.idx===this.occurrence){const rt=head(tt.concat(nt));this.result.isEndOfRule=rt===void 0,rt instanceof Terminal&&(this.result.token=rt.terminalType,this.result.occurrence=rt.idx)}else super.walkAtLeastOneSep(_,tt,nt)}}function possiblePathsFrom(_e,_,tt=[]){tt=clone(tt);let nt=[],rt=0;function it(ot){return ot.concat(drop(_e,rt+1))}function at(ot){const st=possiblePathsFrom(it(ot),_,tt);return nt.concat(st)}for(;tt.length<_&&rt<_e.length;){const ot=_e[rt];if(ot instanceof Alternative)return at(ot.definition);if(ot instanceof NonTerminal)return at(ot.definition);if(ot instanceof Option)nt=at(ot.definition);else if(ot instanceof RepetitionMandatory){const st=ot.definition.concat([new Repetition({definition:ot.definition})]);return at(st)}else if(ot instanceof RepetitionMandatoryWithSeparator){const st=[new Alternative({definition:ot.definition}),new Repetition({definition:[new Terminal({terminalType:ot.separator})].concat(ot.definition)})];return at(st)}else if(ot instanceof RepetitionWithSeparator){const st=ot.definition.concat([new Repetition({definition:[new Terminal({terminalType:ot.separator})].concat(ot.definition)})]);nt=at(st)}else if(ot instanceof Repetition){const st=ot.definition.concat([new Repetition({definition:ot.definition})]);nt=at(st)}else{if(ot instanceof Alternation)return forEach(ot.definition,st=>{isEmpty(st.definition)===!1&&(nt=at(st.definition))}),nt;if(ot instanceof Terminal)tt.push(ot.terminalType);else throw Error("non exhaustive match")}rt++}return nt.push({partialPath:tt,suffixDef:drop(_e,rt)}),nt}function nextPossibleTokensAfter(_e,_,tt,nt){const rt="EXIT_NONE_TERMINAL",it=[rt],at="EXIT_ALTERNATIVE";let ot=!1;const st=_.length,lt=st-nt-1,ct=[],ut=[];for(ut.push({idx:-1,def:_e,ruleStack:[],occurrenceStack:[]});!isEmpty(ut);){const ft=ut.pop();if(ft===at){ot&&last(ut).idx<=lt&&ut.pop();continue}const pt=ft.def,gt=ft.idx,xt=ft.ruleStack,yt=ft.occurrenceStack;if(isEmpty(pt))continue;const mt=pt[0];if(mt===rt){const At={idx:gt,def:drop(pt),ruleStack:dropRight(xt),occurrenceStack:dropRight(yt)};ut.push(At)}else if(mt instanceof Terminal)if(gt<st-1){const At=gt+1,vt=_[At];if(tt(vt,mt.terminalType)){const Et={idx:At,def:drop(pt),ruleStack:xt,occurrenceStack:yt};ut.push(Et)}}else if(gt===st-1)ct.push({nextTokenType:mt.terminalType,nextTokenOccurrence:mt.idx,ruleStack:xt,occurrenceStack:yt}),ot=!0;else throw Error("non exhaustive match");else if(mt instanceof NonTerminal){const At=clone(xt);At.push(mt.nonTerminalName);const vt=clone(yt);vt.push(mt.idx);const Et={idx:gt,def:mt.definition.concat(it,drop(pt)),ruleStack:At,occurrenceStack:vt};ut.push(Et)}else if(mt instanceof Option){const At={idx:gt,def:drop(pt),ruleStack:xt,occurrenceStack:yt};ut.push(At),ut.push(at);const vt={idx:gt,def:mt.definition.concat(drop(pt)),ruleStack:xt,occurrenceStack:yt};ut.push(vt)}else if(mt instanceof RepetitionMandatory){const At=new Repetition({definition:mt.definition,idx:mt.idx}),vt=mt.definition.concat([At],drop(pt)),Et={idx:gt,def:vt,ruleStack:xt,occurrenceStack:yt};ut.push(Et)}else if(mt instanceof RepetitionMandatoryWithSeparator){const At=new Terminal({terminalType:mt.separator}),vt=new Repetition({definition:[At].concat(mt.definition),idx:mt.idx}),Et=mt.definition.concat([vt],drop(pt)),Ct={idx:gt,def:Et,ruleStack:xt,occurrenceStack:yt};ut.push(Ct)}else if(mt instanceof RepetitionWithSeparator){const At={idx:gt,def:drop(pt),ruleStack:xt,occurrenceStack:yt};ut.push(At),ut.push(at);const vt=new Terminal({terminalType:mt.separator}),Et=new Repetition({definition:[vt].concat(mt.definition),idx:mt.idx}),Ct=mt.definition.concat([Et],drop(pt)),Tt={idx:gt,def:Ct,ruleStack:xt,occurrenceStack:yt};ut.push(Tt)}else if(mt instanceof Repetition){const At={idx:gt,def:drop(pt),ruleStack:xt,occurrenceStack:yt};ut.push(At),ut.push(at);const vt=new Repetition({definition:mt.definition,idx:mt.idx}),Et=mt.definition.concat([vt],drop(pt)),Ct={idx:gt,def:Et,ruleStack:xt,occurrenceStack:yt};ut.push(Ct)}else if(mt instanceof Alternation)for(let At=mt.definition.length-1;At>=0;At--){const vt=mt.definition[At],Et={idx:gt,def:vt.definition.concat(drop(pt)),ruleStack:xt,occurrenceStack:yt};ut.push(Et),ut.push(at)}else if(mt instanceof Alternative)ut.push({idx:gt,def:mt.definition.concat(drop(pt)),ruleStack:xt,occurrenceStack:yt});else if(mt instanceof Rule$1)ut.push(expandTopLevelRule(mt,gt,xt,yt));else throw Error("non exhaustive match")}return ct}function expandTopLevelRule(_e,_,tt,nt){const rt=clone(tt);rt.push(_e.name);const it=clone(nt);return it.push(1),{idx:_,def:_e.definition,ruleStack:rt,occurrenceStack:it}}var PROD_TYPE;(function(_e){_e[_e.OPTION=0]="OPTION",_e[_e.REPETITION=1]="REPETITION",_e[_e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",_e[_e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",_e[_e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",_e[_e.ALTERNATION=5]="ALTERNATION"})(PROD_TYPE||(PROD_TYPE={}));function getProdType(_e){if(_e instanceof Option||_e==="Option")return PROD_TYPE.OPTION;if(_e instanceof Repetition||_e==="Repetition")return PROD_TYPE.REPETITION;if(_e instanceof RepetitionMandatory||_e==="RepetitionMandatory")return PROD_TYPE.REPETITION_MANDATORY;if(_e instanceof RepetitionMandatoryWithSeparator||_e==="RepetitionMandatoryWithSeparator")return PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR;if(_e instanceof RepetitionWithSeparator||_e==="RepetitionWithSeparator")return PROD_TYPE.REPETITION_WITH_SEPARATOR;if(_e instanceof Alternation||_e==="Alternation")return PROD_TYPE.ALTERNATION;throw Error("non exhaustive match")}function buildLookaheadFuncForOr(_e,_,tt,nt,rt,it){const at=getLookaheadPathsForOr(_e,_,tt),ot=areTokenCategoriesNotUsed(at)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return it(at,nt,ot,rt)}function buildLookaheadFuncForOptionalProd(_e,_,tt,nt,rt,it){const at=getLookaheadPathsForOptionalProd(_e,_,rt,tt),ot=areTokenCategoriesNotUsed(at)?tokenStructuredMatcherNoCategories:tokenStructuredMatcher;return it(at[0],ot,nt)}function buildAlternativesLookAheadFunc(_e,_,tt,nt){const rt=_e.length,it=every(_e,at=>every(at,ot=>ot.length===1));if(_)return function(at){const ot=map(at,st=>st.GATE);for(let st=0;st<rt;st++){const lt=_e[st],ct=lt.length,ut=ot[st];if(!(ut!==void 0&&ut.call(this)===!1))e:for(let ft=0;ft<ct;ft++){const pt=lt[ft],gt=pt.length;for(let xt=0;xt<gt;xt++){const yt=this.LA(xt+1);if(tt(yt,pt[xt])===!1)continue e}return st}}};if(it&&!nt){const at=map(_e,st=>flatten$1(st)),ot=reduce(at,(st,lt,ct)=>(forEach(lt,ut=>{has$1(st,ut.tokenTypeIdx)||(st[ut.tokenTypeIdx]=ct),forEach(ut.categoryMatches,ft=>{has$1(st,ft)||(st[ft]=ct)})}),st),{});return function(){const st=this.LA(1);return ot[st.tokenTypeIdx]}}else return function(){for(let at=0;at<rt;at++){const ot=_e[at],st=ot.length;e:for(let lt=0;lt<st;lt++){const ct=ot[lt],ut=ct.length;for(let ft=0;ft<ut;ft++){const pt=this.LA(ft+1);if(tt(pt,ct[ft])===!1)continue e}return at}}}}function buildSingleAlternativeLookaheadFunction(_e,_,tt){const nt=every(_e,it=>it.length===1),rt=_e.length;if(nt&&!tt){const it=flatten$1(_e);if(it.length===1&&isEmpty(it[0].categoryMatches)){const ot=it[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===ot}}else{const at=reduce(it,(ot,st,lt)=>(ot[st.tokenTypeIdx]=!0,forEach(st.categoryMatches,ct=>{ot[ct]=!0}),ot),[]);return function(){const ot=this.LA(1);return at[ot.tokenTypeIdx]===!0}}}else return function(){e:for(let it=0;it<rt;it++){const at=_e[it],ot=at.length;for(let st=0;st<ot;st++){const lt=this.LA(st+1);if(_(lt,at[st])===!1)continue e}return!0}return!1}}class RestDefinitionFinderWalker extends RestWalker{constructor(_,tt,nt){super(),this.topProd=_,this.targetOccurrence=tt,this.targetProdType=nt}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(_,tt,nt,rt){return _.idx===this.targetOccurrence&&this.targetProdType===tt?(this.restDef=nt.concat(rt),!0):!1}walkOption(_,tt,nt){this.checkIsTarget(_,PROD_TYPE.OPTION,tt,nt)||super.walkOption(_,tt,nt)}walkAtLeastOne(_,tt,nt){this.checkIsTarget(_,PROD_TYPE.REPETITION_MANDATORY,tt,nt)||super.walkOption(_,tt,nt)}walkAtLeastOneSep(_,tt,nt){this.checkIsTarget(_,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,tt,nt)||super.walkOption(_,tt,nt)}walkMany(_,tt,nt){this.checkIsTarget(_,PROD_TYPE.REPETITION,tt,nt)||super.walkOption(_,tt,nt)}walkManySep(_,tt,nt){this.checkIsTarget(_,PROD_TYPE.REPETITION_WITH_SEPARATOR,tt,nt)||super.walkOption(_,tt,nt)}}class InsideDefinitionFinderVisitor extends GAstVisitor{constructor(_,tt,nt){super(),this.targetOccurrence=_,this.targetProdType=tt,this.targetRef=nt,this.result=[]}checkIsTarget(_,tt){_.idx===this.targetOccurrence&&this.targetProdType===tt&&(this.targetRef===void 0||_===this.targetRef)&&(this.result=_.definition)}visitOption(_){this.checkIsTarget(_,PROD_TYPE.OPTION)}visitRepetition(_){this.checkIsTarget(_,PROD_TYPE.REPETITION)}visitRepetitionMandatory(_){this.checkIsTarget(_,PROD_TYPE.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(_){this.checkIsTarget(_,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(_){this.checkIsTarget(_,PROD_TYPE.REPETITION_WITH_SEPARATOR)}visitAlternation(_){this.checkIsTarget(_,PROD_TYPE.ALTERNATION)}}function initializeArrayOfArrays(_e){const _=new Array(_e);for(let tt=0;tt<_e;tt++)_[tt]=[];return _}function pathToHashKeys(_e){let _=[""];for(let tt=0;tt<_e.length;tt++){const nt=_e[tt],rt=[];for(let it=0;it<_.length;it++){const at=_[it];rt.push(at+"_"+nt.tokenTypeIdx);for(let ot=0;ot<nt.categoryMatches.length;ot++){const st="_"+nt.categoryMatches[ot];rt.push(at+st)}}_=rt}return _}function isUniquePrefixHash(_e,_,tt){for(let nt=0;nt<_e.length;nt++){if(nt===tt)continue;const rt=_e[nt];for(let it=0;it<_.length;it++){const at=_[it];if(rt[at]===!0)return!1}}return!0}function lookAheadSequenceFromAlternatives(_e,_){const tt=map(_e,at=>possiblePathsFrom([at],1)),nt=initializeArrayOfArrays(tt.length),rt=map(tt,at=>{const ot={};return forEach(at,st=>{const lt=pathToHashKeys(st.partialPath);forEach(lt,ct=>{ot[ct]=!0})}),ot});let it=tt;for(let at=1;at<=_;at++){const ot=it;it=initializeArrayOfArrays(ot.length);for(let st=0;st<ot.length;st++){const lt=ot[st];for(let ct=0;ct<lt.length;ct++){const ut=lt[ct].partialPath,ft=lt[ct].suffixDef,pt=pathToHashKeys(ut);if(isUniquePrefixHash(rt,pt,st)||isEmpty(ft)||ut.length===_){const xt=nt[st];if(containsPath(xt,ut)===!1){xt.push(ut);for(let yt=0;yt<pt.length;yt++){const mt=pt[yt];rt[st][mt]=!0}}}else{const xt=possiblePathsFrom(ft,at+1,ut);it[st]=it[st].concat(xt),forEach(xt,yt=>{const mt=pathToHashKeys(yt.partialPath);forEach(mt,At=>{rt[st][At]=!0})})}}}}return nt}function getLookaheadPathsForOr(_e,_,tt,nt){const rt=new InsideDefinitionFinderVisitor(_e,PROD_TYPE.ALTERNATION,nt);return _.accept(rt),lookAheadSequenceFromAlternatives(rt.result,tt)}function getLookaheadPathsForOptionalProd(_e,_,tt,nt){const rt=new InsideDefinitionFinderVisitor(_e,tt);_.accept(rt);const it=rt.result,ot=new RestDefinitionFinderWalker(_,_e,tt).startWalking(),st=new Alternative({definition:it}),lt=new Alternative({definition:ot});return lookAheadSequenceFromAlternatives([st,lt],nt)}function containsPath(_e,_){e:for(let tt=0;tt<_e.length;tt++){const nt=_e[tt];if(nt.length===_.length){for(let rt=0;rt<nt.length;rt++){const it=_[rt],at=nt[rt];if((it===at||at.categoryMatchesMap[it.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function isStrictPrefixOfPath(_e,_){return _e.length<_.length&&every(_e,(tt,nt)=>{const rt=_[nt];return tt===rt||rt.categoryMatchesMap[tt.tokenTypeIdx]})}function areTokenCategoriesNotUsed(_e){return every(_e,_=>every(_,tt=>every(tt,nt=>isEmpty(nt.categoryMatches))))}function validateLookahead(_e){const _=_e.lookaheadStrategy.validate({rules:_e.rules,tokenTypes:_e.tokenTypes,grammarName:_e.grammarName});return map(_,tt=>Object.assign({type:ParserDefinitionErrorType.CUSTOM_LOOKAHEAD_VALIDATION},tt))}function validateGrammar$1(_e,_,tt,nt){const rt=flatMap(_e,st=>validateDuplicateProductions(st,tt)),it=checkTerminalAndNoneTerminalsNameSpace(_e,_,tt),at=flatMap(_e,st=>validateTooManyAlts(st,tt)),ot=flatMap(_e,st=>validateRuleDoesNotAlreadyExist(st,_e,nt,tt));return rt.concat(it,at,ot)}function validateDuplicateProductions(_e,_){const tt=new OccurrenceValidationCollector;_e.accept(tt);const nt=tt.allProductions,rt=groupBy$1(nt,identifyProductionForDuplicates),it=pickBy(rt,ot=>ot.length>1);return map(values(it),ot=>{const st=head(ot),lt=_.buildDuplicateFoundError(_e,ot),ct=getProductionDslName(st),ut={message:lt,type:ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:_e.name,dslName:ct,occurrence:st.idx},ft=getExtraProductionArgument(st);return ft&&(ut.parameter=ft),ut})}function identifyProductionForDuplicates(_e){return`${getProductionDslName(_e)}_#_${_e.idx}_#_${getExtraProductionArgument(_e)}`}function getExtraProductionArgument(_e){return _e instanceof Terminal?_e.terminalType.name:_e instanceof NonTerminal?_e.nonTerminalName:""}class OccurrenceValidationCollector extends GAstVisitor{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(_){this.allProductions.push(_)}visitOption(_){this.allProductions.push(_)}visitRepetitionWithSeparator(_){this.allProductions.push(_)}visitRepetitionMandatory(_){this.allProductions.push(_)}visitRepetitionMandatoryWithSeparator(_){this.allProductions.push(_)}visitRepetition(_){this.allProductions.push(_)}visitAlternation(_){this.allProductions.push(_)}visitTerminal(_){this.allProductions.push(_)}}function validateRuleDoesNotAlreadyExist(_e,_,tt,nt){const rt=[];if(reduce(_,(at,ot)=>ot.name===_e.name?at+1:at,0)>1){const at=nt.buildDuplicateRuleNameError({topLevelRule:_e,grammarName:tt});rt.push({message:at,type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:_e.name})}return rt}function validateRuleIsOverridden(_e,_,tt){const nt=[];let rt;return includes(_,_e)||(rt=`Invalid rule override, rule: ->${_e}<- cannot be overridden in the grammar: ->${tt}<-as it is not defined in any of the super grammars `,nt.push({message:rt,type:ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:_e})),nt}function validateNoLeftRecursion(_e,_,tt,nt=[]){const rt=[],it=getFirstNoneTerminal(_.definition);if(isEmpty(it))return[];{const at=_e.name;includes(it,_e)&&rt.push({message:tt.buildLeftRecursionError({topLevelRule:_e,leftRecursionPath:nt}),type:ParserDefinitionErrorType.LEFT_RECURSION,ruleName:at});const st=difference$1(it,nt.concat([_e])),lt=flatMap(st,ct=>{const ut=clone(nt);return ut.push(ct),validateNoLeftRecursion(_e,ct,tt,ut)});return rt.concat(lt)}}function getFirstNoneTerminal(_e){let _=[];if(isEmpty(_e))return _;const tt=head(_e);if(tt instanceof NonTerminal)_.push(tt.referencedRule);else if(tt instanceof Alternative||tt instanceof Option||tt instanceof RepetitionMandatory||tt instanceof RepetitionMandatoryWithSeparator||tt instanceof RepetitionWithSeparator||tt instanceof Repetition)_=_.concat(getFirstNoneTerminal(tt.definition));else if(tt instanceof Alternation)_=flatten$1(map(tt.definition,it=>getFirstNoneTerminal(it.definition)));else if(!(tt instanceof Terminal))throw Error("non exhaustive match");const nt=isOptionalProd(tt),rt=_e.length>1;if(nt&&rt){const it=drop(_e);return _.concat(getFirstNoneTerminal(it))}else return _}class OrCollector extends GAstVisitor{constructor(){super(...arguments),this.alternations=[]}visitAlternation(_){this.alternations.push(_)}}function validateEmptyOrAlternative(_e,_){const tt=new OrCollector;_e.accept(tt);const nt=tt.alternations;return flatMap(nt,it=>{const at=dropRight(it.definition);return flatMap(at,(ot,st)=>{const lt=nextPossibleTokensAfter([ot],[],tokenStructuredMatcher,1);return isEmpty(lt)?[{message:_.buildEmptyAlternationError({topLevelRule:_e,alternation:it,emptyChoiceIdx:st}),type:ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:_e.name,occurrence:it.idx,alternative:st+1}]:[]})})}function validateAmbiguousAlternationAlternatives(_e,_,tt){const nt=new OrCollector;_e.accept(nt);let rt=nt.alternations;return rt=reject(rt,at=>at.ignoreAmbiguities===!0),flatMap(rt,at=>{const ot=at.idx,st=at.maxLookahead||_,lt=getLookaheadPathsForOr(ot,_e,st,at),ct=checkAlternativesAmbiguities(lt,at,_e,tt),ut=checkPrefixAlternativesAmbiguities(lt,at,_e,tt);return ct.concat(ut)})}class RepetitionCollector extends GAstVisitor{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(_){this.allProductions.push(_)}visitRepetitionMandatory(_){this.allProductions.push(_)}visitRepetitionMandatoryWithSeparator(_){this.allProductions.push(_)}visitRepetition(_){this.allProductions.push(_)}}function validateTooManyAlts(_e,_){const tt=new OrCollector;_e.accept(tt);const nt=tt.alternations;return flatMap(nt,it=>it.definition.length>255?[{message:_.buildTooManyAlternativesError({topLevelRule:_e,alternation:it}),type:ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:_e.name,occurrence:it.idx}]:[])}function validateSomeNonEmptyLookaheadPath(_e,_,tt){const nt=[];return forEach(_e,rt=>{const it=new RepetitionCollector;rt.accept(it);const at=it.allProductions;forEach(at,ot=>{const st=getProdType(ot),lt=ot.maxLookahead||_,ct=ot.idx,ft=getLookaheadPathsForOptionalProd(ct,rt,st,lt)[0];if(isEmpty(flatten$1(ft))){const pt=tt.buildEmptyRepetitionError({topLevelRule:rt,repetition:ot});nt.push({message:pt,type:ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:rt.name})}})}),nt}function checkAlternativesAmbiguities(_e,_,tt,nt){const rt=[],it=reduce(_e,(ot,st,lt)=>(_.definition[lt].ignoreAmbiguities===!0||forEach(st,ct=>{const ut=[lt];forEach(_e,(ft,pt)=>{lt!==pt&&containsPath(ft,ct)&&_.definition[pt].ignoreAmbiguities!==!0&&ut.push(pt)}),ut.length>1&&!containsPath(rt,ct)&&(rt.push(ct),ot.push({alts:ut,path:ct}))}),ot),[]);return map(it,ot=>{const st=map(ot.alts,ct=>ct+1);return{message:nt.buildAlternationAmbiguityError({topLevelRule:tt,alternation:_,ambiguityIndices:st,prefixPath:ot.path}),type:ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:tt.name,occurrence:_.idx,alternatives:ot.alts}})}function checkPrefixAlternativesAmbiguities(_e,_,tt,nt){const rt=reduce(_e,(at,ot,st)=>{const lt=map(ot,ct=>({idx:st,path:ct}));return at.concat(lt)},[]);return compact(flatMap(rt,at=>{if(_.definition[at.idx].ignoreAmbiguities===!0)return[];const st=at.idx,lt=at.path,ct=filter(rt,ft=>_.definition[ft.idx].ignoreAmbiguities!==!0&&ft.idx<st&&isStrictPrefixOfPath(ft.path,lt));return map(ct,ft=>{const pt=[ft.idx+1,st+1],gt=_.idx===0?"":_.idx;return{message:nt.buildAlternationPrefixAmbiguityError({topLevelRule:tt,alternation:_,ambiguityIndices:pt,prefixPath:ft.path}),type:ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:tt.name,occurrence:gt,alternatives:pt}})}))}function checkTerminalAndNoneTerminalsNameSpace(_e,_,tt){const nt=[],rt=map(_,it=>it.name);return forEach(_e,it=>{const at=it.name;if(includes(rt,at)){const ot=tt.buildNamespaceConflictError(it);nt.push({message:ot,type:ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:at})}}),nt}function resolveGrammar(_e){const _=defaults$1(_e,{errMsgProvider:defaultGrammarResolverErrorProvider}),tt={};return forEach(_e.rules,nt=>{tt[nt.name]=nt}),resolveGrammar$1(tt,_.errMsgProvider)}function validateGrammar(_e){return _e=defaults$1(_e,{errMsgProvider:defaultGrammarValidatorErrorProvider}),validateGrammar$1(_e.rules,_e.tokenTypes,_e.errMsgProvider,_e.grammarName)}const MISMATCHED_TOKEN_EXCEPTION="MismatchedTokenException",NO_VIABLE_ALT_EXCEPTION="NoViableAltException",EARLY_EXIT_EXCEPTION="EarlyExitException",NOT_ALL_INPUT_PARSED_EXCEPTION="NotAllInputParsedException",RECOGNITION_EXCEPTION_NAMES=[MISMATCHED_TOKEN_EXCEPTION,NO_VIABLE_ALT_EXCEPTION,EARLY_EXIT_EXCEPTION,NOT_ALL_INPUT_PARSED_EXCEPTION];Object.freeze(RECOGNITION_EXCEPTION_NAMES);function isRecognitionException(_e){return includes(RECOGNITION_EXCEPTION_NAMES,_e.name)}class RecognitionException extends Error{constructor(_,tt){super(_),this.token=tt,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class MismatchedTokenException extends RecognitionException{constructor(_,tt,nt){super(_,tt),this.previousToken=nt,this.name=MISMATCHED_TOKEN_EXCEPTION}}class NoViableAltException extends RecognitionException{constructor(_,tt,nt){super(_,tt),this.previousToken=nt,this.name=NO_VIABLE_ALT_EXCEPTION}}class NotAllInputParsedException extends RecognitionException{constructor(_,tt){super(_,tt),this.name=NOT_ALL_INPUT_PARSED_EXCEPTION}}class EarlyExitException extends RecognitionException{constructor(_,tt,nt){super(_,tt),this.previousToken=nt,this.name=EARLY_EXIT_EXCEPTION}}const EOF_FOLLOW_KEY={},IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";class InRuleRecoveryException extends Error{constructor(_){super(_),this.name=IN_RULE_RECOVERY_EXCEPTION}}class Recoverable{initRecoverable(_){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=has$1(_,"recoveryEnabled")?_.recoveryEnabled:DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=attemptInRepetitionRecovery)}getTokenToInsert(_){const tt=createTokenInstance(_,"",NaN,NaN,NaN,NaN,NaN,NaN);return tt.isInsertedInRecovery=!0,tt}canTokenTypeBeInsertedInRecovery(_){return!0}canTokenTypeBeDeletedInRecovery(_){return!0}tryInRepetitionRecovery(_,tt,nt,rt){const it=this.findReSyncTokenType(),at=this.exportLexerState(),ot=[];let st=!1;const lt=this.LA(1);let ct=this.LA(1);const ut=()=>{const ft=this.LA(0),pt=this.errorMessageProvider.buildMismatchTokenMessage({expected:rt,actual:lt,previous:ft,ruleName:this.getCurrRuleFullName()}),gt=new MismatchedTokenException(pt,lt,this.LA(0));gt.resyncedTokens=dropRight(ot),this.SAVE_ERROR(gt)};for(;!st;)if(this.tokenMatcher(ct,rt)){ut();return}else if(nt.call(this)){ut(),_.apply(this,tt);return}else this.tokenMatcher(ct,it)?st=!0:(ct=this.SKIP_TOKEN(),this.addToResyncTokens(ct,ot));this.importLexerState(at)}shouldInRepetitionRecoveryBeTried(_,tt,nt){return!(nt===!1||this.tokenMatcher(this.LA(1),_)||this.isBackTracking()||this.canPerformInRuleRecovery(_,this.getFollowsForInRuleRecovery(_,tt)))}getFollowsForInRuleRecovery(_,tt){const nt=this.getCurrentGrammarPath(_,tt);return this.getNextPossibleTokenTypes(nt)}tryInRuleRecovery(_,tt){if(this.canRecoverWithSingleTokenInsertion(_,tt))return this.getTokenToInsert(_);if(this.canRecoverWithSingleTokenDeletion(_)){const nt=this.SKIP_TOKEN();return this.consumeToken(),nt}throw new InRuleRecoveryException("sad sad panda")}canPerformInRuleRecovery(_,tt){return this.canRecoverWithSingleTokenInsertion(_,tt)||this.canRecoverWithSingleTokenDeletion(_)}canRecoverWithSingleTokenInsertion(_,tt){if(!this.canTokenTypeBeInsertedInRecovery(_)||isEmpty(tt))return!1;const nt=this.LA(1);return find$1(tt,it=>this.tokenMatcher(nt,it))!==void 0}canRecoverWithSingleTokenDeletion(_){return this.canTokenTypeBeDeletedInRecovery(_)?this.tokenMatcher(this.LA(2),_):!1}isInCurrentRuleReSyncSet(_){const tt=this.getCurrFollowKey(),nt=this.getFollowSetFromFollowKey(tt);return includes(nt,_)}findReSyncTokenType(){const _=this.flattenFollowSet();let tt=this.LA(1),nt=2;for(;;){const rt=find$1(_,it=>tokenMatcher(tt,it));if(rt!==void 0)return rt;tt=this.LA(nt),nt++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return EOF_FOLLOW_KEY;const _=this.getLastExplicitRuleShortName(),tt=this.getLastExplicitRuleOccurrenceIndex(),nt=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(_),idxInCallingRule:tt,inRule:this.shortRuleNameToFullName(nt)}}buildFullFollowKeyStack(){const _=this.RULE_STACK,tt=this.RULE_OCCURRENCE_STACK;return map(_,(nt,rt)=>rt===0?EOF_FOLLOW_KEY:{ruleName:this.shortRuleNameToFullName(nt),idxInCallingRule:tt[rt],inRule:this.shortRuleNameToFullName(_[rt-1])})}flattenFollowSet(){const _=map(this.buildFullFollowKeyStack(),tt=>this.getFollowSetFromFollowKey(tt));return flatten$1(_)}getFollowSetFromFollowKey(_){if(_===EOF_FOLLOW_KEY)return[EOF];const tt=_.ruleName+_.idxInCallingRule+IN+_.inRule;return this.resyncFollows[tt]}addToResyncTokens(_,tt){return this.tokenMatcher(_,EOF)||tt.push(_),tt}reSyncTo(_){const tt=[];let nt=this.LA(1);for(;this.tokenMatcher(nt,_)===!1;)nt=this.SKIP_TOKEN(),this.addToResyncTokens(nt,tt);return dropRight(tt)}attemptInRepetitionRecovery(_,tt,nt,rt,it,at,ot){}getCurrentGrammarPath(_,tt){const nt=this.getHumanReadableRuleStack(),rt=clone(this.RULE_OCCURRENCE_STACK);return{ruleStack:nt,occurrenceStack:rt,lastTok:_,lastTokOccurrence:tt}}getHumanReadableRuleStack(){return map(this.RULE_STACK,_=>this.shortRuleNameToFullName(_))}}function attemptInRepetitionRecovery(_e,_,tt,nt,rt,it,at){const ot=this.getKeyForAutomaticLookahead(nt,rt);let st=this.firstAfterRepMap[ot];if(st===void 0){const ft=this.getCurrRuleFullName(),pt=this.getGAstProductions()[ft];st=new it(pt,rt).startWalking(),this.firstAfterRepMap[ot]=st}let lt=st.token,ct=st.occurrence;const ut=st.isEndOfRule;this.RULE_STACK.length===1&&ut&&lt===void 0&&(lt=EOF,ct=1),!(lt===void 0||ct===void 0)&&this.shouldInRepetitionRecoveryBeTried(lt,ct,at)&&this.tryInRepetitionRecovery(_e,_,tt,lt)}const BITS_FOR_METHOD_TYPE=4,BITS_FOR_OCCURRENCE_IDX=8,OR_IDX=1<<BITS_FOR_OCCURRENCE_IDX,OPTION_IDX=2<<BITS_FOR_OCCURRENCE_IDX,MANY_IDX=3<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_IDX=4<<BITS_FOR_OCCURRENCE_IDX,MANY_SEP_IDX=5<<BITS_FOR_OCCURRENCE_IDX,AT_LEAST_ONE_SEP_IDX=6<<BITS_FOR_OCCURRENCE_IDX;function getKeyForAutomaticLookahead(_e,_,tt){return tt|_|_e}class LLkLookaheadStrategy{constructor(_){var tt;this.maxLookahead=(tt=_==null?void 0:_.maxLookahead)!==null&&tt!==void 0?tt:DEFAULT_PARSER_CONFIG.maxLookahead}validate(_){const tt=this.validateNoLeftRecursion(_.rules);if(isEmpty(tt)){const nt=this.validateEmptyOrAlternatives(_.rules),rt=this.validateAmbiguousAlternationAlternatives(_.rules,this.maxLookahead),it=this.validateSomeNonEmptyLookaheadPath(_.rules,this.maxLookahead);return[...tt,...nt,...rt,...it]}return tt}validateNoLeftRecursion(_){return flatMap(_,tt=>validateNoLeftRecursion(tt,tt,defaultGrammarValidatorErrorProvider))}validateEmptyOrAlternatives(_){return flatMap(_,tt=>validateEmptyOrAlternative(tt,defaultGrammarValidatorErrorProvider))}validateAmbiguousAlternationAlternatives(_,tt){return flatMap(_,nt=>validateAmbiguousAlternationAlternatives(nt,tt,defaultGrammarValidatorErrorProvider))}validateSomeNonEmptyLookaheadPath(_,tt){return validateSomeNonEmptyLookaheadPath(_,tt,defaultGrammarValidatorErrorProvider)}buildLookaheadForAlternation(_){return buildLookaheadFuncForOr(_.prodOccurrence,_.rule,_.maxLookahead,_.hasPredicates,_.dynamicTokensEnabled,buildAlternativesLookAheadFunc)}buildLookaheadForOptional(_){return buildLookaheadFuncForOptionalProd(_.prodOccurrence,_.rule,_.maxLookahead,_.dynamicTokensEnabled,getProdType(_.prodType),buildSingleAlternativeLookaheadFunction)}}class LooksAhead{initLooksAhead(_){this.dynamicTokensEnabled=has$1(_,"dynamicTokensEnabled")?_.dynamicTokensEnabled:DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=has$1(_,"maxLookahead")?_.maxLookahead:DEFAULT_PARSER_CONFIG.maxLookahead,this.lookaheadStrategy=has$1(_,"lookaheadStrategy")?_.lookaheadStrategy:new LLkLookaheadStrategy({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(_){forEach(_,tt=>{this.TRACE_INIT(`${tt.name} Rule Lookahead`,()=>{const{alternation:nt,repetition:rt,option:it,repetitionMandatory:at,repetitionMandatoryWithSeparator:ot,repetitionWithSeparator:st}=collectMethods(tt);forEach(nt,lt=>{const ct=lt.idx===0?"":lt.idx;this.TRACE_INIT(`${getProductionDslName(lt)}${ct}`,()=>{const ut=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:lt.idx,rule:tt,maxLookahead:lt.maxLookahead||this.maxLookahead,hasPredicates:lt.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),ft=getKeyForAutomaticLookahead(this.fullRuleNameToShort[tt.name],OR_IDX,lt.idx);this.setLaFuncCache(ft,ut)})}),forEach(rt,lt=>{this.computeLookaheadFunc(tt,lt.idx,MANY_IDX,"Repetition",lt.maxLookahead,getProductionDslName(lt))}),forEach(it,lt=>{this.computeLookaheadFunc(tt,lt.idx,OPTION_IDX,"Option",lt.maxLookahead,getProductionDslName(lt))}),forEach(at,lt=>{this.computeLookaheadFunc(tt,lt.idx,AT_LEAST_ONE_IDX,"RepetitionMandatory",lt.maxLookahead,getProductionDslName(lt))}),forEach(ot,lt=>{this.computeLookaheadFunc(tt,lt.idx,AT_LEAST_ONE_SEP_IDX,"RepetitionMandatoryWithSeparator",lt.maxLookahead,getProductionDslName(lt))}),forEach(st,lt=>{this.computeLookaheadFunc(tt,lt.idx,MANY_SEP_IDX,"RepetitionWithSeparator",lt.maxLookahead,getProductionDslName(lt))})})})}computeLookaheadFunc(_,tt,nt,rt,it,at){this.TRACE_INIT(`${at}${tt===0?"":tt}`,()=>{const ot=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:tt,rule:_,maxLookahead:it||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:rt}),st=getKeyForAutomaticLookahead(this.fullRuleNameToShort[_.name],nt,tt);this.setLaFuncCache(st,ot)})}getKeyForAutomaticLookahead(_,tt){const nt=this.getLastExplicitRuleShortName();return getKeyForAutomaticLookahead(nt,_,tt)}getLaFuncFromCache(_){return this.lookAheadFuncsCache.get(_)}setLaFuncCache(_,tt){this.lookAheadFuncsCache.set(_,tt)}}class DslMethodsCollectorVisitor extends GAstVisitor{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(_){this.dslMethods.option.push(_)}visitRepetitionWithSeparator(_){this.dslMethods.repetitionWithSeparator.push(_)}visitRepetitionMandatory(_){this.dslMethods.repetitionMandatory.push(_)}visitRepetitionMandatoryWithSeparator(_){this.dslMethods.repetitionMandatoryWithSeparator.push(_)}visitRepetition(_){this.dslMethods.repetition.push(_)}visitAlternation(_){this.dslMethods.alternation.push(_)}}const collectorVisitor=new DslMethodsCollectorVisitor;function collectMethods(_e){collectorVisitor.reset(),_e.accept(collectorVisitor);const _=collectorVisitor.dslMethods;return collectorVisitor.reset(),_}function setNodeLocationOnlyOffset(_e,_){isNaN(_e.startOffset)===!0?(_e.startOffset=_.startOffset,_e.endOffset=_.endOffset):_e.endOffset<_.endOffset&&(_e.endOffset=_.endOffset)}function setNodeLocationFull(_e,_){isNaN(_e.startOffset)===!0?(_e.startOffset=_.startOffset,_e.startColumn=_.startColumn,_e.startLine=_.startLine,_e.endOffset=_.endOffset,_e.endColumn=_.endColumn,_e.endLine=_.endLine):_e.endOffset<_.endOffset&&(_e.endOffset=_.endOffset,_e.endColumn=_.endColumn,_e.endLine=_.endLine)}function addTerminalToCst(_e,_,tt){_e.children[tt]===void 0?_e.children[tt]=[_]:_e.children[tt].push(_)}function addNoneTerminalToCst(_e,_,tt){_e.children[_]===void 0?_e.children[_]=[tt]:_e.children[_].push(tt)}const NAME="name";function defineNameProp(_e,_){Object.defineProperty(_e,NAME,{enumerable:!1,configurable:!0,writable:!1,value:_})}function defaultVisit(_e,_){const tt=keys(_e),nt=tt.length;for(let rt=0;rt<nt;rt++){const it=tt[rt],at=_e[it],ot=at.length;for(let st=0;st<ot;st++){const lt=at[st];lt.tokenTypeIdx===void 0&&this[lt.name](lt.children,_)}}}function createBaseSemanticVisitorConstructor(_e,_){const tt=function(){};defineNameProp(tt,_e+"BaseSemantics");const nt={visit:function(rt,it){if(isArray$1$1(rt)&&(rt=rt[0]),!isUndefined(rt))return this[rt.name](rt.children,it)},validateVisitor:function(){const rt=validateVisitor(this,_);if(!isEmpty(rt)){const it=map(rt,at=>at.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${it.join(`

`).replace(/\n/g,`
	`)}`)}}};return tt.prototype=nt,tt.prototype.constructor=tt,tt._RULE_NAMES=_,tt}function createBaseVisitorConstructorWithDefaults(_e,_,tt){const nt=function(){};defineNameProp(nt,_e+"BaseSemanticsWithDefaults");const rt=Object.create(tt.prototype);return forEach(_,it=>{rt[it]=defaultVisit}),nt.prototype=rt,nt.prototype.constructor=nt,nt}var CstVisitorDefinitionError;(function(_e){_e[_e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",_e[_e.MISSING_METHOD=1]="MISSING_METHOD"})(CstVisitorDefinitionError||(CstVisitorDefinitionError={}));function validateVisitor(_e,_){return validateMissingCstMethods(_e,_)}function validateMissingCstMethods(_e,_){const tt=filter(_,rt=>isFunction(_e[rt])===!1),nt=map(tt,rt=>({msg:`Missing visitor method: <${rt}> on ${_e.constructor.name} CST Visitor.`,type:CstVisitorDefinitionError.MISSING_METHOD,methodName:rt}));return compact(nt)}class TreeBuilder{initTreeBuilder(_){if(this.CST_STACK=[],this.outputCst=_.outputCst,this.nodeLocationTracking=has$1(_,"nodeLocationTracking")?_.nodeLocationTracking:DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=noop$1,this.cstFinallyStateUpdate=noop$1,this.cstPostTerminal=noop$1,this.cstPostNonTerminal=noop$1,this.cstPostRule=noop$1;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationFull,this.setNodeLocationFromNode=setNodeLocationFull,this.cstPostRule=noop$1,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=noop$1,this.setNodeLocationFromNode=noop$1,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=setNodeLocationOnlyOffset,this.setNodeLocationFromNode=setNodeLocationOnlyOffset,this.cstPostRule=noop$1,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=noop$1,this.setNodeLocationFromNode=noop$1,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=noop$1,this.setNodeLocationFromNode=noop$1,this.cstPostRule=noop$1,this.setInitialNodeLocation=noop$1;else throw Error(`Invalid <nodeLocationTracking> config option: "${_.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(_){_.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(_){_.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(_){_.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(_){const tt=this.LA(1);_.location={startOffset:tt.startOffset,startLine:tt.startLine,startColumn:tt.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(_){const tt={name:_,children:Object.create(null)};this.setInitialNodeLocation(tt),this.CST_STACK.push(tt)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(_){const tt=this.LA(0),nt=_.location;nt.startOffset<=tt.startOffset?(nt.endOffset=tt.endOffset,nt.endLine=tt.endLine,nt.endColumn=tt.endColumn):(nt.startOffset=NaN,nt.startLine=NaN,nt.startColumn=NaN)}cstPostRuleOnlyOffset(_){const tt=this.LA(0),nt=_.location;nt.startOffset<=tt.startOffset?nt.endOffset=tt.endOffset:nt.startOffset=NaN}cstPostTerminal(_,tt){const nt=this.CST_STACK[this.CST_STACK.length-1];addTerminalToCst(nt,tt,_),this.setNodeLocationFromToken(nt.location,tt)}cstPostNonTerminal(_,tt){const nt=this.CST_STACK[this.CST_STACK.length-1];addNoneTerminalToCst(nt,tt,_),this.setNodeLocationFromNode(nt.location,_.location)}getBaseCstVisitorConstructor(){if(isUndefined(this.baseCstVisitorConstructor)){const _=createBaseSemanticVisitorConstructor(this.className,keys(this.gastProductionsCache));return this.baseCstVisitorConstructor=_,_}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(isUndefined(this.baseCstVisitorWithDefaultsConstructor)){const _=createBaseVisitorConstructorWithDefaults(this.className,keys(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=_,_}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const _=this.RULE_STACK;return _[_.length-1]}getPreviousExplicitRuleShortName(){const _=this.RULE_STACK;return _[_.length-2]}getLastExplicitRuleOccurrenceIndex(){const _=this.RULE_OCCURRENCE_STACK;return _[_.length-1]}}class LexerAdapter{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(_){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=_,this.tokVectorLength=_.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):END_OF_FILE}LA(_){const tt=this.currIdx+_;return tt<0||this.tokVectorLength<=tt?END_OF_FILE:this.tokVector[tt]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(_){this.currIdx=_}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class RecognizerApi{ACTION(_){return _.call(this)}consume(_,tt,nt){return this.consumeInternal(tt,_,nt)}subrule(_,tt,nt){return this.subruleInternal(tt,_,nt)}option(_,tt){return this.optionInternal(tt,_)}or(_,tt){return this.orInternal(tt,_)}many(_,tt){return this.manyInternal(_,tt)}atLeastOne(_,tt){return this.atLeastOneInternal(_,tt)}CONSUME(_,tt){return this.consumeInternal(_,0,tt)}CONSUME1(_,tt){return this.consumeInternal(_,1,tt)}CONSUME2(_,tt){return this.consumeInternal(_,2,tt)}CONSUME3(_,tt){return this.consumeInternal(_,3,tt)}CONSUME4(_,tt){return this.consumeInternal(_,4,tt)}CONSUME5(_,tt){return this.consumeInternal(_,5,tt)}CONSUME6(_,tt){return this.consumeInternal(_,6,tt)}CONSUME7(_,tt){return this.consumeInternal(_,7,tt)}CONSUME8(_,tt){return this.consumeInternal(_,8,tt)}CONSUME9(_,tt){return this.consumeInternal(_,9,tt)}SUBRULE(_,tt){return this.subruleInternal(_,0,tt)}SUBRULE1(_,tt){return this.subruleInternal(_,1,tt)}SUBRULE2(_,tt){return this.subruleInternal(_,2,tt)}SUBRULE3(_,tt){return this.subruleInternal(_,3,tt)}SUBRULE4(_,tt){return this.subruleInternal(_,4,tt)}SUBRULE5(_,tt){return this.subruleInternal(_,5,tt)}SUBRULE6(_,tt){return this.subruleInternal(_,6,tt)}SUBRULE7(_,tt){return this.subruleInternal(_,7,tt)}SUBRULE8(_,tt){return this.subruleInternal(_,8,tt)}SUBRULE9(_,tt){return this.subruleInternal(_,9,tt)}OPTION(_){return this.optionInternal(_,0)}OPTION1(_){return this.optionInternal(_,1)}OPTION2(_){return this.optionInternal(_,2)}OPTION3(_){return this.optionInternal(_,3)}OPTION4(_){return this.optionInternal(_,4)}OPTION5(_){return this.optionInternal(_,5)}OPTION6(_){return this.optionInternal(_,6)}OPTION7(_){return this.optionInternal(_,7)}OPTION8(_){return this.optionInternal(_,8)}OPTION9(_){return this.optionInternal(_,9)}OR(_){return this.orInternal(_,0)}OR1(_){return this.orInternal(_,1)}OR2(_){return this.orInternal(_,2)}OR3(_){return this.orInternal(_,3)}OR4(_){return this.orInternal(_,4)}OR5(_){return this.orInternal(_,5)}OR6(_){return this.orInternal(_,6)}OR7(_){return this.orInternal(_,7)}OR8(_){return this.orInternal(_,8)}OR9(_){return this.orInternal(_,9)}MANY(_){this.manyInternal(0,_)}MANY1(_){this.manyInternal(1,_)}MANY2(_){this.manyInternal(2,_)}MANY3(_){this.manyInternal(3,_)}MANY4(_){this.manyInternal(4,_)}MANY5(_){this.manyInternal(5,_)}MANY6(_){this.manyInternal(6,_)}MANY7(_){this.manyInternal(7,_)}MANY8(_){this.manyInternal(8,_)}MANY9(_){this.manyInternal(9,_)}MANY_SEP(_){this.manySepFirstInternal(0,_)}MANY_SEP1(_){this.manySepFirstInternal(1,_)}MANY_SEP2(_){this.manySepFirstInternal(2,_)}MANY_SEP3(_){this.manySepFirstInternal(3,_)}MANY_SEP4(_){this.manySepFirstInternal(4,_)}MANY_SEP5(_){this.manySepFirstInternal(5,_)}MANY_SEP6(_){this.manySepFirstInternal(6,_)}MANY_SEP7(_){this.manySepFirstInternal(7,_)}MANY_SEP8(_){this.manySepFirstInternal(8,_)}MANY_SEP9(_){this.manySepFirstInternal(9,_)}AT_LEAST_ONE(_){this.atLeastOneInternal(0,_)}AT_LEAST_ONE1(_){return this.atLeastOneInternal(1,_)}AT_LEAST_ONE2(_){this.atLeastOneInternal(2,_)}AT_LEAST_ONE3(_){this.atLeastOneInternal(3,_)}AT_LEAST_ONE4(_){this.atLeastOneInternal(4,_)}AT_LEAST_ONE5(_){this.atLeastOneInternal(5,_)}AT_LEAST_ONE6(_){this.atLeastOneInternal(6,_)}AT_LEAST_ONE7(_){this.atLeastOneInternal(7,_)}AT_LEAST_ONE8(_){this.atLeastOneInternal(8,_)}AT_LEAST_ONE9(_){this.atLeastOneInternal(9,_)}AT_LEAST_ONE_SEP(_){this.atLeastOneSepFirstInternal(0,_)}AT_LEAST_ONE_SEP1(_){this.atLeastOneSepFirstInternal(1,_)}AT_LEAST_ONE_SEP2(_){this.atLeastOneSepFirstInternal(2,_)}AT_LEAST_ONE_SEP3(_){this.atLeastOneSepFirstInternal(3,_)}AT_LEAST_ONE_SEP4(_){this.atLeastOneSepFirstInternal(4,_)}AT_LEAST_ONE_SEP5(_){this.atLeastOneSepFirstInternal(5,_)}AT_LEAST_ONE_SEP6(_){this.atLeastOneSepFirstInternal(6,_)}AT_LEAST_ONE_SEP7(_){this.atLeastOneSepFirstInternal(7,_)}AT_LEAST_ONE_SEP8(_){this.atLeastOneSepFirstInternal(8,_)}AT_LEAST_ONE_SEP9(_){this.atLeastOneSepFirstInternal(9,_)}RULE(_,tt,nt=DEFAULT_RULE_CONFIG){if(includes(this.definedRulesNames,_)){const at={message:defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:_,grammarName:this.className}),type:ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:_};this.definitionErrors.push(at)}this.definedRulesNames.push(_);const rt=this.defineRule(_,tt,nt);return this[_]=rt,rt}OVERRIDE_RULE(_,tt,nt=DEFAULT_RULE_CONFIG){const rt=validateRuleIsOverridden(_,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(rt);const it=this.defineRule(_,tt,nt);return this[_]=it,it}BACKTRACK(_,tt){return function(){this.isBackTrackingStack.push(1);const nt=this.saveRecogState();try{return _.apply(this,tt),!0}catch(rt){if(isRecognitionException(rt))return!1;throw rt}finally{this.reloadRecogState(nt),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return serializeGrammar(values(this.gastProductionsCache))}}class RecognizerEngine{initRecognizerEngine(_,tt){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=tokenStructuredMatcherNoCategories,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},has$1(tt,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(isArray$1$1(_)){if(isEmpty(_))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof _[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(isArray$1$1(_))this.tokensMap=reduce(_,(it,at)=>(it[at.name]=at,it),{});else if(has$1(_,"modes")&&every(flatten$1(values(_.modes)),isTokenType)){const it=flatten$1(values(_.modes)),at=uniq(it);this.tokensMap=reduce(at,(ot,st)=>(ot[st.name]=st,ot),{})}else if(isObject$9(_))this.tokensMap=clone(_);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=EOF;const nt=has$1(_,"modes")?flatten$1(values(_.modes)):values(_),rt=every(nt,it=>isEmpty(it.categoryMatches));this.tokenMatcher=rt?tokenStructuredMatcherNoCategories:tokenStructuredMatcher,augmentTokenTypes(values(this.tokensMap))}defineRule(_,tt,nt){if(this.selfAnalysisDone)throw Error(`Grammar rule <${_}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const rt=has$1(nt,"resyncEnabled")?nt.resyncEnabled:DEFAULT_RULE_CONFIG.resyncEnabled,it=has$1(nt,"recoveryValueFunc")?nt.recoveryValueFunc:DEFAULT_RULE_CONFIG.recoveryValueFunc,at=this.ruleShortNameIdx<<BITS_FOR_METHOD_TYPE+BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[at]=_,this.fullRuleNameToShort[_]=at;let ot;return this.outputCst===!0?ot=function(...ct){try{this.ruleInvocationStateUpdate(at,_,this.subruleIdx),tt.apply(this,ct);const ut=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(ut),ut}catch(ut){return this.invokeRuleCatch(ut,rt,it)}finally{this.ruleFinallyStateUpdate()}}:ot=function(...ct){try{return this.ruleInvocationStateUpdate(at,_,this.subruleIdx),tt.apply(this,ct)}catch(ut){return this.invokeRuleCatch(ut,rt,it)}finally{this.ruleFinallyStateUpdate()}},Object.assign(ot,{ruleName:_,originalGrammarAction:tt})}invokeRuleCatch(_,tt,nt){const rt=this.RULE_STACK.length===1,it=tt&&!this.isBackTracking()&&this.recoveryEnabled;if(isRecognitionException(_)){const at=_;if(it){const ot=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(ot))if(at.resyncedTokens=this.reSyncTo(ot),this.outputCst){const st=this.CST_STACK[this.CST_STACK.length-1];return st.recoveredNode=!0,st}else return nt(_);else{if(this.outputCst){const st=this.CST_STACK[this.CST_STACK.length-1];st.recoveredNode=!0,at.partialCstResult=st}throw at}}else{if(rt)return this.moveToTerminatedState(),nt(_);throw at}}else throw _}optionInternal(_,tt){const nt=this.getKeyForAutomaticLookahead(OPTION_IDX,tt);return this.optionInternalLogic(_,tt,nt)}optionInternalLogic(_,tt,nt){let rt=this.getLaFuncFromCache(nt),it;if(typeof _!="function"){it=_.DEF;const at=_.GATE;if(at!==void 0){const ot=rt;rt=()=>at.call(this)&&ot.call(this)}}else it=_;if(rt.call(this)===!0)return it.call(this)}atLeastOneInternal(_,tt){const nt=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_IDX,_);return this.atLeastOneInternalLogic(_,tt,nt)}atLeastOneInternalLogic(_,tt,nt){let rt=this.getLaFuncFromCache(nt),it;if(typeof tt!="function"){it=tt.DEF;const at=tt.GATE;if(at!==void 0){const ot=rt;rt=()=>at.call(this)&&ot.call(this)}}else it=tt;if(rt.call(this)===!0){let at=this.doSingleRepetition(it);for(;rt.call(this)===!0&&at===!0;)at=this.doSingleRepetition(it)}else throw this.raiseEarlyExitException(_,PROD_TYPE.REPETITION_MANDATORY,tt.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[_,tt],rt,AT_LEAST_ONE_IDX,_,NextTerminalAfterAtLeastOneWalker)}atLeastOneSepFirstInternal(_,tt){const nt=this.getKeyForAutomaticLookahead(AT_LEAST_ONE_SEP_IDX,_);this.atLeastOneSepFirstInternalLogic(_,tt,nt)}atLeastOneSepFirstInternalLogic(_,tt,nt){const rt=tt.DEF,it=tt.SEP;if(this.getLaFuncFromCache(nt).call(this)===!0){rt.call(this);const ot=()=>this.tokenMatcher(this.LA(1),it);for(;this.tokenMatcher(this.LA(1),it)===!0;)this.CONSUME(it),rt.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[_,it,ot,rt,NextTerminalAfterAtLeastOneSepWalker],ot,AT_LEAST_ONE_SEP_IDX,_,NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(_,PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,tt.ERR_MSG)}manyInternal(_,tt){const nt=this.getKeyForAutomaticLookahead(MANY_IDX,_);return this.manyInternalLogic(_,tt,nt)}manyInternalLogic(_,tt,nt){let rt=this.getLaFuncFromCache(nt),it;if(typeof tt!="function"){it=tt.DEF;const ot=tt.GATE;if(ot!==void 0){const st=rt;rt=()=>ot.call(this)&&st.call(this)}}else it=tt;let at=!0;for(;rt.call(this)===!0&&at===!0;)at=this.doSingleRepetition(it);this.attemptInRepetitionRecovery(this.manyInternal,[_,tt],rt,MANY_IDX,_,NextTerminalAfterManyWalker,at)}manySepFirstInternal(_,tt){const nt=this.getKeyForAutomaticLookahead(MANY_SEP_IDX,_);this.manySepFirstInternalLogic(_,tt,nt)}manySepFirstInternalLogic(_,tt,nt){const rt=tt.DEF,it=tt.SEP;if(this.getLaFuncFromCache(nt).call(this)===!0){rt.call(this);const ot=()=>this.tokenMatcher(this.LA(1),it);for(;this.tokenMatcher(this.LA(1),it)===!0;)this.CONSUME(it),rt.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[_,it,ot,rt,NextTerminalAfterManySepWalker],ot,MANY_SEP_IDX,_,NextTerminalAfterManySepWalker)}}repetitionSepSecondInternal(_,tt,nt,rt,it){for(;nt();)this.CONSUME(tt),rt.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[_,tt,nt,rt,it],nt,AT_LEAST_ONE_SEP_IDX,_,it)}doSingleRepetition(_){const tt=this.getLexerPosition();return _.call(this),this.getLexerPosition()>tt}orInternal(_,tt){const nt=this.getKeyForAutomaticLookahead(OR_IDX,tt),rt=isArray$1$1(_)?_:_.DEF,at=this.getLaFuncFromCache(nt).call(this,rt);if(at!==void 0)return rt[at].ALT.call(this);this.raiseNoAltException(tt,_.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const _=this.LA(1),tt=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:_,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new NotAllInputParsedException(tt,_))}}subruleInternal(_,tt,nt){let rt;try{const it=nt!==void 0?nt.ARGS:void 0;return this.subruleIdx=tt,rt=_.apply(this,it),this.cstPostNonTerminal(rt,nt!==void 0&&nt.LABEL!==void 0?nt.LABEL:_.ruleName),rt}catch(it){throw this.subruleInternalError(it,nt,_.ruleName)}}subruleInternalError(_,tt,nt){throw isRecognitionException(_)&&_.partialCstResult!==void 0&&(this.cstPostNonTerminal(_.partialCstResult,tt!==void 0&&tt.LABEL!==void 0?tt.LABEL:nt),delete _.partialCstResult),_}consumeInternal(_,tt,nt){let rt;try{const it=this.LA(1);this.tokenMatcher(it,_)===!0?(this.consumeToken(),rt=it):this.consumeInternalError(_,it,nt)}catch(it){rt=this.consumeInternalRecovery(_,tt,it)}return this.cstPostTerminal(nt!==void 0&&nt.LABEL!==void 0?nt.LABEL:_.name,rt),rt}consumeInternalError(_,tt,nt){let rt;const it=this.LA(0);throw nt!==void 0&&nt.ERR_MSG?rt=nt.ERR_MSG:rt=this.errorMessageProvider.buildMismatchTokenMessage({expected:_,actual:tt,previous:it,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new MismatchedTokenException(rt,tt,it))}consumeInternalRecovery(_,tt,nt){if(this.recoveryEnabled&&nt.name==="MismatchedTokenException"&&!this.isBackTracking()){const rt=this.getFollowsForInRuleRecovery(_,tt);try{return this.tryInRuleRecovery(_,rt)}catch(it){throw it.name===IN_RULE_RECOVERY_EXCEPTION?nt:it}}else throw nt}saveRecogState(){const _=this.errors,tt=clone(this.RULE_STACK);return{errors:_,lexerState:this.exportLexerState(),RULE_STACK:tt,CST_STACK:this.CST_STACK}}reloadRecogState(_){this.errors=_.errors,this.importLexerState(_.lexerState),this.RULE_STACK=_.RULE_STACK}ruleInvocationStateUpdate(_,tt,nt){this.RULE_OCCURRENCE_STACK.push(nt),this.RULE_STACK.push(_),this.cstInvocationStateUpdate(tt)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const _=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[_]}shortRuleNameToFullName(_){return this.shortRuleNameToFull[_]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),EOF)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class ErrorHandler{initErrorHandler(_){this._errors=[],this.errorMessageProvider=has$1(_,"errorMessageProvider")?_.errorMessageProvider:DEFAULT_PARSER_CONFIG.errorMessageProvider}SAVE_ERROR(_){if(isRecognitionException(_))return _.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:clone(this.RULE_OCCURRENCE_STACK)},this._errors.push(_),_;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return clone(this._errors)}set errors(_){this._errors=_}raiseEarlyExitException(_,tt,nt){const rt=this.getCurrRuleFullName(),it=this.getGAstProductions()[rt],ot=getLookaheadPathsForOptionalProd(_,it,tt,this.maxLookahead)[0],st=[];for(let ct=1;ct<=this.maxLookahead;ct++)st.push(this.LA(ct));const lt=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:ot,actual:st,previous:this.LA(0),customUserDescription:nt,ruleName:rt});throw this.SAVE_ERROR(new EarlyExitException(lt,this.LA(1),this.LA(0)))}raiseNoAltException(_,tt){const nt=this.getCurrRuleFullName(),rt=this.getGAstProductions()[nt],it=getLookaheadPathsForOr(_,rt,this.maxLookahead),at=[];for(let lt=1;lt<=this.maxLookahead;lt++)at.push(this.LA(lt));const ot=this.LA(0),st=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:it,actual:at,previous:ot,customUserDescription:tt,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new NoViableAltException(st,this.LA(1),ot))}}class ContentAssist{initContentAssist(){}computeContentAssist(_,tt){const nt=this.gastProductionsCache[_];if(isUndefined(nt))throw Error(`Rule ->${_}<- does not exist in this grammar.`);return nextPossibleTokensAfter([nt],tt,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(_){const tt=head(_.ruleStack),rt=this.getGAstProductions()[tt];return new NextAfterTokenWalker(rt,_).startWalking()}}const RECORDING_NULL_OBJECT={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(RECORDING_NULL_OBJECT);const HANDLE_SEPARATOR=!0,MAX_METHOD_IDX=Math.pow(2,BITS_FOR_OCCURRENCE_IDX)-1,RFT=createToken({name:"RECORDING_PHASE_TOKEN",pattern:Lexer.NA});augmentTokenTypes([RFT]);const RECORDING_PHASE_TOKEN=createTokenInstance(RFT,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(RECORDING_PHASE_TOKEN);const RECORDING_PHASE_CSTNODE={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class GastRecorder{initGastRecorder(_){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let _=0;_<10;_++){const tt=_>0?_:"";this[`CONSUME${tt}`]=function(nt,rt){return this.consumeInternalRecord(nt,_,rt)},this[`SUBRULE${tt}`]=function(nt,rt){return this.subruleInternalRecord(nt,_,rt)},this[`OPTION${tt}`]=function(nt){return this.optionInternalRecord(nt,_)},this[`OR${tt}`]=function(nt){return this.orInternalRecord(nt,_)},this[`MANY${tt}`]=function(nt){this.manyInternalRecord(_,nt)},this[`MANY_SEP${tt}`]=function(nt){this.manySepFirstInternalRecord(_,nt)},this[`AT_LEAST_ONE${tt}`]=function(nt){this.atLeastOneInternalRecord(_,nt)},this[`AT_LEAST_ONE_SEP${tt}`]=function(nt){this.atLeastOneSepFirstInternalRecord(_,nt)}}this.consume=function(_,tt,nt){return this.consumeInternalRecord(tt,_,nt)},this.subrule=function(_,tt,nt){return this.subruleInternalRecord(tt,_,nt)},this.option=function(_,tt){return this.optionInternalRecord(tt,_)},this.or=function(_,tt){return this.orInternalRecord(tt,_)},this.many=function(_,tt){this.manyInternalRecord(_,tt)},this.atLeastOne=function(_,tt){this.atLeastOneInternalRecord(_,tt)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const _=this;for(let tt=0;tt<10;tt++){const nt=tt>0?tt:"";delete _[`CONSUME${nt}`],delete _[`SUBRULE${nt}`],delete _[`OPTION${nt}`],delete _[`OR${nt}`],delete _[`MANY${nt}`],delete _[`MANY_SEP${nt}`],delete _[`AT_LEAST_ONE${nt}`],delete _[`AT_LEAST_ONE_SEP${nt}`]}delete _.consume,delete _.subrule,delete _.option,delete _.or,delete _.many,delete _.atLeastOne,delete _.ACTION,delete _.BACKTRACK,delete _.LA})}ACTION_RECORD(_){}BACKTRACK_RECORD(_,tt){return()=>!0}LA_RECORD(_){return END_OF_FILE}topLevelRuleRecord(_,tt){try{const nt=new Rule$1({definition:[],name:_});return nt.name=_,this.recordingProdStack.push(nt),tt.call(this),this.recordingProdStack.pop(),nt}catch(nt){if(nt.KNOWN_RECORDER_ERROR!==!0)try{nt.message=nt.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw nt}throw nt}}optionInternalRecord(_,tt){return recordProd.call(this,Option,_,tt)}atLeastOneInternalRecord(_,tt){recordProd.call(this,RepetitionMandatory,tt,_)}atLeastOneSepFirstInternalRecord(_,tt){recordProd.call(this,RepetitionMandatoryWithSeparator,tt,_,HANDLE_SEPARATOR)}manyInternalRecord(_,tt){recordProd.call(this,Repetition,tt,_)}manySepFirstInternalRecord(_,tt){recordProd.call(this,RepetitionWithSeparator,tt,_,HANDLE_SEPARATOR)}orInternalRecord(_,tt){return recordOrProd.call(this,_,tt)}subruleInternalRecord(_,tt,nt){if(assertMethodIdxIsValid(tt),!_||has$1(_,"ruleName")===!1){const ot=new Error(`<SUBRULE${getIdxSuffix(tt)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(_)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw ot.KNOWN_RECORDER_ERROR=!0,ot}const rt=last(this.recordingProdStack),it=_.ruleName,at=new NonTerminal({idx:tt,nonTerminalName:it,label:nt==null?void 0:nt.LABEL,referencedRule:void 0});return rt.definition.push(at),this.outputCst?RECORDING_PHASE_CSTNODE:RECORDING_NULL_OBJECT}consumeInternalRecord(_,tt,nt){if(assertMethodIdxIsValid(tt),!hasShortKeyProperty(_)){const at=new Error(`<CONSUME${getIdxSuffix(tt)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(_)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw at.KNOWN_RECORDER_ERROR=!0,at}const rt=last(this.recordingProdStack),it=new Terminal({idx:tt,terminalType:_,label:nt==null?void 0:nt.LABEL});return rt.definition.push(it),RECORDING_PHASE_TOKEN}}function recordProd(_e,_,tt,nt=!1){assertMethodIdxIsValid(tt);const rt=last(this.recordingProdStack),it=isFunction(_)?_:_.DEF,at=new _e({definition:[],idx:tt});return nt&&(at.separator=_.SEP),has$1(_,"MAX_LOOKAHEAD")&&(at.maxLookahead=_.MAX_LOOKAHEAD),this.recordingProdStack.push(at),it.call(this),rt.definition.push(at),this.recordingProdStack.pop(),RECORDING_NULL_OBJECT}function recordOrProd(_e,_){assertMethodIdxIsValid(_);const tt=last(this.recordingProdStack),nt=isArray$1$1(_e)===!1,rt=nt===!1?_e:_e.DEF,it=new Alternation({definition:[],idx:_,ignoreAmbiguities:nt&&_e.IGNORE_AMBIGUITIES===!0});has$1(_e,"MAX_LOOKAHEAD")&&(it.maxLookahead=_e.MAX_LOOKAHEAD);const at=some(rt,ot=>isFunction(ot.GATE));return it.hasPredicates=at,tt.definition.push(it),forEach(rt,ot=>{const st=new Alternative({definition:[]});it.definition.push(st),has$1(ot,"IGNORE_AMBIGUITIES")?st.ignoreAmbiguities=ot.IGNORE_AMBIGUITIES:has$1(ot,"GATE")&&(st.ignoreAmbiguities=!0),this.recordingProdStack.push(st),ot.ALT.call(this),this.recordingProdStack.pop()}),RECORDING_NULL_OBJECT}function getIdxSuffix(_e){return _e===0?"":`${_e}`}function assertMethodIdxIsValid(_e){if(_e<0||_e>MAX_METHOD_IDX){const _=new Error(`Invalid DSL Method idx value: <${_e}>
	Idx value must be a none negative value smaller than ${MAX_METHOD_IDX+1}`);throw _.KNOWN_RECORDER_ERROR=!0,_}}class PerformanceTracer{initPerformanceTracer(_){if(has$1(_,"traceInitPerf")){const tt=_.traceInitPerf,nt=typeof tt=="number";this.traceInitMaxIdent=nt?tt:1/0,this.traceInitPerf=nt?tt>0:tt}else this.traceInitMaxIdent=0,this.traceInitPerf=DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(_,tt){if(this.traceInitPerf===!0){this.traceInitIndent++;const nt=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${nt}--> <${_}>`);const{time:rt,value:it}=timer$1(tt),at=rt>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&at(`${nt}<-- <${_}> time: ${rt}ms`),this.traceInitIndent--,it}else return tt()}}function applyMixins(_e,_){_.forEach(tt=>{const nt=tt.prototype;Object.getOwnPropertyNames(nt).forEach(rt=>{if(rt==="constructor")return;const it=Object.getOwnPropertyDescriptor(nt,rt);it&&(it.get||it.set)?Object.defineProperty(_e.prototype,rt,it):_e.prototype[rt]=tt.prototype[rt]})})}const END_OF_FILE=createTokenInstance(EOF,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(END_OF_FILE);const DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var ParserDefinitionErrorType;(function(_e){_e[_e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",_e[_e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",_e[_e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",_e[_e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",_e[_e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",_e[_e.LEFT_RECURSION=5]="LEFT_RECURSION",_e[_e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",_e[_e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",_e[_e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",_e[_e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",_e[_e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",_e[_e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",_e[_e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",_e[_e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(ParserDefinitionErrorType||(ParserDefinitionErrorType={}));class Parser{static performSelfAnalysis(_){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let _;this.selfAnalysisDone=!0;const tt=this.className;this.TRACE_INIT("toFastProps",()=>{toFastProperties(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),forEach(this.definedRulesNames,rt=>{const at=this[rt].originalGrammarAction;let ot;this.TRACE_INIT(`${rt} Rule`,()=>{ot=this.topLevelRuleRecord(rt,at)}),this.gastProductionsCache[rt]=ot})}finally{this.disableRecording()}});let nt=[];if(this.TRACE_INIT("Grammar Resolving",()=>{nt=resolveGrammar({rules:values(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(nt)}),this.TRACE_INIT("Grammar Validations",()=>{if(isEmpty(nt)&&this.skipValidations===!1){const rt=validateGrammar({rules:values(this.gastProductionsCache),tokenTypes:values(this.tokensMap),errMsgProvider:defaultGrammarValidatorErrorProvider,grammarName:tt}),it=validateLookahead({lookaheadStrategy:this.lookaheadStrategy,rules:values(this.gastProductionsCache),tokenTypes:values(this.tokensMap),grammarName:tt});this.definitionErrors=this.definitionErrors.concat(rt,it)}}),isEmpty(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const rt=computeAllProdsFollows(values(this.gastProductionsCache));this.resyncFollows=rt}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var rt,it;(it=(rt=this.lookaheadStrategy).initialize)===null||it===void 0||it.call(rt,{rules:values(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(values(this.gastProductionsCache))})),!Parser.DEFER_DEFINITION_ERRORS_HANDLING&&!isEmpty(this.definitionErrors))throw _=map(this.definitionErrors,rt=>rt.message),new Error(`Parser Definition Errors detected:
 ${_.join(`
-------------------------------
`)}`)})}constructor(_,tt){this.definitionErrors=[],this.selfAnalysisDone=!1;const nt=this;if(nt.initErrorHandler(tt),nt.initLexerAdapter(),nt.initLooksAhead(tt),nt.initRecognizerEngine(_,tt),nt.initRecoverable(tt),nt.initTreeBuilder(tt),nt.initContentAssist(),nt.initGastRecorder(tt),nt.initPerformanceTracer(tt),has$1(tt,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=has$1(tt,"skipValidations")?tt.skipValidations:DEFAULT_PARSER_CONFIG.skipValidations}}Parser.DEFER_DEFINITION_ERRORS_HANDLING=!1;applyMixins(Parser,[Recoverable,LooksAhead,TreeBuilder,LexerAdapter,RecognizerEngine,RecognizerApi,ErrorHandler,ContentAssist,GastRecorder,PerformanceTracer]);class WorkerPool{constructor(_=4){this.pool=_,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(_){if(!this.workers[_]){const tt=this.workerCreator();tt.addEventListener("message",this._onMessage.bind(this,_)),this.workers[_]=tt}}_getIdleWorker(){for(let _=0;_<this.pool;_++)if(!(this.workerStatus&1<<_))return _;return-1}_onMessage(_,tt){const nt=this.workersResolve[_];if(nt&&nt(tt),this.queue.length){const{resolve:rt,msg:it,transfer:at}=this.queue.shift();this.workersResolve[_]=rt,this.workers[_].postMessage(it,at)}else this.workerStatus^=1<<_}setWorkerCreator(_){this.workerCreator=_}setWorkerLimit(_){this.pool=_}postMessage(_,tt){return new Promise(nt=>{const rt=this._getIdleWorker();rt!==-1?(this._initWorker(rt),this.workerStatus|=1<<rt,this.workersResolve[rt]=nt,this.workers[rt].postMessage(_,tt)):this.queue.push({resolve:nt,msg:_,transfer:tt})})}dispose(){this.workers.forEach(_=>_.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}class CompressedArrayTexture extends CompressedTexture{constructor(_,tt,nt,rt,it,at){super(_,tt,nt,it,at),this.isCompressedArrayTexture=!0,this.image.depth=rt,this.wrapR=ClampToEdgeWrapping}}const _taskCache$3=new WeakMap;let _activeLoaders=0,_zstd;const _KTX2Loader=class extends Loader$1{constructor(_e){super(_e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(_e){return this.transcoderPath=_e,this}setWorkerLimit(_e){return this.workerPool.setWorkerLimit(_e),this}detectSupport(_e){return this.workerConfig={astcSupported:_e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:_e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:_e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:_e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:_e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:_e.extensions.has("WEBGL_compressed_texture_pvrtc")||_e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},_e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const _e=new FileLoader(this.manager);_e.setPath(this.transcoderPath),_e.setWithCredentials(this.withCredentials);const _=_e.loadAsync("basis_transcoder.js"),tt=new FileLoader(this.manager);tt.setPath(this.transcoderPath),tt.setResponseType("arraybuffer"),tt.setWithCredentials(this.withCredentials);const nt=tt.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([_,nt]).then(([rt,it])=>{const at=_KTX2Loader.BasisWorker.toString(),ot=["/* constants */","let _EngineFormat = "+JSON.stringify(_KTX2Loader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(_KTX2Loader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(_KTX2Loader.BasisFormat),"/* basis_transcoder.js */",rt,"/* worker */",at.substring(at.indexOf("{")+1,at.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ot])),this.transcoderBinary=it,this.workerPool.setWorkerCreator(()=>{const st=new Worker(this.workerSourceURL),lt=this.transcoderBinary.slice(0);return st.postMessage({type:"init",config:this.workerConfig,transcoderBinary:lt},[lt]),st})}),_activeLoaders>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_activeLoaders++}return this.transcoderPending}load(_e,_,tt,nt){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const rt=new FileLoader(this.manager);rt.setResponseType("arraybuffer"),rt.setWithCredentials(this.withCredentials),rt.load(_e,it=>{if(_taskCache$3.has(it))return _taskCache$3.get(it).promise.then(_).catch(nt);this._createTexture(it).then(at=>_?_(at):null).catch(nt)},tt,nt)}_createTextureFrom(_e,_){const{mipmaps:tt,width:nt,height:rt,format:it,type:at,error:ot,dfdTransferFn:st,dfdFlags:lt}=_e;if(at==="error")return Promise.reject(ot);const ct=_.layerCount>1?new CompressedArrayTexture(tt,nt,rt,_.layerCount,it,UnsignedByteType):new CompressedTexture(tt,nt,rt,it,UnsignedByteType);return ct.minFilter=tt.length===1?LinearFilter:LinearMipmapLinearFilter,ct.magFilter=LinearFilter,ct.generateMipmaps=!1,ct.needsUpdate=!0,"colorSpace"in ct?ct.colorSpace=st===KHR_DF_TRANSFER_SRGB?"srgb":"srgb-linear":ct.encoding=st===KHR_DF_TRANSFER_SRGB?3001:3e3,ct.premultiplyAlpha=!!(lt&KHR_DF_FLAG_ALPHA_PREMULTIPLIED),ct}async _createTexture(_e,_={}){const tt=read(new Uint8Array(_e));if(tt.vkFormat!==VK_FORMAT_UNDEFINED)return createDataTexture(tt);const nt=_,rt=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:_e,taskConfig:nt},[_e])).then(it=>this._createTextureFrom(it.data,tt));return _taskCache$3.set(_e,{promise:rt}),rt}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_activeLoaders--,this}};let KTX2Loader=_KTX2Loader;__publicField(KTX2Loader,"BasisFormat",{ETC1S:0,UASTC_4x4:1});__publicField(KTX2Loader,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});__publicField(KTX2Loader,"EngineFormat",{RGBAFormat,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format});__publicField(KTX2Loader,"BasisWorker",function(){let _e,_,tt;const nt=_EngineFormat,rt=_TranscoderFormat,it=_BasisFormat;self.addEventListener("message",function(gt){const xt=gt.data;switch(xt.type){case"init":_e=xt.config,at(xt.transcoderBinary);break;case"transcode":_.then(()=>{try{const{width:yt,height:mt,hasAlpha:At,mipmaps:vt,format:Et,dfdTransferFn:Ct,dfdFlags:Tt}=ot(xt.buffer),bt=[];for(let It=0;It<vt.length;++It)bt.push(vt[It].data.buffer);self.postMessage({type:"transcode",id:xt.id,width:yt,height:mt,hasAlpha:At,mipmaps:vt,format:Et,dfdTransferFn:Ct,dfdFlags:Tt},bt)}catch(yt){console.error(yt),self.postMessage({type:"error",id:xt.id,error:yt.message})}});break}});function at(gt){_=new Promise(xt=>{tt={wasmBinary:gt,onRuntimeInitialized:xt},BASIS(tt)}).then(()=>{tt.initializeBasis(),tt.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function ot(gt){const xt=new tt.KTX2File(new Uint8Array(gt));function yt(){xt.close(),xt.delete()}if(!xt.isValid())throw yt(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const mt=xt.isUASTC()?it.UASTC_4x4:it.ETC1S,At=xt.getWidth(),vt=xt.getHeight(),Et=xt.getLayers()||1,Ct=xt.getLevels(),Tt=xt.getHasAlpha(),bt=xt.getDFDTransferFunc(),It=xt.getDFDFlags(),{transcoderFormat:wt,engineFormat:Rt}=ut(mt,At,vt,Tt);if(!At||!vt||!Ct)throw yt(),new Error("THREE.KTX2Loader:	Invalid texture");if(!xt.startTranscoding())throw yt(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Ft=[];for(let Ut=0;Ut<Ct;Ut++){const Gt=[];let Ht,jt;for(let Xt=0;Xt<Et;Xt++){const Jt=xt.getImageLevelInfo(Ut,Xt,0);Ht=Jt.origWidth<4?Jt.origWidth:Jt.width,jt=Jt.origHeight<4?Jt.origHeight:Jt.height;const Dt=new Uint8Array(xt.getImageTranscodedSizeInBytes(Ut,Xt,0,wt));if(!xt.transcodeImage(Dt,Ut,Xt,0,wt,0,-1,-1))throw yt(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Gt.push(Dt)}Ft.push({data:pt(Gt),width:Ht,height:jt})}return yt(),{width:At,height:vt,hasAlpha:Tt,mipmaps:Ft,format:Rt,dfdTransferFn:bt,dfdFlags:It}}const st=[{if:"astcSupported",basisFormat:[it.UASTC_4x4],transcoderFormat:[rt.ASTC_4x4,rt.ASTC_4x4],engineFormat:[nt.RGBA_ASTC_4x4_Format,nt.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.BC7_M5,rt.BC7_M5],engineFormat:[nt.RGBA_BPTC_Format,nt.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.BC1,rt.BC3],engineFormat:[nt.RGB_S3TC_DXT1_Format,nt.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.ETC1,rt.ETC2],engineFormat:[nt.RGB_ETC2_Format,nt.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.ETC1],engineFormat:[nt.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.PVRTC1_4_RGB,rt.PVRTC1_4_RGBA],engineFormat:[nt.RGB_PVRTC_4BPPV1_Format,nt.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],lt=st.sort(function(gt,xt){return gt.priorityETC1S-xt.priorityETC1S}),ct=st.sort(function(gt,xt){return gt.priorityUASTC-xt.priorityUASTC});function ut(gt,xt,yt,mt){let At,vt;const Et=gt===it.ETC1S?lt:ct;for(let Ct=0;Ct<Et.length;Ct++){const Tt=Et[Ct];if(_e[Tt.if]&&Tt.basisFormat.includes(gt)&&!(mt&&Tt.transcoderFormat.length<2)&&!(Tt.needsPowerOfTwo&&!(ft(xt)&&ft(yt))))return At=Tt.transcoderFormat[mt?1:0],vt=Tt.engineFormat[mt?1:0],{transcoderFormat:At,engineFormat:vt}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),At=rt.RGBA32,vt=nt.RGBAFormat,{transcoderFormat:At,engineFormat:vt}}function ft(gt){return gt<=2?!0:(gt&gt-1)===0&&gt!==0}function pt(gt){let xt=0;for(let At=0;At<gt.length;At++){const vt=gt[At];xt+=vt.byteLength}const yt=new Uint8Array(xt);let mt=0;for(let At=0;At<gt.length;At++){const vt=gt[At];yt.set(vt,mt),mt+=vt.byteLength}return yt}});const FORMAT_MAP={[VK_FORMAT_R32G32B32A32_SFLOAT]:RGBAFormat,[VK_FORMAT_R16G16B16A16_SFLOAT]:RGBAFormat,[VK_FORMAT_R8G8B8A8_UNORM]:RGBAFormat,[VK_FORMAT_R8G8B8A8_SRGB]:RGBAFormat,[VK_FORMAT_R32G32_SFLOAT]:RGFormat,[VK_FORMAT_R16G16_SFLOAT]:RGFormat,[VK_FORMAT_R8G8_UNORM]:RGFormat,[VK_FORMAT_R8G8_SRGB]:RGFormat,[VK_FORMAT_R32_SFLOAT]:RedFormat,[VK_FORMAT_R16_SFLOAT]:RedFormat,[VK_FORMAT_R8_SRGB]:RedFormat,[VK_FORMAT_R8_UNORM]:RedFormat},TYPE_MAP={[VK_FORMAT_R32G32B32A32_SFLOAT]:FloatType,[VK_FORMAT_R16G16B16A16_SFLOAT]:HalfFloatType,[VK_FORMAT_R8G8B8A8_UNORM]:UnsignedByteType,[VK_FORMAT_R8G8B8A8_SRGB]:UnsignedByteType,[VK_FORMAT_R32G32_SFLOAT]:FloatType,[VK_FORMAT_R16G16_SFLOAT]:HalfFloatType,[VK_FORMAT_R8G8_UNORM]:UnsignedByteType,[VK_FORMAT_R8G8_SRGB]:UnsignedByteType,[VK_FORMAT_R32_SFLOAT]:FloatType,[VK_FORMAT_R16_SFLOAT]:HalfFloatType,[VK_FORMAT_R8_SRGB]:UnsignedByteType,[VK_FORMAT_R8_UNORM]:UnsignedByteType},ENCODING_MAP={[VK_FORMAT_R8G8B8A8_SRGB]:3001,[VK_FORMAT_R8G8_SRGB]:3001,[VK_FORMAT_R8_SRGB]:3001};async function createDataTexture(_e){const{vkFormat:_,pixelWidth:tt,pixelHeight:nt,pixelDepth:rt}=_e;if(FORMAT_MAP[_]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const it=_e.levels[0];let at,ot;if(_e.supercompressionScheme===KHR_SUPERCOMPRESSION_NONE)at=it.levelData;else if(_e.supercompressionScheme===KHR_SUPERCOMPRESSION_ZSTD)_zstd||(_zstd=new Promise(async lt=>{const ct=new Q$1;await ct.init(),lt(ct)})),at=(await _zstd).decode(it.levelData,it.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");TYPE_MAP[_]===FloatType?ot=new Float32Array(at.buffer,at.byteOffset,at.byteLength/Float32Array.BYTES_PER_ELEMENT):TYPE_MAP[_]===HalfFloatType?ot=new Uint16Array(at.buffer,at.byteOffset,at.byteLength/Uint16Array.BYTES_PER_ELEMENT):ot=at;const st=rt===0?new DataTexture(ot,tt,nt):new Data3DTexture(ot,tt,nt,rt);return st.type=TYPE_MAP[_],st.format=FORMAT_MAP[_],st.encoding=ENCODING_MAP[_]||3e3,st.needsUpdate=!0,Promise.resolve(st)}class RGBELoader extends DataTextureLoader{constructor(_){super(_),this.type=HalfFloatType}parse(_){const ot=function(vt,Et){switch(vt){case 1:console.error("THREE.RGBELoader Read Error: "+(Et||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(Et||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(Et||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(Et||""))}return-1},ut=`
`,ft=function(vt,Et,Ct){Et=Et||1024;let bt=vt.pos,It=-1,wt=0,Rt="",Ft=String.fromCharCode.apply(null,new Uint16Array(vt.subarray(bt,bt+128)));for(;0>(It=Ft.indexOf(ut))&&wt<Et&&bt<vt.byteLength;)Rt+=Ft,wt+=Ft.length,bt+=128,Ft+=String.fromCharCode.apply(null,new Uint16Array(vt.subarray(bt,bt+128)));return-1<It?(Ct!==!1&&(vt.pos+=wt+It+1),Rt+Ft.slice(0,It)):!1},pt=function(vt){const Et=/^#\?(\S+)/,Ct=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Tt=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,bt=/^\s*FORMAT=(\S+)\s*$/,It=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,wt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Rt,Ft;if(vt.pos>=vt.byteLength||!(Rt=ft(vt)))return ot(1,"no header found");if(!(Ft=Rt.match(Et)))return ot(3,"bad initial token");for(wt.valid|=1,wt.programtype=Ft[1],wt.string+=Rt+`
`;Rt=ft(vt),Rt!==!1;){if(wt.string+=Rt+`
`,Rt.charAt(0)==="#"){wt.comments+=Rt+`
`;continue}if((Ft=Rt.match(Ct))&&(wt.gamma=parseFloat(Ft[1])),(Ft=Rt.match(Tt))&&(wt.exposure=parseFloat(Ft[1])),(Ft=Rt.match(bt))&&(wt.valid|=2,wt.format=Ft[1]),(Ft=Rt.match(It))&&(wt.valid|=4,wt.height=parseInt(Ft[1],10),wt.width=parseInt(Ft[2],10)),wt.valid&2&&wt.valid&4)break}return wt.valid&2?wt.valid&4?wt:ot(3,"missing image size specifier"):ot(3,"missing format specifier")},gt=function(vt,Et,Ct){const Tt=Et;if(Tt<8||Tt>32767||vt[0]!==2||vt[1]!==2||vt[2]&128)return new Uint8Array(vt);if(Tt!==(vt[2]<<8|vt[3]))return ot(3,"wrong scanline width");const bt=new Uint8Array(4*Et*Ct);if(!bt.length)return ot(4,"unable to allocate buffer space");let It=0,wt=0;const Rt=4*Tt,Ft=new Uint8Array(4),Ut=new Uint8Array(Rt);let Gt=Ct;for(;Gt>0&&wt<vt.byteLength;){if(wt+4>vt.byteLength)return ot(1);if(Ft[0]=vt[wt++],Ft[1]=vt[wt++],Ft[2]=vt[wt++],Ft[3]=vt[wt++],Ft[0]!=2||Ft[1]!=2||(Ft[2]<<8|Ft[3])!=Tt)return ot(3,"bad rgbe scanline format");let Ht=0,jt;for(;Ht<Rt&&wt<vt.byteLength;){jt=vt[wt++];const Jt=jt>128;if(Jt&&(jt-=128),jt===0||Ht+jt>Rt)return ot(3,"bad scanline data");if(Jt){const Dt=vt[wt++];for(let zt=0;zt<jt;zt++)Ut[Ht++]=Dt}else Ut.set(vt.subarray(wt,wt+jt),Ht),Ht+=jt,wt+=jt}const Xt=Tt;for(let Jt=0;Jt<Xt;Jt++){let Dt=0;bt[It]=Ut[Jt+Dt],Dt+=Tt,bt[It+1]=Ut[Jt+Dt],Dt+=Tt,bt[It+2]=Ut[Jt+Dt],Dt+=Tt,bt[It+3]=Ut[Jt+Dt],It+=4}Gt--}return bt},xt=function(vt,Et,Ct,Tt){const bt=vt[Et+3],It=Math.pow(2,bt-128)/255;Ct[Tt+0]=vt[Et+0]*It,Ct[Tt+1]=vt[Et+1]*It,Ct[Tt+2]=vt[Et+2]*It,Ct[Tt+3]=1},yt=function(vt,Et,Ct,Tt){const bt=vt[Et+3],It=Math.pow(2,bt-128)/255;Ct[Tt+0]=DataUtils.toHalfFloat(Math.min(vt[Et+0]*It,65504)),Ct[Tt+1]=DataUtils.toHalfFloat(Math.min(vt[Et+1]*It,65504)),Ct[Tt+2]=DataUtils.toHalfFloat(Math.min(vt[Et+2]*It,65504)),Ct[Tt+3]=DataUtils.toHalfFloat(1)},mt=new Uint8Array(_);mt.pos=0;const At=pt(mt);if(At!==-1){const vt=At.width,Et=At.height,Ct=gt(mt.subarray(mt.pos),vt,Et);if(Ct!==-1){let Tt,bt,It;switch(this.type){case FloatType:It=Ct.length/4;const wt=new Float32Array(It*4);for(let Ft=0;Ft<It;Ft++)xt(Ct,Ft*4,wt,Ft*4);Tt=wt,bt=FloatType;break;case HalfFloatType:It=Ct.length/4;const Rt=new Uint16Array(It*4);for(let Ft=0;Ft<It;Ft++)yt(Ct,Ft*4,Rt,Ft*4);Tt=Rt,bt=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:vt,height:Et,data:Tt,header:At.string,gamma:At.gamma,exposure:At.exposure,type:bt}}}return null}setDataType(_){return this.type=_,this}load(_,tt,nt,rt){function it(at,ot){switch(at.type){case FloatType:case HalfFloatType:"colorSpace"in at?at.colorSpace="srgb-linear":at.encoding=3e3,at.minFilter=LinearFilter,at.magFilter=LinearFilter,at.generateMipmaps=!1,at.flipY=!0;break}tt&&tt(at,ot)}return super.load(_,it,nt,rt)}}const hasColorSpace="colorSpace"in new Texture;class EXRLoader extends DataTextureLoader{constructor(_){super(_),this.type=HalfFloatType}parse(_){const wt=Math.pow(2.7182818,2.2);function Rt(Ot,Pt){for(var Qt=0,Kt=0;Kt<65536;++Kt)(Kt==0||Ot[Kt>>3]&1<<(Kt&7))&&(Pt[Qt++]=Kt);for(var Yt=Qt-1;Qt<65536;)Pt[Qt++]=0;return Yt}function Ft(Ot){for(var Pt=0;Pt<16384;Pt++)Ot[Pt]={},Ot[Pt].len=0,Ot[Pt].lit=0,Ot[Pt].p=null}const Ut={l:0,c:0,lc:0};function Gt(Ot,Pt,Qt,Kt,Yt){for(;Qt<Ot;)Pt=Pt<<8|kn(Kt,Yt),Qt+=8;Qt-=Ot,Ut.l=Pt>>Qt&(1<<Ot)-1,Ut.c=Pt,Ut.lc=Qt}const Ht=new Array(59);function jt(Ot){for(var Pt=0;Pt<=58;++Pt)Ht[Pt]=0;for(var Pt=0;Pt<65537;++Pt)Ht[Ot[Pt]]+=1;for(var Qt=0,Pt=58;Pt>0;--Pt){var Kt=Qt+Ht[Pt]>>1;Ht[Pt]=Qt,Qt=Kt}for(var Pt=0;Pt<65537;++Pt){var Yt=Ot[Pt];Yt>0&&(Ot[Pt]=Yt|Ht[Yt]++<<6)}}function Xt(Ot,Pt,Qt,Kt,Yt,en,En){for(var Sn=Qt,Pn=0,Bn=0;Yt<=en;Yt++){if(Sn.value-Qt.value>Kt)return!1;Gt(6,Pn,Bn,Ot,Sn);var On=Ut.l;if(Pn=Ut.c,Bn=Ut.lc,En[Yt]=On,On==63){if(Sn.value-Qt.value>Kt)throw"Something wrong with hufUnpackEncTable";Gt(8,Pn,Bn,Ot,Sn);var un=Ut.l+6;if(Pn=Ut.c,Bn=Ut.lc,Yt+un>en+1)throw"Something wrong with hufUnpackEncTable";for(;un--;)En[Yt++]=0;Yt--}else if(On>=59){var un=On-59+2;if(Yt+un>en+1)throw"Something wrong with hufUnpackEncTable";for(;un--;)En[Yt++]=0;Yt--}}jt(En)}function Jt(Ot){return Ot&63}function Dt(Ot){return Ot>>6}function zt(Ot,Pt,Qt,Kt){for(;Pt<=Qt;Pt++){var Yt=Dt(Ot[Pt]),en=Jt(Ot[Pt]);if(Yt>>en)throw"Invalid table entry";if(en>14){var En=Kt[Yt>>en-14];if(En.len)throw"Invalid table entry";if(En.lit++,En.p){var Sn=En.p;En.p=new Array(En.lit);for(var Pn=0;Pn<En.lit-1;++Pn)En.p[Pn]=Sn[Pn]}else En.p=new Array(1);En.p[En.lit-1]=Pt}else if(en)for(var Bn=0,Pn=1<<14-en;Pn>0;Pn--){var En=Kt[(Yt<<14-en)+Bn];if(En.len||En.p)throw"Invalid table entry";En.len=en,En.lit=Pt,Bn++}}return!0}const $t={c:0,lc:0};function Lt(Ot,Pt,Qt,Kt){Ot=Ot<<8|kn(Qt,Kt),Pt+=8,$t.c=Ot,$t.lc=Pt}const Vt={c:0,lc:0};function tn(Ot,Pt,Qt,Kt,Yt,en,En,Sn,Pn,Bn){if(Ot==Pt){Kt<8&&(Lt(Qt,Kt,Yt,En),Qt=$t.c,Kt=$t.lc),Kt-=8;var On=Qt>>Kt,On=new Uint8Array([On])[0];if(Pn.value+On>Bn)return!1;for(var un=Sn[Pn.value-1];On-- >0;)Sn[Pn.value++]=un}else if(Pn.value<Bn)Sn[Pn.value++]=Ot;else return!1;Vt.c=Qt,Vt.lc=Kt}function an(Ot){return Ot&65535}function on(Ot){var Pt=an(Ot);return Pt>32767?Pt-65536:Pt}const sn={a:0,b:0};function ln(Ot,Pt){var Qt=on(Ot),Kt=on(Pt),Yt=Kt,en=Qt+(Yt&1)+(Yt>>1),En=en,Sn=en-Yt;sn.a=En,sn.b=Sn}function cn(Ot,Pt){var Qt=an(Ot),Kt=an(Pt),Yt=Qt-(Kt>>1)&65535,en=Kt+Yt-32768&65535;sn.a=en,sn.b=Yt}function In(Ot,Pt,Qt,Kt,Yt,en,En){for(var Sn=En<16384,Pn=Qt>Yt?Yt:Qt,Bn=1,On;Bn<=Pn;)Bn<<=1;for(Bn>>=1,On=Bn,Bn>>=1;Bn>=1;){for(var un=0,er=un+en*(Yt-On),Kn=en*Bn,qn=en*On,or=Kt*Bn,fr=Kt*On,lr,Zn,hr,ir;un<=er;un+=qn){for(var gr=un,Dr=un+Kt*(Qt-On);gr<=Dr;gr+=fr){var pr=gr+or,Fr=gr+Kn,br=Fr+or;Sn?(ln(Ot[gr+Pt],Ot[Fr+Pt]),lr=sn.a,hr=sn.b,ln(Ot[pr+Pt],Ot[br+Pt]),Zn=sn.a,ir=sn.b,ln(lr,Zn),Ot[gr+Pt]=sn.a,Ot[pr+Pt]=sn.b,ln(hr,ir),Ot[Fr+Pt]=sn.a,Ot[br+Pt]=sn.b):(cn(Ot[gr+Pt],Ot[Fr+Pt]),lr=sn.a,hr=sn.b,cn(Ot[pr+Pt],Ot[br+Pt]),Zn=sn.a,ir=sn.b,cn(lr,Zn),Ot[gr+Pt]=sn.a,Ot[pr+Pt]=sn.b,cn(hr,ir),Ot[Fr+Pt]=sn.a,Ot[br+Pt]=sn.b)}if(Qt&Bn){var Fr=gr+Kn;Sn?ln(Ot[gr+Pt],Ot[Fr+Pt]):cn(Ot[gr+Pt],Ot[Fr+Pt]),lr=sn.a,Ot[Fr+Pt]=sn.b,Ot[gr+Pt]=lr}}if(Yt&Bn)for(var gr=un,Dr=un+Kt*(Qt-On);gr<=Dr;gr+=fr){var pr=gr+or;Sn?ln(Ot[gr+Pt],Ot[pr+Pt]):cn(Ot[gr+Pt],Ot[pr+Pt]),lr=sn.a,Ot[pr+Pt]=sn.b,Ot[gr+Pt]=lr}On=Bn,Bn>>=1}return un}function zn(Ot,Pt,Qt,Kt,Yt,en,En,Sn,Pn,Bn){for(var On=0,un=0,er=Sn,Kn=Math.trunc(Yt.value+(en+7)/8);Yt.value<Kn;)for(Lt(On,un,Qt,Yt),On=$t.c,un=$t.lc;un>=14;){var qn=On>>un-14&16383,or=Pt[qn];if(or.len)un-=or.len,tn(or.lit,En,On,un,Qt,Kt,Yt,Pn,Bn,er),On=Vt.c,un=Vt.lc;else{if(!or.p)throw"hufDecode issues";var fr;for(fr=0;fr<or.lit;fr++){for(var lr=Jt(Ot[or.p[fr]]);un<lr&&Yt.value<Kn;)Lt(On,un,Qt,Yt),On=$t.c,un=$t.lc;if(un>=lr&&Dt(Ot[or.p[fr]])==(On>>un-lr&(1<<lr)-1)){un-=lr,tn(or.p[fr],En,On,un,Qt,Kt,Yt,Pn,Bn,er),On=Vt.c,un=Vt.lc;break}}if(fr==or.lit)throw"hufDecode issues"}}var Zn=8-en&7;for(On>>=Zn,un-=Zn;un>0;){var or=Pt[On<<14-un&16383];if(or.len)un-=or.len,tn(or.lit,En,On,un,Qt,Kt,Yt,Pn,Bn,er),On=Vt.c,un=Vt.lc;else throw"hufDecode issues"}return!0}function yn(Ot,Pt,Qt,Kt,Yt,en){var En={value:0},Sn=Qt.value,Pn=Nn(Pt,Qt),Bn=Nn(Pt,Qt);Qt.value+=4;var On=Nn(Pt,Qt);if(Qt.value+=4,Pn<0||Pn>=65537||Bn<0||Bn>=65537)throw"Something wrong with HUF_ENCSIZE";var un=new Array(65537),er=new Array(16384);Ft(er);var Kn=Kt-(Qt.value-Sn);if(Xt(Ot,Pt,Qt,Kn,Pn,Bn,un),On>8*(Kt-(Qt.value-Sn)))throw"Something wrong with hufUncompress";zt(un,Pn,Bn,er),zn(un,er,Ot,Pt,Qt,On,Bn,en,Yt,En)}function Wt(Ot,Pt,Qt){for(var Kt=0;Kt<Qt;++Kt)Pt[Kt]=Ot[Pt[Kt]]}function _n(Ot){for(var Pt=1;Pt<Ot.length;Pt++){var Qt=Ot[Pt-1]+Ot[Pt]-128;Ot[Pt]=Qt}}function gn(Ot,Pt){for(var Qt=0,Kt=Math.floor((Ot.length+1)/2),Yt=0,en=Ot.length-1;!(Yt>en||(Pt[Yt++]=Ot[Qt++],Yt>en));)Pt[Yt++]=Ot[Kt++]}function vn(Ot){for(var Pt=Ot.byteLength,Qt=new Array,Kt=0,Yt=new DataView(Ot);Pt>0;){var en=Yt.getInt8(Kt++);if(en<0){var En=-en;Pt-=En+1;for(var Sn=0;Sn<En;Sn++)Qt.push(Yt.getUint8(Kt++))}else{var En=en;Pt-=2;for(var Pn=Yt.getUint8(Kt++),Sn=0;Sn<En+1;Sn++)Qt.push(Pn)}}return Qt}function mn(Ot,Pt,Qt,Kt,Yt,en){var pr=new DataView(en.buffer),En=Qt[Ot.idx[0]].width,Sn=Qt[Ot.idx[0]].height,Pn=3,Bn=Math.floor(En/8),On=Math.ceil(En/8),un=Math.ceil(Sn/8),er=En-(On-1)*8,Kn=Sn-(un-1)*8,qn={value:0},or=new Array(Pn),fr=new Array(Pn),lr=new Array(Pn),Zn=new Array(Pn),hr=new Array(Pn);for(let mr=0;mr<Pn;++mr)hr[mr]=Pt[Ot.idx[mr]],or[mr]=mr<1?0:or[mr-1]+On*un,fr[mr]=new Float32Array(64),lr[mr]=new Uint16Array(64),Zn[mr]=new Uint16Array(On*64);for(let mr=0;mr<un;++mr){var ir=8;mr==un-1&&(ir=Kn);var gr=8;for(let Br=0;Br<On;++Br){Br==On-1&&(gr=er);for(let vr=0;vr<Pn;++vr)lr[vr].fill(0),lr[vr][0]=Yt[or[vr]++],Wn(qn,Kt,lr[vr]),xn(lr[vr],fr[vr]),Dn(fr[vr]);Fn(fr);for(let vr=0;vr<Pn;++vr)bn(fr[vr],Zn[vr],Br*64)}let Gr=0;for(let Br=0;Br<Pn;++Br){const vr=Qt[Ot.idx[Br]].type;for(let zr=8*mr;zr<8*mr+ir;++zr){Gr=hr[Br][zr];for(let mo=0;mo<Bn;++mo){const qr=mo*64+(zr&7)*8;pr.setUint16(Gr+0*2*vr,Zn[Br][qr+0],!0),pr.setUint16(Gr+1*2*vr,Zn[Br][qr+1],!0),pr.setUint16(Gr+2*2*vr,Zn[Br][qr+2],!0),pr.setUint16(Gr+3*2*vr,Zn[Br][qr+3],!0),pr.setUint16(Gr+4*2*vr,Zn[Br][qr+4],!0),pr.setUint16(Gr+5*2*vr,Zn[Br][qr+5],!0),pr.setUint16(Gr+6*2*vr,Zn[Br][qr+6],!0),pr.setUint16(Gr+7*2*vr,Zn[Br][qr+7],!0),Gr+=8*2*vr}}if(Bn!=On)for(let zr=8*mr;zr<8*mr+ir;++zr){const mo=hr[Br][zr]+8*Bn*2*vr,qr=Bn*64+(zr&7)*8;for(let _o=0;_o<gr;++_o)pr.setUint16(mo+_o*2*vr,Zn[Br][qr+_o],!0)}}}for(var Dr=new Uint16Array(En),pr=new DataView(en.buffer),Fr=0;Fr<Pn;++Fr){Qt[Ot.idx[Fr]].decoded=!0;var br=Qt[Ot.idx[Fr]].type;if(Qt[Fr].type==2)for(var kr=0;kr<Sn;++kr){const mr=hr[Fr][kr];for(var $r=0;$r<En;++$r)Dr[$r]=pr.getUint16(mr+$r*2*br,!0);for(var $r=0;$r<En;++$r)pr.setFloat32(mr+$r*2*br,pn(Dr[$r]),!0)}}}function Wn(Ot,Pt,Qt){for(var Kt,Yt=1;Yt<64;)Kt=Pt[Ot.value],Kt==65280?Yt=64:Kt>>8==255?Yt+=Kt&255:(Qt[Yt]=Kt,Yt++),Ot.value++}function xn(Ot,Pt){Pt[0]=pn(Ot[0]),Pt[1]=pn(Ot[1]),Pt[2]=pn(Ot[5]),Pt[3]=pn(Ot[6]),Pt[4]=pn(Ot[14]),Pt[5]=pn(Ot[15]),Pt[6]=pn(Ot[27]),Pt[7]=pn(Ot[28]),Pt[8]=pn(Ot[2]),Pt[9]=pn(Ot[4]),Pt[10]=pn(Ot[7]),Pt[11]=pn(Ot[13]),Pt[12]=pn(Ot[16]),Pt[13]=pn(Ot[26]),Pt[14]=pn(Ot[29]),Pt[15]=pn(Ot[42]),Pt[16]=pn(Ot[3]),Pt[17]=pn(Ot[8]),Pt[18]=pn(Ot[12]),Pt[19]=pn(Ot[17]),Pt[20]=pn(Ot[25]),Pt[21]=pn(Ot[30]),Pt[22]=pn(Ot[41]),Pt[23]=pn(Ot[43]),Pt[24]=pn(Ot[9]),Pt[25]=pn(Ot[11]),Pt[26]=pn(Ot[18]),Pt[27]=pn(Ot[24]),Pt[28]=pn(Ot[31]),Pt[29]=pn(Ot[40]),Pt[30]=pn(Ot[44]),Pt[31]=pn(Ot[53]),Pt[32]=pn(Ot[10]),Pt[33]=pn(Ot[19]),Pt[34]=pn(Ot[23]),Pt[35]=pn(Ot[32]),Pt[36]=pn(Ot[39]),Pt[37]=pn(Ot[45]),Pt[38]=pn(Ot[52]),Pt[39]=pn(Ot[54]),Pt[40]=pn(Ot[20]),Pt[41]=pn(Ot[22]),Pt[42]=pn(Ot[33]),Pt[43]=pn(Ot[38]),Pt[44]=pn(Ot[46]),Pt[45]=pn(Ot[51]),Pt[46]=pn(Ot[55]),Pt[47]=pn(Ot[60]),Pt[48]=pn(Ot[21]),Pt[49]=pn(Ot[34]),Pt[50]=pn(Ot[37]),Pt[51]=pn(Ot[47]),Pt[52]=pn(Ot[50]),Pt[53]=pn(Ot[56]),Pt[54]=pn(Ot[59]),Pt[55]=pn(Ot[61]),Pt[56]=pn(Ot[35]),Pt[57]=pn(Ot[36]),Pt[58]=pn(Ot[48]),Pt[59]=pn(Ot[49]),Pt[60]=pn(Ot[57]),Pt[61]=pn(Ot[58]),Pt[62]=pn(Ot[62]),Pt[63]=pn(Ot[63])}function Dn(Ot){const Pt=.5*Math.cos(.7853975),Qt=.5*Math.cos(3.14159/16),Kt=.5*Math.cos(3.14159/8),Yt=.5*Math.cos(3*3.14159/16),en=.5*Math.cos(5*3.14159/16),En=.5*Math.cos(3*3.14159/8),Sn=.5*Math.cos(7*3.14159/16);for(var Pn=new Array(4),Bn=new Array(4),On=new Array(4),un=new Array(4),er=0;er<8;++er){var Kn=er*8;Pn[0]=Kt*Ot[Kn+2],Pn[1]=En*Ot[Kn+2],Pn[2]=Kt*Ot[Kn+6],Pn[3]=En*Ot[Kn+6],Bn[0]=Qt*Ot[Kn+1]+Yt*Ot[Kn+3]+en*Ot[Kn+5]+Sn*Ot[Kn+7],Bn[1]=Yt*Ot[Kn+1]-Sn*Ot[Kn+3]-Qt*Ot[Kn+5]-en*Ot[Kn+7],Bn[2]=en*Ot[Kn+1]-Qt*Ot[Kn+3]+Sn*Ot[Kn+5]+Yt*Ot[Kn+7],Bn[3]=Sn*Ot[Kn+1]-en*Ot[Kn+3]+Yt*Ot[Kn+5]-Qt*Ot[Kn+7],On[0]=Pt*(Ot[Kn+0]+Ot[Kn+4]),On[3]=Pt*(Ot[Kn+0]-Ot[Kn+4]),On[1]=Pn[0]+Pn[3],On[2]=Pn[1]-Pn[2],un[0]=On[0]+On[1],un[1]=On[3]+On[2],un[2]=On[3]-On[2],un[3]=On[0]-On[1],Ot[Kn+0]=un[0]+Bn[0],Ot[Kn+1]=un[1]+Bn[1],Ot[Kn+2]=un[2]+Bn[2],Ot[Kn+3]=un[3]+Bn[3],Ot[Kn+4]=un[3]-Bn[3],Ot[Kn+5]=un[2]-Bn[2],Ot[Kn+6]=un[1]-Bn[1],Ot[Kn+7]=un[0]-Bn[0]}for(var qn=0;qn<8;++qn)Pn[0]=Kt*Ot[16+qn],Pn[1]=En*Ot[16+qn],Pn[2]=Kt*Ot[48+qn],Pn[3]=En*Ot[48+qn],Bn[0]=Qt*Ot[8+qn]+Yt*Ot[24+qn]+en*Ot[40+qn]+Sn*Ot[56+qn],Bn[1]=Yt*Ot[8+qn]-Sn*Ot[24+qn]-Qt*Ot[40+qn]-en*Ot[56+qn],Bn[2]=en*Ot[8+qn]-Qt*Ot[24+qn]+Sn*Ot[40+qn]+Yt*Ot[56+qn],Bn[3]=Sn*Ot[8+qn]-en*Ot[24+qn]+Yt*Ot[40+qn]-Qt*Ot[56+qn],On[0]=Pt*(Ot[qn]+Ot[32+qn]),On[3]=Pt*(Ot[qn]-Ot[32+qn]),On[1]=Pn[0]+Pn[3],On[2]=Pn[1]-Pn[2],un[0]=On[0]+On[1],un[1]=On[3]+On[2],un[2]=On[3]-On[2],un[3]=On[0]-On[1],Ot[0+qn]=un[0]+Bn[0],Ot[8+qn]=un[1]+Bn[1],Ot[16+qn]=un[2]+Bn[2],Ot[24+qn]=un[3]+Bn[3],Ot[32+qn]=un[3]-Bn[3],Ot[40+qn]=un[2]-Bn[2],Ot[48+qn]=un[1]-Bn[1],Ot[56+qn]=un[0]-Bn[0]}function Fn(Ot){for(var Pt=0;Pt<64;++Pt){var Qt=Ot[0][Pt],Kt=Ot[1][Pt],Yt=Ot[2][Pt];Ot[0][Pt]=Qt+1.5747*Yt,Ot[1][Pt]=Qt-.1873*Kt-.4682*Yt,Ot[2][Pt]=Qt+1.8556*Kt}}function bn(Ot,Pt,Qt){for(var Kt=0;Kt<64;++Kt)Pt[Qt+Kt]=DataUtils.toHalfFloat(jn(Ot[Kt]))}function jn(Ot){return Ot<=1?Math.sign(Ot)*Math.pow(Math.abs(Ot),2.2):Math.sign(Ot)*Math.pow(wt,Math.abs(Ot)-1)}function Nt(Ot){return new DataView(Ot.array.buffer,Ot.offset.value,Ot.size)}function kt(Ot){var Pt=Ot.viewer.buffer.slice(Ot.offset.value,Ot.offset.value+Ot.size),Qt=new Uint8Array(vn(Pt)),Kt=new Uint8Array(Qt.length);return _n(Qt),gn(Qt,Kt),new DataView(Kt.buffer)}function rn(Ot){var Pt=Ot.array.slice(Ot.offset.value,Ot.offset.value+Ot.size),Qt=unzlibSync(Pt),Kt=new Uint8Array(Qt.length);return _n(Qt),gn(Qt,Kt),new DataView(Kt.buffer)}function Mn(Ot){for(var Pt=Ot.viewer,Qt={value:Ot.offset.value},Kt=new Uint16Array(Ot.width*Ot.scanlineBlockSize*(Ot.channels*Ot.type)),Yt=new Uint8Array(8192),en=0,En=new Array(Ot.channels),Sn=0;Sn<Ot.channels;Sn++)En[Sn]={},En[Sn].start=en,En[Sn].end=En[Sn].start,En[Sn].nx=Ot.width,En[Sn].ny=Ot.lines,En[Sn].size=Ot.type,en+=En[Sn].nx*En[Sn].ny*En[Sn].size;var Pn=An(Pt,Qt),Bn=An(Pt,Qt);if(Bn>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Pn<=Bn)for(var Sn=0;Sn<Bn-Pn+1;Sn++)Yt[Sn+Pn]=$n(Pt,Qt);var On=new Uint16Array(65536),un=Rt(Yt,On),er=Nn(Pt,Qt);yn(Ot.array,Pt,Qt,er,Kt,en);for(var Sn=0;Sn<Ot.channels;++Sn)for(var Kn=En[Sn],qn=0;qn<En[Sn].size;++qn)In(Kt,Kn.start+qn,Kn.nx,Kn.size,Kn.ny,Kn.nx*Kn.size,un);Wt(On,Kt,en);for(var or=0,fr=new Uint8Array(Kt.buffer.byteLength),lr=0;lr<Ot.lines;lr++)for(var Zn=0;Zn<Ot.channels;Zn++){var Kn=En[Zn],hr=Kn.nx*Kn.size,ir=new Uint8Array(Kt.buffer,Kn.end*2,hr*2);fr.set(ir,or),or+=hr*2,Kn.end+=hr}return new DataView(fr.buffer)}function wn(Ot){var Pt=Ot.array.slice(Ot.offset.value,Ot.offset.value+Ot.size),Qt=unzlibSync(Pt);const Kt=Ot.lines*Ot.channels*Ot.width,Yt=Ot.type==1?new Uint16Array(Kt):new Uint32Array(Kt);let en=0,En=0;const Sn=new Array(4);for(let Pn=0;Pn<Ot.lines;Pn++)for(let Bn=0;Bn<Ot.channels;Bn++){let On=0;switch(Ot.type){case 1:Sn[0]=en,Sn[1]=Sn[0]+Ot.width,en=Sn[1]+Ot.width;for(let un=0;un<Ot.width;++un){const er=Qt[Sn[0]++]<<8|Qt[Sn[1]++];On+=er,Yt[En]=On,En++}break;case 2:Sn[0]=en,Sn[1]=Sn[0]+Ot.width,Sn[2]=Sn[1]+Ot.width,en=Sn[2]+Ot.width;for(let un=0;un<Ot.width;++un){const er=Qt[Sn[0]++]<<24|Qt[Sn[1]++]<<16|Qt[Sn[2]++]<<8;On+=er,Yt[En]=On,En++}break}}return new DataView(Yt.buffer)}function Tn(Ot){var Pt=Ot.viewer,Qt={value:Ot.offset.value},Kt=new Uint8Array(Ot.width*Ot.lines*(Ot.channels*Ot.type*2)),Yt={version:Yn(Pt,Qt),unknownUncompressedSize:Yn(Pt,Qt),unknownCompressedSize:Yn(Pt,Qt),acCompressedSize:Yn(Pt,Qt),dcCompressedSize:Yn(Pt,Qt),rleCompressedSize:Yn(Pt,Qt),rleUncompressedSize:Yn(Pt,Qt),rleRawSize:Yn(Pt,Qt),totalAcUncompressedCount:Yn(Pt,Qt),totalDcUncompressedCount:Yn(Pt,Qt),acCompression:Yn(Pt,Qt)};if(Yt.version<2)throw"EXRLoader.parse: "+Lr.compression+" version "+Yt.version+" is unsupported";for(var en=new Array,En=An(Pt,Qt)-2;En>0;){var Sn=Gn(Pt.buffer,Qt),Pn=$n(Pt,Qt),Bn=Pn>>2&3,On=(Pn>>4)-1,un=new Int8Array([On])[0],er=$n(Pt,Qt);en.push({name:Sn,index:un,type:er,compression:Bn}),En-=Sn.length+3}for(var Kn=Lr.channels,qn=new Array(Ot.channels),or=0;or<Ot.channels;++or){var fr=qn[or]={},lr=Kn[or];fr.name=lr.name,fr.compression=0,fr.decoded=!1,fr.type=lr.pixelType,fr.pLinear=lr.pLinear,fr.width=Ot.width,fr.height=Ot.lines}for(var Zn={idx:new Array(3)},hr=0;hr<Ot.channels;++hr)for(var fr=qn[hr],or=0;or<en.length;++or){var ir=en[or];fr.name==ir.name&&(fr.compression=ir.compression,ir.index>=0&&(Zn.idx[ir.index]=hr),fr.offset=hr)}if(Yt.acCompressedSize>0)switch(Yt.acCompression){case 0:var pr=new Uint16Array(Yt.totalAcUncompressedCount);yn(Ot.array,Pt,Qt,Yt.acCompressedSize,pr,Yt.totalAcUncompressedCount);break;case 1:var gr=Ot.array.slice(Qt.value,Qt.value+Yt.totalAcUncompressedCount),Dr=unzlibSync(gr),pr=new Uint16Array(Dr.buffer);Qt.value+=Yt.totalAcUncompressedCount;break}if(Yt.dcCompressedSize>0){var Fr={array:Ot.array,offset:Qt,size:Yt.dcCompressedSize},br=new Uint16Array(rn(Fr).buffer);Qt.value+=Yt.dcCompressedSize}if(Yt.rleRawSize>0){var gr=Ot.array.slice(Qt.value,Qt.value+Yt.rleCompressedSize),Dr=unzlibSync(gr),kr=vn(Dr.buffer);Qt.value+=Yt.rleCompressedSize}for(var $r=0,mr=new Array(qn.length),or=0;or<mr.length;++or)mr[or]=new Array;for(var Gr=0;Gr<Ot.lines;++Gr)for(var Br=0;Br<qn.length;++Br)mr[Br].push($r),$r+=qn[Br].width*Ot.type*2;mn(Zn,mr,qn,pr,br,Kt);for(var or=0;or<qn.length;++or){var fr=qn[or];if(!fr.decoded)switch(fr.compression){case 2:for(var vr=0,zr=0,Gr=0;Gr<Ot.lines;++Gr){for(var mo=mr[or][vr],qr=0;qr<fr.width;++qr){for(var _o=0;_o<2*fr.type;++_o)Kt[mo++]=kr[zr+_o*fr.width*fr.height];zr++}vr++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Kt.buffer)}function Gn(Ot,Pt){for(var Qt=new Uint8Array(Ot),Kt=0;Qt[Pt.value+Kt]!=0;)Kt+=1;var Yt=new TextDecoder().decode(Qt.slice(Pt.value,Pt.value+Kt));return Pt.value=Pt.value+Kt+1,Yt}function Un(Ot,Pt,Qt){var Kt=new TextDecoder().decode(new Uint8Array(Ot).slice(Pt.value,Pt.value+Qt));return Pt.value=Pt.value+Qt,Kt}function dn(Ot,Pt){var Qt=Qn(Ot,Pt),Kt=Nn(Ot,Pt);return[Qt,Kt]}function Vn(Ot,Pt){var Qt=Nn(Ot,Pt),Kt=Nn(Ot,Pt);return[Qt,Kt]}function Qn(Ot,Pt){var Qt=Ot.getInt32(Pt.value,!0);return Pt.value=Pt.value+4,Qt}function Nn(Ot,Pt){var Qt=Ot.getUint32(Pt.value,!0);return Pt.value=Pt.value+4,Qt}function kn(Ot,Pt){var Qt=Ot[Pt.value];return Pt.value=Pt.value+1,Qt}function $n(Ot,Pt){var Qt=Ot.getUint8(Pt.value);return Pt.value=Pt.value+1,Qt}const Yn=function(Ot,Pt){let Qt;return"getBigInt64"in DataView.prototype?Qt=Number(Ot.getBigInt64(Pt.value,!0)):Qt=Ot.getUint32(Pt.value+4,!0)+Number(Ot.getUint32(Pt.value,!0)<<32),Pt.value+=8,Qt};function tr(Ot,Pt){var Qt=Ot.getFloat32(Pt.value,!0);return Pt.value+=4,Qt}function nn(Ot,Pt){return DataUtils.toHalfFloat(tr(Ot,Pt))}function pn(Ot){var Pt=(Ot&31744)>>10,Qt=Ot&1023;return(Ot>>15?-1:1)*(Pt?Pt===31?Qt?NaN:1/0:Math.pow(2,Pt-15)*(1+Qt/1024):6103515625e-14*(Qt/1024))}function An(Ot,Pt){var Qt=Ot.getUint16(Pt.value,!0);return Pt.value+=2,Qt}function Hn(Ot,Pt){return pn(An(Ot,Pt))}function Jn(Ot,Pt,Qt,Kt){for(var Yt=Qt.value,en=[];Qt.value<Yt+Kt-1;){var En=Gn(Pt,Qt),Sn=Qn(Ot,Qt),Pn=$n(Ot,Qt);Qt.value+=3;var Bn=Qn(Ot,Qt),On=Qn(Ot,Qt);en.push({name:En,pixelType:Sn,pLinear:Pn,xSampling:Bn,ySampling:On})}return Qt.value+=1,en}function Ar(Ot,Pt){var Qt=tr(Ot,Pt),Kt=tr(Ot,Pt),Yt=tr(Ot,Pt),en=tr(Ot,Pt),En=tr(Ot,Pt),Sn=tr(Ot,Pt),Pn=tr(Ot,Pt),Bn=tr(Ot,Pt);return{redX:Qt,redY:Kt,greenX:Yt,greenY:en,blueX:En,blueY:Sn,whiteX:Pn,whiteY:Bn}}function Er(Ot,Pt){var Qt=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Kt=$n(Ot,Pt);return Qt[Kt]}function Tr(Ot,Pt){var Qt=Nn(Ot,Pt),Kt=Nn(Ot,Pt),Yt=Nn(Ot,Pt),en=Nn(Ot,Pt);return{xMin:Qt,yMin:Kt,xMax:Yt,yMax:en}}function Rr(Ot,Pt){var Qt=["INCREASING_Y"],Kt=$n(Ot,Pt);return Qt[Kt]}function Pr(Ot,Pt){var Qt=tr(Ot,Pt),Kt=tr(Ot,Pt);return[Qt,Kt]}function Mr(Ot,Pt){var Qt=tr(Ot,Pt),Kt=tr(Ot,Pt),Yt=tr(Ot,Pt);return[Qt,Kt,Yt]}function _r(Ot,Pt,Qt,Kt,Yt){if(Kt==="string"||Kt==="stringvector"||Kt==="iccProfile")return Un(Pt,Qt,Yt);if(Kt==="chlist")return Jn(Ot,Pt,Qt,Yt);if(Kt==="chromaticities")return Ar(Ot,Qt);if(Kt==="compression")return Er(Ot,Qt);if(Kt==="box2i")return Tr(Ot,Qt);if(Kt==="lineOrder")return Rr(Ot,Qt);if(Kt==="float")return tr(Ot,Qt);if(Kt==="v2f")return Pr(Ot,Qt);if(Kt==="v3f")return Mr(Ot,Qt);if(Kt==="int")return Qn(Ot,Qt);if(Kt==="rational")return dn(Ot,Qt);if(Kt==="timecode")return Vn(Ot,Qt);if(Kt==="preview")return Qt.value+=Yt,"skipped";Qt.value+=Yt}function ba(Ot,Pt,Qt){const Kt={};if(Ot.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Kt.version=Ot.getUint8(4);const Yt=Ot.getUint8(5);Kt.spec={singleTile:!!(Yt&2),longName:!!(Yt&4),deepFormat:!!(Yt&8),multiPart:!!(Yt&16)},Qt.value=8;for(var en=!0;en;){var En=Gn(Pt,Qt);if(En==0)en=!1;else{var Sn=Gn(Pt,Qt),Pn=Nn(Ot,Qt),Bn=_r(Ot,Pt,Qt,Sn,Pn);Bn===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Sn}'.`):Kt[En]=Bn}}if(Yt!=0)throw console.error("EXRHeader:",Kt),"THREE.EXRLoader: provided file is currently unsupported.";return Kt}function _i(Ot,Pt,Qt,Kt,Yt){const en={size:0,viewer:Pt,array:Qt,offset:Kt,width:Ot.dataWindow.xMax-Ot.dataWindow.xMin+1,height:Ot.dataWindow.yMax-Ot.dataWindow.yMin+1,channels:Ot.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Ot.channels[0].pixelType,uncompress:null,getter:null,format:null,[hasColorSpace?"colorSpace":"encoding"]:null};switch(Ot.compression){case"NO_COMPRESSION":en.lines=1,en.uncompress=Nt;break;case"RLE_COMPRESSION":en.lines=1,en.uncompress=kt;break;case"ZIPS_COMPRESSION":en.lines=1,en.uncompress=rn;break;case"ZIP_COMPRESSION":en.lines=16,en.uncompress=rn;break;case"PIZ_COMPRESSION":en.lines=32,en.uncompress=Mn;break;case"PXR24_COMPRESSION":en.lines=16,en.uncompress=wn;break;case"DWAA_COMPRESSION":en.lines=32,en.uncompress=Tn;break;case"DWAB_COMPRESSION":en.lines=256,en.uncompress=Tn;break;default:throw"EXRLoader.parse: "+Ot.compression+" is unsupported"}if(en.scanlineBlockSize=en.lines,en.type==1)switch(Yt){case FloatType:en.getter=Hn,en.inputSize=2;break;case HalfFloatType:en.getter=An,en.inputSize=2;break}else if(en.type==2)switch(Yt){case FloatType:en.getter=tr,en.inputSize=4;break;case HalfFloatType:en.getter=nn,en.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+en.type+" for "+Ot.compression+".";en.blockCount=(Ot.dataWindow.yMax+1)/en.scanlineBlockSize;for(var En=0;En<en.blockCount;En++)Yn(Pt,Kt);en.outputChannels=en.channels==3?4:en.channels;const Sn=en.width*en.height*en.outputChannels;switch(Yt){case FloatType:en.byteArray=new Float32Array(Sn),en.channels<en.outputChannels&&en.byteArray.fill(1,0,Sn);break;case HalfFloatType:en.byteArray=new Uint16Array(Sn),en.channels<en.outputChannels&&en.byteArray.fill(15360,0,Sn);break;default:console.error("THREE.EXRLoader: unsupported type: ",Yt);break}return en.bytesPerLine=en.width*en.inputSize*en.channels,en.outputChannels==4?en.format=RGBAFormat:en.format=RedFormat,hasColorSpace?en.colorSpace="srgb-linear":en.encoding=3e3,en}const Ir=new DataView(_),Nr=new Uint8Array(_),Qr={value:0},Lr=ba(Ir,_,Qr),sr=_i(Lr,Ir,Nr,Qr,this.type),Xr={value:0},go={R:0,G:1,B:2,A:3,Y:0};for(let Ot=0;Ot<sr.height/sr.scanlineBlockSize;Ot++){const Pt=Nn(Ir,Qr);sr.size=Nn(Ir,Qr),sr.lines=Pt+sr.scanlineBlockSize>sr.height?sr.height-Pt:sr.scanlineBlockSize;const Kt=sr.size<sr.lines*sr.bytesPerLine?sr.uncompress(sr):Nt(sr);Qr.value+=sr.size;for(let Yt=0;Yt<sr.scanlineBlockSize;Yt++){const en=Yt+Ot*sr.scanlineBlockSize;if(en>=sr.height)break;for(let En=0;En<sr.channels;En++){const Sn=go[Lr.channels[En].name];for(let Pn=0;Pn<sr.width;Pn++){Xr.value=(Yt*(sr.channels*sr.width)+En*sr.width+Pn)*sr.inputSize;const Bn=(sr.height-1-en)*(sr.width*sr.outputChannels)+Pn*sr.outputChannels+Sn;sr.byteArray[Bn]=sr.getter(Kt,Xr)}}}}return{header:Lr,width:sr.width,height:sr.height,data:sr.byteArray,format:sr.format,[hasColorSpace?"colorSpace":"encoding"]:sr[hasColorSpace?"colorSpace":"encoding"],type:this.type}}setDataType(_){return this.type=_,this}load(_,tt,nt,rt){function it(at,ot){hasColorSpace?at.colorSpace=ot.colorSpace:at.encoding=ot.encoding,at.minFilter=LinearFilter,at.magFilter=LinearFilter,at.generateMipmaps=!1,at.flipY=!1,tt&&tt(at,ot)}return super.load(_,it,nt,rt)}}const _taskCache$2=new WeakMap,_BasisTextureLoader=class extends Loader$1{constructor(_e){super(_e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig=null}setTranscoderPath(_e){return this.transcoderPath=_e,this}setWorkerLimit(_e){return this.workerLimit=_e,this}detectSupport(_e){return this.workerConfig={astcSupported:_e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:_e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:_e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:_e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:_e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:_e.extensions.has("WEBGL_compressed_texture_pvrtc")||_e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}load(_e,_,tt,nt){const rt=new FileLoader(this.manager);rt.setResponseType("arraybuffer"),rt.setWithCredentials(this.withCredentials);const it=new CompressedTexture;return rt.load(_e,at=>{if(_taskCache$2.has(at))return _taskCache$2.get(at).promise.then(_).catch(nt);this._createTexture([at]).then(function(ot){it.copy(ot),it.needsUpdate=!0,_&&_(it)}).catch(nt)},tt,nt),it}parseInternalAsync(_e){const{levels:_}=_e,tt=new Set;for(let nt=0;nt<_.length;nt++)tt.add(_[nt].data.buffer);return this._createTexture(Array.from(tt),{..._e,lowLevel:!0})}_createTexture(_e,_={}){let tt,nt;const rt=_;let it=0;for(let ot=0;ot<_e.length;ot++)it+=_e[ot].byteLength;const at=this._allocateWorker(it).then(ot=>(tt=ot,nt=this.workerNextTaskID++,new Promise((st,lt)=>{tt._callbacks[nt]={resolve:st,reject:lt},tt.postMessage({type:"transcode",id:nt,buffers:_e,taskConfig:rt},_e)}))).then(ot=>{const{mipmaps:st,width:lt,height:ct,format:ut}=ot,ft=new CompressedTexture(st,lt,ct,ut,UnsignedByteType);return ft.minFilter=st.length===1?LinearFilter:LinearMipmapLinearFilter,ft.magFilter=LinearFilter,ft.generateMipmaps=!1,ft.needsUpdate=!0,ft});return at.catch(()=>!0).then(()=>{tt&&nt&&(tt._taskLoad-=it,delete tt._callbacks[nt])}),_taskCache$2.set(_e[0],{promise:at}),at}_initTranscoder(){if(!this.transcoderPending){const _e=new FileLoader(this.manager);_e.setPath(this.transcoderPath),_e.setWithCredentials(this.withCredentials);const _=new Promise((rt,it)=>{_e.load("basis_transcoder.js",rt,void 0,it)}),tt=new FileLoader(this.manager);tt.setPath(this.transcoderPath),tt.setResponseType("arraybuffer"),tt.setWithCredentials(this.withCredentials);const nt=new Promise((rt,it)=>{tt.load("basis_transcoder.wasm",rt,void 0,it)});this.transcoderPending=Promise.all([_,nt]).then(([rt,it])=>{const at=_BasisTextureLoader.BasisWorker.toString(),ot=["/* constants */","let _EngineFormat = "+JSON.stringify(_BasisTextureLoader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(_BasisTextureLoader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(_BasisTextureLoader.BasisFormat),"/* basis_transcoder.js */",rt,"/* worker */",at.substring(at.indexOf("{")+1,at.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ot])),this.transcoderBinary=it})}return this.transcoderPending}_allocateWorker(_e){return this._initTranscoder().then(()=>{if(this.workerPool.length<this.workerLimit){const tt=new Worker(this.workerSourceURL);tt._callbacks={},tt._taskLoad=0,tt.postMessage({type:"init",config:this.workerConfig,transcoderBinary:this.transcoderBinary}),tt.onmessage=function(nt){const rt=nt.data;switch(rt.type){case"transcode":tt._callbacks[rt.id].resolve(rt);break;case"error":tt._callbacks[rt.id].reject(rt);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+rt.type+'"')}},this.workerPool.push(tt)}else this.workerPool.sort(function(tt,nt){return tt._taskLoad>nt._taskLoad?-1:1});const _=this.workerPool[this.workerPool.length-1];return _._taskLoad+=_e,_})}dispose(){for(let _e=0;_e<this.workerPool.length;_e++)this.workerPool[_e].terminate();return this.workerPool.length=0,this}};let BasisTextureLoader=_BasisTextureLoader;__publicField(BasisTextureLoader,"BasisFormat",{ETC1S:0,UASTC_4x4:1});__publicField(BasisTextureLoader,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16});__publicField(BasisTextureLoader,"EngineFormat",{RGBAFormat,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format});__publicField(BasisTextureLoader,"BasisWorker",function(){let _e,_,tt;const nt=_EngineFormat,rt=_TranscoderFormat,it=_BasisFormat;onmessage=function(At){const vt=At.data;switch(vt.type){case"init":_e=vt.config,at(vt.transcoderBinary);break;case"transcode":_.then(()=>{try{const{width:Et,height:Ct,hasAlpha:Tt,mipmaps:bt,format:It}=vt.taskConfig.lowLevel?ot(vt.taskConfig):st(vt.buffers[0]),wt=[];for(let Rt=0;Rt<bt.length;++Rt)wt.push(bt[Rt].data.buffer);self.postMessage({type:"transcode",id:vt.id,width:Et,height:Ct,hasAlpha:Tt,mipmaps:bt,format:It},wt)}catch(Et){console.error(Et),self.postMessage({type:"error",id:vt.id,error:Et.message})}});break}};function at(At){_=new Promise(vt=>{tt={wasmBinary:At,onRuntimeInitialized:vt},BASIS(tt)}).then(()=>{tt.initializeBasis()})}function ot(At){const{basisFormat:vt,width:Et,height:Ct,hasAlpha:Tt}=At,{transcoderFormat:bt,engineFormat:It}=ft(vt,Et,Ct,Tt),wt=tt.getBytesPerBlockOrPixel(bt);pt(tt.isFormatSupported(bt),"THREE.BasisTextureLoader: Unsupported format.");const Rt=[];if(vt===it.ETC1S){const Ft=new tt.LowLevelETC1SImageTranscoder,{endpointCount:Ut,endpointsData:Gt,selectorCount:Ht,selectorsData:jt,tablesData:Xt}=At.globalData;try{let Jt;Jt=Ft.decodePalettes(Ut,Gt,Ht,jt),pt(Jt,"THREE.BasisTextureLoader: decodePalettes() failed."),Jt=Ft.decodeTables(Xt),pt(Jt,"THREE.BasisTextureLoader: decodeTables() failed.");for(let Dt=0;Dt<At.levels.length;Dt++){const zt=At.levels[Dt],$t=At.globalData.imageDescs[Dt],Lt=yt(bt,zt.width,zt.height),Vt=new Uint8Array(Lt);Jt=Ft.transcodeImage(bt,Vt,Lt/wt,zt.data,gt(bt,zt.width),xt(bt,zt.height),zt.width,zt.height,zt.index,$t.rgbSliceByteOffset,$t.rgbSliceByteLength,$t.alphaSliceByteOffset,$t.alphaSliceByteLength,$t.imageFlags,Tt,!1,0,0),pt(Jt,"THREE.BasisTextureLoader: transcodeImage() failed for level "+zt.index+"."),Rt.push({data:Vt,width:zt.width,height:zt.height})}}finally{Ft.delete()}}else for(let Ft=0;Ft<At.levels.length;Ft++){const Ut=At.levels[Ft],Gt=yt(bt,Ut.width,Ut.height),Ht=new Uint8Array(Gt),jt=tt.transcodeUASTCImage(bt,Ht,Gt/wt,Ut.data,gt(bt,Ut.width),xt(bt,Ut.height),Ut.width,Ut.height,Ut.index,0,Ut.data.byteLength,0,Tt,!1,0,0,-1,-1);pt(jt,"THREE.BasisTextureLoader: transcodeUASTCImage() failed for level "+Ut.index+"."),Rt.push({data:Ht,width:Ut.width,height:Ut.height})}return{width:Et,height:Ct,hasAlpha:Tt,mipmaps:Rt,format:It}}function st(At){const vt=new tt.BasisFile(new Uint8Array(At)),Et=vt.isUASTC()?it.UASTC_4x4:it.ETC1S,Ct=vt.getImageWidth(0,0),Tt=vt.getImageHeight(0,0),bt=vt.getNumLevels(0),It=vt.getHasAlpha();function wt(){vt.close(),vt.delete()}const{transcoderFormat:Rt,engineFormat:Ft}=ft(Et,Ct,Tt,It);if(!Ct||!Tt||!bt)throw wt(),new Error("THREE.BasisTextureLoader:	Invalid texture");if(!vt.startTranscoding())throw wt(),new Error("THREE.BasisTextureLoader: .startTranscoding failed");const Ut=[];for(let Gt=0;Gt<bt;Gt++){const Ht=vt.getImageWidth(0,Gt),jt=vt.getImageHeight(0,Gt),Xt=new Uint8Array(vt.getImageTranscodedSizeInBytes(0,Gt,Rt));if(!vt.transcodeImage(Xt,0,Gt,Rt,0,It))throw wt(),new Error("THREE.BasisTextureLoader: .transcodeImage failed.");Ut.push({data:Xt,width:Ht,height:jt})}return wt(),{width:Ct,height:Tt,hasAlpha:It,mipmaps:Ut,format:Ft}}const lt=[{if:"astcSupported",basisFormat:[it.UASTC_4x4],transcoderFormat:[rt.ASTC_4x4,rt.ASTC_4x4],engineFormat:[nt.RGBA_ASTC_4x4_Format,nt.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.BC7_M5,rt.BC7_M5],engineFormat:[nt.RGBA_BPTC_Format,nt.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.BC1,rt.BC3],engineFormat:[nt.RGB_S3TC_DXT1_Format,nt.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.ETC1,rt.ETC2],engineFormat:[nt.RGB_ETC2_Format,nt.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.ETC1,rt.ETC1],engineFormat:[nt.RGB_ETC1_Format,nt.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[it.ETC1S,it.UASTC_4x4],transcoderFormat:[rt.PVRTC1_4_RGB,rt.PVRTC1_4_RGBA],engineFormat:[nt.RGB_PVRTC_4BPPV1_Format,nt.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],ct=lt.sort(function(At,vt){return At.priorityETC1S-vt.priorityETC1S}),ut=lt.sort(function(At,vt){return At.priorityUASTC-vt.priorityUASTC});function ft(At,vt,Et,Ct){let Tt,bt;const It=At===it.ETC1S?ct:ut;for(let wt=0;wt<It.length;wt++){const Rt=It[wt];if(_e[Rt.if]&&Rt.basisFormat.includes(At)&&!(Rt.needsPowerOfTwo&&!(mt(vt)&&mt(Et))))return Tt=Rt.transcoderFormat[Ct?1:0],bt=Rt.engineFormat[Ct?1:0],{transcoderFormat:Tt,engineFormat:bt}}return console.warn("THREE.BasisTextureLoader: No suitable compressed texture format found. Decoding to RGBA32."),Tt=rt.RGBA32,bt=nt.RGBAFormat,{transcoderFormat:Tt,engineFormat:bt}}function pt(At,vt){if(!At)throw new Error(vt)}function gt(At,vt){return Math.ceil(vt/tt.getFormatBlockWidth(At))}function xt(At,vt){return Math.ceil(vt/tt.getFormatBlockHeight(At))}function yt(At,vt,Et){const Ct=tt.getBytesPerBlockOrPixel(At);if(tt.formatIsUncompressed(At))return vt*Et*Ct;if(At===rt.PVRTC1_4_RGB||At===rt.PVRTC1_4_RGBA){const Tt=vt+3&-4,bt=Et+3&-4;return(Math.max(8,Tt)*Math.max(8,bt)*4+7)/8}return gt(At,vt)*xt(At,Et)*Ct}function mt(At){return At<=2?!0:(At&At-1)===0&&At!==0}});function shallow(_e,_){if(Object.is(_e,_))return!0;if(typeof _e!="object"||_e===null||typeof _!="object"||_===null)return!1;const tt=Object.keys(_e);if(tt.length!==Object.keys(_).length)return!1;for(let nt=0;nt<tt.length;nt++)if(!Object.prototype.hasOwnProperty.call(_,tt[nt])||!Object.is(_e[tt[nt]],_[tt[nt]]))return!1;return!0}function workerBootstrap(){var _e=Object.create(null);function _(rt,it){var at=rt.id,ot=rt.name,st=rt.dependencies;st===void 0&&(st=[]);var lt=rt.init;lt===void 0&&(lt=function(){});var ct=rt.getTransferables;if(ct===void 0&&(ct=null),!_e[at])try{st=st.map(function(ft){return ft&&ft.isWorkerModule&&(_(ft,function(pt){if(pt instanceof Error)throw pt}),ft=_e[ft.id].value),ft}),lt=nt("<"+ot+">.init",lt),ct&&(ct=nt("<"+ot+">.getTransferables",ct));var ut=null;typeof lt=="function"?ut=lt.apply(void 0,st):console.error("worker module init function failed to rehydrate"),_e[at]={id:at,value:ut,getTransferables:ct},it(ut)}catch(ft){ft&&ft.noLog||console.error(ft),it(ft)}}function tt(rt,it){var at,ot=rt.id,st=rt.args;(!_e[ot]||typeof _e[ot].value!="function")&&it(new Error("Worker module "+ot+": not found or its 'init' did not return a function"));try{var lt=(at=_e[ot]).value.apply(at,st);lt&&typeof lt.then=="function"?lt.then(ct,function(ut){return it(ut instanceof Error?ut:new Error(""+ut))}):ct(lt)}catch(ut){it(ut)}function ct(ut){try{var ft=_e[ot].getTransferables&&_e[ot].getTransferables(ut);(!ft||!Array.isArray(ft)||!ft.length)&&(ft=void 0),it(ut,ft)}catch(pt){console.error(pt),it(pt)}}}function nt(rt,it){var at=void 0;self.troikaDefine=function(st){return at=st};var ot=URL.createObjectURL(new Blob(["/** "+rt.replace(/\*/g,"")+` **/

troikaDefine(
`+it+`
)`],{type:"application/javascript"}));try{importScripts(ot)}catch(st){console.error(st)}return URL.revokeObjectURL(ot),delete self.troikaDefine,at}self.addEventListener("message",function(rt){var it=rt.data,at=it.messageId,ot=it.action,st=it.data;try{ot==="registerModule"&&_(st,function(lt){lt instanceof Error?postMessage({messageId:at,success:!1,error:lt.message}):postMessage({messageId:at,success:!0,result:{isCallable:typeof lt=="function"}})}),ot==="callModule"&&tt(st,function(lt,ct){lt instanceof Error?postMessage({messageId:at,success:!1,error:lt.message}):postMessage({messageId:at,success:!0,result:lt},ct||void 0)})}catch(lt){postMessage({messageId:at,success:!1,error:lt.stack})}})}function defineMainThreadModule(_e){var _=function(){for(var tt=[],nt=arguments.length;nt--;)tt[nt]=arguments[nt];return _._getInitResult().then(function(rt){if(typeof rt=="function")return rt.apply(void 0,tt);throw new Error("Worker module function was called but `init` did not return a callable function")})};return _._getInitResult=function(){var tt=_e.dependencies,nt=_e.init;tt=Array.isArray(tt)?tt.map(function(it){return it&&it._getInitResult?it._getInitResult():it}):[];var rt=Promise.all(tt).then(function(it){return nt.apply(null,it)});return _._getInitResult=function(){return rt},rt},_}var supportsWorkers=function(){var _e=!1;if(typeof window<"u"&&typeof window.document<"u")try{var _=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));_.terminate(),_e=!0}catch(tt){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+tt.message+"]")}return supportsWorkers=function(){return _e},_e},_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(_e){if((!_e||typeof _e.init!="function")&&!_allowInitAsString)throw new Error("requires `options.init` function");var _=_e.dependencies,tt=_e.init,nt=_e.getTransferables,rt=_e.workerId;if(!supportsWorkers())return defineMainThreadModule(_e);rt==null&&(rt="#default");var it="workerModule"+ ++_workerModuleId,at=_e.name||it,ot=null;_=_&&_.map(function(lt){return typeof lt=="function"&&!lt.workerModuleData&&(_allowInitAsString=!0,lt=defineWorkerModule({workerId:rt,name:"<"+at+"> function dependency: "+lt.name,init:`function(){return (
`+stringifyFunction(lt)+`
)}`}),_allowInitAsString=!1),lt&&lt.workerModuleData&&(lt=lt.workerModuleData),lt});function st(){for(var lt=[],ct=arguments.length;ct--;)lt[ct]=arguments[ct];if(!ot){ot=callWorker(rt,"registerModule",st.workerModuleData);var ut=function(){ot=null,registeredModules[rt].delete(ut)};(registeredModules[rt]||(registeredModules[rt]=new Set)).add(ut)}return ot.then(function(ft){var pt=ft.isCallable;if(pt)return callWorker(rt,"callModule",{id:it,args:lt});throw new Error("Worker module function was called but `init` did not return a callable function")})}return st.workerModuleData={isWorkerModule:!0,id:it,name:at,dependencies:_,init:stringifyFunction(tt),getTransferables:nt&&stringifyFunction(nt)},st}function terminateWorker(_e){registeredModules[_e]&&registeredModules[_e].forEach(function(_){_()}),workers[_e]&&(workers[_e].terminate(),delete workers[_e])}function stringifyFunction(_e){var _=_e.toString();return!/^function/.test(_)&&/^\w+\s*\(/.test(_)&&(_="function "+_),_}function getWorker(_e){var _=workers[_e];if(!_){var tt=stringifyFunction(workerBootstrap);_=workers[_e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+_e.replace(/\*/g,"")+` **/

;(`+tt+")()"],{type:"application/javascript"}))),_.onmessage=function(nt){var rt=nt.data,it=rt.messageId,at=openRequests[it];if(!at)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[it],at(rt)}}return _}function callWorker(_e,_,tt){return new Promise(function(nt,rt){var it=++_messageId;openRequests[it]=function(at){at.success?nt(at.result):rt(new Error("Error in worker "+_+" call: "+at.error))},getWorker(_e).postMessage({messageId:it,action:_,data:tt})})}function SDFGenerator(){var _e=function(_){function tt(zt,$t,Lt,Vt,tn,an,on,sn){var ln=1-on;sn.x=ln*ln*zt+2*ln*on*Lt+on*on*tn,sn.y=ln*ln*$t+2*ln*on*Vt+on*on*an}function nt(zt,$t,Lt,Vt,tn,an,on,sn,ln,cn){var In=1-ln;cn.x=In*In*In*zt+3*In*In*ln*Lt+3*In*ln*ln*tn+ln*ln*ln*on,cn.y=In*In*In*$t+3*In*In*ln*Vt+3*In*ln*ln*an+ln*ln*ln*sn}function rt(zt,$t){for(var Lt=/([MLQCZ])([^MLQCZ]*)/g,Vt,tn,an,on,sn;Vt=Lt.exec(zt);){var ln=Vt[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(cn){return parseFloat(cn)});switch(Vt[1]){case"M":on=tn=ln[0],sn=an=ln[1];break;case"L":(ln[0]!==on||ln[1]!==sn)&&$t("L",on,sn,on=ln[0],sn=ln[1]);break;case"Q":{$t("Q",on,sn,on=ln[2],sn=ln[3],ln[0],ln[1]);break}case"C":{$t("C",on,sn,on=ln[4],sn=ln[5],ln[0],ln[1],ln[2],ln[3]);break}case"Z":(on!==tn||sn!==an)&&$t("L",on,sn,tn,an);break}}}function it(zt,$t,Lt){Lt===void 0&&(Lt=16);var Vt={x:0,y:0};rt(zt,function(tn,an,on,sn,ln,cn,In,zn,yn){switch(tn){case"L":$t(an,on,sn,ln);break;case"Q":{for(var Wt=an,_n=on,gn=1;gn<Lt;gn++)tt(an,on,cn,In,sn,ln,gn/(Lt-1),Vt),$t(Wt,_n,Vt.x,Vt.y),Wt=Vt.x,_n=Vt.y;break}case"C":{for(var vn=an,mn=on,Wn=1;Wn<Lt;Wn++)nt(an,on,cn,In,zn,yn,sn,ln,Wn/(Lt-1),Vt),$t(vn,mn,Vt.x,Vt.y),vn=Vt.x,mn=Vt.y;break}}})}var at="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",ot="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",st=new WeakMap,lt={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function ct(zt,$t){var Lt=zt.getContext?zt.getContext("webgl",lt):zt,Vt=st.get(Lt);if(!Vt){let vn=function(bn){var jn=an[bn];if(!jn&&(jn=an[bn]=Lt.getExtension(bn),!jn))throw new Error(bn+" not supported");return jn},mn=function(bn,jn){var Nt=Lt.createShader(jn);return Lt.shaderSource(Nt,bn),Lt.compileShader(Nt),Nt},Wn=function(bn,jn,Nt,kt){if(!on[bn]){var rn={},Mn={},wn=Lt.createProgram();Lt.attachShader(wn,mn(jn,Lt.VERTEX_SHADER)),Lt.attachShader(wn,mn(Nt,Lt.FRAGMENT_SHADER)),Lt.linkProgram(wn),on[bn]={program:wn,transaction:function(Gn){Lt.useProgram(wn),Gn({setUniform:function(dn,Vn){for(var Qn=[],Nn=arguments.length-2;Nn-- >0;)Qn[Nn]=arguments[Nn+2];var kn=Mn[Vn]||(Mn[Vn]=Lt.getUniformLocation(wn,Vn));Lt["uniform"+dn].apply(Lt,[kn].concat(Qn))},setAttribute:function(dn,Vn,Qn,Nn,kn){var $n=rn[dn];$n||($n=rn[dn]={buf:Lt.createBuffer(),loc:Lt.getAttribLocation(wn,dn),data:null}),Lt.bindBuffer(Lt.ARRAY_BUFFER,$n.buf),Lt.vertexAttribPointer($n.loc,Vn,Lt.FLOAT,!1,0,0),Lt.enableVertexAttribArray($n.loc),tn?Lt.vertexAttribDivisor($n.loc,Nn):vn("ANGLE_instanced_arrays").vertexAttribDivisorANGLE($n.loc,Nn),kn!==$n.data&&(Lt.bufferData(Lt.ARRAY_BUFFER,kn,Qn),$n.data=kn)}})}}}on[bn].transaction(kt)},xn=function(bn,jn){ln++;try{Lt.activeTexture(Lt.TEXTURE0+ln);var Nt=sn[bn];Nt||(Nt=sn[bn]=Lt.createTexture(),Lt.bindTexture(Lt.TEXTURE_2D,Nt),Lt.texParameteri(Lt.TEXTURE_2D,Lt.TEXTURE_MIN_FILTER,Lt.NEAREST),Lt.texParameteri(Lt.TEXTURE_2D,Lt.TEXTURE_MAG_FILTER,Lt.NEAREST)),Lt.bindTexture(Lt.TEXTURE_2D,Nt),jn(Nt,ln)}finally{ln--}},Dn=function(bn,jn,Nt){var kt=Lt.createFramebuffer();cn.push(kt),Lt.bindFramebuffer(Lt.FRAMEBUFFER,kt),Lt.activeTexture(Lt.TEXTURE0+jn),Lt.bindTexture(Lt.TEXTURE_2D,bn),Lt.framebufferTexture2D(Lt.FRAMEBUFFER,Lt.COLOR_ATTACHMENT0,Lt.TEXTURE_2D,bn,0);try{Nt(kt)}finally{Lt.deleteFramebuffer(kt),Lt.bindFramebuffer(Lt.FRAMEBUFFER,cn[--cn.length-1]||null)}},Fn=function(){an={},on={},sn={},ln=-1,cn.length=0};var In=vn,zn=mn,yn=Wn,Wt=xn,_n=Dn,gn=Fn,tn=typeof WebGL2RenderingContext<"u"&&Lt instanceof WebGL2RenderingContext,an={},on={},sn={},ln=-1,cn=[];Lt.canvas.addEventListener("webglcontextlost",function(bn){Fn(),bn.preventDefault()},!1),st.set(Lt,Vt={gl:Lt,isWebGL2:tn,getExtension:vn,withProgram:Wn,withTexture:xn,withTextureFramebuffer:Dn,handleContextLoss:Fn})}$t(Vt)}function ut(zt,$t,Lt,Vt,tn,an,on,sn){on===void 0&&(on=15),sn===void 0&&(sn=null),ct(zt,function(ln){var cn=ln.gl,In=ln.withProgram,zn=ln.withTexture;zn("copy",function(yn,Wt){cn.texImage2D(cn.TEXTURE_2D,0,cn.RGBA,tn,an,0,cn.RGBA,cn.UNSIGNED_BYTE,$t),In("copy",at,ot,function(_n){var gn=_n.setUniform,vn=_n.setAttribute;vn("aUV",2,cn.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),gn("1i","image",Wt),cn.bindFramebuffer(cn.FRAMEBUFFER,sn||null),cn.disable(cn.BLEND),cn.colorMask(on&8,on&4,on&2,on&1),cn.viewport(Lt,Vt,tn,an),cn.scissor(Lt,Vt,tn,an),cn.drawArrays(cn.TRIANGLES,0,3)})})})}function ft(zt,$t,Lt){var Vt=zt.width,tn=zt.height;ct(zt,function(an){var on=an.gl,sn=new Uint8Array(Vt*tn*4);on.readPixels(0,0,Vt,tn,on.RGBA,on.UNSIGNED_BYTE,sn),zt.width=$t,zt.height=Lt,ut(on,sn,0,0,Vt,tn)})}var pt=Object.freeze({__proto__:null,withWebGLContext:ct,renderImageData:ut,resizeWebGLCanvasWithoutClearing:ft});function gt(zt,$t,Lt,Vt,tn,an){an===void 0&&(an=1);var on=new Uint8Array(zt*$t),sn=Vt[2]-Vt[0],ln=Vt[3]-Vt[1],cn=[];it(Lt,function(vn,mn,Wn,xn){cn.push({x1:vn,y1:mn,x2:Wn,y2:xn,minX:Math.min(vn,Wn),minY:Math.min(mn,xn),maxX:Math.max(vn,Wn),maxY:Math.max(mn,xn)})}),cn.sort(function(vn,mn){return vn.maxX-mn.maxX});for(var In=0;In<zt;In++)for(var zn=0;zn<$t;zn++){var yn=_n(Vt[0]+sn*(In+.5)/zt,Vt[1]+ln*(zn+.5)/$t),Wt=Math.pow(1-Math.abs(yn)/tn,an)/2;yn<0&&(Wt=1-Wt),Wt=Math.max(0,Math.min(255,Math.round(Wt*255))),on[zn*zt+In]=Wt}return on;function _n(vn,mn){for(var Wn=1/0,xn=1/0,Dn=cn.length;Dn--;){var Fn=cn[Dn];if(Fn.maxX+xn<=vn)break;if(vn+xn>Fn.minX&&mn-xn<Fn.maxY&&mn+xn>Fn.minY){var bn=mt(vn,mn,Fn.x1,Fn.y1,Fn.x2,Fn.y2);bn<Wn&&(Wn=bn,xn=Math.sqrt(Wn))}}return gn(vn,mn)&&(xn=-xn),xn}function gn(vn,mn){for(var Wn=0,xn=cn.length;xn--;){var Dn=cn[xn];if(Dn.maxX<=vn)break;var Fn=Dn.y1>mn!=Dn.y2>mn&&vn<(Dn.x2-Dn.x1)*(mn-Dn.y1)/(Dn.y2-Dn.y1)+Dn.x1;Fn&&(Wn+=Dn.y1<Dn.y2?1:-1)}return Wn!==0}}function xt(zt,$t,Lt,Vt,tn,an,on,sn,ln,cn){an===void 0&&(an=1),sn===void 0&&(sn=0),ln===void 0&&(ln=0),cn===void 0&&(cn=0),yt(zt,$t,Lt,Vt,tn,an,on,null,sn,ln,cn)}function yt(zt,$t,Lt,Vt,tn,an,on,sn,ln,cn,In){an===void 0&&(an=1),ln===void 0&&(ln=0),cn===void 0&&(cn=0),In===void 0&&(In=0);for(var zn=gt(zt,$t,Lt,Vt,tn,an),yn=new Uint8Array(zn.length*4),Wt=0;Wt<zn.length;Wt++)yn[Wt*4+In]=zn[Wt];ut(on,yn,ln,cn,zt,$t,1<<3-In,sn)}function mt(zt,$t,Lt,Vt,tn,an){var on=tn-Lt,sn=an-Vt,ln=on*on+sn*sn,cn=ln?Math.max(0,Math.min(1,((zt-Lt)*on+($t-Vt)*sn)/ln)):0,In=zt-(Lt+cn*on),zn=$t-(Vt+cn*sn);return In*In+zn*zn}var At=Object.freeze({__proto__:null,generate:gt,generateIntoCanvas:xt,generateIntoFramebuffer:yt}),vt="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",Et="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",Ct="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",Tt=new Float32Array([0,0,2,0,0,2]),bt=null,It=!1,wt={},Rt=new WeakMap;function Ft(zt){if(!It&&!jt(zt))throw new Error("WebGL generation not supported")}function Ut(zt,$t,Lt,Vt,tn,an,on){if(an===void 0&&(an=1),on===void 0&&(on=null),!on&&(on=bt,!on)){var sn=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!sn)throw new Error("OffscreenCanvas or DOM canvas not supported");on=bt=sn.getContext("webgl",{depth:!1})}Ft(on);var ln=new Uint8Array(zt*$t*4);ct(on,function(yn){var Wt=yn.gl,_n=yn.withTexture,gn=yn.withTextureFramebuffer;_n("readable",function(vn,mn){Wt.texImage2D(Wt.TEXTURE_2D,0,Wt.RGBA,zt,$t,0,Wt.RGBA,Wt.UNSIGNED_BYTE,null),gn(vn,mn,function(Wn){Ht(zt,$t,Lt,Vt,tn,an,Wt,Wn,0,0,0),Wt.readPixels(0,0,zt,$t,Wt.RGBA,Wt.UNSIGNED_BYTE,ln)})})});for(var cn=new Uint8Array(zt*$t),In=0,zn=0;In<ln.length;In+=4)cn[zn++]=ln[In];return cn}function Gt(zt,$t,Lt,Vt,tn,an,on,sn,ln,cn){an===void 0&&(an=1),sn===void 0&&(sn=0),ln===void 0&&(ln=0),cn===void 0&&(cn=0),Ht(zt,$t,Lt,Vt,tn,an,on,null,sn,ln,cn)}function Ht(zt,$t,Lt,Vt,tn,an,on,sn,ln,cn,In){an===void 0&&(an=1),ln===void 0&&(ln=0),cn===void 0&&(cn=0),In===void 0&&(In=0),Ft(on);var zn=[];it(Lt,function(yn,Wt,_n,gn){zn.push(yn,Wt,_n,gn)}),zn=new Float32Array(zn),ct(on,function(yn){var Wt=yn.gl,_n=yn.isWebGL2,gn=yn.getExtension,vn=yn.withProgram,mn=yn.withTexture,Wn=yn.withTextureFramebuffer,xn=yn.handleContextLoss;if(mn("rawDistances",function(Dn,Fn){(zt!==Dn._lastWidth||$t!==Dn._lastHeight)&&Wt.texImage2D(Wt.TEXTURE_2D,0,Wt.RGBA,Dn._lastWidth=zt,Dn._lastHeight=$t,0,Wt.RGBA,Wt.UNSIGNED_BYTE,null),vn("main",vt,Et,function(bn){var jn=bn.setAttribute,Nt=bn.setUniform,kt=!_n&&gn("ANGLE_instanced_arrays"),rn=!_n&&gn("EXT_blend_minmax");jn("aUV",2,Wt.STATIC_DRAW,0,Tt),jn("aLineSegment",4,Wt.DYNAMIC_DRAW,1,zn),Nt.apply(void 0,["4f","uGlyphBounds"].concat(Vt)),Nt("1f","uMaxDistance",tn),Nt("1f","uExponent",an),Wn(Dn,Fn,function(Mn){Wt.enable(Wt.BLEND),Wt.colorMask(!0,!0,!0,!0),Wt.viewport(0,0,zt,$t),Wt.scissor(0,0,zt,$t),Wt.blendFunc(Wt.ONE,Wt.ONE),Wt.blendEquationSeparate(Wt.FUNC_ADD,_n?Wt.MAX:rn.MAX_EXT),Wt.clear(Wt.COLOR_BUFFER_BIT),_n?Wt.drawArraysInstanced(Wt.TRIANGLES,0,3,zn.length/4):kt.drawArraysInstancedANGLE(Wt.TRIANGLES,0,3,zn.length/4)})}),vn("post",at,Ct,function(bn){bn.setAttribute("aUV",2,Wt.STATIC_DRAW,0,Tt),bn.setUniform("1i","tex",Fn),Wt.bindFramebuffer(Wt.FRAMEBUFFER,sn),Wt.disable(Wt.BLEND),Wt.colorMask(In===0,In===1,In===2,In===3),Wt.viewport(ln,cn,zt,$t),Wt.scissor(ln,cn,zt,$t),Wt.drawArrays(Wt.TRIANGLES,0,3)})}),Wt.isContextLost())throw xn(),new Error("webgl context lost")})}function jt(zt){var $t=!zt||zt===bt?wt:zt.canvas||zt,Lt=Rt.get($t);if(Lt===void 0){It=!0;var Vt=null;try{var tn=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],an=Ut(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,zt);Lt=an&&tn.length===an.length&&an.every(function(on,sn){return on===tn[sn]}),Lt||(Vt="bad trial run results",console.info(tn,an))}catch(on){Lt=!1,Vt=on.message}Vt&&console.warn("WebGL SDF generation not supported:",Vt),It=!1,Rt.set($t,Lt)}return Lt}var Xt=Object.freeze({__proto__:null,generate:Ut,generateIntoCanvas:Gt,generateIntoFramebuffer:Ht,isSupported:jt});function Jt(zt,$t,Lt,Vt,tn,an){tn===void 0&&(tn=Math.max(Vt[2]-Vt[0],Vt[3]-Vt[1])/2),an===void 0&&(an=1);try{return Ut.apply(Xt,arguments)}catch(on){return console.info("WebGL SDF generation failed, falling back to JS",on),gt.apply(At,arguments)}}function Dt(zt,$t,Lt,Vt,tn,an,on,sn,ln,cn){tn===void 0&&(tn=Math.max(Vt[2]-Vt[0],Vt[3]-Vt[1])/2),an===void 0&&(an=1),sn===void 0&&(sn=0),ln===void 0&&(ln=0),cn===void 0&&(cn=0);try{return Gt.apply(Xt,arguments)}catch(In){return console.info("WebGL SDF generation failed, falling back to JS",In),xt.apply(At,arguments)}}return _.forEachPathCommand=rt,_.generate=Jt,_.generateIntoCanvas=Dt,_.javascript=At,_.pathToLineSegments=it,_.webgl=Xt,_.webglUtils=pt,Object.defineProperty(_,"__esModule",{value:!0}),_}({});return _e}function bidiFactory(){var _e=function(_){var tt={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},nt={},rt={};nt.L=1,rt[1]="L",Object.keys(tt).forEach(function(xn,Dn){nt[xn]=1<<Dn+1,rt[nt[xn]]=xn}),Object.freeze(nt);var it=nt.LRI|nt.RLI|nt.FSI,at=nt.L|nt.R|nt.AL,ot=nt.B|nt.S|nt.WS|nt.ON|nt.FSI|nt.LRI|nt.RLI|nt.PDI,st=nt.BN|nt.RLE|nt.LRE|nt.RLO|nt.LRO|nt.PDF,lt=nt.S|nt.WS|nt.B|it|nt.PDI|st,ct=null;function ut(){if(!ct){ct=new Map;var xn=function(Fn){if(tt.hasOwnProperty(Fn)){var bn=0;tt[Fn].split(",").forEach(function(jn){var Nt=jn.split("+"),kt=Nt[0],rn=Nt[1];kt=parseInt(kt,36),rn=rn?parseInt(rn,36):0,ct.set(bn+=kt,nt[Fn]);for(var Mn=0;Mn<rn;Mn++)ct.set(++bn,nt[Fn])})}};for(var Dn in tt)xn(Dn)}}function ft(xn){return ut(),ct.get(xn.codePointAt(0))||nt.L}function pt(xn){return rt[ft(xn)]}var gt={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function xt(xn,Dn){var Fn=36,bn=0,jn=new Map,Nt=Dn&&new Map,kt;return xn.split(",").forEach(function rn(Mn){if(Mn.indexOf("+")!==-1)for(var wn=+Mn;wn--;)rn(kt);else{kt=Mn;var Tn=Mn.split(">"),Gn=Tn[0],Un=Tn[1];Gn=String.fromCodePoint(bn+=parseInt(Gn,Fn)),Un=String.fromCodePoint(bn+=parseInt(Un,Fn)),jn.set(Gn,Un),Dn&&Nt.set(Un,Gn)}}),{map:jn,reverseMap:Nt}}var yt,mt,At;function vt(){if(!yt){var xn=xt(gt.pairs,!0),Dn=xn.map,Fn=xn.reverseMap;yt=Dn,mt=Fn,At=xt(gt.canonical,!1).map}}function Et(xn){return vt(),yt.get(xn)||null}function Ct(xn){return vt(),mt.get(xn)||null}function Tt(xn){return vt(),At.get(xn)||null}var bt=nt.L,It=nt.R,wt=nt.EN,Rt=nt.ES,Ft=nt.ET,Ut=nt.AN,Gt=nt.CS,Ht=nt.B,jt=nt.S,Xt=nt.ON,Jt=nt.BN,Dt=nt.NSM,zt=nt.AL,$t=nt.LRO,Lt=nt.RLO,Vt=nt.LRE,tn=nt.RLE,an=nt.PDF,on=nt.LRI,sn=nt.RLI,ln=nt.FSI,cn=nt.PDI;function In(xn,Dn){for(var Fn=125,bn=new Uint32Array(xn.length),jn=0;jn<xn.length;jn++)bn[jn]=ft(xn[jn]);var Nt=new Map;function kt(eo,fo){var Kr=bn[eo];bn[eo]=fo,Nt.set(Kr,Nt.get(Kr)-1),Kr&ot&&Nt.set(ot,Nt.get(ot)-1),Nt.set(fo,(Nt.get(fo)||0)+1),fo&ot&&Nt.set(ot,(Nt.get(ot)||0)+1)}for(var rn=new Uint8Array(xn.length),Mn=new Map,wn=[],Tn=null,Gn=0;Gn<xn.length;Gn++)Tn||wn.push(Tn={start:Gn,end:xn.length-1,level:Dn==="rtl"?1:Dn==="ltr"?0:Rs(Gn,!1)}),bn[Gn]&Ht&&(Tn.end=Gn,Tn=null);for(var Un=tn|Vt|Lt|$t|it|cn|an|Ht,dn=function(eo){return eo+(eo&1?1:2)},Vn=function(eo){return eo+(eo&1?2:1)},Qn=0;Qn<wn.length;Qn++){Tn=wn[Qn];var Nn=[{_level:Tn.level,_override:0,_isolate:0}],kn=void 0,$n=0,Yn=0,tr=0;Nt.clear();for(var nn=Tn.start;nn<=Tn.end;nn++){var pn=bn[nn];if(kn=Nn[Nn.length-1],Nt.set(pn,(Nt.get(pn)||0)+1),pn&ot&&Nt.set(ot,(Nt.get(ot)||0)+1),pn&Un)if(pn&(tn|Vt)){rn[nn]=kn._level;var An=(pn===tn?Vn:dn)(kn._level);An<=Fn&&!$n&&!Yn?Nn.push({_level:An,_override:0,_isolate:0}):$n||Yn++}else if(pn&(Lt|$t)){rn[nn]=kn._level;var Hn=(pn===Lt?Vn:dn)(kn._level);Hn<=Fn&&!$n&&!Yn?Nn.push({_level:Hn,_override:pn&Lt?It:bt,_isolate:0}):$n||Yn++}else if(pn&it){pn&ln&&(pn=Rs(nn+1,!0)===1?sn:on),rn[nn]=kn._level,kn._override&&kt(nn,kn._override);var Jn=(pn===sn?Vn:dn)(kn._level);Jn<=Fn&&$n===0&&Yn===0?(tr++,Nn.push({_level:Jn,_override:0,_isolate:1,_isolInitIndex:nn})):$n++}else if(pn&cn){if($n>0)$n--;else if(tr>0){for(Yn=0;!Nn[Nn.length-1]._isolate;)Nn.pop();var Ar=Nn[Nn.length-1]._isolInitIndex;Ar!=null&&(Mn.set(Ar,nn),Mn.set(nn,Ar)),Nn.pop(),tr--}kn=Nn[Nn.length-1],rn[nn]=kn._level,kn._override&&kt(nn,kn._override)}else pn&an?($n===0&&(Yn>0?Yn--:!kn._isolate&&Nn.length>1&&(Nn.pop(),kn=Nn[Nn.length-1])),rn[nn]=kn._level):pn&Ht&&(rn[nn]=Tn.level);else rn[nn]=kn._level,kn._override&&pn!==Jt&&kt(nn,kn._override)}for(var Er=[],Tr=null,Rr=Tn.start;Rr<=Tn.end;Rr++){var Pr=bn[Rr];if(!(Pr&st)){var Mr=rn[Rr],_r=Pr&it,ba=Pr===cn;Tr&&Mr===Tr._level?(Tr._end=Rr,Tr._endsWithIsolInit=_r):Er.push(Tr={_start:Rr,_end:Rr,_level:Mr,_startsWithPDI:ba,_endsWithIsolInit:_r})}}for(var _i=[],Ir=0;Ir<Er.length;Ir++){var Nr=Er[Ir];if(!Nr._startsWithPDI||Nr._startsWithPDI&&!Mn.has(Nr._start)){for(var Qr=[Tr=Nr],Lr=void 0;Tr&&Tr._endsWithIsolInit&&(Lr=Mn.get(Tr._end))!=null;)for(var sr=Ir+1;sr<Er.length;sr++)if(Er[sr]._start===Lr){Qr.push(Tr=Er[sr]);break}for(var Xr=[],go=0;go<Qr.length;go++)for(var Ot=Qr[go],Pt=Ot._start;Pt<=Ot._end;Pt++)Xr.push(Pt);for(var Qt=rn[Xr[0]],Kt=Tn.level,Yt=Xr[0]-1;Yt>=0;Yt--)if(!(bn[Yt]&st)){Kt=rn[Yt];break}var en=Xr[Xr.length-1],En=rn[en],Sn=Tn.level;if(!(bn[en]&it)){for(var Pn=en+1;Pn<=Tn.end;Pn++)if(!(bn[Pn]&st)){Sn=rn[Pn];break}}_i.push({_seqIndices:Xr,_sosType:Math.max(Kt,Qt)%2?It:bt,_eosType:Math.max(Sn,En)%2?It:bt})}}for(var Bn=0;Bn<_i.length;Bn++){var On=_i[Bn],un=On._seqIndices,er=On._sosType,Kn=On._eosType,qn=rn[un[0]]&1?It:bt;if(Nt.get(Dt))for(var or=0;or<un.length;or++){var fr=un[or];if(bn[fr]&Dt){for(var lr=er,Zn=or-1;Zn>=0;Zn--)if(!(bn[un[Zn]]&st)){lr=bn[un[Zn]];break}kt(fr,lr&(it|cn)?Xt:lr)}}if(Nt.get(wt))for(var hr=0;hr<un.length;hr++){var ir=un[hr];if(bn[ir]&wt)for(var gr=hr-1;gr>=-1;gr--){var Dr=gr===-1?er:bn[un[gr]];if(Dr&at){Dr===zt&&kt(ir,Ut);break}}}if(Nt.get(zt))for(var pr=0;pr<un.length;pr++){var Fr=un[pr];bn[Fr]&zt&&kt(Fr,It)}if(Nt.get(Rt)||Nt.get(Gt))for(var br=1;br<un.length-1;br++){var kr=un[br];if(bn[kr]&(Rt|Gt)){for(var $r=0,mr=0,Gr=br-1;Gr>=0&&($r=bn[un[Gr]],!!($r&st));Gr--);for(var Br=br+1;Br<un.length&&(mr=bn[un[Br]],!!(mr&st));Br++);$r===mr&&(bn[kr]===Rt?$r===wt:$r&(wt|Ut))&&kt(kr,$r)}}if(Nt.get(wt))for(var vr=0;vr<un.length;vr++){var zr=un[vr];if(bn[zr]&wt){for(var mo=vr-1;mo>=0&&bn[un[mo]]&(Ft|st);mo--)kt(un[mo],wt);for(vr++;vr<un.length&&bn[un[vr]]&(Ft|st|wt);vr++)bn[un[vr]]!==wt&&kt(un[vr],wt)}}if(Nt.get(Ft)||Nt.get(Rt)||Nt.get(Gt))for(var qr=0;qr<un.length;qr++){var _o=un[qr];if(bn[_o]&(Ft|Rt|Gt)){kt(_o,Xt);for(var Qo=qr-1;Qo>=0&&bn[un[Qo]]&st;Qo--)kt(un[Qo],Xt);for(var Wo=qr+1;Wo<un.length&&bn[un[Wo]]&st;Wo++)kt(un[Wo],Xt)}}if(Nt.get(wt))for(var jo=0,hs=er;jo<un.length;jo++){var Pl=un[jo],Gs=bn[Pl];Gs&wt?hs===bt&&kt(Pl,bt):Gs&at&&(hs=Gs)}if(Nt.get(ot)){var Xo=It|wt|Ut,ws=Xo|bt,No=[];{for(var ts=[],$o=0;$o<un.length;$o++)if(bn[un[$o]]&ot){var wr=xn[un[$o]],Vs=void 0;if(Et(wr)!==null)if(ts.length<63)ts.push({char:wr,seqIndex:$o});else break;else if((Vs=Ct(wr))!==null)for(var Yo=ts.length-1;Yo>=0;Yo--){var Ms=ts[Yo].char;if(Ms===Vs||Ms===Ct(Tt(wr))||Et(Tt(Ms))===wr){No.push([ts[Yo].seqIndex,$o]),ts.length=Yo;break}}}No.sort(function(eo,fo){return eo[0]-fo[0]})}for(var zs=0;zs<No.length;zs++){for(var Bl=No[zs],Wr=Bl[0],ds=Bl[1],Ll=!1,lo=0,Hs=Wr+1;Hs<ds;Hs++){var ps=un[Hs];if(bn[ps]&ws){Ll=!0;var Eo=bn[ps]&Xo?It:bt;if(Eo===qn){lo=Eo;break}}}if(Ll&&!lo){lo=er;for(var Qs=Wr-1;Qs>=0;Qs--){var Dl=un[Qs];if(bn[Dl]&ws){var So=bn[Dl]&Xo?It:bt;So!==qn?lo=So:lo=qn;break}}}if(lo){if(bn[un[Wr]]=bn[un[ds]]=lo,lo!==qn){for(var co=Wr+1;co<un.length;co++)if(!(bn[un[co]]&st)){ft(xn[un[co]])&Dt&&(bn[un[co]]=lo);break}}if(lo!==qn){for(var Go=ds+1;Go<un.length;Go++)if(!(bn[un[Go]]&st)){ft(xn[un[Go]])&Dt&&(bn[un[Go]]=lo);break}}}}for(var Io=0;Io<un.length;Io++)if(bn[un[Io]]&ot){for(var Ws=Io,js=Io,Ao=er,gs=Io-1;gs>=0;gs--)if(bn[un[gs]]&st)Ws=gs;else{Ao=bn[un[gs]]&Xo?It:bt;break}for(var ms=Kn,As=Io+1;As<un.length;As++)if(bn[un[As]]&(ot|st))js=As;else{ms=bn[un[As]]&Xo?It:bt;break}for(var uo=Ws;uo<=js;uo++)bn[un[uo]]=Ao===ms?Ao:qn;Io=js}}}for(var $a=Tn.start;$a<=Tn.end;$a++){var Is=rn[$a],Oo=bn[$a];if(Is&1?Oo&(bt|wt|Ut)&&rn[$a]++:Oo&It?rn[$a]++:Oo&(Ut|wt)&&(rn[$a]+=2),Oo&st&&(rn[$a]=$a===0?Tn.level:rn[$a-1]),$a===Tn.end||ft(xn[$a])&(jt|Ht))for(var ns=$a;ns>=0&&ft(xn[ns])&lt;ns--)rn[ns]=Tn.level}}return{levels:rn,paragraphs:wn};function Rs(eo,fo){for(var Kr=eo;Kr<xn.length;Kr++){var Jr=bn[Kr];if(Jr&(It|zt))return 1;if(Jr&(Ht|bt)||fo&&Jr===cn)return 0;if(Jr&it){var Co=Fl(Kr);Kr=Co===-1?xn.length:Co}}return 0}function Fl(eo){for(var fo=1,Kr=eo+1;Kr<xn.length;Kr++){var Jr=bn[Kr];if(Jr&Ht)break;if(Jr&cn){if(--fo===0)return Kr}else Jr&it&&fo++}return-1}}var zn="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",yn;function Wt(){if(!yn){var xn=xt(zn,!0),Dn=xn.map,Fn=xn.reverseMap;Fn.forEach(function(bn,jn){Dn.set(jn,bn)}),yn=Dn}}function _n(xn){return Wt(),yn.get(xn)||null}function gn(xn,Dn,Fn,bn){var jn=xn.length;Fn=Math.max(0,Fn==null?0:+Fn),bn=Math.min(jn-1,bn==null?jn-1:+bn);for(var Nt=new Map,kt=Fn;kt<=bn;kt++)if(Dn[kt]&1){var rn=_n(xn[kt]);rn!==null&&Nt.set(kt,rn)}return Nt}function vn(xn,Dn,Fn,bn){var jn=xn.length;Fn=Math.max(0,Fn==null?0:+Fn),bn=Math.min(jn-1,bn==null?jn-1:+bn);var Nt=[];return Dn.paragraphs.forEach(function(kt){var rn=Math.max(Fn,kt.start),Mn=Math.min(bn,kt.end);if(rn<Mn){for(var wn=Dn.levels.slice(rn,Mn+1),Tn=Mn;Tn>=rn&&ft(xn[Tn])&lt;Tn--)wn[Tn]=kt.level;for(var Gn=kt.level,Un=1/0,dn=0;dn<wn.length;dn++){var Vn=wn[dn];Vn>Gn&&(Gn=Vn),Vn<Un&&(Un=Vn|1)}for(var Qn=Gn;Qn>=Un;Qn--)for(var Nn=0;Nn<wn.length;Nn++)if(wn[Nn]>=Qn){for(var kn=Nn;Nn+1<wn.length&&wn[Nn+1]>=Qn;)Nn++;Nn>kn&&Nt.push([kn+rn,Nn+rn])}}}),Nt}function mn(xn,Dn,Fn,bn){var jn=Wn(xn,Dn,Fn,bn),Nt=[].concat(xn);return jn.forEach(function(kt,rn){Nt[rn]=(Dn.levels[kt]&1?_n(xn[kt]):null)||xn[kt]}),Nt.join("")}function Wn(xn,Dn,Fn,bn){for(var jn=vn(xn,Dn,Fn,bn),Nt=[],kt=0;kt<xn.length;kt++)Nt[kt]=kt;return jn.forEach(function(rn){for(var Mn=rn[0],wn=rn[1],Tn=Nt.slice(Mn,wn+1),Gn=Tn.length;Gn--;)Nt[wn-Gn]=Tn[Gn]}),Nt}return _.closingToOpeningBracket=Ct,_.getBidiCharType=ft,_.getBidiCharTypeName=pt,_.getCanonicalBracket=Tt,_.getEmbeddingLevels=In,_.getMirroredCharacter=_n,_.getMirroredCharactersMap=gn,_.getReorderSegments=vn,_.getReorderedIndices=Wn,_.getReorderedString=mn,_.openingToClosingBracket=Et,Object.defineProperty(_,"__esModule",{value:!0}),_}({});return _e}const voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(_e){const _=/^[ \t]*#include +<([\w\d./]+)>/gm;function tt(nt,rt){let it=ShaderChunk[rt];return it?expandShaderIncludes(it):nt}return _e.replace(_,tt)}const _lut=[];for(let _e=0;_e<256;_e++)_lut[_e]=(_e<16?"0":"")+_e.toString(16);function generateUUID(){const _e=Math.random()*4294967295|0,_=Math.random()*4294967295|0,tt=Math.random()*4294967295|0,nt=Math.random()*4294967295|0;return(_lut[_e&255]+_lut[_e>>8&255]+_lut[_e>>16&255]+_lut[_e>>24&255]+"-"+_lut[_&255]+_lut[_>>8&255]+"-"+_lut[_>>16&15|64]+_lut[_>>24&255]+"-"+_lut[tt&63|128]+_lut[tt>>8&255]+"-"+_lut[tt>>16&255]+_lut[tt>>24&255]+_lut[nt&255]+_lut[nt>>8&255]+_lut[nt>>16&255]+_lut[nt>>24&255]).toUpperCase()}const assign$3=Object.assign||function(){let _e=arguments[0];for(let _=1,tt=arguments.length;_<tt;_++){let nt=arguments[_];if(nt)for(let rt in nt)Object.prototype.hasOwnProperty.call(nt,rt)&&(_e[rt]=nt[rt])}return _e},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(_e,_){const tt=getKeyForOptions(_);let nt=CONSTRUCTOR_CACHE.get(_e);if(nt||CONSTRUCTOR_CACHE.set(_e,nt=Object.create(null)),nt[tt])return new nt[tt];const rt=`_onBeforeCompile${tt}`,it=function(lt,ct){_e.onBeforeCompile.call(this,lt,ct);const ut=this.customProgramCacheKey()+"|"+lt.vertexShader+"|"+lt.fragmentShader;let ft=SHADER_UPGRADE_CACHE[ut];if(!ft){const pt=upgradeShaders(this,lt,_,tt);ft=SHADER_UPGRADE_CACHE[ut]=pt}lt.vertexShader=ft.vertexShader,lt.fragmentShader=ft.fragmentShader,assign$3(lt.uniforms,this.uniforms),_.timeUniform&&(lt.uniforms[_.timeUniform]={get value(){return Date.now()-epoch}}),this[rt]&&this[rt](lt)},at=function(){return ot(_.chained?_e:_e.clone())},ot=function(lt){const ct=Object.create(lt,st);return Object.defineProperty(ct,"baseMaterial",{value:_e}),Object.defineProperty(ct,"id",{value:materialInstanceId++}),ct.uuid=generateUUID(),ct.uniforms=assign$3({},lt.uniforms,_.uniforms),ct.defines=assign$3({},lt.defines,_.defines),ct.defines[`TROIKA_DERIVED_MATERIAL_${tt}`]="",ct.extensions=assign$3({},lt.extensions,_.extensions),ct._listeners=void 0,ct},st={constructor:{value:at},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return _e.customProgramCacheKey()+"|"+tt}},onBeforeCompile:{get(){return it},set(lt){this[rt]=lt}},copy:{writable:!0,configurable:!0,value:function(lt){return _e.copy.call(this,lt),!_e.isShaderMaterial&&!_e.isDerivedMaterial&&(assign$3(this.extensions,lt.extensions),assign$3(this.defines,lt.defines),assign$3(this.uniforms,UniformsUtils.clone(lt.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const lt=new _e.constructor;return ot(lt).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let lt=this._depthMaterial;return lt||(lt=this._depthMaterial=createDerivedMaterial(_e.isDerivedMaterial?_e.getDepthMaterial():new MeshDepthMaterial({depthPacking:RGBADepthPacking}),_),lt.defines.IS_DEPTH_MATERIAL="",lt.uniforms=this.uniforms),lt}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let lt=this._distanceMaterial;return lt||(lt=this._distanceMaterial=createDerivedMaterial(_e.isDerivedMaterial?_e.getDistanceMaterial():new MeshDistanceMaterial,_),lt.defines.IS_DISTANCE_MATERIAL="",lt.uniforms=this.uniforms),lt}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:lt,_distanceMaterial:ct}=this;lt&&lt.dispose(),ct&&ct.dispose(),_e.dispose.call(this)}}};return nt[tt]=at,new at}function upgradeShaders(_e,{vertexShader:_,fragmentShader:tt},nt,rt){let{vertexDefs:it,vertexMainIntro:at,vertexMainOutro:ot,vertexTransform:st,fragmentDefs:lt,fragmentMainIntro:ct,fragmentMainOutro:ut,fragmentColorTransform:ft,customRewriter:pt,timeUniform:gt}=nt;if(it=it||"",at=at||"",ot=ot||"",lt=lt||"",ct=ct||"",ut=ut||"",(st||pt)&&(_=expandShaderIncludes(_)),(ft||pt)&&(tt=tt.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),tt=expandShaderIncludes(tt)),pt){let xt=pt({vertexShader:_,fragmentShader:tt});_=xt.vertexShader,tt=xt.fragmentShader}if(ft){let xt=[];tt=tt.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,yt=>(xt.push(yt),"")),ut=`${ft}
${xt.join(`
`)}
${ut}`}if(gt){const xt=`
uniform float ${gt};
`;it=xt+it,lt=xt+lt}return st&&(_=`vec3 troika_position_${rt};
vec3 troika_normal_${rt};
vec2 troika_uv_${rt};
${_}
`,it=`${it}
void troikaVertexTransform${rt}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${st}
}
`,at=`
troika_position_${rt} = vec3(position);
troika_normal_${rt} = vec3(normal);
troika_uv_${rt} = vec2(uv);
troikaVertexTransform${rt}(troika_position_${rt}, troika_normal_${rt}, troika_uv_${rt});
${at}
`,_=_.replace(/\b(position|normal|uv)\b/g,(xt,yt,mt,At)=>/\battribute\s+vec[23]\s+$/.test(At.substr(0,mt))?yt:`troika_${yt}_${rt}`),_e.map&&_e.map.channel>0||(_=_.replace(/\bMAP_UV\b/g,`troika_uv_${rt}`))),_=injectIntoShaderCode(_,rt,it,at,ot),tt=injectIntoShaderCode(tt,rt,lt,ct,ut),{vertexShader:_,fragmentShader:tt}}function injectIntoShaderCode(_e,_,tt,nt,rt){return(nt||rt||tt)&&(_e=_e.replace(voidMainRegExp,`
${tt}
void troikaOrigMain${_}() {`),_e+=`
void main() {
  ${nt}
  troikaOrigMain${_}();
  ${rt}
}`),_e}function optionsJsonReplacer(_e,_){return _e==="uniforms"?void 0:typeof _=="function"?_.toString():_}let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(_e){const _=JSON.stringify(_e,optionsJsonReplacer);let tt=optionsHashesToIds.get(_);return tt==null&&optionsHashesToIds.set(_,tt=++_idCtr),tt}function createTypesetter(_e,_,tt){const{defaultFontURL:nt}=tt,rt=Object.create(null),it=1/0,at=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,ot="[^\\S\\u00A0]",st=new RegExp(`${ot}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function lt(At,vt){function Et(){const Ct=Tt=>{console.error(`Failure loading font ${At}${At===nt?"":"; trying fallback"}`,Tt),At!==nt&&(At=nt,Et())};try{const Tt=new XMLHttpRequest;Tt.open("get",At,!0),Tt.responseType="arraybuffer",Tt.onload=function(){if(Tt.status>=400)Ct(new Error(Tt.statusText));else if(Tt.status>0)try{const bt=_e(Tt.response);vt(bt)}catch(bt){Ct(bt)}},Tt.onerror=Ct,Tt.send()}catch(Tt){Ct(Tt)}}Et()}function ct(At,vt){At||(At=nt);let Et=rt[At];Et?Et.pending?Et.pending.push(vt):vt(Et):(rt[At]={pending:[vt]},lt(At,Ct=>{let Tt=rt[At].pending;rt[At]=Ct,Tt.forEach(bt=>bt(Ct))}))}function ut({text:At="",font:vt=nt,sdfGlyphSize:Et=64,fontSize:Ct=1,letterSpacing:Tt=0,lineHeight:bt="normal",maxWidth:It=it,direction:wt,textAlign:Rt="left",textIndent:Ft=0,whiteSpace:Ut="normal",overflowWrap:Gt="normal",anchorX:Ht=0,anchorY:jt=0,includeCaretPositions:Xt=!1,chunkedBoundsSize:Jt=8192,colorRanges:Dt=null},zt,$t=!1){const Lt=xt(),Vt={fontLoad:0,typesetting:0};At.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),At=At.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),Ct=+Ct,Tt=+Tt,It=+It,bt=bt||"normal",Ft=+Ft,ct(vt,tn=>{const an=isFinite(It);let on=null,sn=null,ln=null,cn=null,In=null,zn=null,yn=null,Wt=0,_n=0,gn=Ut!=="nowrap";const{ascender:vn,descender:mn,unitsPerEm:Wn,lineGap:xn,capHeight:Dn,xHeight:Fn}=tn;Vt.fontLoad=xt()-Lt;const bn=xt(),jn=Ct/Wn;bt==="normal"&&(bt=(vn-mn+xn)/Wn),bt=bt*Ct;const Nt=(bt-(vn-mn)*jn)/2,kt=-(vn*jn+Nt),rn=Math.min(bt,(vn-mn)*jn),Mn=(vn+mn)/2*jn-rn/2;let wn=Ft,Tn=new yt;const Gn=[Tn];tn.forEachGlyph(At,Ct,Tt,(Vn,Qn,Nn)=>{const kn=At.charAt(Nn),$n=Vn.advanceWidth*jn,Yn=Tn.count;let tr;if("isEmpty"in Vn||(Vn.isWhitespace=!!kn&&new RegExp(ot).test(kn),Vn.canBreakAfter=!!kn&&st.test(kn),Vn.isEmpty=Vn.xMin===Vn.xMax||Vn.yMin===Vn.yMax||at.test(kn)),!Vn.isWhitespace&&!Vn.isEmpty&&_n++,gn&&an&&!Vn.isWhitespace&&Qn+$n+wn>It&&Yn){if(Tn.glyphAt(Yn-1).glyphObj.canBreakAfter)tr=new yt,wn=-Qn;else for(let pn=Yn;pn--;)if(pn===0&&Gt==="break-word"){tr=new yt,wn=-Qn;break}else if(Tn.glyphAt(pn).glyphObj.canBreakAfter){tr=Tn.splitAt(pn+1);const An=tr.glyphAt(0).x;wn-=An;for(let Hn=tr.count;Hn--;)tr.glyphAt(Hn).x-=An;break}tr&&(Tn.isSoftWrapped=!0,Tn=tr,Gn.push(Tn),Wt=It)}let nn=Tn.glyphAt(Tn.count);nn.glyphObj=Vn,nn.x=Qn+wn,nn.width=$n,nn.charIndex=Nn,kn===`
`&&(Tn=new yt,Gn.push(Tn),wn=-(Qn+$n+Tt*Ct)+Ft)}),Gn.forEach(Vn=>{for(let Qn=Vn.count;Qn--;){let{glyphObj:Nn,x:kn,width:$n}=Vn.glyphAt(Qn);if(!Nn.isWhitespace){Vn.width=kn+$n,Vn.width>Wt&&(Wt=Vn.width);return}}});let Un=0,dn=0;if(Ht&&(typeof Ht=="number"?Un=-Ht:typeof Ht=="string"&&(Un=-Wt*(Ht==="left"?0:Ht==="center"?.5:Ht==="right"?1:pt(Ht)))),jt){if(typeof jt=="number")dn=-jt;else if(typeof jt=="string"){let Vn=Gn.length*bt;dn=jt==="top"?0:jt==="top-baseline"?-kt:jt==="top-cap"?-kt-Dn*jn:jt==="top-ex"?-kt-Fn*jn:jt==="middle"?Vn/2:jt==="bottom"?Vn:jt==="bottom-baseline"?Vn-Nt+mn*jn:pt(jt)*Vn}}if(!$t){const Vn=_.getEmbeddingLevels(At,wt);on=new Uint16Array(_n),sn=new Float32Array(_n*2),ln={},zn=[it,it,-it,-it],yn=[];let Qn=kt;Xt&&(In=new Float32Array(At.length*3)),Dt&&(cn=new Uint8Array(_n*3));let Nn=0,kn=-1,$n=-1,Yn,tr;if(Gn.forEach((nn,pn)=>{let{count:An,width:Hn}=nn;if(An>0){let Jn=0;for(let Mr=An;Mr--&&nn.glyphAt(Mr).glyphObj.isWhitespace;)Jn++;let Ar=0,Er=0;if(Rt==="center")Ar=(Wt-Hn)/2;else if(Rt==="right")Ar=Wt-Hn;else if(Rt==="justify"&&nn.isSoftWrapped){let Mr=0;for(let _r=An-Jn;_r--;)nn.glyphAt(_r).glyphObj.isWhitespace&&Mr++;Er=(Wt-Hn)/Mr}if(Er||Ar){let Mr=0;for(let _r=0;_r<An;_r++){let ba=nn.glyphAt(_r);const _i=ba.glyphObj;ba.x+=Ar+Mr,Er!==0&&_i.isWhitespace&&_r<An-Jn&&(Mr+=Er,ba.width+=Er)}}const Tr=_.getReorderSegments(At,Vn,nn.glyphAt(0).charIndex,nn.glyphAt(nn.count-1).charIndex);for(let Mr=0;Mr<Tr.length;Mr++){const[_r,ba]=Tr[Mr];let _i=1/0,Ir=-1/0;for(let Nr=0;Nr<An;Nr++)if(nn.glyphAt(Nr).charIndex>=_r){let Qr=Nr,Lr=Nr;for(;Lr<An;Lr++){let sr=nn.glyphAt(Lr);if(sr.charIndex>ba)break;Lr<An-Jn&&(_i=Math.min(_i,sr.x),Ir=Math.max(Ir,sr.x+sr.width))}for(let sr=Qr;sr<Lr;sr++){const Xr=nn.glyphAt(sr);Xr.x=Ir-(Xr.x+Xr.width-_i)}break}}let Rr;const Pr=Mr=>Rr=Mr;for(let Mr=0;Mr<An;Mr++){let _r=nn.glyphAt(Mr);Rr=_r.glyphObj;const ba=Rr.index,_i=Vn.levels[_r.charIndex]&1;if(_i){const Ir=_.getMirroredCharacter(At[_r.charIndex]);Ir&&tn.forEachGlyph(Ir,0,0,Pr)}if(Xt){const{charIndex:Ir}=_r,Nr=_r.x+Un,Qr=_r.x+_r.width+Un;In[Ir*3]=_i?Qr:Nr,In[Ir*3+1]=_i?Nr:Qr,In[Ir*3+2]=Qn+Mn+dn;const Lr=Ir-kn;Lr>1&&gt(In,kn,Lr),kn=Ir}if(Dt){const{charIndex:Ir}=_r;for(;Ir>$n;)$n++,Dt.hasOwnProperty($n)&&(tr=Dt[$n])}if(!Rr.isWhitespace&&!Rr.isEmpty){const Ir=Nn++;ln[ba]||(ln[ba]={path:Rr.path,pathBounds:[Rr.xMin,Rr.yMin,Rr.xMax,Rr.yMax]});const Nr=_r.x+Un,Qr=Qn+dn;sn[Ir*2]=Nr,sn[Ir*2+1]=Qr;const Lr=Nr+Rr.xMin*jn,sr=Qr+Rr.yMin*jn,Xr=Nr+Rr.xMax*jn,go=Qr+Rr.yMax*jn;Lr<zn[0]&&(zn[0]=Lr),sr<zn[1]&&(zn[1]=sr),Xr>zn[2]&&(zn[2]=Xr),go>zn[3]&&(zn[3]=go),Ir%Jt===0&&(Yn={start:Ir,end:Ir,rect:[it,it,-it,-it]},yn.push(Yn)),Yn.end++;const Ot=Yn.rect;if(Lr<Ot[0]&&(Ot[0]=Lr),sr<Ot[1]&&(Ot[1]=sr),Xr>Ot[2]&&(Ot[2]=Xr),go>Ot[3]&&(Ot[3]=go),on[Ir]=ba,Dt){const Pt=Ir*3;cn[Pt]=tr>>16&255,cn[Pt+1]=tr>>8&255,cn[Pt+2]=tr&255}}}}Qn-=bt}),In){const nn=At.length-kn;nn>1&&gt(In,kn,nn)}}Vt.typesetting=xt()-bn,zt({glyphIds:on,glyphPositions:sn,glyphData:ln,caretPositions:In,caretHeight:rn,glyphColors:cn,chunkedBounds:yn,fontSize:Ct,unitsPerEm:Wn,ascender:vn*jn,descender:mn*jn,capHeight:Dn*jn,xHeight:Fn*jn,lineHeight:bt,topBaseline:kt,blockBounds:[Un,dn-Gn.length*bt,Un+Wt,dn],visibleBounds:zn,timings:Vt})})}function ft(At,vt){ut(At,Et=>{const[Ct,Tt,bt,It]=Et.blockBounds;vt({width:bt-Ct,height:It-Tt})},{metricsOnly:!0})}function pt(At){let vt=At.match(/^([\d.]+)%$/),Et=vt?parseFloat(vt[1]):NaN;return isNaN(Et)?0:Et/100}function gt(At,vt,Et){const Ct=At[vt*3],Tt=At[vt*3+1],bt=At[vt*3+2],It=(Tt-Ct)/Et;for(let wt=0;wt<Et;wt++){const Rt=(vt+wt)*3;At[Rt]=Ct+It*wt,At[Rt+1]=Ct+It*(wt+1),At[Rt+2]=bt}}function xt(){return(self.performance||Date).now()}function yt(){this.data=[]}const mt=["glyphObj","x","width","charIndex"];return yt.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/mt.length)},glyphAt(At){let vt=yt.flyweight;return vt.data=this.data,vt.index=At,vt},splitAt(At){let vt=new yt;return vt.data=this.data.splice(At*mt.length),vt}},yt.flyweight=mt.reduce((At,vt,Et,Ct)=>(Object.defineProperty(At,vt,{get(){return this.data[this.index*mt.length+Et]},set(Tt){this.data[this.index*mt.length+Et]=Tt}}),At),{data:null,index:0}),{typeset:ut,measure:ft,loadFont:ct}}const now=()=>(self.performance||Date).now(),mainThreadGenerator=SDFGenerator();let warned;function generateSDF(_e,_,tt,nt,rt,it,at,ot,st,lt,ct=!0){return ct?generateSDF_GL(_e,_,tt,nt,rt,it,at,ot,st,lt).then(null,ut=>(warned||(console.warn("WebGL SDF generation failed, falling back to JS",ut),warned=!0),generateSDF_JS_Worker(_e,_,tt,nt,rt,it,at,ot,st,lt))):generateSDF_JS_Worker(_e,_,tt,nt,rt,it,at,ot,st,lt)}const queue=[],chunkTimeBudget=5;let timer=0;function nextChunk(){const _e=now();for(;queue.length&&now()-_e<chunkTimeBudget;)queue.shift()();timer=queue.length?setTimeout(nextChunk,0):0}const generateSDF_GL=(..._e)=>new Promise((_,tt)=>{queue.push(()=>{const nt=now();try{mainThreadGenerator.webgl.generateIntoCanvas(..._e),_({timing:now()-nt})}catch(rt){tt(rt)}}),timer||(timer=setTimeout(nextChunk,0))}),threadCount=4,idleTimeout=2e3,threads={};let callNum=0;function generateSDF_JS_Worker(_e,_,tt,nt,rt,it,at,ot,st,lt){const ct="TroikaTextSDFGenerator_JS_"+callNum++%threadCount;let ut=threads[ct];return ut||(ut=threads[ct]={workerModule:defineWorkerModule({name:ct,workerId:ct,dependencies:[SDFGenerator,now],init(ft,pt){const gt=ft().javascript.generate;return function(...xt){const yt=pt();return{textureData:gt(...xt),timing:pt()-yt}}},getTransferables(ft){return[ft.textureData.buffer]}}),requests:0,idleTimer:null}),ut.requests++,clearTimeout(ut.idleTimer),ut.workerModule(_e,_,tt,nt,rt,it).then(({textureData:ft,timing:pt})=>{const gt=now(),xt=new Uint8Array(ft.length*4);for(let yt=0;yt<ft.length;yt++)xt[yt*4+lt]=ft[yt];return mainThreadGenerator.webglUtils.renderImageData(at,xt,ot,st,_e,_,1<<3-lt),pt+=now()-gt,--ut.requests===0&&(ut.idleTimer=setTimeout(()=>{terminateWorker(ct)},idleTimeout)),{timing:pt}})}function warmUpSDFCanvas(_e){_e._warm||(mainThreadGenerator.webgl.isSupported(_e),_e._warm=!0)}const resizeWebGLCanvasWithoutClearing=mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function typrFactory(){return typeof window>"u"&&(self.window=self),function(_e){var _={parse:function(rt){var it=_._bin,at=new Uint8Array(rt);if(it.readASCII(at,0,4)=="ttcf"){var ot=4;it.readUshort(at,ot),ot+=2,it.readUshort(at,ot),ot+=2;var st=it.readUint(at,ot);ot+=4;for(var lt=[],ct=0;ct<st;ct++){var ut=it.readUint(at,ot);ot+=4,lt.push(_._readFont(at,ut))}return lt}return[_._readFont(at,0)]},_readFont:function(rt,it){var at=_._bin,ot=it;at.readFixed(rt,it),it+=4;var st=at.readUshort(rt,it);it+=2,at.readUshort(rt,it),it+=2,at.readUshort(rt,it),it+=2,at.readUshort(rt,it),it+=2;for(var lt=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],ct={_data:rt,_offset:ot},ut={},ft=0;ft<st;ft++){var pt=at.readASCII(rt,it,4);it+=4,at.readUint(rt,it),it+=4;var gt=at.readUint(rt,it);it+=4;var xt=at.readUint(rt,it);it+=4,ut[pt]={offset:gt,length:xt}}for(ft=0;ft<lt.length;ft++){var yt=lt[ft];ut[yt]&&(ct[yt.trim()]=_[yt.trim()].parse(rt,ut[yt].offset,ut[yt].length,ct))}return ct},_tabOffset:function(rt,it,at){for(var ot=_._bin,st=ot.readUshort(rt,at+4),lt=at+12,ct=0;ct<st;ct++){var ut=ot.readASCII(rt,lt,4);lt+=4,ot.readUint(rt,lt),lt+=4;var ft=ot.readUint(rt,lt);if(lt+=4,ot.readUint(rt,lt),lt+=4,ut==it)return ft}return 0}};_._bin={readFixed:function(rt,it){return(rt[it]<<8|rt[it+1])+(rt[it+2]<<8|rt[it+3])/65540},readF2dot14:function(rt,it){return _._bin.readShort(rt,it)/16384},readInt:function(rt,it){return _._bin._view(rt).getInt32(it)},readInt8:function(rt,it){return _._bin._view(rt).getInt8(it)},readShort:function(rt,it){return _._bin._view(rt).getInt16(it)},readUshort:function(rt,it){return _._bin._view(rt).getUint16(it)},readUshorts:function(rt,it,at){for(var ot=[],st=0;st<at;st++)ot.push(_._bin.readUshort(rt,it+2*st));return ot},readUint:function(rt,it){return _._bin._view(rt).getUint32(it)},readUint64:function(rt,it){return 4294967296*_._bin.readUint(rt,it)+_._bin.readUint(rt,it+4)},readASCII:function(rt,it,at){for(var ot="",st=0;st<at;st++)ot+=String.fromCharCode(rt[it+st]);return ot},readUnicode:function(rt,it,at){for(var ot="",st=0;st<at;st++){var lt=rt[it++]<<8|rt[it++];ot+=String.fromCharCode(lt)}return ot},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(rt,it,at){var ot=_._bin._tdec;return ot&&it==0&&at==rt.length?ot.decode(rt):_._bin.readASCII(rt,it,at)},readBytes:function(rt,it,at){for(var ot=[],st=0;st<at;st++)ot.push(rt[it+st]);return ot},readASCIIArray:function(rt,it,at){for(var ot=[],st=0;st<at;st++)ot.push(String.fromCharCode(rt[it+st]));return ot},_view:function(rt){return rt._dataView||(rt._dataView=rt.buffer?new DataView(rt.buffer,rt.byteOffset,rt.byteLength):new DataView(new Uint8Array(rt).buffer))}},_._lctf={},_._lctf.parse=function(rt,it,at,ot,st){var lt=_._bin,ct={},ut=it;lt.readFixed(rt,it),it+=4;var ft=lt.readUshort(rt,it);it+=2;var pt=lt.readUshort(rt,it);it+=2;var gt=lt.readUshort(rt,it);return it+=2,ct.scriptList=_._lctf.readScriptList(rt,ut+ft),ct.featureList=_._lctf.readFeatureList(rt,ut+pt),ct.lookupList=_._lctf.readLookupList(rt,ut+gt,st),ct},_._lctf.readLookupList=function(rt,it,at){var ot=_._bin,st=it,lt=[],ct=ot.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++){var ft=ot.readUshort(rt,it);it+=2;var pt=_._lctf.readLookupTable(rt,st+ft,at);lt.push(pt)}return lt},_._lctf.readLookupTable=function(rt,it,at){var ot=_._bin,st=it,lt={tabs:[]};lt.ltype=ot.readUshort(rt,it),it+=2,lt.flag=ot.readUshort(rt,it),it+=2;var ct=ot.readUshort(rt,it);it+=2;for(var ut=lt.ltype,ft=0;ft<ct;ft++){var pt=ot.readUshort(rt,it);it+=2;var gt=at(rt,ut,st+pt,lt);lt.tabs.push(gt)}return lt},_._lctf.numOfOnes=function(rt){for(var it=0,at=0;at<32;at++)rt>>>at&1&&it++;return it},_._lctf.readClassDef=function(rt,it){var at=_._bin,ot=[],st=at.readUshort(rt,it);if(it+=2,st==1){var lt=at.readUshort(rt,it);it+=2;var ct=at.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++)ot.push(lt+ut),ot.push(lt+ut),ot.push(at.readUshort(rt,it)),it+=2}if(st==2){var ft=at.readUshort(rt,it);for(it+=2,ut=0;ut<ft;ut++)ot.push(at.readUshort(rt,it)),it+=2,ot.push(at.readUshort(rt,it)),it+=2,ot.push(at.readUshort(rt,it)),it+=2}return ot},_._lctf.getInterval=function(rt,it){for(var at=0;at<rt.length;at+=3){var ot=rt[at],st=rt[at+1];if(rt[at+2],ot<=it&&it<=st)return at}return-1},_._lctf.readCoverage=function(rt,it){var at=_._bin,ot={};ot.fmt=at.readUshort(rt,it),it+=2;var st=at.readUshort(rt,it);return it+=2,ot.fmt==1&&(ot.tab=at.readUshorts(rt,it,st)),ot.fmt==2&&(ot.tab=at.readUshorts(rt,it,3*st)),ot},_._lctf.coverageIndex=function(rt,it){var at=rt.tab;if(rt.fmt==1)return at.indexOf(it);if(rt.fmt==2){var ot=_._lctf.getInterval(at,it);if(ot!=-1)return at[ot+2]+(it-at[ot])}return-1},_._lctf.readFeatureList=function(rt,it){var at=_._bin,ot=it,st=[],lt=at.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=at.readASCII(rt,it,4);it+=4;var ft=at.readUshort(rt,it);it+=2;var pt=_._lctf.readFeatureTable(rt,ot+ft);pt.tag=ut.trim(),st.push(pt)}return st},_._lctf.readFeatureTable=function(rt,it){var at=_._bin,ot=it,st={},lt=at.readUshort(rt,it);it+=2,lt>0&&(st.featureParams=ot+lt);var ct=at.readUshort(rt,it);it+=2,st.tab=[];for(var ut=0;ut<ct;ut++)st.tab.push(at.readUshort(rt,it+2*ut));return st},_._lctf.readScriptList=function(rt,it){var at=_._bin,ot=it,st={},lt=at.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=at.readASCII(rt,it,4);it+=4;var ft=at.readUshort(rt,it);it+=2,st[ut.trim()]=_._lctf.readScriptTable(rt,ot+ft)}return st},_._lctf.readScriptTable=function(rt,it){var at=_._bin,ot=it,st={},lt=at.readUshort(rt,it);it+=2,st.default=_._lctf.readLangSysTable(rt,ot+lt);var ct=at.readUshort(rt,it);it+=2;for(var ut=0;ut<ct;ut++){var ft=at.readASCII(rt,it,4);it+=4;var pt=at.readUshort(rt,it);it+=2,st[ft.trim()]=_._lctf.readLangSysTable(rt,ot+pt)}return st},_._lctf.readLangSysTable=function(rt,it){var at=_._bin,ot={};at.readUshort(rt,it),it+=2,ot.reqFeature=at.readUshort(rt,it),it+=2;var st=at.readUshort(rt,it);return it+=2,ot.features=at.readUshorts(rt,it,st),ot},_.CFF={},_.CFF.parse=function(rt,it,at){var ot=_._bin;(rt=new Uint8Array(rt.buffer,it,at))[it=0],rt[++it],rt[++it],rt[++it],it++;var st=[];it=_.CFF.readIndex(rt,it,st);for(var lt=[],ct=0;ct<st.length-1;ct++)lt.push(ot.readASCII(rt,it+st[ct],st[ct+1]-st[ct]));it+=st[st.length-1];var ut=[];it=_.CFF.readIndex(rt,it,ut);var ft=[];for(ct=0;ct<ut.length-1;ct++)ft.push(_.CFF.readDict(rt,it+ut[ct],it+ut[ct+1]));it+=ut[ut.length-1];var pt=ft[0],gt=[];it=_.CFF.readIndex(rt,it,gt);var xt=[];for(ct=0;ct<gt.length-1;ct++)xt.push(ot.readASCII(rt,it+gt[ct],gt[ct+1]-gt[ct]));if(it+=gt[gt.length-1],_.CFF.readSubrs(rt,it,pt),pt.CharStrings){it=pt.CharStrings,gt=[],it=_.CFF.readIndex(rt,it,gt);var yt=[];for(ct=0;ct<gt.length-1;ct++)yt.push(ot.readBytes(rt,it+gt[ct],gt[ct+1]-gt[ct]));pt.CharStrings=yt}if(pt.ROS){it=pt.FDArray;var mt=[];for(it=_.CFF.readIndex(rt,it,mt),pt.FDArray=[],ct=0;ct<mt.length-1;ct++){var At=_.CFF.readDict(rt,it+mt[ct],it+mt[ct+1]);_.CFF._readFDict(rt,At,xt),pt.FDArray.push(At)}it+=mt[mt.length-1],it=pt.FDSelect,pt.FDSelect=[];var vt=rt[it];if(it++,vt!=3)throw vt;var Et=ot.readUshort(rt,it);for(it+=2,ct=0;ct<Et+1;ct++)pt.FDSelect.push(ot.readUshort(rt,it),rt[it+2]),it+=3}return pt.Encoding&&(pt.Encoding=_.CFF.readEncoding(rt,pt.Encoding,pt.CharStrings.length)),pt.charset&&(pt.charset=_.CFF.readCharset(rt,pt.charset,pt.CharStrings.length)),_.CFF._readFDict(rt,pt,xt),pt},_.CFF._readFDict=function(rt,it,at){var ot;for(var st in it.Private&&(ot=it.Private[1],it.Private=_.CFF.readDict(rt,ot,ot+it.Private[0]),it.Private.Subrs&&_.CFF.readSubrs(rt,ot+it.Private.Subrs,it.Private)),it)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(st)!=-1&&(it[st]=at[it[st]-426+35])},_.CFF.readSubrs=function(rt,it,at){var ot=_._bin,st=[];it=_.CFF.readIndex(rt,it,st);var lt,ct=st.length;lt=ct<1240?107:ct<33900?1131:32768,at.Bias=lt,at.Subrs=[];for(var ut=0;ut<st.length-1;ut++)at.Subrs.push(ot.readBytes(rt,it+st[ut],st[ut+1]-st[ut]))},_.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],_.CFF.glyphByUnicode=function(rt,it){for(var at=0;at<rt.charset.length;at++)if(rt.charset[at]==it)return at;return-1},_.CFF.glyphBySE=function(rt,it){return it<0||it>255?-1:_.CFF.glyphByUnicode(rt,_.CFF.tableSE[it])},_.CFF.readEncoding=function(rt,it,at){_._bin;var ot=[".notdef"],st=rt[it];if(it++,st!=0)throw"error: unknown encoding format: "+st;var lt=rt[it];it++;for(var ct=0;ct<lt;ct++)ot.push(rt[it+ct]);return ot},_.CFF.readCharset=function(rt,it,at){var ot=_._bin,st=[".notdef"],lt=rt[it];if(it++,lt==0)for(var ct=0;ct<at;ct++){var ut=ot.readUshort(rt,it);it+=2,st.push(ut)}else{if(lt!=1&&lt!=2)throw"error: format: "+lt;for(;st.length<at;){ut=ot.readUshort(rt,it),it+=2;var ft=0;for(lt==1?(ft=rt[it],it++):(ft=ot.readUshort(rt,it),it+=2),ct=0;ct<=ft;ct++)st.push(ut),ut++}}return st},_.CFF.readIndex=function(rt,it,at){var ot=_._bin,st=ot.readUshort(rt,it)+1,lt=rt[it+=2];if(it++,lt==1)for(var ct=0;ct<st;ct++)at.push(rt[it+ct]);else if(lt==2)for(ct=0;ct<st;ct++)at.push(ot.readUshort(rt,it+2*ct));else if(lt==3)for(ct=0;ct<st;ct++)at.push(16777215&ot.readUint(rt,it+3*ct-1));else if(st!=1)throw"unsupported offset size: "+lt+", count: "+st;return(it+=st*lt)-1},_.CFF.getCharString=function(rt,it,at){var ot=_._bin,st=rt[it],lt=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var ct=1,ut=null,ft=null;st<=20&&(ut=st,ct=1),st==12&&(ut=100*st+lt,ct=2),21<=st&&st<=27&&(ut=st,ct=1),st==28&&(ft=ot.readShort(rt,it+1),ct=3),29<=st&&st<=31&&(ut=st,ct=1),32<=st&&st<=246&&(ft=st-139,ct=1),247<=st&&st<=250&&(ft=256*(st-247)+lt+108,ct=2),251<=st&&st<=254&&(ft=256*-(st-251)-lt-108,ct=2),st==255&&(ft=ot.readInt(rt,it+1)/65535,ct=5),at.val=ft??"o"+ut,at.size=ct},_.CFF.readCharString=function(rt,it,at){for(var ot=it+at,st=_._bin,lt=[];it<ot;){var ct=rt[it],ut=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var ft=1,pt=null,gt=null;ct<=20&&(pt=ct,ft=1),ct==12&&(pt=100*ct+ut,ft=2),ct!=19&&ct!=20||(pt=ct,ft=2),21<=ct&&ct<=27&&(pt=ct,ft=1),ct==28&&(gt=st.readShort(rt,it+1),ft=3),29<=ct&&ct<=31&&(pt=ct,ft=1),32<=ct&&ct<=246&&(gt=ct-139,ft=1),247<=ct&&ct<=250&&(gt=256*(ct-247)+ut+108,ft=2),251<=ct&&ct<=254&&(gt=256*-(ct-251)-ut-108,ft=2),ct==255&&(gt=st.readInt(rt,it+1)/65535,ft=5),lt.push(gt??"o"+pt),it+=ft}return lt},_.CFF.readDict=function(rt,it,at){for(var ot=_._bin,st={},lt=[];it<at;){var ct=rt[it],ut=rt[it+1];rt[it+2],rt[it+3],rt[it+4];var ft=1,pt=null,gt=null;if(ct==28&&(gt=ot.readShort(rt,it+1),ft=3),ct==29&&(gt=ot.readInt(rt,it+1),ft=5),32<=ct&&ct<=246&&(gt=ct-139,ft=1),247<=ct&&ct<=250&&(gt=256*(ct-247)+ut+108,ft=2),251<=ct&&ct<=254&&(gt=256*-(ct-251)-ut-108,ft=2),ct==255)throw gt=ot.readInt(rt,it+1)/65535,ft=5,"unknown number";if(ct==30){var xt=[];for(ft=1;;){var yt=rt[it+ft];ft++;var mt=yt>>4,At=15&yt;if(mt!=15&&xt.push(mt),At!=15&&xt.push(At),At==15)break}for(var vt="",Et=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],Ct=0;Ct<xt.length;Ct++)vt+=Et[xt[Ct]];gt=parseFloat(vt)}ct<=21&&(pt=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][ct],ft=1,ct==12&&(pt=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][ut],ft=2)),pt!=null?(st[pt]=lt.length==1?lt[0]:lt,lt=[]):lt.push(gt),it+=ft}return st},_.cmap={},_.cmap.parse=function(rt,it,at){rt=new Uint8Array(rt.buffer,it,at),it=0;var ot=_._bin,st={};ot.readUshort(rt,it),it+=2;var lt=ot.readUshort(rt,it);it+=2;var ct=[];st.tables=[];for(var ut=0;ut<lt;ut++){var ft=ot.readUshort(rt,it);it+=2;var pt=ot.readUshort(rt,it);it+=2;var gt=ot.readUint(rt,it);it+=4;var xt="p"+ft+"e"+pt,yt=ct.indexOf(gt);if(yt==-1){var mt;yt=st.tables.length,ct.push(gt);var At=ot.readUshort(rt,gt);At==0?mt=_.cmap.parse0(rt,gt):At==4?mt=_.cmap.parse4(rt,gt):At==6?mt=_.cmap.parse6(rt,gt):At==12?mt=_.cmap.parse12(rt,gt):console.debug("unknown format: "+At,ft,pt,gt),st.tables.push(mt)}if(st[xt]!=null)throw"multiple tables for one platform+encoding";st[xt]=yt}return st},_.cmap.parse0=function(rt,it){var at=_._bin,ot={};ot.format=at.readUshort(rt,it),it+=2;var st=at.readUshort(rt,it);it+=2,at.readUshort(rt,it),it+=2,ot.map=[];for(var lt=0;lt<st-6;lt++)ot.map.push(rt[it+lt]);return ot},_.cmap.parse4=function(rt,it){var at=_._bin,ot=it,st={};st.format=at.readUshort(rt,it),it+=2;var lt=at.readUshort(rt,it);it+=2,at.readUshort(rt,it),it+=2;var ct=at.readUshort(rt,it);it+=2;var ut=ct/2;st.searchRange=at.readUshort(rt,it),it+=2,st.entrySelector=at.readUshort(rt,it),it+=2,st.rangeShift=at.readUshort(rt,it),it+=2,st.endCount=at.readUshorts(rt,it,ut),it+=2*ut,it+=2,st.startCount=at.readUshorts(rt,it,ut),it+=2*ut,st.idDelta=[];for(var ft=0;ft<ut;ft++)st.idDelta.push(at.readShort(rt,it)),it+=2;for(st.idRangeOffset=at.readUshorts(rt,it,ut),it+=2*ut,st.glyphIdArray=[];it<ot+lt;)st.glyphIdArray.push(at.readUshort(rt,it)),it+=2;return st},_.cmap.parse6=function(rt,it){var at=_._bin,ot={};ot.format=at.readUshort(rt,it),it+=2,at.readUshort(rt,it),it+=2,at.readUshort(rt,it),it+=2,ot.firstCode=at.readUshort(rt,it),it+=2;var st=at.readUshort(rt,it);it+=2,ot.glyphIdArray=[];for(var lt=0;lt<st;lt++)ot.glyphIdArray.push(at.readUshort(rt,it)),it+=2;return ot},_.cmap.parse12=function(rt,it){var at=_._bin,ot={};ot.format=at.readUshort(rt,it),it+=2,it+=2,at.readUint(rt,it),it+=4,at.readUint(rt,it),it+=4;var st=at.readUint(rt,it);it+=4,ot.groups=[];for(var lt=0;lt<st;lt++){var ct=it+12*lt,ut=at.readUint(rt,ct+0),ft=at.readUint(rt,ct+4),pt=at.readUint(rt,ct+8);ot.groups.push([ut,ft,pt])}return ot},_.glyf={},_.glyf.parse=function(rt,it,at,ot){for(var st=[],lt=0;lt<ot.maxp.numGlyphs;lt++)st.push(null);return st},_.glyf._parseGlyf=function(rt,it){var at=_._bin,ot=rt._data,st=_._tabOffset(ot,"glyf",rt._offset)+rt.loca[it];if(rt.loca[it]==rt.loca[it+1])return null;var lt={};if(lt.noc=at.readShort(ot,st),st+=2,lt.xMin=at.readShort(ot,st),st+=2,lt.yMin=at.readShort(ot,st),st+=2,lt.xMax=at.readShort(ot,st),st+=2,lt.yMax=at.readShort(ot,st),st+=2,lt.xMin>=lt.xMax||lt.yMin>=lt.yMax)return null;if(lt.noc>0){lt.endPts=[];for(var ct=0;ct<lt.noc;ct++)lt.endPts.push(at.readUshort(ot,st)),st+=2;var ut=at.readUshort(ot,st);if(st+=2,ot.length-st<ut)return null;lt.instructions=at.readBytes(ot,st,ut),st+=ut;var ft=lt.endPts[lt.noc-1]+1;for(lt.flags=[],ct=0;ct<ft;ct++){var pt=ot[st];if(st++,lt.flags.push(pt),(8&pt)!=0){var gt=ot[st];st++;for(var xt=0;xt<gt;xt++)lt.flags.push(pt),ct++}}for(lt.xs=[],ct=0;ct<ft;ct++){var yt=(2&lt.flags[ct])!=0,mt=(16&lt.flags[ct])!=0;yt?(lt.xs.push(mt?ot[st]:-ot[st]),st++):mt?lt.xs.push(0):(lt.xs.push(at.readShort(ot,st)),st+=2)}for(lt.ys=[],ct=0;ct<ft;ct++)yt=(4&lt.flags[ct])!=0,mt=(32&lt.flags[ct])!=0,yt?(lt.ys.push(mt?ot[st]:-ot[st]),st++):mt?lt.ys.push(0):(lt.ys.push(at.readShort(ot,st)),st+=2);var At=0,vt=0;for(ct=0;ct<ft;ct++)At+=lt.xs[ct],vt+=lt.ys[ct],lt.xs[ct]=At,lt.ys[ct]=vt}else{var Et;lt.parts=[];do{Et=at.readUshort(ot,st),st+=2;var Ct={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(lt.parts.push(Ct),Ct.glyphIndex=at.readUshort(ot,st),st+=2,1&Et){var Tt=at.readShort(ot,st);st+=2;var bt=at.readShort(ot,st);st+=2}else Tt=at.readInt8(ot,st),st++,bt=at.readInt8(ot,st),st++;2&Et?(Ct.m.tx=Tt,Ct.m.ty=bt):(Ct.p1=Tt,Ct.p2=bt),8&Et?(Ct.m.a=Ct.m.d=at.readF2dot14(ot,st),st+=2):64&Et?(Ct.m.a=at.readF2dot14(ot,st),st+=2,Ct.m.d=at.readF2dot14(ot,st),st+=2):128&Et&&(Ct.m.a=at.readF2dot14(ot,st),st+=2,Ct.m.b=at.readF2dot14(ot,st),st+=2,Ct.m.c=at.readF2dot14(ot,st),st+=2,Ct.m.d=at.readF2dot14(ot,st),st+=2)}while(32&Et);if(256&Et){var It=at.readUshort(ot,st);for(st+=2,lt.instr=[],ct=0;ct<It;ct++)lt.instr.push(ot[st]),st++}}return lt},_.GPOS={},_.GPOS.parse=function(rt,it,at,ot){return _._lctf.parse(rt,it,at,ot,_.GPOS.subt)},_.GPOS.subt=function(rt,it,at,ot){var st=_._bin,lt=at,ct={};if(ct.fmt=st.readUshort(rt,at),at+=2,it==1||it==2||it==3||it==7||it==8&&ct.fmt<=2){var ut=st.readUshort(rt,at);at+=2,ct.coverage=_._lctf.readCoverage(rt,ut+lt)}if(it==1&&ct.fmt==1){var ft=st.readUshort(rt,at);at+=2;var pt=_._lctf.numOfOnes(ft);ft!=0&&(ct.pos=_.GPOS.readValueRecord(rt,at,ft))}else if(it==2&&ct.fmt>=1&&ct.fmt<=2){ft=st.readUshort(rt,at),at+=2;var gt=st.readUshort(rt,at);at+=2,pt=_._lctf.numOfOnes(ft);var xt=_._lctf.numOfOnes(gt);if(ct.fmt==1){ct.pairsets=[];var yt=st.readUshort(rt,at);at+=2;for(var mt=0;mt<yt;mt++){var At=lt+st.readUshort(rt,at);at+=2;var vt=st.readUshort(rt,At);At+=2;for(var Et=[],Ct=0;Ct<vt;Ct++){var Tt=st.readUshort(rt,At);At+=2,ft!=0&&(Ut=_.GPOS.readValueRecord(rt,At,ft),At+=2*pt),gt!=0&&(Gt=_.GPOS.readValueRecord(rt,At,gt),At+=2*xt),Et.push({gid2:Tt,val1:Ut,val2:Gt})}ct.pairsets.push(Et)}}if(ct.fmt==2){var bt=st.readUshort(rt,at);at+=2;var It=st.readUshort(rt,at);at+=2;var wt=st.readUshort(rt,at);at+=2;var Rt=st.readUshort(rt,at);for(at+=2,ct.classDef1=_._lctf.readClassDef(rt,lt+bt),ct.classDef2=_._lctf.readClassDef(rt,lt+It),ct.matrix=[],mt=0;mt<wt;mt++){var Ft=[];for(Ct=0;Ct<Rt;Ct++){var Ut=null,Gt=null;ft!=0&&(Ut=_.GPOS.readValueRecord(rt,at,ft),at+=2*pt),gt!=0&&(Gt=_.GPOS.readValueRecord(rt,at,gt),at+=2*xt),Ft.push({val1:Ut,val2:Gt})}ct.matrix.push(Ft)}}}else{if(it==9&&ct.fmt==1){var Ht=st.readUshort(rt,at);at+=2;var jt=st.readUint(rt,at);if(at+=4,ot.ltype==9)ot.ltype=Ht;else if(ot.ltype!=Ht)throw"invalid extension substitution";return _.GPOS.subt(rt,ot.ltype,lt+jt)}console.debug("unsupported GPOS table LookupType",it,"format",ct.fmt)}return ct},_.GPOS.readValueRecord=function(rt,it,at){var ot=_._bin,st=[];return st.push(1&at?ot.readShort(rt,it):0),it+=1&at?2:0,st.push(2&at?ot.readShort(rt,it):0),it+=2&at?2:0,st.push(4&at?ot.readShort(rt,it):0),it+=4&at?2:0,st.push(8&at?ot.readShort(rt,it):0),it+=8&at?2:0,st},_.GSUB={},_.GSUB.parse=function(rt,it,at,ot){return _._lctf.parse(rt,it,at,ot,_.GSUB.subt)},_.GSUB.subt=function(rt,it,at,ot){var st=_._bin,lt=at,ct={};if(ct.fmt=st.readUshort(rt,at),at+=2,it!=1&&it!=4&&it!=5&&it!=6)return null;if(it==1||it==4||it==5&&ct.fmt<=2||it==6&&ct.fmt<=2){var ut=st.readUshort(rt,at);at+=2,ct.coverage=_._lctf.readCoverage(rt,lt+ut)}if(it==1&&ct.fmt>=1&&ct.fmt<=2){if(ct.fmt==1)ct.delta=st.readShort(rt,at),at+=2;else if(ct.fmt==2){var ft=st.readUshort(rt,at);at+=2,ct.newg=st.readUshorts(rt,at,ft),at+=2*ct.newg.length}}else if(it==4){ct.vals=[],ft=st.readUshort(rt,at),at+=2;for(var pt=0;pt<ft;pt++){var gt=st.readUshort(rt,at);at+=2,ct.vals.push(_.GSUB.readLigatureSet(rt,lt+gt))}}else if(it==5&&ct.fmt==2){if(ct.fmt==2){var xt=st.readUshort(rt,at);at+=2,ct.cDef=_._lctf.readClassDef(rt,lt+xt),ct.scset=[];var yt=st.readUshort(rt,at);for(at+=2,pt=0;pt<yt;pt++){var mt=st.readUshort(rt,at);at+=2,ct.scset.push(mt==0?null:_.GSUB.readSubClassSet(rt,lt+mt))}}}else if(it==6&&ct.fmt==3){if(ct.fmt==3){for(pt=0;pt<3;pt++){ft=st.readUshort(rt,at),at+=2;for(var At=[],vt=0;vt<ft;vt++)At.push(_._lctf.readCoverage(rt,lt+st.readUshort(rt,at+2*vt)));at+=2*ft,pt==0&&(ct.backCvg=At),pt==1&&(ct.inptCvg=At),pt==2&&(ct.ahedCvg=At)}ft=st.readUshort(rt,at),at+=2,ct.lookupRec=_.GSUB.readSubstLookupRecords(rt,at,ft)}}else{if(it==7&&ct.fmt==1){var Et=st.readUshort(rt,at);at+=2;var Ct=st.readUint(rt,at);if(at+=4,ot.ltype==9)ot.ltype=Et;else if(ot.ltype!=Et)throw"invalid extension substitution";return _.GSUB.subt(rt,ot.ltype,lt+Ct)}console.debug("unsupported GSUB table LookupType",it,"format",ct.fmt)}return ct},_.GSUB.readSubClassSet=function(rt,it){var at=_._bin.readUshort,ot=it,st=[],lt=at(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=at(rt,it);it+=2,st.push(_.GSUB.readSubClassRule(rt,ot+ut))}return st},_.GSUB.readSubClassRule=function(rt,it){var at=_._bin.readUshort,ot={},st=at(rt,it),lt=at(rt,it+=2);it+=2,ot.input=[];for(var ct=0;ct<st-1;ct++)ot.input.push(at(rt,it)),it+=2;return ot.substLookupRecords=_.GSUB.readSubstLookupRecords(rt,it,lt),ot},_.GSUB.readSubstLookupRecords=function(rt,it,at){for(var ot=_._bin.readUshort,st=[],lt=0;lt<at;lt++)st.push(ot(rt,it),ot(rt,it+2)),it+=4;return st},_.GSUB.readChainSubClassSet=function(rt,it){var at=_._bin,ot=it,st=[],lt=at.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=at.readUshort(rt,it);it+=2,st.push(_.GSUB.readChainSubClassRule(rt,ot+ut))}return st},_.GSUB.readChainSubClassRule=function(rt,it){for(var at=_._bin,ot={},st=["backtrack","input","lookahead"],lt=0;lt<st.length;lt++){var ct=at.readUshort(rt,it);it+=2,lt==1&&ct--,ot[st[lt]]=at.readUshorts(rt,it,ct),it+=2*ot[st[lt]].length}return ct=at.readUshort(rt,it),it+=2,ot.subst=at.readUshorts(rt,it,2*ct),it+=2*ot.subst.length,ot},_.GSUB.readLigatureSet=function(rt,it){var at=_._bin,ot=it,st=[],lt=at.readUshort(rt,it);it+=2;for(var ct=0;ct<lt;ct++){var ut=at.readUshort(rt,it);it+=2,st.push(_.GSUB.readLigature(rt,ot+ut))}return st},_.GSUB.readLigature=function(rt,it){var at=_._bin,ot={chain:[]};ot.nglyph=at.readUshort(rt,it),it+=2;var st=at.readUshort(rt,it);it+=2;for(var lt=0;lt<st-1;lt++)ot.chain.push(at.readUshort(rt,it)),it+=2;return ot},_.head={},_.head.parse=function(rt,it,at){var ot=_._bin,st={};return ot.readFixed(rt,it),it+=4,st.fontRevision=ot.readFixed(rt,it),it+=4,ot.readUint(rt,it),it+=4,ot.readUint(rt,it),it+=4,st.flags=ot.readUshort(rt,it),it+=2,st.unitsPerEm=ot.readUshort(rt,it),it+=2,st.created=ot.readUint64(rt,it),it+=8,st.modified=ot.readUint64(rt,it),it+=8,st.xMin=ot.readShort(rt,it),it+=2,st.yMin=ot.readShort(rt,it),it+=2,st.xMax=ot.readShort(rt,it),it+=2,st.yMax=ot.readShort(rt,it),it+=2,st.macStyle=ot.readUshort(rt,it),it+=2,st.lowestRecPPEM=ot.readUshort(rt,it),it+=2,st.fontDirectionHint=ot.readShort(rt,it),it+=2,st.indexToLocFormat=ot.readShort(rt,it),it+=2,st.glyphDataFormat=ot.readShort(rt,it),it+=2,st},_.hhea={},_.hhea.parse=function(rt,it,at){var ot=_._bin,st={};return ot.readFixed(rt,it),it+=4,st.ascender=ot.readShort(rt,it),it+=2,st.descender=ot.readShort(rt,it),it+=2,st.lineGap=ot.readShort(rt,it),it+=2,st.advanceWidthMax=ot.readUshort(rt,it),it+=2,st.minLeftSideBearing=ot.readShort(rt,it),it+=2,st.minRightSideBearing=ot.readShort(rt,it),it+=2,st.xMaxExtent=ot.readShort(rt,it),it+=2,st.caretSlopeRise=ot.readShort(rt,it),it+=2,st.caretSlopeRun=ot.readShort(rt,it),it+=2,st.caretOffset=ot.readShort(rt,it),it+=2,it+=8,st.metricDataFormat=ot.readShort(rt,it),it+=2,st.numberOfHMetrics=ot.readUshort(rt,it),it+=2,st},_.hmtx={},_.hmtx.parse=function(rt,it,at,ot){for(var st=_._bin,lt={aWidth:[],lsBearing:[]},ct=0,ut=0,ft=0;ft<ot.maxp.numGlyphs;ft++)ft<ot.hhea.numberOfHMetrics&&(ct=st.readUshort(rt,it),it+=2,ut=st.readShort(rt,it),it+=2),lt.aWidth.push(ct),lt.lsBearing.push(ut);return lt},_.kern={},_.kern.parse=function(rt,it,at,ot){var st=_._bin,lt=st.readUshort(rt,it);if(it+=2,lt==1)return _.kern.parseV1(rt,it-2,at,ot);var ct=st.readUshort(rt,it);it+=2;for(var ut={glyph1:[],rval:[]},ft=0;ft<ct;ft++){it+=2,at=st.readUshort(rt,it),it+=2;var pt=st.readUshort(rt,it);it+=2;var gt=pt>>>8;if((gt&=15)!=0)throw"unknown kern table format: "+gt;it=_.kern.readFormat0(rt,it,ut)}return ut},_.kern.parseV1=function(rt,it,at,ot){var st=_._bin;st.readFixed(rt,it),it+=4;var lt=st.readUint(rt,it);it+=4;for(var ct={glyph1:[],rval:[]},ut=0;ut<lt;ut++){st.readUint(rt,it),it+=4;var ft=st.readUshort(rt,it);it+=2,st.readUshort(rt,it),it+=2;var pt=ft>>>8;if((pt&=15)!=0)throw"unknown kern table format: "+pt;it=_.kern.readFormat0(rt,it,ct)}return ct},_.kern.readFormat0=function(rt,it,at){var ot=_._bin,st=-1,lt=ot.readUshort(rt,it);it+=2,ot.readUshort(rt,it),it+=2,ot.readUshort(rt,it),it+=2,ot.readUshort(rt,it),it+=2;for(var ct=0;ct<lt;ct++){var ut=ot.readUshort(rt,it);it+=2;var ft=ot.readUshort(rt,it);it+=2;var pt=ot.readShort(rt,it);it+=2,ut!=st&&(at.glyph1.push(ut),at.rval.push({glyph2:[],vals:[]}));var gt=at.rval[at.rval.length-1];gt.glyph2.push(ft),gt.vals.push(pt),st=ut}return it},_.loca={},_.loca.parse=function(rt,it,at,ot){var st=_._bin,lt=[],ct=ot.head.indexToLocFormat,ut=ot.maxp.numGlyphs+1;if(ct==0)for(var ft=0;ft<ut;ft++)lt.push(st.readUshort(rt,it+(ft<<1))<<1);if(ct==1)for(ft=0;ft<ut;ft++)lt.push(st.readUint(rt,it+(ft<<2)));return lt},_.maxp={},_.maxp.parse=function(rt,it,at){var ot=_._bin,st={},lt=ot.readUint(rt,it);return it+=4,st.numGlyphs=ot.readUshort(rt,it),it+=2,lt==65536&&(st.maxPoints=ot.readUshort(rt,it),it+=2,st.maxContours=ot.readUshort(rt,it),it+=2,st.maxCompositePoints=ot.readUshort(rt,it),it+=2,st.maxCompositeContours=ot.readUshort(rt,it),it+=2,st.maxZones=ot.readUshort(rt,it),it+=2,st.maxTwilightPoints=ot.readUshort(rt,it),it+=2,st.maxStorage=ot.readUshort(rt,it),it+=2,st.maxFunctionDefs=ot.readUshort(rt,it),it+=2,st.maxInstructionDefs=ot.readUshort(rt,it),it+=2,st.maxStackElements=ot.readUshort(rt,it),it+=2,st.maxSizeOfInstructions=ot.readUshort(rt,it),it+=2,st.maxComponentElements=ot.readUshort(rt,it),it+=2,st.maxComponentDepth=ot.readUshort(rt,it),it+=2),st},_.name={},_.name.parse=function(rt,it,at){var ot=_._bin,st={};ot.readUshort(rt,it),it+=2;var lt=ot.readUshort(rt,it);it+=2,ot.readUshort(rt,it);for(var ct,ut=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],ft=it+=2,pt=0;pt<lt;pt++){var gt=ot.readUshort(rt,it);it+=2;var xt=ot.readUshort(rt,it);it+=2;var yt=ot.readUshort(rt,it);it+=2;var mt=ot.readUshort(rt,it);it+=2;var At=ot.readUshort(rt,it);it+=2;var vt=ot.readUshort(rt,it);it+=2;var Et,Ct=ut[mt],Tt=ft+12*lt+vt;if(gt==0)Et=ot.readUnicode(rt,Tt,At/2);else if(gt==3&&xt==0)Et=ot.readUnicode(rt,Tt,At/2);else if(xt==0)Et=ot.readASCII(rt,Tt,At);else if(xt==1)Et=ot.readUnicode(rt,Tt,At/2);else if(xt==3)Et=ot.readUnicode(rt,Tt,At/2);else{if(gt!=1)throw"unknown encoding "+xt+", platformID: "+gt;Et=ot.readASCII(rt,Tt,At),console.debug("reading unknown MAC encoding "+xt+" as ASCII")}var bt="p"+gt+","+yt.toString(16);st[bt]==null&&(st[bt]={}),st[bt][Ct!==void 0?Ct:mt]=Et,st[bt]._lang=yt}for(var It in st)if(st[It].postScriptName!=null&&st[It]._lang==1033)return st[It];for(var It in st)if(st[It].postScriptName!=null&&st[It]._lang==0)return st[It];for(var It in st)if(st[It].postScriptName!=null&&st[It]._lang==3084)return st[It];for(var It in st)if(st[It].postScriptName!=null)return st[It];for(var It in st){ct=It;break}return console.debug("returning name table with languageID "+st[ct]._lang),st[ct]},_["OS/2"]={},_["OS/2"].parse=function(rt,it,at){var ot=_._bin.readUshort(rt,it);it+=2;var st={};if(ot==0)_["OS/2"].version0(rt,it,st);else if(ot==1)_["OS/2"].version1(rt,it,st);else if(ot==2||ot==3||ot==4)_["OS/2"].version2(rt,it,st);else{if(ot!=5)throw"unknown OS/2 table version: "+ot;_["OS/2"].version5(rt,it,st)}return st},_["OS/2"].version0=function(rt,it,at){var ot=_._bin;return at.xAvgCharWidth=ot.readShort(rt,it),it+=2,at.usWeightClass=ot.readUshort(rt,it),it+=2,at.usWidthClass=ot.readUshort(rt,it),it+=2,at.fsType=ot.readUshort(rt,it),it+=2,at.ySubscriptXSize=ot.readShort(rt,it),it+=2,at.ySubscriptYSize=ot.readShort(rt,it),it+=2,at.ySubscriptXOffset=ot.readShort(rt,it),it+=2,at.ySubscriptYOffset=ot.readShort(rt,it),it+=2,at.ySuperscriptXSize=ot.readShort(rt,it),it+=2,at.ySuperscriptYSize=ot.readShort(rt,it),it+=2,at.ySuperscriptXOffset=ot.readShort(rt,it),it+=2,at.ySuperscriptYOffset=ot.readShort(rt,it),it+=2,at.yStrikeoutSize=ot.readShort(rt,it),it+=2,at.yStrikeoutPosition=ot.readShort(rt,it),it+=2,at.sFamilyClass=ot.readShort(rt,it),it+=2,at.panose=ot.readBytes(rt,it,10),it+=10,at.ulUnicodeRange1=ot.readUint(rt,it),it+=4,at.ulUnicodeRange2=ot.readUint(rt,it),it+=4,at.ulUnicodeRange3=ot.readUint(rt,it),it+=4,at.ulUnicodeRange4=ot.readUint(rt,it),it+=4,at.achVendID=[ot.readInt8(rt,it),ot.readInt8(rt,it+1),ot.readInt8(rt,it+2),ot.readInt8(rt,it+3)],it+=4,at.fsSelection=ot.readUshort(rt,it),it+=2,at.usFirstCharIndex=ot.readUshort(rt,it),it+=2,at.usLastCharIndex=ot.readUshort(rt,it),it+=2,at.sTypoAscender=ot.readShort(rt,it),it+=2,at.sTypoDescender=ot.readShort(rt,it),it+=2,at.sTypoLineGap=ot.readShort(rt,it),it+=2,at.usWinAscent=ot.readUshort(rt,it),it+=2,at.usWinDescent=ot.readUshort(rt,it),it+=2},_["OS/2"].version1=function(rt,it,at){var ot=_._bin;return it=_["OS/2"].version0(rt,it,at),at.ulCodePageRange1=ot.readUint(rt,it),it+=4,at.ulCodePageRange2=ot.readUint(rt,it),it+=4},_["OS/2"].version2=function(rt,it,at){var ot=_._bin;return it=_["OS/2"].version1(rt,it,at),at.sxHeight=ot.readShort(rt,it),it+=2,at.sCapHeight=ot.readShort(rt,it),it+=2,at.usDefault=ot.readUshort(rt,it),it+=2,at.usBreak=ot.readUshort(rt,it),it+=2,at.usMaxContext=ot.readUshort(rt,it),it+=2},_["OS/2"].version5=function(rt,it,at){var ot=_._bin;return it=_["OS/2"].version2(rt,it,at),at.usLowerOpticalPointSize=ot.readUshort(rt,it),it+=2,at.usUpperOpticalPointSize=ot.readUshort(rt,it),it+=2},_.post={},_.post.parse=function(rt,it,at){var ot=_._bin,st={};return st.version=ot.readFixed(rt,it),it+=4,st.italicAngle=ot.readFixed(rt,it),it+=4,st.underlinePosition=ot.readShort(rt,it),it+=2,st.underlineThickness=ot.readShort(rt,it),it+=2,st},_==null&&(_={}),_.U==null&&(_.U={}),_.U.codeToGlyph=function(rt,it){var at=rt.cmap,ot=-1;if(at.p0e4!=null?ot=at.p0e4:at.p3e1!=null?ot=at.p3e1:at.p1e0!=null?ot=at.p1e0:at.p0e3!=null&&(ot=at.p0e3),ot==-1)throw"no familiar platform and encoding!";var st=at.tables[ot];if(st.format==0)return it>=st.map.length?0:st.map[it];if(st.format==4){for(var lt=-1,ct=0;ct<st.endCount.length;ct++)if(it<=st.endCount[ct]){lt=ct;break}return lt==-1||st.startCount[lt]>it?0:65535&(st.idRangeOffset[lt]!=0?st.glyphIdArray[it-st.startCount[lt]+(st.idRangeOffset[lt]>>1)-(st.idRangeOffset.length-lt)]:it+st.idDelta[lt])}if(st.format==12){if(it>st.groups[st.groups.length-1][1])return 0;for(ct=0;ct<st.groups.length;ct++){var ut=st.groups[ct];if(ut[0]<=it&&it<=ut[1])return ut[2]+(it-ut[0])}return 0}throw"unknown cmap table format "+st.format},_.U.glyphToPath=function(rt,it){var at={cmds:[],crds:[]};if(rt.SVG&&rt.SVG.entries[it]){var ot=rt.SVG.entries[it];return ot==null?at:(typeof ot=="string"&&(ot=_.SVG.toPath(ot),rt.SVG.entries[it]=ot),ot)}if(rt.CFF){var st={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:rt.CFF.Private?rt.CFF.Private.defaultWidthX:0,open:!1},lt=rt.CFF,ct=rt.CFF.Private;if(lt.ROS){for(var ut=0;lt.FDSelect[ut+2]<=it;)ut+=2;ct=lt.FDArray[lt.FDSelect[ut+1]].Private}_.U._drawCFF(rt.CFF.CharStrings[it],st,lt,ct,at)}else rt.glyf&&_.U._drawGlyf(it,rt,at);return at},_.U._drawGlyf=function(rt,it,at){var ot=it.glyf[rt];ot==null&&(ot=it.glyf[rt]=_.glyf._parseGlyf(it,rt)),ot!=null&&(ot.noc>-1?_.U._simpleGlyph(ot,at):_.U._compoGlyph(ot,it,at))},_.U._simpleGlyph=function(rt,it){for(var at=0;at<rt.noc;at++){for(var ot=at==0?0:rt.endPts[at-1]+1,st=rt.endPts[at],lt=ot;lt<=st;lt++){var ct=lt==ot?st:lt-1,ut=lt==st?ot:lt+1,ft=1&rt.flags[lt],pt=1&rt.flags[ct],gt=1&rt.flags[ut],xt=rt.xs[lt],yt=rt.ys[lt];if(lt==ot)if(ft){if(!pt){_.U.P.moveTo(it,xt,yt);continue}_.U.P.moveTo(it,rt.xs[ct],rt.ys[ct])}else pt?_.U.P.moveTo(it,rt.xs[ct],rt.ys[ct]):_.U.P.moveTo(it,(rt.xs[ct]+xt)/2,(rt.ys[ct]+yt)/2);ft?pt&&_.U.P.lineTo(it,xt,yt):gt?_.U.P.qcurveTo(it,xt,yt,rt.xs[ut],rt.ys[ut]):_.U.P.qcurveTo(it,xt,yt,(xt+rt.xs[ut])/2,(yt+rt.ys[ut])/2)}_.U.P.closePath(it)}},_.U._compoGlyph=function(rt,it,at){for(var ot=0;ot<rt.parts.length;ot++){var st={cmds:[],crds:[]},lt=rt.parts[ot];_.U._drawGlyf(lt.glyphIndex,it,st);for(var ct=lt.m,ut=0;ut<st.crds.length;ut+=2){var ft=st.crds[ut],pt=st.crds[ut+1];at.crds.push(ft*ct.a+pt*ct.b+ct.tx),at.crds.push(ft*ct.c+pt*ct.d+ct.ty)}for(ut=0;ut<st.cmds.length;ut++)at.cmds.push(st.cmds[ut])}},_.U._getGlyphClass=function(rt,it){var at=_._lctf.getInterval(it,rt);return at==-1?0:it[at+2]},_.U.getPairAdjustment=function(rt,it,at){var ot=!1;if(rt.GPOS)for(var st=rt.GPOS,lt=st.lookupList,ct=st.featureList,ut=[],ft=0;ft<ct.length;ft++){var pt=ct[ft];if(pt.tag=="kern"){ot=!0;for(var gt=0;gt<pt.tab.length;gt++)if(!ut[pt.tab[gt]]){ut[pt.tab[gt]]=!0;for(var xt=lt[pt.tab[gt]],yt=0;yt<xt.tabs.length;yt++)if(xt.tabs[yt]!=null){var mt,At=xt.tabs[yt];if((!At.coverage||(mt=_._lctf.coverageIndex(At.coverage,it))!=-1)&&xt.ltype!=1){if(xt.ltype==2){var vt=null;if(At.fmt==1){var Et=At.pairsets[mt];for(ft=0;ft<Et.length;ft++)Et[ft].gid2==at&&(vt=Et[ft])}else if(At.fmt==2){var Ct=_.U._getGlyphClass(it,At.classDef1),Tt=_.U._getGlyphClass(at,At.classDef2);vt=At.matrix[Ct][Tt]}if(vt){var bt=0;return vt.val1&&vt.val1[2]&&(bt+=vt.val1[2]),vt.val2&&vt.val2[0]&&(bt+=vt.val2[0]),bt}}}}}}}if(rt.kern&&!ot){var It=rt.kern.glyph1.indexOf(it);if(It!=-1){var wt=rt.kern.rval[It].glyph2.indexOf(at);if(wt!=-1)return rt.kern.rval[It].vals[wt]}}return 0},_.U._applySubs=function(rt,it,at,ot){for(var st=rt.length-it-1,lt=0;lt<at.tabs.length;lt++)if(at.tabs[lt]!=null){var ct,ut=at.tabs[lt];if(!ut.coverage||(ct=_._lctf.coverageIndex(ut.coverage,rt[it]))!=-1){if(at.ltype==1)rt[it],ut.fmt==1?rt[it]=rt[it]+ut.delta:rt[it]=ut.newg[ct];else if(at.ltype==4)for(var ft=ut.vals[ct],pt=0;pt<ft.length;pt++){var gt=ft[pt],xt=gt.chain.length;if(!(xt>st)){for(var yt=!0,mt=0,At=0;At<xt;At++){for(;rt[it+mt+(1+At)]==-1;)mt++;gt.chain[At]!=rt[it+mt+(1+At)]&&(yt=!1)}if(yt){for(rt[it]=gt.nglyph,At=0;At<xt+mt;At++)rt[it+At+1]=-1;break}}}else if(at.ltype==5&&ut.fmt==2)for(var vt=_._lctf.getInterval(ut.cDef,rt[it]),Et=ut.cDef[vt+2],Ct=ut.scset[Et],Tt=0;Tt<Ct.length;Tt++){var bt=Ct[Tt],It=bt.input;if(!(It.length>st)){for(yt=!0,At=0;At<It.length;At++){var wt=_._lctf.getInterval(ut.cDef,rt[it+1+At]);if(vt==-1&&ut.cDef[wt+2]!=It[At]){yt=!1;break}}if(yt){var Rt=bt.substLookupRecords;for(pt=0;pt<Rt.length;pt+=2)Rt[pt],Rt[pt+1]}}}else if(at.ltype==6&&ut.fmt==3){if(!_.U._glsCovered(rt,ut.backCvg,it-ut.backCvg.length)||!_.U._glsCovered(rt,ut.inptCvg,it)||!_.U._glsCovered(rt,ut.ahedCvg,it+ut.inptCvg.length))continue;var Ft=ut.lookupRec;for(Tt=0;Tt<Ft.length;Tt+=2){vt=Ft[Tt];var Ut=ot[Ft[Tt+1]];_.U._applySubs(rt,it+vt,Ut,ot)}}}}},_.U._glsCovered=function(rt,it,at){for(var ot=0;ot<it.length;ot++)if(_._lctf.coverageIndex(it[ot],rt[at+ot])==-1)return!1;return!0},_.U.glyphsToPath=function(rt,it,at){for(var ot={cmds:[],crds:[]},st=0,lt=0;lt<it.length;lt++){var ct=it[lt];if(ct!=-1){for(var ut=lt<it.length-1&&it[lt+1]!=-1?it[lt+1]:0,ft=_.U.glyphToPath(rt,ct),pt=0;pt<ft.crds.length;pt+=2)ot.crds.push(ft.crds[pt]+st),ot.crds.push(ft.crds[pt+1]);for(at&&ot.cmds.push(at),pt=0;pt<ft.cmds.length;pt++)ot.cmds.push(ft.cmds[pt]);at&&ot.cmds.push("X"),st+=rt.hmtx.aWidth[ct],lt<it.length-1&&(st+=_.U.getPairAdjustment(rt,ct,ut))}}return ot},_.U.P={},_.U.P.moveTo=function(rt,it,at){rt.cmds.push("M"),rt.crds.push(it,at)},_.U.P.lineTo=function(rt,it,at){rt.cmds.push("L"),rt.crds.push(it,at)},_.U.P.curveTo=function(rt,it,at,ot,st,lt,ct){rt.cmds.push("C"),rt.crds.push(it,at,ot,st,lt,ct)},_.U.P.qcurveTo=function(rt,it,at,ot,st){rt.cmds.push("Q"),rt.crds.push(it,at,ot,st)},_.U.P.closePath=function(rt){rt.cmds.push("Z")},_.U._drawCFF=function(rt,it,at,ot,st){for(var lt=it.stack,ct=it.nStems,ut=it.haveWidth,ft=it.width,pt=it.open,gt=0,xt=it.x,yt=it.y,mt=0,At=0,vt=0,Et=0,Ct=0,Tt=0,bt=0,It=0,wt=0,Rt=0,Ft={val:0,size:0};gt<rt.length;){_.CFF.getCharString(rt,gt,Ft);var Ut=Ft.val;if(gt+=Ft.size,Ut=="o1"||Ut=="o18")lt.length%2!=0&&!ut&&(ft=lt.shift()+ot.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0;else if(Ut=="o3"||Ut=="o23")lt.length%2!=0&&!ut&&(ft=lt.shift()+ot.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0;else if(Ut=="o4")lt.length>1&&!ut&&(ft=lt.shift()+ot.nominalWidthX,ut=!0),pt&&_.U.P.closePath(st),yt+=lt.pop(),_.U.P.moveTo(st,xt,yt),pt=!0;else if(Ut=="o5")for(;lt.length>0;)xt+=lt.shift(),yt+=lt.shift(),_.U.P.lineTo(st,xt,yt);else if(Ut=="o6"||Ut=="o7")for(var Gt=lt.length,Ht=Ut=="o6",jt=0;jt<Gt;jt++){var Xt=lt.shift();Ht?xt+=Xt:yt+=Xt,Ht=!Ht,_.U.P.lineTo(st,xt,yt)}else if(Ut=="o8"||Ut=="o24"){Gt=lt.length;for(var Jt=0;Jt+6<=Gt;)mt=xt+lt.shift(),At=yt+lt.shift(),vt=mt+lt.shift(),Et=At+lt.shift(),xt=vt+lt.shift(),yt=Et+lt.shift(),_.U.P.curveTo(st,mt,At,vt,Et,xt,yt),Jt+=6;Ut=="o24"&&(xt+=lt.shift(),yt+=lt.shift(),_.U.P.lineTo(st,xt,yt))}else{if(Ut=="o11")break;if(Ut=="o1234"||Ut=="o1235"||Ut=="o1236"||Ut=="o1237")Ut=="o1234"&&(At=yt,vt=(mt=xt+lt.shift())+lt.shift(),Rt=Et=At+lt.shift(),Tt=Et,It=yt,xt=(bt=(Ct=(wt=vt+lt.shift())+lt.shift())+lt.shift())+lt.shift(),_.U.P.curveTo(st,mt,At,vt,Et,wt,Rt),_.U.P.curveTo(st,Ct,Tt,bt,It,xt,yt)),Ut=="o1235"&&(mt=xt+lt.shift(),At=yt+lt.shift(),vt=mt+lt.shift(),Et=At+lt.shift(),wt=vt+lt.shift(),Rt=Et+lt.shift(),Ct=wt+lt.shift(),Tt=Rt+lt.shift(),bt=Ct+lt.shift(),It=Tt+lt.shift(),xt=bt+lt.shift(),yt=It+lt.shift(),lt.shift(),_.U.P.curveTo(st,mt,At,vt,Et,wt,Rt),_.U.P.curveTo(st,Ct,Tt,bt,It,xt,yt)),Ut=="o1236"&&(mt=xt+lt.shift(),At=yt+lt.shift(),vt=mt+lt.shift(),Rt=Et=At+lt.shift(),Tt=Et,bt=(Ct=(wt=vt+lt.shift())+lt.shift())+lt.shift(),It=Tt+lt.shift(),xt=bt+lt.shift(),_.U.P.curveTo(st,mt,At,vt,Et,wt,Rt),_.U.P.curveTo(st,Ct,Tt,bt,It,xt,yt)),Ut=="o1237"&&(mt=xt+lt.shift(),At=yt+lt.shift(),vt=mt+lt.shift(),Et=At+lt.shift(),wt=vt+lt.shift(),Rt=Et+lt.shift(),Ct=wt+lt.shift(),Tt=Rt+lt.shift(),bt=Ct+lt.shift(),It=Tt+lt.shift(),Math.abs(bt-xt)>Math.abs(It-yt)?xt=bt+lt.shift():yt=It+lt.shift(),_.U.P.curveTo(st,mt,At,vt,Et,wt,Rt),_.U.P.curveTo(st,Ct,Tt,bt,It,xt,yt));else if(Ut=="o14"){if(lt.length>0&&!ut&&(ft=lt.shift()+at.nominalWidthX,ut=!0),lt.length==4){var Dt=lt.shift(),zt=lt.shift(),$t=lt.shift(),Lt=lt.shift(),Vt=_.CFF.glyphBySE(at,$t),tn=_.CFF.glyphBySE(at,Lt);_.U._drawCFF(at.CharStrings[Vt],it,at,ot,st),it.x=Dt,it.y=zt,_.U._drawCFF(at.CharStrings[tn],it,at,ot,st)}pt&&(_.U.P.closePath(st),pt=!1)}else if(Ut=="o19"||Ut=="o20")lt.length%2!=0&&!ut&&(ft=lt.shift()+ot.nominalWidthX),ct+=lt.length>>1,lt.length=0,ut=!0,gt+=ct+7>>3;else if(Ut=="o21")lt.length>2&&!ut&&(ft=lt.shift()+ot.nominalWidthX,ut=!0),yt+=lt.pop(),xt+=lt.pop(),pt&&_.U.P.closePath(st),_.U.P.moveTo(st,xt,yt),pt=!0;else if(Ut=="o22")lt.length>1&&!ut&&(ft=lt.shift()+ot.nominalWidthX,ut=!0),xt+=lt.pop(),pt&&_.U.P.closePath(st),_.U.P.moveTo(st,xt,yt),pt=!0;else if(Ut=="o25"){for(;lt.length>6;)xt+=lt.shift(),yt+=lt.shift(),_.U.P.lineTo(st,xt,yt);mt=xt+lt.shift(),At=yt+lt.shift(),vt=mt+lt.shift(),Et=At+lt.shift(),xt=vt+lt.shift(),yt=Et+lt.shift(),_.U.P.curveTo(st,mt,At,vt,Et,xt,yt)}else if(Ut=="o26")for(lt.length%2&&(xt+=lt.shift());lt.length>0;)mt=xt,At=yt+lt.shift(),xt=vt=mt+lt.shift(),yt=(Et=At+lt.shift())+lt.shift(),_.U.P.curveTo(st,mt,At,vt,Et,xt,yt);else if(Ut=="o27")for(lt.length%2&&(yt+=lt.shift());lt.length>0;)At=yt,vt=(mt=xt+lt.shift())+lt.shift(),Et=At+lt.shift(),xt=vt+lt.shift(),yt=Et,_.U.P.curveTo(st,mt,At,vt,Et,xt,yt);else if(Ut=="o10"||Ut=="o29"){var an=Ut=="o10"?ot:at;if(lt.length==0)console.debug("error: empty stack");else{var on=lt.pop(),sn=an.Subrs[on+an.Bias];it.x=xt,it.y=yt,it.nStems=ct,it.haveWidth=ut,it.width=ft,it.open=pt,_.U._drawCFF(sn,it,at,ot,st),xt=it.x,yt=it.y,ct=it.nStems,ut=it.haveWidth,ft=it.width,pt=it.open}}else if(Ut=="o30"||Ut=="o31"){var ln=lt.length,cn=(Jt=0,Ut=="o31");for(Jt+=ln-(Gt=-3&ln);Jt<Gt;)cn?(At=yt,vt=(mt=xt+lt.shift())+lt.shift(),yt=(Et=At+lt.shift())+lt.shift(),Gt-Jt==5?(xt=vt+lt.shift(),Jt++):xt=vt,cn=!1):(mt=xt,At=yt+lt.shift(),vt=mt+lt.shift(),Et=At+lt.shift(),xt=vt+lt.shift(),Gt-Jt==5?(yt=Et+lt.shift(),Jt++):yt=Et,cn=!0),_.U.P.curveTo(st,mt,At,vt,Et,xt,yt),Jt+=4}else{if((Ut+"").charAt(0)=="o")throw console.debug("Unknown operation: "+Ut,rt),Ut;lt.push(Ut)}}}it.x=xt,it.y=yt,it.nStems=ct,it.haveWidth=ut,it.width=ft,it.open=pt};var tt=_,nt={Typr:tt};return _e.Typr=tt,_e.default=nt,Object.defineProperty(_e,"__esModule",{value:!0}),_e}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function woff2otfFactory(){return function(_e){var _=Uint8Array,tt=Uint16Array,nt=Uint32Array,rt=new _([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),it=new _([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),at=new _([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ot=function(Ut,Gt){for(var Ht=new tt(31),jt=0;jt<31;++jt)Ht[jt]=Gt+=1<<Ut[jt-1];var Xt=new nt(Ht[30]);for(jt=1;jt<30;++jt)for(var Jt=Ht[jt];Jt<Ht[jt+1];++Jt)Xt[Jt]=Jt-Ht[jt]<<5|jt;return[Ht,Xt]},st=ot(rt,2),lt=st[0],ct=st[1];lt[28]=258,ct[258]=28;for(var ut=ot(it,0)[0],ft=new tt(32768),pt=0;pt<32768;++pt){var gt=(43690&pt)>>>1|(21845&pt)<<1;gt=(61680&(gt=(52428&gt)>>>2|(13107&gt)<<2))>>>4|(3855&gt)<<4,ft[pt]=((65280&gt)>>>8|(255&gt)<<8)>>>1}var xt=function(Ut,Gt,Ht){for(var jt=Ut.length,Xt=0,Jt=new tt(Gt);Xt<jt;++Xt)++Jt[Ut[Xt]-1];var Dt,zt=new tt(Gt);for(Xt=0;Xt<Gt;++Xt)zt[Xt]=zt[Xt-1]+Jt[Xt-1]<<1;if(Ht){Dt=new tt(1<<Gt);var $t=15-Gt;for(Xt=0;Xt<jt;++Xt)if(Ut[Xt])for(var Lt=Xt<<4|Ut[Xt],Vt=Gt-Ut[Xt],tn=zt[Ut[Xt]-1]++<<Vt,an=tn|(1<<Vt)-1;tn<=an;++tn)Dt[ft[tn]>>>$t]=Lt}else for(Dt=new tt(jt),Xt=0;Xt<jt;++Xt)Ut[Xt]&&(Dt[Xt]=ft[zt[Ut[Xt]-1]++]>>>15-Ut[Xt]);return Dt},yt=new _(288);for(pt=0;pt<144;++pt)yt[pt]=8;for(pt=144;pt<256;++pt)yt[pt]=9;for(pt=256;pt<280;++pt)yt[pt]=7;for(pt=280;pt<288;++pt)yt[pt]=8;var mt=new _(32);for(pt=0;pt<32;++pt)mt[pt]=5;var At=xt(yt,9,1),vt=xt(mt,5,1),Et=function(Ut){for(var Gt=Ut[0],Ht=1;Ht<Ut.length;++Ht)Ut[Ht]>Gt&&(Gt=Ut[Ht]);return Gt},Ct=function(Ut,Gt,Ht){var jt=Gt/8|0;return(Ut[jt]|Ut[jt+1]<<8)>>(7&Gt)&Ht},Tt=function(Ut,Gt){var Ht=Gt/8|0;return(Ut[Ht]|Ut[Ht+1]<<8|Ut[Ht+2]<<16)>>(7&Gt)},bt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],It=function(Ut,Gt,Ht){var jt=new Error(Gt||bt[Ut]);if(jt.code=Ut,Error.captureStackTrace&&Error.captureStackTrace(jt,It),!Ht)throw jt;return jt},wt=function(Ut,Gt,Ht){var jt=Ut.length;if(!jt||Ht&&!Ht.l&&jt<5)return Gt||new _(0);var Xt=!Gt||Ht,Jt=!Ht||Ht.i;Ht||(Ht={}),Gt||(Gt=new _(3*jt));var Dt,zt=function(kn){var $n=Gt.length;if(kn>$n){var Yn=new _(Math.max(2*$n,kn));Yn.set(Gt),Gt=Yn}},$t=Ht.f||0,Lt=Ht.p||0,Vt=Ht.b||0,tn=Ht.l,an=Ht.d,on=Ht.m,sn=Ht.n,ln=8*jt;do{if(!tn){Ht.f=$t=Ct(Ut,Lt,1);var cn=Ct(Ut,Lt+1,3);if(Lt+=3,!cn){var In=Ut[(Fn=((Dt=Lt)/8|0)+(7&Dt&&1)+4)-4]|Ut[Fn-3]<<8,zn=Fn+In;if(zn>jt){Jt&&It(0);break}Xt&&zt(Vt+In),Gt.set(Ut.subarray(Fn,zn),Vt),Ht.b=Vt+=In,Ht.p=Lt=8*zn;continue}if(cn==1)tn=At,an=vt,on=9,sn=5;else if(cn==2){var yn=Ct(Ut,Lt,31)+257,Wt=Ct(Ut,Lt+10,15)+4,_n=yn+Ct(Ut,Lt+5,31)+1;Lt+=14;for(var gn=new _(_n),vn=new _(19),mn=0;mn<Wt;++mn)vn[at[mn]]=Ct(Ut,Lt+3*mn,7);Lt+=3*Wt;var Wn=Et(vn),xn=(1<<Wn)-1,Dn=xt(vn,Wn,1);for(mn=0;mn<_n;){var Fn,bn=Dn[Ct(Ut,Lt,xn)];if(Lt+=15&bn,(Fn=bn>>>4)<16)gn[mn++]=Fn;else{var jn=0,Nt=0;for(Fn==16?(Nt=3+Ct(Ut,Lt,3),Lt+=2,jn=gn[mn-1]):Fn==17?(Nt=3+Ct(Ut,Lt,7),Lt+=3):Fn==18&&(Nt=11+Ct(Ut,Lt,127),Lt+=7);Nt--;)gn[mn++]=jn}}var kt=gn.subarray(0,yn),rn=gn.subarray(yn);on=Et(kt),sn=Et(rn),tn=xt(kt,on,1),an=xt(rn,sn,1)}else It(1);if(Lt>ln){Jt&&It(0);break}}Xt&&zt(Vt+131072);for(var Mn=(1<<on)-1,wn=(1<<sn)-1,Tn=Lt;;Tn=Lt){var Gn=(jn=tn[Tt(Ut,Lt)&Mn])>>>4;if((Lt+=15&jn)>ln){Jt&&It(0);break}if(jn||It(2),Gn<256)Gt[Vt++]=Gn;else{if(Gn==256){Tn=Lt,tn=null;break}var Un=Gn-254;if(Gn>264){var dn=rt[mn=Gn-257];Un=Ct(Ut,Lt,(1<<dn)-1)+lt[mn],Lt+=dn}var Vn=an[Tt(Ut,Lt)&wn],Qn=Vn>>>4;if(Vn||It(3),Lt+=15&Vn,rn=ut[Qn],Qn>3&&(dn=it[Qn],rn+=Tt(Ut,Lt)&(1<<dn)-1,Lt+=dn),Lt>ln){Jt&&It(0);break}Xt&&zt(Vt+131072);for(var Nn=Vt+Un;Vt<Nn;Vt+=4)Gt[Vt]=Gt[Vt-rn],Gt[Vt+1]=Gt[Vt+1-rn],Gt[Vt+2]=Gt[Vt+2-rn],Gt[Vt+3]=Gt[Vt+3-rn];Vt=Nn}}Ht.l=tn,Ht.p=Tn,Ht.b=Vt,tn&&($t=1,Ht.m=on,Ht.d=an,Ht.n=sn)}while(!$t);return Vt==Gt.length?Gt:function(kn,$n,Yn){($n==null||$n<0)&&($n=0),(Yn==null||Yn>kn.length)&&(Yn=kn.length);var tr=new(kn instanceof tt?tt:kn instanceof nt?nt:_)(Yn-$n);return tr.set(kn.subarray($n,Yn)),tr}(Gt,0,Vt)},Rt=new _(0),Ft=typeof TextDecoder<"u"&&new TextDecoder;try{Ft.decode(Rt,{stream:!0})}catch{}return _e.convert_streams=function(Ut){var Gt=new DataView(Ut),Ht=0;function jt(){var yn=Gt.getUint16(Ht);return Ht+=2,yn}function Xt(){var yn=Gt.getUint32(Ht);return Ht+=4,yn}function Jt(yn){In.setUint16(zn,yn),zn+=2}function Dt(yn){In.setUint32(zn,yn),zn+=4}for(var zt={signature:Xt(),flavor:Xt(),length:Xt(),numTables:jt(),reserved:jt(),totalSfntSize:Xt(),majorVersion:jt(),minorVersion:jt(),metaOffset:Xt(),metaLength:Xt(),metaOrigLength:Xt(),privOffset:Xt(),privLength:Xt()},$t=0;Math.pow(2,$t)<=zt.numTables;)$t++;$t--;for(var Lt=16*Math.pow(2,$t),Vt=16*zt.numTables-Lt,tn=12,an=[],on=0;on<zt.numTables;on++)an.push({tag:Xt(),offset:Xt(),compLength:Xt(),origLength:Xt(),origChecksum:Xt()}),tn+=16;var sn,ln=new Uint8Array(12+16*an.length+an.reduce(function(yn,Wt){return yn+Wt.origLength+4},0)),cn=ln.buffer,In=new DataView(cn),zn=0;return Dt(zt.flavor),Jt(zt.numTables),Jt(Lt),Jt($t),Jt(Vt),an.forEach(function(yn){Dt(yn.tag),Dt(yn.origChecksum),Dt(tn),Dt(yn.origLength),yn.outOffset=tn,(tn+=yn.origLength)%4!=0&&(tn+=4-tn%4)}),an.forEach(function(yn){var Wt,_n=Ut.slice(yn.offset,yn.offset+yn.compLength);if(yn.compLength!=yn.origLength){var gn=new Uint8Array(yn.origLength);Wt=new Uint8Array(_n,2),wt(Wt,gn)}else gn=new Uint8Array(_n);ln.set(gn,yn.outOffset);var vn=0;(tn=yn.outOffset+yn.origLength)%4!=0&&(vn=4-tn%4),ln.set(new Uint8Array(vn).buffer,yn.outOffset+yn.origLength),sn=tn+vn}),cn.slice(0,sn)},Object.defineProperty(_e,"__esModule",{value:!0}),_e}({}).convert_streams}function parserFactory(_e,_){const tt={M:2,L:2,Q:4,C:6,Z:0},nt={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},rt=1,it=2,at=4,ot=8,st=16,lt=32;let ct;function ut(Ct){if(!ct){const Tt={R:it,L:rt,D:at,C:st,U:lt,T:ot};ct=new Map;for(let bt in nt){let It=0;nt[bt].split(",").forEach(wt=>{let[Rt,Ft]=wt.split("+");Rt=parseInt(Rt,36),Ft=Ft?parseInt(Ft,36):0,ct.set(It+=Rt,Tt[bt]);for(let Ut=Ft;Ut--;)ct.set(++It,Tt[bt])})}}return ct.get(Ct)||lt}const ft=1,pt=2,gt=3,xt=4,yt=[null,"isol","init","fina","medi"];function mt(Ct){const Tt=new Uint8Array(Ct.length);let bt=lt,It=ft,wt=-1;for(let Rt=0;Rt<Ct.length;Rt++){const Ft=Ct.codePointAt(Rt);let Ut=ut(Ft)|0,Gt=ft;Ut&ot||(bt&(rt|at|st)?Ut&(it|at|st)?(Gt=gt,(It===ft||It===gt)&&Tt[wt]++):Ut&(rt|lt)&&(It===pt||It===xt)&&Tt[wt]--:bt&(it|lt)&&(It===pt||It===xt)&&Tt[wt]--,It=Tt[Rt]=Gt,bt=Ut,wt=Rt,Ft>65535&&Rt++)}return Tt}function At(Ct,Tt){const bt=[];for(let wt=0;wt<Tt.length;wt++){const Rt=Tt.codePointAt(wt);Rt>65535&&wt++,bt.push(_e.U.codeToGlyph(Ct,Rt))}const It=Ct.GSUB;if(It){const{lookupList:wt,featureList:Rt}=It;let Ft;const Ut=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,Gt=[];Rt.forEach(Ht=>{if(Ut.test(Ht.tag))for(let jt=0;jt<Ht.tab.length;jt++){if(Gt[Ht.tab[jt]])continue;Gt[Ht.tab[jt]]=!0;const Xt=wt[Ht.tab[jt]],Jt=/^(isol|init|fina|medi)$/.test(Ht.tag);Jt&&!Ft&&(Ft=mt(Tt));for(let Dt=0;Dt<bt.length;Dt++)(!Ft||!Jt||yt[Ft[Dt]]===Ht.tag)&&_e.U._applySubs(bt,Dt,Xt,wt)}})}return bt}function vt(...Ct){for(let Tt=0;Tt<Ct.length;Tt++)if(typeof Ct[Tt]=="number")return Ct[Tt]}function Et(Ct){const Tt=Object.create(null),bt=Ct["OS/2"],It=Ct.hhea,wt=Ct.head.unitsPerEm,Rt=vt(bt&&bt.sTypoAscender,It&&It.ascender,wt),Ft={unitsPerEm:wt,ascender:Rt,descender:vt(bt&&bt.sTypoDescender,It&&It.descender,0),capHeight:vt(bt&&bt.sCapHeight,Rt),xHeight:vt(bt&&bt.sxHeight,Rt),lineGap:vt(bt&&bt.sTypoLineGap,It&&It.lineGap),forEachGlyph(Ut,Gt,Ht,jt){let Xt=0;const Jt=1/Ft.unitsPerEm*Gt,Dt=At(Ct,Ut);let zt=0,$t=-1;return Dt.forEach((Lt,Vt)=>{if(Lt!==-1){let tn=Tt[Lt];if(!tn){const{cmds:an,crds:on}=_e.U.glyphToPath(Ct,Lt);let sn="",ln=0;for(let Wt=0,_n=an.length;Wt<_n;Wt++){const gn=tt[an[Wt]];sn+=an[Wt];for(let vn=1;vn<=gn;vn++)sn+=(vn>1?",":"")+on[ln++]}let cn,In,zn,yn;if(on.length){cn=In=1/0,zn=yn=-1/0;for(let Wt=0,_n=on.length;Wt<_n;Wt+=2){let gn=on[Wt],vn=on[Wt+1];gn<cn&&(cn=gn),vn<In&&(In=vn),gn>zn&&(zn=gn),vn>yn&&(yn=vn)}}else cn=zn=In=yn=0;tn=Tt[Lt]={index:Lt,advanceWidth:Ct.hmtx.aWidth[Lt],xMin:cn,yMin:In,xMax:zn,yMax:yn,path:sn,pathCommandCount:an.length}}$t!==-1&&(Xt+=_e.U.getPairAdjustment(Ct,$t,Lt)*Jt),jt.call(null,tn,Xt,zt),tn.advanceWidth&&(Xt+=tn.advanceWidth*Jt),Ht&&(Xt+=Ht*Gt),$t=Lt}zt+=Ut.codePointAt(zt)>65535?2:1}),Xt}};return Ft}return function(Tt){const bt=new Uint8Array(Tt,0,4),It=_e._bin.readASCII(bt,0,4);if(It==="wOFF")Tt=_(Tt);else if(It==="wOF2")throw new Error("woff2 fonts not supported");return Et(_e.parse(Tt)[0])}}const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init(_e,_,tt){const nt=_e(),rt=_();return tt(nt,rt)}}),CONFIG={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new Color$1;function now$1(){return(self.performance||Date).now()}const atlases=Object.create(null);function getTextRenderInfo(_e,_){_e=assign$2({},_e);const tt=now$1();if(_e.font=toAbsoluteURL(_e.font||CONFIG.defaultFontURL),_e.text=""+_e.text,_e.sdfGlyphSize=_e.sdfGlyphSize||CONFIG.sdfGlyphSize,_e.colorRanges!=null){let ut={};for(let ft in _e.colorRanges)if(_e.colorRanges.hasOwnProperty(ft)){let pt=_e.colorRanges[ft];typeof pt!="number"&&(pt=tempColor.set(pt).getHex()),ut[ft]=pt}_e.colorRanges=ut}Object.freeze(_e);const{textureWidth:nt,sdfExponent:rt}=CONFIG,{sdfGlyphSize:it}=_e,at=nt/it*4;let ot=atlases[it];if(!ot){const ut=document.createElement("canvas");ut.width=nt,ut.height=it*256/at,ot=atlases[it]={glyphCount:0,sdfGlyphSize:it,sdfCanvas:ut,sdfTexture:new Texture(ut,void 0,void 0,void 0,LinearFilter,LinearFilter),contextLost:!1,glyphsByFont:new Map},ot.sdfTexture.generateMipmaps=!1,initContextLossHandling(ot)}const{sdfTexture:st,sdfCanvas:lt}=ot;let ct=ot.glyphsByFont.get(_e.font);ct||ot.glyphsByFont.set(_e.font,ct=new Map),typesetInWorker(_e).then(ut=>{const{glyphIds:ft,glyphPositions:pt,fontSize:gt,unitsPerEm:xt,timings:yt}=ut,mt=[],At=new Float32Array(ft.length*4),vt=gt/xt;let Et=0,Ct=0;const Tt=now$1();ft.forEach((Ft,Ut)=>{let Gt=ct.get(Ft);if(!Gt){const{path:Jt,pathBounds:Dt}=ut.glyphData[Ft],zt=Math.max(Dt[2]-Dt[0],Dt[3]-Dt[1])/it*(CONFIG.sdfMargin*it+.5),$t=ot.glyphCount++,Lt=[Dt[0]-zt,Dt[1]-zt,Dt[2]+zt,Dt[3]+zt];ct.set(Ft,Gt={path:Jt,atlasIndex:$t,sdfViewBox:Lt}),mt.push(Gt)}const{sdfViewBox:Ht}=Gt,jt=pt[Ct++],Xt=pt[Ct++];At[Et++]=jt+Ht[0]*vt,At[Et++]=Xt+Ht[1]*vt,At[Et++]=jt+Ht[2]*vt,At[Et++]=Xt+Ht[3]*vt,ft[Ut]=Gt.atlasIndex}),yt.quads=(yt.quads||0)+(now$1()-Tt);const bt=now$1();yt.sdf={};const It=lt.height,wt=Math.ceil(ot.glyphCount/at),Rt=Math.pow(2,Math.ceil(Math.log2(wt*it)));Rt>It&&(console.info(`Increasing SDF texture size ${It}->${Rt}`),resizeWebGLCanvasWithoutClearing(lt,nt,Rt),st.dispose()),Promise.all(mt.map(Ft=>generateGlyphSDF(Ft,ot,_e.gpuAccelerateSDF).then(({timing:Ut})=>{yt.sdf[Ft.atlasIndex]=Ut}))).then(()=>{mt.length&&!ot.contextLost&&(safariPre15Workaround(ot),st.needsUpdate=!0),yt.sdfTotal=now$1()-bt,yt.total=now$1()-tt,_(Object.freeze({parameters:_e,sdfTexture:st,sdfGlyphSize:it,sdfExponent:rt,glyphBounds:At,glyphAtlasIndices:ft,glyphColors:ut.glyphColors,caretPositions:ut.caretPositions,caretHeight:ut.caretHeight,chunkedBounds:ut.chunkedBounds,ascender:ut.ascender,descender:ut.descender,lineHeight:ut.lineHeight,capHeight:ut.capHeight,xHeight:ut.xHeight,topBaseline:ut.topBaseline,blockBounds:ut.blockBounds,visibleBounds:ut.visibleBounds,timings:ut.timings}))})}),Promise.resolve().then(()=>{ot.contextLost||warmUpSDFCanvas(lt)})}function generateGlyphSDF({path:_e,atlasIndex:_,sdfViewBox:tt},{sdfGlyphSize:nt,sdfCanvas:rt,contextLost:it},at){if(it)return Promise.resolve({timing:-1});const{textureWidth:ot,sdfExponent:st}=CONFIG,lt=Math.max(tt[2]-tt[0],tt[3]-tt[1]),ct=Math.floor(_/4),ut=ct%(ot/nt)*nt,ft=Math.floor(ct/(ot/nt))*nt,pt=_%4;return generateSDF(nt,nt,_e,tt,lt,st,rt,ut,ft,pt,at)}function initContextLossHandling(_e){const _=_e.sdfCanvas;_.addEventListener("webglcontextlost",tt=>{console.log("Context Lost",tt),tt.preventDefault(),_e.contextLost=!0}),_.addEventListener("webglcontextrestored",tt=>{console.log("Context Restored",tt),_e.contextLost=!1;const nt=[];_e.glyphsByFont.forEach(rt=>{rt.forEach(it=>{nt.push(generateGlyphSDF(it,_e,!0))})}),Promise.all(nt).then(()=>{safariPre15Workaround(_e),_e.sdfTexture.needsUpdate=!0})})}function preloadFont({font:_e,characters:_,sdfGlyphSize:tt},nt){let rt=Array.isArray(_)?_.join(`
`):""+_;getTextRenderInfo({font:_e,sdfGlyphSize:tt,text:rt},nt)}function assign$2(_e,_){for(let tt in _)_.hasOwnProperty(tt)&&(_e[tt]=_[tt]);return _e}let linkEl;function toAbsoluteURL(_e){return linkEl||(linkEl=typeof document>"u"?{}:document.createElement("a")),linkEl.href=_e,linkEl.href}function safariPre15Workaround(_e){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:_,sdfTexture:tt}=_e,{width:nt,height:rt}=_,it=_e.sdfCanvas.getContext("webgl");let at=tt.image.data;(!at||at.length!==nt*rt*4)&&(at=new Uint8Array(nt*rt*4),tt.image={width:nt,height:rt,data:at},tt.flipY=!1,tt.isDataTexture=!0),it.readPixels(0,0,nt,rt,it.RGBA,it.UNSIGNED_BYTE,at)}}const typesetterWorkerModule=defineWorkerModule({name:"Typesetter",dependencies:[CONFIG,workerModule,createTypesetter,bidiFactory],init(_e,_,tt,nt){const{defaultFontURL:rt}=_e;return tt(_,nt(),{defaultFontURL:rt})}}),typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[typesetterWorkerModule],init(_e){return function(_){return new Promise(tt=>{_e.typeset(_,tt)})}},getTransferables(_e){const _=[_e.glyphPositions.buffer,_e.glyphIds.buffer];return _e.caretPositions&&_.push(_e.caretPositions.buffer),_e.glyphColors&&_.push(_e.glyphColors.buffer),_}}),templateGeometries={};function getTemplateGeometry(_e){let _=templateGeometries[_e];if(!_){const tt=new PlaneGeometry(1,1,_e,_e),nt=tt.clone(),rt=tt.attributes,it=nt.attributes,at=new BufferGeometry,ot=rt.uv.count;for(let st=0;st<ot;st++)it.position.array[st*3]*=-1,it.normal.array[st*3+2]*=-1;["position","normal","uv"].forEach(st=>{at.setAttribute(st,new Float32BufferAttribute([...rt[st].array,...it[st].array],rt[st].itemSize))}),at.setIndex([...tt.index.array,...nt.index.array.map(st=>st+ot)]),at.translate(.5,.5,0),_=templateGeometries[_e]=at}return _}const glyphBoundsAttrName="aTroikaGlyphBounds",glyphIndexAttrName="aTroikaGlyphIndex",glyphColorAttrName="aTroikaGlyphColor";class GlyphsGeometry extends InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Sphere,this.boundingBox=new Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(_){const tt=this.getIndex().count;this.setDrawRange(_===BackSide?tt/2:0,_===DoubleSide?tt:tt/2)}set detail(_){if(_!==this._detail){this._detail=_,(typeof _!="number"||_<1)&&(_=1);let tt=getTemplateGeometry(_);["position","normal","uv"].forEach(nt=>{this.attributes[nt]=tt.attributes[nt].clone()}),this.setIndex(tt.getIndex().clone())}}get detail(){return this._detail}set curveRadius(_){_!==this._curveRadius&&(this._curveRadius=_,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(_,tt,nt,rt,it){updateBufferAttr(this,glyphBoundsAttrName,_,4),updateBufferAttr(this,glyphIndexAttrName,tt,1),updateBufferAttr(this,glyphColorAttrName,it,3),this._blockBounds=nt,this._chunkedBounds=rt,this.instanceCount=tt.length,this._updateBounds()}_updateBounds(){const _=this._blockBounds;if(_){const{curveRadius:tt,boundingBox:nt}=this;if(tt){const{PI:rt,floor:it,min:at,max:ot,sin:st,cos:lt}=Math,ct=rt/2,ut=rt*2,ft=Math.abs(tt),pt=_[0]/ft,gt=_[2]/ft,xt=it((pt+ct)/ut)!==it((gt+ct)/ut)?-ft:at(st(pt)*ft,st(gt)*ft),yt=it((pt-ct)/ut)!==it((gt-ct)/ut)?ft:ot(st(pt)*ft,st(gt)*ft),mt=it((pt+rt)/ut)!==it((gt+rt)/ut)?ft*2:ot(ft-lt(pt)*ft,ft-lt(gt)*ft);nt.min.set(xt,_[1],tt<0?-mt:0),nt.max.set(yt,_[3],tt<0?0:mt)}else nt.min.set(_[0],_[1],0),nt.max.set(_[2],_[3],0);nt.getBoundingSphere(this.boundingSphere)}}applyClipRect(_){let tt=this.getAttribute(glyphIndexAttrName).count,nt=this._chunkedBounds;if(nt)for(let rt=nt.length;rt--;){tt=nt[rt].end;let it=nt[rt].rect;if(it[1]<_.w&&it[3]>_.y&&it[0]<_.z&&it[2]>_.x)break}this.instanceCount=tt}}function updateBufferAttr(_e,_,tt,nt){const rt=_e.getAttribute(_);tt?rt&&rt.array.length===tt.length?(rt.array.set(tt),rt.needsUpdate=!0):(_e.setAttribute(_,new InstancedBufferAttribute(tt,nt)),delete _e._maxInstanceCount,_e.dispose()):rt&&_e.deleteAttribute(_)}const VERTEX_DEFS=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VERTEX_TRANSFORM=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,FRAGMENT_DEFS=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,FRAGMENT_TRANSFORM=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function createTextDerivedMaterial(_e){const _=createDerivedMaterial(_e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vector4(0,0,0,0)},uTroikaClipRect:{value:new Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Color$1},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:VERTEX_DEFS,vertexTransform:VERTEX_TRANSFORM,fragmentDefs:FRAGMENT_DEFS,fragmentColorTransform:FRAGMENT_TRANSFORM,customRewriter({vertexShader:tt,fragmentShader:nt}){let rt=/\buniform\s+vec3\s+diffuse\b/;return rt.test(nt)&&(nt=nt.replace(rt,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),rt.test(tt)||(tt=tt.replace(voidMainRegExp,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:tt,fragmentShader:nt}}});return _.transparent=!0,Object.defineProperties(_,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),_}const defaultMaterial=new MeshBasicMaterial({color:16777215,side:DoubleSide,transparent:!0}),defaultStrokeColor=8421504,tempMat4=new Matrix4,tempVec3a=new Vector3,tempVec3b=new Vector3,tempArray=[],origin=new Vector3,defaultOrient="+x+y";function first(_e){return Array.isArray(_e)?_e[0]:_e}let getFlatRaycastMesh=()=>{const _e=new Mesh(new PlaneGeometry(1,1),defaultMaterial);return getFlatRaycastMesh=()=>_e,_e},getCurvedRaycastMesh=()=>{const _e=new Mesh(new PlaneGeometry(1,1,32,1),defaultMaterial);return getCurvedRaycastMesh=()=>_e,_e};const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],COPYABLE_PROPS=SYNCABLE_PROPS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Text$1=class extends Mesh{constructor(){const _=new GlyphsGeometry;super(_,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=defaultStrokeColor,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=defaultOrient,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(_){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(_):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},tt=>{this._isSyncing=!1,this._textRenderInfo=tt,this.geometry.updateGlyphs(tt.glyphBounds,tt.glyphAtlasIndices,tt.blockBounds,tt.chunkedBounds,tt.glyphColors);const nt=this._queuedSyncs;nt&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{nt.forEach(rt=>rt&&rt())})),this.dispatchEvent(syncCompleteEvent),_&&_()})))}onBeforeRender(_,tt,nt,rt,it,at){this.sync(),it.isTroikaTextMaterial&&this._prepareForRender(it),it._hadOwnSide=it.hasOwnProperty("side"),this.geometry.setSide(it._actualSide=it.side),it.side=FrontSide}onAfterRender(_,tt,nt,rt,it,at){it._hadOwnSide?it.side=it._actualSide:delete it.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let _=this._derivedMaterial;const tt=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());if((!_||_.baseMaterial!==tt)&&(_=this._derivedMaterial=createTextDerivedMaterial(tt),tt.addEventListener("dispose",function nt(){tt.removeEventListener("dispose",nt),_.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let nt=_._outlineMtl;return nt||(nt=_._outlineMtl=Object.create(_,{id:{value:_.id+.1}}),nt.isTextOutlineMaterial=!0,nt.depthWrite=!1,nt.map=null,_.addEventListener("dispose",function rt(){_.removeEventListener("dispose",rt),nt.dispose()})),[nt,_]}else return _}set material(_){_&&_.isTroikaTextMaterial?(this._derivedMaterial=_,this._baseMaterial=_.baseMaterial):this._baseMaterial=_}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(_){this.geometry.detail=_}get curveRadius(){return this.geometry.curveRadius}set curveRadius(_){this.geometry.curveRadius=_}get customDepthMaterial(){return first(this.material).getDepthMaterial()}get customDistanceMaterial(){return first(this.material).getDistanceMaterial()}_prepareForRender(_){const tt=_.isTextOutlineMaterial,nt=_.uniforms,rt=this.textRenderInfo;if(rt){const{sdfTexture:ot,blockBounds:st}=rt;nt.uTroikaSDFTexture.value=ot,nt.uTroikaSDFTextureSize.value.set(ot.image.width,ot.image.height),nt.uTroikaSDFGlyphSize.value=rt.sdfGlyphSize,nt.uTroikaSDFExponent.value=rt.sdfExponent,nt.uTroikaTotalBounds.value.fromArray(st),nt.uTroikaUseGlyphColors.value=!tt&&!!rt.glyphColors;let lt=0,ct=0,ut=0,ft,pt,gt,xt=0,yt=0;if(tt){let{outlineWidth:At,outlineOffsetX:vt,outlineOffsetY:Et,outlineBlur:Ct,outlineOpacity:Tt}=this;lt=this._parsePercent(At)||0,ct=Math.max(0,this._parsePercent(Ct)||0),ft=Tt,xt=this._parsePercent(vt)||0,yt=this._parsePercent(Et)||0}else ut=Math.max(0,this._parsePercent(this.strokeWidth)||0),ut&&(gt=this.strokeColor,nt.uTroikaStrokeColor.value.set(gt??defaultStrokeColor),pt=this.strokeOpacity,pt==null&&(pt=1)),ft=this.fillOpacity;nt.uTroikaDistanceOffset.value=lt,nt.uTroikaPositionOffset.value.set(xt,yt),nt.uTroikaBlurRadius.value=ct,nt.uTroikaStrokeWidth.value=ut,nt.uTroikaStrokeOpacity.value=pt,nt.uTroikaFillOpacity.value=ft??1,nt.uTroikaCurveRadius.value=this.curveRadius||0;let mt=this.clipRect;if(mt&&Array.isArray(mt)&&mt.length===4)nt.uTroikaClipRect.value.fromArray(mt);else{const At=(this.fontSize||.1)*100;nt.uTroikaClipRect.value.set(st[0]-At,st[1]-At,st[2]+At,st[3]+At)}this.geometry.applyClipRect(nt.uTroikaClipRect.value)}nt.uTroikaSDFDebug.value=!!this.debugSDF,_.polygonOffset=!!this.depthOffset,_.polygonOffsetFactor=_.polygonOffsetUnits=this.depthOffset||0;const it=tt?this.outlineColor||0:this.color;if(it==null)delete _.color;else{const ot=_.hasOwnProperty("color")?_.color:_.color=new Color$1;(it!==ot._input||typeof it=="object")&&ot.set(ot._input=it)}let at=this.orientation||defaultOrient;if(at!==_._orientation){let ot=nt.uTroikaOrient.value;at=at.replace(/[^-+xyz]/g,"");let st=at!==defaultOrient&&at.match(/^([-+])([xyz])([-+])([xyz])$/);if(st){let[,lt,ct,ut,ft]=st;tempVec3a.set(0,0,0)[ct]=lt==="-"?1:-1,tempVec3b.set(0,0,0)[ft]=ut==="-"?-1:1,tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b),ot.setFromMatrix4(tempMat4)}else ot.identity();_._orientation=at}}_parsePercent(_){if(typeof _=="string"){let tt=_.match(/^(-?[\d.]+)%$/),nt=tt?parseFloat(tt[1]):NaN;_=(isNaN(nt)?0:nt/100)*this.fontSize}return _}localPositionToTextCoords(_,tt=new Vector2){tt.copy(_);const nt=this.curveRadius;return nt&&(tt.x=Math.atan2(_.x,Math.abs(nt)-Math.abs(_.z))*Math.abs(nt)),tt}worldPositionToTextCoords(_,tt=new Vector2){return tempVec3a.copy(_),this.localPositionToTextCoords(this.worldToLocal(tempVec3a),tt)}raycast(_,tt){const{textRenderInfo:nt,curveRadius:rt}=this;if(nt){const it=nt.blockBounds,at=rt?getCurvedRaycastMesh():getFlatRaycastMesh(),ot=at.geometry,{position:st,uv:lt}=ot.attributes;for(let ct=0;ct<lt.count;ct++){let ut=it[0]+lt.getX(ct)*(it[2]-it[0]);const ft=it[1]+lt.getY(ct)*(it[3]-it[1]);let pt=0;rt&&(pt=rt-Math.cos(ut/rt)*rt,ut=Math.sin(ut/rt)*rt),st.setXYZ(ct,ut,ft,pt)}ot.boundingSphere=this.geometry.boundingSphere,ot.boundingBox=this.geometry.boundingBox,at.matrixWorld=this.matrixWorld,at.material.side=this.material.side,tempArray.length=0,at.raycast(_,tempArray);for(let ct=0;ct<tempArray.length;ct++)tempArray[ct].object=this,tt.push(tempArray[ct])}}copy(_){const tt=this.geometry;return super.copy(_),this.geometry=tt,COPYABLE_PROPS.forEach(nt=>{this[nt]=_[nt]}),this}clone(){return new this.constructor().copy(this)}};SYNCABLE_PROPS.forEach(_e=>{const _="_private_"+_e;Object.defineProperty(Text$1.prototype,_e,{get(){return this[_]},set(tt){tt!==this[_]&&(this[_]=tt,this._needsSync=!0)}})});const Text=reactExports.forwardRef(({sdfGlyphSize:_e=64,anchorX:_="center",anchorY:tt="middle",font:nt,fontSize:rt=1,children:it,characters:at,onSync:ot,...st},lt)=>{const ct=useThree(({invalidate:gt})=>gt),[ut]=reactExports.useState(()=>new Text$1),[ft,pt]=reactExports.useMemo(()=>{const gt=[];let xt="";return reactExports.Children.forEach(it,yt=>{typeof yt=="string"||typeof yt=="number"?xt+=yt:gt.push(yt)}),[gt,xt]},[it]);return suspend(()=>new Promise(gt=>preloadFont({font:nt,characters:at},gt)),["troika-text",nt,at]),reactExports.useLayoutEffect(()=>void ut.sync(()=>{ct(),ot&&ot(ut)})),reactExports.useEffect(()=>()=>ut.dispose(),[ut]),reactExports.createElement("primitive",_extends$1({object:ut,ref:lt,font:nt,text:pt,anchorX:_,anchorY:tt,fontSize:rt,sdfGlyphSize:_e},st),ft)});function shaderMaterial(_e,_,tt,nt){const rt=class extends ShaderMaterial{constructor(at={}){const ot=Object.entries(_e);super({uniforms:ot.reduce((st,[lt,ct])=>{const ut=UniformsUtils.clone({[lt]:{value:ct}});return{...st,...ut}},{}),vertexShader:_,fragmentShader:tt}),this.key="",ot.forEach(([st])=>Object.defineProperty(this,st,{get:()=>this.uniforms[st].value,set:lt=>this.uniforms[st].value=lt})),Object.assign(this,at),nt&&nt(this)}};return rt.key=MathUtils.generateUUID(),rt}const IsObject=_e=>_e===Object(_e)&&!Array.isArray(_e)&&typeof _e!="function";function useTexture(_e,_){const tt=useThree(rt=>rt.gl),nt=useLoader(TextureLoader,IsObject(_e)?Object.values(_e):_e);if(reactExports.useLayoutEffect(()=>{_==null||_(nt)},[_]),reactExports.useEffect(()=>{(Array.isArray(nt)?nt:[nt]).forEach(tt.initTexture)},[tt,nt]),IsObject(_e)){const rt=Object.keys(_e),it={};return rt.forEach(at=>Object.assign(it,{[at]:nt[rt.indexOf(at)]})),it}else return nt}useTexture.preload=_e=>useLoader.preload(TextureLoader,_e);useTexture.clear=_e=>useLoader.clear(TextureLoader,_e);const ImageMaterialImpl=shaderMaterial({color:new Color$1("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
  }
`),ImageBase=reactExports.forwardRef(({children:_e,color:_,segments:tt=1,scale:nt=1,zoom:rt=1,grayscale:it=0,opacity:at=1,texture:ot,toneMapped:st,transparent:lt,...ct},ut)=>{extend$2({ImageMaterial:ImageMaterialImpl});const ft=Array.isArray(nt)?[nt[0],nt[1]]:[nt,nt],pt=[ot.image.width,ot.image.height];return reactExports.createElement("mesh",_extends$1({ref:ut,scale:Array.isArray(nt)?[...nt,1]:nt},ct),reactExports.createElement("planeGeometry",{args:[1,1,tt,tt]}),reactExports.createElement("imageMaterial",{color:_,map:ot,zoom:rt,grayscale:it,opacity:at,scale:ft,imageBounds:pt,toneMapped:st,transparent:lt}),_e)}),ImageWithUrl=reactExports.forwardRef(({url:_e,..._},tt)=>{const nt=useTexture(_e);return reactExports.createElement(ImageBase,_extends$1({},_,{texture:nt,ref:tt}))}),ImageWithTexture=reactExports.forwardRef(({url:_e,..._},tt)=>reactExports.createElement(ImageBase,_extends$1({},_,{ref:tt}))),Image=reactExports.forwardRef((_e,_)=>{if(_e.url)return reactExports.createElement(ImageWithUrl,_extends$1({},_e,{ref:_}));if(_e.texture)return reactExports.createElement(ImageWithTexture,_extends$1({},_e,{ref:_}));throw new Error("<Image /> requires a url or texture")});class ConvolutionMaterial extends ShaderMaterial{constructor(_=new Vector2){super({uniforms:{inputBuffer:new Uniform(null),depthBuffer:new Uniform(null),resolution:new Uniform(new Vector2),texelSize:new Uniform(new Vector2),halfTexelSize:new Uniform(new Vector2),kernel:new Uniform(0),scale:new Uniform(1),cameraNear:new Uniform(0),cameraFar:new Uniform(1),minDepthThreshold:new Uniform(0),maxDepthThreshold:new Uniform(1),depthScale:new Uniform(0),depthToBlurRatioBias:new Uniform(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <${parseInt(REVISION.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(_.x,_.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(_,tt){this.uniforms.texelSize.value.set(_,tt),this.uniforms.halfTexelSize.value.set(_,tt).multiplyScalar(.5)}setResolution(_){this.uniforms.resolution.value.copy(_)}}class BlurPass{constructor({gl:_,resolution:tt,width:nt=500,height:rt=500,minDepthThreshold:it=0,maxDepthThreshold:at=1,depthScale:ot=0,depthToBlurRatioBias:st=.25}){this.renderToScreen=!1,this.renderTargetA=new WebGLRenderTarget(tt,tt,{minFilter:LinearFilter,magFilter:LinearFilter,stencilBuffer:!1,depthBuffer:!1,type:HalfFloatType}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new ConvolutionMaterial,this.convolutionMaterial.setTexelSize(1/nt,1/rt),this.convolutionMaterial.setResolution(new Vector2(nt,rt)),this.scene=new Scene,this.camera=new Camera,this.convolutionMaterial.uniforms.minDepthThreshold.value=it,this.convolutionMaterial.uniforms.maxDepthThreshold.value=at,this.convolutionMaterial.uniforms.depthScale.value=ot,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=st,this.convolutionMaterial.defines.USE_DEPTH=ot>0;const lt=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),ct=new Float32Array([0,0,2,0,0,2]),ut=new BufferGeometry;ut.setAttribute("position",new BufferAttribute(lt,3)),ut.setAttribute("uv",new BufferAttribute(ct,2)),this.screen=new Mesh(ut,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(_,tt,nt){const rt=this.scene,it=this.camera,at=this.renderTargetA,ot=this.renderTargetB;let st=this.convolutionMaterial,lt=st.uniforms;lt.depthBuffer.value=tt.depthTexture;const ct=st.kernel;let ut=tt,ft,pt,gt;for(pt=0,gt=ct.length-1;pt<gt;++pt)ft=pt&1?ot:at,lt.kernel.value=ct[pt],lt.inputBuffer.value=ut.texture,_.setRenderTarget(ft),_.render(rt,it),ut=ft;lt.kernel.value=ct[pt],lt.inputBuffer.value=ut.texture,_.setRenderTarget(this.renderToScreen?null:nt),_.render(rt,it)}}let MeshReflectorMaterial$1=class extends MeshStandardMaterial{constructor(_={}){super(_),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(_)}onBeforeCompile(_){var tt;(tt=_.defines)!=null&&tt.USE_UV||(_.defines.USE_UV=""),_.uniforms.hasBlur=this._hasBlur,_.uniforms.tDiffuse=this._tDiffuse,_.uniforms.tDepth=this._tDepth,_.uniforms.distortionMap=this._distortionMap,_.uniforms.tDiffuseBlur=this._tDiffuseBlur,_.uniforms.textureMatrix=this._textureMatrix,_.uniforms.mirror=this._mirror,_.uniforms.mixBlur=this._mixBlur,_.uniforms.mixStrength=this._blurStrength,_.uniforms.minDepthThreshold=this._minDepthThreshold,_.uniforms.maxDepthThreshold=this._maxDepthThreshold,_.uniforms.depthScale=this._depthScale,_.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,_.uniforms.distortion=this._distortion,_.uniforms.mixContrast=this._mixContrast,_.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${_.vertexShader}`,_.vertexShader=_.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),_.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${_.fragmentShader}`,_.fragmentShader=_.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(_){this._tDiffuse.value=_}get tDepth(){return this._tDepth.value}set tDepth(_){this._tDepth.value=_}get distortionMap(){return this._distortionMap.value}set distortionMap(_){this._distortionMap.value=_}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(_){this._tDiffuseBlur.value=_}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(_){this._textureMatrix.value=_}get hasBlur(){return this._hasBlur.value}set hasBlur(_){this._hasBlur.value=_}get mirror(){return this._mirror.value}set mirror(_){this._mirror.value=_}get mixBlur(){return this._mixBlur.value}set mixBlur(_){this._mixBlur.value=_}get mixStrength(){return this._blurStrength.value}set mixStrength(_){this._blurStrength.value=_}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(_){this._minDepthThreshold.value=_}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(_){this._maxDepthThreshold.value=_}get depthScale(){return this._depthScale.value}set depthScale(_){this._depthScale.value=_}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(_){this._depthToBlurRatioBias.value=_}get distortion(){return this._distortion.value}set distortion(_){this._distortion.value=_}get mixContrast(){return this._mixContrast.value}set mixContrast(_){this._mixContrast.value=_}};extend$2({MeshReflectorMaterialImpl:MeshReflectorMaterial$1});const MeshReflectorMaterial=reactExports.forwardRef(({mixBlur:_e=0,mixStrength:_=1,resolution:tt=256,blur:nt=[0,0],minDepthThreshold:rt=.9,maxDepthThreshold:it=1,depthScale:at=0,depthToBlurRatioBias:ot=.25,mirror:st=0,distortion:lt=1,mixContrast:ct=1,distortionMap:ut,reflectorOffset:ft=0,...pt},gt)=>{const xt=useThree(({gl:Lt})=>Lt),yt=useThree(({camera:Lt})=>Lt),mt=useThree(({scene:Lt})=>Lt);nt=Array.isArray(nt)?nt:[nt,nt];const At=nt[0]+nt[1]>0,vt=reactExports.useRef(null),[Et]=reactExports.useState(()=>new Plane),[Ct]=reactExports.useState(()=>new Vector3),[Tt]=reactExports.useState(()=>new Vector3),[bt]=reactExports.useState(()=>new Vector3),[It]=reactExports.useState(()=>new Matrix4),[wt]=reactExports.useState(()=>new Vector3(0,0,-1)),[Rt]=reactExports.useState(()=>new Vector4),[Ft]=reactExports.useState(()=>new Vector3),[Ut]=reactExports.useState(()=>new Vector3),[Gt]=reactExports.useState(()=>new Vector4),[Ht]=reactExports.useState(()=>new Matrix4),[jt]=reactExports.useState(()=>new PerspectiveCamera),Xt=reactExports.useCallback(()=>{var Lt;const Vt=vt.current.parent||((Lt=vt.current)==null?void 0:Lt.__r3f.parent);if(!Vt||(Tt.setFromMatrixPosition(Vt.matrixWorld),bt.setFromMatrixPosition(yt.matrixWorld),It.extractRotation(Vt.matrixWorld),Ct.set(0,0,1),Ct.applyMatrix4(It),Tt.addScaledVector(Ct,ft),Ft.subVectors(Tt,bt),Ft.dot(Ct)>0))return;Ft.reflect(Ct).negate(),Ft.add(Tt),It.extractRotation(yt.matrixWorld),wt.set(0,0,-1),wt.applyMatrix4(It),wt.add(bt),Ut.subVectors(Tt,wt),Ut.reflect(Ct).negate(),Ut.add(Tt),jt.position.copy(Ft),jt.up.set(0,1,0),jt.up.applyMatrix4(It),jt.up.reflect(Ct),jt.lookAt(Ut),jt.far=yt.far,jt.updateMatrixWorld(),jt.projectionMatrix.copy(yt.projectionMatrix),Ht.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Ht.multiply(jt.projectionMatrix),Ht.multiply(jt.matrixWorldInverse),Ht.multiply(Vt.matrixWorld),Et.setFromNormalAndCoplanarPoint(Ct,Tt),Et.applyMatrix4(jt.matrixWorldInverse),Rt.set(Et.normal.x,Et.normal.y,Et.normal.z,Et.constant);const tn=jt.projectionMatrix;Gt.x=(Math.sign(Rt.x)+tn.elements[8])/tn.elements[0],Gt.y=(Math.sign(Rt.y)+tn.elements[9])/tn.elements[5],Gt.z=-1,Gt.w=(1+tn.elements[10])/tn.elements[14],Rt.multiplyScalar(2/Rt.dot(Gt)),tn.elements[2]=Rt.x,tn.elements[6]=Rt.y,tn.elements[10]=Rt.z+1,tn.elements[14]=Rt.w},[yt,ft]),[Jt,Dt,zt,$t]=reactExports.useMemo(()=>{const Lt={minFilter:LinearFilter,magFilter:LinearFilter,type:HalfFloatType},Vt=new WebGLRenderTarget(tt,tt,Lt);Vt.depthBuffer=!0,Vt.depthTexture=new DepthTexture(tt,tt),Vt.depthTexture.format=DepthFormat,Vt.depthTexture.type=UnsignedShortType;const tn=new WebGLRenderTarget(tt,tt,Lt),an=new BlurPass({gl:xt,resolution:tt,width:nt[0],height:nt[1],minDepthThreshold:rt,maxDepthThreshold:it,depthScale:at,depthToBlurRatioBias:ot}),on={mirror:st,textureMatrix:Ht,mixBlur:_e,tDiffuse:Vt.texture,tDepth:Vt.depthTexture,tDiffuseBlur:tn.texture,hasBlur:At,mixStrength:_,minDepthThreshold:rt,maxDepthThreshold:it,depthScale:at,depthToBlurRatioBias:ot,distortion:lt,distortionMap:ut,mixContrast:ct,"defines-USE_BLUR":At?"":void 0,"defines-USE_DEPTH":at>0?"":void 0,"defines-USE_DISTORTION":ut?"":void 0};return[Vt,tn,an,on]},[xt,nt,Ht,tt,st,At,_e,_,rt,it,at,ot,lt,ut,ct]);return useFrame(()=>{var Lt;const Vt=vt.current.parent||((Lt=vt.current)==null?void 0:Lt.__r3f.parent);if(!Vt)return;Vt.visible=!1;const tn=xt.xr.enabled,an=xt.shadowMap.autoUpdate;Xt(),xt.xr.enabled=!1,xt.shadowMap.autoUpdate=!1,xt.setRenderTarget(Jt),xt.state.buffers.depth.setMask(!0),xt.autoClear||xt.clear(),xt.render(mt,jt),At&&zt.render(xt,Jt,Dt),xt.xr.enabled=tn,xt.shadowMap.autoUpdate=an,Vt.visible=!0,xt.setRenderTarget(null)}),reactExports.createElement("meshReflectorMaterialImpl",_extends$1({attach:"material",key:"key"+$t["defines-USE_BLUR"]+$t["defines-USE_DEPTH"]+$t["defines-USE_DISTORTION"],ref:mergeRefs([vt,gt])},$t,pt))}),presetsObj={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},CUBEMAP_ROOT="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",isArray=_e=>Array.isArray(_e);function useEnvironment({files:_e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:_="",preset:tt=void 0,encoding:nt=void 0,extensions:rt}={}){var it,at,ot;let st=null,lt=!1,ct;if(tt){if(!(tt in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "));_e=presetsObj[tt],_=CUBEMAP_ROOT}if(lt=isArray(_e),ct=isArray(_e)?"cube":_e.startsWith("data:application/exr")?"exr":_e.startsWith("data:application/hdr")?"hdr":(it=_e.split(".").pop())==null||(at=it.split("?"))==null||(ot=at.shift())==null?void 0:ot.toLowerCase(),st=lt?CubeTextureLoader:ct==="hdr"?RGBELoader:ct==="exr"?EXRLoader:null,!st)throw new Error("useEnvironment: Unrecognized file extension: "+_e);const ut=useLoader(st,lt?[_e]:_e,xt=>{xt.setPath==null||xt.setPath(_),rt&&rt(xt)}),ft=lt?ut[0]:ut;ft.mapping=lt?CubeReflectionMapping:EquirectangularReflectionMapping;const pt=3001,gt=3e3;return"colorSpace"in ft?ft.colorSpace=nt??lt?"srgb":"srgb-linear":ft.encoding=nt??lt?pt:gt,ft}const isRef=_e=>_e.current&&_e.current.isScene,resolveScene=_e=>isRef(_e)?_e.current:_e;function setEnvProps(_e,_,tt,nt,rt=0){const it=resolveScene(_||tt),at=it.background,ot=it.environment,st=it.backgroundBlurriness||0;return _e!=="only"&&(it.environment=nt),_e&&(it.background=nt),_e&&it.backgroundBlurriness!==void 0&&(it.backgroundBlurriness=rt),()=>{_e!=="only"&&(it.environment=ot),_e&&(it.background=at),_e&&it.backgroundBlurriness!==void 0&&(it.backgroundBlurriness=st)}}function EnvironmentMap({scene:_e,background:_=!1,blur:tt,map:nt}){const rt=useThree(it=>it.scene);return reactExports.useLayoutEffect(()=>{if(nt)return setEnvProps(_,_e,rt,nt,tt)},[rt,_e,nt,_,tt]),null}function EnvironmentCube({background:_e=!1,scene:_,blur:tt,...nt}){const rt=useEnvironment(nt),it=useThree(at=>at.scene);return reactExports.useLayoutEffect(()=>setEnvProps(_e,_,it,rt,tt),[rt,_e,_,it,tt]),null}function EnvironmentPortal({children:_e,near:_=1,far:tt=1e3,resolution:nt=256,frames:rt=1,map:it,background:at=!1,blur:ot,scene:st,files:lt,path:ct,preset:ut=void 0,extensions:ft}){const pt=useThree(vt=>vt.gl),gt=useThree(vt=>vt.scene),xt=reactExports.useRef(null),[yt]=reactExports.useState(()=>new Scene),mt=reactExports.useMemo(()=>{const vt=new WebGLCubeRenderTarget(nt);return vt.texture.type=HalfFloatType,vt},[nt]);reactExports.useLayoutEffect(()=>(rt===1&&xt.current.update(pt,yt),setEnvProps(at,st,gt,mt.texture,ot)),[_e,yt,mt.texture,st,gt,at,rt,pt]);let At=1;return useFrame(()=>{(rt===1/0||At<rt)&&(xt.current.update(pt,yt),At++)}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,_e,reactExports.createElement("cubeCamera",{ref:xt,args:[_,tt,mt]}),lt||ut?reactExports.createElement(EnvironmentCube,{background:!0,files:lt,preset:ut,path:ct,extensions:ft}):it?reactExports.createElement(EnvironmentMap,{background:!0,map:it,extensions:ft}):null),yt))}function EnvironmentGround(_e){var _,tt,nt,rt;const it=useEnvironment(_e),at=_e.map||it;reactExports.useMemo(()=>extend$2({GroundProjectedEnvImpl:GroundProjectedEnv}),[]);const ot=reactExports.useMemo(()=>[at],[at]),st=(_=_e.ground)==null?void 0:_.height,lt=(tt=_e.ground)==null?void 0:tt.radius,ct=(nt=(rt=_e.ground)==null?void 0:rt.scale)!==null&&nt!==void 0?nt:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends$1({},_e,{map:at})),reactExports.createElement("groundProjectedEnvImpl",{args:ot,scale:ct,height:st,radius:lt}))}function Environment(_e){return _e.ground?reactExports.createElement(EnvironmentGround,_e):_e.map?reactExports.createElement(EnvironmentMap,_e):_e.children?reactExports.createElement(EnvironmentPortal,_e):reactExports.createElement(EnvironmentCube,_e)}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _e(nt,rt,it,at,ot,st){if(st!==ReactPropTypesSecret){var lt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw lt.name="Invariant Violation",lt}}_e.isRequired=_e;function _(){return _e}var tt={array:_e,bigint:_e,bool:_e,func:_e,number:_e,object:_e,string:_e,symbol:_e,any:_e,arrayOf:_,element:_e,elementType:_e,instanceOf:_,node:_e,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return tt.PropTypes=tt,tt};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var shim={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$2=reactExports;function h$3(_e,_){return _e===_&&(_e!==0||1/_e===1/_)||_e!==_e&&_!==_}var k$3=typeof Object.is=="function"?Object.is:h$3,l$2=e$2.useState,m$3=e$2.useEffect,n$2=e$2.useLayoutEffect,p$4=e$2.useDebugValue;function q$2(_e,_){var tt=_(),nt=l$2({inst:{value:tt,getSnapshot:_}}),rt=nt[0].inst,it=nt[1];return n$2(function(){rt.value=tt,rt.getSnapshot=_,r$2(rt)&&it({inst:rt})},[_e,tt,_]),m$3(function(){return r$2(rt)&&it({inst:rt}),_e(function(){r$2(rt)&&it({inst:rt})})},[_e]),p$4(tt),tt}function r$2(_e){var _=_e.getSnapshot;_e=_e.value;try{var tt=_();return!k$3(_e,tt)}catch{return!0}}function t$2(_e,_){return _()}var u$3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$2:q$2;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$2.useSyncExternalStore!==void 0?e$2.useSyncExternalStore:u$3;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const{useEffect,useLayoutEffect,useRef,useInsertionEffect:useBuiltinInsertionEffect}=$2AODx$react,canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",useIsomorphicLayoutEffect=canUseDOM?useLayoutEffect:useEffect,useInsertionEffect=useBuiltinInsertionEffect||useIsomorphicLayoutEffect,useEvent=_e=>{const _=useRef([_e,(...tt)=>_[0](...tt)]).current;return useInsertionEffect(()=>{_[0]=_e}),_[1]},relativePath=(_e="",_=location.pathname)=>_.toLowerCase().indexOf(_e.toLowerCase())?"~"+_:_.slice(_e.length)||"/",absolutePath=(_e,_="")=>_e[0]==="~"?_e.slice(1):_+_e,eventPopstate="popstate",eventPushState="pushState",eventReplaceState="replaceState",eventHashchange="hashchange",events=[eventPopstate,eventPushState,eventReplaceState,eventHashchange],subscribeToLocationUpdates=_e=>{for(const _ of events)addEventListener(_,_e);return()=>{for(const _ of events)removeEventListener(_,_e)}},useLocationProperty=(_e,_)=>shimExports.useSyncExternalStore(subscribeToLocationUpdates,_e,_),currentPathname=()=>location.pathname,usePathname=({ssrPath:_e}={})=>useLocationProperty(currentPathname,_e?()=>_e:currentPathname),navigate=(_e,{replace:_=!1}={})=>history[_?eventReplaceState:eventPushState](null,"",_e),useLocation$1=(_e={})=>[relativePath(_e.base,usePathname(_e)),useEvent((_,tt)=>navigate(absolutePath(_,_e.base),tt))];if(typeof history<"u")for(const _e of[eventPushState,eventReplaceState]){const _=history[_e];history[_e]=function(){const tt=_.apply(this,arguments),nt=new Event(_e);return nt.arguments=arguments,dispatchEvent(nt),tt}}function makeMatcher(_e=pathToRegexp){let _={};const tt=nt=>_[nt]||(_[nt]=_e(nt));return(nt,rt)=>{const{regexp:it,keys:at}=tt(nt||""),ot=it.exec(rt);return ot?[!0,at.reduce((lt,ct,ut)=>(lt[ct.name]=ot[ut+1],lt),{})]:[!1,null]}}const escapeRx=_e=>_e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),rxForSegment=(_e,_,tt)=>{let nt=_e?"((?:[^\\/]+?)(?:\\/(?:[^\\/]+?))*)":"([^\\/]+?)";return _&&tt&&(nt="(?:\\/"+nt+")"),nt+(_?"?":"")},pathToRegexp=_e=>{const _=/:([A-Za-z0-9_]+)([?+*]?)/g;let tt=null,nt=0,rt=[],it="";for(;(tt=_.exec(_e))!==null;){const[at,ot,st]=tt,lt=st==="+"||st==="*",ct=st==="?"||st==="*",ut=ct&&_e[tt.index-1]==="/"?1:0,ft=_e.substring(nt,tt.index-ut);rt.push({name:ot}),nt=_.lastIndex,it+=escapeRx(ft)+rxForSegment(lt,ct,ut)}return it+=escapeRx(_e.substring(nt)),{keys:rt,regexp:new RegExp("^"+it+"(?:\\/)?$","i")}},defaultRouter={hook:useLocation$1,matcher:makeMatcher(),base:""},RouterCtx=reactExports.createContext(defaultRouter),useRouter=()=>reactExports.useContext(RouterCtx),useLocationFromRouter=_e=>_e.hook(_e),useLocation=()=>useLocationFromRouter(useRouter()),useRoute=_e=>{const _=useRouter(),[tt]=useLocationFromRouter(_);return _.matcher(_e,tt)};reactExports.forwardRef((_e,_)=>{const tt=useRouter(),[,nt]=useLocationFromRouter(tt),{to:rt,href:it=rt,children:at,onClick:ot}=_e,st=useEvent(ut=>{ut.ctrlKey||ut.metaKey||ut.altKey||ut.shiftKey||ut.button!==0||(ot&&ot(ut),ut.defaultPrevented||(ut.preventDefault(),nt(rt||it,_e)))}),lt={href:it[0]==="~"?it.slice(1):tt.base+it,onClick:st,to:null,ref:_},ct=reactExports.isValidElement(at)?at:reactExports.createElement("a",_e);return reactExports.cloneElement(ct,lt)});function _defineProperty$3(_e,_,tt){return _ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function _arrayLikeToArray$2(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var tt=0,nt=new Array(_);tt<_;tt++)nt[tt]=_e[tt];return nt}function _unsupportedIterableToArray$2(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$2(_e,_);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$2(_e,_)}}function _arrayWithoutHoles$1(_e){if(Array.isArray(_e))return _arrayLikeToArray$2(_e)}function _iterableToArray$1(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray$1(_e){return _arrayWithoutHoles$1(_e)||_iterableToArray$1(_e)||_unsupportedIterableToArray$2(_e)||_nonIterableSpread$1()}new Vector2;new Vector2;function clamp$2(_e,_,tt){return Math.max(_,Math.min(tt,_e))}function repeat(_e,_){return clamp$2(_e-Math.floor(_e/_)*_,0,_)}function deltaAngle(_e,_){var tt=repeat(_-_e,Math.PI*2);return tt>Math.PI&&(tt-=Math.PI*2),tt}function _classCallCheck(_e,_){if(!(_e instanceof _))throw new TypeError("Cannot call a class as a function")}var Grad=function _e(_,tt,nt){var rt=this;_classCallCheck(this,_e),_defineProperty$3(this,"dot2",function(it,at){return rt.x*it+rt.y*at}),_defineProperty$3(this,"dot3",function(it,at,ot){return rt.x*it+rt.y*at+rt.z*ot}),this.x=_,this.y=tt,this.z=nt},grad3=[new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)],p$3=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],perm=new Array(512),gradP=new Array(512),seed=function(_){_>0&&_<1&&(_*=65536),_=Math.floor(_),_<256&&(_|=_<<8);for(var tt=0;tt<256;tt++){var nt;tt&1?nt=p$3[tt]^_&255:nt=p$3[tt]^_>>8&255,perm[tt]=perm[tt+256]=nt,gradP[tt]=gradP[tt+256]=grad3[nt%12]}};seed(0);function normalizeSeed(_e){if(typeof _e=="number")_e=Math.abs(_e);else if(typeof _e=="string"){var _=_e;_e=0;for(var tt=0;tt<_.length;tt++)_e=(_e+(tt+1)*(_.charCodeAt(tt)%96))%2147483647}return _e===0&&(_e=311),_e}function lcgRandom(_e){var _=normalizeSeed(_e);return function(){var tt=_*48271%2147483647;return _=tt,tt/2147483647}}var Generator=function _e(_){var tt=this;_classCallCheck(this,_e),_defineProperty$3(this,"seed",0),_defineProperty$3(this,"init",function(nt){tt.seed=nt,tt.value=lcgRandom(nt)}),_defineProperty$3(this,"value",lcgRandom(this.seed)),this.init(_)};new Generator(Math.random());var rsqw=function(_){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return nt/Math.atan(1/tt)*Math.atan(Math.sin(2*Math.PI*_*rt)/tt)},exp$1=function(_){return 1/(1+_+.48*_*_+.235*_*_*_)};function damp(_e,_,tt){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,rt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,it=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,at=arguments.length>6&&arguments[6]!==void 0?arguments[6]:exp$1,ot=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,st="velocity_"+_;if(_e.__damp===void 0&&(_e.__damp={}),_e.__damp[st]===void 0&&(_e.__damp[st]=0),Math.abs(_e[_]-tt)<=ot)return _e[_]=tt,!1;nt=Math.max(1e-4,nt);var lt=2/nt,ct=at(lt*rt),ut=_e[_]-tt,ft=tt,pt=it*nt;ut=Math.min(Math.max(ut,-pt),pt),tt=_e[_]-ut;var gt=(_e.__damp[st]+lt*ut)*rt;_e.__damp[st]=(_e.__damp[st]-lt*gt)*ct;var xt=tt+(ut+gt)*ct;return ft-_e[_]>0==xt>ft&&(xt=ft,_e.__damp[st]=(xt-ft)/rt),_e[_]=xt,!0}function dampAngle(_e,_,tt,nt,rt,it,at,ot){return damp(_e,_,_e[_]+deltaAngle(_e[_],tt),nt,rt,it,at,ot)}var v2d=new Vector2,a2,b2;function damp2(_e,_,tt,nt,rt,it,at){return typeof _=="number"?v2d.setScalar(_):Array.isArray(_)?v2d.set(_[0],_[1]):v2d.copy(_),a2=damp(_e,"x",v2d.x,tt,nt,rt,it,at),b2=damp(_e,"y",v2d.y,tt,nt,rt,it,at),a2||b2}var v3d=new Vector3,a3,b3,c3;function damp3(_e,_,tt,nt,rt,it,at){return typeof _=="number"?v3d.setScalar(_):Array.isArray(_)?v3d.set(_[0],_[1],_[2]):v3d.copy(_),a3=damp(_e,"x",v3d.x,tt,nt,rt,it,at),b3=damp(_e,"y",v3d.y,tt,nt,rt,it,at),c3=damp(_e,"z",v3d.z,tt,nt,rt,it,at),a3||b3||c3}var v4d=new Vector4,a4,b4,c4,d4;function damp4(_e,_,tt,nt,rt,it,at){return typeof _=="number"?v4d.setScalar(_):Array.isArray(_)?v4d.set(_[0],_[1],_[2],_[3]):v4d.copy(_),a4=damp(_e,"x",v4d.x,tt,nt,rt,it,at),b4=damp(_e,"y",v4d.y,tt,nt,rt,it,at),c4=damp(_e,"z",v4d.z,tt,nt,rt,it,at),d4=damp(_e,"w",v4d.w,tt,nt,rt,it,at),a4||b4||c4||d4}var rot=new Euler,aE,bE,cE;function dampE(_e,_,tt,nt,rt,it,at){return Array.isArray(_)?rot.set(_[0],_[1],_[2],_[3]):rot.copy(_),aE=dampAngle(_e,"x",rot.x,tt,nt,rt,it,at),bE=dampAngle(_e,"y",rot.y,tt,nt,rt,it,at),cE=dampAngle(_e,"z",rot.z,tt,nt,rt,it,at),aE||bE||cE}var col=new Color$1,aC,bC,cC;function dampC(_e,_,tt,nt,rt,it,at){return _ instanceof Color$1?col.copy(_):Array.isArray(_)?col.setRGB(_[0],_[1],_[2]):col.set(_),aC=damp(_e,"r",col.r,tt,nt,rt,it,at),bC=damp(_e,"g",col.g,tt,nt,rt,it,at),cC=damp(_e,"b",col.b,tt,nt,rt,it,at),aC||bC||cC}var qt=new Quaternion,v4result=new Vector4,v4velocity=new Vector4,v4error=new Vector4,aQ,bQ,cQ,dQ;function dampQ(_e,_,tt,nt,rt,it,at){var ot=_e;Array.isArray(_)?qt.set(_[0],_[1],_[2],_[3]):qt.copy(_);var st=_e.dot(qt)>0?1:-1;return qt.x*=st,qt.y*=st,qt.z*=st,qt.w*=st,aQ=damp(_e,"x",qt.x,tt,nt,rt,it,at),bQ=damp(_e,"y",qt.y,tt,nt,rt,it,at),cQ=damp(_e,"z",qt.z,tt,nt,rt,it,at),dQ=damp(_e,"w",qt.w,tt,nt,rt,it,at),v4result.set(_e.x,_e.y,_e.z,_e.w).normalize(),v4velocity.set(ot.__damp.velocity_x,ot.__damp.velocity_y,ot.__damp.velocity_z,ot.__damp.velocity_w),v4error.copy(v4result).multiplyScalar(v4velocity.dot(v4result)/v4result.dot(v4result)),ot.__damp.velocity_x-=v4error.x,ot.__damp.velocity_y-=v4error.y,ot.__damp.velocity_z-=v4error.z,ot.__damp.velocity_w-=v4error.w,_e.set(v4result.x,v4result.y,v4result.z,v4result.w),aQ||bQ||cQ||dQ}var spherical=new Spherical,aS,bS,cS;function dampS(_e,_,tt,nt,rt,it,at){return Array.isArray(_)?spherical.set(_[0],_[1],_[2]):spherical.copy(_),aS=damp(_e,"radius",spherical.radius,tt,nt,rt,it,at),bS=dampAngle(_e,"phi",spherical.phi,tt,nt,rt,it,at),cS=dampAngle(_e,"theta",spherical.theta,tt,nt,rt,it,at),aS||bS||cS}var mat=new Matrix4,mPos=new Vector3,mRot=new Quaternion,mSca=new Vector3,aM,bM,cM;function dampM(_e,_,tt,nt,rt,it,at){var ot=_e;return ot.__damp===void 0&&(ot.__damp={position:new Vector3,rotation:new Quaternion,scale:new Vector3},_e.decompose(ot.__damp.position,ot.__damp.rotation,ot.__damp.scale)),Array.isArray(_)?mat.set.apply(mat,_toConsumableArray$1(_)):mat.copy(_),mat.decompose(mPos,mRot,mSca),aM=damp3(ot.__damp.position,mPos,tt,nt,rt,it,at),bM=dampQ(ot.__damp.rotation,mRot,tt,nt,rt,it,at),cM=damp3(ot.__damp.scale,mSca,tt,nt,rt,it,at),_e.compose(ot.__damp.position,ot.__damp.rotation,ot.__damp.scale),aM||bM||cM}var easing=Object.freeze({__proto__:null,rsqw,exp:exp$1,damp,dampAngle,damp2,damp3,damp4,dampE,dampC,dampQ,dampS,dampM}),md5$1={exports:{}};/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(_e){return Object.prototype.toString.call(_e)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(_e){return typeof _e=="object"&&_e.buffer&&_e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(_e){return function(_){return new Md5(!0).update(_)[_e]()}},createMethod=function(){var _e=createOutputMethod("hex");NODE_JS&&(_e=nodeWrap(_e)),_e.create=function(){return new Md5},_e.update=function(nt){return _e.create().update(nt)};for(var _=0;_<OUTPUT_TYPES.length;++_){var tt=OUTPUT_TYPES[_];_e[tt]=createOutputMethod(tt)}return _e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(_e){if(typeof _e=="string")return crypto.createHash("md5").update(_e,"utf8").digest("hex");if(_e==null)throw ERROR;return _e.constructor===ArrayBuffer&&(_e=new Uint8Array(_e)),Array.isArray(_e)||ArrayBuffer.isView(_e)||_e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(_e)).digest("hex"):method(_e)};return nodeMethod};function Md5(_e){if(_e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var _=new ArrayBuffer(68);this.buffer8=new Uint8Array(_),this.blocks=new Uint32Array(_)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(_e){if(!this.finalized){var _,tt=typeof _e;if(tt!=="string"){if(tt==="object"){if(_e===null)throw ERROR;if(ARRAY_BUFFER&&_e.constructor===ArrayBuffer)_e=new Uint8Array(_e);else if(!Array.isArray(_e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(_e)))throw ERROR}else throw ERROR;_=!0}for(var nt,rt=0,it,at=_e.length,ot=this.blocks,st=this.buffer8;rt<at;){if(this.hashed&&(this.hashed=!1,ot[0]=ot[16],ot[16]=ot[1]=ot[2]=ot[3]=ot[4]=ot[5]=ot[6]=ot[7]=ot[8]=ot[9]=ot[10]=ot[11]=ot[12]=ot[13]=ot[14]=ot[15]=0),_)if(ARRAY_BUFFER)for(it=this.start;rt<at&&it<64;++rt)st[it++]=_e[rt];else for(it=this.start;rt<at&&it<64;++rt)ot[it>>2]|=_e[rt]<<SHIFT[it++&3];else if(ARRAY_BUFFER)for(it=this.start;rt<at&&it<64;++rt)nt=_e.charCodeAt(rt),nt<128?st[it++]=nt:nt<2048?(st[it++]=192|nt>>6,st[it++]=128|nt&63):nt<55296||nt>=57344?(st[it++]=224|nt>>12,st[it++]=128|nt>>6&63,st[it++]=128|nt&63):(nt=65536+((nt&1023)<<10|_e.charCodeAt(++rt)&1023),st[it++]=240|nt>>18,st[it++]=128|nt>>12&63,st[it++]=128|nt>>6&63,st[it++]=128|nt&63);else for(it=this.start;rt<at&&it<64;++rt)nt=_e.charCodeAt(rt),nt<128?ot[it>>2]|=nt<<SHIFT[it++&3]:nt<2048?(ot[it>>2]|=(192|nt>>6)<<SHIFT[it++&3],ot[it>>2]|=(128|nt&63)<<SHIFT[it++&3]):nt<55296||nt>=57344?(ot[it>>2]|=(224|nt>>12)<<SHIFT[it++&3],ot[it>>2]|=(128|nt>>6&63)<<SHIFT[it++&3],ot[it>>2]|=(128|nt&63)<<SHIFT[it++&3]):(nt=65536+((nt&1023)<<10|_e.charCodeAt(++rt)&1023),ot[it>>2]|=(240|nt>>18)<<SHIFT[it++&3],ot[it>>2]|=(128|nt>>12&63)<<SHIFT[it++&3],ot[it>>2]|=(128|nt>>6&63)<<SHIFT[it++&3],ot[it>>2]|=(128|nt&63)<<SHIFT[it++&3]);this.lastByteIndex=it,this.bytes+=it-this.start,it>=64?(this.start=it-64,this.hash(),this.hashed=!0):this.start=it}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _e=this.blocks,_=this.lastByteIndex;_e[_>>2]|=EXTRA[_&3],_>=56&&(this.hashed||this.hash(),_e[0]=_e[16],_e[16]=_e[1]=_e[2]=_e[3]=_e[4]=_e[5]=_e[6]=_e[7]=_e[8]=_e[9]=_e[10]=_e[11]=_e[12]=_e[13]=_e[14]=_e[15]=0),_e[14]=this.bytes<<3,_e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var _e,_,tt,nt,rt,it,at=this.blocks;this.first?(_e=at[0]-680876937,_e=(_e<<7|_e>>>25)-271733879<<0,nt=(-1732584194^_e&2004318071)+at[1]-117830708,nt=(nt<<12|nt>>>20)+_e<<0,tt=(-271733879^nt&(_e^-271733879))+at[2]-1126478375,tt=(tt<<17|tt>>>15)+nt<<0,_=(_e^tt&(nt^_e))+at[3]-1316259209,_=(_<<22|_>>>10)+tt<<0):(_e=this.h0,_=this.h1,tt=this.h2,nt=this.h3,_e+=(nt^_&(tt^nt))+at[0]-680876936,_e=(_e<<7|_e>>>25)+_<<0,nt+=(tt^_e&(_^tt))+at[1]-389564586,nt=(nt<<12|nt>>>20)+_e<<0,tt+=(_^nt&(_e^_))+at[2]+606105819,tt=(tt<<17|tt>>>15)+nt<<0,_+=(_e^tt&(nt^_e))+at[3]-1044525330,_=(_<<22|_>>>10)+tt<<0),_e+=(nt^_&(tt^nt))+at[4]-176418897,_e=(_e<<7|_e>>>25)+_<<0,nt+=(tt^_e&(_^tt))+at[5]+1200080426,nt=(nt<<12|nt>>>20)+_e<<0,tt+=(_^nt&(_e^_))+at[6]-1473231341,tt=(tt<<17|tt>>>15)+nt<<0,_+=(_e^tt&(nt^_e))+at[7]-45705983,_=(_<<22|_>>>10)+tt<<0,_e+=(nt^_&(tt^nt))+at[8]+1770035416,_e=(_e<<7|_e>>>25)+_<<0,nt+=(tt^_e&(_^tt))+at[9]-1958414417,nt=(nt<<12|nt>>>20)+_e<<0,tt+=(_^nt&(_e^_))+at[10]-42063,tt=(tt<<17|tt>>>15)+nt<<0,_+=(_e^tt&(nt^_e))+at[11]-1990404162,_=(_<<22|_>>>10)+tt<<0,_e+=(nt^_&(tt^nt))+at[12]+1804603682,_e=(_e<<7|_e>>>25)+_<<0,nt+=(tt^_e&(_^tt))+at[13]-40341101,nt=(nt<<12|nt>>>20)+_e<<0,tt+=(_^nt&(_e^_))+at[14]-1502002290,tt=(tt<<17|tt>>>15)+nt<<0,_+=(_e^tt&(nt^_e))+at[15]+1236535329,_=(_<<22|_>>>10)+tt<<0,_e+=(tt^nt&(_^tt))+at[1]-165796510,_e=(_e<<5|_e>>>27)+_<<0,nt+=(_^tt&(_e^_))+at[6]-1069501632,nt=(nt<<9|nt>>>23)+_e<<0,tt+=(_e^_&(nt^_e))+at[11]+643717713,tt=(tt<<14|tt>>>18)+nt<<0,_+=(nt^_e&(tt^nt))+at[0]-373897302,_=(_<<20|_>>>12)+tt<<0,_e+=(tt^nt&(_^tt))+at[5]-701558691,_e=(_e<<5|_e>>>27)+_<<0,nt+=(_^tt&(_e^_))+at[10]+38016083,nt=(nt<<9|nt>>>23)+_e<<0,tt+=(_e^_&(nt^_e))+at[15]-660478335,tt=(tt<<14|tt>>>18)+nt<<0,_+=(nt^_e&(tt^nt))+at[4]-405537848,_=(_<<20|_>>>12)+tt<<0,_e+=(tt^nt&(_^tt))+at[9]+568446438,_e=(_e<<5|_e>>>27)+_<<0,nt+=(_^tt&(_e^_))+at[14]-1019803690,nt=(nt<<9|nt>>>23)+_e<<0,tt+=(_e^_&(nt^_e))+at[3]-187363961,tt=(tt<<14|tt>>>18)+nt<<0,_+=(nt^_e&(tt^nt))+at[8]+1163531501,_=(_<<20|_>>>12)+tt<<0,_e+=(tt^nt&(_^tt))+at[13]-1444681467,_e=(_e<<5|_e>>>27)+_<<0,nt+=(_^tt&(_e^_))+at[2]-51403784,nt=(nt<<9|nt>>>23)+_e<<0,tt+=(_e^_&(nt^_e))+at[7]+1735328473,tt=(tt<<14|tt>>>18)+nt<<0,_+=(nt^_e&(tt^nt))+at[12]-1926607734,_=(_<<20|_>>>12)+tt<<0,rt=_^tt,_e+=(rt^nt)+at[5]-378558,_e=(_e<<4|_e>>>28)+_<<0,nt+=(rt^_e)+at[8]-2022574463,nt=(nt<<11|nt>>>21)+_e<<0,it=nt^_e,tt+=(it^_)+at[11]+1839030562,tt=(tt<<16|tt>>>16)+nt<<0,_+=(it^tt)+at[14]-35309556,_=(_<<23|_>>>9)+tt<<0,rt=_^tt,_e+=(rt^nt)+at[1]-1530992060,_e=(_e<<4|_e>>>28)+_<<0,nt+=(rt^_e)+at[4]+1272893353,nt=(nt<<11|nt>>>21)+_e<<0,it=nt^_e,tt+=(it^_)+at[7]-155497632,tt=(tt<<16|tt>>>16)+nt<<0,_+=(it^tt)+at[10]-1094730640,_=(_<<23|_>>>9)+tt<<0,rt=_^tt,_e+=(rt^nt)+at[13]+681279174,_e=(_e<<4|_e>>>28)+_<<0,nt+=(rt^_e)+at[0]-358537222,nt=(nt<<11|nt>>>21)+_e<<0,it=nt^_e,tt+=(it^_)+at[3]-722521979,tt=(tt<<16|tt>>>16)+nt<<0,_+=(it^tt)+at[6]+76029189,_=(_<<23|_>>>9)+tt<<0,rt=_^tt,_e+=(rt^nt)+at[9]-640364487,_e=(_e<<4|_e>>>28)+_<<0,nt+=(rt^_e)+at[12]-421815835,nt=(nt<<11|nt>>>21)+_e<<0,it=nt^_e,tt+=(it^_)+at[15]+530742520,tt=(tt<<16|tt>>>16)+nt<<0,_+=(it^tt)+at[2]-995338651,_=(_<<23|_>>>9)+tt<<0,_e+=(tt^(_|~nt))+at[0]-198630844,_e=(_e<<6|_e>>>26)+_<<0,nt+=(_^(_e|~tt))+at[7]+1126891415,nt=(nt<<10|nt>>>22)+_e<<0,tt+=(_e^(nt|~_))+at[14]-1416354905,tt=(tt<<15|tt>>>17)+nt<<0,_+=(nt^(tt|~_e))+at[5]-57434055,_=(_<<21|_>>>11)+tt<<0,_e+=(tt^(_|~nt))+at[12]+1700485571,_e=(_e<<6|_e>>>26)+_<<0,nt+=(_^(_e|~tt))+at[3]-1894986606,nt=(nt<<10|nt>>>22)+_e<<0,tt+=(_e^(nt|~_))+at[10]-1051523,tt=(tt<<15|tt>>>17)+nt<<0,_+=(nt^(tt|~_e))+at[1]-2054922799,_=(_<<21|_>>>11)+tt<<0,_e+=(tt^(_|~nt))+at[8]+1873313359,_e=(_e<<6|_e>>>26)+_<<0,nt+=(_^(_e|~tt))+at[15]-30611744,nt=(nt<<10|nt>>>22)+_e<<0,tt+=(_e^(nt|~_))+at[6]-1560198380,tt=(tt<<15|tt>>>17)+nt<<0,_+=(nt^(tt|~_e))+at[13]+1309151649,_=(_<<21|_>>>11)+tt<<0,_e+=(tt^(_|~nt))+at[4]-145523070,_e=(_e<<6|_e>>>26)+_<<0,nt+=(_^(_e|~tt))+at[11]-1120210379,nt=(nt<<10|nt>>>22)+_e<<0,tt+=(_e^(nt|~_))+at[2]+718787259,tt=(tt<<15|tt>>>17)+nt<<0,_+=(nt^(tt|~_e))+at[9]-343485551,_=(_<<21|_>>>11)+tt<<0,this.first?(this.h0=_e+1732584193<<0,this.h1=_-271733879<<0,this.h2=tt-1732584194<<0,this.h3=nt+271733878<<0,this.first=!1):(this.h0=this.h0+_e<<0,this.h1=this.h1+_<<0,this.h2=this.h2+tt<<0,this.h3=this.h3+nt<<0)},Md5.prototype.hex=function(){this.finalize();var _e=this.h0,_=this.h1,tt=this.h2,nt=this.h3;return HEX_CHARS[_e>>4&15]+HEX_CHARS[_e&15]+HEX_CHARS[_e>>12&15]+HEX_CHARS[_e>>8&15]+HEX_CHARS[_e>>20&15]+HEX_CHARS[_e>>16&15]+HEX_CHARS[_e>>28&15]+HEX_CHARS[_e>>24&15]+HEX_CHARS[_>>4&15]+HEX_CHARS[_&15]+HEX_CHARS[_>>12&15]+HEX_CHARS[_>>8&15]+HEX_CHARS[_>>20&15]+HEX_CHARS[_>>16&15]+HEX_CHARS[_>>28&15]+HEX_CHARS[_>>24&15]+HEX_CHARS[tt>>4&15]+HEX_CHARS[tt&15]+HEX_CHARS[tt>>12&15]+HEX_CHARS[tt>>8&15]+HEX_CHARS[tt>>20&15]+HEX_CHARS[tt>>16&15]+HEX_CHARS[tt>>28&15]+HEX_CHARS[tt>>24&15]+HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var _e=this.h0,_=this.h1,tt=this.h2,nt=this.h3;return[_e&255,_e>>8&255,_e>>16&255,_e>>24&255,_&255,_>>8&255,_>>16&255,_>>24&255,tt&255,tt>>8&255,tt>>16&255,tt>>24&255,nt&255,nt>>8&255,nt>>16&255,nt>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var _e=new ArrayBuffer(16),_=new Uint32Array(_e);return _[0]=this.h0,_[1]=this.h1,_[2]=this.h2,_[3]=this.h3,_e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var _e,_,tt,nt="",rt=this.array(),it=0;it<15;)_e=rt[it++],_=rt[it++],tt=rt[it++],nt+=BASE64_ENCODE_CHAR[_e>>>2]+BASE64_ENCODE_CHAR[(_e<<4|_>>>4)&63]+BASE64_ENCODE_CHAR[(_<<2|tt>>>6)&63]+BASE64_ENCODE_CHAR[tt&63];return _e=rt[it],nt+=BASE64_ENCODE_CHAR[_e>>>2]+BASE64_ENCODE_CHAR[_e<<4&63]+"==",nt};var exports=createMethod();COMMON_JS?module.exports=exports:root.md5=exports})()})(md5$1);var md5Exports=md5$1.exports,sha1$1={exports:{}};/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var root=typeof window=="object"?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS&&(root=commonjsGlobal);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&!0&&module.exports,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(_e){return function(_){return new Sha1(!0).update(_)[_e]()}},createMethod=function(){var _e=createOutputMethod("hex");NODE_JS&&(_e=nodeWrap(_e)),_e.create=function(){return new Sha1},_e.update=function(nt){return _e.create().update(nt)};for(var _=0;_<OUTPUT_TYPES.length;++_){var tt=OUTPUT_TYPES[_];_e[tt]=createOutputMethod(tt)}return _e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(_e){if(typeof _e=="string")return crypto.createHash("sha1").update(_e,"utf8").digest("hex");if(_e.constructor===ArrayBuffer)_e=new Uint8Array(_e);else if(_e.length===void 0)return method(_e);return crypto.createHash("sha1").update(new Buffer(_e)).digest("hex")};return nodeMethod};function Sha1(_e){_e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(_e){if(!this.finalized){var _=typeof _e!="string";_&&_e.constructor===root.ArrayBuffer&&(_e=new Uint8Array(_e));for(var tt,nt=0,rt,it=_e.length||0,at=this.blocks;nt<it;){if(this.hashed&&(this.hashed=!1,at[0]=this.block,at[16]=at[1]=at[2]=at[3]=at[4]=at[5]=at[6]=at[7]=at[8]=at[9]=at[10]=at[11]=at[12]=at[13]=at[14]=at[15]=0),_)for(rt=this.start;nt<it&&rt<64;++nt)at[rt>>2]|=_e[nt]<<SHIFT[rt++&3];else for(rt=this.start;nt<it&&rt<64;++nt)tt=_e.charCodeAt(nt),tt<128?at[rt>>2]|=tt<<SHIFT[rt++&3]:tt<2048?(at[rt>>2]|=(192|tt>>6)<<SHIFT[rt++&3],at[rt>>2]|=(128|tt&63)<<SHIFT[rt++&3]):tt<55296||tt>=57344?(at[rt>>2]|=(224|tt>>12)<<SHIFT[rt++&3],at[rt>>2]|=(128|tt>>6&63)<<SHIFT[rt++&3],at[rt>>2]|=(128|tt&63)<<SHIFT[rt++&3]):(tt=65536+((tt&1023)<<10|_e.charCodeAt(++nt)&1023),at[rt>>2]|=(240|tt>>18)<<SHIFT[rt++&3],at[rt>>2]|=(128|tt>>12&63)<<SHIFT[rt++&3],at[rt>>2]|=(128|tt>>6&63)<<SHIFT[rt++&3],at[rt>>2]|=(128|tt&63)<<SHIFT[rt++&3]);this.lastByteIndex=rt,this.bytes+=rt-this.start,rt>=64?(this.block=at[16],this.start=rt-64,this.hash(),this.hashed=!0):this.start=rt}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var _e=this.blocks,_=this.lastByteIndex;_e[16]=this.block,_e[_>>2]|=EXTRA[_&3],this.block=_e[16],_>=56&&(this.hashed||this.hash(),_e[0]=this.block,_e[16]=_e[1]=_e[2]=_e[3]=_e[4]=_e[5]=_e[6]=_e[7]=_e[8]=_e[9]=_e[10]=_e[11]=_e[12]=_e[13]=_e[14]=_e[15]=0),_e[14]=this.hBytes<<3|this.bytes>>>29,_e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var _e=this.h0,_=this.h1,tt=this.h2,nt=this.h3,rt=this.h4,it,at,ot,st=this.blocks;for(at=16;at<80;++at)ot=st[at-3]^st[at-8]^st[at-14]^st[at-16],st[at]=ot<<1|ot>>>31;for(at=0;at<20;at+=5)it=_&tt|~_&nt,ot=_e<<5|_e>>>27,rt=ot+it+rt+1518500249+st[at]<<0,_=_<<30|_>>>2,it=_e&_|~_e&tt,ot=rt<<5|rt>>>27,nt=ot+it+nt+1518500249+st[at+1]<<0,_e=_e<<30|_e>>>2,it=rt&_e|~rt&_,ot=nt<<5|nt>>>27,tt=ot+it+tt+1518500249+st[at+2]<<0,rt=rt<<30|rt>>>2,it=nt&rt|~nt&_e,ot=tt<<5|tt>>>27,_=ot+it+_+1518500249+st[at+3]<<0,nt=nt<<30|nt>>>2,it=tt&nt|~tt&rt,ot=_<<5|_>>>27,_e=ot+it+_e+1518500249+st[at+4]<<0,tt=tt<<30|tt>>>2;for(;at<40;at+=5)it=_^tt^nt,ot=_e<<5|_e>>>27,rt=ot+it+rt+1859775393+st[at]<<0,_=_<<30|_>>>2,it=_e^_^tt,ot=rt<<5|rt>>>27,nt=ot+it+nt+1859775393+st[at+1]<<0,_e=_e<<30|_e>>>2,it=rt^_e^_,ot=nt<<5|nt>>>27,tt=ot+it+tt+1859775393+st[at+2]<<0,rt=rt<<30|rt>>>2,it=nt^rt^_e,ot=tt<<5|tt>>>27,_=ot+it+_+1859775393+st[at+3]<<0,nt=nt<<30|nt>>>2,it=tt^nt^rt,ot=_<<5|_>>>27,_e=ot+it+_e+1859775393+st[at+4]<<0,tt=tt<<30|tt>>>2;for(;at<60;at+=5)it=_&tt|_&nt|tt&nt,ot=_e<<5|_e>>>27,rt=ot+it+rt-1894007588+st[at]<<0,_=_<<30|_>>>2,it=_e&_|_e&tt|_&tt,ot=rt<<5|rt>>>27,nt=ot+it+nt-1894007588+st[at+1]<<0,_e=_e<<30|_e>>>2,it=rt&_e|rt&_|_e&_,ot=nt<<5|nt>>>27,tt=ot+it+tt-1894007588+st[at+2]<<0,rt=rt<<30|rt>>>2,it=nt&rt|nt&_e|rt&_e,ot=tt<<5|tt>>>27,_=ot+it+_-1894007588+st[at+3]<<0,nt=nt<<30|nt>>>2,it=tt&nt|tt&rt|nt&rt,ot=_<<5|_>>>27,_e=ot+it+_e-1894007588+st[at+4]<<0,tt=tt<<30|tt>>>2;for(;at<80;at+=5)it=_^tt^nt,ot=_e<<5|_e>>>27,rt=ot+it+rt-899497514+st[at]<<0,_=_<<30|_>>>2,it=_e^_^tt,ot=rt<<5|rt>>>27,nt=ot+it+nt-899497514+st[at+1]<<0,_e=_e<<30|_e>>>2,it=rt^_e^_,ot=nt<<5|nt>>>27,tt=ot+it+tt-899497514+st[at+2]<<0,rt=rt<<30|rt>>>2,it=nt^rt^_e,ot=tt<<5|tt>>>27,_=ot+it+_-899497514+st[at+3]<<0,nt=nt<<30|nt>>>2,it=tt^nt^rt,ot=_<<5|_>>>27,_e=ot+it+_e-899497514+st[at+4]<<0,tt=tt<<30|tt>>>2;this.h0=this.h0+_e<<0,this.h1=this.h1+_<<0,this.h2=this.h2+tt<<0,this.h3=this.h3+nt<<0,this.h4=this.h4+rt<<0},Sha1.prototype.hex=function(){this.finalize();var _e=this.h0,_=this.h1,tt=this.h2,nt=this.h3,rt=this.h4;return HEX_CHARS[_e>>28&15]+HEX_CHARS[_e>>24&15]+HEX_CHARS[_e>>20&15]+HEX_CHARS[_e>>16&15]+HEX_CHARS[_e>>12&15]+HEX_CHARS[_e>>8&15]+HEX_CHARS[_e>>4&15]+HEX_CHARS[_e&15]+HEX_CHARS[_>>28&15]+HEX_CHARS[_>>24&15]+HEX_CHARS[_>>20&15]+HEX_CHARS[_>>16&15]+HEX_CHARS[_>>12&15]+HEX_CHARS[_>>8&15]+HEX_CHARS[_>>4&15]+HEX_CHARS[_&15]+HEX_CHARS[tt>>28&15]+HEX_CHARS[tt>>24&15]+HEX_CHARS[tt>>20&15]+HEX_CHARS[tt>>16&15]+HEX_CHARS[tt>>12&15]+HEX_CHARS[tt>>8&15]+HEX_CHARS[tt>>4&15]+HEX_CHARS[tt&15]+HEX_CHARS[nt>>28&15]+HEX_CHARS[nt>>24&15]+HEX_CHARS[nt>>20&15]+HEX_CHARS[nt>>16&15]+HEX_CHARS[nt>>12&15]+HEX_CHARS[nt>>8&15]+HEX_CHARS[nt>>4&15]+HEX_CHARS[nt&15]+HEX_CHARS[rt>>28&15]+HEX_CHARS[rt>>24&15]+HEX_CHARS[rt>>20&15]+HEX_CHARS[rt>>16&15]+HEX_CHARS[rt>>12&15]+HEX_CHARS[rt>>8&15]+HEX_CHARS[rt>>4&15]+HEX_CHARS[rt&15]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var _e=this.h0,_=this.h1,tt=this.h2,nt=this.h3,rt=this.h4;return[_e>>24&255,_e>>16&255,_e>>8&255,_e&255,_>>24&255,_>>16&255,_>>8&255,_&255,tt>>24&255,tt>>16&255,tt>>8&255,tt&255,nt>>24&255,nt>>16&255,nt>>8&255,nt&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var _e=new ArrayBuffer(20),_=new DataView(_e);return _.setUint32(0,this.h0),_.setUint32(4,this.h1),_.setUint32(8,this.h2),_.setUint32(12,this.h3),_.setUint32(16,this.h4),_e};var exports=createMethod();COMMON_JS?module.exports=exports:root.sha1=exports})()})(sha1$1);var sha1Exports=sha1$1.exports,md5=md5Exports,sha1=sha1Exports,HEX_DIGITS="0123456789abcdef".split(""),UUID_LENGTH=36,UUID_REGEXP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$/i,HEX_TO_BYTE_MAP=function(){for(var _e={},_=0;_<256;_++){var tt=_.toString(16);_e[tt.length===1?"0"+tt:tt]=_}return _e}(),uint8ToHex=function(_e){var _=_e>>4,tt=_e-(_<<4);return HEX_DIGITS[_]+HEX_DIGITS[tt]},uint8ArrayToHex=function(_e){for(var _="",tt=0;tt<_e.length;tt++)_+=uint8ToHex(_e[tt]);return _},stringToCharBuffer=function(_e){for(var _=unescape(encodeURIComponent(_e)),tt=new Uint8Array(_.length),nt=0;nt<_.length;nt++)tt[nt]=_[nt].charCodeAt(0);return tt},md5Hash=function(_e){return new Uint8Array(md5.arrayBuffer(_e))},sha1Hash=function(_e){return new Uint8Array(sha1.arrayBuffer(_e))},concatBuffers=function(_e,_){var tt=new Uint8Array(_e.length+_.length);return tt.set(new Uint8Array(_e),0),tt.set(new Uint8Array(_),_e.byteLength),tt},validateUuid=function(_e){return typeof _e=="string"&&_e.length===UUID_LENGTH&&UUID_REGEXP.test(_e)},parseUuid=function(_e){if(!validateUuid(_e))throw TypeError("Invalid UUID");for(var _=new Uint8Array(16),tt=0,nt=0;tt<_e.length;){if(_e[tt]==="-"){tt++;continue}var rt=(_e[tt]+_e[tt+1]).toLowerCase();_[nt]=HEX_TO_BYTE_MAP[rt],nt++,tt+=2}return _},hashToUuid=function(_e,_){return uint8ArrayToHex(_e.slice(0,4))+"-"+uint8ArrayToHex(_e.slice(4,6))+"-"+uint8ToHex(_e[6]&15|parseInt(_*10,16))+uint8ToHex(_e[7])+"-"+uint8ToHex(_e[8]&63|128)+uint8ToHex(_e[9])+"-"+uint8ArrayToHex(_e.slice(10,16))},lib$1={uint8ToHex,uint8ArrayToHex,stringToCharBuffer,md5Hash,sha1Hash,concatBuffers,validateUuid,parseUuid,hashToUuid},lib=lib$1,EMPTY_UINT8_ARRAY=new Uint8Array(0);function generateUuid(_e,_,tt){if(typeof _e!="string")throw TypeError("Value must be string");if(typeof _=="number")return generateUuid(_e,void 0,_);if(tt==null)return generateUuid(_e,_,5);if(tt!==3&&tt!==5)throw TypeError("Version of UUID can be only 3 or 5");var nt=lib.stringToCharBuffer(_e),rt=typeof _=="string"?lib.parseUuid(_):EMPTY_UINT8_ARRAY,it=lib.concatBuffers(rt,nt),at=tt===3?lib.md5Hash(it):lib.sha1Hash(it);return lib.hashToUuid(at,tt)}var src=generateUuid;const getUuid=getDefaultExportFromCjs(src);function $6ed0406888f73fc4$var$setRef(_e,_){typeof _e=="function"?_e(_):_e!=null&&(_e.current=_)}function $6ed0406888f73fc4$export$43e446d32b3d21af(..._e){return _=>_e.forEach(tt=>$6ed0406888f73fc4$var$setRef(tt,_))}function $6ed0406888f73fc4$export$c7b2cbe3552a0d05(..._e){return reactExports.useCallback($6ed0406888f73fc4$export$43e446d32b3d21af(..._e),_e)}const $5e63c961fc1ce211$export$8c6ed5c666ac1360=reactExports.forwardRef((_e,_)=>{const{children:tt,...nt}=_e,rt=reactExports.Children.toArray(tt),it=rt.find($5e63c961fc1ce211$var$isSlottable);if(it){const at=it.props.children,ot=rt.map(st=>st===it?reactExports.Children.count(at)>1?reactExports.Children.only(null):reactExports.isValidElement(at)?at.props.children:null:st);return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},nt,{ref:_}),reactExports.isValidElement(at)?reactExports.cloneElement(at,void 0,ot):null)}return reactExports.createElement($5e63c961fc1ce211$var$SlotClone,_extends$1({},nt,{ref:_}),tt)});$5e63c961fc1ce211$export$8c6ed5c666ac1360.displayName="Slot";const $5e63c961fc1ce211$var$SlotClone=reactExports.forwardRef((_e,_)=>{const{children:tt,...nt}=_e;return reactExports.isValidElement(tt)?reactExports.cloneElement(tt,{...$5e63c961fc1ce211$var$mergeProps(nt,tt.props),ref:_?$6ed0406888f73fc4$export$43e446d32b3d21af(_,tt.ref):tt.ref}):reactExports.Children.count(tt)>1?reactExports.Children.only(null):null});$5e63c961fc1ce211$var$SlotClone.displayName="SlotClone";const $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:_e})=>reactExports.createElement(reactExports.Fragment,null,_e);function $5e63c961fc1ce211$var$isSlottable(_e){return reactExports.isValidElement(_e)&&_e.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}function $5e63c961fc1ce211$var$mergeProps(_e,_){const tt={..._};for(const nt in _){const rt=_e[nt],it=_[nt];/^on[A-Z]/.test(nt)?rt&&it?tt[nt]=(...ot)=>{it(...ot),rt(...ot)}:rt&&(tt[nt]=rt):nt==="style"?tt[nt]={...rt,...it}:nt==="className"&&(tt[nt]=[rt,it].filter(Boolean).join(" "))}return{..._e,...tt}}const $8927f6f2acc4f386$var$NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],$8927f6f2acc4f386$export$250ffa63cdc0d034=$8927f6f2acc4f386$var$NODES.reduce((_e,_)=>{const tt=reactExports.forwardRef((nt,rt)=>{const{asChild:it,...at}=nt,ot=it?$5e63c961fc1ce211$export$8c6ed5c666ac1360:_;return reactExports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),reactExports.createElement(ot,_extends$1({},at,{ref:rt}))});return tt.displayName=`Primitive.${_}`,{..._e,[_]:tt}},{});function $8927f6f2acc4f386$export$6d1a0317bde7de7f(_e,_){_e&&reactDomExports.flushSync(()=>_e.dispatchEvent(_))}const $f1701beae083dbae$export$602eac185826482c=reactExports.forwardRef((_e,_)=>{var tt;const{container:nt=globalThis==null||(tt=globalThis.document)===null||tt===void 0?void 0:tt.body,...rt}=_e;return nt?ReactDOM.createPortal(reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},rt,{ref:_})),nt):null}),$f1701beae083dbae$export$be92b6f5f03c0fe9=$f1701beae083dbae$export$602eac185826482c;var has=Object.prototype.hasOwnProperty;function dequal(_e,_){var tt,nt;if(_e===_)return!0;if(_e&&_&&(tt=_e.constructor)===_.constructor){if(tt===Date)return _e.getTime()===_.getTime();if(tt===RegExp)return _e.toString()===_.toString();if(tt===Array){if((nt=_e.length)===_.length)for(;nt--&&dequal(_e[nt],_[nt]););return nt===-1}if(!tt||typeof _e=="object"){nt=0;for(tt in _e)if(has.call(_e,tt)&&++nt&&!has.call(_,tt)||!(tt in _)||!dequal(_e[tt],_[tt]))return!1;return Object.keys(_).length===nt}}return _e!==_e&&_!==_}var Rule=function _e(_,tt,nt,rt){this.name=_,this.fn=tt,this.args=nt,this.modifiers=rt};Rule.prototype._test=function _e(_){var tt=this.fn;try{testAux(this.modifiers.slice(),tt,this)(_)}catch{tt=function(){return!1}}try{return testAux(this.modifiers.slice(),tt,this)(_)}catch{return!1}};Rule.prototype._check=function _e(_){try{testAux(this.modifiers.slice(),this.fn,this)(_)}catch{if(testAux(this.modifiers.slice(),function(nt){return nt},this)(!1))return}if(!testAux(this.modifiers.slice(),this.fn,this)(_))throw null};Rule.prototype._testAsync=function _e(_){var tt=this;return new Promise(function(nt,rt){testAsyncAux(tt.modifiers.slice(),tt.fn,tt)(_).then(function(it){it?nt(_):rt(null)}).catch(function(it){return rt(it)})})};function pickFn(_e,_){return _===void 0&&(_="simple"),typeof _e=="object"?_e[_]:_e}function testAux(_e,_,tt){if(_e.length){var nt=_e.shift(),rt=testAux(_e,_,tt);return nt.perform(rt,tt)}else return pickFn(_)}function testAsyncAux(_e,_,tt){if(_e.length){var nt=_e.shift(),rt=testAsyncAux(_e,_,tt);return nt.performAsync(rt,tt)}else return function(it){return Promise.resolve(pickFn(_,"async")(it))}}var Modifier=function _e(_,tt,nt){this.name=_,this.perform=tt,this.performAsync=nt},ValidationError=function(_e){function _(tt,nt,rt,it){for(var at=[],ot=arguments.length-4;ot-- >0;)at[ot]=arguments[ot+4];_e.call(this,at),_e.captureStackTrace&&_e.captureStackTrace(this,_),this.rule=tt,this.value=nt,this.cause=rt,this.target=it}return _e&&(_.__proto__=_e),_.prototype=Object.create(_e&&_e.prototype),_.prototype.constructor=_,_}(Error),Context=function _e(_,tt){_===void 0&&(_=[]),tt===void 0&&(tt=[]),this.chain=_,this.nextRuleModifiers=tt};Context.prototype._applyRule=function _e(_,tt){var nt=this;return function(){for(var rt=[],it=arguments.length;it--;)rt[it]=arguments[it];return nt.chain.push(new Rule(tt,_.apply(nt,rt),rt,nt.nextRuleModifiers)),nt.nextRuleModifiers=[],nt}};Context.prototype._applyModifier=function _e(_,tt){return this.nextRuleModifiers.push(new Modifier(tt,_.simple,_.async)),this};Context.prototype._clone=function _e(){return new Context(this.chain.slice(),this.nextRuleModifiers.slice())};Context.prototype.test=function _e(_){return this.chain.every(function(tt){return tt._test(_)})};Context.prototype.testAll=function _e(_){var tt=[];return this.chain.forEach(function(nt){try{nt._check(_)}catch(rt){tt.push(new ValidationError(nt,_,rt))}}),tt};Context.prototype.check=function _e(_){this.chain.forEach(function(tt){try{tt._check(_)}catch(nt){throw new ValidationError(tt,_,nt)}})};Context.prototype.testAsync=function _e(_){var tt=this;return new Promise(function(nt,rt){executeAsyncRules(_,tt.chain.slice(),nt,rt)})};function executeAsyncRules(_e,_,tt,nt){if(_.length){var rt=_.shift();rt._testAsync(_e).then(function(){executeAsyncRules(_e,_,tt,nt)},function(it){nt(new ValidationError(rt,_e,it))})}else tt(_e)}var consideredEmpty=function(_e,_){return _&&typeof _e=="string"&&_e.trim().length===0?!0:_e==null};function optional(_e,_){return _===void 0&&(_=!1),{simple:function(tt){return consideredEmpty(tt,_)||_e.check(tt)===void 0},async:function(tt){return consideredEmpty(tt,_)||_e.testAsync(tt)}}}function v8n(){return typeof Proxy<"u"?proxyContext(new Context):proxylessContext(new Context)}var customRules={};v8n.extend=function(_e){Object.assign(customRules,_e)};v8n.clearCustomRules=function(){customRules={}};function proxyContext(_e){return new Proxy(_e,{get:function(tt,nt){if(nt in tt)return tt[nt];var rt=proxyContext(_e._clone());if(nt in availableModifiers)return rt._applyModifier(availableModifiers[nt],nt);if(nt in customRules)return rt._applyRule(customRules[nt],nt);if(nt in availableRules)return rt._applyRule(availableRules[nt],nt)}})}function proxylessContext(_e){var _=function(rt,it){return Object.keys(rt).forEach(function(at){it[at]=function(){for(var ot=[],st=arguments.length;st--;)ot[st]=arguments[st];var lt=proxylessContext(it._clone()),ct=lt._applyRule(rt[at],at).apply(void 0,ot);return ct}}),it},tt=_(availableRules,_e),nt=_(customRules,tt);return Object.keys(availableModifiers).forEach(function(rt){Object.defineProperty(nt,rt,{get:function(){var it=proxylessContext(nt._clone());return it._applyModifier(availableModifiers[rt],rt)}})}),nt}var availableModifiers={not:{simple:function(_e){return function(_){return!_e(_)}},async:function(_e){return function(_){return Promise.resolve(_e(_)).then(function(tt){return!tt}).catch(function(){return!0})}}},some:{simple:function(_e){return function(_){return split$1(_).some(function(tt){try{return _e(tt)}catch{return!1}})}},async:function(_e){return function(_){return Promise.all(split$1(_).map(function(tt){try{return _e(tt).catch(function(){return!1})}catch{return!1}})).then(function(tt){return tt.some(Boolean)})}}},every:{simple:function(_e){return function(_){return _!==!1&&split$1(_).every(_e)}},async:function(_e){return function(_){return Promise.all(split$1(_).map(_e)).then(function(tt){return tt.every(Boolean)})}}},strict:{simple:function(_e,_){return function(tt){return isSchemaRule(_)&&tt&&typeof tt=="object"?Object.keys(_.args[0]).length===Object.keys(tt).length&&_e(tt):_e(tt)}},async:function(_e,_){return function(tt){return Promise.resolve(_e(tt)).then(function(nt){return isSchemaRule(_)&&tt&&typeof tt=="object"?Object.keys(_.args[0]).length===Object.keys(tt).length&&nt:nt}).catch(function(){return!1})}}}};function isSchemaRule(_e){return _e&&_e.name==="schema"&&_e.args.length>0&&typeof _e.args[0]=="object"}function split$1(_e){return typeof _e=="string"?_e.split(""):_e}var availableRules={equal:function(_e){return function(_){return _==_e}},exact:function(_e){return function(_){return _===_e}},number:function(_e){return _e===void 0&&(_e=!0),function(_){return typeof _=="number"&&(_e||isFinite(_))}},integer:function(){return function(_e){var _=Number.isInteger||isIntegerPolyfill;return _(_e)}},numeric:function(){return function(_e){return!isNaN(parseFloat(_e))&&isFinite(_e)}},string:function(){return testType("string")},boolean:function(){return testType("boolean")},undefined:function(){return testType("undefined")},null:function(){return testType("null")},array:function(){return testType("array")},object:function(){return testType("object")},instanceOf:function(_e){return function(_){return _ instanceof _e}},pattern:function(_e){return function(_){return _e.test(_)}},lowercase:function(){return function(_e){return typeof _e=="boolean"||_e===_e.toLowerCase()&&_e.trim()!==""}},uppercase:function(){return function(_e){return _e===_e.toUpperCase()&&_e.trim()!==""}},vowel:function(){return function(_e){return/^[aeiou]+$/i.test(_e)}},consonant:function(){return function(_e){return/^(?=[^aeiou])([a-z]+)$/i.test(_e)}},first:function(_e){return function(_){return _[0]==_e}},last:function(_e){return function(_){return _[_.length-1]==_e}},empty:function(){return function(_e){return _e.length===0}},length:function(_e,_){return function(tt){return tt.length>=_e&&tt.length<=(_||_e)}},minLength:function(_e){return function(_){return _.length>=_e}},maxLength:function(_e){return function(_){return _.length<=_e}},negative:function(){return function(_e){return _e<0}},positive:function(){return function(_e){return _e>=0}},between:function(_e,_){return function(tt){return tt>=_e&&tt<=_}},range:function(_e,_){return function(tt){return tt>=_e&&tt<=_}},lessThan:function(_e){return function(_){return _<_e}},lessThanOrEqual:function(_e){return function(_){return _<=_e}},greaterThan:function(_e){return function(_){return _>_e}},greaterThanOrEqual:function(_e){return function(_){return _>=_e}},even:function(){return function(_e){return _e%2===0}},odd:function(){return function(_e){return _e%2!==0}},includes:function(_e){return function(_){return~_.indexOf(_e)}},schema:function(_e){return testSchema(_e)},passesAnyOf:function(){for(var _e=[],_=arguments.length;_--;)_e[_]=arguments[_];return function(tt){return _e.some(function(nt){return nt.test(tt)})}},optional};function testType(_e){return function(_){return Array.isArray(_)&&_e==="array"||_===null&&_e==="null"||typeof _===_e}}function isIntegerPolyfill(_e){return typeof _e=="number"&&isFinite(_e)&&Math.floor(_e)===_e}function testSchema(_e){return{simple:function(_){var tt=[];if(Object.keys(_e).forEach(function(nt){var rt=_e[nt];try{rt.check((_||{})[nt])}catch(it){it.target=nt,tt.push(it)}}),tt.length>0)throw tt;return!0},async:function(_){var tt=[],nt=Object.keys(_e).map(function(rt){var it=_e[rt];return it.testAsync((_||{})[rt]).catch(function(at){at.target=rt,tt.push(at)})});return Promise.all(nt).then(function(){if(tt.length>0)throw tt;return!0})}}}var e$1="colors",t$1="sizes",r$1="space",n$1={gap:r$1,gridGap:r$1,columnGap:r$1,gridColumnGap:r$1,rowGap:r$1,gridRowGap:r$1,inset:r$1,insetBlock:r$1,insetBlockEnd:r$1,insetBlockStart:r$1,insetInline:r$1,insetInlineEnd:r$1,insetInlineStart:r$1,margin:r$1,marginTop:r$1,marginRight:r$1,marginBottom:r$1,marginLeft:r$1,marginBlock:r$1,marginBlockEnd:r$1,marginBlockStart:r$1,marginInline:r$1,marginInlineEnd:r$1,marginInlineStart:r$1,padding:r$1,paddingTop:r$1,paddingRight:r$1,paddingBottom:r$1,paddingLeft:r$1,paddingBlock:r$1,paddingBlockEnd:r$1,paddingBlockStart:r$1,paddingInline:r$1,paddingInlineEnd:r$1,paddingInlineStart:r$1,top:r$1,right:r$1,bottom:r$1,left:r$1,scrollMargin:r$1,scrollMarginTop:r$1,scrollMarginRight:r$1,scrollMarginBottom:r$1,scrollMarginLeft:r$1,scrollMarginX:r$1,scrollMarginY:r$1,scrollMarginBlock:r$1,scrollMarginBlockEnd:r$1,scrollMarginBlockStart:r$1,scrollMarginInline:r$1,scrollMarginInlineEnd:r$1,scrollMarginInlineStart:r$1,scrollPadding:r$1,scrollPaddingTop:r$1,scrollPaddingRight:r$1,scrollPaddingBottom:r$1,scrollPaddingLeft:r$1,scrollPaddingX:r$1,scrollPaddingY:r$1,scrollPaddingBlock:r$1,scrollPaddingBlockEnd:r$1,scrollPaddingBlockStart:r$1,scrollPaddingInline:r$1,scrollPaddingInlineEnd:r$1,scrollPaddingInlineStart:r$1,fontSize:"fontSizes",background:e$1,backgroundColor:e$1,backgroundImage:e$1,borderImage:e$1,border:e$1,borderBlock:e$1,borderBlockEnd:e$1,borderBlockStart:e$1,borderBottom:e$1,borderBottomColor:e$1,borderColor:e$1,borderInline:e$1,borderInlineEnd:e$1,borderInlineStart:e$1,borderLeft:e$1,borderLeftColor:e$1,borderRight:e$1,borderRightColor:e$1,borderTop:e$1,borderTopColor:e$1,caretColor:e$1,color:e$1,columnRuleColor:e$1,fill:e$1,outline:e$1,outlineColor:e$1,stroke:e$1,textDecorationColor:e$1,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:t$1,minBlockSize:t$1,maxBlockSize:t$1,inlineSize:t$1,minInlineSize:t$1,maxInlineSize:t$1,width:t$1,minWidth:t$1,maxWidth:t$1,height:t$1,minHeight:t$1,maxHeight:t$1,flexBasis:t$1,gridTemplateColumns:t$1,gridTemplateRows:t$1,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},i$2=(_e,_)=>typeof _=="function"?{"()":Function.prototype.toString.call(_)}:_,o$1=()=>{const _e=Object.create(null);return(_,tt,...nt)=>{const rt=(it=>JSON.stringify(it,i$2))(_);return rt in _e?_e[rt]:_e[rt]=tt(_,...nt)}},l$1=Symbol.for("sxs.internal"),s$2=(_e,_)=>Object.defineProperties(_e,Object.getOwnPropertyDescriptors(_)),a$1=_e=>{for(const _ in _e)return!0;return!1},{hasOwnProperty:c$2}=Object.prototype,d$2=_e=>_e.includes("-")?_e:_e.replace(/[A-Z]/g,_=>"-"+_.toLowerCase()),g$2=/\s+(?![^()]*\))/,p$2=_e=>_=>_e(...typeof _=="string"?String(_).split(g$2):[_]),u$2={appearance:_e=>({WebkitAppearance:_e,appearance:_e}),backfaceVisibility:_e=>({WebkitBackfaceVisibility:_e,backfaceVisibility:_e}),backdropFilter:_e=>({WebkitBackdropFilter:_e,backdropFilter:_e}),backgroundClip:_e=>({WebkitBackgroundClip:_e,backgroundClip:_e}),boxDecorationBreak:_e=>({WebkitBoxDecorationBreak:_e,boxDecorationBreak:_e}),clipPath:_e=>({WebkitClipPath:_e,clipPath:_e}),content:_e=>({content:_e.includes('"')||_e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(_e)?_e:`"${_e}"`}),hyphens:_e=>({WebkitHyphens:_e,hyphens:_e}),maskImage:_e=>({WebkitMaskImage:_e,maskImage:_e}),maskSize:_e=>({WebkitMaskSize:_e,maskSize:_e}),tabSize:_e=>({MozTabSize:_e,tabSize:_e}),textSizeAdjust:_e=>({WebkitTextSizeAdjust:_e,textSizeAdjust:_e}),userSelect:_e=>({WebkitUserSelect:_e,userSelect:_e}),marginBlock:p$2((_e,_)=>({marginBlockStart:_e,marginBlockEnd:_||_e})),marginInline:p$2((_e,_)=>({marginInlineStart:_e,marginInlineEnd:_||_e})),maxSize:p$2((_e,_)=>({maxBlockSize:_e,maxInlineSize:_||_e})),minSize:p$2((_e,_)=>({minBlockSize:_e,minInlineSize:_||_e})),paddingBlock:p$2((_e,_)=>({paddingBlockStart:_e,paddingBlockEnd:_||_e})),paddingInline:p$2((_e,_)=>({paddingInlineStart:_e,paddingInlineEnd:_||_e}))},h$2=/([\d.]+)([^]*)/,f$2=(_e,_)=>_e.length?_e.reduce((tt,nt)=>(tt.push(..._.map(rt=>rt.includes("&")?rt.replace(/&/g,/[ +>|~]/.test(nt)&&/&.*&/.test(rt)?`:is(${nt})`:nt):nt+" "+rt)),tt),[]):_,m$2=(_e,_)=>_e in b$2&&typeof _=="string"?_.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(tt,nt,rt,it)=>nt+(rt==="stretch"?`-moz-available${it};${d$2(_e)}:${nt}-webkit-fill-available`:`-moz-fit-content${it};${d$2(_e)}:${nt}fit-content`)+it):String(_),b$2={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},S$2=_e=>_e?_e+"-":"",k$2=(_e,_,tt)=>_e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(nt,rt,it,at,ot)=>at=="$"==!!it?nt:(rt||at=="--"?"calc(":"")+"var(--"+(at==="$"?S$2(_)+(ot.includes("$")?"":S$2(tt))+ot.replace(/\$/g,"-"):ot)+")"+(rt||at=="--"?"*"+(rt||"")+(it||"1")+")":"")),y$2=/\s*,\s*(?![^()]*\))/,B=Object.prototype.toString,$$2=(_e,_,tt,nt,rt)=>{let it,at,ot;const st=(lt,ct,ut)=>{let ft,pt;const gt=xt=>{for(ft in xt){const At=ft.charCodeAt(0)===64,vt=At&&Array.isArray(xt[ft])?xt[ft]:[xt[ft]];for(pt of vt){const Et=/[A-Z]/.test(mt=ft)?mt:mt.replace(/-[^]/g,Tt=>Tt[1].toUpperCase()),Ct=typeof pt=="object"&&pt&&pt.toString===B&&(!nt.utils[Et]||!ct.length);if(Et in nt.utils&&!Ct){const Tt=nt.utils[Et];if(Tt!==at){at=Tt,gt(Tt(pt)),at=null;continue}}else if(Et in u$2){const Tt=u$2[Et];if(Tt!==ot){ot=Tt,gt(Tt(pt)),ot=null;continue}}if(At&&(yt=ft.slice(1)in nt.media?"@media "+nt.media[ft.slice(1)]:ft,ft=yt.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(Tt,bt,It,wt,Rt,Ft)=>{const Ut=h$2.test(bt),Gt=.0625*(Ut?-1:1),[Ht,jt]=Ut?[wt,bt]:[bt,wt];return"("+(It[0]==="="?"":It[0]===">"===Ut?"max-":"min-")+Ht+":"+(It[0]!=="="&&It.length===1?jt.replace(h$2,(Xt,Jt,Dt)=>Number(Jt)+Gt*(It===">"?1:-1)+Dt):jt)+(Rt?") and ("+(Rt[0]===">"?"min-":"max-")+Ht+":"+(Rt.length===1?Ft.replace(h$2,(Xt,Jt,Dt)=>Number(Jt)+Gt*(Rt===">"?-1:1)+Dt):Ft):"")+")"})),Ct){const Tt=At?ut.concat(ft):[...ut],bt=At?[...ct]:f$2(ct,ft.split(y$2));it!==void 0&&rt(x$1(...it)),it=void 0,st(pt,bt,Tt)}else it===void 0&&(it=[[],ct,ut]),ft=At||ft.charCodeAt(0)!==36?ft:`--${S$2(nt.prefix)}${ft.slice(1).replace(/\$/g,"-")}`,pt=Ct?pt:typeof pt=="number"?pt&&Et in I$2?String(pt)+"px":String(pt):k$2(m$2(Et,pt??""),nt.prefix,nt.themeMap[Et]),it[0].push(`${At?`${ft} `:`${d$2(ft)}:`}${pt}`)}}var yt,mt};gt(lt),it!==void 0&&rt(x$1(...it)),it=void 0};st(_e,_,tt)},x$1=(_e,_,tt)=>`${tt.map(nt=>`${nt}{`).join("")}${_.length?`${_.join(",")}{`:""}${_e.join(";")}${_.length?"}":""}${Array(tt.length?tt.length+1:0).join("}")}`,I$2={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},R=_e=>String.fromCharCode(_e+(_e>25?39:97)),z=_e=>(_=>{let tt,nt="";for(tt=Math.abs(_);tt>52;tt=tt/52|0)nt=R(tt%52)+nt;return R(tt%52)+nt})(((_,tt)=>{let nt=tt.length;for(;nt;)_=33*_^tt.charCodeAt(--nt);return _})(5381,JSON.stringify(_e))>>>0),W=["themed","global","styled","onevar","resonevar","allvar","inline"],j$1=_e=>{if(_e.href&&!_e.href.startsWith(location.origin))return!1;try{return!!_e.cssRules}catch{return!1}},E=_e=>{let _;const tt=()=>{const{cssRules:rt}=_.sheet;return[].map.call(rt,(it,at)=>{const{cssText:ot}=it;let st="";if(ot.startsWith("--sxs"))return"";if(rt[at-1]&&(st=rt[at-1].cssText).startsWith("--sxs")){if(!it.cssRules.length)return"";for(const lt in _.rules)if(_.rules[lt].group===it)return`--sxs{--sxs:${[..._.rules[lt].cache].join(" ")}}${ot}`;return it.cssRules.length?`${st}${ot}`:""}return ot}).join("")},nt=()=>{if(_){const{rules:ot,sheet:st}=_;if(!st.deleteRule){for(;Object(Object(st.cssRules)[0]).type===3;)st.cssRules.splice(0,1);st.cssRules=[]}for(const lt in ot)delete ot[lt]}const rt=Object(_e).styleSheets||[];for(const ot of rt)if(j$1(ot)){for(let st=0,lt=ot.cssRules;lt[st];++st){const ct=Object(lt[st]);if(ct.type!==1)continue;const ut=Object(lt[st+1]);if(ut.type!==4)continue;++st;const{cssText:ft}=ct;if(!ft.startsWith("--sxs"))continue;const pt=ft.slice(14,-3).trim().split(/\s+/),gt=W[pt[0]];gt&&(_||(_={sheet:ot,reset:nt,rules:{},toString:tt}),_.rules[gt]={group:ut,index:st,cache:new Set(pt)})}if(_)break}if(!_){const ot=(st,lt)=>({type:lt,cssRules:[],insertRule(ct,ut){this.cssRules.splice(ut,0,ot(ct,{import:3,undefined:1}[(ct.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return st==="@media{}"?`@media{${[].map.call(this.cssRules,ct=>ct.cssText).join("")}}`:st}});_={sheet:_e?(_e.head||_e).appendChild(document.createElement("style")).sheet:ot("","text/css"),rules:{},reset:nt,toString:tt}}const{sheet:it,rules:at}=_;for(let ot=W.length-1;ot>=0;--ot){const st=W[ot];if(!at[st]){const lt=W[ot+1],ct=at[lt]?at[lt].index:it.cssRules.length;it.insertRule("@media{}",ct),it.insertRule(`--sxs{--sxs:${ot}}`,ct),at[st]={group:it.cssRules[ct+1],index:ct,cache:new Set([ot])}}v$2(at[st])}};return nt(),_},v$2=_e=>{const _=_e.group;let tt=_.cssRules.length;_e.apply=nt=>{try{_.insertRule(nt,tt),++tt}catch{}}},T$1=Symbol(),w$1=o$1(),M$1=(_e,_)=>w$1(_e,()=>(...tt)=>{let nt={type:null,composers:new Set};for(const rt of tt)if(rt!=null)if(rt[l$1]){nt.type==null&&(nt.type=rt[l$1].type);for(const it of rt[l$1].composers)nt.composers.add(it)}else rt.constructor!==Object||rt.$$typeof?nt.type==null&&(nt.type=rt):nt.composers.add(C(rt,_e));return nt.type==null&&(nt.type="span"),nt.composers.size||nt.composers.add(["PJLV",{},[],[],{},[]]),P(_e,nt,_)}),C=({variants:_e,compoundVariants:_,defaultVariants:tt,...nt},rt)=>{const it=`${S$2(rt.prefix)}c-${z(nt)}`,at=[],ot=[],st=Object.create(null),lt=[];for(const ft in tt)st[ft]=String(tt[ft]);if(typeof _e=="object"&&_e)for(const ft in _e){ct=st,ut=ft,c$2.call(ct,ut)||(st[ft]="undefined");const pt=_e[ft];for(const gt in pt){const xt={[ft]:String(gt)};String(gt)==="undefined"&&lt.push(ft);const yt=pt[gt],mt=[xt,yt,!a$1(yt)];at.push(mt)}}var ct,ut;if(typeof _=="object"&&_)for(const ft of _){let{css:pt,...gt}=ft;pt=typeof pt=="object"&&pt||{};for(const yt in gt)gt[yt]=String(gt[yt]);const xt=[gt,pt,!a$1(pt)];ot.push(xt)}return[it,nt,at,ot,st,lt]},P=(_e,_,tt)=>{const[nt,rt,it,at]=L$1(_.composers),ot=typeof _.type=="function"||_.type.$$typeof?(ut=>{function ft(){for(let pt=0;pt<ft[T$1].length;pt++){const[gt,xt]=ft[T$1][pt];ut.rules[gt].apply(xt)}return ft[T$1]=[],null}return ft[T$1]=[],ft.rules={},W.forEach(pt=>ft.rules[pt]={apply:gt=>ft[T$1].push([pt,gt])}),ft})(tt):null,st=(ot||tt).rules,lt=`.${nt}${rt.length>1?`:where(.${rt.slice(1).join(".")})`:""}`,ct=ut=>{ut=typeof ut=="object"&&ut||A;const{css:ft,...pt}=ut,gt={};for(const mt in it)if(delete pt[mt],mt in ut){let At=ut[mt];typeof At=="object"&&At?gt[mt]={"@initial":it[mt],...At}:(At=String(At),gt[mt]=At!=="undefined"||at.has(mt)?At:it[mt])}else gt[mt]=it[mt];const xt=new Set([...rt]);for(const[mt,At,vt,Et]of _.composers){tt.rules.styled.cache.has(mt)||(tt.rules.styled.cache.add(mt),$$2(At,[`.${mt}`],[],_e,bt=>{st.styled.apply(bt)}));const Ct=O(vt,gt,_e.media),Tt=O(Et,gt,_e.media,!0);for(const bt of Ct)if(bt!==void 0)for(const[It,wt,Rt]of bt){const Ft=`${mt}-${z(wt)}-${It}`;xt.add(Ft);const Ut=(Rt?tt.rules.resonevar:tt.rules.onevar).cache,Gt=Rt?st.resonevar:st.onevar;Ut.has(Ft)||(Ut.add(Ft),$$2(wt,[`.${Ft}`],[],_e,Ht=>{Gt.apply(Ht)}))}for(const bt of Tt)if(bt!==void 0)for(const[It,wt]of bt){const Rt=`${mt}-${z(wt)}-${It}`;xt.add(Rt),tt.rules.allvar.cache.has(Rt)||(tt.rules.allvar.cache.add(Rt),$$2(wt,[`.${Rt}`],[],_e,Ft=>{st.allvar.apply(Ft)}))}}if(typeof ft=="object"&&ft){const mt=`${nt}-i${z(ft)}-css`;xt.add(mt),tt.rules.inline.cache.has(mt)||(tt.rules.inline.cache.add(mt),$$2(ft,[`.${mt}`],[],_e,At=>{st.inline.apply(At)}))}for(const mt of String(ut.className||"").trim().split(/\s+/))mt&&xt.add(mt);const yt=pt.className=[...xt].join(" ");return{type:_.type,className:yt,selector:lt,props:pt,toString:()=>yt,deferredInjector:ot}};return s$2(ct,{className:nt,selector:lt,[l$1]:_,toString:()=>(tt.rules.styled.cache.has(nt)||ct(),nt)})},L$1=_e=>{let _="";const tt=[],nt={},rt=[];for(const[it,,,,at,ot]of _e){_===""&&(_=it),tt.push(it),rt.push(...ot);for(const st in at){const lt=at[st];(nt[st]===void 0||lt!=="undefined"||ot.includes(lt))&&(nt[st]=lt)}}return[_,tt,nt,new Set(rt)]},O=(_e,_,tt,nt)=>{const rt=[];e:for(let[it,at,ot]of _e){if(ot)continue;let st,lt=0,ct=!1;for(st in it){const ut=it[st];let ft=_[st];if(ft!==ut){if(typeof ft!="object"||!ft)continue e;{let pt,gt,xt=0;for(const yt in ft){if(ut===String(ft[yt])){if(yt!=="@initial"){const mt=yt.slice(1);(gt=gt||[]).push(mt in tt?tt[mt]:yt.replace(/^@media ?/,"")),ct=!0}lt+=xt,pt=!0}++xt}if(gt&&gt.length&&(at={["@media "+gt.join(", ")]:at}),!pt)continue e}}}(rt[lt]=rt[lt]||[]).push([nt?"cv":`${st}-${it[st]}`,at,ct])}return rt},A={},N$1=o$1(),D=(_e,_)=>N$1(_e,()=>(...tt)=>{const nt=()=>{for(let rt of tt){rt=typeof rt=="object"&&rt||{};let it=z(rt);if(!_.rules.global.cache.has(it)){if(_.rules.global.cache.add(it),"@import"in rt){let at=[].indexOf.call(_.sheet.cssRules,_.rules.themed.group)-1;for(let ot of[].concat(rt["@import"]))ot=ot.includes('"')||ot.includes("'")?ot:`"${ot}"`,_.sheet.insertRule(`@import ${ot};`,at++);delete rt["@import"]}$$2(rt,[],[],_e,at=>{_.rules.global.apply(at)})}}return""};return s$2(nt,{toString:nt})}),H$1=o$1(),V$1=(_e,_)=>H$1(_e,()=>tt=>{const nt=`${S$2(_e.prefix)}k-${z(tt)}`,rt=()=>{if(!_.rules.global.cache.has(nt)){_.rules.global.cache.add(nt);const it=[];$$2(tt,[],[],_e,ot=>it.push(ot));const at=`@keyframes ${nt}{${it.join("")}}`;_.rules.global.apply(at)}return nt};return s$2(rt,{get name(){return rt()},toString:rt})}),G=class{constructor(_e,_,tt,nt){this.token=_e==null?"":String(_e),this.value=_==null?"":String(_),this.scale=tt==null?"":String(tt),this.prefix=nt==null?"":String(nt)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+S$2(this.prefix)+S$2(this.scale)+this.token}toString(){return this.computedValue}},F$1=o$1(),J$1=(_e,_)=>F$1(_e,()=>(tt,nt)=>{nt=typeof tt=="object"&&tt||Object(nt);const rt=`.${tt=(tt=typeof tt=="string"?tt:"")||`${S$2(_e.prefix)}t-${z(nt)}`}`,it={},at=[];for(const st in nt){it[st]={};for(const lt in nt[st]){const ct=`--${S$2(_e.prefix)}${st}-${lt}`,ut=k$2(String(nt[st][lt]),_e.prefix,st);it[st][lt]=new G(lt,ut,st,_e.prefix),at.push(`${ct}:${ut}`)}}const ot=()=>{if(at.length&&!_.rules.themed.cache.has(tt)){_.rules.themed.cache.add(tt);const st=`${nt===_e.theme?":root,":""}.${tt}{${at.join(";")}}`;_.rules.themed.apply(st)}return tt};return{...it,get className(){return ot()},selector:rt,toString:ot}}),U$1=o$1(),Y$1=o$1(),q$1=_e=>{const _=(tt=>{let nt=!1;const rt=U$1(tt,it=>{nt=!0;const at="prefix"in(it=typeof it=="object"&&it||{})?String(it.prefix):"",ot=typeof it.media=="object"&&it.media||{},st=typeof it.root=="object"?it.root||null:globalThis.document||null,lt=typeof it.theme=="object"&&it.theme||{},ct={prefix:at,media:ot,theme:lt,themeMap:typeof it.themeMap=="object"&&it.themeMap||{...n$1},utils:typeof it.utils=="object"&&it.utils||{}},ut=E(st),ft={css:M$1(ct,ut),globalCss:D(ct,ut),keyframes:V$1(ct,ut),createTheme:J$1(ct,ut),reset(){ut.reset(),ft.theme.toString()},theme:{},sheet:ut,config:ct,prefix:at,getCssText:ut.toString,toString:ut.toString};return String(ft.theme=ft.createTheme(lt)),ft});return nt||rt.reset(),rt})(_e);return _.styled=(({config:tt,sheet:nt})=>Y$1(tt,()=>{const rt=M$1(tt,nt);return(...it)=>{const at=rt(...it),ot=at[l$1].type,st=React.forwardRef((lt,ct)=>{const ut=lt&&lt.as||ot,{props:ft,deferredInjector:pt}=at(lt);return delete ft.as,ft.ref=ct,pt?React.createElement(React.Fragment,null,React.createElement(ut,ft),React.createElement(pt,null)):React.createElement(ut,ft)});return st.className=at.className,st.displayName=`Styled.${ot.displayName||ot.name||ot}`,st.selector=at.selector,st.toString=()=>at.selector,st[l$1]=at[l$1],st}}))(_),_};function $e42e1063c40fb3ef$export$b9ecd428b558ff10(_e,_,{checkForDefaultPrevented:tt=!0}={}){return function(rt){if(_e==null||_e(rt),tt===!1||!rt.defaultPrevented)return _==null?void 0:_(rt)}}function $c512c27ab02ef895$export$50c7b4e9d9f19c1(_e,_=[]){let tt=[];function nt(it,at){const ot=reactExports.createContext(at),st=tt.length;tt=[...tt,at];function lt(ut){const{scope:ft,children:pt,...gt}=ut,xt=(ft==null?void 0:ft[_e][st])||ot,yt=reactExports.useMemo(()=>gt,Object.values(gt));return reactExports.createElement(xt.Provider,{value:yt},pt)}function ct(ut,ft){const pt=(ft==null?void 0:ft[_e][st])||ot,gt=reactExports.useContext(pt);if(gt)return gt;if(at!==void 0)return at;throw new Error(`\`${ut}\` must be used within \`${it}\``)}return lt.displayName=it+"Provider",[lt,ct]}const rt=()=>{const it=tt.map(at=>reactExports.createContext(at));return function(ot){const st=(ot==null?void 0:ot[_e])||it;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...ot,[_e]:st}}),[ot,st])}};return rt.scopeName=_e,[nt,$c512c27ab02ef895$var$composeContextScopes(rt,..._)]}function $c512c27ab02ef895$var$composeContextScopes(..._e){const _=_e[0];if(_e.length===1)return _;const tt=()=>{const nt=_e.map(rt=>({useScope:rt(),scopeName:rt.scopeName}));return function(it){const at=nt.reduce((ot,{useScope:st,scopeName:lt})=>{const ut=st(it)[`__scope${lt}`];return{...ot,...ut}},{});return reactExports.useMemo(()=>({[`__scope${_.scopeName}`]:at}),[at])}};return tt.scopeName=_.scopeName,tt}function $b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_e){const _=reactExports.useRef(_e);return reactExports.useEffect(()=>{_.current=_e}),reactExports.useMemo(()=>(...tt)=>{var nt;return(nt=_.current)===null||nt===void 0?void 0:nt.call(_,...tt)},[])}function $addc16e1bbe58fd0$export$3a72a57244d6e765(_e,_=globalThis==null?void 0:globalThis.document){const tt=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_e);reactExports.useEffect(()=>{const nt=rt=>{rt.key==="Escape"&&tt(rt)};return _.addEventListener("keydown",nt),()=>_.removeEventListener("keydown",nt)},[tt,_])}const $5cb92bef7577960e$var$CONTEXT_UPDATE="dismissableLayer.update",$5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",$5cb92bef7577960e$var$FOCUS_OUTSIDE="dismissableLayer.focusOutside";let $5cb92bef7577960e$var$originalBodyPointerEvents;const $5cb92bef7577960e$var$DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$5cb92bef7577960e$export$177fb62ff3ec1f22=reactExports.forwardRef((_e,_)=>{var tt;const{disableOutsidePointerEvents:nt=!1,onEscapeKeyDown:rt,onPointerDownOutside:it,onFocusOutside:at,onInteractOutside:ot,onDismiss:st,...lt}=_e,ct=reactExports.useContext($5cb92bef7577960e$var$DismissableLayerContext),[ut,ft]=reactExports.useState(null),pt=(tt=ut==null?void 0:ut.ownerDocument)!==null&&tt!==void 0?tt:globalThis==null?void 0:globalThis.document,[,gt]=reactExports.useState({}),xt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,It=>ft(It)),yt=Array.from(ct.layers),[mt]=[...ct.layersWithOutsidePointerEventsDisabled].slice(-1),At=yt.indexOf(mt),vt=ut?yt.indexOf(ut):-1,Et=ct.layersWithOutsidePointerEventsDisabled.size>0,Ct=vt>=At,Tt=$5cb92bef7577960e$var$usePointerDownOutside(It=>{const wt=It.target,Rt=[...ct.branches].some(Ft=>Ft.contains(wt));!Ct||Rt||(it==null||it(It),ot==null||ot(It),It.defaultPrevented||st==null||st())},pt),bt=$5cb92bef7577960e$var$useFocusOutside(It=>{const wt=It.target;[...ct.branches].some(Ft=>Ft.contains(wt))||(at==null||at(It),ot==null||ot(It),It.defaultPrevented||st==null||st())},pt);return $addc16e1bbe58fd0$export$3a72a57244d6e765(It=>{vt===ct.layers.size-1&&(rt==null||rt(It),!It.defaultPrevented&&st&&(It.preventDefault(),st()))},pt),reactExports.useEffect(()=>{if(ut)return nt&&(ct.layersWithOutsidePointerEventsDisabled.size===0&&($5cb92bef7577960e$var$originalBodyPointerEvents=pt.body.style.pointerEvents,pt.body.style.pointerEvents="none"),ct.layersWithOutsidePointerEventsDisabled.add(ut)),ct.layers.add(ut),$5cb92bef7577960e$var$dispatchUpdate(),()=>{nt&&ct.layersWithOutsidePointerEventsDisabled.size===1&&(pt.body.style.pointerEvents=$5cb92bef7577960e$var$originalBodyPointerEvents)}},[ut,pt,nt,ct]),reactExports.useEffect(()=>()=>{ut&&(ct.layers.delete(ut),ct.layersWithOutsidePointerEventsDisabled.delete(ut),$5cb92bef7577960e$var$dispatchUpdate())},[ut,ct]),reactExports.useEffect(()=>{const It=()=>gt({});return document.addEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,It),()=>document.removeEventListener($5cb92bef7577960e$var$CONTEXT_UPDATE,It)},[]),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},lt,{ref:xt,style:{pointerEvents:Et?Ct?"auto":"none":void 0,..._e.style},onFocusCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onFocusCapture,bt.onFocusCapture),onBlurCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onBlurCapture,bt.onBlurCapture),onPointerDownCapture:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onPointerDownCapture,Tt.onPointerDownCapture)}))});function $5cb92bef7577960e$var$usePointerDownOutside(_e,_=globalThis==null?void 0:globalThis.document){const tt=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_e),nt=reactExports.useRef(!1),rt=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const it=ot=>{if(ot.target&&!nt.current){let ct=function(){$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$POINTER_DOWN_OUTSIDE,tt,lt,{discrete:!0})};var st=ct;const lt={originalEvent:ot};ot.pointerType==="touch"?(_.removeEventListener("click",rt.current),rt.current=ct,_.addEventListener("click",rt.current,{once:!0})):ct()}nt.current=!1},at=window.setTimeout(()=>{_.addEventListener("pointerdown",it)},0);return()=>{window.clearTimeout(at),_.removeEventListener("pointerdown",it),_.removeEventListener("click",rt.current)}},[_,tt]),{onPointerDownCapture:()=>nt.current=!0}}function $5cb92bef7577960e$var$useFocusOutside(_e,_=globalThis==null?void 0:globalThis.document){const tt=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_e),nt=reactExports.useRef(!1);return reactExports.useEffect(()=>{const rt=it=>{it.target&&!nt.current&&$5cb92bef7577960e$var$handleAndDispatchCustomEvent($5cb92bef7577960e$var$FOCUS_OUTSIDE,tt,{originalEvent:it},{discrete:!1})};return _.addEventListener("focusin",rt),()=>_.removeEventListener("focusin",rt)},[_,tt]),{onFocusCapture:()=>nt.current=!0,onBlurCapture:()=>nt.current=!1}}function $5cb92bef7577960e$var$dispatchUpdate(){const _e=new CustomEvent($5cb92bef7577960e$var$CONTEXT_UPDATE);document.dispatchEvent(_e)}function $5cb92bef7577960e$var$handleAndDispatchCustomEvent(_e,_,tt,{discrete:nt}){const rt=tt.originalEvent.target,it=new CustomEvent(_e,{bubbles:!1,cancelable:!0,detail:tt});_&&rt.addEventListener(_e,_,{once:!0}),nt?$8927f6f2acc4f386$export$6d1a0317bde7de7f(rt,it):rt.dispatchEvent(it)}const $9f79659886946c16$export$e5c5a5f917a5871c=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},$1746a345f3d73bb7$var$useReactId=$2AODx$react["useId".toString()]||(()=>{});let $1746a345f3d73bb7$var$count=0;function $1746a345f3d73bb7$export$f680877a34711e37(_e){const[_,tt]=reactExports.useState($1746a345f3d73bb7$var$useReactId());return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{_e||tt(nt=>nt??String($1746a345f3d73bb7$var$count++))},[_e]),_e||(_?`radix-${_}`:"")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=_e=>({x:_e,y:_e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(_e,_,tt){return max(_e,min(_,tt))}function evaluate$1(_e,_){return typeof _e=="function"?_e(_):_e}function getSide(_e){return _e.split("-")[0]}function getAlignment(_e){return _e.split("-")[1]}function getOppositeAxis(_e){return _e==="x"?"y":"x"}function getAxisLength(_e){return _e==="y"?"height":"width"}function getSideAxis(_e){return["top","bottom"].includes(getSide(_e))?"y":"x"}function getAlignmentAxis(_e){return getOppositeAxis(getSideAxis(_e))}function getAlignmentSides(_e,_,tt){tt===void 0&&(tt=!1);const nt=getAlignment(_e),rt=getAlignmentAxis(_e),it=getAxisLength(rt);let at=rt==="x"?nt===(tt?"end":"start")?"right":"left":nt==="start"?"bottom":"top";return _.reference[it]>_.floating[it]&&(at=getOppositePlacement(at)),[at,getOppositePlacement(at)]}function getExpandedPlacements(_e){const _=getOppositePlacement(_e);return[getOppositeAlignmentPlacement(_e),_,getOppositeAlignmentPlacement(_)]}function getOppositeAlignmentPlacement(_e){return _e.replace(/start|end/g,_=>oppositeAlignmentMap[_])}function getSideList(_e,_,tt){const nt=["left","right"],rt=["right","left"],it=["top","bottom"],at=["bottom","top"];switch(_e){case"top":case"bottom":return tt?_?rt:nt:_?nt:rt;case"left":case"right":return _?it:at;default:return[]}}function getOppositeAxisPlacements(_e,_,tt,nt){const rt=getAlignment(_e);let it=getSideList(getSide(_e),tt==="start",nt);return rt&&(it=it.map(at=>at+"-"+rt),_&&(it=it.concat(it.map(getOppositeAlignmentPlacement)))),it}function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,_=>oppositeSideMap[_])}function expandPaddingObject(_e){return{top:0,right:0,bottom:0,left:0,..._e}}function getPaddingObject(_e){return typeof _e!="number"?expandPaddingObject(_e):{top:_e,right:_e,bottom:_e,left:_e}}function rectToClientRect(_e){return{..._e,top:_e.y,left:_e.x,right:_e.x+_e.width,bottom:_e.y+_e.height}}function computeCoordsFromPlacement(_e,_,tt){let{reference:nt,floating:rt}=_e;const it=getSideAxis(_),at=getAlignmentAxis(_),ot=getAxisLength(at),st=getSide(_),lt=it==="y",ct=nt.x+nt.width/2-rt.width/2,ut=nt.y+nt.height/2-rt.height/2,ft=nt[ot]/2-rt[ot]/2;let pt;switch(st){case"top":pt={x:ct,y:nt.y-rt.height};break;case"bottom":pt={x:ct,y:nt.y+nt.height};break;case"right":pt={x:nt.x+nt.width,y:ut};break;case"left":pt={x:nt.x-rt.width,y:ut};break;default:pt={x:nt.x,y:nt.y}}switch(getAlignment(_)){case"start":pt[at]-=ft*(tt&&lt?-1:1);break;case"end":pt[at]+=ft*(tt&&lt?-1:1);break}return pt}const computePosition$1=async(_e,_,tt)=>{const{placement:nt="bottom",strategy:rt="absolute",middleware:it=[],platform:at}=tt,ot=it.filter(Boolean),st=await(at.isRTL==null?void 0:at.isRTL(_));let lt=await at.getElementRects({reference:_e,floating:_,strategy:rt}),{x:ct,y:ut}=computeCoordsFromPlacement(lt,nt,st),ft=nt,pt={},gt=0;for(let xt=0;xt<ot.length;xt++){const{name:yt,fn:mt}=ot[xt],{x:At,y:vt,data:Et,reset:Ct}=await mt({x:ct,y:ut,initialPlacement:nt,placement:ft,strategy:rt,middlewareData:pt,rects:lt,platform:at,elements:{reference:_e,floating:_}});if(ct=At??ct,ut=vt??ut,pt={...pt,[yt]:{...pt[yt],...Et}},Ct&&gt<=50){gt++,typeof Ct=="object"&&(Ct.placement&&(ft=Ct.placement),Ct.rects&&(lt=Ct.rects===!0?await at.getElementRects({reference:_e,floating:_,strategy:rt}):Ct.rects),{x:ct,y:ut}=computeCoordsFromPlacement(lt,ft,st)),xt=-1;continue}}return{x:ct,y:ut,placement:ft,strategy:rt,middlewareData:pt}};async function detectOverflow(_e,_){var tt;_===void 0&&(_={});const{x:nt,y:rt,platform:it,rects:at,elements:ot,strategy:st}=_e,{boundary:lt="clippingAncestors",rootBoundary:ct="viewport",elementContext:ut="floating",altBoundary:ft=!1,padding:pt=0}=evaluate$1(_,_e),gt=getPaddingObject(pt),yt=ot[ft?ut==="floating"?"reference":"floating":ut],mt=rectToClientRect(await it.getClippingRect({element:(tt=await(it.isElement==null?void 0:it.isElement(yt)))==null||tt?yt:yt.contextElement||await(it.getDocumentElement==null?void 0:it.getDocumentElement(ot.floating)),boundary:lt,rootBoundary:ct,strategy:st})),At=ut==="floating"?{...at.floating,x:nt,y:rt}:at.reference,vt=await(it.getOffsetParent==null?void 0:it.getOffsetParent(ot.floating)),Et=await(it.isElement==null?void 0:it.isElement(vt))?await(it.getScale==null?void 0:it.getScale(vt))||{x:1,y:1}:{x:1,y:1},Ct=rectToClientRect(it.convertOffsetParentRelativeRectToViewportRelativeRect?await it.convertOffsetParentRelativeRectToViewportRelativeRect({rect:At,offsetParent:vt,strategy:st}):At);return{top:(mt.top-Ct.top+gt.top)/Et.y,bottom:(Ct.bottom-mt.bottom+gt.bottom)/Et.y,left:(mt.left-Ct.left+gt.left)/Et.x,right:(Ct.right-mt.right+gt.right)/Et.x}}const arrow$1=_e=>({name:"arrow",options:_e,async fn(_){const{x:tt,y:nt,placement:rt,rects:it,platform:at,elements:ot,middlewareData:st}=_,{element:lt,padding:ct=0}=evaluate$1(_e,_)||{};if(lt==null)return{};const ut=getPaddingObject(ct),ft={x:tt,y:nt},pt=getAlignmentAxis(rt),gt=getAxisLength(pt),xt=await at.getDimensions(lt),yt=pt==="y",mt=yt?"top":"left",At=yt?"bottom":"right",vt=yt?"clientHeight":"clientWidth",Et=it.reference[gt]+it.reference[pt]-ft[pt]-it.floating[gt],Ct=ft[pt]-it.reference[pt],Tt=await(at.getOffsetParent==null?void 0:at.getOffsetParent(lt));let bt=Tt?Tt[vt]:0;(!bt||!await(at.isElement==null?void 0:at.isElement(Tt)))&&(bt=ot.floating[vt]||it.floating[gt]);const It=Et/2-Ct/2,wt=bt/2-xt[gt]/2-1,Rt=min(ut[mt],wt),Ft=min(ut[At],wt),Ut=Rt,Gt=bt-xt[gt]-Ft,Ht=bt/2-xt[gt]/2+It,jt=clamp$1(Ut,Ht,Gt),Xt=!st.arrow&&getAlignment(rt)!=null&&Ht!=jt&&it.reference[gt]/2-(Ht<Ut?Rt:Ft)-xt[gt]/2<0,Jt=Xt?Ht<Ut?Ht-Ut:Ht-Gt:0;return{[pt]:ft[pt]+Jt,data:{[pt]:jt,centerOffset:Ht-jt-Jt,...Xt&&{alignmentOffset:Jt}},reset:Xt}}}),flip=function(_e){return _e===void 0&&(_e={}),{name:"flip",options:_e,async fn(_){var tt,nt;const{placement:rt,middlewareData:it,rects:at,initialPlacement:ot,platform:st,elements:lt}=_,{mainAxis:ct=!0,crossAxis:ut=!0,fallbackPlacements:ft,fallbackStrategy:pt="bestFit",fallbackAxisSideDirection:gt="none",flipAlignment:xt=!0,...yt}=evaluate$1(_e,_);if((tt=it.arrow)!=null&&tt.alignmentOffset)return{};const mt=getSide(rt),At=getSide(ot)===ot,vt=await(st.isRTL==null?void 0:st.isRTL(lt.floating)),Et=ft||(At||!xt?[getOppositePlacement(ot)]:getExpandedPlacements(ot));!ft&&gt!=="none"&&Et.push(...getOppositeAxisPlacements(ot,xt,gt,vt));const Ct=[ot,...Et],Tt=await detectOverflow(_,yt),bt=[];let It=((nt=it.flip)==null?void 0:nt.overflows)||[];if(ct&&bt.push(Tt[mt]),ut){const Ut=getAlignmentSides(rt,at,vt);bt.push(Tt[Ut[0]],Tt[Ut[1]])}if(It=[...It,{placement:rt,overflows:bt}],!bt.every(Ut=>Ut<=0)){var wt,Rt;const Ut=(((wt=it.flip)==null?void 0:wt.index)||0)+1,Gt=Ct[Ut];if(Gt)return{data:{index:Ut,overflows:It},reset:{placement:Gt}};let Ht=(Rt=It.filter(jt=>jt.overflows[0]<=0).sort((jt,Xt)=>jt.overflows[1]-Xt.overflows[1])[0])==null?void 0:Rt.placement;if(!Ht)switch(pt){case"bestFit":{var Ft;const jt=(Ft=It.map(Xt=>[Xt.placement,Xt.overflows.filter(Jt=>Jt>0).reduce((Jt,Dt)=>Jt+Dt,0)]).sort((Xt,Jt)=>Xt[1]-Jt[1])[0])==null?void 0:Ft[0];jt&&(Ht=jt);break}case"initialPlacement":Ht=ot;break}if(rt!==Ht)return{reset:{placement:Ht}}}return{}}}};function getSideOffsets(_e,_){return{top:_e.top-_.height,right:_e.right-_.width,bottom:_e.bottom-_.height,left:_e.left-_.width}}function isAnySideFullyClipped(_e){return sides.some(_=>_e[_]>=0)}const hide=function(_e){return _e===void 0&&(_e={}),{name:"hide",options:_e,async fn(_){const{rects:tt}=_,{strategy:nt="referenceHidden",...rt}=evaluate$1(_e,_);switch(nt){case"referenceHidden":{const it=await detectOverflow(_,{...rt,elementContext:"reference"}),at=getSideOffsets(it,tt.reference);return{data:{referenceHiddenOffsets:at,referenceHidden:isAnySideFullyClipped(at)}}}case"escaped":{const it=await detectOverflow(_,{...rt,altBoundary:!0}),at=getSideOffsets(it,tt.floating);return{data:{escapedOffsets:at,escaped:isAnySideFullyClipped(at)}}}default:return{}}}}};async function convertValueToCoords(_e,_){const{placement:tt,platform:nt,elements:rt}=_e,it=await(nt.isRTL==null?void 0:nt.isRTL(rt.floating)),at=getSide(tt),ot=getAlignment(tt),st=getSideAxis(tt)==="y",lt=["left","top"].includes(at)?-1:1,ct=it&&st?-1:1,ut=evaluate$1(_,_e);let{mainAxis:ft,crossAxis:pt,alignmentAxis:gt}=typeof ut=="number"?{mainAxis:ut,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...ut};return ot&&typeof gt=="number"&&(pt=ot==="end"?gt*-1:gt),st?{x:pt*ct,y:ft*lt}:{x:ft*lt,y:pt*ct}}const offset=function(_e){return _e===void 0&&(_e=0),{name:"offset",options:_e,async fn(_){const{x:tt,y:nt}=_,rt=await convertValueToCoords(_,_e);return{x:tt+rt.x,y:nt+rt.y,data:rt}}}},shift=function(_e){return _e===void 0&&(_e={}),{name:"shift",options:_e,async fn(_){const{x:tt,y:nt,placement:rt}=_,{mainAxis:it=!0,crossAxis:at=!1,limiter:ot={fn:yt=>{let{x:mt,y:At}=yt;return{x:mt,y:At}}},...st}=evaluate$1(_e,_),lt={x:tt,y:nt},ct=await detectOverflow(_,st),ut=getSideAxis(getSide(rt)),ft=getOppositeAxis(ut);let pt=lt[ft],gt=lt[ut];if(it){const yt=ft==="y"?"top":"left",mt=ft==="y"?"bottom":"right",At=pt+ct[yt],vt=pt-ct[mt];pt=clamp$1(At,pt,vt)}if(at){const yt=ut==="y"?"top":"left",mt=ut==="y"?"bottom":"right",At=gt+ct[yt],vt=gt-ct[mt];gt=clamp$1(At,gt,vt)}const xt=ot.fn({..._,[ft]:pt,[ut]:gt});return{...xt,data:{x:xt.x-tt,y:xt.y-nt}}}}},limitShift=function(_e){return _e===void 0&&(_e={}),{options:_e,fn(_){const{x:tt,y:nt,placement:rt,rects:it,middlewareData:at}=_,{offset:ot=0,mainAxis:st=!0,crossAxis:lt=!0}=evaluate$1(_e,_),ct={x:tt,y:nt},ut=getSideAxis(rt),ft=getOppositeAxis(ut);let pt=ct[ft],gt=ct[ut];const xt=evaluate$1(ot,_),yt=typeof xt=="number"?{mainAxis:xt,crossAxis:0}:{mainAxis:0,crossAxis:0,...xt};if(st){const vt=ft==="y"?"height":"width",Et=it.reference[ft]-it.floating[vt]+yt.mainAxis,Ct=it.reference[ft]+it.reference[vt]-yt.mainAxis;pt<Et?pt=Et:pt>Ct&&(pt=Ct)}if(lt){var mt,At;const vt=ft==="y"?"width":"height",Et=["top","left"].includes(getSide(rt)),Ct=it.reference[ut]-it.floating[vt]+(Et&&((mt=at.offset)==null?void 0:mt[ut])||0)+(Et?0:yt.crossAxis),Tt=it.reference[ut]+it.reference[vt]+(Et?0:((At=at.offset)==null?void 0:At[ut])||0)-(Et?yt.crossAxis:0);gt<Ct?gt=Ct:gt>Tt&&(gt=Tt)}return{[ft]:pt,[ut]:gt}}}},size=function(_e){return _e===void 0&&(_e={}),{name:"size",options:_e,async fn(_){const{placement:tt,rects:nt,platform:rt,elements:it}=_,{apply:at=()=>{},...ot}=evaluate$1(_e,_),st=await detectOverflow(_,ot),lt=getSide(tt),ct=getAlignment(tt),ut=getSideAxis(tt)==="y",{width:ft,height:pt}=nt.floating;let gt,xt;lt==="top"||lt==="bottom"?(gt=lt,xt=ct===(await(rt.isRTL==null?void 0:rt.isRTL(it.floating))?"start":"end")?"left":"right"):(xt=lt,gt=ct==="end"?"top":"bottom");const yt=pt-st[gt],mt=ft-st[xt],At=!_.middlewareData.shift;let vt=yt,Et=mt;if(ut){const Tt=ft-st.left-st.right;Et=ct||At?min(mt,Tt):Tt}else{const Tt=pt-st.top-st.bottom;vt=ct||At?min(yt,Tt):Tt}if(At&&!ct){const Tt=max(st.left,0),bt=max(st.right,0),It=max(st.top,0),wt=max(st.bottom,0);ut?Et=ft-2*(Tt!==0||bt!==0?Tt+bt:max(st.left,st.right)):vt=pt-2*(It!==0||wt!==0?It+wt:max(st.top,st.bottom))}await at({..._,availableWidth:Et,availableHeight:vt});const Ct=await rt.getDimensions(it.floating);return ft!==Ct.width||pt!==Ct.height?{reset:{rects:!0}}:{}}}};function getNodeName(_e){return isNode(_e)?(_e.nodeName||"").toLowerCase():"#document"}function getWindow(_e){var _;return(_e==null||(_=_e.ownerDocument)==null?void 0:_.defaultView)||window}function getDocumentElement(_e){var _;return(_=(isNode(_e)?_e.ownerDocument:_e.document)||window.document)==null?void 0:_.documentElement}function isNode(_e){return _e instanceof Node||_e instanceof getWindow(_e).Node}function isElement(_e){return _e instanceof Element||_e instanceof getWindow(_e).Element}function isHTMLElement(_e){return _e instanceof HTMLElement||_e instanceof getWindow(_e).HTMLElement}function isShadowRoot(_e){return typeof ShadowRoot>"u"?!1:_e instanceof ShadowRoot||_e instanceof getWindow(_e).ShadowRoot}function isOverflowElement(_e){const{overflow:_,overflowX:tt,overflowY:nt,display:rt}=getComputedStyle$1(_e);return/auto|scroll|overlay|hidden|clip/.test(_+nt+tt)&&!["inline","contents"].includes(rt)}function isTableElement(_e){return["table","td","th"].includes(getNodeName(_e))}function isContainingBlock(_e){const _=isWebKit(),tt=getComputedStyle$1(_e);return tt.transform!=="none"||tt.perspective!=="none"||(tt.containerType?tt.containerType!=="normal":!1)||!_&&(tt.backdropFilter?tt.backdropFilter!=="none":!1)||!_&&(tt.filter?tt.filter!=="none":!1)||["transform","perspective","filter"].some(nt=>(tt.willChange||"").includes(nt))||["paint","layout","strict","content"].some(nt=>(tt.contain||"").includes(nt))}function getContainingBlock(_e){let _=getParentNode(_e);for(;isHTMLElement(_)&&!isLastTraversableNode(_);){if(isContainingBlock(_))return _;_=getParentNode(_)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_e){return["html","body","#document"].includes(getNodeName(_e))}function getComputedStyle$1(_e){return getWindow(_e).getComputedStyle(_e)}function getNodeScroll(_e){return isElement(_e)?{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}:{scrollLeft:_e.pageXOffset,scrollTop:_e.pageYOffset}}function getParentNode(_e){if(getNodeName(_e)==="html")return _e;const _=_e.assignedSlot||_e.parentNode||isShadowRoot(_e)&&_e.host||getDocumentElement(_e);return isShadowRoot(_)?_.host:_}function getNearestOverflowAncestor(_e){const _=getParentNode(_e);return isLastTraversableNode(_)?_e.ownerDocument?_e.ownerDocument.body:_e.body:isHTMLElement(_)&&isOverflowElement(_)?_:getNearestOverflowAncestor(_)}function getOverflowAncestors(_e,_,tt){var nt;_===void 0&&(_=[]),tt===void 0&&(tt=!0);const rt=getNearestOverflowAncestor(_e),it=rt===((nt=_e.ownerDocument)==null?void 0:nt.body),at=getWindow(rt);return it?_.concat(at,at.visualViewport||[],isOverflowElement(rt)?rt:[],at.frameElement&&tt?getOverflowAncestors(at.frameElement):[]):_.concat(rt,getOverflowAncestors(rt))}function getCssDimensions(_e){const _=getComputedStyle$1(_e);let tt=parseFloat(_.width)||0,nt=parseFloat(_.height)||0;const rt=isHTMLElement(_e),it=rt?_e.offsetWidth:tt,at=rt?_e.offsetHeight:nt,ot=round(tt)!==it||round(nt)!==at;return ot&&(tt=it,nt=at),{width:tt,height:nt,$:ot}}function unwrapElement(_e){return isElement(_e)?_e:_e.contextElement}function getScale(_e){const _=unwrapElement(_e);if(!isHTMLElement(_))return createCoords(1);const tt=_.getBoundingClientRect(),{width:nt,height:rt,$:it}=getCssDimensions(_);let at=(it?round(tt.width):tt.width)/nt,ot=(it?round(tt.height):tt.height)/rt;return(!at||!Number.isFinite(at))&&(at=1),(!ot||!Number.isFinite(ot))&&(ot=1),{x:at,y:ot}}const noOffsets=createCoords(0);function getVisualOffsets(_e){const _=getWindow(_e);return!isWebKit()||!_.visualViewport?noOffsets:{x:_.visualViewport.offsetLeft,y:_.visualViewport.offsetTop}}function shouldAddVisualOffsets(_e,_,tt){return _===void 0&&(_=!1),!tt||_&&tt!==getWindow(_e)?!1:_}function getBoundingClientRect(_e,_,tt,nt){_===void 0&&(_=!1),tt===void 0&&(tt=!1);const rt=_e.getBoundingClientRect(),it=unwrapElement(_e);let at=createCoords(1);_&&(nt?isElement(nt)&&(at=getScale(nt)):at=getScale(_e));const ot=shouldAddVisualOffsets(it,tt,nt)?getVisualOffsets(it):createCoords(0);let st=(rt.left+ot.x)/at.x,lt=(rt.top+ot.y)/at.y,ct=rt.width/at.x,ut=rt.height/at.y;if(it){const ft=getWindow(it),pt=nt&&isElement(nt)?getWindow(nt):nt;let gt=ft.frameElement;for(;gt&&nt&&pt!==ft;){const xt=getScale(gt),yt=gt.getBoundingClientRect(),mt=getComputedStyle$1(gt),At=yt.left+(gt.clientLeft+parseFloat(mt.paddingLeft))*xt.x,vt=yt.top+(gt.clientTop+parseFloat(mt.paddingTop))*xt.y;st*=xt.x,lt*=xt.y,ct*=xt.x,ut*=xt.y,st+=At,lt+=vt,gt=getWindow(gt).frameElement}}return rectToClientRect({width:ct,height:ut,x:st,y:lt})}function convertOffsetParentRelativeRectToViewportRelativeRect(_e){let{rect:_,offsetParent:tt,strategy:nt}=_e;const rt=isHTMLElement(tt),it=getDocumentElement(tt);if(tt===it)return _;let at={scrollLeft:0,scrollTop:0},ot=createCoords(1);const st=createCoords(0);if((rt||!rt&&nt!=="fixed")&&((getNodeName(tt)!=="body"||isOverflowElement(it))&&(at=getNodeScroll(tt)),isHTMLElement(tt))){const lt=getBoundingClientRect(tt);ot=getScale(tt),st.x=lt.x+tt.clientLeft,st.y=lt.y+tt.clientTop}return{width:_.width*ot.x,height:_.height*ot.y,x:_.x*ot.x-at.scrollLeft*ot.x+st.x,y:_.y*ot.y-at.scrollTop*ot.y+st.y}}function getClientRects(_e){return Array.from(_e.getClientRects())}function getWindowScrollBarX(_e){return getBoundingClientRect(getDocumentElement(_e)).left+getNodeScroll(_e).scrollLeft}function getDocumentRect(_e){const _=getDocumentElement(_e),tt=getNodeScroll(_e),nt=_e.ownerDocument.body,rt=max(_.scrollWidth,_.clientWidth,nt.scrollWidth,nt.clientWidth),it=max(_.scrollHeight,_.clientHeight,nt.scrollHeight,nt.clientHeight);let at=-tt.scrollLeft+getWindowScrollBarX(_e);const ot=-tt.scrollTop;return getComputedStyle$1(nt).direction==="rtl"&&(at+=max(_.clientWidth,nt.clientWidth)-rt),{width:rt,height:it,x:at,y:ot}}function getViewportRect(_e,_){const tt=getWindow(_e),nt=getDocumentElement(_e),rt=tt.visualViewport;let it=nt.clientWidth,at=nt.clientHeight,ot=0,st=0;if(rt){it=rt.width,at=rt.height;const lt=isWebKit();(!lt||lt&&_==="fixed")&&(ot=rt.offsetLeft,st=rt.offsetTop)}return{width:it,height:at,x:ot,y:st}}function getInnerBoundingClientRect(_e,_){const tt=getBoundingClientRect(_e,!0,_==="fixed"),nt=tt.top+_e.clientTop,rt=tt.left+_e.clientLeft,it=isHTMLElement(_e)?getScale(_e):createCoords(1),at=_e.clientWidth*it.x,ot=_e.clientHeight*it.y,st=rt*it.x,lt=nt*it.y;return{width:at,height:ot,x:st,y:lt}}function getClientRectFromClippingAncestor(_e,_,tt){let nt;if(_==="viewport")nt=getViewportRect(_e,tt);else if(_==="document")nt=getDocumentRect(getDocumentElement(_e));else if(isElement(_))nt=getInnerBoundingClientRect(_,tt);else{const rt=getVisualOffsets(_e);nt={..._,x:_.x-rt.x,y:_.y-rt.y}}return rectToClientRect(nt)}function hasFixedPositionAncestor(_e,_){const tt=getParentNode(_e);return tt===_||!isElement(tt)||isLastTraversableNode(tt)?!1:getComputedStyle$1(tt).position==="fixed"||hasFixedPositionAncestor(tt,_)}function getClippingElementAncestors(_e,_){const tt=_.get(_e);if(tt)return tt;let nt=getOverflowAncestors(_e,[],!1).filter(ot=>isElement(ot)&&getNodeName(ot)!=="body"),rt=null;const it=getComputedStyle$1(_e).position==="fixed";let at=it?getParentNode(_e):_e;for(;isElement(at)&&!isLastTraversableNode(at);){const ot=getComputedStyle$1(at),st=isContainingBlock(at);!st&&ot.position==="fixed"&&(rt=null),(it?!st&&!rt:!st&&ot.position==="static"&&!!rt&&["absolute","fixed"].includes(rt.position)||isOverflowElement(at)&&!st&&hasFixedPositionAncestor(_e,at))?nt=nt.filter(ct=>ct!==at):rt=ot,at=getParentNode(at)}return _.set(_e,nt),nt}function getClippingRect(_e){let{element:_,boundary:tt,rootBoundary:nt,strategy:rt}=_e;const at=[...tt==="clippingAncestors"?getClippingElementAncestors(_,this._c):[].concat(tt),nt],ot=at[0],st=at.reduce((lt,ct)=>{const ut=getClientRectFromClippingAncestor(_,ct,rt);return lt.top=max(ut.top,lt.top),lt.right=min(ut.right,lt.right),lt.bottom=min(ut.bottom,lt.bottom),lt.left=max(ut.left,lt.left),lt},getClientRectFromClippingAncestor(_,ot,rt));return{width:st.right-st.left,height:st.bottom-st.top,x:st.left,y:st.top}}function getDimensions(_e){return getCssDimensions(_e)}function getRectRelativeToOffsetParent(_e,_,tt){const nt=isHTMLElement(_),rt=getDocumentElement(_),it=tt==="fixed",at=getBoundingClientRect(_e,!0,it,_);let ot={scrollLeft:0,scrollTop:0};const st=createCoords(0);if(nt||!nt&&!it)if((getNodeName(_)!=="body"||isOverflowElement(rt))&&(ot=getNodeScroll(_)),nt){const lt=getBoundingClientRect(_,!0,it,_);st.x=lt.x+_.clientLeft,st.y=lt.y+_.clientTop}else rt&&(st.x=getWindowScrollBarX(rt));return{x:at.left+ot.scrollLeft-st.x,y:at.top+ot.scrollTop-st.y,width:at.width,height:at.height}}function getTrueOffsetParent(_e,_){return!isHTMLElement(_e)||getComputedStyle$1(_e).position==="fixed"?null:_?_(_e):_e.offsetParent}function getOffsetParent(_e,_){const tt=getWindow(_e);if(!isHTMLElement(_e))return tt;let nt=getTrueOffsetParent(_e,_);for(;nt&&isTableElement(nt)&&getComputedStyle$1(nt).position==="static";)nt=getTrueOffsetParent(nt,_);return nt&&(getNodeName(nt)==="html"||getNodeName(nt)==="body"&&getComputedStyle$1(nt).position==="static"&&!isContainingBlock(nt))?tt:nt||getContainingBlock(_e)||tt}const getElementRects=async function(_e){let{reference:_,floating:tt,strategy:nt}=_e;const rt=this.getOffsetParent||getOffsetParent,it=this.getDimensions;return{reference:getRectRelativeToOffsetParent(_,await rt(tt),nt),floating:{x:0,y:0,...await it(tt)}}};function isRTL(_e){return getComputedStyle$1(_e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_e,_){let tt=null,nt;const rt=getDocumentElement(_e);function it(){clearTimeout(nt),tt&&tt.disconnect(),tt=null}function at(ot,st){ot===void 0&&(ot=!1),st===void 0&&(st=1),it();const{left:lt,top:ct,width:ut,height:ft}=_e.getBoundingClientRect();if(ot||_(),!ut||!ft)return;const pt=floor(ct),gt=floor(rt.clientWidth-(lt+ut)),xt=floor(rt.clientHeight-(ct+ft)),yt=floor(lt),At={rootMargin:-pt+"px "+-gt+"px "+-xt+"px "+-yt+"px",threshold:max(0,min(1,st))||1};let vt=!0;function Et(Ct){const Tt=Ct[0].intersectionRatio;if(Tt!==st){if(!vt)return at();Tt?at(!1,Tt):nt=setTimeout(()=>{at(!1,1e-7)},100)}vt=!1}try{tt=new IntersectionObserver(Et,{...At,root:rt.ownerDocument})}catch{tt=new IntersectionObserver(Et,At)}tt.observe(_e)}return at(!0),it}function autoUpdate(_e,_,tt,nt){nt===void 0&&(nt={});const{ancestorScroll:rt=!0,ancestorResize:it=!0,elementResize:at=typeof ResizeObserver=="function",layoutShift:ot=typeof IntersectionObserver=="function",animationFrame:st=!1}=nt,lt=unwrapElement(_e),ct=rt||it?[...lt?getOverflowAncestors(lt):[],...getOverflowAncestors(_)]:[];ct.forEach(mt=>{rt&&mt.addEventListener("scroll",tt,{passive:!0}),it&&mt.addEventListener("resize",tt)});const ut=lt&&ot?observeMove(lt,tt):null;let ft=-1,pt=null;at&&(pt=new ResizeObserver(mt=>{let[At]=mt;At&&At.target===lt&&pt&&(pt.unobserve(_),cancelAnimationFrame(ft),ft=requestAnimationFrame(()=>{pt&&pt.observe(_)})),tt()}),lt&&!st&&pt.observe(lt),pt.observe(_));let gt,xt=st?getBoundingClientRect(_e):null;st&&yt();function yt(){const mt=getBoundingClientRect(_e);xt&&(mt.x!==xt.x||mt.y!==xt.y||mt.width!==xt.width||mt.height!==xt.height)&&tt(),xt=mt,gt=requestAnimationFrame(yt)}return tt(),()=>{ct.forEach(mt=>{rt&&mt.removeEventListener("scroll",tt),it&&mt.removeEventListener("resize",tt)}),ut&&ut(),pt&&pt.disconnect(),pt=null,st&&cancelAnimationFrame(gt)}}const computePosition=(_e,_,tt)=>{const nt=new Map,rt={platform,...tt},it={...rt.platform,_c:nt};return computePosition$1(_e,_,{...rt,platform:it})},arrow=_e=>{function _(tt){return{}.hasOwnProperty.call(tt,"current")}return{name:"arrow",options:_e,fn(tt){const{element:nt,padding:rt}=typeof _e=="function"?_e(tt):_e;return nt&&_(nt)?nt.current!=null?arrow$1({element:nt.current,padding:rt}).fn(tt):{}:nt?arrow$1({element:nt,padding:rt}).fn(tt):{}}}};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(_e,_){if(_e===_)return!0;if(typeof _e!=typeof _)return!1;if(typeof _e=="function"&&_e.toString()===_.toString())return!0;let tt,nt,rt;if(_e&&_&&typeof _e=="object"){if(Array.isArray(_e)){if(tt=_e.length,tt!=_.length)return!1;for(nt=tt;nt--!==0;)if(!deepEqual(_e[nt],_[nt]))return!1;return!0}if(rt=Object.keys(_e),tt=rt.length,tt!==Object.keys(_).length)return!1;for(nt=tt;nt--!==0;)if(!{}.hasOwnProperty.call(_,rt[nt]))return!1;for(nt=tt;nt--!==0;){const it=rt[nt];if(!(it==="_owner"&&_e.$$typeof)&&!deepEqual(_e[it],_[it]))return!1}return!0}return _e!==_e&&_!==_}function getDPR(_e){return typeof window>"u"?1:(_e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_e,_){const tt=getDPR(_e);return Math.round(_*tt)/tt}function useLatestRef(_e){const _=reactExports.useRef(_e);return index$1(()=>{_.current=_e}),_}function useFloating(_e){_e===void 0&&(_e={});const{placement:_="bottom",strategy:tt="absolute",middleware:nt=[],platform:rt,elements:{reference:it,floating:at}={},transform:ot=!0,whileElementsMounted:st,open:lt}=_e,[ct,ut]=reactExports.useState({x:0,y:0,strategy:tt,placement:_,middlewareData:{},isPositioned:!1}),[ft,pt]=reactExports.useState(nt);deepEqual(ft,nt)||pt(nt);const[gt,xt]=reactExports.useState(null),[yt,mt]=reactExports.useState(null),At=reactExports.useCallback(Xt=>{Xt!=Tt.current&&(Tt.current=Xt,xt(Xt))},[xt]),vt=reactExports.useCallback(Xt=>{Xt!==bt.current&&(bt.current=Xt,mt(Xt))},[mt]),Et=it||gt,Ct=at||yt,Tt=reactExports.useRef(null),bt=reactExports.useRef(null),It=reactExports.useRef(ct),wt=useLatestRef(st),Rt=useLatestRef(rt),Ft=reactExports.useCallback(()=>{if(!Tt.current||!bt.current)return;const Xt={placement:_,strategy:tt,middleware:ft};Rt.current&&(Xt.platform=Rt.current),computePosition(Tt.current,bt.current,Xt).then(Jt=>{const Dt={...Jt,isPositioned:!0};Ut.current&&!deepEqual(It.current,Dt)&&(It.current=Dt,reactDomExports.flushSync(()=>{ut(Dt)}))})},[ft,_,tt,Rt]);index$1(()=>{lt===!1&&It.current.isPositioned&&(It.current.isPositioned=!1,ut(Xt=>({...Xt,isPositioned:!1})))},[lt]);const Ut=reactExports.useRef(!1);index$1(()=>(Ut.current=!0,()=>{Ut.current=!1}),[]),index$1(()=>{if(Et&&(Tt.current=Et),Ct&&(bt.current=Ct),Et&&Ct){if(wt.current)return wt.current(Et,Ct,Ft);Ft()}},[Et,Ct,Ft,wt]);const Gt=reactExports.useMemo(()=>({reference:Tt,floating:bt,setReference:At,setFloating:vt}),[At,vt]),Ht=reactExports.useMemo(()=>({reference:Et,floating:Ct}),[Et,Ct]),jt=reactExports.useMemo(()=>{const Xt={position:tt,left:0,top:0};if(!Ht.floating)return Xt;const Jt=roundByDPR(Ht.floating,ct.x),Dt=roundByDPR(Ht.floating,ct.y);return ot?{...Xt,transform:"translate("+Jt+"px, "+Dt+"px)",...getDPR(Ht.floating)>=1.5&&{willChange:"transform"}}:{position:tt,left:Jt,top:Dt}},[tt,ot,Ht.floating,ct.x,ct.y]);return reactExports.useMemo(()=>({...ct,update:Ft,refs:Gt,elements:Ht,floatingStyles:jt}),[ct,Ft,Gt,Ht,jt])}const $7e8f5cd07187803e$export$21b07c8f274aebd5=reactExports.forwardRef((_e,_)=>{const{children:tt,width:nt=10,height:rt=5,...it}=_e;return reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.svg,_extends$1({},it,{ref:_,width:nt,height:rt,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),_e.asChild?tt:reactExports.createElement("polygon",{points:"0,0 30,0 15,10"}))}),$7e8f5cd07187803e$export$be92b6f5f03c0fe9=$7e8f5cd07187803e$export$21b07c8f274aebd5;function $db6c3485150b8e66$export$1ab7ae714698c4b8(_e){const[_,tt]=reactExports.useState(void 0);return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(_e){tt({width:_e.offsetWidth,height:_e.offsetHeight});const nt=new ResizeObserver(rt=>{if(!Array.isArray(rt)||!rt.length)return;const it=rt[0];let at,ot;if("borderBoxSize"in it){const st=it.borderBoxSize,lt=Array.isArray(st)?st[0]:st;at=lt.inlineSize,ot=lt.blockSize}else at=_e.offsetWidth,ot=_e.offsetHeight;tt({width:at,height:ot})});return nt.observe(_e,{box:"border-box"}),()=>nt.unobserve(_e)}else tt(void 0)},[_e]),_}const $cf1ac5d9fe0e8206$var$POPPER_NAME="Popper",[$cf1ac5d9fe0e8206$var$createPopperContext,$cf1ac5d9fe0e8206$export$722aac194ae923]=$c512c27ab02ef895$export$50c7b4e9d9f19c1($cf1ac5d9fe0e8206$var$POPPER_NAME),[$cf1ac5d9fe0e8206$var$PopperProvider,$cf1ac5d9fe0e8206$var$usePopperContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$POPPER_NAME),$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9=_e=>{const{__scopePopper:_,children:tt}=_e,[nt,rt]=reactExports.useState(null);return reactExports.createElement($cf1ac5d9fe0e8206$var$PopperProvider,{scope:_,anchor:nt,onAnchorChange:rt},tt)},$cf1ac5d9fe0e8206$var$ANCHOR_NAME="PopperAnchor",$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d=reactExports.forwardRef((_e,_)=>{const{__scopePopper:tt,virtualRef:nt,...rt}=_e,it=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$ANCHOR_NAME,tt),at=reactExports.useRef(null),ot=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,at);return reactExports.useEffect(()=>{it.onAnchorChange((nt==null?void 0:nt.current)||at.current)}),nt?null:reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({},rt,{ref:ot}))}),$cf1ac5d9fe0e8206$var$CONTENT_NAME="PopperContent",[$cf1ac5d9fe0e8206$var$PopperContentProvider,$cf1ac5d9fe0e8206$var$useContentContext]=$cf1ac5d9fe0e8206$var$createPopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME),$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc=reactExports.forwardRef((_e,_)=>{var tt,nt,rt,it,at,ot,st,lt;const{__scopePopper:ct,side:ut="bottom",sideOffset:ft=0,align:pt="center",alignOffset:gt=0,arrowPadding:xt=0,collisionBoundary:yt=[],collisionPadding:mt=0,sticky:At="partial",hideWhenDetached:vt=!1,avoidCollisions:Et=!0,onPlaced:Ct,...Tt}=_e,bt=$cf1ac5d9fe0e8206$var$usePopperContext($cf1ac5d9fe0e8206$var$CONTENT_NAME,ct),[It,wt]=reactExports.useState(null),Rt=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,gn=>wt(gn)),[Ft,Ut]=reactExports.useState(null),Gt=$db6c3485150b8e66$export$1ab7ae714698c4b8(Ft),Ht=(tt=Gt==null?void 0:Gt.width)!==null&&tt!==void 0?tt:0,jt=(nt=Gt==null?void 0:Gt.height)!==null&&nt!==void 0?nt:0,Xt=ut+(pt!=="center"?"-"+pt:""),Jt=typeof mt=="number"?mt:{top:0,right:0,bottom:0,left:0,...mt},Dt=Array.isArray(yt)?yt:[yt],zt=Dt.length>0,$t={padding:Jt,boundary:Dt.filter($cf1ac5d9fe0e8206$var$isNotNull),altBoundary:zt},{refs:Lt,floatingStyles:Vt,placement:tn,isPositioned:an,middlewareData:on}=useFloating({strategy:"fixed",placement:Xt,whileElementsMounted:autoUpdate,elements:{reference:bt.anchor},middleware:[offset({mainAxis:ft+jt,alignmentAxis:gt}),Et&&shift({mainAxis:!0,crossAxis:!1,limiter:At==="partial"?limitShift():void 0,...$t}),Et&&flip({...$t}),size({...$t,apply:({elements:gn,rects:vn,availableWidth:mn,availableHeight:Wn})=>{const{width:xn,height:Dn}=vn.reference,Fn=gn.floating.style;Fn.setProperty("--radix-popper-available-width",`${mn}px`),Fn.setProperty("--radix-popper-available-height",`${Wn}px`),Fn.setProperty("--radix-popper-anchor-width",`${xn}px`),Fn.setProperty("--radix-popper-anchor-height",`${Dn}px`)}}),Ft&&arrow({element:Ft,padding:xt}),$cf1ac5d9fe0e8206$var$transformOrigin({arrowWidth:Ht,arrowHeight:jt}),vt&&hide({strategy:"referenceHidden"})]}),[sn,ln]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(tn),cn=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(Ct);$9f79659886946c16$export$e5c5a5f917a5871c(()=>{an&&(cn==null||cn())},[an,cn]);const In=(rt=on.arrow)===null||rt===void 0?void 0:rt.x,zn=(it=on.arrow)===null||it===void 0?void 0:it.y,yn=((at=on.arrow)===null||at===void 0?void 0:at.centerOffset)!==0,[Wt,_n]=reactExports.useState();return $9f79659886946c16$export$e5c5a5f917a5871c(()=>{It&&_n(window.getComputedStyle(It).zIndex)},[It]),reactExports.createElement("div",{ref:Lt.setFloating,"data-radix-popper-content-wrapper":"",style:{...Vt,transform:an?Vt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Wt,"--radix-popper-transform-origin":[(ot=on.transformOrigin)===null||ot===void 0?void 0:ot.x,(st=on.transformOrigin)===null||st===void 0?void 0:st.y].join(" ")},dir:_e.dir},reactExports.createElement($cf1ac5d9fe0e8206$var$PopperContentProvider,{scope:ct,placedSide:sn,onArrowChange:Ut,arrowX:In,arrowY:zn,shouldHideArrow:yn},reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.div,_extends$1({"data-side":sn,"data-align":ln},Tt,{ref:Rt,style:{...Tt.style,animation:an?void 0:"none",opacity:(lt=on.hide)!==null&&lt!==void 0&&lt.referenceHidden?0:void 0}}))))}),$cf1ac5d9fe0e8206$var$ARROW_NAME="PopperArrow",$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0=reactExports.forwardRef(function _e(_,tt){const{__scopePopper:nt,...rt}=_,it=$cf1ac5d9fe0e8206$var$useContentContext($cf1ac5d9fe0e8206$var$ARROW_NAME,nt),at=$cf1ac5d9fe0e8206$var$OPPOSITE_SIDE[it.placedSide];return reactExports.createElement("span",{ref:it.onArrowChange,style:{position:"absolute",left:it.arrowX,top:it.arrowY,[at]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[it.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[it.placedSide],visibility:it.shouldHideArrow?"hidden":void 0}},reactExports.createElement($7e8f5cd07187803e$export$be92b6f5f03c0fe9,_extends$1({},rt,{ref:tt,style:{...rt.style,display:"block"}})))});function $cf1ac5d9fe0e8206$var$isNotNull(_e){return _e!==null}const $cf1ac5d9fe0e8206$var$transformOrigin=_e=>({name:"transformOrigin",options:_e,fn(_){var tt,nt,rt,it,at;const{placement:ot,rects:st,middlewareData:lt}=_,ut=((tt=lt.arrow)===null||tt===void 0?void 0:tt.centerOffset)!==0,ft=ut?0:_e.arrowWidth,pt=ut?0:_e.arrowHeight,[gt,xt]=$cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(ot),yt={start:"0%",center:"50%",end:"100%"}[xt],mt=((nt=(rt=lt.arrow)===null||rt===void 0?void 0:rt.x)!==null&&nt!==void 0?nt:0)+ft/2,At=((it=(at=lt.arrow)===null||at===void 0?void 0:at.y)!==null&&it!==void 0?it:0)+pt/2;let vt="",Et="";return gt==="bottom"?(vt=ut?yt:`${mt}px`,Et=`${-pt}px`):gt==="top"?(vt=ut?yt:`${mt}px`,Et=`${st.floating.height+pt}px`):gt==="right"?(vt=`${-pt}px`,Et=ut?yt:`${At}px`):gt==="left"&&(vt=`${st.floating.width+pt}px`,Et=ut?yt:`${At}px`),{data:{x:vt,y:Et}}}});function $cf1ac5d9fe0e8206$var$getSideAndAlignFromPlacement(_e){const[_,tt="center"]=_e.split("-");return[_,tt]}const $cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9=$cf1ac5d9fe0e8206$export$badac9ada3a0bdf9,$cf1ac5d9fe0e8206$export$b688253958b8dfe7=$cf1ac5d9fe0e8206$export$ecd4e1ccab6ed6d,$cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2=$cf1ac5d9fe0e8206$export$bc4ae5855d3c4fc,$cf1ac5d9fe0e8206$export$21b07c8f274aebd5=$cf1ac5d9fe0e8206$export$79d62cd4e10a3fd0;function $fe963b355347cc68$export$3e6543de14f8614f(_e,_){return reactExports.useReducer((tt,nt)=>{const rt=_[tt][nt];return rt??tt},_e)}const $921a889cee6df7e8$export$99c2b779aa4e8b8b=_e=>{const{present:_,children:tt}=_e,nt=$921a889cee6df7e8$var$usePresence(_),rt=typeof tt=="function"?tt({present:nt.isPresent}):reactExports.Children.only(tt),it=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(nt.ref,rt.ref);return typeof tt=="function"||nt.isPresent?reactExports.cloneElement(rt,{ref:it}):null};$921a889cee6df7e8$export$99c2b779aa4e8b8b.displayName="Presence";function $921a889cee6df7e8$var$usePresence(_e){const[_,tt]=reactExports.useState(),nt=reactExports.useRef({}),rt=reactExports.useRef(_e),it=reactExports.useRef("none"),at=_e?"mounted":"unmounted",[ot,st]=$fe963b355347cc68$export$3e6543de14f8614f(at,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const lt=$921a889cee6df7e8$var$getAnimationName(nt.current);it.current=ot==="mounted"?lt:"none"},[ot]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{const lt=nt.current,ct=rt.current;if(ct!==_e){const ft=it.current,pt=$921a889cee6df7e8$var$getAnimationName(lt);_e?st("MOUNT"):pt==="none"||(lt==null?void 0:lt.display)==="none"?st("UNMOUNT"):st(ct&&ft!==pt?"ANIMATION_OUT":"UNMOUNT"),rt.current=_e}},[_e,st]),$9f79659886946c16$export$e5c5a5f917a5871c(()=>{if(_){const lt=ut=>{const pt=$921a889cee6df7e8$var$getAnimationName(nt.current).includes(ut.animationName);ut.target===_&&pt&&reactDomExports.flushSync(()=>st("ANIMATION_END"))},ct=ut=>{ut.target===_&&(it.current=$921a889cee6df7e8$var$getAnimationName(nt.current))};return _.addEventListener("animationstart",ct),_.addEventListener("animationcancel",lt),_.addEventListener("animationend",lt),()=>{_.removeEventListener("animationstart",ct),_.removeEventListener("animationcancel",lt),_.removeEventListener("animationend",lt)}}else st("ANIMATION_END")},[_,st]),{isPresent:["mounted","unmountSuspended"].includes(ot),ref:reactExports.useCallback(lt=>{lt&&(nt.current=getComputedStyle(lt)),tt(lt)},[])}}function $921a889cee6df7e8$var$getAnimationName(_e){return(_e==null?void 0:_e.animationName)||"none"}function $71cd76cc60e0454e$export$6f32135080cb4c3({prop:_e,defaultProp:_,onChange:tt=()=>{}}){const[nt,rt]=$71cd76cc60e0454e$var$useUncontrolledState({defaultProp:_,onChange:tt}),it=_e!==void 0,at=it?_e:nt,ot=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(tt),st=reactExports.useCallback(lt=>{if(it){const ut=typeof lt=="function"?lt(_e):lt;ut!==_e&&ot(ut)}else rt(lt)},[it,_e,rt,ot]);return[at,st]}function $71cd76cc60e0454e$var$useUncontrolledState({defaultProp:_e,onChange:_}){const tt=reactExports.useState(_e),[nt]=tt,rt=reactExports.useRef(nt),it=$b1b2314f5f9a1d84$export$25bec8c6f54ee79a(_);return reactExports.useEffect(()=>{rt.current!==nt&&(it(nt),rt.current=nt)},[nt,rt,it]),tt}const $ea1ef594cf570d83$export$439d29a4e110a164=reactExports.forwardRef((_e,_)=>reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.span,_extends$1({},_e,{ref:_,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._e.style}}))),$ea1ef594cf570d83$export$be92b6f5f03c0fe9=$ea1ef594cf570d83$export$439d29a4e110a164,[$a093c7e1ec25a057$var$createTooltipContext,$a093c7e1ec25a057$export$1c540a2224f0d865]=$c512c27ab02ef895$export$50c7b4e9d9f19c1("Tooltip",[$cf1ac5d9fe0e8206$export$722aac194ae923]),$a093c7e1ec25a057$var$usePopperScope=$cf1ac5d9fe0e8206$export$722aac194ae923(),$a093c7e1ec25a057$var$PROVIDER_NAME="TooltipProvider",$a093c7e1ec25a057$var$TOOLTIP_OPEN="tooltip.open",[$a093c7e1ec25a057$var$TooltipProviderContextProvider,$a093c7e1ec25a057$var$useTooltipProviderContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PROVIDER_NAME),$a093c7e1ec25a057$var$TOOLTIP_NAME="Tooltip",[$a093c7e1ec25a057$var$TooltipContextProvider,$a093c7e1ec25a057$var$useTooltipContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME),$a093c7e1ec25a057$export$28c660c63b792dea=_e=>{const{__scopeTooltip:_,children:tt,open:nt,defaultOpen:rt=!1,onOpenChange:it,disableHoverableContent:at,delayDuration:ot}=_e,st=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TOOLTIP_NAME,_e.__scopeTooltip),lt=$a093c7e1ec25a057$var$usePopperScope(_),[ct,ut]=reactExports.useState(null),ft=$1746a345f3d73bb7$export$f680877a34711e37(),pt=reactExports.useRef(0),gt=at??st.disableHoverableContent,xt=ot??st.delayDuration,yt=reactExports.useRef(!1),[mt=!1,At]=$71cd76cc60e0454e$export$6f32135080cb4c3({prop:nt,defaultProp:rt,onChange:bt=>{bt?(st.onOpen(),document.dispatchEvent(new CustomEvent($a093c7e1ec25a057$var$TOOLTIP_OPEN))):st.onClose(),it==null||it(bt)}}),vt=reactExports.useMemo(()=>mt?yt.current?"delayed-open":"instant-open":"closed",[mt]),Et=reactExports.useCallback(()=>{window.clearTimeout(pt.current),yt.current=!1,At(!0)},[At]),Ct=reactExports.useCallback(()=>{window.clearTimeout(pt.current),At(!1)},[At]),Tt=reactExports.useCallback(()=>{window.clearTimeout(pt.current),pt.current=window.setTimeout(()=>{yt.current=!0,At(!0)},xt)},[xt,At]);return reactExports.useEffect(()=>()=>window.clearTimeout(pt.current),[]),reactExports.createElement($cf1ac5d9fe0e8206$export$be92b6f5f03c0fe9,lt,reactExports.createElement($a093c7e1ec25a057$var$TooltipContextProvider,{scope:_,contentId:ft,open:mt,stateAttribute:vt,trigger:ct,onTriggerChange:ut,onTriggerEnter:reactExports.useCallback(()=>{st.isOpenDelayed?Tt():Et()},[st.isOpenDelayed,Tt,Et]),onTriggerLeave:reactExports.useCallback(()=>{gt?Ct():window.clearTimeout(pt.current)},[Ct,gt]),onOpen:Et,onClose:Ct,disableHoverableContent:gt},tt))},$a093c7e1ec25a057$var$TRIGGER_NAME="TooltipTrigger",$a093c7e1ec25a057$export$8c610744efcf8a1d=reactExports.forwardRef((_e,_)=>{const{__scopeTooltip:tt,...nt}=_e,rt=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$TRIGGER_NAME,tt),it=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$TRIGGER_NAME,tt),at=$a093c7e1ec25a057$var$usePopperScope(tt),ot=reactExports.useRef(null),st=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,ot,rt.onTriggerChange),lt=reactExports.useRef(!1),ct=reactExports.useRef(!1),ut=reactExports.useCallback(()=>lt.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",ut),[ut]),reactExports.createElement($cf1ac5d9fe0e8206$export$b688253958b8dfe7,_extends$1({asChild:!0},at),reactExports.createElement($8927f6f2acc4f386$export$250ffa63cdc0d034.button,_extends$1({"aria-describedby":rt.open?rt.contentId:void 0,"data-state":rt.stateAttribute},nt,{ref:st,onPointerMove:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onPointerMove,ft=>{ft.pointerType!=="touch"&&!ct.current&&!it.isPointerInTransitRef.current&&(rt.onTriggerEnter(),ct.current=!0)}),onPointerLeave:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onPointerLeave,()=>{rt.onTriggerLeave(),ct.current=!1}),onPointerDown:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onPointerDown,()=>{lt.current=!0,document.addEventListener("pointerup",ut,{once:!0})}),onFocus:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onFocus,()=>{lt.current||rt.onOpen()}),onBlur:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onBlur,rt.onClose),onClick:$e42e1063c40fb3ef$export$b9ecd428b558ff10(_e.onClick,rt.onClose)})))}),$a093c7e1ec25a057$var$PORTAL_NAME="TooltipPortal",[$a093c7e1ec25a057$var$PortalProvider,$a093c7e1ec25a057$var$usePortalContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$PORTAL_NAME,{forceMount:void 0}),$a093c7e1ec25a057$var$CONTENT_NAME="TooltipContent",$a093c7e1ec25a057$export$e9003e2be37ec060=reactExports.forwardRef((_e,_)=>{const tt=$a093c7e1ec25a057$var$usePortalContext($a093c7e1ec25a057$var$CONTENT_NAME,_e.__scopeTooltip),{forceMount:nt=tt.forceMount,side:rt="top",...it}=_e,at=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,_e.__scopeTooltip);return reactExports.createElement($921a889cee6df7e8$export$99c2b779aa4e8b8b,{present:nt||at.open},at.disableHoverableContent?reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$1({side:rt},it,{ref:_})):reactExports.createElement($a093c7e1ec25a057$var$TooltipContentHoverable,_extends$1({side:rt},it,{ref:_})))}),$a093c7e1ec25a057$var$TooltipContentHoverable=reactExports.forwardRef((_e,_)=>{const tt=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,_e.__scopeTooltip),nt=$a093c7e1ec25a057$var$useTooltipProviderContext($a093c7e1ec25a057$var$CONTENT_NAME,_e.__scopeTooltip),rt=reactExports.useRef(null),it=$6ed0406888f73fc4$export$c7b2cbe3552a0d05(_,rt),[at,ot]=reactExports.useState(null),{trigger:st,onClose:lt}=tt,ct=rt.current,{onPointerInTransitChange:ut}=nt,ft=reactExports.useCallback(()=>{ot(null),ut(!1)},[ut]),pt=reactExports.useCallback((gt,xt)=>{const yt=gt.currentTarget,mt={x:gt.clientX,y:gt.clientY},At=$a093c7e1ec25a057$var$getExitSideFromRect(mt,yt.getBoundingClientRect()),vt=$a093c7e1ec25a057$var$getPaddedExitPoints(mt,At),Et=$a093c7e1ec25a057$var$getPointsFromRect(xt.getBoundingClientRect()),Ct=$a093c7e1ec25a057$var$getHull([...vt,...Et]);ot(Ct),ut(!0)},[ut]);return reactExports.useEffect(()=>()=>ft(),[ft]),reactExports.useEffect(()=>{if(st&&ct){const gt=yt=>pt(yt,ct),xt=yt=>pt(yt,st);return st.addEventListener("pointerleave",gt),ct.addEventListener("pointerleave",xt),()=>{st.removeEventListener("pointerleave",gt),ct.removeEventListener("pointerleave",xt)}}},[st,ct,pt,ft]),reactExports.useEffect(()=>{if(at){const gt=xt=>{const yt=xt.target,mt={x:xt.clientX,y:xt.clientY},At=(st==null?void 0:st.contains(yt))||(ct==null?void 0:ct.contains(yt)),vt=!$a093c7e1ec25a057$var$isPointInPolygon(mt,at);At?ft():vt&&(ft(),lt())};return document.addEventListener("pointermove",gt),()=>document.removeEventListener("pointermove",gt)}},[st,ct,at,lt,ft]),reactExports.createElement($a093c7e1ec25a057$var$TooltipContentImpl,_extends$1({},_e,{ref:it}))}),[$a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,$a093c7e1ec25a057$var$useVisuallyHiddenContentContext]=$a093c7e1ec25a057$var$createTooltipContext($a093c7e1ec25a057$var$TOOLTIP_NAME,{isInside:!1}),$a093c7e1ec25a057$var$TooltipContentImpl=reactExports.forwardRef((_e,_)=>{const{__scopeTooltip:tt,children:nt,"aria-label":rt,onEscapeKeyDown:it,onPointerDownOutside:at,...ot}=_e,st=$a093c7e1ec25a057$var$useTooltipContext($a093c7e1ec25a057$var$CONTENT_NAME,tt),lt=$a093c7e1ec25a057$var$usePopperScope(tt),{onClose:ct}=st;return reactExports.useEffect(()=>(document.addEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,ct),()=>document.removeEventListener($a093c7e1ec25a057$var$TOOLTIP_OPEN,ct)),[ct]),reactExports.useEffect(()=>{if(st.trigger){const ut=ft=>{const pt=ft.target;pt!=null&&pt.contains(st.trigger)&&ct()};return window.addEventListener("scroll",ut,{capture:!0}),()=>window.removeEventListener("scroll",ut,{capture:!0})}},[st.trigger,ct]),reactExports.createElement($5cb92bef7577960e$export$177fb62ff3ec1f22,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:it,onPointerDownOutside:at,onFocusOutside:ut=>ut.preventDefault(),onDismiss:ct},reactExports.createElement($cf1ac5d9fe0e8206$export$7c6e2c02157bb7d2,_extends$1({"data-state":st.stateAttribute},lt,ot,{ref:_,style:{...ot.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),reactExports.createElement($5e63c961fc1ce211$export$d9f1ccf0bdb05d45,null,nt),reactExports.createElement($a093c7e1ec25a057$var$VisuallyHiddenContentContextProvider,{scope:tt,isInside:!0},reactExports.createElement($ea1ef594cf570d83$export$be92b6f5f03c0fe9,{id:st.contentId,role:"tooltip"},rt||nt))))}),$a093c7e1ec25a057$var$ARROW_NAME="TooltipArrow",$a093c7e1ec25a057$export$c27ee0ad710f7559=reactExports.forwardRef((_e,_)=>{const{__scopeTooltip:tt,...nt}=_e,rt=$a093c7e1ec25a057$var$usePopperScope(tt);return $a093c7e1ec25a057$var$useVisuallyHiddenContentContext($a093c7e1ec25a057$var$ARROW_NAME,tt).isInside?null:reactExports.createElement($cf1ac5d9fe0e8206$export$21b07c8f274aebd5,_extends$1({},rt,nt,{ref:_}))});function $a093c7e1ec25a057$var$getExitSideFromRect(_e,_){const tt=Math.abs(_.top-_e.y),nt=Math.abs(_.bottom-_e.y),rt=Math.abs(_.right-_e.x),it=Math.abs(_.left-_e.x);switch(Math.min(tt,nt,rt,it)){case it:return"left";case rt:return"right";case tt:return"top";case nt:return"bottom";default:throw new Error("unreachable")}}function $a093c7e1ec25a057$var$getPaddedExitPoints(_e,_,tt=5){const nt=[];switch(_){case"top":nt.push({x:_e.x-tt,y:_e.y+tt},{x:_e.x+tt,y:_e.y+tt});break;case"bottom":nt.push({x:_e.x-tt,y:_e.y-tt},{x:_e.x+tt,y:_e.y-tt});break;case"left":nt.push({x:_e.x+tt,y:_e.y-tt},{x:_e.x+tt,y:_e.y+tt});break;case"right":nt.push({x:_e.x-tt,y:_e.y-tt},{x:_e.x-tt,y:_e.y+tt});break}return nt}function $a093c7e1ec25a057$var$getPointsFromRect(_e){const{top:_,right:tt,bottom:nt,left:rt}=_e;return[{x:rt,y:_},{x:tt,y:_},{x:tt,y:nt},{x:rt,y:nt}]}function $a093c7e1ec25a057$var$isPointInPolygon(_e,_){const{x:tt,y:nt}=_e;let rt=!1;for(let it=0,at=_.length-1;it<_.length;at=it++){const ot=_[it].x,st=_[it].y,lt=_[at].x,ct=_[at].y;st>nt!=ct>nt&&tt<(lt-ot)*(nt-st)/(ct-st)+ot&&(rt=!rt)}return rt}function $a093c7e1ec25a057$var$getHull(_e){const _=_e.slice();return _.sort((tt,nt)=>tt.x<nt.x?-1:tt.x>nt.x?1:tt.y<nt.y?-1:tt.y>nt.y?1:0),$a093c7e1ec25a057$var$getHullPresorted(_)}function $a093c7e1ec25a057$var$getHullPresorted(_e){if(_e.length<=1)return _e.slice();const _=[];for(let nt=0;nt<_e.length;nt++){const rt=_e[nt];for(;_.length>=2;){const it=_[_.length-1],at=_[_.length-2];if((it.x-at.x)*(rt.y-at.y)>=(it.y-at.y)*(rt.x-at.x))_.pop();else break}_.push(rt)}_.pop();const tt=[];for(let nt=_e.length-1;nt>=0;nt--){const rt=_e[nt];for(;tt.length>=2;){const it=tt[tt.length-1],at=tt[tt.length-2];if((it.x-at.x)*(rt.y-at.y)>=(it.y-at.y)*(rt.x-at.x))tt.pop();else break}tt.push(rt)}return tt.pop(),_.length===1&&tt.length===1&&_[0].x===tt[0].x&&_[0].y===tt[0].y?_:_.concat(tt)}const $a093c7e1ec25a057$export$be92b6f5f03c0fe9=$a093c7e1ec25a057$export$28c660c63b792dea,$a093c7e1ec25a057$export$41fb9f06171c75f4=$a093c7e1ec25a057$export$8c610744efcf8a1d,$a093c7e1ec25a057$export$7c6e2c02157bb7d2=$a093c7e1ec25a057$export$e9003e2be37ec060,$a093c7e1ec25a057$export$21b07c8f274aebd5=$a093c7e1ec25a057$export$c27ee0ad710f7559;function _objectWithoutPropertiesLoose$1(_e,_){if(_e==null)return{};var tt={},nt=Object.keys(_e),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(tt[rt]=_e[rt]);return tt}function _objectWithoutProperties$1(_e,_){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$1(_e,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,nt)&&(tt[nt]=_e[nt])}return tt}let LevaErrors;(function(_e){_e[_e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",_e[_e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",_e[_e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",_e[_e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",_e[_e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",_e[_e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",_e[_e.THEME_ERROR=6]="THEME_ERROR",_e[_e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",_e[_e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",_e[_e.EMPTY_KEY=9]="EMPTY_KEY"})(LevaErrors||(LevaErrors={}));const ErrorList={[LevaErrors.UNSUPPORTED_INPUT]:(_e,_)=>[`An input with type \`${_e}\` input was found at path \`${_}\` but it's not supported yet.`],[LevaErrors.NO_COMPONENT_FOR_TYPE]:(_e,_)=>[`Type \`${_e}\` found at path \`${_}\` can't be displayed in panel because no component supports it yet.`],[LevaErrors.UNKNOWN_INPUT]:(_e,_)=>[`input at path \`${_e}\` is not recognized.`,_],[LevaErrors.DUPLICATE_KEYS]:(_e,_,tt)=>[`Key \`${_e}\` of path \`${_}\` already exists at path \`${tt}\`. Even nested keys need to be unique. Rename one of the keys.`],[LevaErrors.ALREADY_REGISTERED_TYPE]:_e=>[`Type ${_e} has already been registered. You can't register a component with the same type.`],[LevaErrors.CLIPBOARD_ERROR]:_e=>["Error copying the value",_e],[LevaErrors.THEME_ERROR]:(_e,_)=>[`Error accessing the theme \`${_e}.${_}\` value.`],[LevaErrors.PATH_DOESNT_EXIST]:_e=>[`Error getting the value at path \`${_e}\`. There is probably an error in your \`render\` function.`],[LevaErrors.PATH_DOESNT_EXIST]:_e=>[`Error accessing the value at path \`${_e}\``],[LevaErrors.INPUT_TYPE_OVERRIDE]:(_e,_,tt)=>[`Input at path \`${_e}\` already exists with type: \`${_}\`. Its type cannot be overridden with type \`${tt}\`.`],[LevaErrors.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function _log(_e,_,...tt){const[nt,...rt]=ErrorList[_](...tt);console[_e]("LEVA: "+nt,...rt)}const warn=_log.bind(null,"warn"),log=_log.bind(null,"log"),_excluded$a=["value"],_excluded2$4=["schema"],_excluded3$1=["value"],Schemas=[],Plugins={};function getValueType(_e){let{value:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$a);for(let nt of Schemas){const rt=nt(_,tt);if(rt)return rt}}function register(_e,_){let{schema:tt}=_,nt=_objectWithoutProperties$1(_,_excluded2$4);if(_e in Plugins){warn(LevaErrors.ALREADY_REGISTERED_TYPE,_e);return}Schemas.push((rt,it)=>tt(rt,it)&&_e),Plugins[_e]=nt}function createInternalPlugin(_e){return _e}function normalize$3$1(_e,_,tt,nt){const{normalize:rt}=Plugins[_e];if(rt)return rt(_,tt,nt);if(typeof _!="object"||!("value"in _))return{value:_};const{value:it}=_,at=_objectWithoutProperties$1(_,_excluded3$1);return{value:it,settings:at}}function sanitize$4(_e,_,tt,nt,rt,it){const{sanitize:at}=Plugins[_e];return at?at(_,tt,nt,rt,it):_}function format$2(_e,_,tt){const{format:nt}=Plugins[_e];return nt?nt(_,tt):_}function _defineProperty$2(_e,_,tt){return _ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function ownKeys$2(_e,_){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread2(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$2(Object(tt),!0).forEach(function(nt){_defineProperty$2(_e,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$2(Object(tt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return _e}const clamp=(_e,_,tt)=>_e>tt?tt:_e<_?_:_e,parseNumber=_e=>{if(_e===""||typeof _e=="number")return _e;try{const _=evaluate(_e);if(!isNaN(_))return _}catch{}return parseFloat(_e)},log10=Math.log(10);function getStep(_e){let _=Math.abs(+String(_e).replace(".",""));if(_===0)return .01;for(;_!==0&&_%10===0;)_/=10;const tt=Math.floor(Math.log(_)/log10)+1,nt=Math.floor(Math.log10(Math.abs(_e))),rt=Math.pow(10,nt-tt);return Math.max(rt,.001)}const range=(_e,_,tt)=>tt===_?0:(clamp(_e,_,tt)-_)/(tt-_),invertedRange=(_e,_,tt)=>_e*(tt-_)+_,getUid=()=>"_"+Math.random().toString(36).substr(2,9),parens=/\(([0-9+\-*/^ .]+)\)/,exp=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,mul=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,div=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,add=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,sub=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function evaluate(_e){if(isNaN(Number(_e)))if(parens.test(_e)){const _=_e.replace(parens,(tt,nt)=>String(evaluate(nt)));return evaluate(_)}else if(exp.test(_e)){const _=_e.replace(exp,(tt,nt,rt)=>String(Math.pow(Number(nt),Number(rt))));return evaluate(_)}else if(mul.test(_e)){const _=_e.replace(mul,(tt,nt,rt)=>String(Number(nt)*Number(rt)));return evaluate(_)}else if(div.test(_e)){const _=_e.replace(div,(tt,nt,rt)=>{if(rt!=0)return String(Number(nt)/Number(rt));throw new Error("Division by zero")});return evaluate(_)}else if(add.test(_e)){const _=_e.replace(add,(tt,nt,rt)=>String(Number(nt)+Number(rt)));return evaluate(_)}else if(sub.test(_e)){const _=_e.replace(sub,(tt,nt,rt)=>String(Number(nt)-Number(rt)));return evaluate(_)}else return Number(_e);return Number(_e)}function omit(_e,_){const tt=_objectSpread2({},_e);return _.forEach(nt=>nt in _e&&delete tt[nt]),tt}function mapArrayToKeys(_e,_){return _e.reduce((tt,nt,rt)=>Object.assign(tt,{[_[rt]]:nt}),{})}function isObject$8(_e){return Object.prototype.toString.call(_e)==="[object Object]"}const isEmptyObject=_e=>isObject$8(_e)&&Object.keys(_e).length===0;let SpecialInputs;(function(_e){_e.BUTTON="BUTTON",_e.BUTTON_GROUP="BUTTON_GROUP",_e.MONITOR="MONITOR",_e.FOLDER="FOLDER"})(SpecialInputs||(SpecialInputs={}));let LevaInputs;(function(_e){_e.SELECT="SELECT",_e.IMAGE="IMAGE",_e.NUMBER="NUMBER",_e.COLOR="COLOR",_e.STRING="STRING",_e.BOOLEAN="BOOLEAN",_e.INTERVAL="INTERVAL",_e.VECTOR3D="VECTOR3D",_e.VECTOR2D="VECTOR2D"})(LevaInputs||(LevaInputs={}));const _excluded$9=["type","__customInput"],_excluded2$3=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],_excluded3$2=["type"];function parseOptions(_e,_,tt={},nt){var rt,it;if(typeof _e!="object"||Array.isArray(_e))return{type:nt,input:_e,options:_objectSpread2({key:_,label:_,optional:!1,disabled:!1,order:0},tt)};if("__customInput"in _e){const{type:Ct,__customInput:Tt}=_e,bt=_objectWithoutProperties$1(_e,_excluded$9);return parseOptions(Tt,_,bt,Ct)}const{render:at,label:ot,optional:st,order:lt=0,disabled:ct,hint:ut,onChange:ft,onEditStart:pt,onEditEnd:gt,transient:xt}=_e,yt=_objectWithoutProperties$1(_e,_excluded2$3),mt=_objectSpread2({render:at,key:_,label:ot??_,hint:ut,transient:xt??!!ft,onEditStart:pt,onEditEnd:gt,disabled:ct,optional:st,order:lt},tt);let{type:At}=yt,vt=_objectWithoutProperties$1(yt,_excluded3$2);if(At=nt??At,At in SpecialInputs)return{type:At,input:vt,options:mt};let Et;return nt&&isObject$8(vt)&&"value"in vt?Et=vt.value:Et=isEmptyObject(vt)?void 0:vt,{type:At,input:Et,options:_objectSpread2(_objectSpread2({},mt),{},{onChange:ft,optional:(rt=mt.optional)!==null&&rt!==void 0?rt:!1,disabled:(it=mt.disabled)!==null&&it!==void 0?it:!1})}}function normalizeInput(_e,_,tt,nt){const rt=parseOptions(_e,_),{type:it,input:at,options:ot}=rt;if(it)return it in SpecialInputs?rt:{type:it,input:normalize$3$1(it,at,tt,nt),options:ot};let st=getValueType(at);return st?{type:st,input:normalize$3$1(st,at,tt,nt),options:ot}:(st=getValueType({value:at}),st?{type:st,input:normalize$3$1(st,{value:at},tt,nt),options:ot}:!1)}function updateInput(_e,_,tt,nt,rt){const{value:it,type:at,settings:ot}=_e;_e.value=sanitizeValue({type:at,value:it,settings:ot},_,tt,nt),_e.fromPanel=rt}const ValueError=function _e(_,tt,nt){this.type="LEVA_ERROR",this.message="LEVA: "+_,this.previousValue=tt,this.error=nt};function sanitizeValue({type:_e,value:_,settings:tt},nt,rt,it){const at=_e!=="SELECT"&&typeof nt=="function"?nt(_):nt;let ot;try{ot=sanitize$4(_e,at,tt,_,rt,it)}catch(st){throw new ValueError(`The value \`${nt}\` did not result in a correct value.`,_,st)}return dequal(ot,_)?_:ot}const debounce=(_e,_,tt=!1)=>{let nt=0;return function(){const rt=arguments,it=tt&&!nt,at=()=>_e.apply(this,rt);window.clearTimeout(nt),nt=window.setTimeout(at,_),it&&at()}},multiplyStep=_e=>_e.shiftKey?5:_e.altKey?1/5:1,_excluded$8=["value"],_excluded2$2$1=["min","max"],schema$3=_e=>{if(typeof _e=="number")return!0;if(typeof _e=="string"){const _=parseFloat(_e);return isNaN(_)?!1:_e.substring((""+_).length).trim().length<4}return!1},sanitize$3=(_e,{min:_=-1/0,max:tt=1/0,suffix:nt})=>{const rt=parseFloat(_e);if(_e===""||isNaN(rt))throw Error("Invalid number");const it=clamp(rt,_,tt);return nt?it+nt:it},format$1$1=(_e,{pad:_=0,suffix:tt})=>{const nt=parseFloat(_e).toFixed(_);return tt?nt+tt:nt},normalize$2$1=_e=>{let{value:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$8);const{min:nt=-1/0,max:rt=1/0}=tt,it=_objectWithoutProperties$1(tt,_excluded2$2$1);let at=parseFloat(_);const ot=typeof _=="string"?_.substring((""+at).length):void 0;at=clamp(at,nt,rt);let st=tt.step;st||(Number.isFinite(nt)?Number.isFinite(rt)?st=+(Math.abs(rt-nt)/100).toPrecision(1):st=+(Math.abs(at-nt)/100).toPrecision(1):Number.isFinite(rt)&&(st=+(Math.abs(rt-at)/100).toPrecision(1)));const lt=st?getStep(st)*10:getStep(at);st=st||lt/10;const ct=Math.round(clamp(Math.log10(1/lt),0,2));return{value:ot?at+ot:at,settings:_objectSpread2({initialValue:at,step:st,pad:ct,min:nt,max:rt,suffix:ot},it)}},sanitizeStep$1=(_e,{step:_,initialValue:tt})=>{const nt=Math.round((_e-tt)/_);return tt+nt*_};var props$3=Object.freeze({__proto__:null,schema:schema$3,sanitize:sanitize$3,format:format$1$1,normalize:normalize$2$1,sanitizeStep:sanitizeStep$1});function _extends(){return _extends=Object.assign?Object.assign.bind():function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e},_extends.apply(this,arguments)}const InputContext=reactExports.createContext({});function useInputContext(){return reactExports.useContext(InputContext)}const ThemeContext=reactExports.createContext(null),StoreContext=reactExports.createContext(null),PanelSettingsContext=reactExports.createContext(null);function useStoreContext(){return reactExports.useContext(StoreContext)}function usePanelSettingsContext(){return reactExports.useContext(PanelSettingsContext)}const getDefaultTheme=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function createStateClass(_e,_){const[tt,nt]=_e.split(" "),rt={};return tt!=="none"&&(rt.boxShadow=`${_.inset?"inset ":""}0 0 0 $borderWidths${[_.key]} $colors${tt!=="default"&&tt||_.borderColor}`),nt&&(rt.backgroundColor=nt),rt}const utils={$inputStyle:()=>_e=>createStateClass(_e,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>_e=>createStateClass(_e,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>_e=>createStateClass(_e,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>_e=>createStateClass(_e,{key:"$active",borderColor:"$accent1",inset:!0})},{styled,css,createTheme,globalCss,keyframes}=q$1({prefix:"leva",theme:getDefaultTheme(),utils:_objectSpread2(_objectSpread2({},utils),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:_e=>({"&:focus":utils.$focusStyle()(_e)}),$focusWithin:_e=>({"&:focus-within":utils.$focusStyle()(_e)}),$hover:_e=>({"&:hover":utils.$hoverStyle()(_e)}),$active:_e=>({"&:active":utils.$activeStyle()(_e)})})}),globalStyles=globalCss({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function useTh(_e,_){const{theme:tt}=reactExports.useContext(ThemeContext);if(!(_e in tt)||!(_ in tt[_e]))return warn(LevaErrors.THEME_ERROR,_e,_),"";let nt=_;for(;;){let rt=tt[_e][nt];if(typeof rt=="string"&&rt.charAt(0)==="$")nt=rt.substr(1);else return rt}}const StyledInput=styled("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),InnerLabel=styled("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${StyledInput}`]:{paddingLeft:0}}),InnerNumberLabel=styled(InnerLabel,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),InputContainer=styled("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),_excluded$7$1=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],_excluded2$1$1=["onUpdate"];function ValueInput(_e){let{innerLabel:_,value:tt,onUpdate:nt,onChange:rt,onKeyDown:it,type:at,id:ot,inputType:st="text",rows:lt=0}=_e,ct=_objectWithoutProperties$1(_e,_excluded$7$1);const{id:ut,emitOnEditStart:ft,emitOnEditEnd:pt,disabled:gt}=useInputContext(),xt=ot||ut,yt=reactExports.useRef(null),mt=lt>0,At=mt?"textarea":"input",vt=reactExports.useCallback(Tt=>bt=>{const It=bt.currentTarget.value;Tt(It)},[]);React.useEffect(()=>{const Tt=yt.current,bt=vt(It=>{nt(It),pt()});return Tt==null||Tt.addEventListener("blur",bt),()=>Tt==null?void 0:Tt.removeEventListener("blur",bt)},[vt,nt,pt]);const Et=reactExports.useCallback(Tt=>{Tt.key==="Enter"&&vt(nt)(Tt)},[vt,nt]),Ct=Object.assign({as:At},mt?{rows:lt}:{},ct);return React.createElement(InputContainer,{textArea:mt},_&&typeof _=="string"?React.createElement(InnerLabel,null,_):_,React.createElement(StyledInput,_extends({levaType:at,ref:yt,id:xt,type:st,autoComplete:"off",spellCheck:"false",value:tt,onChange:vt(rt),onFocus:()=>ft(),onKeyPress:Et,onKeyDown:it,disabled:gt},Ct)))}function NumberInput(_e){let{onUpdate:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded2$1$1);const nt=reactExports.useCallback(it=>_(parseNumber(it)),[_]),rt=reactExports.useCallback(it=>{const at=it.key==="ArrowUp"?1:it.key==="ArrowDown"?-1:0;if(at){it.preventDefault();const ot=it.altKey?.1:it.shiftKey?10:1;_(st=>parseFloat(st)+at*ot)}},[_]);return React.createElement(ValueInput,_extends({},tt,{onUpdate:nt,onKeyDown:rt,type:"number"}))}const StyledFolder=styled("div",{}),StyledWrapper=styled("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),StyledTitle=styled("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${StyledWrapper}::after`]:{opacity:.6},[`${StyledFolder}:hover > & + ${StyledWrapper}::after`]:{opacity:.6},[`${StyledFolder}:hover > & > svg`]:{opacity:1}}),StyledContent=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${StyledFolder}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),StyledRow=styled("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${StyledContent} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),StyledInputRow=styled(StyledRow,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),CopyLabelContainer=styled("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),StyledOptionalToggle=styled("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),StyledLabel=styled("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),StyledInputWrapper$1=styled("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${StyledLabel}`]:{pointerEvents:"auto"}}}}}),Overlay=styled("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),StyledToolTipContent=styled("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),ToolTipArrow=styled($a093c7e1ec25a057$export$21b07c8f274aebd5,{fill:"$toolTipBackground"});function Portal({children:_e}){const{className:_}=reactExports.useContext(ThemeContext);return React.createElement($f1701beae083dbae$export$be92b6f5f03c0fe9,{className:_},_e)}const _excluded$6$1=["align"];function OptionalToggle(){const{id:_e,disable:_,disabled:tt}=useInputContext();return React.createElement(React.Fragment,null,React.createElement(StyledOptionalToggle,{id:_e+"__disable",type:"checkbox",checked:!tt,onChange:()=>_(!tt)}),React.createElement("label",{htmlFor:_e+"__disable"}))}function RawLabel(_e){const{id:_,optional:tt,hint:nt}=useInputContext(),rt=_e.htmlFor||(_?{htmlFor:_}:null),it=!nt&&typeof _e.children=="string"?{title:_e.children}:null;return React.createElement(React.Fragment,null,tt&&React.createElement(OptionalToggle,null),nt!==void 0?React.createElement($a093c7e1ec25a057$export$be92b6f5f03c0fe9,null,React.createElement($a093c7e1ec25a057$export$41fb9f06171c75f4,{asChild:!0},React.createElement(StyledLabel,_extends({},rt,_e))),React.createElement($a093c7e1ec25a057$export$7c6e2c02157bb7d2,{side:"top",sideOffset:2},React.createElement(StyledToolTipContent,null,nt,React.createElement(ToolTipArrow,null)))):React.createElement(StyledLabel,_extends({},rt,it,_e)))}function Label(_e){let{align:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$6$1);const{value:nt,label:rt,key:it,disabled:at}=useInputContext(),{hideCopyButton:ot}=usePanelSettingsContext(),st=!ot&&it!==void 0,[lt,ct]=reactExports.useState(!1),ut=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[it]:nt??""})),ct(!0)}catch{warn(LevaErrors.CLIPBOARD_ERROR,{[it]:nt})}};return React.createElement(CopyLabelContainer,{align:_,onPointerLeave:()=>ct(!1)},React.createElement(RawLabel,tt),st&&!at&&React.createElement("div",{title:`Click to copy ${typeof rt=="string"?rt:it} value`},lt?React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),React.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):React.createElement("svg",{onClick:ut,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),React.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const _excluded$5$1=["toggled"],Svg=styled("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Chevron(_e){let{toggled:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$5$1);return React.createElement(Svg,_extends({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${_?0:-90}deg)`}},tt),React.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const _excluded$4$1=["input"];function Row(_e){let{input:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$4$1);return _?React.createElement(StyledInputRow,tt):React.createElement(StyledRow,tt)}function useInputSetters({value:_e,type:_,settings:tt,setValue:nt}){const[rt,it]=reactExports.useState(format$2(_,_e,tt)),at=reactExports.useRef(_e),ot=reactExports.useRef(tt);ot.current=tt;const st=reactExports.useCallback(ct=>it(format$2(_,ct,ot.current)),[_]),lt=reactExports.useCallback(ct=>{try{nt(ct)}catch(ut){const{type:ft,previousValue:pt}=ut;if(ft!=="LEVA_ERROR")throw ut;st(pt)}},[st,nt]);return reactExports.useEffect(()=>{dequal(_e,at.current)||st(_e),at.current=_e},[_e,st]),{displayValue:rt,onChange:it,onUpdate:lt}}function useDrag(_e,_){const{emitOnEditStart:tt,emitOnEditEnd:nt}=useInputContext();return useDrag$1(rt=>{rt.first&&(document.body.classList.add("leva__panel__dragged"),tt==null||tt());const it=_e(rt);return rt.last&&(document.body.classList.remove("leva__panel__dragged"),nt==null||nt()),it},_)}function useCanvas2d(_e){const _=reactExports.useRef(null),tt=reactExports.useRef(null),nt=reactExports.useRef(!1);return reactExports.useEffect(()=>{const rt=debounce(()=>{_.current.width=_.current.offsetWidth*window.devicePixelRatio,_.current.height=_.current.offsetHeight*window.devicePixelRatio,_e(_.current,tt.current)},250);return window.addEventListener("resize",rt),nt.current||(rt(),nt.current=!0),()=>window.removeEventListener("resize",rt)},[_e]),reactExports.useEffect(()=>{tt.current=_.current.getContext("2d")},[]),[_,tt]}function useTransform(){const _e=reactExports.useRef(null),_=reactExports.useRef({x:0,y:0}),tt=reactExports.useCallback(nt=>{Object.assign(_.current,nt),_e.current&&(_e.current.style.transform=`translate3d(${_.current.x}px, ${_.current.y}px, 0)`)},[]);return[_e,tt]}const _excluded$3$1=["__refCount"],getInputAtPath=(_e,_)=>{if(!_e[_])return null;const tt=_e[_];return _objectWithoutProperties$1(tt,_excluded$3$1)};function useInput(_e){const _=useStoreContext(),[tt,nt]=reactExports.useState(getInputAtPath(_.getData(),_e)),rt=reactExports.useCallback(lt=>_.setValueAtPath(_e,lt,!0),[_e,_]),it=reactExports.useCallback(lt=>_.setSettingsAtPath(_e,lt),[_e,_]),at=reactExports.useCallback(lt=>_.disableInputAtPath(_e,lt),[_e,_]),ot=reactExports.useCallback(()=>_.emitOnEditStart(_e),[_e,_]),st=reactExports.useCallback(()=>_.emitOnEditEnd(_e),[_e,_]);return reactExports.useEffect(()=>{nt(getInputAtPath(_.getData(),_e));const lt=_.useStore.subscribe(ct=>getInputAtPath(ct.data,_e),nt,{equalityFn:shallow});return()=>lt()},[_,_e]),[tt,{set:rt,setSettings:it,disable:at,storeId:_.storeId,emitOnEditStart:ot,emitOnEditEnd:st}]}const RangeGrid=styled("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Range=styled("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Scrubber=styled("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),RangeWrapper=styled("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),Indicator=styled("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function RangeSlider({value:_e,min:_,max:tt,onDrag:nt,step:rt,initialValue:it}){const at=reactExports.useRef(null),ot=reactExports.useRef(null),st=reactExports.useRef(0),lt=useTh("sizes","scrubberWidth"),ct=useDrag(({event:ft,first:pt,xy:[gt],movement:[xt],memo:yt})=>{if(pt){const{width:At,left:vt}=at.current.getBoundingClientRect();st.current=At-parseFloat(lt),yt=(ft==null?void 0:ft.target)===ot.current?_e:invertedRange((gt-vt)/At,_,tt)}const mt=yt+invertedRange(xt/st.current,0,tt-_);return nt(sanitizeStep$1(mt,{step:rt,initialValue:it})),yt}),ut=range(_e,_,tt);return React.createElement(RangeWrapper,_extends({ref:at},ct()),React.createElement(Range,null,React.createElement(Indicator,{style:{left:0,right:`${(1-ut)*100}%`}})),React.createElement(Scrubber,{ref:ot,style:{left:`calc(${ut} * (100% - ${lt}))`}}))}const DraggableLabel=React.memo(({label:_e,onUpdate:_,step:tt,innerLabelTrim:nt})=>{const[rt,it]=reactExports.useState(!1),at=useDrag(({active:ot,delta:[st],event:lt,memo:ct=0})=>(it(ot),ct+=st/2,Math.abs(ct)>=1&&(_(ut=>parseFloat(ut)+Math.floor(ct)*tt*multiplyStep(lt)),ct=0),ct));return React.createElement(InnerNumberLabel,_extends({dragging:rt,title:_e.length>1?_e:""},at()),_e.slice(0,nt))});function Number$1({label:_e,id:_,displayValue:tt,onUpdate:nt,onChange:rt,settings:it,innerLabelTrim:at=1}){const ot=at>0&&React.createElement(DraggableLabel,{label:_e,step:it.step,onUpdate:nt,innerLabelTrim:at});return React.createElement(NumberInput,{id:_,value:String(tt),onUpdate:nt,onChange:rt,innerLabel:ot})}function NumberComponent(){const _e=useInputContext(),{label:_,value:tt,onUpdate:nt,settings:rt,id:it}=_e,{min:at,max:ot}=rt,st=ot!==1/0&&at!==-1/0;return React.createElement(Row,{input:!0},React.createElement(Label,null,_),React.createElement(RangeGrid,{hasRange:st},st&&React.createElement(RangeSlider,_extends({value:parseFloat(tt),onDrag:nt},rt)),React.createElement(Number$1,_extends({},_e,{id:it,label:"value",innerLabelTrim:st?0:1}))))}const{sanitizeStep}=props$3,rest=_objectWithoutProperties$1(props$3,["sanitizeStep"]);var number$1=_objectSpread2({component:NumberComponent},rest);const schema$2$1=(_e,_)=>v8n().schema({options:v8n().passesAnyOf(v8n().object(),v8n().array())}).test(_),sanitize$2$1=(_e,{values:_})=>{if(_.indexOf(_e)<0)throw Error("Selected value doesn't match Select options");return _e},format$3=(_e,{values:_})=>_.indexOf(_e),normalize$1$1=_e=>{let{value:_,options:tt}=_e,nt,rt;return Array.isArray(tt)?(rt=tt,nt=tt.map(it=>String(it))):(rt=Object.values(tt),nt=Object.keys(tt)),"value"in _e?rt.includes(_)||(nt.unshift(String(_)),rt.unshift(_)):_=rt[0],Object.values(tt).includes(_)||(tt[String(_)]=_),{value:_,settings:{keys:nt,values:rt}}};var props$2$1=Object.freeze({__proto__:null,schema:schema$2$1,sanitize:sanitize$2$1,format:format$3,normalize:normalize$1$1});const SelectContainer=styled("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),NativeSelect=styled("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),PresentationalSelect=styled("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${NativeSelect}:focus + &`]:{$focusStyle:""},[`${NativeSelect}:hover + &`]:{$hoverStyle:""}});function Select({displayValue:_e,value:_,onUpdate:tt,id:nt,settings:rt,disabled:it}){const{keys:at,values:ot}=rt,st=reactExports.useRef();return _===ot[_e]&&(st.current=at[_e]),React.createElement(SelectContainer,null,React.createElement(NativeSelect,{id:nt,value:_e,onChange:lt=>tt(ot[Number(lt.currentTarget.value)]),disabled:it},at.map((lt,ct)=>React.createElement("option",{key:lt,value:ct},lt))),React.createElement(PresentationalSelect,null,st.current),React.createElement(Chevron,{toggled:!0}))}function SelectComponent(){const{label:_e,value:_,displayValue:tt,onUpdate:nt,id:rt,disabled:it,settings:at}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Select,{id:rt,value:_,displayValue:tt,onUpdate:nt,settings:at,disabled:it}))}var select=_objectSpread2({component:SelectComponent},props$2$1);const schema$1$1=_e=>v8n().string().test(_e),sanitize$1$1=_e=>{if(typeof _e!="string")throw Error("Invalid string");return _e},normalize$4=({value:_e,editable:_=!0,rows:tt=!1})=>({value:_e,settings:{editable:_,rows:typeof tt=="number"?tt:tt?5:0}});var props$1$1=Object.freeze({__proto__:null,schema:schema$1$1,sanitize:sanitize$1$1,normalize:normalize$4});const _excluded$2=["displayValue","onUpdate","onChange","editable"],NonEditableString=styled("div",{whiteSpace:"pre-wrap"});function String$1(_e){let{displayValue:_,onUpdate:tt,onChange:nt,editable:rt=!0}=_e,it=_objectWithoutProperties$1(_e,_excluded$2);return rt?React.createElement(ValueInput,_extends({value:_,onUpdate:tt,onChange:nt},it)):React.createElement(NonEditableString,null,_)}function StringComponent(){const{label:_e,settings:_,displayValue:tt,onUpdate:nt,onChange:rt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(String$1,_extends({displayValue:tt,onUpdate:nt,onChange:rt},_)))}var string=_objectSpread2({component:StringComponent},props$1$1);const schema$4=_e=>v8n().boolean().test(_e),sanitize$5=_e=>{if(typeof _e!="boolean")throw Error("Invalid boolean");return _e};var props$4=Object.freeze({__proto__:null,schema:schema$4,sanitize:sanitize$5});const StyledInputWrapper=styled("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Boolean$1({value:_e,onUpdate:_,id:tt,disabled:nt}){return React.createElement(StyledInputWrapper,null,React.createElement("input",{id:tt,type:"checkbox",checked:_e,onChange:rt=>_(rt.currentTarget.checked),disabled:nt}),React.createElement("label",{htmlFor:tt},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function BooleanComponent(){const{label:_e,value:_,onUpdate:tt,disabled:nt,id:rt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Boolean$1,{value:_,onUpdate:tt,id:rt,disabled:nt}))}var boolean=_objectSpread2({component:BooleanComponent},props$4);const _excluded$1=["locked"];function Coordinate({value:_e,id:_,valueKey:tt,settings:nt,onUpdate:rt,innerLabelTrim:it}){const at=reactExports.useRef(_e[tt]);at.current=_e[tt];const ot=reactExports.useCallback(lt=>rt({[tt]:sanitizeValue({type:"NUMBER",value:at.current,settings:nt},lt)}),[rt,nt,tt]),st=useInputSetters({type:"NUMBER",value:_e[tt],settings:nt,setValue:ot});return React.createElement(Number$1,{id:_,label:tt,value:_e[tt],displayValue:st.displayValue,onUpdate:st.onUpdate,onChange:st.onChange,settings:nt,innerLabelTrim:it})}const Container$2=styled("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Lock(_e){let{locked:_}=_e,tt=_objectWithoutProperties$1(_e,_excluded$1);return React.createElement("svg",_extends({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt),_?React.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):React.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Vector({value:_e,onUpdate:_,settings:tt,innerLabelTrim:nt}){const{id:rt,setSettings:it}=useInputContext(),{lock:at,locked:ot}=tt;return React.createElement(Container$2,{withLock:at},at&&React.createElement(Lock,{locked:ot,onClick:()=>it({locked:!ot})}),Object.keys(_e).map((st,lt)=>React.createElement(Coordinate,{id:lt===0?rt:`${rt}.${st}`,key:st,valueKey:st,value:_e,settings:tt[st],onUpdate:_,innerLabelTrim:nt})))}const normalizeKeyedNumberSettings=(_e,_)=>{const tt={};let nt=0,rt=1/0;Object.entries(_e).forEach(([it,at])=>{tt[it]=normalize$2$1(_objectSpread2({value:at},_[it])).settings,nt=Math.max(nt,tt[it].step),rt=Math.min(rt,tt[it].pad)});for(let it in tt){const{step:at,min:ot,max:st}=_[it]||{};!isFinite(at)&&(!isFinite(ot)||!isFinite(st))&&(tt[it].step=nt,tt[it].pad=rt)}return tt},_excluded$b=["lock"],_excluded2$5=["value"];function getVectorSchema(_e){const _=v8n().array().length(_e).every.number(),tt=nt=>{if(!nt||typeof nt!="object")return!1;const rt=Object.values(nt);return rt.length===_e&&rt.every(it=>isFinite(it))};return nt=>_.test(nt)||tt(nt)}function getVectorType(_e){return Array.isArray(_e)?"array":"object"}function convert$1(_e,_,tt){return getVectorType(_e)===_?_e:_==="array"?Object.values(_e):mapArrayToKeys(_e,tt)}const sanitizeVector=(_e,_,tt)=>{const nt=convert$1(_e,"object",_.keys);for(let at in nt)nt[at]=sanitize$3(nt[at],_[at]);const rt=Object.keys(nt);let it={};if(rt.length===_.keys.length)it=nt;else{const at=convert$1(tt,"object",_.keys);if(rt.length===1&&_.locked){const ot=rt[0],st=nt[ot],lt=at[ot],ct=lt!==0?st/lt:1;for(let ut in at)ut===ot?it[ot]=st:it[ut]=at[ut]*ct}else it=_objectSpread2(_objectSpread2({},at),nt)}return convert$1(it,_.format,_.keys)},formatVector=(_e,_)=>convert$1(_e,"object",_.keys),isNumberSettings=_e=>!!_e&&("step"in _e||"min"in _e||"max"in _e);function normalizeVector(_e,_,tt=[]){const{lock:nt=!1}=_,rt=_objectWithoutProperties$1(_,_excluded$b),it=Array.isArray(_e)?"array":"object",at=it==="object"?Object.keys(_e):tt,ot=convert$1(_e,"object",at),st=isNumberSettings(rt)?at.reduce((ct,ut)=>Object.assign(ct,{[ut]:rt}),{}):rt,lt=normalizeKeyedNumberSettings(ot,st);return{value:it==="array"?_e:ot,settings:_objectSpread2(_objectSpread2({},lt),{},{format:it,keys:at,lock:nt,locked:!1})}}function getVectorPlugin(_e){return{schema:getVectorSchema(_e.length),normalize:_=>{let{value:tt}=_,nt=_objectWithoutProperties$1(_,_excluded2$5);return normalizeVector(tt,nt,_e)},format:(_,tt)=>formatVector(_,tt),sanitize:(_,tt,nt)=>sanitizeVector(_,tt,nt)}}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(_e){return typeof _e=="string"?_e.length>0:typeof _e=="number"},n=function(_e,_,tt){return _===void 0&&(_=0),tt===void 0&&(tt=Math.pow(10,_)),Math.round(tt*_e)/tt+0},e=function(_e,_,tt){return _===void 0&&(_=0),tt===void 0&&(tt=1),_e>tt?tt:_e>_?_e:_},u$1=function(_e){return(_e=isFinite(_e)?_e%360:0)>0?_e:_e+360},a=function(_e){return{r:e(_e.r,0,255),g:e(_e.g,0,255),b:e(_e.b,0,255),a:e(_e.a)}},o=function(_e){return{r:n(_e.r),g:n(_e.g),b:n(_e.b),a:n(_e.a,3)}},i$1=/^#([0-9a-f]{3,8})$/i,s$1=function(_e){var _=_e.toString(16);return _.length<2?"0"+_:_},h$1=function(_e){var _=_e.r,tt=_e.g,nt=_e.b,rt=_e.a,it=Math.max(_,tt,nt),at=it-Math.min(_,tt,nt),ot=at?it===_?(tt-nt)/at:it===tt?2+(nt-_)/at:4+(_-tt)/at:0;return{h:60*(ot<0?ot+6:ot),s:it?at/it*100:0,v:it/255*100,a:rt}},b$1=function(_e){var _=_e.h,tt=_e.s,nt=_e.v,rt=_e.a;_=_/360*6,tt/=100,nt/=100;var it=Math.floor(_),at=nt*(1-tt),ot=nt*(1-(_-it)*tt),st=nt*(1-(1-_+it)*tt),lt=it%6;return{r:255*[nt,ot,at,at,st,nt][lt],g:255*[st,nt,nt,ot,at,at][lt],b:255*[at,at,st,nt,nt,ot][lt],a:rt}},g$1=function(_e){return{h:u$1(_e.h),s:e(_e.s,0,100),l:e(_e.l,0,100),a:e(_e.a)}},d$1=function(_e){return{h:n(_e.h),s:n(_e.s),l:n(_e.l),a:n(_e.a,3)}},f$1=function(_e){return b$1((tt=(_=_e).s,{h:_.h,s:(tt*=((nt=_.l)<50?nt:100-nt)/100)>0?2*tt/(nt+tt)*100:0,v:nt+tt,a:_.a}));var _,tt,nt},c$1=function(_e){return{h:(_=h$1(_e)).h,s:(rt=(200-(tt=_.s))*(nt=_.v)/100)>0&&rt<200?tt*nt/100/(rt<=100?rt:200-rt)*100:0,l:rt/2,a:_.a};var _,tt,nt,rt},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y$1={string:[[function(_e){var _=i$1.exec(_e);return _?(_e=_[1]).length<=4?{r:parseInt(_e[0]+_e[0],16),g:parseInt(_e[1]+_e[1],16),b:parseInt(_e[2]+_e[2],16),a:_e.length===4?n(parseInt(_e[3]+_e[3],16)/255,2):1}:_e.length===6||_e.length===8?{r:parseInt(_e.substr(0,2),16),g:parseInt(_e.substr(2,2),16),b:parseInt(_e.substr(4,2),16),a:_e.length===8?n(parseInt(_e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(_e){var _=v$1.exec(_e)||m$1.exec(_e);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(_e){var _=l.exec(_e)||p$1.exec(_e);if(!_)return null;var tt,nt,rt=g$1({h:(tt=_[1],nt=_[2],nt===void 0&&(nt="deg"),Number(tt)*(r[nt]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f$1(rt)},"hsl"]],object:[[function(_e){var _=_e.r,tt=_e.g,nt=_e.b,rt=_e.a,it=rt===void 0?1:rt;return t(_)&&t(tt)&&t(nt)?a({r:Number(_),g:Number(tt),b:Number(nt),a:Number(it)}):null},"rgb"],[function(_e){var _=_e.h,tt=_e.s,nt=_e.l,rt=_e.a,it=rt===void 0?1:rt;if(!t(_)||!t(tt)||!t(nt))return null;var at=g$1({h:Number(_),s:Number(tt),l:Number(nt),a:Number(it)});return f$1(at)},"hsl"],[function(_e){var _=_e.h,tt=_e.s,nt=_e.v,rt=_e.a,it=rt===void 0?1:rt;if(!t(_)||!t(tt)||!t(nt))return null;var at=function(ot){return{h:u$1(ot.h),s:e(ot.s,0,100),v:e(ot.v,0,100),a:e(ot.a)}}({h:Number(_),s:Number(tt),v:Number(nt),a:Number(it)});return b$1(at)},"hsv"]]},N=function(_e,_){for(var tt=0;tt<_.length;tt++){var nt=_[tt][0](_e);if(nt)return[nt,_[tt][1]]}return[null,void 0]},x=function(_e){return typeof _e=="string"?N(_e.trim(),y$1.string):typeof _e=="object"&&_e!==null?N(_e,y$1.object):[null,void 0]},I$1=function(_e){return x(_e)[1]},M=function(_e,_){var tt=c$1(_e);return{h:tt.h,s:e(tt.s+100*_,0,100),l:tt.l,a:tt.a}},H=function(_e){return(299*_e.r+587*_e.g+114*_e.b)/1e3/255},$$1=function(_e,_){var tt=c$1(_e);return{h:tt.h,s:tt.s,l:e(tt.l+100*_,0,100),a:tt.a}},j=function(){function _e(_){this.parsed=x(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return _e.prototype.isValid=function(){return this.parsed!==null},_e.prototype.brightness=function(){return n(H(this.rgba),2)},_e.prototype.isDark=function(){return H(this.rgba)<.5},_e.prototype.isLight=function(){return H(this.rgba)>=.5},_e.prototype.toHex=function(){return _=o(this.rgba),tt=_.r,nt=_.g,rt=_.b,at=(it=_.a)<1?s$1(n(255*it)):"","#"+s$1(tt)+s$1(nt)+s$1(rt)+at;var _,tt,nt,rt,it,at},_e.prototype.toRgb=function(){return o(this.rgba)},_e.prototype.toRgbString=function(){return _=o(this.rgba),tt=_.r,nt=_.g,rt=_.b,(it=_.a)<1?"rgba("+tt+", "+nt+", "+rt+", "+it+")":"rgb("+tt+", "+nt+", "+rt+")";var _,tt,nt,rt,it},_e.prototype.toHsl=function(){return d$1(c$1(this.rgba))},_e.prototype.toHslString=function(){return _=d$1(c$1(this.rgba)),tt=_.h,nt=_.s,rt=_.l,(it=_.a)<1?"hsla("+tt+", "+nt+"%, "+rt+"%, "+it+")":"hsl("+tt+", "+nt+"%, "+rt+"%)";var _,tt,nt,rt,it},_e.prototype.toHsv=function(){return _=h$1(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},_e.prototype.invert=function(){return w({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},_e.prototype.saturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,_))},_e.prototype.desaturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,-_))},_e.prototype.grayscale=function(){return w(M(this.rgba,-1))},_e.prototype.lighten=function(_){return _===void 0&&(_=.1),w($$1(this.rgba,_))},_e.prototype.darken=function(_){return _===void 0&&(_=.1),w($$1(this.rgba,-_))},_e.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},_e.prototype.alpha=function(_){return typeof _=="number"?w({r:(tt=this.rgba).r,g:tt.g,b:tt.b,a:_}):n(this.rgba.a,3);var tt},_e.prototype.hue=function(_){var tt=c$1(this.rgba);return typeof _=="number"?w({h:_,s:tt.s,l:tt.l,a:tt.a}):n(tt.h)},_e.prototype.isEqual=function(_){return this.toHex()===w(_).toHex()},_e}(),w=function(_e){return _e instanceof j?_e:new j(_e)},S$1=[],k$1=function(_e){_e.forEach(function(_){S$1.indexOf(_)<0&&(_(j,y$1),S$1.push(_))})};function namesPlugin(_e,_){var tt={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},nt={};for(var rt in tt)nt[tt[rt]]=rt;var it={};_e.prototype.toName=function(at){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var ot,st,lt=nt[this.toHex()];if(lt)return lt;if(at!=null&&at.closest){var ct=this.toRgb(),ut=1/0,ft="black";if(!it.length)for(var pt in tt)it[pt]=new _e(tt[pt]).toRgb();for(var gt in tt){var xt=(ot=ct,st=it[gt],Math.pow(ot.r-st.r,2)+Math.pow(ot.g-st.g,2)+Math.pow(ot.b-st.b,2));xt<ut&&(ut=xt,ft=gt)}return ft}},_.string.push([function(at){var ot=at.toLowerCase(),st=ot==="transparent"?"#0000":tt[ot];return st?new _e(st).toRgb():null},"name"])}function u(){return(u=Object.assign||function(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(_e[nt]=tt[nt])}return _e}).apply(this,arguments)}function c(_e,_){if(_e==null)return{};var tt,nt,rt={},it=Object.keys(_e);for(nt=0;nt<it.length;nt++)_.indexOf(tt=it[nt])>=0||(rt[tt]=_e[tt]);return rt}function i(_e){var _=reactExports.useRef(_e),tt=reactExports.useRef(function(nt){_.current&&_.current(nt)});return _.current=_e,tt.current}var s=function(_e,_,tt){return _===void 0&&(_=0),tt===void 0&&(tt=1),_e>tt?tt:_e<_?_:_e},f=function(_e){return"touches"in _e},v=function(_e){return _e&&_e.ownerDocument.defaultView||self},d=function(_e,_,tt){var nt=_e.getBoundingClientRect(),rt=f(_)?function(it,at){for(var ot=0;ot<it.length;ot++)if(it[ot].identifier===at)return it[ot];return it[0]}(_.touches,tt):_;return{left:s((rt.pageX-(nt.left+v(_e).pageXOffset))/nt.width),top:s((rt.pageY-(nt.top+v(_e).pageYOffset))/nt.height)}},h=function(_e){!f(_e)&&_e.preventDefault()},m=React.memo(function(_e){var _=_e.onMove,tt=_e.onKey,nt=c(_e,["onMove","onKey"]),rt=reactExports.useRef(null),it=i(_),at=i(tt),ot=reactExports.useRef(null),st=reactExports.useRef(!1),lt=reactExports.useMemo(function(){var pt=function(yt){h(yt),(f(yt)?yt.touches.length>0:yt.buttons>0)&&rt.current?it(d(rt.current,yt,ot.current)):xt(!1)},gt=function(){return xt(!1)};function xt(yt){var mt=st.current,At=v(rt.current),vt=yt?At.addEventListener:At.removeEventListener;vt(mt?"touchmove":"mousemove",pt),vt(mt?"touchend":"mouseup",gt)}return[function(yt){var mt=yt.nativeEvent,At=rt.current;if(At&&(h(mt),!function(Et,Ct){return Ct&&!f(Et)}(mt,st.current)&&At)){if(f(mt)){st.current=!0;var vt=mt.changedTouches||[];vt.length&&(ot.current=vt[0].identifier)}At.focus(),it(d(At,mt,ot.current)),xt(!0)}},function(yt){var mt=yt.which||yt.keyCode;mt<37||mt>40||(yt.preventDefault(),at({left:mt===39?.05:mt===37?-.05:0,top:mt===40?.05:mt===38?-.05:0}))},xt]},[at,it]),ct=lt[0],ut=lt[1],ft=lt[2];return reactExports.useEffect(function(){return ft},[ft]),React.createElement("div",u({},nt,{onTouchStart:ct,onMouseDown:ct,className:"react-colorful__interactive",ref:rt,onKeyDown:ut,tabIndex:0,role:"slider"}))}),g=function(_e){return _e.filter(Boolean).join(" ")},p=function(_e){var _=_e.color,tt=_e.left,nt=_e.top,rt=nt===void 0?.5:nt,it=g(["react-colorful__pointer",_e.className]);return React.createElement("div",{className:it,style:{top:100*rt+"%",left:100*tt+"%"}},React.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:_}}))},b=function(_e,_,tt){return _===void 0&&(_=0),tt===void 0&&(tt=Math.pow(10,_)),Math.round(tt*_e)/tt},y=function(_e){var _=_e.s,tt=_e.v,nt=_e.a,rt=(200-_)*tt/100;return{h:b(_e.h),s:b(rt>0&&rt<200?_*tt/100/(rt<=100?rt:200-rt)*100:0),l:b(rt/2),a:b(nt,2)}},q=function(_e){var _=y(_e);return"hsl("+_.h+", "+_.s+"%, "+_.l+"%)"},k=function(_e){var _=y(_e);return"hsla("+_.h+", "+_.s+"%, "+_.l+"%, "+_.a+")"},I=function(_e){var _=_e.h,tt=_e.s,nt=_e.v,rt=_e.a;_=_/360*6,tt/=100,nt/=100;var it=Math.floor(_),at=nt*(1-tt),ot=nt*(1-(_-it)*tt),st=nt*(1-(1-_+it)*tt),lt=it%6;return{r:b(255*[nt,ot,at,at,st,nt][lt]),g:b(255*[st,nt,nt,ot,at,at][lt]),b:b(255*[at,at,st,nt,nt,ot][lt]),a:b(rt,2)}},L=function(_e){var _=_e.r,tt=_e.g,nt=_e.b,rt=_e.a,it=Math.max(_,tt,nt),at=it-Math.min(_,tt,nt),ot=at?it===_?(tt-nt)/at:it===tt?2+(nt-_)/at:4+(_-tt)/at:0;return{h:b(60*(ot<0?ot+6:ot)),s:b(it?at/it*100:0),v:b(it/255*100),a:rt}},S=React.memo(function(_e){var _=_e.hue,tt=_e.onChange,nt=g(["react-colorful__hue",_e.className]);return React.createElement("div",{className:nt},React.createElement(m,{onMove:function(rt){tt({h:360*rt.left})},onKey:function(rt){tt({h:s(_+360*rt.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(_),"aria-valuemax":"360","aria-valuemin":"0"},React.createElement(p,{className:"react-colorful__hue-pointer",left:_/360,color:q({h:_,s:100,v:100,a:1})})))}),T=React.memo(function(_e){var _=_e.hsva,tt=_e.onChange,nt={backgroundColor:q({h:_.h,s:100,v:100,a:1})};return React.createElement("div",{className:"react-colorful__saturation",style:nt},React.createElement(m,{onMove:function(rt){tt({s:100*rt.left,v:100-100*rt.top})},onKey:function(rt){tt({s:s(_.s+100*rt.left,0,100),v:s(_.v-100*rt.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(_.s)+"%, Brightness "+b(_.v)+"%"},React.createElement(p,{className:"react-colorful__saturation-pointer",top:1-_.v/100,left:_.s/100,color:q(_)})))}),F=function(_e,_){if(_e===_)return!0;for(var tt in _e)if(_e[tt]!==_[tt])return!1;return!0};function Y(_e,_,tt){var nt=i(tt),rt=reactExports.useState(function(){return _e.toHsva(_)}),it=rt[0],at=rt[1],ot=reactExports.useRef({color:_,hsva:it});reactExports.useEffect(function(){if(!_e.equal(_,ot.current.color)){var lt=_e.toHsva(_);ot.current={hsva:lt,color:_},at(lt)}},[_,_e]),reactExports.useEffect(function(){var lt;F(it,ot.current.hsva)||_e.equal(lt=_e.fromHsva(it),ot.current.color)||(ot.current={hsva:it,color:lt},nt(lt))},[it,_e,nt]);var st=reactExports.useCallback(function(lt){at(function(ct){return Object.assign({},ct,lt)})},[]);return[it,st]}var V=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,$=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},J=new Map,Q=function(_e){V(function(){var _=_e.current?_e.current.ownerDocument:document;if(_!==void 0&&!J.has(_)){var tt=_.createElement("style");tt.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,J.set(_,tt);var nt=$();nt&&tt.setAttribute("nonce",nt),_.head.appendChild(tt)}},[])},U=function(_e){var _=_e.className,tt=_e.colorModel,nt=_e.color,rt=nt===void 0?tt.defaultColor:nt,it=_e.onChange,at=c(_e,["className","colorModel","color","onChange"]),ot=reactExports.useRef(null);Q(ot);var st=Y(tt,rt,it),lt=st[0],ct=st[1],ut=g(["react-colorful",_]);return React.createElement("div",u({},at,{ref:ot,className:ut}),React.createElement(T,{hsva:lt,onChange:ct}),React.createElement(S,{hue:lt.h,onChange:ct,className:"react-colorful__last-control"}))},ee=function(_e){var _=_e.className,tt=_e.hsva,nt=_e.onChange,rt={backgroundImage:"linear-gradient(90deg, "+k(Object.assign({},tt,{a:0}))+", "+k(Object.assign({},tt,{a:1}))+")"},it=g(["react-colorful__alpha",_]),at=b(100*tt.a);return React.createElement("div",{className:it},React.createElement("div",{className:"react-colorful__alpha-gradient",style:rt}),React.createElement(m,{onMove:function(ot){nt({a:ot.left})},onKey:function(ot){nt({a:s(tt.a+ot.left)})},"aria-label":"Alpha","aria-valuetext":at+"%","aria-valuenow":at,"aria-valuemin":"0","aria-valuemax":"100"},React.createElement(p,{className:"react-colorful__alpha-pointer",left:tt.a,color:k(tt)})))},re=function(_e){var _=_e.className,tt=_e.colorModel,nt=_e.color,rt=nt===void 0?tt.defaultColor:nt,it=_e.onChange,at=c(_e,["className","colorModel","color","onChange"]),ot=reactExports.useRef(null);Q(ot);var st=Y(tt,rt,it),lt=st[0],ct=st[1],ut=g(["react-colorful",_]);return React.createElement("div",u({},at,{ref:ot,className:ut}),React.createElement(T,{hsva:lt,onChange:ct}),React.createElement(S,{hue:lt.h,onChange:ct}),React.createElement(ee,{hsva:lt,onChange:ct,className:"react-colorful__last-control"}))},xe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(_e){return React.createElement(re,u({},_e,{colorModel:xe}))},Me={defaultColor:{r:0,g:0,b:0},toHsva:function(_e){return L({r:_e.r,g:_e.g,b:_e.b,a:1})},fromHsva:function(_e){return{r:(_=I(_e)).r,g:_.g,b:_.b};var _},equal:F},Ne=function(_e){return React.createElement(U,u({},_e,{colorModel:Me}))};function __awaiter(_e,_,tt,nt){function rt(it){return it instanceof tt?it:new tt(function(at){at(it)})}return new(tt||(tt=Promise))(function(it,at){function ot(ct){try{lt(nt.next(ct))}catch(ut){at(ut)}}function st(ct){try{lt(nt.throw(ct))}catch(ut){at(ut)}}function lt(ct){ct.done?it(ct.value):rt(ct.value).then(ot,st)}lt((nt=nt.apply(_e,_||[])).next())})}function __generator(_e,_){var tt={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},nt,rt,it,at;return at={next:ot(0),throw:ot(1),return:ot(2)},typeof Symbol=="function"&&(at[Symbol.iterator]=function(){return this}),at;function ot(lt){return function(ct){return st([lt,ct])}}function st(lt){if(nt)throw new TypeError("Generator is already executing.");for(;at&&(at=0,lt[0]&&(tt=0)),tt;)try{if(nt=1,rt&&(it=lt[0]&2?rt.return:lt[0]?rt.throw||((it=rt.return)&&it.call(rt),0):rt.next)&&!(it=it.call(rt,lt[1])).done)return it;switch(rt=0,it&&(lt=[lt[0]&2,it.value]),lt[0]){case 0:case 1:it=lt;break;case 4:return tt.label++,{value:lt[1],done:!1};case 5:tt.label++,rt=lt[1],lt=[0];continue;case 7:lt=tt.ops.pop(),tt.trys.pop();continue;default:if(it=tt.trys,!(it=it.length>0&&it[it.length-1])&&(lt[0]===6||lt[0]===2)){tt=0;continue}if(lt[0]===3&&(!it||lt[1]>it[0]&&lt[1]<it[3])){tt.label=lt[1];break}if(lt[0]===6&&tt.label<it[1]){tt.label=it[1],it=lt;break}if(it&&tt.label<it[2]){tt.label=it[2],tt.ops.push(lt);break}it[2]&&tt.ops.pop(),tt.trys.pop();continue}lt=_.call(_e,tt)}catch(ct){lt=[6,ct],rt=0}finally{nt=it=0}if(lt[0]&5)throw lt[1];return{value:lt[0]?lt[1]:void 0,done:!0}}}function __read(_e,_){var tt=typeof Symbol=="function"&&_e[Symbol.iterator];if(!tt)return _e;var nt=tt.call(_e),rt,it=[],at;try{for(;(_===void 0||_-- >0)&&!(rt=nt.next()).done;)it.push(rt.value)}catch(ot){at={error:ot}}finally{try{rt&&!rt.done&&(tt=nt.return)&&tt.call(nt)}finally{if(at)throw at.error}}return it}function __spread(){for(var _e=[],_=0;_<arguments.length;_++)_e=_e.concat(__read(arguments[_]));return _e}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(_e,_){var tt=withMimeType(_e);if(typeof tt.path!="string"){var nt=_e.webkitRelativePath;Object.defineProperty(tt,"path",{value:typeof _=="string"?_:typeof nt=="string"&&nt.length>0?nt:_e.name,writable:!1,configurable:!1,enumerable:!0})}return tt}function withMimeType(_e){var _=_e.name,tt=_&&_.lastIndexOf(".")!==-1;if(tt&&!_e.type){var nt=_.split(".").pop().toLowerCase(),rt=COMMON_MIME_TYPES.get(nt);rt&&Object.defineProperty(_e,"type",{value:rt,writable:!1,configurable:!1,enumerable:!0})}return _e}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(_e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return isObject$7(_e)&&isDataTransfer(_e)?[2,getDataTransferFiles(_e.dataTransfer,_e.type)]:isChangeEvt(_e)?[2,getInputFiles(_e)]:Array.isArray(_e)&&_e.every(function(tt){return"getFile"in tt&&typeof tt.getFile=="function"})?[2,getFsHandleFiles(_e)]:[2,[]]})})}function isDataTransfer(_e){return isObject$7(_e.dataTransfer)}function isChangeEvt(_e){return isObject$7(_e)&&isObject$7(_e.target)}function isObject$7(_e){return typeof _e=="object"&&_e!==null}function getInputFiles(_e){return fromList(_e.target.files).map(function(_){return toFileWithPath(_)})}function getFsHandleFiles(_e){return __awaiter(this,void 0,void 0,function(){var _;return __generator(this,function(tt){switch(tt.label){case 0:return[4,Promise.all(_e.map(function(nt){return nt.getFile()}))];case 1:return _=tt.sent(),[2,_.map(function(nt){return toFileWithPath(nt)})]}})})}function getDataTransferFiles(_e,_){return __awaiter(this,void 0,void 0,function(){var tt,nt;return __generator(this,function(rt){switch(rt.label){case 0:return _e===null?[2,[]]:_e.items?(tt=fromList(_e.items).filter(function(it){return it.kind==="file"}),_!=="drop"?[2,tt]:[4,Promise.all(tt.map(toFilePromises))]):[3,2];case 1:return nt=rt.sent(),[2,noIgnoredFiles(flatten(nt))];case 2:return[2,noIgnoredFiles(fromList(_e.files).map(function(it){return toFileWithPath(it)}))]}})})}function noIgnoredFiles(_e){return _e.filter(function(_){return FILES_TO_IGNORE.indexOf(_.name)===-1})}function fromList(_e){if(_e===null)return[];for(var _=[],tt=0;tt<_e.length;tt++){var nt=_e[tt];_.push(nt)}return _}function toFilePromises(_e){if(typeof _e.webkitGetAsEntry!="function")return fromDataTransferItem(_e);var _=_e.webkitGetAsEntry();return _&&_.isDirectory?fromDirEntry(_):fromDataTransferItem(_e)}function flatten(_e){return _e.reduce(function(_,tt){return __spread(_,Array.isArray(tt)?flatten(tt):[tt])},[])}function fromDataTransferItem(_e){var _=_e.getAsFile();if(!_)return Promise.reject(_e+" is not a File");var tt=toFileWithPath(_);return Promise.resolve(tt)}function fromEntry(_e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return[2,_e.isDirectory?fromDirEntry(_e):fromFileEntry(_e)]})})}function fromDirEntry(_e){var _=_e.createReader();return new Promise(function(tt,nt){var rt=[];function it(){var at=this;_.readEntries(function(ot){return __awaiter(at,void 0,void 0,function(){var st,lt,ct;return __generator(this,function(ut){switch(ut.label){case 0:if(ot.length)return[3,5];ut.label=1;case 1:return ut.trys.push([1,3,,4]),[4,Promise.all(rt)];case 2:return st=ut.sent(),tt(st),[3,4];case 3:return lt=ut.sent(),nt(lt),[3,4];case 4:return[3,6];case 5:ct=Promise.all(ot.map(fromEntry)),rt.push(ct),it(),ut.label=6;case 6:return[2]}})})},function(ot){nt(ot)})}it()})}function fromFileEntry(_e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return[2,new Promise(function(tt,nt){_e.file(function(rt){var it=toFileWithPath(rt,_e.fullPath);tt(it)},function(rt){nt(rt)})})]})})}var _default=function(_e,_){if(_e&&_){var tt=Array.isArray(_)?_:_.split(","),nt=_e.name||"",rt=(_e.type||"").toLowerCase(),it=rt.replace(/\/.*$/,"");return tt.some(function(at){var ot=at.trim().toLowerCase();return ot.charAt(0)==="."?nt.toLowerCase().endsWith(ot):ot.endsWith("/*")?it===ot.replace(/\/.*$/,""):rt===ot})}return!0};function ownKeys$1(_e,_){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread$1(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_]!=null?arguments[_]:{};_%2?ownKeys$1(Object(tt),!0).forEach(function(nt){_defineProperty$1(_e,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$1(Object(tt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return _e}function _defineProperty$1(_e,_,tt){return _ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function _slicedToArray$1(_e,_){return _arrayWithHoles$1(_e)||_iterableToArrayLimit$1(_e,_)||_unsupportedIterableToArray$1(_e,_)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray$1(_e,_);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$1(_e,_)}}function _arrayLikeToArray$1(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var tt=0,nt=new Array(_);tt<_;tt++)nt[tt]=_e[tt];return nt}function _iterableToArrayLimit$1(_e,_){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var nt=[],rt=!0,it=!1,at,ot;try{for(tt=tt.call(_e);!(rt=(at=tt.next()).done)&&(nt.push(at.value),!(_&&nt.length===_));rt=!0);}catch(st){it=!0,ot=st}finally{try{!rt&&tt.return!=null&&tt.return()}finally{if(it)throw ot}}return nt}}function _arrayWithHoles$1(_e){if(Array.isArray(_e))return _e}var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function _e(_){_=Array.isArray(_)&&_.length===1?_[0]:_;var tt=Array.isArray(_)?"one of ".concat(_.join(", ")):_;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(tt)}},getTooLargeRejectionErr=function _e(_){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(_," ").concat(_===1?"byte":"bytes")}},getTooSmallRejectionErr=function _e(_){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(_," ").concat(_===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(_e,_){var tt=_e.type==="application/x-moz-file"||_default(_e,_);return[tt,tt?null:getInvalidTypeRejectionErr(_)]}function fileMatchSize(_e,_,tt){if(isDefined(_e.size))if(isDefined(_)&&isDefined(tt)){if(_e.size>tt)return[!1,getTooLargeRejectionErr(tt)];if(_e.size<_)return[!1,getTooSmallRejectionErr(_)]}else{if(isDefined(_)&&_e.size<_)return[!1,getTooSmallRejectionErr(_)];if(isDefined(tt)&&_e.size>tt)return[!1,getTooLargeRejectionErr(tt)]}return[!0,null]}function isDefined(_e){return _e!=null}function allFilesAccepted(_e){var _=_e.files,tt=_e.accept,nt=_e.minSize,rt=_e.maxSize,it=_e.multiple,at=_e.maxFiles;return!it&&_.length>1||it&&at>=1&&_.length>at?!1:_.every(function(ot){var st=fileAccepted(ot,tt),lt=_slicedToArray$1(st,1),ct=lt[0],ut=fileMatchSize(ot,nt,rt),ft=_slicedToArray$1(ut,1),pt=ft[0];return ct&&pt})}function isPropagationStopped(_e){return typeof _e.isPropagationStopped=="function"?_e.isPropagationStopped():typeof _e.cancelBubble<"u"?_e.cancelBubble:!1}function isEvtWithFiles(_e){return _e.dataTransfer?Array.prototype.some.call(_e.dataTransfer.types,function(_){return _==="Files"||_==="application/x-moz-file"}):!!_e.target&&!!_e.target.files}function onDocumentDragOver(_e){_e.preventDefault()}function isIe(_e){return _e.indexOf("MSIE")!==-1||_e.indexOf("Trident/")!==-1}function isEdge(_e){return _e.indexOf("Edge/")!==-1}function isIeOrEdge(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(_e)||isEdge(_e)}function composeEventHandlers(){for(var _e=arguments.length,_=new Array(_e),tt=0;tt<_e;tt++)_[tt]=arguments[tt];return function(nt){for(var rt=arguments.length,it=new Array(rt>1?rt-1:0),at=1;at<rt;at++)it[at-1]=arguments[at];return _.some(function(ot){return!isPropagationStopped(nt)&&ot&&ot.apply(void 0,[nt].concat(it)),isPropagationStopped(nt)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function filePickerOptionsTypes(_e){return _e=typeof _e=="string"?_e.split(","):_e,[{description:"everything",accept:Array.isArray(_e)?_e.filter(function(_){return _==="audio/*"||_==="video/*"||_==="image/*"||_==="text/*"||/\w+\/[-+.\w]+/g.test(_)}).reduce(function(_,tt){return _objectSpread$1(_objectSpread$1({},_),{},_defineProperty$1({},tt,[]))},{}):{}}]}function isAbort(_e){return _e instanceof DOMException&&(_e.name==="AbortError"||_e.code===_e.ABORT_ERR)}function isSecurityError(_e){return _e instanceof DOMException&&(_e.name==="SecurityError"||_e.code===_e.SECURITY_ERR)}var _excluded=["children"],_excluded2$2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(_e){return _arrayWithoutHoles(_e)||_iterableToArray(_e)||_unsupportedIterableToArray(_e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles(_e){if(Array.isArray(_e))return _arrayLikeToArray(_e)}function _slicedToArray(_e,_){return _arrayWithHoles(_e)||_iterableToArrayLimit(_e,_)||_unsupportedIterableToArray(_e,_)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(_e,_){if(_e){if(typeof _e=="string")return _arrayLikeToArray(_e,_);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray(_e,_)}}function _arrayLikeToArray(_e,_){(_==null||_>_e.length)&&(_=_e.length);for(var tt=0,nt=new Array(_);tt<_;tt++)nt[tt]=_e[tt];return nt}function _iterableToArrayLimit(_e,_){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var nt=[],rt=!0,it=!1,at,ot;try{for(tt=tt.call(_e);!(rt=(at=tt.next()).done)&&(nt.push(at.value),!(_&&nt.length===_));rt=!0);}catch(st){it=!0,ot=st}finally{try{!rt&&tt.return!=null&&tt.return()}finally{if(it)throw ot}}return nt}}function _arrayWithHoles(_e){if(Array.isArray(_e))return _e}function ownKeys(_e,_){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(_e);_&&(nt=nt.filter(function(rt){return Object.getOwnPropertyDescriptor(_e,rt).enumerable})),tt.push.apply(tt,nt)}return tt}function _objectSpread(_e){for(var _=1;_<arguments.length;_++){var tt=arguments[_]!=null?arguments[_]:{};_%2?ownKeys(Object(tt),!0).forEach(function(nt){_defineProperty(_e,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys(Object(tt)).forEach(function(nt){Object.defineProperty(_e,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return _e}function _defineProperty(_e,_,tt){return _ in _e?Object.defineProperty(_e,_,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[_]=tt,_e}function _objectWithoutProperties(_e,_){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose(_e,_),nt,rt;if(Object.getOwnPropertySymbols){var it=Object.getOwnPropertySymbols(_e);for(rt=0;rt<it.length;rt++)nt=it[rt],!(_.indexOf(nt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,nt)&&(tt[nt]=_e[nt])}return tt}function _objectWithoutPropertiesLoose(_e,_){if(_e==null)return{};var tt={},nt=Object.keys(_e),rt,it;for(it=0;it<nt.length;it++)rt=nt[it],!(_.indexOf(rt)>=0)&&(tt[rt]=_e[rt]);return tt}var Dropzone=reactExports.forwardRef(function(_e,_){var tt=_e.children,nt=_objectWithoutProperties(_e,_excluded),rt=useDropzone(nt),it=rt.open,at=_objectWithoutProperties(rt,_excluded2$2);return reactExports.useImperativeHandle(_,function(){return{open:it}},[it]),React.createElement(reactExports.Fragment,null,tt(_objectSpread(_objectSpread({},at),{},{open:it})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function useDropzone(){var _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=_objectSpread(_objectSpread({},defaultProps),_e),tt=_.accept,nt=_.disabled,rt=_.getFilesFromEvent,it=_.maxSize,at=_.minSize,ot=_.multiple,st=_.maxFiles,lt=_.onDragEnter,ct=_.onDragLeave,ut=_.onDragOver,ft=_.onDrop,pt=_.onDropAccepted,gt=_.onDropRejected,xt=_.onFileDialogCancel,yt=_.onFileDialogOpen,mt=_.useFsAccessApi,At=_.preventDropOnDocument,vt=_.noClick,Et=_.noKeyboard,Ct=_.noDrag,Tt=_.noDragEventsBubbling,bt=_.validator,It=reactExports.useMemo(function(){return typeof yt=="function"?yt:noop},[yt]),wt=reactExports.useMemo(function(){return typeof xt=="function"?xt:noop},[xt]),Rt=reactExports.useRef(null),Ft=reactExports.useRef(null),Ut=reactExports.useReducer(reducer,initialState),Gt=_slicedToArray(Ut,2),Ht=Gt[0],jt=Gt[1],Xt=Ht.isFocused,Jt=Ht.isFileDialogActive,Dt=Ht.draggedFiles,zt=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&mt&&canUseFileSystemAccessAPI()),$t=function(){!zt.current&&Jt&&setTimeout(function(){if(Ft.current){var kt=Ft.current.files;kt.length||(jt({type:"closeDialog"}),wt())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",$t,!1),function(){window.removeEventListener("focus",$t,!1)}},[Ft,Jt,wt,zt]);var Lt=reactExports.useRef([]),Vt=function(kt){Rt.current&&Rt.current.contains(kt.target)||(kt.preventDefault(),Lt.current=[])};reactExports.useEffect(function(){return At&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",Vt,!1)),function(){At&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",Vt))}},[Rt,At]);var tn=reactExports.useCallback(function(Nt){Nt.preventDefault(),Nt.persist(),mn(Nt),Lt.current=[].concat(_toConsumableArray(Lt.current),[Nt.target]),isEvtWithFiles(Nt)&&Promise.resolve(rt(Nt)).then(function(kt){isPropagationStopped(Nt)&&!Tt||(jt({draggedFiles:kt,isDragActive:!0,type:"setDraggedFiles"}),lt&&lt(Nt))})},[rt,lt,Tt]),an=reactExports.useCallback(function(Nt){Nt.preventDefault(),Nt.persist(),mn(Nt);var kt=isEvtWithFiles(Nt);if(kt&&Nt.dataTransfer)try{Nt.dataTransfer.dropEffect="copy"}catch{}return kt&&ut&&ut(Nt),!1},[ut,Tt]),on=reactExports.useCallback(function(Nt){Nt.preventDefault(),Nt.persist(),mn(Nt);var kt=Lt.current.filter(function(Mn){return Rt.current&&Rt.current.contains(Mn)}),rn=kt.indexOf(Nt.target);rn!==-1&&kt.splice(rn,1),Lt.current=kt,!(kt.length>0)&&(jt({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),isEvtWithFiles(Nt)&&ct&&ct(Nt))},[Rt,ct,Tt]),sn=reactExports.useCallback(function(Nt,kt){var rn=[],Mn=[];Nt.forEach(function(wn){var Tn=fileAccepted(wn,tt),Gn=_slicedToArray(Tn,2),Un=Gn[0],dn=Gn[1],Vn=fileMatchSize(wn,at,it),Qn=_slicedToArray(Vn,2),Nn=Qn[0],kn=Qn[1],$n=bt?bt(wn):null;if(Un&&Nn&&!$n)rn.push(wn);else{var Yn=[dn,kn];$n&&(Yn=Yn.concat($n)),Mn.push({file:wn,errors:Yn.filter(function(tr){return tr})})}}),(!ot&&rn.length>1||ot&&st>=1&&rn.length>st)&&(rn.forEach(function(wn){Mn.push({file:wn,errors:[TOO_MANY_FILES_REJECTION]})}),rn.splice(0)),jt({acceptedFiles:rn,fileRejections:Mn,type:"setFiles"}),ft&&ft(rn,Mn,kt),Mn.length>0&&gt&&gt(Mn,kt),rn.length>0&&pt&&pt(rn,kt)},[jt,ot,tt,at,it,st,ft,pt,gt,bt]),ln=reactExports.useCallback(function(Nt){Nt.preventDefault(),Nt.persist(),mn(Nt),Lt.current=[],isEvtWithFiles(Nt)&&Promise.resolve(rt(Nt)).then(function(kt){isPropagationStopped(Nt)&&!Tt||sn(kt,Nt)}),jt({type:"reset"})},[rt,sn,Tt]),cn=reactExports.useCallback(function(){if(zt.current){jt({type:"openDialog"}),It();var Nt={multiple:ot,types:filePickerOptionsTypes(tt)};window.showOpenFilePicker(Nt).then(function(kt){return rt(kt)}).then(function(kt){sn(kt,null),jt({type:"closeDialog"})}).catch(function(kt){isAbort(kt)?(wt(kt),jt({type:"closeDialog"})):isSecurityError(kt)&&(zt.current=!1,Ft.current&&(Ft.current.value=null,Ft.current.click()))});return}Ft.current&&(jt({type:"openDialog"}),It(),Ft.current.value=null,Ft.current.click())},[jt,It,wt,mt,sn,tt,ot]),In=reactExports.useCallback(function(Nt){!Rt.current||!Rt.current.isEqualNode(Nt.target)||(Nt.key===" "||Nt.key==="Enter"||Nt.keyCode===32||Nt.keyCode===13)&&(Nt.preventDefault(),cn())},[Rt,cn]),zn=reactExports.useCallback(function(){jt({type:"focus"})},[]),yn=reactExports.useCallback(function(){jt({type:"blur"})},[]),Wt=reactExports.useCallback(function(){vt||(isIeOrEdge()?setTimeout(cn,0):cn())},[vt,cn]),_n=function(kt){return nt?null:kt},gn=function(kt){return Et?null:_n(kt)},vn=function(kt){return Ct?null:_n(kt)},mn=function(kt){Tt&&kt.stopPropagation()},Wn=reactExports.useMemo(function(){return function(){var Nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},kt=Nt.refKey,rn=kt===void 0?"ref":kt,Mn=Nt.role,wn=Nt.onKeyDown,Tn=Nt.onFocus,Gn=Nt.onBlur,Un=Nt.onClick,dn=Nt.onDragEnter,Vn=Nt.onDragOver,Qn=Nt.onDragLeave,Nn=Nt.onDrop,kn=_objectWithoutProperties(Nt,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:gn(composeEventHandlers(wn,In)),onFocus:gn(composeEventHandlers(Tn,zn)),onBlur:gn(composeEventHandlers(Gn,yn)),onClick:_n(composeEventHandlers(Un,Wt)),onDragEnter:vn(composeEventHandlers(dn,tn)),onDragOver:vn(composeEventHandlers(Vn,an)),onDragLeave:vn(composeEventHandlers(Qn,on)),onDrop:vn(composeEventHandlers(Nn,ln)),role:typeof Mn=="string"&&Mn!==""?Mn:"button"},rn,Rt),!nt&&!Et?{tabIndex:0}:{}),kn)}},[Rt,In,zn,yn,Wt,tn,an,on,ln,Et,Ct,nt]),xn=reactExports.useCallback(function(Nt){Nt.stopPropagation()},[]),Dn=reactExports.useMemo(function(){return function(){var Nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},kt=Nt.refKey,rn=kt===void 0?"ref":kt,Mn=Nt.onChange,wn=Nt.onClick,Tn=_objectWithoutProperties(Nt,_excluded4),Gn=_defineProperty({accept:tt,multiple:ot,type:"file",style:{display:"none"},onChange:_n(composeEventHandlers(Mn,ln)),onClick:_n(composeEventHandlers(wn,xn)),tabIndex:-1},rn,Ft);return _objectSpread(_objectSpread({},Gn),Tn)}},[Ft,tt,ot,ln,nt]),Fn=Dt.length,bn=Fn>0&&allFilesAccepted({files:Dt,accept:tt,minSize:at,maxSize:it,multiple:ot,maxFiles:st}),jn=Fn>0&&!bn;return _objectSpread(_objectSpread({},Ht),{},{isDragAccept:bn,isDragReject:jn,isFocused:Xt&&!nt,getRootProps:Wn,getInputProps:Dn,rootRef:Rt,inputRef:Ft,open:_n(cn)})}function reducer(_e,_){switch(_.type){case"focus":return _objectSpread(_objectSpread({},_e),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},_e),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},_e),{},{isFileDialogActive:!1});case"setDraggedFiles":var tt=_.isDragActive,nt=_.draggedFiles;return _objectSpread(_objectSpread({},_e),{},{draggedFiles:nt,isDragActive:tt});case"setFiles":return _objectSpread(_objectSpread({},_e),{},{acceptedFiles:_.acceptedFiles,fileRejections:_.fileRejections});case"reset":return _objectSpread({},initialState);default:return _e}}function noop(){}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isobject=function _e(_){return _!=null&&typeof _=="object"&&Array.isArray(_)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isObject$6=isobject;function isObjectObject(_e){return isObject$6(_e)===!0&&Object.prototype.toString.call(_e)==="[object Object]"}var isPlainObject$2=function _e(_){var tt,nt;return!(isObjectObject(_)===!1||(tt=_.constructor,typeof tt!="function")||(nt=tt.prototype,isObjectObject(nt)===!1)||nt.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isPlainObject$1=isPlainObject$2,isExtendable$4=function _e(_){return isPlainObject$1(_)||typeof _=="function"||Array.isArray(_)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var forIn$1=function _e(_,tt,nt){for(var rt in _)if(tt.call(nt,_[rt],rt,_)===!1)break},isExtendable$3=isExtendable$4,forIn=forIn$1;function mixinDeep(_e,_){for(var tt=arguments.length,nt=0;++nt<tt;){var rt=arguments[nt];isObject$5(rt)&&forIn(rt,copy,_e)}return _e}function copy(_e,_){if(isValidKey$1(_)){var tt=this[_];isObject$5(_e)&&isObject$5(tt)?mixinDeep(tt,_e):this[_]=_e}}function isObject$5(_e){return isExtendable$3(_e)&&!Array.isArray(_e)}function isValidKey$1(_e){return _e!=="__proto__"&&_e!=="constructor"&&_e!=="prototype"}var mixinDeep_1=mixinDeep;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var getValue$1=function(_e,_,tt,nt,rt){if(!isObject$4(_e)||!_)return _e;if(_=toString(_),tt&&(_+="."+toString(tt)),nt&&(_+="."+toString(nt)),rt&&(_+="."+toString(rt)),_ in _e)return _e[_];for(var it=_.split("."),at=it.length,ot=-1;_e&&++ot<at;){for(var st=it[ot];st[st.length-1]==="\\";)st=st.slice(0,-1)+"."+it[++ot];_e=_e[st]}return _e};function isObject$4(_e){return _e!==null&&(typeof _e=="object"||typeof _e=="function")}function toString(_e){return _e?Array.isArray(_e)?_e.join("."):_e:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var assignSymbols$1=function(_e,_){if(_e===null||typeof _e>"u")throw new TypeError("expected first argument to be an object.");if(typeof _>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return _e;for(var tt=Object.prototype.propertyIsEnumerable,nt=Object(_e),rt=arguments.length,it=0;++it<rt;)for(var at=Object(arguments[it]),ot=Object.getOwnPropertySymbols(at),st=0;st<ot.length;st++){var lt=ot[st];tt.call(at,lt)&&(nt[lt]=at[lt])}return nt},isExtendable$2=isExtendable$4,assignSymbols=assignSymbols$1,extendShallow$1=Object.assign||function(_e){if(_e===null||typeof _e>"u")throw new TypeError("Cannot convert undefined or null to object");isObject$3(_e)||(_e={});for(var _=1;_<arguments.length;_++){var tt=arguments[_];isString(tt)&&(tt=toObject(tt)),isObject$3(tt)&&(assign$1(_e,tt),assignSymbols(_e,tt))}return _e};function assign$1(_e,_){for(var tt in _)hasOwn$1(_,tt)&&(_e[tt]=_[tt])}function isString(_e){return _e&&typeof _e=="string"}function toObject(_e){var _={};for(var tt in _e)_[tt]=_e[tt];return _}function isObject$3(_e){return _e&&typeof _e=="object"||isExtendable$2(_e)}function hasOwn$1(_e,_){return Object.prototype.hasOwnProperty.call(_e,_)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var extend$1=extendShallow$1,splitString=function(_e,_,tt){if(typeof _e!="string")throw new TypeError("expected a string");typeof _=="function"&&(tt=_,_=null),typeof _=="string"&&(_={sep:_});var nt=extend$1({sep:"."},_),rt=nt.quotes||['"',"'","`"],it;nt.brackets===!0?it={"<":">","(":")","[":"]","{":"}"}:nt.brackets&&(it=nt.brackets);var at=[],ot=[],st=[""],lt=nt.sep,ct=_e.length,ut=-1,ft;function pt(){if(it&&ot.length)return it[ot[ot.length-1]]}for(;++ut<ct;){var gt=_e[ut],xt=_e[ut+1],yt={val:gt,idx:ut,arr:st,str:_e};if(at.push(yt),gt==="\\"){yt.val=keepEscaping(nt,_e,ut)===!0?gt+xt:xt,yt.escaped=!0,typeof tt=="function"&&tt(yt),st[st.length-1]+=yt.val,ut++;continue}if(it&&it[gt]){ot.push(gt);var mt=pt(),At=ut+1;if(_e.indexOf(mt,At+1)!==-1)for(;ot.length&&At<ct;){var vt=_e[++At];if(vt==="\\"){vt++;continue}if(rt.indexOf(vt)!==-1){At=getClosingQuote(_e,vt,At+1);continue}if(mt=pt(),ot.length&&_e.indexOf(mt,At+1)===-1)break;if(it[vt]){ot.push(vt);continue}mt===vt&&ot.pop()}if(ft=At,ft===-1){st[st.length-1]+=gt;continue}gt=_e.slice(ut,ft+1),yt.val=gt,yt.idx=ut=ft}if(rt.indexOf(gt)!==-1){if(ft=getClosingQuote(_e,gt,ut+1),ft===-1){st[st.length-1]+=gt;continue}keepQuotes(gt,nt)===!0?gt=_e.slice(ut,ft+1):gt=_e.slice(ut+1,ft),yt.val=gt,yt.idx=ut=ft}if(typeof tt=="function"&&(tt(yt,at),gt=yt.val,ut=yt.idx),yt.val===lt&&yt.split!==!1){st.push("");continue}st[st.length-1]+=yt.val}return st};function getClosingQuote(_e,_,tt,nt){var rt=_e.indexOf(_,tt);return _e.charAt(rt-1)==="\\"?getClosingQuote(_e,_,rt+1):rt}function keepQuotes(_e,_){return _.keepDoubleQuotes===!0&&_e==='"'||_.keepSingleQuotes===!0&&_e==="'"?!0:_.keepQuotes}function keepEscaping(_e,_,tt){return typeof _e.keepEscaping=="function"?_e.keepEscaping(_,tt):_e.keepEscaping===!0||_[tt+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable$1=function _e(_){return typeof _<"u"&&_!==null&&(typeof _=="object"||typeof _=="function")},isObject$2=isExtendable$1,extendShallow=function _e(_){isObject$2(_)||(_={});for(var tt=arguments.length,nt=1;nt<tt;nt++){var rt=arguments[nt];isObject$2(rt)&&assign(_,rt)}return _};function assign(_e,_){for(var tt in _)hasOwn(_,tt)&&(_e[tt]=_[tt])}function hasOwn(_e,_){return Object.prototype.hasOwnProperty.call(_e,_)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var isExtendable=function _e(_){return typeof _<"u"&&_!==null&&(typeof _=="object"||typeof _=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var split=splitString,extend=extendShallow,isPlainObject=isPlainObject$2,isObject$1=isExtendable,setValue=function(_e,_,tt){if(!isObject$1(_e)||(Array.isArray(_)&&(_=[].concat.apply([],_).join(".")),typeof _!="string"))return _e;for(var nt=split(_,{sep:".",brackets:!0}).filter(isValidKey),rt=nt.length,it=-1,at=_e;++it<rt;){var ot=nt[it];if(it!==rt-1){isObject$1(at[ot])||(at[ot]={}),at=at[ot];continue}isPlainObject(at[ot])&&isPlainObject(tt)?at[ot]=extend({},at[ot],tt):at[ot]=tt}return _e};function isValidKey(_e){return _e!=="__proto__"&&_e!=="constructor"&&_e!=="prototype"}var isObject=isExtendable$4,merge=mixinDeep_1,get=getValue$1,set=setValue,mergeValue=function _e(_,tt,nt){if(!isObject(_))throw new TypeError("expected an object");if(typeof tt!="string"||nt==null)return merge.apply(null,arguments);if(typeof nt=="string")return set(_,tt,nt),_;var rt=get(_,tt);return isObject(nt)&&isObject(rt)&&(nt=merge({},rt,nt)),set(_,tt,nt),_};const merge$1=getDefaultExportFromCjs(mergeValue),join=(..._e)=>_e.filter(Boolean).join(".");function getKeyPath(_e){const _=_e.split(".");return[_.pop(),_.join(".")||void 0]}function useToggle(_e){const _=reactExports.useRef(null),tt=reactExports.useRef(null),nt=reactExports.useRef(!0);return reactExports.useLayoutEffect(()=>{_e||(_.current.style.height="0px",_.current.style.overflow="hidden")},[]),reactExports.useEffect(()=>{if(nt.current){nt.current=!1;return}let rt;const it=_.current,at=()=>{_e&&(it.style.removeProperty("height"),it.style.removeProperty("overflow"),tt.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};it.addEventListener("transitionend",at,{once:!0});const{height:ot}=tt.current.getBoundingClientRect();return it.style.height=ot+"px",_e||(it.style.overflow="hidden",rt=window.setTimeout(()=>it.style.height="0px",50)),()=>{it.removeEventListener("transitionend",at),clearTimeout(rt)}},[_e]),{wrapperRef:_,contentRef:tt}}const useVisiblePaths=_e=>{const[_,tt]=reactExports.useState(_e.getVisiblePaths());return reactExports.useEffect(()=>{tt(_e.getVisiblePaths());const nt=_e.useStore.subscribe(_e.getVisiblePaths,tt,{equalityFn:shallow});return()=>nt()},[_e]),_};function usePopin(_e=3){const _=reactExports.useRef(null),tt=reactExports.useRef(null),[nt,rt]=reactExports.useState(!1),it=reactExports.useCallback(()=>rt(!0),[]),at=reactExports.useCallback(()=>rt(!1),[]);return reactExports.useLayoutEffect(()=>{if(nt){const{bottom:ot,top:st,left:lt}=_.current.getBoundingClientRect(),{height:ct}=tt.current.getBoundingClientRect(),ut=ot+ct>window.innerHeight-40?"up":"down";tt.current.style.position="fixed",tt.current.style.zIndex="10000",tt.current.style.left=lt+"px",ut==="down"?tt.current.style.top=ot+_e+"px":tt.current.style.bottom=window.innerHeight-st+_e+"px"}},[_e,nt]),{popinRef:_,wrapperRef:tt,shown:nt,show:it,hide:at}}k$1([namesPlugin]);const convertMap={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};v8n.extend({color:()=>_e=>w(_e).isValid()});const schema$2=_e=>v8n().color().test(_e);function convert(_e,{format:_,hasAlpha:tt,isString:nt}){const rt=convertMap[_]+(nt&&_!=="hex"?"String":""),it=_e[rt]();return typeof it=="object"&&!tt?omit(it,["a"]):it}const sanitize$2=(_e,_)=>{const tt=w(_e);if(!tt.isValid())throw Error("Invalid color");return convert(tt,_)},format$1=(_e,_)=>convert(w(_e),_objectSpread2(_objectSpread2({},_),{},{isString:!0,format:"hex"})),normalize$3=({value:_e})=>{const _=I$1(_e),tt=_==="name"?"hex":_,nt=typeof _e=="object"?"a"in _e:_==="hex"&&_e.length===8||/^(rgba)|(hsla)|(hsva)/.test(_e),rt={format:tt,hasAlpha:nt,isString:typeof _e=="string"};return{value:sanitize$2(_e,rt),settings:rt}};var props$2=Object.freeze({__proto__:null,schema:schema$2,sanitize:sanitize$2,format:format$1,normalize:normalize$3});const ColorPreview=styled("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),PickerContainer=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),PickerWrapper=styled("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function convertToRgb(_e,_){return _!=="rgb"?w(_e).toRgb():_e}function Color({value:_e,displayValue:_,settings:tt,onUpdate:nt}){const{emitOnEditStart:rt,emitOnEditEnd:it}=useInputContext(),{format:at,hasAlpha:ot}=tt,{popinRef:st,wrapperRef:lt,shown:ct,show:ut,hide:ft}=usePopin(),pt=reactExports.useRef(0),[gt,xt]=reactExports.useState(()=>convertToRgb(_e,at)),yt=ot?Ce:Ne,mt=()=>{xt(convertToRgb(_e,at)),ut(),rt()},At=()=>{ft(),it(),window.clearTimeout(pt.current)},vt=()=>{pt.current=window.setTimeout(At,500)};return reactExports.useEffect(()=>()=>window.clearTimeout(pt.current),[]),React.createElement(React.Fragment,null,React.createElement(ColorPreview,{ref:st,active:ct,onClick:()=>mt(),style:{color:_}}),ct&&React.createElement(Portal,null,React.createElement(Overlay,{onPointerUp:At}),React.createElement(PickerWrapper,{ref:lt,onMouseEnter:()=>window.clearTimeout(pt.current),onMouseLeave:Et=>Et.buttons===0&&vt()},React.createElement(yt,{color:gt,onChange:nt}))))}function ColorComponent(){const{value:_e,displayValue:_,label:tt,onChange:nt,onUpdate:rt,settings:it}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,tt),React.createElement(PickerContainer,null,React.createElement(Color,{value:_e,displayValue:_,onChange:nt,onUpdate:rt,settings:it}),React.createElement(ValueInput,{value:_,onChange:nt,onUpdate:rt})))}var color=_objectSpread2({component:ColorComponent},props$2);function Vector3dComponent(){const{label:_e,displayValue:_,onUpdate:tt,settings:nt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Vector,{value:_,settings:nt,onUpdate:tt}))}var vector3d=_objectSpread2({component:Vector3dComponent},getVectorPlugin(["x","y","z"]));const JoystickTrigger=styled("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),JoystickPlayground=styled("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Joystick({value:_e,settings:_,onUpdate:tt}){const nt=reactExports.useRef(),rt=reactExports.useRef(0),it=reactExports.useRef(0),at=reactExports.useRef(1),[ot,st]=reactExports.useState(!1),[lt,ct]=reactExports.useState(!1),[ut,ft]=useTransform(),pt=reactExports.useRef(null),gt=reactExports.useRef(null);reactExports.useLayoutEffect(()=>{if(ot){const{top:Ut,left:Gt,width:Ht,height:jt}=pt.current.getBoundingClientRect();gt.current.style.left=Gt+Ht/2+"px",gt.current.style.top=Ut+jt/2+"px"}},[ot]);const{keys:[xt,yt],joystick:mt}=_,At=mt==="invertY"?1:-1,{[xt]:{step:vt},[yt]:{step:Et}}=_,Ct=useTh("sizes","joystickWidth"),Tt=useTh("sizes","joystickHeight"),bt=parseFloat(Ct)*.8/2,It=parseFloat(Tt)*.8/2,wt=reactExports.useCallback(()=>{nt.current||(ct(!0),rt.current&&ft({x:rt.current*bt}),it.current&&ft({y:it.current*-It}),nt.current=window.setInterval(()=>{tt(Ut=>{const Gt=vt*rt.current*at.current,Ht=At*Et*it.current*at.current;return Array.isArray(Ut)?{[xt]:Ut[0]+Gt,[yt]:Ut[1]+Ht}:{[xt]:Ut[xt]+Gt,[yt]:Ut[yt]+Ht}})},16))},[bt,It,tt,ft,vt,Et,xt,yt,At]),Rt=reactExports.useCallback(()=>{window.clearTimeout(nt.current),nt.current=void 0,ct(!1)},[]);reactExports.useEffect(()=>{function Ut(Gt){at.current=multiplyStep(Gt)}return window.addEventListener("keydown",Ut),window.addEventListener("keyup",Ut),()=>{window.clearTimeout(nt.current),window.removeEventListener("keydown",Ut),window.removeEventListener("keyup",Ut)}},[]);const Ft=useDrag(({first:Ut,active:Gt,delta:[Ht,jt],movement:[Xt,Jt]})=>{Ut&&st(!0);const Dt=clamp(Xt,-bt,bt),zt=clamp(Jt,-It,It);rt.current=Math.abs(Xt)>Math.abs(Dt)?Math.sign(Xt-Dt):0,it.current=Math.abs(Jt)>Math.abs(zt)?Math.sign(zt-Jt):0;let $t=_e[xt],Lt=_e[yt];Gt?(rt.current||($t+=Ht*vt*at.current,ft({x:Dt})),it.current||(Lt-=At*jt*Et*at.current,ft({y:zt})),rt.current||it.current?wt():Rt(),tt({[xt]:$t,[yt]:Lt})):(st(!1),rt.current=0,it.current=0,ft({x:0,y:0}),Rt())});return React.createElement(JoystickTrigger,_extends({ref:pt},Ft()),ot&&React.createElement(Portal,null,React.createElement(JoystickPlayground,{ref:gt,isOutOfBounds:lt},React.createElement("div",null),React.createElement("span",{ref:ut}))))}const Container$1=styled("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Vector2dComponent(){const{label:_e,displayValue:_,onUpdate:tt,settings:nt}=useInputContext();return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Container$1,{withJoystick:!!nt.joystick},nt.joystick&&React.createElement(Joystick,{value:_,settings:nt,onUpdate:tt}),React.createElement(Vector,{value:_,settings:nt,onUpdate:tt})))}const _excluded$7=["joystick"],plugin=getVectorPlugin(["x","y"]),normalize$2=_e=>{let{joystick:_=!0}=_e,tt=_objectWithoutProperties$1(_e,_excluded$7);const{value:nt,settings:rt}=plugin.normalize(tt);return{value:nt,settings:_objectSpread2(_objectSpread2({},rt),{},{joystick:_})}};var vector2d=_objectSpread2(_objectSpread2({component:Vector2dComponent},plugin),{},{normalize:normalize$2});const sanitize$1=_e=>{if(_e!==void 0){if(_e instanceof File)try{return URL.createObjectURL(_e)}catch{return}if(typeof _e=="string"&&_e.indexOf("blob:")===0)return _e;throw Error("Invalid image format [undefined | blob |File].")}},schema$1=(_e,_)=>typeof _=="object"&&"image"in _,normalize$1=({image:_e})=>({value:_e});var props$1=Object.freeze({__proto__:null,sanitize:sanitize$1,schema:schema$1,normalize:normalize$1});const ImageContainer=styled("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),DropZone=styled("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),ImagePreview=styled("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),ImageLargePreview=styled("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Instructions=styled("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Remove=styled("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function ImageComponent(){const{label:_e,value:_,onUpdate:tt,disabled:nt}=useInputContext(),{popinRef:rt,wrapperRef:it,shown:at,show:ot,hide:st}=usePopin(),lt=reactExports.useCallback(gt=>{gt.length&&tt(gt[0])},[tt]),ct=reactExports.useCallback(gt=>{gt.stopPropagation(),tt(void 0)},[tt]),{getRootProps:ut,getInputProps:ft,isDragAccept:pt}=useDropzone({maxFiles:1,accept:"image/*",onDrop:lt,disabled:nt});return React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(ImageContainer,null,React.createElement(ImagePreview,{ref:rt,hasImage:!!_,onPointerDown:()=>!!_&&ot(),onPointerUp:st,style:{backgroundImage:_?`url(${_})`:"none"}}),at&&!!_&&React.createElement(Portal,null,React.createElement(Overlay,{onPointerUp:st,style:{cursor:"pointer"}}),React.createElement(ImageLargePreview,{ref:it,style:{backgroundImage:`url(${_})`}})),React.createElement(DropZone,ut({isDragAccept:pt}),React.createElement("input",ft()),React.createElement(Instructions,null,pt?"drop image":"click or drop")),React.createElement(Remove,{onClick:ct,disabled:!_})))}var image=_objectSpread2({component:ImageComponent},props$1);const number=v8n().number(),schema=(_e,_)=>v8n().array().length(2).every.number().test(_e)&&v8n().schema({min:number,max:number}).test(_),format=_e=>({min:_e[0],max:_e[1]}),sanitize=(_e,{bounds:[_,tt]},nt)=>{const rt=Array.isArray(_e)?format(_e):_e,it={min:nt[0],max:nt[1]},{min:at,max:ot}=_objectSpread2(_objectSpread2({},it),rt);return[clamp(Number(at),_,Math.max(_,ot)),clamp(Number(ot),Math.min(tt,at),tt)]},normalize=({value:_e,min:_,max:tt})=>{const nt={min:_,max:tt},rt=normalizeKeyedNumberSettings(format(_e),{min:nt,max:nt}),it=[_,tt],at=_objectSpread2(_objectSpread2({},rt),{},{bounds:it});return{value:sanitize(format(_e),at,_e),settings:at}};var props=Object.freeze({__proto__:null,schema,format,sanitize,normalize});const _excluded$6=["value","bounds","onDrag"],_excluded2$1=["bounds"],Container=styled("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function IntervalSlider(_e){let{value:_,bounds:[tt,nt],onDrag:rt}=_e,it=_objectWithoutProperties$1(_e,_excluded$6);const at=reactExports.useRef(null),ot=reactExports.useRef(null),st=reactExports.useRef(null),lt=reactExports.useRef(0),ct=useTh("sizes","scrubberWidth"),ut=useDrag(({event:gt,first:xt,xy:[yt],movement:[mt],memo:At={}})=>{if(xt){const{width:Et,left:Ct}=at.current.getBoundingClientRect();lt.current=Et-parseFloat(ct);const Tt=(gt==null?void 0:gt.target)===ot.current||(gt==null?void 0:gt.target)===st.current;At.pos=invertedRange((yt-Ct)/Et,tt,nt);const bt=Math.abs(At.pos-_.min)-Math.abs(At.pos-_.max);At.key=bt<0||bt===0&&At.pos<=_.min?"min":"max",Tt&&(At.pos=_[At.key])}const vt=At.pos+invertedRange(mt/lt.current,0,nt-tt);return rt({[At.key]:sanitizeStep(vt,it[At.key])}),At}),ft=`calc(${range(_.min,tt,nt)} * (100% - ${ct} - 8px) + 4px)`,pt=`calc(${1-range(_.max,tt,nt)} * (100% - ${ct} - 8px) + 4px)`;return React.createElement(RangeWrapper,_extends({ref:at},ut()),React.createElement(Range,null,React.createElement(Indicator,{style:{left:ft,right:pt}})),React.createElement(Scrubber,{position:"left",ref:ot,style:{left:ft}}),React.createElement(Scrubber,{position:"right",ref:st,style:{right:pt}}))}function IntervalComponent(){const{label:_e,displayValue:_,onUpdate:tt,settings:nt}=useInputContext(),rt=_objectWithoutProperties$1(nt,_excluded2$1);return React.createElement(React.Fragment,null,React.createElement(Row,{input:!0},React.createElement(Label,null,_e),React.createElement(Container,null,React.createElement(IntervalSlider,_extends({value:_},nt,{onDrag:tt})),React.createElement(Vector,{value:_,settings:rt,onUpdate:tt,innerLabelTrim:0}))))}var interval=_objectSpread2({component:IntervalComponent},props);const createEventEmitter=()=>{const _e=new Map;return{on:(_,tt)=>{let nt=_e.get(_);nt===void 0&&(nt=new Set,_e.set(_,nt)),nt.add(tt)},off:(_,tt)=>{const nt=_e.get(_);nt!==void 0&&(nt.delete(tt),nt.size===0&&_e.delete(_))},emit:(_,...tt)=>{const nt=_e.get(_);if(nt!==void 0)for(const rt of nt)rt(...tt)}}},_excluded$5=["type","value"],_excluded2=["onChange","transient","onEditStart","onEditEnd"],Store=function _e(){const _=create(subscribeWithSelector(()=>({data:{}}))),tt=createEventEmitter();this.storeId=getUid(),this.useStore=_;const nt={},rt=new Set;this.getVisiblePaths=()=>{const at=this.getData(),ot=Object.keys(at),st=[];Object.entries(nt).forEach(([ct,ut])=>{ut.render&&ot.some(ft=>ft.indexOf(ct)===0)&&!ut.render(this.get)&&st.push(ct+".")});const lt=[];return rt.forEach(ct=>{ct in at&&at[ct].__refCount>0&&st.every(ut=>ct.indexOf(ut)===-1)&&(!at[ct].render||at[ct].render(this.get))&&lt.push(ct)}),lt},this.setOrderedPaths=at=>{at.forEach(ot=>rt.add(ot))},this.orderPaths=at=>(this.setOrderedPaths(at),at),this.disposePaths=at=>{_.setState(ot=>{const st=ot.data;return at.forEach(lt=>{if(lt in st){const ct=st[lt];ct.__refCount--,ct.__refCount===0&&ct.type in SpecialInputs&&delete st[lt]}}),{data:st}})},this.dispose=()=>{_.setState(()=>({data:{}}))},this.getFolderSettings=at=>nt[at]||{},this.getData=()=>_.getState().data,this.addData=(at,ot)=>{_.setState(st=>{const lt=st.data;return Object.entries(at).forEach(([ct,ut])=>{let ft=lt[ct];if(ft){const{type:pt,value:gt}=ut,xt=_objectWithoutProperties$1(ut,_excluded$5);pt!==ft.type?warn(LevaErrors.INPUT_TYPE_OVERRIDE,pt):((ft.__refCount===0||ot)&&Object.assign(ft,xt),ft.__refCount++)}else lt[ct]=_objectSpread2(_objectSpread2({},ut),{},{__refCount:1})}),{data:lt}})},this.setValueAtPath=(at,ot,st)=>{_.setState(lt=>{const ct=lt.data;return updateInput(ct[at],ot,at,this,st),{data:ct}})},this.setSettingsAtPath=(at,ot)=>{_.setState(st=>{const lt=st.data;return lt[at].settings=_objectSpread2(_objectSpread2({},lt[at].settings),ot),{data:lt}})},this.disableInputAtPath=(at,ot)=>{_.setState(st=>{const lt=st.data;return lt[at].disabled=ot,{data:lt}})},this.set=(at,ot)=>{_.setState(st=>{const lt=st.data;return Object.entries(at).forEach(([ct,ut])=>{try{updateInput(lt[ct],ut,void 0,void 0,ot)}catch{}}),{data:lt}})},this.getInput=at=>{try{return this.getData()[at]}catch{warn(LevaErrors.PATH_DOESNT_EXIST,at)}},this.get=at=>{var ot;return(ot=this.getInput(at))===null||ot===void 0?void 0:ot.value},this.emitOnEditStart=at=>{tt.emit(`onEditStart:${at}`,this.get(at),at,_objectSpread2(_objectSpread2({},this.getInput(at)),{},{get:this.get}))},this.emitOnEditEnd=at=>{tt.emit(`onEditEnd:${at}`,this.get(at),at,_objectSpread2(_objectSpread2({},this.getInput(at)),{},{get:this.get}))},this.subscribeToEditStart=(at,ot)=>{const st=`onEditStart:${at}`;return tt.on(st,ot),()=>tt.off(st,ot)},this.subscribeToEditEnd=(at,ot)=>{const st=`onEditEnd:${at}`;return tt.on(st,ot),()=>tt.off(st,ot)};const it=(at,ot,st)=>{const lt={};return Object.entries(at).forEach(([ct,ut])=>{if(ct==="")return warn(LevaErrors.EMPTY_KEY);let ft=join(ot,ct);if(ut.type===SpecialInputs.FOLDER){const pt=it(ut.schema,ft,st);Object.assign(lt,pt),ft in nt||(nt[ft]=ut.settings)}else if(ct in st)warn(LevaErrors.DUPLICATE_KEYS,ct,ft,st[ct].path);else{const pt=normalizeInput(ut,ct,ft,lt);if(pt){const{type:gt,options:xt,input:yt}=pt,{onChange:mt,transient:At,onEditStart:vt,onEditEnd:Et}=xt,Ct=_objectWithoutProperties$1(xt,_excluded2);lt[ft]=_objectSpread2(_objectSpread2(_objectSpread2({type:gt},Ct),yt),{},{fromPanel:!0}),st[ct]={path:ft,onChange:mt,transient:At,onEditStart:vt,onEditEnd:Et}}else warn(LevaErrors.UNKNOWN_INPUT,ft,ut)}}),lt};this.getDataFromSchema=at=>{const ot={};return[it(at,"",ot),ot]}};new Store;const isInput=_e=>"__levaInput"in _e,buildTree=(_e,_)=>{const tt={},nt=_?_.toLowerCase():null;return _e.forEach(rt=>{const[it,at]=getKeyPath(rt);(!nt||it.toLowerCase().indexOf(nt)>-1)&&merge$1(tt,at,{[it]:{__levaInput:!0,path:rt}})}),tt},_excluded$4=["type","label","path","valueKey","value","settings","setValue","disabled"];function ControlInput(_e){let{type:_,label:tt,path:nt,valueKey:rt,value:it,settings:at,setValue:ot,disabled:st}=_e,lt=_objectWithoutProperties$1(_e,_excluded$4);const{displayValue:ct,onChange:ut,onUpdate:ft}=useInputSetters({type:_,value:it,settings:at,setValue:ot}),pt=Plugins[_].component;return pt?React.createElement(InputContext.Provider,{value:_objectSpread2({key:rt,path:nt,id:""+nt,label:tt,displayValue:ct,value:it,onChange:ut,onUpdate:ft,settings:at,setValue:ot,disabled:st},lt)},React.createElement(StyledInputWrapper$1,{disabled:st},React.createElement(pt,null))):(warn(LevaErrors.NO_COMPONENT_FOR_TYPE,_,nt),null)}const StyledButton=styled("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function Button({onClick:_e,settings:_,label:tt}){const nt=useStoreContext();return React.createElement(Row,null,React.createElement(StyledButton,{disabled:_.disabled,onClick:()=>_e(nt.get)},tt))}const StyledButtonGroup=styled("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),StyledButtonGroupButton=styled("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),getOpts=({label:_e,opts:_})=>{let tt=typeof _e=="string"&&_e.trim()===""?null:_e,nt=_;return typeof _.opts=="object"&&(nt.label!==void 0&&(tt=_.label),nt=_.opts),{label:tt,opts:nt}};function ButtonGroup(_e){const{label:_,opts:tt}=getOpts(_e),nt=useStoreContext();return React.createElement(Row,{input:!!_},_&&React.createElement(Label,null,_),React.createElement(StyledButtonGroup,null,Object.entries(tt).map(([rt,it])=>React.createElement(StyledButtonGroupButton,{key:rt,onClick:()=>it(nt.get)},rt))))}const Canvas=styled("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),POINTS=100;function push(_e,_){_e.push(_),_e.length>POINTS&&_e.shift()}const MonitorCanvas=reactExports.forwardRef(function({initialValue:_e},_){const tt=useTh("colors","highlight3"),nt=useTh("colors","elevation2"),rt=useTh("colors","highlight1"),[it,at]=reactExports.useMemo(()=>[w(rt).alpha(.4).toRgbString(),w(rt).alpha(.1).toRgbString()],[rt]),ot=reactExports.useRef([_e]),st=reactExports.useRef(_e),lt=reactExports.useRef(_e),ct=reactExports.useRef(),ut=reactExports.useCallback((gt,xt)=>{if(!gt)return;const{width:yt,height:mt}=gt,At=new Path2D,vt=yt/POINTS,Et=mt*.05;for(let bt=0;bt<ot.current.length;bt++){const It=range(ot.current[bt],st.current,lt.current),wt=vt*bt,Rt=mt-It*(mt-Et*2)-Et;At.lineTo(wt,Rt)}xt.clearRect(0,0,yt,mt);const Ct=new Path2D(At);Ct.lineTo(vt*(ot.current.length+1),mt),Ct.lineTo(0,mt),Ct.lineTo(0,0);const Tt=xt.createLinearGradient(0,0,0,mt);Tt.addColorStop(0,it),Tt.addColorStop(1,at),xt.fillStyle=Tt,xt.fill(Ct),xt.strokeStyle=nt,xt.lineJoin="round",xt.lineWidth=14,xt.stroke(At),xt.strokeStyle=tt,xt.lineWidth=2,xt.stroke(At)},[tt,nt,it,at]),[ft,pt]=useCanvas2d(ut);return reactExports.useImperativeHandle(_,()=>({frame:gt=>{(st.current===void 0||gt<st.current)&&(st.current=gt),(lt.current===void 0||gt>lt.current)&&(lt.current=gt),push(ot.current,gt),ct.current=requestAnimationFrame(()=>ut(ft.current,pt.current))}}),[ft,pt,ut]),reactExports.useEffect(()=>()=>cancelAnimationFrame(ct.current),[]),React.createElement(Canvas,{ref:ft})}),parse=_e=>Number.isFinite(_e)?_e.toPrecision(2):_e.toString(),MonitorLog=reactExports.forwardRef(function({initialValue:_e},_){const[tt,nt]=reactExports.useState(parse(_e));return reactExports.useImperativeHandle(_,()=>({frame:rt=>nt(parse(rt))}),[]),React.createElement("div",null,tt)});function getValue(_e){return typeof _e=="function"?_e():_e.current}function Monitor({label:_e,objectOrFn:_,settings:tt}){const nt=reactExports.useRef(),rt=reactExports.useRef(getValue(_));return reactExports.useEffect(()=>{const it=window.setInterval(()=>{var at;document.hidden||(at=nt.current)===null||at===void 0||at.frame(getValue(_))},tt.interval);return()=>window.clearInterval(it)},[_,tt.interval]),React.createElement(Row,{input:!0},React.createElement(Label,{align:"top"},_e),tt.graph?React.createElement(MonitorCanvas,{ref:nt,initialValue:rt.current}):React.createElement(MonitorLog,{ref:nt,initialValue:rt.current}))}const _excluded$3=["type","label","key"],specialComponents={[SpecialInputs.BUTTON]:Button,[SpecialInputs.BUTTON_GROUP]:ButtonGroup,[SpecialInputs.MONITOR]:Monitor},Control=React.memo(({path:_e})=>{const[_,{set:tt,setSettings:nt,disable:rt,storeId:it,emitOnEditStart:at,emitOnEditEnd:ot}]=useInput(_e);if(!_)return null;const{type:st,label:lt,key:ct}=_,ut=_objectWithoutProperties$1(_,_excluded$3);if(st in SpecialInputs){const ft=specialComponents[st];return React.createElement(ft,_extends({label:lt,path:_e},ut))}return st in Plugins?React.createElement(ControlInput,_extends({key:it+_e,type:st,label:lt,storeId:it,path:_e,valueKey:ct,setValue:tt,setSettings:nt,disable:rt,emitOnEditStart:at,emitOnEditEnd:ot},ut)):(log(LevaErrors.UNSUPPORTED_INPUT,st,_e),null)});function FolderTitle({toggle:_e,toggled:_,name:tt}){return React.createElement(StyledTitle,{onClick:()=>_e()},React.createElement(Chevron,{toggled:_}),React.createElement("div",null,tt))}const Folder=({name:_e,path:_,tree:tt})=>{const nt=useStoreContext(),rt=join(_,_e),{collapsed:it,color:at}=nt.getFolderSettings(rt),[ot,st]=reactExports.useState(!it),lt=reactExports.useRef(null),ct=useTh("colors","folderWidgetColor"),ut=useTh("colors","folderTextColor");return reactExports.useLayoutEffect(()=>{lt.current.style.setProperty("--leva-colors-folderWidgetColor",at||ct),lt.current.style.setProperty("--leva-colors-folderTextColor",at||ut)},[at,ct,ut]),React.createElement(StyledFolder,{ref:lt},React.createElement(FolderTitle,{name:_e,toggled:ot,toggle:()=>st(ft=>!ft)}),React.createElement(TreeWrapper,{parent:rt,tree:tt,toggled:ot}))},TreeWrapper=React.memo(({isRoot:_e=!1,fill:_=!1,flat:tt=!1,parent:nt,tree:rt,toggled:it})=>{const{wrapperRef:at,contentRef:ot}=useToggle(it),st=useStoreContext(),lt=([ut,ft])=>{var pt;return(isInput(ft)?(pt=st.getInput(ft.path))===null||pt===void 0?void 0:pt.order:st.getFolderSettings(join(nt,ut)).order)||0},ct=Object.entries(rt).sort((ut,ft)=>lt(ut)-lt(ft));return React.createElement(StyledWrapper,{ref:at,isRoot:_e,fill:_,flat:tt},React.createElement(StyledContent,{ref:ot,isRoot:_e,toggled:it},ct.map(([ut,ft])=>isInput(ft)?React.createElement(Control,{key:ft.path,valueKey:ft.valueKey,path:ft.path}):React.createElement(Folder,{key:ut,name:ut,path:nt,tree:ft}))))}),StyledRoot=styled("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${StyledInputRow}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),iconWidth=40,Icon=styled("i",{$flexCenter:"",width:iconWidth,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),StyledTitleWithFilter=styled("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),FilterWrapper=styled("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Icon}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),StyledFilterInput=styled("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),TitleContainer=styled("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:iconWidth}}}}),FilterInput=React.forwardRef(({setFilter:_e,toggle:_},tt)=>{const[nt,rt]=reactExports.useState(""),it=reactExports.useMemo(()=>debounce(_e,250),[_e]),at=()=>{_e(""),rt("")},ot=st=>{const lt=st.currentTarget.value;_(!0),rt(lt)};return reactExports.useEffect(()=>{it(nt)},[nt,it]),React.createElement(React.Fragment,null,React.createElement(StyledFilterInput,{ref:tt,value:nt,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:st=>st.stopPropagation(),onChange:ot}),React.createElement(Icon,{onClick:()=>at(),style:{visibility:nt?"visible":"hidden"}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function TitleWithFilter({setFilter:_e,onDrag:_,onDragStart:tt,onDragEnd:nt,toggle:rt,toggled:it,title:at,drag:ot,filterEnabled:st,from:lt}){const[ct,ut]=reactExports.useState(!1),ft=reactExports.useRef(null);reactExports.useEffect(()=>{var gt,xt;ct?(gt=ft.current)===null||gt===void 0||gt.focus():(xt=ft.current)===null||xt===void 0||xt.blur()},[ct]);const pt=useDrag(({offset:[gt,xt],first:yt,last:mt})=>{_({x:gt,y:xt}),yt&&tt({x:gt,y:xt}),mt&&nt({x:gt,y:xt})},{filterTaps:!0,from:({offset:[gt,xt]})=>[(lt==null?void 0:lt.x)||gt,(lt==null?void 0:lt.y)||xt]});return reactExports.useEffect(()=>{const gt=xt=>{xt.key==="L"&&xt.shiftKey&&xt.metaKey&&ut(yt=>!yt)};return window.addEventListener("keydown",gt),()=>window.removeEventListener("keydown",gt)},[]),React.createElement(React.Fragment,null,React.createElement(StyledTitleWithFilter,{mode:ot?"drag":void 0},React.createElement(Icon,{active:!it,onClick:()=>rt()},React.createElement(Chevron,{toggled:it,width:12,height:8})),React.createElement(TitleContainer,_extends({},ot?pt():{},{drag:ot,filterEnabled:st}),at===void 0&&ot?React.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},React.createElement("circle",{cx:"2",cy:"2",r:"2"}),React.createElement("circle",{cx:"14",cy:"2",r:"2"}),React.createElement("circle",{cx:"26",cy:"2",r:"2"}),React.createElement("circle",{cx:"2",cy:"12",r:"2"}),React.createElement("circle",{cx:"14",cy:"12",r:"2"}),React.createElement("circle",{cx:"26",cy:"12",r:"2"})):at),st&&React.createElement(Icon,{active:ct,onClick:()=>ut(gt=>!gt)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},React.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),React.createElement(FilterWrapper,{toggled:ct},React.createElement(FilterInput,{ref:ft,setFilter:_e,toggle:rt})))}React.memo(({store:_e,rootClass:_,fill:tt=!1,flat:nt=!1,neverHide:rt=!1,oneLineLabels:it=!1,titleBar:at={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:ot=!1,toggled:st,setToggle:lt})=>{var ct,ut;const ft=useVisiblePaths(_e),[pt,gt]=reactExports.useState(""),xt=reactExports.useMemo(()=>buildTree(ft,pt),[ft,pt]),[yt,mt]=useTransform(),At=rt||ft.length>0,vt=typeof at=="object"&&at.title||void 0,Et=typeof at=="object"&&(ct=at.drag)!==null&&ct!==void 0?ct:!0,Ct=typeof at=="object"&&(ut=at.filter)!==null&&ut!==void 0?ut:!0,Tt=typeof at=="object"&&at.position||void 0,bt=typeof at=="object"&&at.onDrag||void 0,It=typeof at=="object"&&at.onDragStart||void 0,wt=typeof at=="object"&&at.onDragEnd||void 0;return React.useEffect(()=>{mt({x:Tt==null?void 0:Tt.x,y:Tt==null?void 0:Tt.y})},[Tt,mt]),globalStyles(),React.createElement(PanelSettingsContext.Provider,{value:{hideCopyButton:ot}},React.createElement(StyledRoot,{ref:yt,className:_,fill:tt,flat:nt,oneLineLabels:it,hideTitleBar:!at,style:{display:At?"block":"none"}},at&&React.createElement(TitleWithFilter,{onDrag:Rt=>{mt(Rt),bt==null||bt(Rt)},onDragStart:Rt=>It==null?void 0:It(Rt),onDragEnd:Rt=>wt==null?void 0:wt(Rt),setFilter:gt,toggle:Rt=>lt(Ft=>Rt??!Ft),toggled:st,title:vt,drag:Et,filterEnabled:Ct,from:Tt}),At&&React.createElement(StoreContext.Provider,{value:_e},React.createElement(TreeWrapper,{isRoot:!0,fill:tt,flat:nt,tree:xt,toggled:st}))))});register(LevaInputs.SELECT,select);register(LevaInputs.IMAGE,image);register(LevaInputs.NUMBER,number$1);register(LevaInputs.COLOR,color);register(LevaInputs.STRING,string);register(LevaInputs.BOOLEAN,boolean);register(LevaInputs.INTERVAL,interval);register(LevaInputs.VECTOR3D,vector3d);register(LevaInputs.VECTOR2D,vector2d);const GOLDENRATIO=1.61803398875,App=({images:_e})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Canvas$1,{dpr:[1,1.5],camera:{fov:70},children:[jsxRuntimeExports.jsx("color",{attach:"background",args:["#191920"]}),jsxRuntimeExports.jsx("fog",{attach:"fog",args:["#191920",0,15]}),jsxRuntimeExports.jsxs(reactExports.Suspense,{fallback:null,children:[jsxRuntimeExports.jsxs("group",{position:[0,-.5,0],children:[jsxRuntimeExports.jsx(Frames,{images:_e}),jsxRuntimeExports.jsxs("mesh",{rotation:[-Math.PI/2,0,0],children:[jsxRuntimeExports.jsx("planeGeometry",{args:[50,50]}),jsxRuntimeExports.jsx(MeshReflectorMaterial,{blur:[300,100],resolution:1080,mixBlur:1,mixStrength:80,roughness:1,depthScale:1.2,minDepthThreshold:.4,maxDepthThreshold:1.4,color:"#050505",metalness:1})]})]}),jsxRuntimeExports.jsx(Environment,{preset:"city"})]})]}),jsxRuntimeExports.jsx(Loader,{})]});function Frames({images:_e,q:_=new Quaternion,p:tt=new Vector3}){const nt=reactExports.useRef(),rt=reactExports.useRef(),[,it]=useRoute("/item/:id"),[,at]=useLocation();return reactExports.useEffect(()=>{rt.current=nt.current.getObjectByName(it==null?void 0:it.id),rt.current?(rt.current.parent.updateWorldMatrix(!0,!0),rt.current.parent.localToWorld(tt.set(0,GOLDENRATIO/2,1.25)),rt.current.parent.getWorldQuaternion(_)):(tt.set(0,0,5.5),_.identity())}),useFrame((ot,st)=>{easing.damp3(ot.camera.position,tt,.4,st),easing.dampQ(ot.camera.quaternion,_,.4,st)}),jsxRuntimeExports.jsx("group",{ref:nt,onClick:ot=>(ot.stopPropagation(),at(rt.current===ot.object?"/":"/item/"+ot.object.name)),onPointerMissed:()=>at("/3DImageGallery/"),children:_e.map(ot=>jsxRuntimeExports.jsx(Frame,{...ot},ot.url))})}function Frame({url:_e,c:_=new Color$1,...tt}){const nt=reactExports.useRef(),rt=reactExports.useRef(),[,it]=useRoute("/item/:id"),[at,ot]=reactExports.useState(!1),[st]=reactExports.useState(()=>Math.random()),lt=tt.name?tt.name:getUuid(_e),ct=getUuid(_e),ut=(it==null?void 0:it.id)===ct;return useCursor(at),useFrame((ft,pt)=>{nt.current.material.zoom=1.5+Math.sin(st*1e4+ft.clock.elapsedTime/3)/2,easing.damp3(nt.current.scale,[.85*(!ut&&at?.85:1),.9*(!ut&&at?.905:1),1],.1,pt),easing.dampC(rt.current.material.color,at?"orange":"white",.1,pt)}),jsxRuntimeExports.jsxs("group",{...tt,children:[jsxRuntimeExports.jsxs("mesh",{name:ct,onPointerOver:ft=>(ft.stopPropagation(),ot(!0)),onPointerOut:()=>ot(!1),scale:[1,GOLDENRATIO,.05],position:[0,GOLDENRATIO/2,0],children:[jsxRuntimeExports.jsx("boxGeometry",{}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#151515",metalness:.5,roughness:.5,envMapIntensity:2}),jsxRuntimeExports.jsxs("mesh",{ref:rt,raycast:()=>null,scale:[.9,.93,.9],position:[0,0,.2],children:[jsxRuntimeExports.jsx("boxGeometry",{}),jsxRuntimeExports.jsx("meshBasicMaterial",{toneMapped:!1,fog:!1})]}),jsxRuntimeExports.jsx(Image,{raycast:()=>null,ref:nt,position:[0,0,.7],url:_e})]}),jsxRuntimeExports.jsx(Text,{maxWidth:.1,anchorX:"left",anchorY:"top",position:[.55,GOLDENRATIO,0],fontSize:.025,children:lt||ct.split("-").join(" ")})]})}const index="",pexel=_e=>`https://images.pexels.com/photos/${_e}/pexels-photo-${_e}.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260`,images=[{position:[0,0,1.5],rotation:[0,0,0],name:"Monalisa",url:"./monalisa-760x1260.jpg"},{position:[-.8,0,-.6],rotation:[0,0,0],url:pexel(416430)},{position:[.8,0,-.6],rotation:[0,0,0],url:pexel(310452)},{position:[-1.75,0,.25],rotation:[0,Math.PI/2.5,0],url:pexel(327482)},{position:[-2.15,0,1.5],rotation:[0,Math.PI/2.5,0],url:pexel(325185)},{position:[-2,0,2.75],rotation:[0,Math.PI/2.5,0],name:"Starry Night",url:"./noite-estrelada-750x1260.jpg"},{position:[1.75,0,.25],rotation:[0,-Math.PI/2.5,0],name:"The Scream",url:"./o-grito-750x1260.jpg"},{position:[2.15,0,1.5],rotation:[0,-Math.PI/2.5,0],url:pexel(911738)},{position:[2,0,2.75],rotation:[0,-Math.PI/2.5,0],url:pexel(1738986)}];client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{images})}))});export default v3();
